/*! For license information please see main.99b67663.js.LICENSE.txt */
(()=>{var e={9813:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,A="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,D(_);else{var t=r(u);null!==t&&O(b,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var o=f;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,E=!1,S=null,C=-1,M=5,T=-1;function I(){return!(t.unstable_now()-T<M)}function B(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?w():(E=!1,S=null)}}else E=!1}if("function"===typeof A)w=function(){A(B)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=B,w=function(){R.postMessage(null)}}else w=function(){v(B,0)};function D(e){S=e,E||(E=!0,w())}function O(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,O(b,o-a))):(e.sortIndex=s,n(c,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8784:(e,t,n)=>{"use strict";e.exports=n(9813)},4695:e=>{function t(e,t,n){var r,i,o,a,s;function l(){var c=Date.now()-a;c<t&&c>=0?r=setTimeout(l,t-c):(r=null,n||(s=e.apply(o,i),o=i=null))}null==t&&(t=100);var c=function(){o=this,i=arguments,a=Date.now();var c=n&&!r;return r||(r=setTimeout(l,t)),c&&(s=e.apply(o,i),o=i=null),s};return c.clear=function(){r&&(clearTimeout(r),r=null)},c.flush=function(){r&&(s=e.apply(o,i),o=i=null,clearTimeout(r),r=null)},c}t.debounce=t,e.exports=t},8210:function(e,t,n){var r;!function(){"use strict";var i,o=1e9,a={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},s=!0,l="[DecimalError] ",c=l+"Invalid argument: ",u=l+"Exponent out of range: ",h=Math.floor,d=Math.pow,f=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,p=1e7,m=7,g=9007199254740991,v=h(g/m),y={};function A(e,t){var n,r,i,o,a,l,c,u,h=e.constructor,d=h.precision;if(!e.s||!t.s)return t.s||(t=new h(e)),s?I(t,d):t;if(c=e.d,u=t.d,a=e.e,i=t.e,c=c.slice(),o=a-i){for(o<0?(r=c,o=-o,l=u.length):(r=u,i=a,l=c.length),o>(l=(a=Math.ceil(d/m))>l?a+1:l+1)&&(o=l,r.length=1),r.reverse();o--;)r.push(0);r.reverse()}for((l=c.length)-(o=u.length)<0&&(o=l,r=u,u=c,c=r),n=0;o;)n=(c[--o]=c[o]+u[o]+n)/p|0,c[o]%=p;for(n&&(c.unshift(n),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,s?I(t,d):t}function x(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function b(e){var t,n,r,i=e.length-1,o="",a=e[0];if(i>0){for(o+=a,t=1;t<i;t++)r=e[t]+"",(n=m-r.length)&&(o+=C(n)),o+=r;a=e[t],(n=m-(r=a+"").length)&&(o+=C(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return o+a}y.absoluteValue=y.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},y.comparedTo=y.cmp=function(e){var t,n,r,i,o=this;if(e=new o.constructor(e),o.s!==e.s)return o.s||-e.s;if(o.e!==e.e)return o.e>e.e^o.s<0?1:-1;for(t=0,n=(r=o.d.length)<(i=e.d.length)?r:i;t<n;++t)if(o.d[t]!==e.d[t])return o.d[t]>e.d[t]^o.s<0?1:-1;return r===i?0:r>i^o.s<0?1:-1},y.decimalPlaces=y.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*m;if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},y.dividedBy=y.div=function(e){return _(this,new this.constructor(e))},y.dividedToIntegerBy=y.idiv=function(e){var t=this.constructor;return I(_(this,new t(e),0,1),t.precision)},y.equals=y.eq=function(e){return!this.cmp(e)},y.exponent=function(){return E(this)},y.greaterThan=y.gt=function(e){return this.cmp(e)>0},y.greaterThanOrEqualTo=y.gte=function(e){return this.cmp(e)>=0},y.isInteger=y.isint=function(){return this.e>this.d.length-2},y.isNegative=y.isneg=function(){return this.s<0},y.isPositive=y.ispos=function(){return this.s>0},y.isZero=function(){return 0===this.s},y.lessThan=y.lt=function(e){return this.cmp(e)<0},y.lessThanOrEqualTo=y.lte=function(e){return this.cmp(e)<1},y.logarithm=y.log=function(e){var t,n=this,r=n.constructor,o=r.precision,a=o+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(s=!1,t=_(M(n,a),M(e,a),a),s=!0,I(t,o))},y.minus=y.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?B(t,e):A(t,(e.s=-e.s,e))},y.modulo=y.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(s=!1,t=_(n,e,0,1).times(e),s=!0,n.minus(t)):I(new r(n),i)},y.naturalExponential=y.exp=function(){return w(this)},y.naturalLogarithm=y.ln=function(){return M(this)},y.negated=y.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},y.plus=y.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?A(t,e):B(t,(e.s=-e.s,e))},y.precision=y.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=E(i)+1,n=(r=i.d.length-1)*m+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},y.squareRoot=y.sqrt=function(){var e,t,n,r,i,o,a,c=this,u=c.constructor;if(c.s<1){if(!c.s)return new u(0);throw Error(l+"NaN")}for(e=E(c),s=!1,0==(i=Math.sqrt(+c))||i==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=h((e+1)/2)-(e<0||e%2),r=new u(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new u(i.toString()),i=a=(n=u.precision)+3;;)if(r=(o=r).plus(_(c,o,a+2)).times(.5),b(o.d).slice(0,a)===(t=b(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(I(o,n+1,0),o.times(o).eq(c)){r=o;break}}else if("9999"!=t)break;a+=4}return s=!0,I(r,n)},y.times=y.mul=function(e){var t,n,r,i,o,a,l,c,u,h=this,d=h.constructor,f=h.d,m=(e=new d(e)).d;if(!h.s||!e.s)return new d(0);for(e.s*=h.s,n=h.e+e.e,(c=f.length)<(u=m.length)&&(o=f,f=m,m=o,a=c,c=u,u=a),o=[],r=a=c+u;r--;)o.push(0);for(r=u;--r>=0;){for(t=0,i=c+r;i>r;)l=o[i]+m[r]*f[i-r-1]+t,o[i--]=l%p|0,t=l/p|0;o[i]=(o[i]+t)%p|0}for(;!o[--a];)o.pop();return t?++n:o.shift(),e.d=o,e.e=n,s?I(e,d.precision):e},y.toDecimalPlaces=y.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(x(e,0,o),void 0===t?t=r.rounding:x(t,0,8),I(n,e+E(n)+1,t))},y.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=P(r,!0):(x(e,0,o),void 0===t?t=i.rounding:x(t,0,8),n=P(r=I(new i(r),e+1,t),!0,e+1)),n},y.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?P(i):(x(e,0,o),void 0===t?t=a.rounding:x(t,0,8),n=P((r=I(new a(i),e+E(i)+1,t)).abs(),!1,e+E(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},y.toInteger=y.toint=function(){var e=this,t=e.constructor;return I(new t(e),E(e)+1,t.rounding)},y.toNumber=function(){return+this},y.toPower=y.pow=function(e){var t,n,r,o,a,c,u=this,d=u.constructor,f=+(e=new d(e));if(!e.s)return new d(i);if(!(u=new d(u)).s){if(e.s<1)throw Error(l+"Infinity");return u}if(u.eq(i))return u;if(r=d.precision,e.eq(i))return I(u,r);if(c=(t=e.e)>=(n=e.d.length-1),a=u.s,c){if((n=f<0?-f:f)<=g){for(o=new d(i),t=Math.ceil(r/m+4),s=!1;n%2&&R((o=o.times(u)).d,t),0!==(n=h(n/2));)R((u=u.times(u)).d,t);return s=!0,e.s<0?new d(i).div(o):I(o,r)}}else if(a<0)throw Error(l+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,u.s=1,s=!1,o=e.times(M(u,r+12)),s=!0,(o=w(o)).s=a,o},y.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?r=P(i,(n=E(i))<=a.toExpNeg||n>=a.toExpPos):(x(e,1,o),void 0===t?t=a.rounding:x(t,0,8),r=P(i=I(new a(i),e,t),e<=(n=E(i))||n<=a.toExpNeg,e)),r},y.toSignificantDigits=y.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(x(e,1,o),void 0===t?t=n.rounding:x(t,0,8)),I(new n(this),e,t)},y.toString=y.valueOf=y.val=y.toJSON=function(){var e=this,t=E(e),n=e.constructor;return P(e,t<=n.toExpNeg||t>=n.toExpPos)};var _=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%p|0,r=n/p|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,o;if(n!=r)o=n>r?1:-1;else for(i=o=0;i<n;i++)if(e[i]!=t[i]){o=e[i]>t[i]?1:-1;break}return o}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*p+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,o,a){var s,c,u,h,d,f,g,v,y,A,x,b,_,w,S,C,M,T,B=r.constructor,P=r.s==i.s?1:-1,R=r.d,D=i.d;if(!r.s)return new B(r);if(!i.s)throw Error(l+"Division by zero");for(c=r.e-i.e,M=D.length,S=R.length,v=(g=new B(P)).d=[],u=0;D[u]==(R[u]||0);)++u;if(D[u]>(R[u]||0)&&--c,(b=null==o?o=B.precision:a?o+(E(r)-E(i))+1:o)<0)return new B(0);if(b=b/m+2|0,u=0,1==M)for(h=0,D=D[0],b++;(u<S||h)&&b--;u++)_=h*p+(R[u]||0),v[u]=_/D|0,h=_%D|0;else{for((h=p/(D[0]+1)|0)>1&&(D=e(D,h),R=e(R,h),M=D.length,S=R.length),w=M,A=(y=R.slice(0,M)).length;A<M;)y[A++]=0;(T=D.slice()).unshift(0),C=D[0],D[1]>=p/2&&++C;do{h=0,(s=t(D,y,M,A))<0?(x=y[0],M!=A&&(x=x*p+(y[1]||0)),(h=x/C|0)>1?(h>=p&&(h=p-1),1==(s=t(d=e(D,h),y,f=d.length,A=y.length))&&(h--,n(d,M<f?T:D,f))):(0==h&&(s=h=1),d=D.slice()),(f=d.length)<A&&d.unshift(0),n(y,d,A),-1==s&&(s=t(D,y,M,A=y.length))<1&&(h++,n(y,M<A?T:D,A)),A=y.length):0===s&&(h++,y=[0]),v[u++]=h,s&&y[0]?y[A++]=R[w]||0:(y=[R[w]],A=1)}while((w++<S||void 0!==y[0])&&b--)}return v[0]||v.shift(),g.e=c,I(g,a?o+E(g)+1:o)}}();function w(e,t){var n,r,o,a,l,c=0,h=0,f=e.constructor,p=f.precision;if(E(e)>16)throw Error(u+E(e));if(!e.s)return new f(i);for(null==t?(s=!1,l=p):l=t,a=new f(.03125);e.abs().gte(.1);)e=e.times(a),h+=5;for(l+=Math.log(d(2,h))/Math.LN10*2+5|0,n=r=o=new f(i),f.precision=l;;){if(r=I(r.times(e),l),n=n.times(++c),b((a=o.plus(_(r,n,l))).d).slice(0,l)===b(o.d).slice(0,l)){for(;h--;)o=I(o.times(o),l);return f.precision=p,null==t?(s=!0,I(o,p)):o}o=a}}function E(e){for(var t=e.e*m,n=e.d[0];n>=10;n/=10)t++;return t}function S(e,t,n){if(t>e.LN10.sd())throw s=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return I(new e(e.LN10),t)}function C(e){for(var t="";e--;)t+="0";return t}function M(e,t){var n,r,o,a,c,u,h,d,f,p=1,m=e,g=m.d,v=m.constructor,y=v.precision;if(m.s<1)throw Error(l+(m.s?"NaN":"-Infinity"));if(m.eq(i))return new v(0);if(null==t?(s=!1,d=y):d=t,m.eq(10))return null==t&&(s=!0),S(v,d);if(d+=10,v.precision=d,r=(n=b(g)).charAt(0),a=E(m),!(Math.abs(a)<15e14))return h=S(v,d+2,y).times(a+""),m=M(new v(r+"."+n.slice(1)),d-10).plus(h),v.precision=y,null==t?(s=!0,I(m,y)):m;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=b((m=m.times(e)).d)).charAt(0),p++;for(a=E(m),r>1?(m=new v("0."+n),a++):m=new v(r+"."+n.slice(1)),u=c=m=_(m.minus(i),m.plus(i),d),f=I(m.times(m),d),o=3;;){if(c=I(c.times(f),d),b((h=u.plus(_(c,new v(o),d))).d).slice(0,d)===b(u.d).slice(0,d))return u=u.times(2),0!==a&&(u=u.plus(S(v,d+2,y).times(a+""))),u=_(u,new v(p),d),v.precision=y,null==t?(s=!0,I(u,y)):u;u=h,o+=2}}function T(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=h(n/m),e.d=[],r=(n+1)%m,n<0&&(r+=m),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=m;r<i;)e.d.push(+t.slice(r,r+=m));t=t.slice(r),r=m-t.length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),s&&(e.e>v||e.e<-v))throw Error(u+n)}else e.s=0,e.e=0,e.d=[0];return e}function I(e,t,n){var r,i,o,a,l,c,f,g,y=e.d;for(a=1,o=y[0];o>=10;o/=10)a++;if((r=t-a)<0)r+=m,i=t,f=y[g=0];else{if((g=Math.ceil((r+1)/m))>=(o=y.length))return e;for(f=o=y[g],a=1;o>=10;o/=10)a++;i=(r%=m)-m+a}if(void 0!==n&&(l=f/(o=d(10,a-i-1))%10|0,c=t<0||void 0!==y[g+1]||f%o,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?i>0?f/d(10,a-i):0:y[g-1])%10&1||n==(e.s<0?8:7))),t<1||!y[0])return c?(o=E(e),y.length=1,t=t-o-1,y[0]=d(10,(m-t%m)%m),e.e=h(-t/m)||0):(y.length=1,y[0]=e.e=e.s=0),e;if(0==r?(y.length=g,o=1,g--):(y.length=g+1,o=d(10,m-r),y[g]=i>0?(f/d(10,a-i)%d(10,i)|0)*o:0),c)for(;;){if(0==g){(y[0]+=o)==p&&(y[0]=1,++e.e);break}if(y[g]+=o,y[g]!=p)break;y[g--]=0,o=1}for(r=y.length;0===y[--r];)y.pop();if(s&&(e.e>v||e.e<-v))throw Error(u+E(e));return e}function B(e,t){var n,r,i,o,a,l,c,u,h,d,f=e.constructor,g=f.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new f(e),s?I(t,g):t;if(c=e.d,d=t.d,r=t.e,u=e.e,c=c.slice(),a=u-r){for((h=a<0)?(n=c,a=-a,l=d.length):(n=d,r=u,l=c.length),a>(i=Math.max(Math.ceil(g/m),l)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((h=(i=c.length)<(l=d.length))&&(l=i),i=0;i<l;i++)if(c[i]!=d[i]){h=c[i]<d[i];break}a=0}for(h&&(n=c,c=d,d=n,t.s=-t.s),l=c.length,i=d.length-l;i>0;--i)c[l++]=0;for(i=d.length;i>a;){if(c[--i]<d[i]){for(o=i;o&&0===c[--o];)c[o]=p-1;--c[o],c[i]+=p}c[i]-=d[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,s?I(t,g):t):new f(0)}function P(e,t,n){var r,i=E(e),o=b(e.d),a=o.length;return t?(n&&(r=n-a)>0?o=o.charAt(0)+"."+o.slice(1)+C(r):a>1&&(o=o.charAt(0)+"."+o.slice(1)),o=o+(i<0?"e":"e+")+i):i<0?(o="0."+C(-i-1)+o,n&&(r=n-a)>0&&(o+=C(r))):i>=a?(o+=C(i+1-a),n&&(r=n-i-1)>0&&(o=o+"."+C(r))):((r=i+1)<a&&(o=o.slice(0,r)+"."+o.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(o+="."),o+=C(r))),e.s<0?"-"+o:o}function R(e,t){if(e.length>t)return e.length=t,!0}function D(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,o,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(h(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}a=function e(t){var n,r,i;function o(e){var t=this;if(!(t instanceof o))return new o(e);if(t.constructor=o,e instanceof o)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):T(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!f.test(e))throw Error(c+e);T(t,e)}if(o.prototype=y,o.ROUND_UP=0,o.ROUND_DOWN=1,o.ROUND_CEIL=2,o.ROUND_FLOOR=3,o.ROUND_HALF_UP=4,o.ROUND_HALF_DOWN=5,o.ROUND_HALF_EVEN=6,o.ROUND_HALF_CEIL=7,o.ROUND_HALF_FLOOR=8,o.clone=e,o.config=o.set=D,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return o.config(t),o}(a),a.default=a.Decimal=a,i=new a(1),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},7283:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function o(e,t,r,o,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var s=new i(r,o||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],s]:e._events[l].push(s):(e._events[l]=s,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function s(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),s.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},s.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,a=new Array(o);i<o;i++)a[i]=r[i].fn;return a},s.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,i,o,a){var s=n?n+e:e;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,i),!0;case 5:return u.fn.call(u.context,t,r,i,o),!0;case 6:return u.fn.call(u.context,t,r,i,o,a),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,f=u.length;for(c=0;c<f;c++)switch(u[c].once&&this.removeListener(e,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,t);break;case 3:u[c].fn.call(u[c].context,t,r);break;case 4:u[c].fn.call(u[c].context,t,r,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},s.prototype.on=function(e,t,n){return o(this,e,t,n,!1)},s.prototype.once=function(e,t,n){return o(this,e,t,n,!0)},s.prototype.removeListener=function(e,t,r,i){var o=n?n+e:e;if(!this._events[o])return this;if(!t)return a(this,o),this;var s=this._events[o];if(s.fn)s.fn!==t||i&&!s.once||r&&s.context!==r||a(this,o);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==t||i&&!s[l].once||r&&s[l].context!==r)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:a(this,o)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,e.exports=s},7685:(e,t,n)=>{var r=n(7937)(n(6552),"DataView");e.exports=r},8724:(e,t,n)=>{var r=n(7615),i=n(5051),o=n(2154),a=n(8734),s=n(2662);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},7160:(e,t,n)=>{var r=n(7563),i=n(9935),o=n(4190),a=n(1946),s=n(1714);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},5204:(e,t,n)=>{var r=n(7937)(n(6552),"Map");e.exports=r},4816:(e,t,n)=>{var r=n(7251),i=n(7159),o=n(438),a=n(9394),s=n(6874);function l(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype.delete=i,l.prototype.get=o,l.prototype.has=a,l.prototype.set=s,e.exports=l},5387:(e,t,n)=>{var r=n(7937)(n(6552),"Promise");e.exports=r},2070:(e,t,n)=>{var r=n(7937)(n(6552),"Set");e.exports=r},8902:(e,t,n)=>{var r=n(4816),i=n(6179),o=n(6704);function a(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new r;++t<n;)this.add(e[t])}a.prototype.add=a.prototype.push=i,a.prototype.has=o,e.exports=a},5538:(e,t,n)=>{var r=n(7160),i=n(4545),o=n(793),a=n(7760),s=n(3892),l=n(6788);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype.delete=o,c.prototype.get=a,c.prototype.has=s,c.prototype.set=l,e.exports=c},9812:(e,t,n)=>{var r=n(6552).Symbol;e.exports=r},2929:(e,t,n)=>{var r=n(6552).Uint8Array;e.exports=r},6600:(e,t,n)=>{var r=n(7937)(n(6552),"WeakMap");e.exports=r},1170:e=>{e.exports=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}},5295:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}},7529:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}},5866:(e,t,n)=>{var r=n(8468);e.exports=function(e,t){return!!(null==e?0:e.length)&&r(e,t,0)>-1}},1558:e=>{e.exports=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}},3204:(e,t,n)=>{var r=n(3343),i=n(2777),o=n(4052),a=n(4543),s=n(9194),l=n(1268),c=Object.prototype.hasOwnProperty;e.exports=function(e,t){var n=o(e),u=!n&&i(e),h=!n&&!u&&a(e),d=!n&&!u&&!h&&l(e),f=n||u||h||d,p=f?r(e.length,String):[],m=p.length;for(var g in e)!t&&!c.call(e,g)||f&&("length"==g||h&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||s(g,m))||p.push(g);return p}},149:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}},8895:e=>{e.exports=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}},2587:e=>{e.exports=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}},5967:e=>{e.exports=function(e){return e.split("")}},1340:(e,t,n)=>{var r=n(3211);e.exports=function(e,t){for(var n=e.length;n--;)if(r(e[n][0],t))return n;return-1}},1775:(e,t,n)=>{var r=n(5654);e.exports=function(e,t,n){"__proto__"==t&&r?r(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}},5652:(e,t,n)=>{var r=n(4664),i=n(6516)(r);e.exports=i},4746:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n=!0;return r(e,(function(e,r,i){return n=!!t(e,r,i)})),n}},9742:(e,t,n)=>{var r=n(9841);e.exports=function(e,t,n){for(var i=-1,o=e.length;++i<o;){var a=e[i],s=t(a);if(null!=s&&(void 0===l?s===s&&!r(s):n(s,l)))var l=s,c=a}return c}},5816:e=>{e.exports=function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}},755:(e,t,n)=>{var r=n(8895),i=n(7116);e.exports=function e(t,n,o,a,s){var l=-1,c=t.length;for(o||(o=i),s||(s=[]);++l<c;){var u=t[l];n>0&&o(u)?n>1?e(u,n-1,o,a,s):r(s,u):a||(s[s.length]=u)}return s}},4258:(e,t,n)=>{var r=n(5906)();e.exports=r},4664:(e,t,n)=>{var r=n(4258),i=n(8673);e.exports=function(e,t){return e&&r(e,t,i)}},2969:(e,t,n)=>{var r=n(5324),i=n(914);e.exports=function(e,t){for(var n=0,o=(t=r(t,e)).length;null!=e&&n<o;)e=e[i(t[n++])];return n&&n==o?e:void 0}},4262:(e,t,n)=>{var r=n(8895),i=n(4052);e.exports=function(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}},6913:(e,t,n)=>{var r=n(9812),i=n(4552),o=n(6095),a=r?r.toStringTag:void 0;e.exports=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":a&&a in Object(e)?i(e):o(e)}},7498:e=>{e.exports=function(e,t){return e>t}},7894:e=>{e.exports=function(e,t){return null!=e&&t in Object(e)}},8468:(e,t,n)=>{var r=n(5816),i=n(644),o=n(4020);e.exports=function(e,t,n){return t===t?o(e,t,n):r(e,i,n)}},5193:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return i(e)&&"[object Arguments]"==r(e)}},6989:(e,t,n)=>{var r=n(6399),i=n(2761);e.exports=function e(t,n,o,a,s){return t===n||(null==t||null==n||!i(t)&&!i(n)?t!==t&&n!==n:r(t,n,o,a,e,s))}},6399:(e,t,n)=>{var r=n(5538),i=n(3668),o=n(9987),a=n(5752),s=n(6924),l=n(4052),c=n(4543),u=n(1268),h="[object Arguments]",d="[object Array]",f="[object Object]",p=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,m,g,v){var y=l(e),A=l(t),x=y?d:s(e),b=A?d:s(t),_=(x=x==h?f:x)==f,w=(b=b==h?f:b)==f,E=x==b;if(E&&c(e)){if(!c(t))return!1;y=!0,_=!1}if(E&&!_)return v||(v=new r),y||u(e)?i(e,t,n,m,g,v):o(e,t,x,n,m,g,v);if(!(1&n)){var S=_&&p.call(e,"__wrapped__"),C=w&&p.call(t,"__wrapped__");if(S||C){var M=S?e.value():e,T=C?t.value():t;return v||(v=new r),g(M,T,n,m,v)}}return!!E&&(v||(v=new r),a(e,t,n,m,g,v))}},6532:(e,t,n)=>{var r=n(5538),i=n(6989);e.exports=function(e,t,n,o){var a=n.length,s=a,l=!o;if(null==e)return!s;for(e=Object(e);a--;){var c=n[a];if(l&&c[2]?c[1]!==e[c[0]]:!(c[0]in e))return!1}for(;++a<s;){var u=(c=n[a])[0],h=e[u],d=c[1];if(l&&c[2]){if(void 0===h&&!(u in e))return!1}else{var f=new r;if(o)var p=o(h,d,u,e,t,f);if(!(void 0===p?i(d,h,3,o,f):p))return!1}}return!0}},644:e=>{e.exports=function(e){return e!==e}},6954:(e,t,n)=>{var r=n(1629),i=n(7857),o=n(6686),a=n(6996),s=/^\[object .+?Constructor\]$/,l=Function.prototype,c=Object.prototype,u=l.toString,h=c.hasOwnProperty,d=RegExp("^"+u.call(h).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");e.exports=function(e){return!(!o(e)||i(e))&&(r(e)?d:s).test(a(e))}},5428:(e,t,n)=>{var r=n(6913),i=n(6173),o=n(2761),a={};a["[object Float32Array]"]=a["[object Float64Array]"]=a["[object Int8Array]"]=a["[object Int16Array]"]=a["[object Int32Array]"]=a["[object Uint8Array]"]=a["[object Uint8ClampedArray]"]=a["[object Uint16Array]"]=a["[object Uint32Array]"]=!0,a["[object Arguments]"]=a["[object Array]"]=a["[object ArrayBuffer]"]=a["[object Boolean]"]=a["[object DataView]"]=a["[object Date]"]=a["[object Error]"]=a["[object Function]"]=a["[object Map]"]=a["[object Number]"]=a["[object Object]"]=a["[object RegExp]"]=a["[object Set]"]=a["[object String]"]=a["[object WeakMap]"]=!1,e.exports=function(e){return o(e)&&i(e.length)&&!!a[r(e)]}},9096:(e,t,n)=>{var r=n(9256),i=n(5029),o=n(3279),a=n(4052),s=n(3932);e.exports=function(e){return"function"==typeof e?e:null==e?o:"object"==typeof e?a(e)?i(e[0],e[1]):r(e):s(e)}},3713:(e,t,n)=>{var r=n(6140),i=n(1143),o=Object.prototype.hasOwnProperty;e.exports=function(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))o.call(e,n)&&"constructor"!=n&&t.push(n);return t}},61:e=>{e.exports=function(e,t){return e<t}},8883:(e,t,n)=>{var r=n(5652),i=n(6571);e.exports=function(e,t){var n=-1,o=i(e)?Array(e.length):[];return r(e,(function(e,r,i){o[++n]=t(e,r,i)})),o}},9256:(e,t,n)=>{var r=n(6532),i=n(3781),o=n(1310);e.exports=function(e){var t=i(e);return 1==t.length&&t[0][2]?o(t[0][0],t[0][1]):function(n){return n===e||r(n,e,t)}}},5029:(e,t,n)=>{var r=n(6989),i=n(3097),o=n(3366),a=n(2597),s=n(9417),l=n(1310),c=n(914);e.exports=function(e,t){return a(e)&&s(t)?l(c(e),t):function(n){var a=i(n,e);return void 0===a&&a===t?o(n,e):r(t,a,3)}}},2536:(e,t,n)=>{var r=n(149),i=n(2969),o=n(9096),a=n(8883),s=n(320),l=n(7574),c=n(5893),u=n(3279),h=n(4052);e.exports=function(e,t,n){t=t.length?r(t,(function(e){return h(e)?function(t){return i(t,1===e.length?e[0]:e)}:e})):[u];var d=-1;t=r(t,l(o));var f=a(e,(function(e,n,i){return{criteria:r(t,(function(t){return t(e)})),index:++d,value:e}}));return s(f,(function(e,t){return c(e,t,n)}))}},396:e=>{e.exports=function(e){return function(t){return null==t?void 0:t[e]}}},2866:(e,t,n)=>{var r=n(2969);e.exports=function(e){return function(t){return r(t,e)}}},9676:e=>{var t=Math.ceil,n=Math.max;e.exports=function(e,r,i,o){for(var a=-1,s=n(t((r-e)/(i||1)),0),l=Array(s);s--;)l[o?s:++a]=e,e+=i;return l}},5647:(e,t,n)=>{var r=n(3279),i=n(5636),o=n(6350);e.exports=function(e,t){return o(i(e,t,r),e+"")}},8325:(e,t,n)=>{var r=n(2541),i=n(5654),o=n(3279),a=i?function(e,t){return i(e,"toString",{configurable:!0,enumerable:!1,value:r(t),writable:!0})}:o;e.exports=a},3871:e=>{e.exports=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}},2165:(e,t,n)=>{var r=n(5652);e.exports=function(e,t){var n;return r(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n}},320:e=>{e.exports=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}},3343:e=>{e.exports=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}},8541:(e,t,n)=>{var r=n(9812),i=n(149),o=n(4052),a=n(9841),s=r?r.prototype:void 0,l=s?s.toString:void 0;e.exports=function e(t){if("string"==typeof t)return t;if(o(t))return i(t,e)+"";if(a(t))return l?l.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n}},1141:(e,t,n)=>{var r=n(143),i=/^\s+/;e.exports=function(e){return e?e.slice(0,r(e)+1).replace(i,""):e}},7574:e=>{e.exports=function(e){return function(t){return e(t)}}},4416:(e,t,n)=>{var r=n(8902),i=n(5866),o=n(1558),a=n(8114),s=n(8182),l=n(2074);e.exports=function(e,t,n){var c=-1,u=i,h=e.length,d=!0,f=[],p=f;if(n)d=!1,u=o;else if(h>=200){var m=t?null:s(e);if(m)return l(m);d=!1,u=a,p=new r}else p=t?[]:f;e:for(;++c<h;){var g=e[c],v=t?t(g):g;if(g=n||0!==g?g:0,d&&v===v){for(var y=p.length;y--;)if(p[y]===v)continue e;t&&p.push(v),f.push(g)}else u(p,v,n)||(p!==f&&p.push(v),f.push(g))}return f}},8114:e=>{e.exports=function(e,t){return e.has(t)}},5324:(e,t,n)=>{var r=n(4052),i=n(2597),o=n(4079),a=n(1069);e.exports=function(e,t){return r(e)?e:i(e,t)?[e]:o(a(e))}},8189:(e,t,n)=>{var r=n(3871);e.exports=function(e,t,n){var i=e.length;return n=void 0===n?i:n,!t&&n>=i?e:r(e,t,n)}},6599:(e,t,n)=>{var r=n(9841);e.exports=function(e,t){if(e!==t){var n=void 0!==e,i=null===e,o=e===e,a=r(e),s=void 0!==t,l=null===t,c=t===t,u=r(t);if(!l&&!u&&!a&&e>t||a&&s&&c&&!l&&!u||i&&s&&c||!n&&c||!o)return 1;if(!i&&!a&&!u&&e<t||u&&n&&o&&!i&&!a||l&&n&&o||!s&&o||!c)return-1}return 0}},5893:(e,t,n)=>{var r=n(6599);e.exports=function(e,t,n){for(var i=-1,o=e.criteria,a=t.criteria,s=o.length,l=n.length;++i<s;){var c=r(o[i],a[i]);if(c)return i>=l?c:c*("desc"==n[i]?-1:1)}return e.index-t.index}},3440:(e,t,n)=>{var r=n(6552)["__core-js_shared__"];e.exports=r},6516:(e,t,n)=>{var r=n(6571);e.exports=function(e,t){return function(n,i){if(null==n)return n;if(!r(n))return e(n,i);for(var o=n.length,a=t?o:-1,s=Object(n);(t?a--:++a<o)&&!1!==i(s[a],a,s););return n}}},5906:e=>{e.exports=function(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}},7676:(e,t,n)=>{var r=n(8189),i=n(6311),o=n(9115),a=n(1069);e.exports=function(e){return function(t){t=a(t);var n=i(t)?o(t):void 0,s=n?n[0]:t.charAt(0),l=n?r(n,1).join(""):t.slice(1);return s[e]()+l}}},9995:(e,t,n)=>{var r=n(9096),i=n(6571),o=n(8673);e.exports=function(e){return function(t,n,a){var s=Object(t);if(!i(t)){var l=r(n,3);t=o(t),n=function(e){return l(s[e],e,s)}}var c=e(t,n,a);return c>-1?s[l?t[c]:c]:void 0}}},3331:(e,t,n)=>{var r=n(9676),i=n(929),o=n(7303);e.exports=function(e){return function(t,n,a){return a&&"number"!=typeof a&&i(t,n,a)&&(n=a=void 0),t=o(t),void 0===n?(n=t,t=0):n=o(n),a=void 0===a?t<n?1:-1:o(a),r(t,n,a,e)}}},8182:(e,t,n)=>{var r=n(2070),i=n(5713),o=n(2074),a=r&&1/o(new r([,-0]))[1]==1/0?function(e){return new r(e)}:i;e.exports=a},5654:(e,t,n)=>{var r=n(7937),i=function(){try{var e=r(Object,"defineProperty");return e({},"",{}),e}catch(t){}}();e.exports=i},3668:(e,t,n)=>{var r=n(8902),i=n(2587),o=n(8114);e.exports=function(e,t,n,a,s,l){var c=1&n,u=e.length,h=t.length;if(u!=h&&!(c&&h>u))return!1;var d=l.get(e),f=l.get(t);if(d&&f)return d==t&&f==e;var p=-1,m=!0,g=2&n?new r:void 0;for(l.set(e,t),l.set(t,e);++p<u;){var v=e[p],y=t[p];if(a)var A=c?a(y,v,p,t,e,l):a(v,y,p,e,t,l);if(void 0!==A){if(A)continue;m=!1;break}if(g){if(!i(t,(function(e,t){if(!o(g,t)&&(v===e||s(v,e,n,a,l)))return g.push(t)}))){m=!1;break}}else if(v!==y&&!s(v,y,n,a,l)){m=!1;break}}return l.delete(e),l.delete(t),m}},9987:(e,t,n)=>{var r=n(9812),i=n(2929),o=n(3211),a=n(3668),s=n(4160),l=n(2074),c=r?r.prototype:void 0,u=c?c.valueOf:void 0;e.exports=function(e,t,n,r,c,h,d){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!h(new i(e),new i(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return o(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var f=s;case"[object Set]":var p=1&r;if(f||(f=l),e.size!=t.size&&!p)return!1;var m=d.get(e);if(m)return m==t;r|=2,d.set(e,t);var g=a(f(e),f(t),r,c,h,d);return d.delete(e),g;case"[object Symbol]":if(u)return u.call(e)==u.call(t)}return!1}},5752:(e,t,n)=>{var r=n(9395),i=Object.prototype.hasOwnProperty;e.exports=function(e,t,n,o,a,s){var l=1&n,c=r(e),u=c.length;if(u!=r(t).length&&!l)return!1;for(var h=u;h--;){var d=c[h];if(!(l?d in t:i.call(t,d)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var m=!0;s.set(e,t),s.set(t,e);for(var g=l;++h<u;){var v=e[d=c[h]],y=t[d];if(o)var A=l?o(y,v,d,t,e,s):o(v,y,d,e,t,s);if(!(void 0===A?v===y||a(v,y,n,o,s):A)){m=!1;break}g||(g="constructor"==d)}if(m&&!g){var x=e.constructor,b=t.constructor;x==b||!("constructor"in e)||!("constructor"in t)||"function"==typeof x&&x instanceof x&&"function"==typeof b&&b instanceof b||(m=!1)}return s.delete(e),s.delete(t),m}},7105:(e,t,n)=>{var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},9395:(e,t,n)=>{var r=n(4262),i=n(9621),o=n(8673);e.exports=function(e){return r(e,o,i)}},2622:(e,t,n)=>{var r=n(705);e.exports=function(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}},3781:(e,t,n)=>{var r=n(9417),i=n(8673);e.exports=function(e){for(var t=i(e),n=t.length;n--;){var o=t[n],a=e[o];t[n]=[o,a,r(a)]}return t}},7937:(e,t,n)=>{var r=n(6954),i=n(4657);e.exports=function(e,t){var n=i(e,t);return r(n)?n:void 0}},5990:(e,t,n)=>{var r=n(3028)(Object.getPrototypeOf,Object);e.exports=r},4552:(e,t,n)=>{var r=n(9812),i=Object.prototype,o=i.hasOwnProperty,a=i.toString,s=r?r.toStringTag:void 0;e.exports=function(e){var t=o.call(e,s),n=e[s];try{e[s]=void 0;var r=!0}catch(l){}var i=a.call(e);return r&&(t?e[s]=n:delete e[s]),i}},9621:(e,t,n)=>{var r=n(7529),i=n(7828),o=Object.prototype.propertyIsEnumerable,a=Object.getOwnPropertySymbols,s=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return o.call(e,t)})))}:i;e.exports=s},6924:(e,t,n)=>{var r=n(7685),i=n(5204),o=n(5387),a=n(2070),s=n(6600),l=n(6913),c=n(6996),u="[object Map]",h="[object Promise]",d="[object Set]",f="[object WeakMap]",p="[object DataView]",m=c(r),g=c(i),v=c(o),y=c(a),A=c(s),x=l;(r&&x(new r(new ArrayBuffer(1)))!=p||i&&x(new i)!=u||o&&x(o.resolve())!=h||a&&x(new a)!=d||s&&x(new s)!=f)&&(x=function(e){var t=l(e),n="[object Object]"==t?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return p;case g:return u;case v:return h;case y:return d;case A:return f}return t}),e.exports=x},4657:e=>{e.exports=function(e,t){return null==e?void 0:e[t]}},9057:(e,t,n)=>{var r=n(5324),i=n(2777),o=n(4052),a=n(9194),s=n(6173),l=n(914);e.exports=function(e,t,n){for(var c=-1,u=(t=r(t,e)).length,h=!1;++c<u;){var d=l(t[c]);if(!(h=null!=e&&n(e,d)))break;e=e[d]}return h||++c!=u?h:!!(u=null==e?0:e.length)&&s(u)&&a(d,u)&&(o(e)||i(e))}},6311:e=>{var t=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");e.exports=function(e){return t.test(e)}},7615:(e,t,n)=>{var r=n(5575);e.exports=function(){this.__data__=r?r(null):{},this.size=0}},5051:e=>{e.exports=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}},2154:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;if(r){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return i.call(t,e)?t[e]:void 0}},8734:(e,t,n)=>{var r=n(5575),i=Object.prototype.hasOwnProperty;e.exports=function(e){var t=this.__data__;return r?void 0!==t[e]:i.call(t,e)}},2662:(e,t,n)=>{var r=n(5575);e.exports=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?"__lodash_hash_undefined__":t,this}},7116:(e,t,n)=>{var r=n(9812),i=n(2777),o=n(4052),a=r?r.isConcatSpreadable:void 0;e.exports=function(e){return o(e)||i(e)||!!(a&&e&&e[a])}},9194:e=>{var t=/^(?:0|[1-9]\d*)$/;e.exports=function(e,n){var r=typeof e;return!!(n=null==n?9007199254740991:n)&&("number"==r||"symbol"!=r&&t.test(e))&&e>-1&&e%1==0&&e<n}},929:(e,t,n)=>{var r=n(3211),i=n(6571),o=n(9194),a=n(6686);e.exports=function(e,t,n){if(!a(n))return!1;var s=typeof t;return!!("number"==s?i(n)&&o(t,n.length):"string"==s&&t in n)&&r(n[t],e)}},2597:(e,t,n)=>{var r=n(4052),i=n(9841),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,a=/^\w*$/;e.exports=function(e,t){if(r(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!i(e))||(a.test(e)||!o.test(e)||null!=t&&e in Object(t))}},705:e=>{e.exports=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}},7857:(e,t,n)=>{var r=n(3440),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();e.exports=function(e){return!!i&&i in e}},6140:e=>{var t=Object.prototype;e.exports=function(e){var n=e&&e.constructor;return e===("function"==typeof n&&n.prototype||t)}},9417:(e,t,n)=>{var r=n(6686);e.exports=function(e){return e===e&&!r(e)}},7563:e=>{e.exports=function(){this.__data__=[],this.size=0}},9935:(e,t,n)=>{var r=n(1340),i=Array.prototype.splice;e.exports=function(e){var t=this.__data__,n=r(t,e);return!(n<0)&&(n==t.length-1?t.pop():i.call(t,n,1),--this.size,!0)}},4190:(e,t,n)=>{var r=n(1340);e.exports=function(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}},1946:(e,t,n)=>{var r=n(1340);e.exports=function(e){return r(this.__data__,e)>-1}},1714:(e,t,n)=>{var r=n(1340);e.exports=function(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}},7251:(e,t,n)=>{var r=n(8724),i=n(7160),o=n(5204);e.exports=function(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}},7159:(e,t,n)=>{var r=n(2622);e.exports=function(e){var t=r(this,e).delete(e);return this.size-=t?1:0,t}},438:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).get(e)}},9394:(e,t,n)=>{var r=n(2622);e.exports=function(e){return r(this,e).has(e)}},6874:(e,t,n)=>{var r=n(2622);e.exports=function(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}},4160:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}},1310:e=>{e.exports=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}}},8259:(e,t,n)=>{var r=n(5797);e.exports=function(e){var t=r(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}},5575:(e,t,n)=>{var r=n(7937)(Object,"create");e.exports=r},1143:(e,t,n)=>{var r=n(3028)(Object.keys,Object);e.exports=r},6832:(e,t,n)=>{e=n.nmd(e);var r=n(7105),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,a=o&&o.exports===i&&r.process,s=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=s},6095:e=>{var t=Object.prototype.toString;e.exports=function(e){return t.call(e)}},3028:e=>{e.exports=function(e,t){return function(n){return e(t(n))}}},5636:(e,t,n)=>{var r=n(1170),i=Math.max;e.exports=function(e,t,n){return t=i(void 0===t?e.length-1:t,0),function(){for(var o=arguments,a=-1,s=i(o.length-t,0),l=Array(s);++a<s;)l[a]=o[t+a];a=-1;for(var c=Array(t+1);++a<t;)c[a]=o[a];return c[t]=n(l),r(e,this,c)}}},6552:(e,t,n)=>{var r=n(7105),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},6179:e=>{e.exports=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this}},6704:e=>{e.exports=function(e){return this.__data__.has(e)}},2074:e=>{e.exports=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}},6350:(e,t,n)=>{var r=n(8325),i=n(6578)(r);e.exports=i},6578:e=>{var t=Date.now;e.exports=function(e){var n=0,r=0;return function(){var i=t(),o=16-(i-r);if(r=i,o>0){if(++n>=800)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}},4545:(e,t,n)=>{var r=n(7160);e.exports=function(){this.__data__=new r,this.size=0}},793:e=>{e.exports=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}},7760:e=>{e.exports=function(e){return this.__data__.get(e)}},3892:e=>{e.exports=function(e){return this.__data__.has(e)}},6788:(e,t,n)=>{var r=n(7160),i=n(5204),o=n(4816);e.exports=function(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<199)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}},4020:e=>{e.exports=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}},9115:(e,t,n)=>{var r=n(5967),i=n(6311),o=n(715);e.exports=function(e){return i(e)?o(e):r(e)}},4079:(e,t,n)=>{var r=n(8259),i=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,a=r((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(i,(function(e,n,r,i){t.push(r?i.replace(o,"$1"):n||e)})),t}));e.exports=a},914:(e,t,n)=>{var r=n(9841);e.exports=function(e){if("string"==typeof e||r(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t}},6996:e=>{var t=Function.prototype.toString;e.exports=function(e){if(null!=e){try{return t.call(e)}catch(n){}try{return e+""}catch(n){}}return""}},143:e=>{var t=/\s/;e.exports=function(e){for(var n=e.length;n--&&t.test(e.charAt(n)););return n}},715:e=>{var t="\\ud800-\\udfff",n="["+t+"]",r="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",i="\\ud83c[\\udffb-\\udfff]",o="[^"+t+"]",a="(?:\\ud83c[\\udde6-\\uddff]){2}",s="[\\ud800-\\udbff][\\udc00-\\udfff]",l="(?:"+r+"|"+i+")"+"?",c="[\\ufe0e\\ufe0f]?",u=c+l+("(?:\\u200d(?:"+[o,a,s].join("|")+")"+c+l+")*"),h="(?:"+[o+r+"?",r,a,s,n].join("|")+")",d=RegExp(i+"(?="+i+")|"+h+u,"g");e.exports=function(e){return e.match(d)||[]}},2541:e=>{e.exports=function(e){return function(){return e}}},3950:(e,t,n)=>{var r=n(6686),i=n(4757),o=n(801),a=Math.max,s=Math.min;e.exports=function(e,t,n){var l,c,u,h,d,f,p=0,m=!1,g=!1,v=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function y(t){var n=l,r=c;return l=c=void 0,p=t,h=e.apply(r,n)}function A(e){var n=e-f;return void 0===f||n>=t||n<0||g&&e-p>=u}function x(){var e=i();if(A(e))return b(e);d=setTimeout(x,function(e){var n=t-(e-f);return g?s(n,u-(e-p)):n}(e))}function b(e){return d=void 0,v&&l?y(e):(l=c=void 0,h)}function _(){var e=i(),n=A(e);if(l=arguments,c=this,f=e,n){if(void 0===d)return function(e){return p=e,d=setTimeout(x,t),m?y(e):h}(f);if(g)return clearTimeout(d),d=setTimeout(x,t),y(f)}return void 0===d&&(d=setTimeout(x,t)),h}return t=o(t)||0,r(n)&&(m=!!n.leading,u=(g="maxWait"in n)?a(o(n.maxWait)||0,t):u,v="trailing"in n?!!n.trailing:v),_.cancel=function(){void 0!==d&&clearTimeout(d),p=0,l=f=c=d=void 0},_.flush=function(){return void 0===d?h:b(i())},_}},3211:e=>{e.exports=function(e,t){return e===t||e!==e&&t!==t}},7002:(e,t,n)=>{var r=n(5295),i=n(4746),o=n(9096),a=n(4052),s=n(929);e.exports=function(e,t,n){var l=a(e)?r:i;return n&&s(e,t,n)&&(t=void 0),l(e,o(t,3))}},8990:(e,t,n)=>{var r=n(9995)(n(2520));e.exports=r},2520:(e,t,n)=>{var r=n(5816),i=n(9096),o=n(9140),a=Math.max;e.exports=function(e,t,n){var s=null==e?0:e.length;if(!s)return-1;var l=null==n?0:o(n);return l<0&&(l=a(s+l,0)),r(e,i(t,3),l)}},3538:(e,t,n)=>{var r=n(755),i=n(3411);e.exports=function(e,t){return r(i(e,t),1)}},3097:(e,t,n)=>{var r=n(2969);e.exports=function(e,t,n){var i=null==e?void 0:r(e,t);return void 0===i?n:i}},3366:(e,t,n)=>{var r=n(7894),i=n(9057);e.exports=function(e,t){return null!=e&&i(e,t,r)}},3279:e=>{e.exports=function(e){return e}},2777:(e,t,n)=>{var r=n(5193),i=n(2761),o=Object.prototype,a=o.hasOwnProperty,s=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&a.call(e,"callee")&&!s.call(e,"callee")};e.exports=l},4052:e=>{var t=Array.isArray;e.exports=t},6571:(e,t,n)=>{var r=n(1629),i=n(6173);e.exports=function(e){return null!=e&&i(e.length)&&!r(e)}},6361:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return!0===e||!1===e||i(e)&&"[object Boolean]"==r(e)}},4543:(e,t,n)=>{e=n.nmd(e);var r=n(6552),i=n(14),o=t&&!t.nodeType&&t,a=o&&e&&!e.nodeType&&e,s=a&&a.exports===o?r.Buffer:void 0,l=(s?s.isBuffer:void 0)||i;e.exports=l},9853:(e,t,n)=>{var r=n(6989);e.exports=function(e,t){return r(e,t)}},1629:(e,t,n)=>{var r=n(6913),i=n(6686);e.exports=function(e){if(!i(e))return!1;var t=r(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}},6173:e=>{e.exports=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}},5268:(e,t,n)=>{var r=n(9160);e.exports=function(e){return r(e)&&e!=+e}},9686:e=>{e.exports=function(e){return null==e}},9160:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"number"==typeof e||i(e)&&"[object Number]"==r(e)}},6686:e=>{e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},2761:e=>{e.exports=function(e){return null!=e&&"object"==typeof e}},2322:(e,t,n)=>{var r=n(6913),i=n(5990),o=n(2761),a=Function.prototype,s=Object.prototype,l=a.toString,c=s.hasOwnProperty,u=l.call(Object);e.exports=function(e){if(!o(e)||"[object Object]"!=r(e))return!1;var t=i(e);if(null===t)return!0;var n=c.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}},620:(e,t,n)=>{var r=n(6913),i=n(4052),o=n(2761);e.exports=function(e){return"string"==typeof e||!i(e)&&o(e)&&"[object String]"==r(e)}},9841:(e,t,n)=>{var r=n(6913),i=n(2761);e.exports=function(e){return"symbol"==typeof e||i(e)&&"[object Symbol]"==r(e)}},1268:(e,t,n)=>{var r=n(5428),i=n(7574),o=n(6832),a=o&&o.isTypedArray,s=a?i(a):r;e.exports=s},8673:(e,t,n)=>{var r=n(3204),i=n(3713),o=n(6571);e.exports=function(e){return o(e)?r(e):i(e)}},4065:e=>{e.exports=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0}},3411:(e,t,n)=>{var r=n(149),i=n(9096),o=n(8883),a=n(4052);e.exports=function(e,t){return(a(e)?r:o)(e,i(t,3))}},1733:(e,t,n)=>{var r=n(1775),i=n(4664),o=n(9096);e.exports=function(e,t){var n={};return t=o(t,3),i(e,(function(e,i,o){r(n,i,t(e,i,o))})),n}},539:(e,t,n)=>{var r=n(9742),i=n(7498),o=n(3279);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},5797:(e,t,n)=>{var r=n(4816);function i(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(i.Cache||r),n}i.Cache=r,e.exports=i},6745:(e,t,n)=>{var r=n(9742),i=n(61),o=n(3279);e.exports=function(e){return e&&e.length?r(e,o,i):void 0}},5713:e=>{e.exports=function(){}},4757:(e,t,n)=>{var r=n(6552);e.exports=function(){return r.Date.now()}},3932:(e,t,n)=>{var r=n(396),i=n(2866),o=n(2597),a=n(914);e.exports=function(e){return o(e)?r(a(e)):i(e)}},6604:(e,t,n)=>{var r=n(3331)();e.exports=r},4597:(e,t,n)=>{var r=n(2587),i=n(9096),o=n(2165),a=n(4052),s=n(929);e.exports=function(e,t,n){var l=a(e)?r:o;return n&&s(e,t,n)&&(t=void 0),l(e,i(t,3))}},7424:(e,t,n)=>{var r=n(755),i=n(2536),o=n(5647),a=n(929),s=o((function(e,t){if(null==e)return[];var n=t.length;return n>1&&a(e,t[0],t[1])?t=[]:n>2&&a(t[0],t[1],t[2])&&(t=[t[0]]),i(e,r(t,1),[])}));e.exports=s},7828:e=>{e.exports=function(){return[]}},14:e=>{e.exports=function(){return!1}},9889:(e,t,n)=>{var r=n(3950),i=n(6686);e.exports=function(e,t,n){var o=!0,a=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return i(n)&&(o="leading"in n?!!n.leading:o,a="trailing"in n?!!n.trailing:a),r(e,t,{leading:o,maxWait:t,trailing:a})}},7303:(e,t,n)=>{var r=n(801),i=1/0;e.exports=function(e){return e?(e=r(e))===i||e===-1/0?17976931348623157e292*(e<0?-1:1):e===e?e:0:0===e?e:0}},9140:(e,t,n)=>{var r=n(7303);e.exports=function(e){var t=r(e),n=t%1;return t===t?n?t-n:t:0}},801:(e,t,n)=>{var r=n(1141),i=n(6686),o=n(9841),a=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,l=/^0o[0-7]+$/i,c=parseInt;e.exports=function(e){if("number"==typeof e)return e;if(o(e))return NaN;if(i(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=i(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=r(e);var n=s.test(e);return n||l.test(e)?c(e.slice(2),n?2:8):a.test(e)?NaN:+e}},1069:(e,t,n)=>{var r=n(8541);e.exports=function(e){return null==e?"":r(e)}},977:(e,t,n)=>{var r=n(9096),i=n(4416);e.exports=function(e,t){return e&&e.length?i(e,r(t,2)):[]}},643:(e,t,n)=>{var r=n(7676)("toUpperCase");e.exports=r},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function o(){}o.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,o,a){if(a!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:o,resetWarningCache:i};return n.PropTypes=n,n}},5173:(e,t,n)=>{e.exports=n(1497)()},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,s={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(s[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){g[e]=new m(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){g[e]=new m(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){g[e]=new m(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){g[e]=new m(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){g[e]=new m(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)}));var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function A(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(v,y);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)})),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)}));var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,b=Symbol.for("react.element"),_=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),M=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),B=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function k(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,F=Object.assign;function z(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var U=!1;function N(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function j(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=N(e.type,!1);case 11:return e=N(e.type.render,!1);case 1:return e=N(e.type,!0);default:return""}}function G(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case w:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case I:return"Suspense";case B:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case M:return(e.displayName||"Context")+".Consumer";case C:return(e._context.displayName||"Context")+".Provider";case T:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:G(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return G(e(t))}catch(n){}}return null}function Q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function V(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=V(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function q(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=V(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function X(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function K(e,t){null!=(t=t.checked)&&A(e,"checked",t,!1)}function Z(e,t){K(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function $(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&X(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(o(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(o(92));if(te(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function oe(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function se(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?se(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return ue(e,t)}))}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach((function(e){pe.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]}))}));var ve=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(o(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(o(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(o(62))}}function Ae(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function be(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,we=null,Ee=null;function Se(e){if(e=Ai(e)){if("function"!==typeof _e)throw Error(o(280));var t=e.stateNode;t&&(t=bi(t),_e(e.stateNode,e.type,t))}}function Ce(e){we?Ee?Ee.push(e):Ee=[e]:we=e}function Me(){if(we){var e=we,t=Ee;if(Ee=we=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Te(e,t){return e(t)}function Ie(){}var Be=!1;function Pe(e,t,n){if(Be)return e(t,n);Be=!0;try{return Te(e,t,n)}finally{Be=!1,(null!==we||null!==Ee)&&(Ie(),Me())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=bi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(o(231,t,typeof n));return n}var De=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){De=!1}function ke(e,t,n,r,i,o,a,s,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Fe=null,ze=!1,Ue=null,Ne={onError:function(e){Le=!0,Fe=e}};function je(e,t,n,r,i,o,a,s,l){Le=!1,Fe=null,ke.apply(Ne,arguments)}function Ge(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ge(e)!==e)throw Error(o(188))}function Ve(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ge(e)))throw Error(o(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(o(188))}if(n.return!==r.return)n=i,r=a;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=a;break}if(l===r){s=!0,r=i,n=a;break}l=l.sibling}if(!s){for(l=a.child;l;){if(l===n){s=!0,n=a,r=i;break}if(l===r){s=!0,r=a,n=i;break}l=l.sibling}if(!s)throw Error(o(189))}}if(n.alternate!==r)throw Error(o(190))}if(3!==n.tag)throw Error(o(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var qe=i.unstable_scheduleCallback,Xe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Je=i.unstable_requestPaint,Ke=i.unstable_now,Ze=i.unstable_getCurrentPriorityLevel,$e=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,ot=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(st(e)/lt|0)|0},st=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=ht(s):0!==(o&=a)&&(r=ht(o))}else 0!==(a=n&~i)?r=ht(a):0!==o&&(r=ht(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var At=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var bt,_t,wt,Et,St,Ct=!1,Mt=[],Tt=null,It=null,Bt=null,Pt=new Map,Rt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function kt(e,t){switch(e){case"focusin":case"focusout":Tt=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":Bt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&(null!==(t=Ai(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=yi(e.target);if(null!==t){var n=Ge(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Qe(n)))return e.blockedOn=t,void St(e.priority,(function(){wt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=Ai(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ut(e,t,n){zt(e)&&n.delete(t)}function Nt(){Ct=!1,null!==Tt&&zt(Tt)&&(Tt=null),null!==It&&zt(It)&&(It=null),null!==Bt&&zt(Bt)&&(Bt=null),Pt.forEach(Ut),Rt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Ct||(Ct=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Nt)))}function Gt(e){function t(t){return jt(t,e)}if(0<Mt.length){jt(Mt[0],e);for(var n=1;n<Mt.length;n++){var r=Mt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Tt&&jt(Tt,e),null!==It&&jt(It,e),null!==Bt&&jt(Bt,e),Pt.forEach(t),Rt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Dt.shift()}var Qt=x.ReactCurrentBatchConfig,Ht=!0;function Vt(e,t,n,r){var i=At,o=Qt.transition;Qt.transition=null;try{At=1,qt(e,t,n,r)}finally{At=i,Qt.transition=o}}function Wt(e,t,n,r){var i=At,o=Qt.transition;Qt.transition=null;try{At=4,qt(e,t,n,r)}finally{At=i,Qt.transition=o}}function qt(e,t,n,r){if(Ht){var i=Yt(e,t,n,r);if(null===i)Hr(e,t,r,Xt,n),kt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Tt=Lt(Tt,e,t,n,r,i),!0;case"dragenter":return It=Lt(It,e,t,n,r,i),!0;case"mouseover":return Bt=Lt(Bt,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return Pt.set(o,Lt(Pt.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rt.set(o,Lt(Rt.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(kt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var o=Ai(i);if(null!==o&&bt(o),null===(o=Yt(e,t,n,r))&&Hr(e,t,r,Xt,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Xt=null;function Yt(e,t,n,r){if(Xt=null,null!==(e=yi(e=be(r))))if(null===(t=Ge(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ze()){case $e:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Kt=null,Zt=null,$t=null;function en(){if($t)return $t;var e,t,n=Zt,r=n.length,i="value"in Kt?Kt.value:Kt.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return $t=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function on(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,sn,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=on(cn),hn=F({},cn,{view:0,detail:0}),dn=on(hn),fn=F({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,sn=e.screenY-ln.screenY):sn=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:sn}}),pn=on(fn),mn=on(F({},fn,{dataTransfer:0})),gn=on(F({},hn,{relatedTarget:0})),vn=on(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),An=on(yn),xn=on(F({},cn,{data:0})),bn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wn[e])&&!!t[e]}function Sn(){return En}var Cn=F({},hn,{key:function(e){if(e.key){var t=bn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Mn=on(Cn),Tn=on(F({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=on(F({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Bn=on(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=F({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=on(Pn),Dn=[9,13,27,32],On=u&&"CompositionEvent"in window,kn=null;u&&"documentMode"in document&&(kn=document.documentMode);var Ln=u&&"TextEvent"in window&&!kn,Fn=u&&(!On||kn&&8<kn&&11>=kn),zn=String.fromCharCode(32),Un=!1;function Nn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Gn=!1;var Qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Qn[e.type]:"textarea"===t}function Vn(e,t,n,r){Ce(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,qn=null;function Xn(e){zr(e,0)}function Yn(e){if(q(xi(e)))return e}function Jn(e,t){if("change"===e)return t}var Kn=!1;if(u){var Zn;if(u){var $n="oninput"in document;if(!$n){var er=document.createElement("div");er.setAttribute("oninput","return;"),$n="function"===typeof er.oninput}Zn=$n}else Zn=!1;Kn=Zn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),qn=Wn=null)}function nr(e){if("value"===e.propertyName&&Yn(qn)){var t=[];Vn(t,qn,e,be(e)),Pe(Xn,t)}}function rr(e,t,n){"focusin"===e?(tr(),qn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(qn)}function or(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var sr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(sr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!sr(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=X();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=X((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=ur(n,o);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,Ar=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;Ar||null==gr||gr!==X(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Wr(vr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function br(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:br("Animation","AnimationEnd"),animationiteration:br("Animation","AnimationIteration"),animationstart:br("Animation","AnimationStart"),transitionend:br("Transition","TransitionEnd")},wr={},Er={};function Sr(e){if(wr[e])return wr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return wr[e]=n[t];return e}u&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Cr=Sr("animationend"),Mr=Sr("animationiteration"),Tr=Sr("animationstart"),Ir=Sr("transitionend"),Br=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Br.set(e,t),l(t,[e])}for(var Dr=0;Dr<Pr.length;Dr++){var Or=Pr[Dr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(Cr,"onAnimationEnd"),Rr(Mr,"onAnimationIteration"),Rr(Tr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var kr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(kr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,s,l,c){if(je.apply(this,arguments),Le){if(!Le)throw Error(o(198));var u=Fe;Le=!1,Fe=null,ze||(ze=!0,Ue=u)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,c=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Fr(i,s,c),o=l}}}if(ze)throw e=Ue,ze=!1,Ue=null,e}function Ur(e,t){var n=t[mi];void 0===n&&(n=t[mi]=new Set);var r=e+"__bubble";n.has(r)||(Qr(t,e,2,!1),n.add(r))}function Nr(e,t,n){var r=0;t&&(r|=4),Qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function Gr(e){if(!e[jr]){e[jr]=!0,a.forEach((function(t){"selectionchange"!==t&&(Lr.has(t)||Nr(t,!1,e),Nr(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Nr("selectionchange",!1,t))}}function Qr(e,t,n,r){switch(Jt(t)){case 1:var i=Vt;break;case 4:i=Wt;break;default:i=qt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var o=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=yi(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Pe((function(){var r=o,i=be(n),a=[];e:{var s=Br.get(e);if(void 0!==s){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Mn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case Cr:case Mr:case Tr:l=vn;break;case Ir:l=Bn;break;case"scroll":l=dn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=An;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Tn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==s?s+"Capture":null:s;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==d&&(null!=(m=Re(p,d))&&u.push(Vr(p,m,f)))),h)break;p=p.return}0<u.length&&(s=new l(s,c,null,n,i),a.push({event:s,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[pi])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(h=Ge(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Tn,m="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?s:xi(l),f=null==c?s:xi(c),(s=new u(m,p+"leave",l,n,i)).target=h,s.relatedTarget=f,m=null,yi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,m=u),h=m,l&&c)e:{for(d=c,p=0,f=u=l;f;f=qr(f))p++;for(f=0,m=d;m;m=qr(m))f++;for(;0<p-f;)u=qr(u),p--;for(;0<f-p;)d=qr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=qr(u),d=qr(d)}u=null}else u=null;null!==l&&Xr(a,s,l,u,!1),null!==c&&null!==h&&Xr(a,h,c,u,!0)}if("select"===(l=(s=r?xi(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Jn;else if(Hn(s))if(Kn)g=ar;else{g=ir;var v=rr}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=or);switch(g&&(g=g(e,r))?Vn(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&ee(s,"number",s.value)),v=r?xi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":Ar=!0;break;case"contextmenu":case"mouseup":case"dragend":Ar=!1,xr(a,n,i);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(a,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Gn?Nn(e,n)&&(A="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(A="onCompositionStart");A&&(Fn&&"ko"!==n.locale&&(Gn||"onCompositionStart"!==A?"onCompositionEnd"===A&&Gn&&(y=en()):(Zt="value"in(Kt=i)?Kt.value:Kt.textContent,Gn=!0)),0<(v=Wr(r,A)).length&&(A=new xn(A,e,null,n,i),a.push({event:A,listeners:v}),y?A.data=y:null!==(y=jn(n))&&(A.data=y))),(y=Ln?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,zn);case"textInput":return(e=t.data)===zn&&Un?null:e;default:return null}}(e,n):function(e,t){if(Gn)return"compositionend"===e||!On&&Nn(e,t)?(e=en(),$t=Zt=Kt=null,Gn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(i=new xn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}zr(a,t)}))}function Vr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=Re(e,n))&&r.unshift(Vr(e,o,i)),null!=(o=Re(e,t))&&r.push(Vr(e,o,i))),e=e.return}return r}function qr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Xr(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,c=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==c&&(s=c,i?null!=(l=Re(n,o))&&a.unshift(Vr(n,l,s)):i||null!=(l=Re(n,o))&&a.push(Vr(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function Kr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Jr,"")}function Zr(e,t,n){if(t=Kr(t),Kr(e)!==t&&n)throw Error(o(425))}function $r(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,oi="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof oi?function(e){return oi.resolve(null).then(e).catch(si)}:ri;function si(e){setTimeout((function(){throw e}))}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Gt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Gt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,mi="__reactEvents$"+hi,gi="__reactListeners$"+hi,vi="__reactHandles$"+hi;function yi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function Ai(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(o(33))}function bi(e){return e[fi]||null}var _i=[],wi=-1;function Ei(e){return{current:e}}function Si(e){0>wi||(e.current=_i[wi],_i[wi]=null,wi--)}function Ci(e,t){wi++,_i[wi]=e.current,e.current=t}var Mi={},Ti=Ei(Mi),Ii=Ei(!1),Bi=Mi;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Mi;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Si(Ii),Si(Ti)}function Oi(e,t,n){if(Ti.current!==Mi)throw Error(o(168));Ci(Ti,t),Ci(Ii,n)}function ki(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(o(108,Q(e)||"Unknown",i));return F({},n,r)}function Li(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Mi,Bi=Ti.current,Ci(Ti,e),Ci(Ii,Ii.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(o(169));n?(e=ki(e,t,Bi),r.__reactInternalMemoizedMergedChildContext=e,Si(Ii),Si(Ti),Ci(Ti,e)):Si(Ii),Ci(Ii,n)}var zi=null,Ui=!1,Ni=!1;function ji(e){null===zi?zi=[e]:zi.push(e)}function Gi(){if(!Ni&&null!==zi){Ni=!0;var e=0,t=At;try{var n=zi;for(At=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}zi=null,Ui=!1}catch(i){throw null!==zi&&(zi=zi.slice(e+1)),qe($e,Gi),i}finally{At=t,Ni=!1}}return null}var Qi=[],Hi=0,Vi=null,Wi=0,qi=[],Xi=0,Yi=null,Ji=1,Ki="";function Zi(e,t){Qi[Hi++]=Wi,Qi[Hi++]=Vi,Vi=e,Wi=t}function $i(e,t,n){qi[Xi++]=Ji,qi[Xi++]=Ki,qi[Xi++]=Yi,Yi=e;var r=Ji;e=Ki;var i=32-at(r)-1;r&=~(1<<i),n+=1;var o=32-at(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,Ki=o+e}else Ji=1<<o|n<<i|r,Ki=e}function eo(e){null!==e.return&&(Zi(e,1),$i(e,1,0))}function to(e){for(;e===Vi;)Vi=Qi[--Hi],Qi[Hi]=null,Wi=Qi[--Hi],Qi[Hi]=null;for(;e===Yi;)Yi=qi[--Xi],qi[Xi]=null,Ki=qi[--Xi],qi[Xi]=null,Ji=qi[--Xi],qi[Xi]=null}var no=null,ro=null,io=!1,oo=null;function ao(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function so(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,no=e,ro=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,no=e,ro=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Ji,overflow:Ki}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,no=e,ro=null,!0);default:return!1}}function lo(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function co(e){if(io){var t=ro;if(t){var n=t;if(!so(e,t)){if(lo(e))throw Error(o(418));t=ci(n.nextSibling);var r=no;t&&so(e,t)?ao(r,n):(e.flags=-4097&e.flags|2,io=!1,no=e)}}else{if(lo(e))throw Error(o(418));e.flags=-4097&e.flags|2,io=!1,no=e}}}function uo(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;no=e}function ho(e){if(e!==no)return!1;if(!io)return uo(e),io=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ro)){if(lo(e))throw fo(),Error(o(418));for(;t;)ao(e,t),t=ci(t.nextSibling)}if(uo(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ro=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ro=null}}else ro=no?ci(e.stateNode.nextSibling):null;return!0}function fo(){for(var e=ro;e;)e=ci(e.nextSibling)}function po(){ro=no=null,io=!1}function mo(e){null===oo?oo=[e]:oo.push(e)}var go=x.ReactCurrentBatchConfig;function vo(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(o(309));var r=n.stateNode}if(!r)throw Error(o(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function yo(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ao(e){return(0,e._init)(e._payload)}function xo(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var o=n.type;return o===w?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===R&&Ao(o)===t.type)?((r=i(t,n.props)).ref=vo(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=vo(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,o){return null===t||7!==t.tag?((t=kc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Fc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case b:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=vo(e,null,t),n.return=e,n;case _:return(t=zc(t,e.mode,n)).return=e,t;case R:return d(e,(0,t._init)(t._payload),n)}if(te(t)||k(t))return(t=kc(t,e.mode,n,null)).return=e,t;yo(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case b:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case R:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||k(n))return null!==i?null:h(e,t,n,r,null);yo(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case b:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||k(r))return h(t,e=e.get(n)||null,r,i,null);yo(t,r)}return null}function m(i,o,s,l){for(var c=null,u=null,h=o,m=o=0,g=null;null!==h&&m<s.length;m++){h.index>m?(g=h,h=null):g=h.sibling;var v=f(i,h,s[m],l);if(null===v){null===h&&(h=g);break}e&&h&&null===v.alternate&&t(i,h),o=a(v,o,m),null===u?c=v:u.sibling=v,u=v,h=g}if(m===s.length)return n(i,h),io&&Zi(i,m),c;if(null===h){for(;m<s.length;m++)null!==(h=d(i,s[m],l))&&(o=a(h,o,m),null===u?c=h:u.sibling=h,u=h);return io&&Zi(i,m),c}for(h=r(i,h);m<s.length;m++)null!==(g=p(h,i,m,s[m],l))&&(e&&null!==g.alternate&&h.delete(null===g.key?m:g.key),o=a(g,o,m),null===u?c=g:u.sibling=g,u=g);return e&&h.forEach((function(e){return t(i,e)})),io&&Zi(i,m),c}function g(i,s,l,c){var u=k(l);if("function"!==typeof u)throw Error(o(150));if(null==(l=u.call(l)))throw Error(o(151));for(var h=u=null,m=s,g=s=0,v=null,y=l.next();null!==m&&!y.done;g++,y=l.next()){m.index>g?(v=m,m=null):v=m.sibling;var A=f(i,m,y.value,c);if(null===A){null===m&&(m=v);break}e&&m&&null===A.alternate&&t(i,m),s=a(A,s,g),null===h?u=A:h.sibling=A,h=A,m=v}if(y.done)return n(i,m),io&&Zi(i,g),u;if(null===m){for(;!y.done;g++,y=l.next())null!==(y=d(i,y.value,c))&&(s=a(y,s,g),null===h?u=y:h.sibling=y,h=y);return io&&Zi(i,g),u}for(m=r(i,m);!y.done;g++,y=l.next())null!==(y=p(m,i,g,y.value,c))&&(e&&null!==y.alternate&&m.delete(null===y.key?g:y.key),s=a(y,s,g),null===h?u=y:h.sibling=y,h=y);return e&&m.forEach((function(e){return t(i,e)})),io&&Zi(i,g),u}return function e(r,o,a,l){if("object"===typeof a&&null!==a&&a.type===w&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case b:e:{for(var c=a.key,u=o;null!==u;){if(u.key===c){if((c=a.type)===w){if(7===u.tag){n(r,u.sibling),(o=i(u,a.props.children)).return=r,r=o;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Ao(c)===u.type){n(r,u.sibling),(o=i(u,a.props)).ref=vo(r,u,a),o.return=r,r=o;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===w?((o=kc(a.props.children,r.mode,l,a.key)).return=r,r=o):((l=Oc(a.type,a.key,a.props,null,r.mode,l)).ref=vo(r,o,a),l.return=r,r=l)}return s(r);case _:e:{for(u=a.key;null!==o;){if(o.key===u){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=zc(a,r.mode,l)).return=r,r=o}return s(r);case R:return e(r,o,(u=a._init)(a._payload),l)}if(te(a))return m(r,o,a,l);if(k(a))return g(r,o,a,l);yo(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=Fc(a,r.mode,l)).return=r,r=o),s(r)):n(r,o)}}var bo=xo(!0),_o=xo(!1),wo=Ei(null),Eo=null,So=null,Co=null;function Mo(){Co=So=Eo=null}function To(e){var t=wo.current;Si(wo),e._currentValue=t}function Io(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Bo(e,t){Eo=e,Co=So=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(As=!0),e.firstContext=null)}function Po(e){var t=e._currentValue;if(Co!==e)if(e={context:e,memoizedValue:t,next:null},null===So){if(null===Eo)throw Error(o(308));So=e,Eo.dependencies={lanes:0,firstContext:e}}else So=So.next=e;return t}var Ro=null;function Do(e){null===Ro?Ro=[e]:Ro.push(e)}function Oo(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Do(t)):(n.next=i.next,i.next=n),t.interleaved=n,ko(e,r)}function ko(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Lo=!1;function Fo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function zo(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Uo(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function No(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Tl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,ko(e,n)}return null===(i=r.interleaved)?(t.next=t,Do(r)):(t.next=i.next,i.next=t),r.interleaved=t,ko(e,n)}function jo(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Go(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Qo(e,t,n,r){var i=e.updateQueue;Lo=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,c=l.next;l.next=null,null===a?o=c:a.next=c,a=l;var u=e.alternate;null!==u&&((s=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===s?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(null!==o){var h=i.baseState;for(a=0,u=c=l=null,s=o;;){var d=s.lane,f=s.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var p=e,m=s;switch(d=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=m.payload)?p.call(f,h,d):p)||void 0===d)break e;h=F({},h,d);break e;case 2:Lo=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[s]:d.push(s))}else f={eventTime:f,lane:d,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(d=s).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Ll|=a,e.lanes=a,e.memoizedState=h}}function Ho(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(o(191,i));i.call(r)}}}var Vo={},Wo=Ei(Vo),qo=Ei(Vo),Xo=Ei(Vo);function Yo(e){if(e===Vo)throw Error(o(174));return e}function Jo(e,t){switch(Ci(Xo,t),Ci(qo,e),Ci(Wo,Vo),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Wo),Ci(Wo,t)}function Ko(){Si(Wo),Si(qo),Si(Xo)}function Zo(e){Yo(Xo.current);var t=Yo(Wo.current),n=le(t,e.type);t!==n&&(Ci(qo,e),Ci(Wo,n))}function $o(e){qo.current===e&&(Si(Wo),Si(qo))}var ea=Ei(0);function ta(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var na=[];function ra(){for(var e=0;e<na.length;e++)na[e]._workInProgressVersionPrimary=null;na.length=0}var ia=x.ReactCurrentDispatcher,oa=x.ReactCurrentBatchConfig,aa=0,sa=null,la=null,ca=null,ua=!1,ha=!1,da=0,fa=0;function pa(){throw Error(o(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!sr(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(aa=a,sa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=null===e||null===e.memoizedState?$a:es,e=n(r,i),ha){a=0;do{if(ha=!1,da=0,25<=a)throw Error(o(301));a+=1,ca=la=null,t.updateQueue=null,ia.current=ts,e=n(r,i)}while(ha)}if(ia.current=Za,t=null!==la&&null!==la.next,aa=0,ca=la=sa=null,ua=!1,t)throw Error(o(300));return e}function va(){var e=0!==da;return da=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ca?sa.memoizedState=ca=e:ca=ca.next=e,ca}function Aa(){if(null===la){var e=sa.alternate;e=null!==e?e.memoizedState:null}else e=la.next;var t=null===ca?sa.memoizedState:ca.next;if(null!==t)ca=t,la=e;else{if(null===e)throw Error(o(310));e={memoizedState:(la=e).memoizedState,baseState:la.baseState,baseQueue:la.baseQueue,queue:la.queue,next:null},null===ca?sa.memoizedState=ca=e:ca=ca.next=e}return ca}function xa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=Aa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=la,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=s=null,c=null,u=a;do{var h=u.lane;if((aa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,sa.lanes|=h,Ll|=h}u=u.next}while(null!==u&&u!==a);null===c?s=r:c.next=l,sr(r,t.memoizedState)||(As=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,sa.lanes|=a,Ll|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _a(e){var t=Aa(),n=t.queue;if(null===n)throw Error(o(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{a=e(a,s.action),s=s.next}while(s!==i);sr(a,t.memoizedState)||(As=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function wa(){}function Ea(e,t){var n=sa,r=Aa(),i=t(),a=!sr(r.memoizedState,i);if(a&&(r.memoizedState=i,As=!0),r=r.queue,La(Ma.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==ca&&1&ca.memoizedState.tag){if(n.flags|=2048,Pa(9,Ca.bind(null,n,r,i,t),void 0,null),null===Il)throw Error(o(349));0!==(30&aa)||Sa(n,t,i)}return i}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ca(e,t,n,r){t.value=n,t.getSnapshot=r,Ta(t)&&Ia(e)}function Ma(e,t,n){return n((function(){Ta(t)&&Ia(e)}))}function Ta(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!sr(e,n)}catch(r){return!0}}function Ia(e){var t=ko(e,1);null!==t&&nc(t,e,1,-1)}function Ba(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Xa.bind(null,sa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=sa.updateQueue)?(t={lastEffect:null,stores:null},sa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ra(){return Aa().memoizedState}function Da(e,t,n,r){var i=ya();sa.flags|=e,i.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Oa(e,t,n,r){var i=Aa();r=void 0===r?null:r;var o=void 0;if(null!==la){var a=la.memoizedState;if(o=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Pa(t,n,o,r))}sa.flags|=e,i.memoizedState=Pa(1|t,n,o,r)}function ka(e,t){return Da(8390656,8,e,t)}function La(e,t){return Oa(2048,8,e,t)}function Fa(e,t){return Oa(4,2,e,t)}function za(e,t){return Oa(4,4,e,t)}function Ua(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Na(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oa(4,4,Ua.bind(null,t,e),n)}function ja(){}function Ga(e,t){var n=Aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Qa(e,t){var n=Aa();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ha(e,t,n){return 0===(21&aa)?(e.baseState&&(e.baseState=!1,As=!0),e.memoizedState=n):(sr(n,t)||(n=mt(),sa.lanes|=n,Ll|=n,e.baseState=!0),t)}function Va(e,t){var n=At;At=0!==n&&4>n?n:4,e(!0);var r=oa.transition;oa.transition={};try{e(!1),t()}finally{At=n,oa.transition=r}}function Wa(){return Aa().memoizedState}function qa(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Ja(t,n);else if(null!==(n=Oo(e,t,n,r))){nc(n,e,r,ec()),Ka(n,t,r)}}function Xa(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Ja(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,sr(s,a)){var l=t.interleaved;return null===l?(i.next=i,Do(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Oo(e,t,i,r))&&(nc(n,e,r,i=ec()),Ka(n,t,r))}}function Ya(e){var t=e.alternate;return e===sa||null!==t&&t===sa}function Ja(e,t){ha=ua=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ka(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var Za={readContext:Po,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},$a={readContext:Po,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Po,useEffect:ka,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4194308,4,Ua.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Da(4194308,4,e,t)},useInsertionEffect:function(e,t){return Da(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=qa.bind(null,sa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Ba,useDebugValue:ja,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Ba(!1),t=e[0];return e=Va.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=sa,i=ya();if(io){if(void 0===n)throw Error(o(407));n=n()}else{if(n=t(),null===Il)throw Error(o(349));0!==(30&aa)||Sa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,ka(Ma.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Ca.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Il.identifierPrefix;if(io){var n=Ki;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=da++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=fa++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},es={readContext:Po,useCallback:Ga,useContext:Po,useEffect:La,useImperativeHandle:Na,useInsertionEffect:Fa,useLayoutEffect:za,useMemo:Qa,useReducer:ba,useRef:Ra,useState:function(){return ba(xa)},useDebugValue:ja,useDeferredValue:function(e){return Ha(Aa(),la.memoizedState,e)},useTransition:function(){return[ba(xa)[0],Aa().memoizedState]},useMutableSource:wa,useSyncExternalStore:Ea,useId:Wa,unstable_isNewReconciler:!1},ts={readContext:Po,useCallback:Ga,useContext:Po,useEffect:La,useImperativeHandle:Na,useInsertionEffect:Fa,useLayoutEffect:za,useMemo:Qa,useReducer:_a,useRef:Ra,useState:function(){return _a(xa)},useDebugValue:ja,useDeferredValue:function(e){var t=Aa();return null===la?t.memoizedState=e:Ha(t,la.memoizedState,e)},useTransition:function(){return[_a(xa)[0],Aa().memoizedState]},useMutableSource:wa,useSyncExternalStore:Ea,useId:Wa,unstable_isNewReconciler:!1};function ns(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function rs(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var is={isMounted:function(e){return!!(e=e._reactInternals)&&Ge(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=No(e,o,i))&&(nc(t,e,i,r),jo(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),o=Uo(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),null!==(t=No(e,o,i))&&(nc(t,e,i,r),jo(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Uo(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=No(e,i,r))&&(nc(t,e,r,n),jo(t,e,r))}};function os(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,o))}function as(e,t,n){var r=!1,i=Mi,o=t.contextType;return"object"===typeof o&&null!==o?o=Po(o):(i=Ri(t)?Bi:Ti.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Mi),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=is,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function ss(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&is.enqueueReplaceState(t,t.state,null)}function ls(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Fo(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=Po(o):(o=Ri(t)?Bi:Ti.current,i.context=Pi(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(rs(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&is.enqueueReplaceState(i,i.state,null),Qo(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function cs(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i,digest:null}}function us(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hs(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var ds="function"===typeof WeakMap?WeakMap:Map;function fs(e,t,n){(n=Uo(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,Vl=r),hs(0,t)},n}function ps(e,t,n){(n=Uo(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hs(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){hs(0,t),"function"!==typeof r&&(null===Wl?Wl=new Set([this]):Wl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function ms(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ds;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Sc.bind(null,e,t,n),t.then(e,e))}function gs(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vs(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Uo(-1,1)).tag=2,No(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ys=x.ReactCurrentOwner,As=!1;function xs(e,t,n,r){t.child=null===e?_o(t,null,n,r):bo(t,e.child,n,r)}function bs(e,t,n,r,i){n=n.render;var o=t.ref;return Bo(t,i),r=ga(e,t,n,r,o,i),n=va(),null===e||As?(io&&n&&eo(t),t.flags|=1,xs(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function _s(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||Rc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,ws(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Hs(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function ws(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(lr(o,r)&&e.ref===t.ref){if(As=!1,t.pendingProps=r=o,0===(e.lanes&i))return t.lanes=e.lanes,Hs(e,t,i);0!==(131072&e.flags)&&(As=!0)}}return Cs(e,t,n,r,i)}function Es(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ci(Dl,Rl),Rl|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ci(Dl,Rl),Rl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Ci(Dl,Rl),Rl|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Ci(Dl,Rl),Rl|=r;return xs(e,t,i,n),t.child}function Ss(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cs(e,t,n,r,i){var o=Ri(n)?Bi:Ti.current;return o=Pi(t,o),Bo(t,i),n=ga(e,t,n,r,o,i),r=va(),null===e||As?(io&&r&&eo(t),t.flags|=1,xs(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Hs(e,t,i))}function Ms(e,t,n,r,i){if(Ri(n)){var o=!0;Li(t)}else o=!1;if(Bo(t,i),null===t.stateNode)Qs(e,t),as(t,n,r),ls(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Po(c):c=Pi(t,c=Ri(n)?Bi:Ti.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&ss(t,a,r,c),Lo=!1;var d=t.memoizedState;a.state=d,Qo(t,r,a,i),l=t.memoizedState,s!==r||d!==l||Ii.current||Lo?("function"===typeof u&&(rs(t,n,u,r),l=t.memoizedState),(s=Lo||os(t,n,s,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,zo(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:ns(t.type,s),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Po(l):l=Pi(t,l=Ri(n)?Bi:Ti.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&ss(t,a,r,l),Lo=!1,d=t.memoizedState,a.state=d,Qo(t,r,a,i);var p=t.memoizedState;s!==h||d!==p||Ii.current||Lo?("function"===typeof f&&(rs(t,n,f,r),p=t.memoizedState),(c=Lo||os(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Ts(e,t,n,r,o,i)}function Ts(e,t,n,r,i,o){Ss(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Fi(t,n,!1),Hs(e,t,o);r=t.stateNode,ys.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bo(t,e.child,null,o),t.child=bo(t,null,s,o)):xs(e,t,s,o),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Is(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Jo(e,t.containerInfo)}function Bs(e,t,n,r,i){return po(),mo(i),t.flags|=256,xs(e,t,n,r),t.child}var Ps,Rs,Ds,Os,ks={dehydrated:null,treeContext:null,retryLane:0};function Ls(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fs(e,t,n){var r,i=t.pendingProps,a=ea.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ci(ea,1&a),null===e)return co(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,s?(i=t.mode,s=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=l):s=Lc(l,i,0,null),e=kc(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Ls(n),t.memoizedState=ks,e):zs(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,s){if(n)return 256&t.flags?(t.flags&=-257,Us(e,t,s,r=us(Error(o(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(a=kc(a,i,s,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bo(t,e.child,null,s),t.child.memoizedState=Ls(s),t.memoizedState=ks,a);if(0===(1&t.mode))return Us(e,t,s,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Us(e,t,s,r=us(a=Error(o(419)),r,void 0))}if(l=0!==(s&e.childLanes),As||l){if(null!==(r=Il)){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|s))?0:i)&&i!==a.retryLane&&(a.retryLane=i,ko(e,i),nc(r,e,i,-1))}return mc(),Us(e,t,s,r=us(Error(o(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Mc.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,ro=ci(i.nextSibling),no=t,io=!0,oo=null,null!==e&&(qi[Xi++]=Ji,qi[Xi++]=Ki,qi[Xi++]=Yi,Ji=e.id,Ki=e.overflow,Yi=t),t=zs(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(s){s=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?s=Dc(r,s):(s=kc(s,l,n,null)).flags|=2,s.return=t,i.return=t,i.sibling=s,t.child=i,i=s,s=t.child,l=null===(l=e.child.memoizedState)?Ls(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},s.memoizedState=l,s.childLanes=e.childLanes&~n,t.memoizedState=ks,i}return e=(s=e.child).sibling,i=Dc(s,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function zs(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Us(e,t,n,r){return null!==r&&mo(r),bo(t,e.child,null,n),(e=zs(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ns(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Io(e.return,t,n)}function js(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function Gs(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(xs(e,t,r.children,n),0!==(2&(r=ea.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ns(e,n,t);else if(19===e.tag)Ns(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ci(ea,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ta(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),js(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ta(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}js(t,!0,n,null,o);break;case"together":js(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qs(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Hs(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ll|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(o(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Vs(e,t){if(!io)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ws(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function qs(e,t,n){var r=t.pendingProps;switch(to(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ws(t),null;case 1:case 17:return Ri(t.type)&&Di(),Ws(t),null;case 3:return r=t.stateNode,Ko(),Si(Ii),Si(Ti),ra(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ho(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==oo&&(ac(oo),oo=null))),Rs(e,t),Ws(t),null;case 5:$o(t);var i=Yo(Xo.current);if(n=t.type,null!==e&&null!=t.stateNode)Ds(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(o(166));return Ws(t),null}if(e=Yo(Wo.current),ho(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<kr.length;i++)Ur(kr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":J(r,a),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Ur("invalid",r);break;case"textarea":ie(r,a),Ur("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Zr(r.textContent,c,e),i=["children",""+c]):s.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Ur("scroll",r)}switch(n){case"input":W(r),$(r,a,!0);break;case"textarea":W(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=$r)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=se(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Ps(e,t,!1,!1),t.stateNode=e;e:{switch(l=Ae(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<kr.length;i++)Ur(kr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":J(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?ge(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(s.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Ur("scroll",e):null!=u&&A(e,a,u,l))}switch(n){case"input":W(e),$(e,r,!1);break;case"textarea":W(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=$r)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ws(t),null;case 6:if(e&&null!=t.stateNode)Os(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(o(166));if(n=Yo(Xo.current),Yo(Wo.current),ho(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=no))switch(e.tag){case 3:Zr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Zr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ws(t),null;case 13:if(Si(ea),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(io&&null!==ro&&0!==(1&t.mode)&&0===(128&t.flags))fo(),po(),t.flags|=98560,a=!1;else if(a=ho(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(o(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(o(317));a[di]=t}else po(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ws(t),a=!1}else null!==oo&&(ac(oo),oo=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ea.current)?0===Ol&&(Ol=3):mc())),null!==t.updateQueue&&(t.flags|=4),Ws(t),null);case 4:return Ko(),Rs(e,t),null===e&&Gr(t.stateNode.containerInfo),Ws(t),null;case 10:return To(t.type._context),Ws(t),null;case 19:if(Si(ea),null===(a=t.memoizedState))return Ws(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Vs(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ta(e))){for(t.flags|=128,Vs(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ci(ea,1&ea.current|2),t.child}e=e.sibling}null!==a.tail&&Ke()>Gl&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ta(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Vs(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!io)return Ws(t),null}else 2*Ke()-a.renderingStartTime>Gl&&1073741824!==n&&(t.flags|=128,r=!0,Vs(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ke(),t.sibling=null,n=ea.current,Ci(ea,r?1&n|2:1&n),t):(Ws(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rl)&&(Ws(t),6&t.subtreeFlags&&(t.flags|=8192)):Ws(t),null;case 24:case 25:return null}throw Error(o(156,t.tag))}function Xs(e,t){switch(to(t),t.tag){case 1:return Ri(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Ko(),Si(Ii),Si(Ti),ra(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return $o(t),null;case 13:if(Si(ea),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(o(340));po()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(ea),null;case 4:return Ko(),null;case 10:return To(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ps=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rs=function(){},Ds=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Yo(Wo.current);var o,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=$r)}for(u in ye(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(s.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(s.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Ur("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Os=function(e,t,n,r){n!==r&&(t.flags|=4)};var Ys=!1,Js=!1,Ks="function"===typeof WeakSet?WeakSet:Set,Zs=null;function $s(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ec(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Ec(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&el(t,n,o)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ol(e){var t=e.alternate;null!==t&&(e.alternate=null,ol(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[mi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function sl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$r));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(ot&&"function"===typeof ot.onCommitFiberUnmount)try{ot.onCommitFiberUnmount(it,n)}catch(s){}switch(n.tag){case 5:Js||$s(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Gt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Js&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(0!==(2&o)||0!==(4&o))&&el(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Js&&($s(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(s){Ec(n,t,s)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Js=(r=Js)||null!==n.memoizedState,dl(e,t,n),Js=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ks),t.forEach((function(t){var r=Tc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ml(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,s=t,l=s;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(o(160));fl(a,s,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Ec(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ml(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){Ec(e,e.return,g)}try{nl(5,e,e.return)}catch(g){Ec(e,e.return,g)}}break;case 1:ml(t,e),vl(e),512&r&&null!==n&&$s(n,n.return);break;case 5:if(ml(t,e),vl(e),512&r&&null!==n&&$s(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(g){Ec(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,s=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&K(i,a),Ae(l,s);var u=Ae(l,a);for(s=0;s<c.length;s+=2){var h=c[s],d=c[s+1];"style"===h?ge(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):A(i,h,d,u)}switch(l){case"input":Z(i,a);break;case"textarea":oe(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(g){Ec(e,e.return,g)}}break;case 6:if(ml(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(o(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Ec(e,e.return,g)}}break;case 3:if(ml(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Gt(t.containerInfo)}catch(g){Ec(e,e.return,g)}break;case 4:default:ml(t,e),vl(e);break;case 13:ml(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(jl=Ke())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Js=(u=Js)||h,ml(t,e),Js=u):ml(t,e),vl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Zs=e,h=e.child;null!==h;){for(d=Zs=h;null!==Zs;){switch(p=(f=Zs).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:$s(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ec(r,n,g)}}break;case 5:$s(f,f.return);break;case 22:if(null!==f.memoizedState){bl(d);continue}}null!==p?(p.return=f,Zs=p):bl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,s=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",s))}catch(g){Ec(e,e.return,g)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(g){Ec(e,e.return,g)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ml(t,e),vl(e),4&r&&pl(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(o(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,sl(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,sl(e),a);break;default:throw Error(o(161))}}catch(s){Ec(e,e.return,s)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Zs=e,Al(e,t,n)}function Al(e,t,n){for(var r=0!==(1&e.mode);null!==Zs;){var i=Zs,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Ys;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Js;s=Ys;var c=Js;if(Ys=a,(Js=l)&&!c)for(Zs=i;null!==Zs;)l=(a=Zs).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,Zs=l):_l(i);for(;null!==o;)Zs=o,Al(o,t,n),o=o.sibling;Zs=i,Ys=s,Js=c}xl(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,Zs=o):xl(e)}}function xl(e){for(;null!==Zs;){var t=Zs;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Js||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Js)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ns(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ho(t,a,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ho(t,s,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Gt(d)}}}break;default:throw Error(o(163))}Js||512&t.flags&&il(t)}catch(f){Ec(t,t.return,f)}}if(t===e){Zs=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zs=n;break}Zs=t.return}}function bl(e){for(;null!==Zs;){var t=Zs;if(t===e){Zs=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zs=n;break}Zs=t.return}}function _l(e){for(;null!==Zs;){var t=Zs;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Ec(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Ec(t,i,l)}}var o=t.return;try{il(t)}catch(l){Ec(t,o,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Ec(t,a,l)}}}catch(l){Ec(t,t.return,l)}if(t===e){Zs=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Zs=s;break}Zs=t.return}}var wl,El=Math.ceil,Sl=x.ReactCurrentDispatcher,Cl=x.ReactCurrentOwner,Ml=x.ReactCurrentBatchConfig,Tl=0,Il=null,Bl=null,Pl=0,Rl=0,Dl=Ei(0),Ol=0,kl=null,Ll=0,Fl=0,zl=0,Ul=null,Nl=null,jl=0,Gl=1/0,Ql=null,Hl=!1,Vl=null,Wl=null,ql=!1,Xl=null,Yl=0,Jl=0,Kl=null,Zl=-1,$l=0;function ec(){return 0!==(6&Tl)?Ke():-1!==Zl?Zl:Zl=Ke()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Tl)&&0!==Pl?Pl&-Pl:null!==go.transition?(0===$l&&($l=mt()),$l):0!==(e=At)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,Kl=null,Error(o(185));vt(e,n,r),0!==(2&Tl)&&e===Il||(e===Il&&(0===(2&Tl)&&(Fl|=n),4===Ol&&sc(e,Pl)),rc(e,r),1===n&&0===Tl&&0===(1&t.mode)&&(Gl=Ke()+500,Ui&&Gi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-at(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=ft(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dt(e,e===Il?Pl:0);if(0===r)null!==n&&Xe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Xe(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(lc.bind(null,e)):ji(lc.bind(null,e)),ai((function(){0===(6&Tl)&&Gi()})),n=null;else{switch(xt(r)){case 1:n=$e;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ic(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Zl=-1,$l=0,0!==(6&Tl))throw Error(o(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=dt(e,e===Il?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Tl;Tl|=2;var a=pc();for(Il===e&&Pl===t||(Ql=null,Gl=Ke()+500,dc(e,t));;)try{yc();break}catch(l){fc(e,l)}Mo(),Sl.current=a,Tl=i,null!==Bl?t=0:(Il=null,Pl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=oc(e,i))),1===t)throw n=kl,dc(e,0),sc(e,r),rc(e,Ke()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!sr(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=pt(e))&&(r=a,t=oc(e,a))),1===t))throw n=kl,dc(e,0),sc(e,r),rc(e,Ke()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(o(345));case 2:case 5:bc(e,Nl,Ql);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=jl+500-Ke())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(bc.bind(null,e,Nl,Ql),t);break}bc(e,Nl,Ql);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-at(r);a=1<<s,(s=t[s])>i&&(i=s),r&=~a}if(r=i,10<(r=(120>(r=Ke()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*El(r/1960))-r)){e.timeoutHandle=ri(bc.bind(null,e,Nl,Ql),r);break}bc(e,Nl,Ql);break;default:throw Error(o(329))}}}return rc(e,Ke()),e.callbackNode===n?ic.bind(null,e):null}function oc(e,t){var n=Ul;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=Nl,Nl=n,null!==t&&ac(t)),e}function ac(e){null===Nl?Nl=e:Nl.push.apply(Nl,e)}function sc(e,t){for(t&=~zl,t&=~Fl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Tl))throw Error(o(327));_c();var t=dt(e,0);if(0===(1&t))return rc(e,Ke()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=kl,dc(e,0),sc(e,t),rc(e,Ke()),n;if(6===n)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,bc(e,Nl,Ql),rc(e,Ke()),null}function cc(e,t){var n=Tl;Tl|=1;try{return e(t)}finally{0===(Tl=n)&&(Gl=Ke()+500,Ui&&Gi())}}function uc(e){null!==Xl&&0===Xl.tag&&0===(6&Tl)&&_c();var t=Tl;Tl|=1;var n=Ml.transition,r=At;try{if(Ml.transition=null,At=1,e)return e()}finally{At=r,Ml.transition=n,0===(6&(Tl=t))&&Gi()}}function hc(){Rl=Dl.current,Si(Dl)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Bl)for(n=Bl.return;null!==n;){var r=n;switch(to(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Ko(),Si(Ii),Si(Ti),ra();break;case 5:$o(r);break;case 4:Ko();break;case 13:case 19:Si(ea);break;case 10:To(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Il=e,Bl=e=Dc(e.current,null),Pl=Rl=t,Ol=0,kl=null,zl=Fl=Ll=0,Nl=Ul=null,null!==Ro){for(t=0;t<Ro.length;t++)if(null!==(r=(n=Ro[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Ro=null}return e}function fc(e,t){for(;;){var n=Bl;try{if(Mo(),ia.current=Za,ua){for(var r=sa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ua=!1}if(aa=0,ca=la=sa=null,ha=!1,da=0,Cl.current=null,null===n||null===n.return){Ol=1,kl=t,Bl=null;break}e:{var a=e,s=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=gs(s);if(null!==p){p.flags&=-257,vs(p,s,l,0,t),1&p.mode&&ms(a,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){ms(a,u,t),mc();break e}c=Error(o(426))}else if(io&&1&l.mode){var v=gs(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vs(v,s,l,0,t),mo(cs(c,l));break e}}a=c=cs(c,l),4!==Ol&&(Ol=2),null===Ul?Ul=[a]:Ul.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Go(a,fs(0,c,t));break e;case 1:l=c;var y=a.type,A=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===Wl||!Wl.has(A)))){a.flags|=65536,t&=-t,a.lanes|=t,Go(a,ps(a,l,t));break e}}a=a.return}while(null!==a)}xc(n)}catch(x){t=x,Bl===n&&null!==n&&(Bl=n=n.return);continue}break}}function pc(){var e=Sl.current;return Sl.current=Za,null===e?Za:e}function mc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===Il||0===(268435455&Ll)&&0===(268435455&Fl)||sc(Il,Pl)}function gc(e,t){var n=Tl;Tl|=2;var r=pc();for(Il===e&&Pl===t||(Ql=null,dc(e,t));;)try{vc();break}catch(i){fc(e,i)}if(Mo(),Tl=n,Sl.current=r,null!==Bl)throw Error(o(261));return Il=null,Pl=0,Ol}function vc(){for(;null!==Bl;)Ac(Bl)}function yc(){for(;null!==Bl&&!Ye();)Ac(Bl)}function Ac(e){var t=wl(e.alternate,e,Rl);e.memoizedProps=e.pendingProps,null===t?xc(e):Bl=t,Cl.current=null}function xc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=qs(n,t,Rl)))return void(Bl=n)}else{if(null!==(n=Xs(n,t)))return n.flags&=32767,void(Bl=n);if(null===e)return Ol=6,void(Bl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Bl=t);Bl=t=e}while(null!==t);0===Ol&&(Ol=5)}function bc(e,t,n){var r=At,i=Ml.transition;try{Ml.transition=null,At=1,function(e,t,n,r){do{_c()}while(null!==Xl);if(0!==(6&Tl))throw Error(o(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,a),e===Il&&(Bl=Il=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||ql||(ql=!0,Ic(tt,(function(){return _c(),null}))),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Ml.transition,Ml.transition=null;var s=At;At=1;var l=Tl;Tl|=4,Cl.current=null,function(e,t){if(ei=Ht,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(b){n=null;break e}var s=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=s+i),d!==a||0!==r&&3!==d.nodeType||(c=s+r),3===d.nodeType&&(s+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=s),f===a&&++h===r&&(c=s),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Zs=t;null!==Zs;)if(e=(t=Zs).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zs=e;else for(;null!==Zs;){t=Zs;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,v=m.memoizedState,y=t.stateNode,A=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:ns(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=A}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(o(163))}}catch(b){Ec(t,t.return,b)}if(null!==(e=t.sibling)){e.return=t.return,Zs=e;break}Zs=t.return}m=tl,tl=!1}(e,n),gl(n,e),pr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),Tl=l,At=s,Ml.transition=a}else e.current=n;if(ql&&(ql=!1,Xl=e,Yl=i),a=e.pendingLanes,0===a&&(Wl=null),function(e){if(ot&&"function"===typeof ot.onCommitFiberRoot)try{ot.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Ke()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=Vl,Vl=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===Kl?Jl++:(Jl=0,Kl=e):Jl=0,Gi()}(e,t,n,r)}finally{Ml.transition=i,At=r}return null}function _c(){if(null!==Xl){var e=xt(Yl),t=Ml.transition,n=At;try{if(Ml.transition=null,At=16>e?16:e,null===Xl)var r=!1;else{if(e=Xl,Xl=null,Yl=0,0!==(6&Tl))throw Error(o(331));var i=Tl;for(Tl|=4,Zs=e.current;null!==Zs;){var a=Zs,s=a.child;if(0!==(16&Zs.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Zs=u;null!==Zs;){var h=Zs;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Zs=d;else for(;null!==Zs;){var f=(h=Zs).sibling,p=h.return;if(ol(h),h===u){Zs=null;break}if(null!==f){f.return=p,Zs=f;break}Zs=p}}}var m=a.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Zs=a}}if(0!==(2064&a.subtreeFlags)&&null!==s)s.return=a,Zs=s;else e:for(;null!==Zs;){if(0!==(2048&(a=Zs).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Zs=y;break e}Zs=a.return}}var A=e.current;for(Zs=A;null!==Zs;){var x=(s=Zs).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,Zs=x;else e:for(s=A;null!==Zs;){if(0!==(2048&(l=Zs).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Ec(l,l.return,_)}if(l===s){Zs=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,Zs=b;break e}Zs=l.return}}if(Tl=i,Gi(),ot&&"function"===typeof ot.onPostCommitFiberRoot)try{ot.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{At=n,Ml.transition=t}}return!1}function wc(e,t,n){e=No(e,t=fs(0,t=cs(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function Ec(e,t,n){if(3===e.tag)wc(e,e,n);else for(;null!==t;){if(3===t.tag){wc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Wl||!Wl.has(r))){t=No(t,e=ps(t,e=cs(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Sc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Il===e&&(Pl&n)===n&&(4===Ol||3===Ol&&(130023424&Pl)===Pl&&500>Ke()-jl?dc(e,0):zl|=n),rc(e,t)}function Cc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=ko(e,t))&&(vt(e,t,n),rc(e,n))}function Mc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Tc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(o(314))}null!==r&&r.delete(t),Cc(e,n)}function Ic(e,t){return qe(e,t)}function Bc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Bc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,a){var s=2;if(r=e,"function"===typeof e)Rc(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case w:return kc(n.children,i,a,t);case E:s=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=a,e;case I:return(e=Pc(13,n,t,i)).elementType=I,e.lanes=a,e;case B:return(e=Pc(19,n,t,i)).elementType=B,e.lanes=a,e;case D:return Lc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case C:s=10;break e;case M:s=9;break e;case T:s=11;break e;case P:s=14;break e;case R:s=16,r=null;break e}throw Error(o(130,null==e?e:typeof e,""))}return(t=Pc(s,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function kc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Fc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Uc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Nc(e,t,n,r,i,o,a,s,l){return e=new Uc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Pc(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Fo(o),e}function jc(e){if(!e)return Mi;e:{if(Ge(e=e._reactInternals)!==e||1!==e.tag)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(o(171))}if(1===e.tag){var n=e.type;if(Ri(n))return ki(e,n,t)}return t}function Gc(e,t,n,r,i,o,a,s,l){return(e=Nc(n,r,!0,e,0,o,0,s,l)).context=jc(null),n=e.current,(o=Uo(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,No(n,o,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Qc(e,t,n,r){var i=t.current,o=ec(),a=tc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Uo(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=No(i,t,a))&&(nc(e,i,a,o),jo(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Vc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Vc(e,t),(e=e.alternate)&&Vc(e,t)}wl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ii.current)As=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return As=!1,function(e,t,n){switch(t.tag){case 3:Is(t),po();break;case 5:Zo(t);break;case 1:Ri(t.type)&&Li(t);break;case 4:Jo(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ci(wo,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ci(ea,1&ea.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Fs(e,t,n):(Ci(ea,1&ea.current),null!==(e=Hs(e,t,n))?e.sibling:null);Ci(ea,1&ea.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Gs(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ci(ea,ea.current),r)break;return null;case 22:case 23:return t.lanes=0,Es(e,t,n)}return Hs(e,t,n)}(e,t,n);As=0!==(131072&e.flags)}else As=!1,io&&0!==(1048576&t.flags)&&$i(t,Wi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Qs(e,t),e=t.pendingProps;var i=Pi(t,Ti.current);Bo(t,n),i=ga(null,t,r,e,i,n);var a=va();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(a=!0,Li(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Fo(t),i.updater=is,t.stateNode=i,i._reactInternals=t,ls(t,r,e,n),t=Ts(null,t,r,!0,a,n)):(t.tag=0,io&&a&&eo(t),xs(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Qs(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===T)return 11;if(e===P)return 14}return 2}(r),e=ns(r,e),i){case 0:t=Cs(null,t,r,e,n);break e;case 1:t=Ms(null,t,r,e,n);break e;case 11:t=bs(null,t,r,e,n);break e;case 14:t=_s(null,t,r,ns(r.type,e),n);break e}throw Error(o(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 1:return r=t.type,i=t.pendingProps,Ms(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 3:e:{if(Is(t),null===e)throw Error(o(387));r=t.pendingProps,i=(a=t.memoizedState).element,zo(e,t),Qo(t,r,null,n);var s=t.memoizedState;if(r=s.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Bs(e,t,r,n,i=cs(Error(o(423)),t));break e}if(r!==i){t=Bs(e,t,r,n,i=cs(Error(o(424)),t));break e}for(ro=ci(t.stateNode.containerInfo.firstChild),no=t,io=!0,oo=null,n=_o(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(po(),r===i){t=Hs(e,t,n);break e}xs(e,t,r,n)}t=t.child}return t;case 5:return Zo(t),null===e&&co(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,s=i.children,ni(r,i)?s=null:null!==a&&ni(r,a)&&(t.flags|=32),Ss(e,t),xs(e,t,s,n),t.child;case 6:return null===e&&co(t),null;case 13:return Fs(e,t,n);case 4:return Jo(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bo(t,null,r,n):xs(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,bs(e,t,r,i=t.elementType===r?i:ns(r,i),n);case 7:return xs(e,t,t.pendingProps,n),t.child;case 8:case 12:return xs(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,s=i.value,Ci(wo,r._currentValue),r._currentValue=s,null!==a)if(sr(a.value,s)){if(a.children===i.children&&!Ii.current){t=Hs(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){s=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Uo(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Io(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)s=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(s=a.return))throw Error(o(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),Io(s,n,t),s=a.sibling}else s=a.child;if(null!==s)s.return=a;else for(s=a;null!==s;){if(s===t){s=null;break}if(null!==(a=s.sibling)){a.return=s.return,s=a;break}s=s.return}a=s}xs(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Bo(t,n),r=r(i=Po(i)),t.flags|=1,xs(e,t,r,n),t.child;case 14:return i=ns(r=t.type,t.pendingProps),_s(e,t,r,i=ns(r.type,i),n);case 15:return ws(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ns(r,i),Qs(e,t),t.tag=1,Ri(r)?(e=!0,Li(t)):e=!1,Bo(t,n),as(t,r,i),ls(t,r,i,n),Ts(null,t,r,!0,e,n);case 19:return Gs(e,t,n);case 22:return Es(e,t,n)}throw Error(o(156,t.tag))};var qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Xc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Kc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function $c(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"===typeof i){var s=i;i=function(){var e=Hc(a);s.call(e)}}Qc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var o=r;r=function(){var e=Hc(a);o.call(e)}}var a=Gc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=a,e[pi]=a.current,Gr(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var s=r;r=function(){var e=Hc(l);s.call(e)}}var l=Nc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=l,e[pi]=l.current,Gr(8===e.nodeType?e.parentNode:e),uc((function(){Qc(t,l,n,r)})),l}(n,t,e,i,r);return Hc(a)}Yc.prototype.render=Xc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(o(409));Qc(e,t,null,null)},Yc.prototype.unmount=Xc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Qc(null,e,null,null)})),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Ft(e)}},bt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Ke()),0===(6&Tl)&&(Gl=Ke()+500,Gi()))}break;case 13:uc((function(){var t=ko(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=ko(e,134217728);if(null!==t)nc(t,e,134217728,ec());Wc(e,134217728)}},wt=function(e){if(13===e.tag){var t=tc(e),n=ko(e,t);if(null!==n)nc(n,e,t,ec());Wc(e,t)}},Et=function(){return At},St=function(e,t){var n=At;try{return At=e,t()}finally{At=n}},_e=function(e,t,n){switch(t){case"input":if(Z(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=bi(r);if(!i)throw Error(o(90));q(r),Z(r,i)}}}break;case"textarea":oe(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Te=cc,Ie=uc;var eu={usingClientEntryPoint:!1,Events:[Ai,xi,bi,Ce,Me,cc]},tu={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ve(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),ot=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(o(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(o(299));var n=!1,r="",i=qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Nc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Gr(8===e.nodeType?e.parentNode:e),new Xc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(o(188));throw e=Object.keys(e).join(","),Error(o(268,e))}return e=null===(e=Ve(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!Kc(t))throw Error(o(200));return $c(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(o(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",s=qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(s=n.onRecoverableError)),t=Gc(t,null,e,1,null!=n?n:null,i,0,a,s),e[pi]=t.current,Gr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!Kc(t))throw Error(o(200));return $c(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Kc(e))throw Error(o(40));return!!e._reactRootContainer&&(uc((function(){$c(null,null,e,!1,(function(){e._reactRootContainer=null,e[pi]=null}))})),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Kc(n))throw Error(o(200));if(null==e||void 0===e._reactInternals)throw Error(o(38));return $c(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},7302:(e,t)=>{"use strict";t.ConcurrentRoot=1,t.ContinuousEventPriority=4,t.DefaultEventPriority=16,t.DiscreteEventPriority=1},6958:(e,t,n)=>{e.exports=function(e){var t={},r=n(5043),i=n(8513),o=Object.assign;function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),h=Symbol.for("react.strict_mode"),d=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),y=Symbol.for("react.memo"),A=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var x=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var b=Symbol.iterator;function _(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=b&&e[b]||e["@@iterator"])?e:null}function w(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case u:return"Fragment";case c:return"Portal";case d:return"Profiler";case h:return"StrictMode";case g:return"Suspense";case v:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case p:return(e.displayName||"Context")+".Consumer";case f:return(e._context.displayName||"Context")+".Provider";case m:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case y:return null!==(t=e.displayName||null)?t:w(e.type)||"Memo";case A:t=e._payload,e=e._init;try{return w(e(t))}catch(n){}}return null}function E(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return w(t);case 8:return t===h?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function S(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function C(e){if(S(e)!==e)throw Error(a(188))}function M(e){var t=e.alternate;if(!t){if(null===(t=S(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return C(i),e;if(o===r)return C(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}function T(e){return null!==(e=M(e))?I(e):null}function I(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=I(e);if(null!==t)return t;e=e.sibling}return null}function B(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){if(4!==e.tag){var t=B(e);if(null!==t)return t}e=e.sibling}return null}var P,R=Array.isArray,D=e.getPublicInstance,O=e.getRootHostContext,k=e.getChildHostContext,L=e.prepareForCommit,F=e.resetAfterCommit,z=e.createInstance,U=e.appendInitialChild,N=e.finalizeInitialChildren,j=e.prepareUpdate,G=e.shouldSetTextContent,Q=e.createTextInstance,H=e.scheduleTimeout,V=e.cancelTimeout,W=e.noTimeout,q=e.isPrimaryRenderer,X=e.supportsMutation,Y=e.supportsPersistence,J=e.supportsHydration,K=e.getInstanceFromNode,Z=e.preparePortalMount,$=e.getCurrentEventPriority,ee=e.detachDeletedInstance,te=e.supportsMicrotasks,ne=e.scheduleMicrotask,re=e.supportsTestSelectors,ie=e.findFiberRoot,oe=e.getBoundingRect,ae=e.getTextContent,se=e.isHiddenSubtree,le=e.matchAccessibilityRole,ce=e.setFocusIfFocusable,ue=e.setupIntersectionObserver,he=e.appendChild,de=e.appendChildToContainer,fe=e.commitTextUpdate,pe=e.commitMount,me=e.commitUpdate,ge=e.insertBefore,ve=e.insertInContainerBefore,ye=e.removeChild,Ae=e.removeChildFromContainer,xe=e.resetTextContent,be=e.hideInstance,_e=e.hideTextInstance,we=e.unhideInstance,Ee=e.unhideTextInstance,Se=e.clearContainer,Ce=e.cloneInstance,Me=e.createContainerChildSet,Te=e.appendChildToContainerChildSet,Ie=e.finalizeContainerChildren,Be=e.replaceContainerChildren,Pe=e.cloneHiddenInstance,Re=e.cloneHiddenTextInstance,De=e.canHydrateInstance,Oe=e.canHydrateTextInstance,ke=e.canHydrateSuspenseInstance,Le=e.isSuspenseInstancePending,Fe=e.isSuspenseInstanceFallback,ze=e.registerSuspenseInstanceRetry,Ue=e.getNextHydratableSibling,Ne=e.getFirstHydratableChild,je=e.getFirstHydratableChildWithinContainer,Ge=e.getFirstHydratableChildWithinSuspenseInstance,Qe=e.hydrateInstance,He=e.hydrateTextInstance,Ve=e.hydrateSuspenseInstance,We=e.getNextHydratableInstanceAfterSuspenseInstance,qe=e.commitHydratedContainer,Xe=e.commitHydratedSuspenseInstance,Ye=e.clearSuspenseBoundary,Je=e.clearSuspenseBoundaryFromContainer,Ke=e.shouldDeleteUnhydratedTailInstances,Ze=e.didNotMatchHydratedContainerTextInstance,$e=e.didNotMatchHydratedTextInstance;function et(e){if(void 0===P)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);P=t&&t[1]||""}return"\n"+P+e}var tt=!1;function nt(e,t){if(!e||tt)return"";tt=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{tt=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?et(e):""}var rt=Object.prototype.hasOwnProperty,it=[],ot=-1;function at(e){return{current:e}}function st(e){0>ot||(e.current=it[ot],it[ot]=null,ot--)}function lt(e,t){ot++,it[ot]=e.current,e.current=t}var ct={},ut=at(ct),ht=at(!1),dt=ct;function ft(e,t){var n=e.type.contextTypes;if(!n)return ct;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function pt(e){return null!==(e=e.childContextTypes)&&void 0!==e}function mt(){st(ht),st(ut)}function gt(e,t,n){if(ut.current!==ct)throw Error(a(168));lt(ut,t),lt(ht,n)}function vt(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,E(e)||"Unknown",i));return o({},n,r)}function yt(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ct,dt=ut.current,lt(ut,e),lt(ht,ht.current),!0}function At(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=vt(e,t,dt),r.__reactInternalMemoizedMergedChildContext=e,st(ht),st(ut),lt(ut,e)):st(ht),lt(ht,n)}var xt=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(bt(e)/_t|0)|0},bt=Math.log,_t=Math.LN2;var wt=64,Et=4194304;function St(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Ct(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=St(s):0!==(o&=a)&&(r=St(o))}else 0!==(a=n&~i)?r=St(a):0!==o&&(r=St(o));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&0!==(4194240&o)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-xt(t)),r|=e[n],t&=~i;return r}function Mt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Tt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function It(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Bt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-xt(t)]=n}function Pt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-xt(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Rt=0;function Dt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var Ot=i.unstable_scheduleCallback,kt=i.unstable_cancelCallback,Lt=i.unstable_shouldYield,Ft=i.unstable_requestPaint,zt=i.unstable_now,Ut=i.unstable_ImmediatePriority,Nt=i.unstable_UserBlockingPriority,jt=i.unstable_NormalPriority,Gt=i.unstable_IdlePriority,Qt=null,Ht=null;var Vt="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},Wt=null,qt=!1,Xt=!1;function Yt(e){null===Wt?Wt=[e]:Wt.push(e)}function Jt(){if(!Xt&&null!==Wt){Xt=!0;var e=0,t=Rt;try{var n=Wt;for(Rt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Wt=null,qt=!1}catch(i){throw null!==Wt&&(Wt=Wt.slice(e+1)),Ot(Ut,Jt),i}finally{Rt=t,Xt=!1}}return null}var Kt=s.ReactCurrentBatchConfig;function Zt(e,t){if(Vt(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!rt.call(t,i)||!Vt(e[i],t[i]))return!1}return!0}function $t(e){switch(e.tag){case 5:return et(e.type);case 16:return et("Lazy");case 13:return et("Suspense");case 19:return et("SuspenseList");case 0:case 2:case 15:return e=nt(e.type,!1);case 11:return e=nt(e.type.render,!1);case 1:return e=nt(e.type,!0);default:return""}}function en(e,t){if(e&&e.defaultProps){for(var n in t=o({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var tn=at(null),nn=null,rn=null,on=null;function an(){on=rn=nn=null}function sn(e,t,n){q?(lt(tn,t._currentValue),t._currentValue=n):(lt(tn,t._currentValue2),t._currentValue2=n)}function ln(e){var t=tn.current;st(tn),q?e._currentValue=t:e._currentValue2=t}function cn(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function un(e,t){nn=e,on=rn=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(Li=!0),e.firstContext=null)}function hn(e){var t=q?e._currentValue:e._currentValue2;if(on!==e)if(e={context:e,memoizedValue:t,next:null},null===rn){if(null===nn)throw Error(a(308));rn=e,nn.dependencies={lanes:0,firstContext:e}}else rn=rn.next=e;return t}var dn=null,fn=!1;function pn(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mn(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function gn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function vn(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,null!==Yo&&0!==(1&e.mode)&&0===(2&Xo)?(null===(e=n.interleaved)?(t.next=t,null===dn?dn=[n]:dn.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function yn(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pt(e,n)}}function An(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function xn(e,t,n,r){var i=e.updateQueue;fn=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(null!==l){i.shared.pending=null;var c=l,u=c.next;c.next=null,null===s?a=u:s.next=u,s=c;var h=e.alternate;null!==h&&((l=(h=h.updateQueue).lastBaseUpdate)!==s&&(null===l?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(null!==a){var d=i.baseState;for(s=0,h=u=c=null,l=a;;){var f=l.lane,p=l.eventTime;if((r&f)===f){null!==h&&(h=h.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=e,g=l;switch(f=t,p=n,g.tag){case 1:if("function"===typeof(m=g.payload)){d=m.call(p,d,f);break e}d=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(f="function"===typeof(m=g.payload)?m.call(p,d,f):m)||void 0===f)break e;d=o({},d,f);break e;case 2:fn=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(f=i.effects)?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===h?(u=h=p,c=d):h=h.next=p,s|=f;if(null===(l=l.next)){if(null===(l=i.shared.pending))break;l=(f=l).next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}if(null===h&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,null!==(t=i.shared.interleaved)){i=t;do{s|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);na|=s,e.lanes=s,e.memoizedState=d}}function bn(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var _n=(new r.Component).refs;function wn(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:o({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var En={isMounted:function(e){return!!(e=e._reactInternals)&&S(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ba(),i=_a(e),o=gn(r,i);o.payload=t,void 0!==n&&null!==n&&(o.callback=n),vn(e,o),null!==(t=wa(e,i,r))&&yn(t,e,i)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ba(),i=_a(e),o=gn(r,i);o.tag=1,o.payload=t,void 0!==n&&null!==n&&(o.callback=n),vn(e,o),null!==(t=wa(e,i,r))&&yn(t,e,i)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ba(),r=_a(e),i=gn(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),vn(e,i),null!==(t=wa(e,r,n))&&yn(t,e,r)}};function Sn(e,t,n,r,i,o,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!t.prototype||!t.prototype.isPureReactComponent||(!Zt(n,r)||!Zt(i,o))}function Cn(e,t,n){var r=!1,i=ct,o=t.contextType;return"object"===typeof o&&null!==o?o=hn(o):(i=pt(t)?dt:ut.current,o=(r=null!==(r=t.contextTypes)&&void 0!==r)?ft(e,i):ct),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=En,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Mn(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&En.enqueueReplaceState(t,t.state,null)}function Tn(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=_n,pn(e);var o=t.contextType;"object"===typeof o&&null!==o?i.context=hn(o):(o=pt(t)?dt:ut.current,i.context=ft(e,o)),i.state=e.memoizedState,"function"===typeof(o=t.getDerivedStateFromProps)&&(wn(e,t,o,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&En.enqueueReplaceState(i,i.state,null),xn(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}var In=[],Bn=0,Pn=null,Rn=0,Dn=[],On=0,kn=null,Ln=1,Fn="";function zn(e,t){In[Bn++]=Rn,In[Bn++]=Pn,Pn=e,Rn=t}function Un(e,t,n){Dn[On++]=Ln,Dn[On++]=Fn,Dn[On++]=kn,kn=e;var r=Ln;e=Fn;var i=32-xt(r)-1;r&=~(1<<i),n+=1;var o=32-xt(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ln=1<<32-xt(t)+i|n<<i|r,Fn=o+e}else Ln=1<<o|n<<i|r,Fn=e}function Nn(e){null!==e.return&&(zn(e,1),Un(e,1,0))}function jn(e){for(;e===Pn;)Pn=In[--Bn],In[Bn]=null,Rn=In[--Bn],In[Bn]=null;for(;e===kn;)kn=Dn[--On],Dn[On]=null,Fn=Dn[--On],Dn[On]=null,Ln=Dn[--On],Dn[On]=null}var Gn=null,Qn=null,Hn=!1,Vn=!1,Wn=null;function qn(e,t){var n=Za(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Xn(e,t){switch(e.tag){case 5:return null!==(t=De(t,e.type,e.pendingProps))&&(e.stateNode=t,Gn=e,Qn=Ne(t),!0);case 6:return null!==(t=Oe(t,e.pendingProps))&&(e.stateNode=t,Gn=e,Qn=null,!0);case 13:if(null!==(t=ke(t))){var n=null!==kn?{id:Ln,overflow:Fn}:null;return e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Za(18,null,null,0)).stateNode=t,n.return=e,e.child=n,Gn=e,Qn=null,!0}return!1;default:return!1}}function Yn(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Jn(e){if(Hn){var t=Qn;if(t){var n=t;if(!Xn(e,t)){if(Yn(e))throw Error(a(418));t=Ue(n);var r=Gn;t&&Xn(e,t)?qn(r,n):(e.flags=-4097&e.flags|2,Hn=!1,Gn=e)}}else{if(Yn(e))throw Error(a(418));e.flags=-4097&e.flags|2,Hn=!1,Gn=e}}}function Kn(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;Gn=e}function Zn(e){if(!J||e!==Gn)return!1;if(!Hn)return Kn(e),Hn=!0,!1;if(3!==e.tag&&(5!==e.tag||Ke(e.type)&&!G(e.type,e.memoizedProps))){var t=Qn;if(t){if(Yn(e)){for(e=Qn;e;)e=Ue(e);throw Error(a(418))}for(;t;)qn(e,t),t=Ue(t)}}if(Kn(e),13===e.tag){if(!J)throw Error(a(316));if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));Qn=We(e)}else Qn=Gn?Ue(e.stateNode):null;return!0}function $n(){J&&(Qn=Gn=null,Vn=Hn=!1)}function er(e){null===Wn?Wn=[e]:Wn.push(e)}function tr(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===_n&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function nr(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function rr(e){return(0,e._init)(e._payload)}function ir(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=es(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function s(t){return e&&null===t.alternate&&(t.flags|=2),t}function h(e,t,n,r){return null===t||6!==t.tag?((t=is(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n,r){var o=n.type;return o===u?p(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"===typeof o&&null!==o&&o.$$typeof===A&&rr(o)===t.type)?((r=i(t,n.props)).ref=tr(e,t,n),r.return=e,r):((r=ts(n.type,n.key,n.props,null,e.mode,r)).ref=tr(e,t,n),r.return=e,r)}function f(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=os(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function p(e,t,n,r,o){return null===t||7!==t.tag?((t=ns(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=is(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case l:return(n=ts(t.type,t.key,t.props,null,e.mode,n)).ref=tr(e,null,t),n.return=e,n;case c:return(t=os(t,e.mode,n)).return=e,t;case A:return m(e,(0,t._init)(t._payload),n)}if(R(t)||_(t))return(t=ns(t,e.mode,n,null)).return=e,t;nr(e,t)}return null}function g(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:h(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case l:return n.key===i?d(e,t,n,r):null;case c:return n.key===i?f(e,t,n,r):null;case A:return g(e,t,(i=n._init)(n._payload),r)}if(R(n)||_(n))return null!==i?null:p(e,t,n,r,null);nr(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return h(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case l:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case c:return f(t,e=e.get(null===r.key?n:r.key)||null,r,i);case A:return v(e,t,n,(0,r._init)(r._payload),i)}if(R(r)||_(r))return p(t,e=e.get(n)||null,r,i,null);nr(t,r)}return null}function y(i,a,s,l){for(var c=null,u=null,h=a,d=a=0,f=null;null!==h&&d<s.length;d++){h.index>d?(f=h,h=null):f=h.sibling;var p=g(i,h,s[d],l);if(null===p){null===h&&(h=f);break}e&&h&&null===p.alternate&&t(i,h),a=o(p,a,d),null===u?c=p:u.sibling=p,u=p,h=f}if(d===s.length)return n(i,h),Hn&&zn(i,d),c;if(null===h){for(;d<s.length;d++)null!==(h=m(i,s[d],l))&&(a=o(h,a,d),null===u?c=h:u.sibling=h,u=h);return Hn&&zn(i,d),c}for(h=r(i,h);d<s.length;d++)null!==(f=v(h,i,d,s[d],l))&&(e&&null!==f.alternate&&h.delete(null===f.key?d:f.key),a=o(f,a,d),null===u?c=f:u.sibling=f,u=f);return e&&h.forEach((function(e){return t(i,e)})),Hn&&zn(i,d),c}function x(i,s,l,c){var u=_(l);if("function"!==typeof u)throw Error(a(150));if(null==(l=u.call(l)))throw Error(a(151));for(var h=u=null,d=s,f=s=0,p=null,y=l.next();null!==d&&!y.done;f++,y=l.next()){d.index>f?(p=d,d=null):p=d.sibling;var A=g(i,d,y.value,c);if(null===A){null===d&&(d=p);break}e&&d&&null===A.alternate&&t(i,d),s=o(A,s,f),null===h?u=A:h.sibling=A,h=A,d=p}if(y.done)return n(i,d),Hn&&zn(i,f),u;if(null===d){for(;!y.done;f++,y=l.next())null!==(y=m(i,y.value,c))&&(s=o(y,s,f),null===h?u=y:h.sibling=y,h=y);return Hn&&zn(i,f),u}for(d=r(i,d);!y.done;f++,y=l.next())null!==(y=v(d,i,f,y.value,c))&&(e&&null!==y.alternate&&d.delete(null===y.key?f:y.key),s=o(y,s,f),null===h?u=y:h.sibling=y,h=y);return e&&d.forEach((function(e){return t(i,e)})),Hn&&zn(i,f),u}return function e(r,o,a,h){if("object"===typeof a&&null!==a&&a.type===u&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case l:e:{for(var d=a.key,f=o;null!==f;){if(f.key===d){if((d=a.type)===u){if(7===f.tag){n(r,f.sibling),(o=i(f,a.props.children)).return=r,r=o;break e}}else if(f.elementType===d||"object"===typeof d&&null!==d&&d.$$typeof===A&&rr(d)===f.type){n(r,f.sibling),(o=i(f,a.props)).ref=tr(r,f,a),o.return=r,r=o;break e}n(r,f);break}t(r,f),f=f.sibling}a.type===u?((o=ns(a.props.children,r.mode,h,a.key)).return=r,r=o):((h=ts(a.type,a.key,a.props,null,r.mode,h)).ref=tr(r,o,a),h.return=r,r=h)}return s(r);case c:e:{for(f=a.key;null!==o;){if(o.key===f){if(4===o.tag&&o.stateNode.containerInfo===a.containerInfo&&o.stateNode.implementation===a.implementation){n(r,o.sibling),(o=i(o,a.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=os(a,r.mode,h)).return=r,r=o}return s(r);case A:return e(r,o,(f=a._init)(a._payload),h)}if(R(a))return y(r,o,a,h);if(_(a))return x(r,o,a,h);nr(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,a)).return=r,r=o):(n(r,o),(o=is(a,r.mode,h)).return=r,r=o),s(r)):n(r,o)}}var or=ir(!0),ar=ir(!1),sr={},lr=at(sr),cr=at(sr),ur=at(sr);function hr(e){if(e===sr)throw Error(a(174));return e}function dr(e,t){lt(ur,t),lt(cr,e),lt(lr,sr),e=O(t),st(lr),lt(lr,e)}function fr(){st(lr),st(cr),st(ur)}function pr(e){var t=hr(ur.current),n=hr(lr.current);n!==(t=k(n,e.type,t))&&(lt(cr,e),lt(lr,t))}function mr(e){cr.current===e&&(st(lr),st(cr))}var gr=at(0);function vr(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||Le(n)||Fe(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var yr=[];function Ar(){for(var e=0;e<yr.length;e++){var t=yr[e];q?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}yr.length=0}var xr=s.ReactCurrentDispatcher,br=s.ReactCurrentBatchConfig,_r=0,wr=null,Er=null,Sr=null,Cr=!1,Mr=!1,Tr=0,Ir=0;function Br(){throw Error(a(321))}function Pr(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Vt(e[n],t[n]))return!1;return!0}function Rr(e,t,n,r,i,o){if(_r=o,wr=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xr.current=null===e||null===e.memoizedState?pi:mi,e=n(r,i),Mr){o=0;do{if(Mr=!1,Tr=0,25<=o)throw Error(a(301));o+=1,Sr=Er=null,t.updateQueue=null,xr.current=gi,e=n(r,i)}while(Mr)}if(xr.current=fi,t=null!==Er&&null!==Er.next,_r=0,Sr=Er=wr=null,Cr=!1,t)throw Error(a(300));return e}function Dr(){var e=0!==Tr;return Tr=0,e}function Or(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Sr?wr.memoizedState=Sr=e:Sr=Sr.next=e,Sr}function kr(){if(null===Er){var e=wr.alternate;e=null!==e?e.memoizedState:null}else e=Er.next;var t=null===Sr?wr.memoizedState:Sr.next;if(null!==t)Sr=t,Er=e;else{if(null===e)throw Error(a(310));e={memoizedState:(Er=e).memoizedState,baseState:Er.baseState,baseQueue:Er.baseQueue,queue:Er.queue,next:null},null===Sr?wr.memoizedState=Sr=e:Sr=Sr.next=e}return Sr}function Lr(e,t){return"function"===typeof t?t(e):t}function Fr(e){var t=kr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=Er,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var l=s=null,c=null,u=o;do{var h=u.lane;if((_r&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,s=r):c=c.next=d,wr.lanes|=h,na|=h}u=u.next}while(null!==u&&u!==o);null===c?s=r:c.next=l,Vt(r,t.memoizedState)||(Li=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,wr.lanes|=o,na|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function zr(e){var t=kr(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var s=i=i.next;do{o=e(o,s.action),s=s.next}while(s!==i);Vt(o,t.memoizedState)||(Li=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ur(){}function Nr(e,t){var n=wr,r=kr(),i=t(),o=!Vt(r.memoizedState,i);if(o&&(r.memoizedState=i,Li=!0),r=r.queue,Kr(Qr.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==Sr&&1&Sr.memoizedState.tag){if(n.flags|=2048,Wr(9,Gr.bind(null,n,r,i,t),void 0,null),null===Yo)throw Error(a(349));0!==(30&_r)||jr(n,t,i)}return i}function jr(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=wr.updateQueue)?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Gr(e,t,n,r){t.value=n,t.getSnapshot=r,Hr(t)&&wa(e,1,-1)}function Qr(e,t,n){return n((function(){Hr(t)&&wa(e,1,-1)}))}function Hr(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Vt(e,n)}catch(r){return!0}}function Vr(e){var t=Or();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lr,lastRenderedState:e},t.queue=e,e=e.dispatch=li.bind(null,wr,e),[t.memoizedState,e]}function Wr(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=wr.updateQueue)?(t={lastEffect:null,stores:null},wr.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function qr(){return kr().memoizedState}function Xr(e,t,n,r){var i=Or();wr.flags|=e,i.memoizedState=Wr(1|t,n,void 0,void 0===r?null:r)}function Yr(e,t,n,r){var i=kr();r=void 0===r?null:r;var o=void 0;if(null!==Er){var a=Er.memoizedState;if(o=a.destroy,null!==r&&Pr(r,a.deps))return void(i.memoizedState=Wr(t,n,o,r))}wr.flags|=e,i.memoizedState=Wr(1|t,n,o,r)}function Jr(e,t){return Xr(8390656,8,e,t)}function Kr(e,t){return Yr(2048,8,e,t)}function Zr(e,t){return Yr(4,2,e,t)}function $r(e,t){return Yr(4,4,e,t)}function ei(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function ti(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Yr(4,4,ei.bind(null,t,e),n)}function ni(){}function ri(e,t){var n=kr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Pr(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function ii(e,t){var n=kr();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&Pr(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function oi(e,t){var n=Rt;Rt=0!==n&&4>n?n:4,e(!0);var r=br.transition;br.transition={};try{e(!1),t()}finally{Rt=n,br.transition=r}}function ai(){return kr().memoizedState}function si(e,t,n){var r=_a(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ci(e)?ui(t,n):(hi(e,t,n),null!==(e=wa(e,r,n=ba()))&&di(e,t,r))}function li(e,t,n){var r=_a(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ci(e))ui(t,i);else{hi(e,t,i);var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,Vt(s,a))return}catch(l){}null!==(e=wa(e,r,n=ba()))&&di(e,t,r)}}function ci(e){var t=e.alternate;return e===wr||null!==t&&t===wr}function ui(e,t){Mr=Cr=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function hi(e,t,n){null!==Yo&&0!==(1&e.mode)&&0===(2&Xo)?(null===(e=t.interleaved)?(n.next=n,null===dn?dn=[t]:dn.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function di(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Pt(e,n)}}var fi={readContext:hn,useCallback:Br,useContext:Br,useEffect:Br,useImperativeHandle:Br,useInsertionEffect:Br,useLayoutEffect:Br,useMemo:Br,useReducer:Br,useRef:Br,useState:Br,useDebugValue:Br,useDeferredValue:Br,useTransition:Br,useMutableSource:Br,useSyncExternalStore:Br,useId:Br,unstable_isNewReconciler:!1},pi={readContext:hn,useCallback:function(e,t){return Or().memoizedState=[e,void 0===t?null:t],e},useContext:hn,useEffect:Jr,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Xr(4194308,4,ei.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Xr(4194308,4,e,t)},useInsertionEffect:function(e,t){return Xr(4,2,e,t)},useMemo:function(e,t){var n=Or();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Or();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=si.bind(null,wr,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Or().memoizedState=e},useState:Vr,useDebugValue:ni,useDeferredValue:function(e){var t=Vr(e),n=t[0],r=t[1];return Jr((function(){var t=br.transition;br.transition={};try{r(e)}finally{br.transition=t}}),[e]),n},useTransition:function(){var e=Vr(!1),t=e[0];return e=oi.bind(null,e[1]),Or().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=wr,i=Or();if(Hn){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Yo)throw Error(a(349));0!==(30&_r)||jr(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Jr(Qr.bind(null,r,o,e),[e]),r.flags|=2048,Wr(9,Gr.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Or(),t=Yo.identifierPrefix;if(Hn){var n=Fn;t=":"+t+"R"+(n=(Ln&~(1<<32-xt(Ln)-1)).toString(32)+n),0<(n=Tr++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=Ir++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},mi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Kr,useImperativeHandle:ti,useInsertionEffect:Zr,useLayoutEffect:$r,useMemo:ii,useReducer:Fr,useRef:qr,useState:function(){return Fr(Lr)},useDebugValue:ni,useDeferredValue:function(e){var t=Fr(Lr),n=t[0],r=t[1];return Kr((function(){var t=br.transition;br.transition={};try{r(e)}finally{br.transition=t}}),[e]),n},useTransition:function(){return[Fr(Lr)[0],kr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Nr,useId:ai,unstable_isNewReconciler:!1},gi={readContext:hn,useCallback:ri,useContext:hn,useEffect:Kr,useImperativeHandle:ti,useInsertionEffect:Zr,useLayoutEffect:$r,useMemo:ii,useReducer:zr,useRef:qr,useState:function(){return zr(Lr)},useDebugValue:ni,useDeferredValue:function(e){var t=zr(Lr),n=t[0],r=t[1];return Kr((function(){var t=br.transition;br.transition={};try{r(e)}finally{br.transition=t}}),[e]),n},useTransition:function(){return[zr(Lr)[0],kr().memoizedState]},useMutableSource:Ur,useSyncExternalStore:Nr,useId:ai,unstable_isNewReconciler:!1};function vi(e,t){try{var n="",r=t;do{n+=$t(r),r=r.return}while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:e,source:t,stack:i}}function yi(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var Ai,xi,bi,_i,wi="function"===typeof WeakMap?WeakMap:Map;function Ei(e,t,n){(n=gn(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ha||(ha=!0,da=r),yi(0,t)},n}function Si(e,t,n){(n=gn(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){yi(0,t)}}var o=e.stateNode;return null!==o&&"function"===typeof o.componentDidCatch&&(n.callback=function(){yi(0,t),"function"!==typeof r&&(null===fa?fa=new Set([this]):fa.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function Ci(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new wi;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Wa.bind(null,e,t,n),t.then(e,e))}function Mi(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ti(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=gn(-1,1)).tag=2,vn(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}function Ii(e){e.flags|=4}function Bi(e,t){if(null!==e&&e.child===t.child)return!0;if(0!==(16&t.flags))return!1;for(e=t.child;null!==e;){if(0!==(12854&e.flags)||0!==(12854&e.subtreeFlags))return!1;e=e.sibling}return!0}if(X)Ai=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)U(e,n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},xi=function(){},bi=function(e,t,n,r,i){if((e=e.memoizedProps)!==r){var o=t.stateNode,a=hr(lr.current);n=j(o,n,e,r,i,a),(t.updateQueue=n)&&Ii(t)}},_i=function(e,t,n,r){n!==r&&Ii(t)};else if(Y){Ai=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Pe(o,i.type,i.memoizedProps,i)),U(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Re(o,i.memoizedProps,i)),U(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),Ai(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};var Pi=function(e,t,n,r){for(var i=t.child;null!==i;){if(5===i.tag){var o=i.stateNode;n&&r&&(o=Pe(o,i.type,i.memoizedProps,i)),Te(e,o)}else if(6===i.tag)o=i.stateNode,n&&r&&(o=Re(o,i.memoizedProps,i)),Te(e,o);else if(4!==i.tag)if(22===i.tag&&null!==i.memoizedState)null!==(o=i.child)&&(o.return=i),Pi(e,i,!0,!0);else if(null!==i.child){i.child.return=i,i=i.child;continue}if(i===t)break;for(;null===i.sibling;){if(null===i.return||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};xi=function(e,t){var n=t.stateNode;if(!Bi(e,t)){e=n.containerInfo;var r=Me(e);Pi(r,t,!1,!1),n.pendingChildren=r,Ii(t),Ie(e,r)}},bi=function(e,t,n,r,i){var o=e.stateNode,a=e.memoizedProps;if((e=Bi(e,t))&&a===r)t.stateNode=o;else{var s=t.stateNode,l=hr(lr.current),c=null;a!==r&&(c=j(s,n,a,r,i,l)),e&&null===c?t.stateNode=o:(o=Ce(o,c,n,a,r,t,e,s),N(o,n,r,i,l)&&Ii(t),t.stateNode=o,e?Ii(t):Ai(o,t,!1,!1))}},_i=function(e,t,n,r){n!==r?(e=hr(ur.current),n=hr(lr.current),t.stateNode=Q(r,e,n,t),Ii(t)):t.stateNode=e.stateNode}}else xi=function(){},bi=function(){},_i=function(){};function Ri(e,t){if(!Hn)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Di(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Oi(e,t,n){var r=t.pendingProps;switch(jn(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Di(t),null;case 1:case 17:return pt(t.type)&&mt(),Di(t),null;case 3:return r=t.stateNode,fr(),st(ht),st(ut),Ar(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Zn(t)?Ii(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Wn&&(Ta(Wn),Wn=null))),xi(e,t),Di(t),null;case 5:mr(t),n=hr(ur.current);var i=t.type;if(null!==e&&null!=t.stateNode)bi(e,t,i,r,n),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Di(t),null}if(e=hr(lr.current),Zn(t)){if(!J)throw Error(a(175));e=Qe(t.stateNode,t.type,t.memoizedProps,n,e,t,!Vn),t.updateQueue=e,null!==e&&Ii(t)}else{var o=z(i,r,n,e,t);Ai(o,t,!1,!1),t.stateNode=o,N(o,i,r,n,e)&&Ii(t)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Di(t),null;case 6:if(e&&null!=t.stateNode)_i(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=hr(ur.current),n=hr(lr.current),Zn(t)){if(!J)throw Error(a(176));if(e=t.stateNode,r=t.memoizedProps,(n=He(e,r,t,!Vn))&&null!==(i=Gn))switch(o=0!==(1&i.mode),i.tag){case 3:Ze(i.stateNode.containerInfo,e,r,o);break;case 5:$e(i.type,i.memoizedProps,i.stateNode,e,r,o)}n&&Ii(t)}else t.stateNode=Q(r,e,n,t)}return Di(t),null;case 13:if(st(gr),r=t.memoizedState,Hn&&null!==Qn&&0!==(1&t.mode)&&0===(128&t.flags)){for(e=Qn;e;)e=Ue(e);return $n(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Zn(t),null===e){if(!r)throw Error(a(318));if(!J)throw Error(a(344));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(a(317));Ve(e,t)}else $n(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return Di(t),null}return null!==Wn&&(Ta(Wn),Wn=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Zn(t):n=null!==e.memoizedState,r&&!n&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&gr.current)?0===ea&&(ea=3):La())),null!==t.updateQueue&&(t.flags|=4),Di(t),null);case 4:return fr(),xi(e,t),null===e&&Z(t.stateNode.containerInfo),Di(t),null;case 10:return ln(t.type._context),Di(t),null;case 19:if(st(gr),null===(i=t.memoizedState))return Di(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)Ri(i,!1);else{if(0!==ea||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=vr(e))){for(t.flags|=128,Ri(i,!1),null!==(e=o.updateQueue)&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=n,r=t.child;null!==r;)i=e,(n=r).flags&=14680066,null===(o=n.alternate)?(n.childLanes=0,n.lanes=i,n.child=null,n.subtreeFlags=0,n.memoizedProps=null,n.memoizedState=null,n.updateQueue=null,n.dependencies=null,n.stateNode=null):(n.childLanes=o.childLanes,n.lanes=o.lanes,n.child=o.child,n.subtreeFlags=0,n.deletions=null,n.memoizedProps=o.memoizedProps,n.memoizedState=o.memoizedState,n.updateQueue=o.updateQueue,n.type=o.type,i=o.dependencies,n.dependencies=null===i?null:{lanes:i.lanes,firstContext:i.firstContext}),r=r.sibling;return lt(gr,1&gr.current|2),t.child}e=e.sibling}null!==i.tail&&zt()>la&&(t.flags|=128,r=!0,Ri(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=vr(o))){if(t.flags|=128,r=!0,null!==(e=e.updateQueue)&&(t.updateQueue=e,t.flags|=4),Ri(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!Hn)return Di(t),null}else 2*zt()-i.renderingStartTime>la&&1073741824!==n&&(t.flags|=128,r=!0,Ri(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(e=i.last)?e.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=zt(),t.sibling=null,e=gr.current,lt(gr,r?1&e|2:1&e),t):(Di(t),null);case 22:case 23:return Ra(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Zo)&&(Di(t),X&&6&t.subtreeFlags&&(t.flags|=8192)):Di(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}var ki=s.ReactCurrentOwner,Li=!1;function Fi(e,t,n,r){t.child=null===e?ar(t,null,n,r):or(t,e.child,n,r)}function zi(e,t,n,r,i){n=n.render;var o=t.ref;return un(t,i),r=Rr(e,t,n,r,o,i),n=Dr(),null===e||Li?(Hn&&n&&Nn(t),t.flags|=1,Fi(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,io(e,t,i))}function Ui(e,t,n,r,i){if(null===e){var o=n.type;return"function"!==typeof o||$a(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=ts(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,Ni(e,t,o,r,i))}if(o=e.child,0===(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:Zt)(a,r)&&e.ref===t.ref)return io(e,t,i)}return t.flags|=1,(e=es(o,r)).ref=t.ref,e.return=t,t.child=e}function Ni(e,t,n,r,i){if(null!==e&&Zt(e.memoizedProps,r)&&e.ref===t.ref){if(Li=!1,0===(e.lanes&i))return t.lanes=e.lanes,io(e,t,i);0!==(131072&e.flags)&&(Li=!0)}return Qi(e,t,n,r,i)}function ji(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null},lt($o,Zo),Zo|=n;else{if(0===(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,lt($o,Zo),Zo|=e,null;t.memoizedState={baseLanes:0,cachePool:null},r=null!==o?o.baseLanes:n,lt($o,Zo),Zo|=r}else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,lt($o,Zo),Zo|=r;return Fi(e,t,i,n),t.child}function Gi(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Qi(e,t,n,r,i){var o=pt(n)?dt:ut.current;return o=ft(t,o),un(t,i),n=Rr(e,t,n,r,o,i),r=Dr(),null===e||Li?(Hn&&r&&Nn(t),t.flags|=1,Fi(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,io(e,t,i))}function Hi(e,t,n,r,i){if(pt(n)){var o=!0;yt(t)}else o=!1;if(un(t,i),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),Cn(t,n,r),Tn(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=hn(c):c=ft(t,c=pt(n)?dt:ut.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==r||l!==c)&&Mn(t,a,r,c),fn=!1;var d=t.memoizedState;a.state=d,xn(t,r,a,i),l=t.memoizedState,s!==r||d!==l||ht.current||fn?("function"===typeof u&&(wn(t,n,u,r),l=t.memoizedState),(s=fn||Sn(t,n,s,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=s):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,mn(e,t),s=t.memoizedProps,c=t.type===t.elementType?s:en(t.type,s),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=hn(l):l=ft(t,l=pt(n)?dt:ut.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(s!==h||d!==l)&&Mn(t,a,r,l),fn=!1,d=t.memoizedState,a.state=d,xn(t,r,a,i);var p=t.memoizedState;s!==h||d!==p||ht.current||fn?("function"===typeof f&&(wn(t,n,f,r),p=t.memoizedState),(c=fn||Sn(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Vi(e,t,n,r,o,i)}function Vi(e,t,n,r,i,o){Gi(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&At(t,n,!1),io(e,t,o);r=t.stateNode,ki.current=t;var s=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=or(t,e.child,null,o),t.child=or(t,null,s,o)):Fi(e,t,s,o),t.memoizedState=r.state,i&&At(t,n,!0),t.child}function Wi(e){var t=e.stateNode;t.pendingContext?gt(0,t.pendingContext,t.pendingContext!==t.context):t.context&&gt(0,t.context,!1),dr(e,t.containerInfo)}function qi(e,t,n,r,i){return $n(),er(i),t.flags|=256,Fi(e,t,n,r),t.child}var Xi={dehydrated:null,treeContext:null,retryLane:0};function Yi(e){return{baseLanes:e,cachePool:null}}function Ji(e,t,n){var r,i=t.pendingProps,o=gr.current,s=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(s=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),lt(gr,1&o),null===e)return Jn(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:Fe(e)?t.lanes=8:t.lanes=1073741824,null):(o=i.children,e=i.fallback,s?(i=t.mode,s=t.child,o={mode:"hidden",children:o},0===(1&i)&&null!==s?(s.childLanes=0,s.pendingProps=o):s=rs(o,i,0,null),e=ns(e,i,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=Yi(n),t.memoizedState=Xi,e):Ki(t,o));if(null!==(o=e.memoizedState)){if(null!==(r=o.dehydrated)){if(l)return 256&t.flags?(t.flags&=-257,eo(e,t,n,Error(a(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(s=i.fallback,o=t.mode,i=rs({mode:"visible",children:i.children},o,0,null),(s=ns(s,o,n,null)).flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,0!==(1&t.mode)&&or(t,e.child,null,n),t.child.memoizedState=Yi(n),t.memoizedState=Xi,s);if(0===(1&t.mode))t=eo(e,t,n,null);else if(Fe(r))t=eo(e,t,n,Error(a(419)));else if(i=0!==(n&e.childLanes),Li||i){if(null!==(i=Yo)){switch(n&-n){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(i=0!==(s&(i.suspendedLanes|n))?0:s)&&i!==o.retryLane&&(o.retryLane=i,wa(e,i,-1))}La(),t=eo(e,t,n,Error(a(421)))}else Le(r)?(t.flags|=128,t.child=e.child,t=Xa.bind(null,e),ze(r,t),t=null):(n=o.treeContext,J&&(Qn=Ge(r),Gn=t,Hn=!0,Wn=null,Vn=!1,null!==n&&(Dn[On++]=Ln,Dn[On++]=Fn,Dn[On++]=kn,Ln=n.id,Fn=n.overflow,kn=t)),(t=Ki(t,t.pendingProps.children)).flags|=4096);return t}return s?(i=$i(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Yi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Xi,i):(n=Zi(e,t,i.children,n),t.memoizedState=null,n)}return s?(i=$i(e,t,i.children,i.fallback,n),s=t.child,o=e.child.memoizedState,s.memoizedState=null===o?Yi(n):{baseLanes:o.baseLanes|n,cachePool:null},s.childLanes=e.childLanes&~n,t.memoizedState=Xi,i):(n=Zi(e,t,i.children,n),t.memoizedState=null,n)}function Ki(e,t){return(t=rs({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Zi(e,t,n,r){var i=e.child;return e=i.sibling,n=es(i,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function $i(e,t,n,r,i){var o=t.mode,a=(e=e.child).sibling,s={mode:"hidden",children:n};return 0===(1&o)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=s,t.deletions=null):(n=es(e,s)).subtreeFlags=14680064&e.subtreeFlags,null!==a?r=es(a,r):(r=ns(r,o,i,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function eo(e,t,n,r){return null!==r&&er(r),or(t,e.child,null,n),(e=Ki(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function to(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),cn(e.return,t,n)}function no(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function ro(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(Fi(e,t,r.children,n),0!==(2&(r=gr.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&to(e,n,t);else if(19===e.tag)to(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(lt(gr,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===vr(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),no(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===vr(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}no(t,!0,n,null,o);break;case"together":no(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function io(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),na|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=es(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=es(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function oo(e,t){switch(jn(t),t.tag){case 1:return pt(t.type)&&mt(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return fr(),st(ht),st(ut),Ar(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return mr(t),null;case 13:if(st(gr),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));$n()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return st(gr),null;case 4:return fr(),null;case 10:return ln(t.type._context),null;case 22:case 23:return Ra(),null;default:return null}}var ao=!1,so=!1,lo="function"===typeof WeakSet?WeakSet:Set,co=null;function uo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Va(e,t,r)}else n.current=null}function ho(e,t,n){try{n()}catch(r){Va(e,t,r)}}var fo=!1;function po(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&ho(t,n,o)}i=i.next}while(i!==r)}}function mo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function go(e){var t=e.ref;if(null!==t){var n=e.stateNode;if(5===e.tag)e=D(n);else e=n;"function"===typeof t?t(e):t.current=e}}function vo(e,t,n){if(Ht&&"function"===typeof Ht.onCommitFiberUnmount)try{Ht.onCommitFiberUnmount(Qt,t)}catch(a){}switch(t.tag){case 0:case 11:case 14:case 15:if(null!==(e=t.updateQueue)&&null!==(e=e.lastEffect)){var r=e=e.next;do{var i=r,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&ho(t,n,o),r=r.next}while(r!==e)}break;case 1:if(uo(t,n),"function"===typeof(e=t.stateNode).componentWillUnmount)try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(a){Va(t,n,a)}break;case 5:uo(t,n);break;case 4:X?So(e,t,n):Y&&Y&&(t=t.stateNode.containerInfo,n=Me(t),Be(t,n))}}function yo(e,t,n){for(var r=t;;)if(vo(e,r,n),null===r.child||X&&4===r.tag){if(r===t)break;for(;null===r.sibling;){if(null===r.return||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}else r.child.return=r,r=r.child}function Ao(e){var t=e.alternate;null!==t&&(e.alternate=null,Ao(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&ee(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function xo(e){return 5===e.tag||3===e.tag||4===e.tag}function bo(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||xo(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function _o(e){if(X){e:{for(var t=e.return;null!==t;){if(xo(t))break e;t=t.return}throw Error(a(160))}var n=t;switch(n.tag){case 5:t=n.stateNode,32&n.flags&&(xe(t),n.flags&=-33),Eo(e,n=bo(e),t);break;case 3:case 4:t=n.stateNode.containerInfo,wo(e,n=bo(e),t);break;default:throw Error(a(161))}}}function wo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ve(n,e,t):de(n,e);else if(4!==r&&null!==(e=e.child))for(wo(e,t,n),e=e.sibling;null!==e;)wo(e,t,n),e=e.sibling}function Eo(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?ge(n,e,t):he(n,e);else if(4!==r&&null!==(e=e.child))for(Eo(e,t,n),e=e.sibling;null!==e;)Eo(e,t,n),e=e.sibling}function So(e,t,n){for(var r,i,o=t,s=!1;;){if(!s){s=o.return;e:for(;;){if(null===s)throw Error(a(160));switch(r=s.stateNode,s.tag){case 5:i=!1;break e;case 3:case 4:r=r.containerInfo,i=!0;break e}s=s.return}s=!0}if(5===o.tag||6===o.tag)yo(e,o,n),i?Ae(r,o.stateNode):ye(r,o.stateNode);else if(18===o.tag)i?Je(r,o.stateNode):Ye(r,o.stateNode);else if(4===o.tag){if(null!==o.child){r=o.stateNode.containerInfo,i=!0,o.child.return=o,o=o.child;continue}}else if(vo(e,o,n),null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break;for(;null===o.sibling;){if(null===o.return||o.return===t)return;4===(o=o.return).tag&&(s=!1)}o.sibling.return=o.return,o=o.sibling}}function Co(e,t){if(X){switch(t.tag){case 0:case 11:case 14:case 15:return po(3,t,t.return),mo(3,t),void po(5,t,t.return);case 1:case 12:case 17:return;case 5:var n=t.stateNode;if(null!=n){var r=t.memoizedProps;e=null!==e?e.memoizedProps:r;var i=t.type,o=t.updateQueue;t.updateQueue=null,null!==o&&me(n,o,i,e,r,t)}return;case 6:if(null===t.stateNode)throw Error(a(162));return n=t.memoizedProps,void fe(t.stateNode,null!==e?e.memoizedProps:n,n);case 3:return void(J&&null!==e&&e.memoizedState.isDehydrated&&qe(t.stateNode.containerInfo));case 13:case 19:return void Mo(t)}throw Error(a(163))}switch(t.tag){case 0:case 11:case 14:case 15:return po(3,t,t.return),mo(3,t),void po(5,t,t.return);case 12:case 22:case 23:return;case 13:case 19:return void Mo(t);case 3:J&&null!==e&&e.memoizedState.isDehydrated&&qe(t.stateNode.containerInfo)}e:if(Y){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Be(t.containerInfo,t.pendingChildren);break e}throw Error(a(163))}}function Mo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new lo),t.forEach((function(t){var r=Ya.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function To(e,t,n){co=e,Io(e,t,n)}function Io(e,t,n){for(var r=0!==(1&e.mode);null!==co;){var i=co,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||ao;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||so;s=ao;var c=so;if(ao=a,(so=l)&&!c)for(co=i;null!==co;)l=(a=co).child,22===a.tag&&null!==a.memoizedState?Ro(i):null!==l?(l.return=a,co=l):Ro(i);for(;null!==o;)co=o,Io(o,t,n),o=o.sibling;co=i,ao=s,so=c}Bo(e)}else 0!==(8772&i.subtreeFlags)&&null!==o?(o.return=i,co=o):Bo(e)}}function Bo(e){for(;null!==co;){var t=co;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:so||mo(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!so)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:en(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&bn(t,o,r);break;case 3:var s=t.updateQueue;if(null!==s){if(n=null,null!==t.child)switch(t.child.tag){case 5:n=D(t.child.stateNode);break;case 1:n=t.child.stateNode}bn(t,s,n)}break;case 5:var l=t.stateNode;null===n&&4&t.flags&&pe(l,t.type,t.memoizedProps,t);break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(J&&null===t.memoizedState){var c=t.alternate;if(null!==c){var u=c.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Xe(h)}}}break;default:throw Error(a(163))}so||512&t.flags&&go(t)}catch(d){Va(t,t.return,d)}}if(t===e){co=null;break}if(null!==(n=t.sibling)){n.return=t.return,co=n;break}co=t.return}}function Po(e){for(;null!==co;){var t=co;if(t===e){co=null;break}var n=t.sibling;if(null!==n){n.return=t.return,co=n;break}co=t.return}}function Ro(e){for(;null!==co;){var t=co;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{mo(4,t)}catch(l){Va(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Va(t,i,l)}}var o=t.return;try{go(t)}catch(l){Va(t,o,l)}break;case 5:var a=t.return;try{go(t)}catch(l){Va(t,a,l)}}}catch(l){Va(t,t.return,l)}if(t===e){co=null;break}var s=t.sibling;if(null!==s){s.return=t.return,co=s;break}co=t.return}}var Do=0,Oo=1,ko=2,Lo=3,Fo=4;if("function"===typeof Symbol&&Symbol.for){var zo=Symbol.for;Do=zo("selector.component"),Oo=zo("selector.has_pseudo_class"),ko=zo("selector.role"),Lo=zo("selector.test_id"),Fo=zo("selector.text")}function Uo(e){var t=K(e);if(null!=t){if("string"!==typeof t.memoizedProps["data-testname"])throw Error(a(364));return t}if(null===(e=ie(e)))throw Error(a(362));return e.stateNode.current}function No(e,t){switch(t.$$typeof){case Do:if(e.type===t.value)return!0;break;case Oo:e:{t=t.value,e=[e,0];for(var n=0;n<e.length;){var r=e[n++],i=e[n++],o=t[i];if(5!==r.tag||!se(r)){for(;null!=o&&No(r,o);)o=t[++i];if(i===t.length){t=!0;break e}for(r=r.child;null!==r;)e.push(r,i),r=r.sibling}}t=!1}return t;case ko:if(5===e.tag&&le(e.stateNode,t.value))return!0;break;case Fo:if((5===e.tag||6===e.tag)&&(null!==(e=ae(e))&&0<=e.indexOf(t.value)))return!0;break;case Lo:if(5===e.tag&&("string"===typeof(e=e.memoizedProps["data-testname"])&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function jo(e){switch(e.$$typeof){case Do:return"<"+(w(e.value)||"Unknown")+">";case Oo:return":has("+(jo(e)||"")+")";case ko:return'[role="'+e.value+'"]';case Fo:return'"'+e.value+'"';case Lo:return'[data-testname="'+e.value+'"]';default:throw Error(a(365))}}function Go(e,t){var n=[];e=[e,0];for(var r=0;r<e.length;){var i=e[r++],o=e[r++],a=t[o];if(5!==i.tag||!se(i)){for(;null!=a&&No(i,a);)a=t[++o];if(o===t.length)n.push(i);else for(i=i.child;null!==i;)e.push(i,o),i=i.sibling}}return n}function Qo(e,t){if(!re)throw Error(a(363));e=Go(e=Uo(e),t),t=[],e=Array.from(e);for(var n=0;n<e.length;){var r=e[n++];if(5===r.tag)se(r)||t.push(r.stateNode);else for(r=r.child;null!==r;)e.push(r),r=r.sibling}return t}var Ho=Math.ceil,Vo=s.ReactCurrentDispatcher,Wo=s.ReactCurrentOwner,qo=s.ReactCurrentBatchConfig,Xo=0,Yo=null,Jo=null,Ko=0,Zo=0,$o=at(0),ea=0,ta=null,na=0,ra=0,ia=0,oa=null,aa=null,sa=0,la=1/0;function ca(){la=zt()+500}var ua,ha=!1,da=null,fa=null,pa=!1,ma=null,ga=0,va=0,ya=null,Aa=-1,xa=0;function ba(){return 0!==(6&Xo)?zt():-1!==Aa?Aa:Aa=zt()}function _a(e){return 0===(1&e.mode)?1:0!==(2&Xo)&&0!==Ko?Ko&-Ko:null!==Kt.transition?(0===xa&&(e=wt,0===(4194240&(wt<<=1))&&(wt=64),xa=e),xa):0!==(e=Rt)?e:$()}function wa(e,t,n){if(50<va)throw va=0,ya=null,Error(a(185));var r=Ea(e,t);return null===r?null:(Bt(r,t,n),0!==(2&Xo)&&r===Yo||(r===Yo&&(0===(2&Xo)&&(ra|=t),4===ea&&Ia(r,Ko)),Sa(r,n),1===t&&0===Xo&&0===(1&e.mode)&&(ca(),qt&&Jt())),r)}function Ea(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function Sa(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-xt(o),s=1<<a,l=i[a];-1===l?0!==(s&n)&&0===(s&r)||(i[a]=Mt(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=Ct(e,e===Yo?Ko:0);if(0===r)null!==n&&kt(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&kt(n),1===t)0===e.tag?function(e){qt=!0,Yt(e)}(Ba.bind(null,e)):Yt(Ba.bind(null,e)),te?ne((function(){0===Xo&&Jt()})):Ot(Ut,Jt),n=null;else{switch(Dt(r)){case 1:n=Ut;break;case 4:n=Nt;break;case 16:default:n=jt;break;case 536870912:n=Gt}n=Ja(n,Ca.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ca(e,t){if(Aa=-1,xa=0,0!==(6&Xo))throw Error(a(327));var n=e.callbackNode;if(Qa()&&e.callbackNode!==n)return null;var r=Ct(e,e===Yo?Ko:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=Fa(e,r);else{t=r;var i=Xo;Xo|=2;var o=ka();for(Yo===e&&Ko===t||(ca(),Da(e,t));;)try{Ua();break}catch(l){Oa(e,l)}an(),Vo.current=o,Xo=i,null!==Jo?t=0:(Yo=null,Ko=0,t=ea)}if(0!==t){if(2===t&&(0!==(i=Tt(e))&&(r=i,t=Ma(e,i))),1===t)throw n=ta,Da(e,0),Ia(e,r),Sa(e,zt()),n;if(6===t)Ia(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Vt(o(),i))return!1}catch(s){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=Fa(e,r))&&(0!==(o=Tt(e))&&(r=o,t=Ma(e,o))),1===t))throw n=ta,Da(e,0),Ia(e,r),Sa(e,zt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:Ga(e,aa);break;case 3:if(Ia(e,r),(130023424&r)===r&&10<(t=sa+500-zt())){if(0!==Ct(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ba(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=H(Ga.bind(null,e,aa),t);break}Ga(e,aa);break;case 4:if(Ia(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-xt(r);o=1<<s,(s=t[s])>i&&(i=s),r&=~o}if(r=i,10<(r=(120>(r=zt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ho(r/1960))-r)){e.timeoutHandle=H(Ga.bind(null,e,aa),r);break}Ga(e,aa);break;default:throw Error(a(329))}}}return Sa(e,zt()),e.callbackNode===n?Ca.bind(null,e):null}function Ma(e,t){var n=oa;return e.current.memoizedState.isDehydrated&&(Da(e,t).flags|=256),2!==(e=Fa(e,t))&&(t=aa,aa=n,null!==t&&Ta(t)),e}function Ta(e){null===aa?aa=e:aa.push.apply(aa,e)}function Ia(e,t){for(t&=~ia,t&=~ra,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-xt(t),r=1<<n;e[n]=-1,t&=~r}}function Ba(e){if(0!==(6&Xo))throw Error(a(327));Qa();var t=Ct(e,0);if(0===(1&t))return Sa(e,zt()),null;var n=Fa(e,t);if(0!==e.tag&&2===n){var r=Tt(e);0!==r&&(t=r,n=Ma(e,r))}if(1===n)throw n=ta,Da(e,0),Ia(e,t),Sa(e,zt()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ga(e,aa),Sa(e,zt()),null}function Pa(e){null!==ma&&0===ma.tag&&0===(6&Xo)&&Qa();var t=Xo;Xo|=1;var n=qo.transition,r=Rt;try{if(qo.transition=null,Rt=1,e)return e()}finally{Rt=r,qo.transition=n,0===(6&(Xo=t))&&Jt()}}function Ra(){Zo=$o.current,st($o)}function Da(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==W&&(e.timeoutHandle=W,V(n)),null!==Jo)for(n=Jo.return;null!==n;){var r=n;switch(jn(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&mt();break;case 3:fr(),st(ht),st(ut),Ar();break;case 5:mr(r);break;case 4:fr();break;case 13:case 19:st(gr);break;case 10:ln(r.type._context);break;case 22:case 23:Ra()}n=n.return}if(Yo=e,Jo=e=es(e.current,null),Ko=Zo=t,ea=0,ta=null,ia=ra=na=0,aa=oa=null,null!==dn){for(t=0;t<dn.length;t++)if(null!==(r=(n=dn[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}dn=null}return e}function Oa(e,t){for(;;){var n=Jo;try{if(an(),xr.current=fi,Cr){for(var r=wr.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}Cr=!1}if(_r=0,Sr=Er=wr=null,Mr=!1,Tr=0,Wo.current=null,null===n||null===n.return){ea=1,ta=t,Jo=null;break}e:{var o=e,s=n.return,l=n,c=t;if(t=Ko,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=Mi(s);if(null!==p){p.flags&=-257,Ti(p,s,l,0,t),1&p.mode&&Ci(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){Ci(o,u,t),La();break e}c=Error(a(426))}else if(Hn&&1&l.mode){var v=Mi(s);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),Ti(v,s,l,0,t),er(c);break e}}o=c,4!==ea&&(ea=2),null===oa?oa=[o]:oa.push(o),c=vi(c,l),l=s;do{switch(l.tag){case 3:l.flags|=65536,t&=-t,l.lanes|=t,An(l,Ei(0,c,t));break e;case 1:o=c;var y=l.type,A=l.stateNode;if(0===(128&l.flags)&&("function"===typeof y.getDerivedStateFromError||null!==A&&"function"===typeof A.componentDidCatch&&(null===fa||!fa.has(A)))){l.flags|=65536,t&=-t,l.lanes|=t,An(l,Si(l,o,t));break e}}l=l.return}while(null!==l)}ja(n)}catch(x){t=x,Jo===n&&null!==n&&(Jo=n=n.return);continue}break}}function ka(){var e=Vo.current;return Vo.current=fi,null===e?fi:e}function La(){0!==ea&&3!==ea&&2!==ea||(ea=4),null===Yo||0===(268435455&na)&&0===(268435455&ra)||Ia(Yo,Ko)}function Fa(e,t){var n=Xo;Xo|=2;var r=ka();for(Yo===e&&Ko===t||Da(e,t);;)try{za();break}catch(i){Oa(e,i)}if(an(),Xo=n,Vo.current=r,null!==Jo)throw Error(a(261));return Yo=null,Ko=0,ea}function za(){for(;null!==Jo;)Na(Jo)}function Ua(){for(;null!==Jo&&!Lt();)Na(Jo)}function Na(e){var t=ua(e.alternate,e,Zo);e.memoizedProps=e.pendingProps,null===t?ja(e):Jo=t,Wo.current=null}function ja(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Oi(n,t,Zo)))return void(Jo=n)}else{if(null!==(n=oo(n,t)))return n.flags&=32767,void(Jo=n);if(null===e)return ea=6,void(Jo=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Jo=t);Jo=t=e}while(null!==t);0===ea&&(ea=5)}function Ga(e,t){var n=Rt,r=qo.transition;try{qo.transition=null,Rt=1,function(e,t,n){do{Qa()}while(null!==ma);if(0!==(6&Xo))throw Error(a(327));var r=e.finishedWork,i=e.finishedLanes;if(null===r)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-xt(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Yo&&(Jo=Yo=null,Ko=0),0===(2064&r.subtreeFlags)&&0===(2064&r.flags)||pa||(pa=!0,Ja(jt,(function(){return Qa(),null}))),o=0!==(15990&r.flags),0!==(15990&r.subtreeFlags)||o){o=qo.transition,qo.transition=null;var s=Rt;Rt=1;var l=Xo;Xo|=4,Wo.current=null,function(e,t){for(L(e.containerInfo),co=t;null!==co;)if(t=(e=co).child,0!==(1028&e.subtreeFlags)&&null!==t)t.return=e,co=t;else for(;null!==co;){e=co;try{var n=e.alternate;if(0!==(1024&e.flags))switch(e.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==n){var r=n.memoizedProps,i=n.memoizedState,o=e.stateNode,s=o.getSnapshotBeforeUpdate(e.elementType===e.type?r:en(e.type,r),i);o.__reactInternalSnapshotBeforeUpdate=s}break;case 3:X&&Se(e.stateNode.containerInfo);break;default:throw Error(a(163))}}catch(l){Va(e,e.return,l)}if(null!==(t=e.sibling)){t.return=e.return,co=t;break}co=e.return}n=fo,fo=!1}(e,r),function(e,t){for(co=t;null!==co;){var n=(t=co).deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e;X?So(o,i,t):yo(o,i,t);var a=i.alternate;null!==a&&(a.return=null),i.return=null}catch(b){Va(i,t,b)}}if(n=t.child,0!==(12854&t.subtreeFlags)&&null!==n)n.return=t,co=n;else for(;null!==co;){t=co;try{var s=t.flags;if(32&s&&X&&xe(t.stateNode),512&s){var l=t.alternate;if(null!==l){var c=l.ref;null!==c&&("function"===typeof c?c(null):c.current=null)}}if(8192&s)switch(t.tag){case 13:if(null!==t.memoizedState){var u=t.alternate;null!==u&&null!==u.memoizedState||(sa=zt())}break;case 22:var h=null!==t.memoizedState,d=t.alternate,f=null!==d&&null!==d.memoizedState;if(n=t,X)e:if(r=n,i=h,o=null,X)for(var p=r;;){if(5===p.tag){if(null===o){o=p;var m=p.stateNode;i?be(m):we(p.stateNode,p.memoizedProps)}}else if(6===p.tag){if(null===o){var g=p.stateNode;i?_e(g):Ee(g,p.memoizedProps)}}else if((22!==p.tag&&23!==p.tag||null===p.memoizedState||p===r)&&null!==p.child){p.child.return=p,p=p.child;continue}if(p===r)break;for(;null===p.sibling;){if(null===p.return||p.return===r)break e;o===p&&(o=null),p=p.return}o===p&&(o=null),p.sibling.return=p.return,p=p.sibling}if(h&&!f&&0!==(1&n.mode)){co=n;for(var v=n.child;null!==v;){for(n=co=v;null!==co;){var y=(r=co).child;switch(r.tag){case 0:case 11:case 14:case 15:po(4,r,r.return);break;case 1:uo(r,r.return);var A=r.stateNode;if("function"===typeof A.componentWillUnmount){var x=r.return;try{A.props=r.memoizedProps,A.state=r.memoizedState,A.componentWillUnmount()}catch(b){Va(r,x,b)}}break;case 5:uo(r,r.return);break;case 22:if(null!==r.memoizedState){Po(n);continue}}null!==y?(y.return=r,co=y):Po(n)}v=v.sibling}}}switch(4102&s){case 2:_o(t),t.flags&=-3;break;case 6:_o(t),t.flags&=-3,Co(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Co(t.alternate,t);break;case 4:Co(t.alternate,t)}}catch(b){Va(t,t.return,b)}if(null!==(n=t.sibling)){n.return=t.return,co=n;break}co=t.return}}}(e,r),F(e.containerInfo),e.current=r,To(r,e,i),Ft(),Xo=l,Rt=s,qo.transition=o}else e.current=r;if(pa&&(pa=!1,ma=e,ga=i),o=e.pendingLanes,0===o&&(fa=null),function(e){if(Ht&&"function"===typeof Ht.onCommitFiberRoot)try{Ht.onCommitFiberRoot(Qt,e,void 0,128===(128&e.current.flags))}catch(t){}}(r.stateNode),Sa(e,zt()),null!==t)for(n=e.onRecoverableError,r=0;r<t.length;r++)n(t[r]);if(ha)throw ha=!1,e=da,da=null,e;0!==(1&ga)&&0!==e.tag&&Qa(),o=e.pendingLanes,0!==(1&o)?e===ya?va++:(va=0,ya=e):va=0,Jt()}(e,t,n)}finally{qo.transition=r,Rt=n}return null}function Qa(){if(null!==ma){var e=Dt(ga),t=qo.transition,n=Rt;try{if(qo.transition=null,Rt=16>e?16:e,null===ma)var r=!1;else{if(e=ma,ma=null,ga=0,0!==(6&Xo))throw Error(a(331));var i=Xo;for(Xo|=4,co=e.current;null!==co;){var o=co,s=o.child;if(0!==(16&co.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(co=u;null!==co;){var h=co;switch(h.tag){case 0:case 11:case 15:po(8,h,o)}var d=h.child;if(null!==d)d.return=h,co=d;else for(;null!==co;){var f=(h=co).sibling,p=h.return;if(Ao(h),h===u){co=null;break}if(null!==f){f.return=p,co=f;break}co=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}co=o}}if(0!==(2064&o.subtreeFlags)&&null!==s)s.return=o,co=s;else e:for(;null!==co;){if(0!==(2048&(o=co).flags))switch(o.tag){case 0:case 11:case 15:po(9,o,o.return)}var y=o.sibling;if(null!==y){y.return=o.return,co=y;break e}co=o.return}}var A=e.current;for(co=A;null!==co;){var x=(s=co).child;if(0!==(2064&s.subtreeFlags)&&null!==x)x.return=s,co=x;else e:for(s=A;null!==co;){if(0!==(2048&(l=co).flags))try{switch(l.tag){case 0:case 11:case 15:mo(9,l)}}catch(_){Va(l,l.return,_)}if(l===s){co=null;break e}var b=l.sibling;if(null!==b){b.return=l.return,co=b;break e}co=l.return}}if(Xo=i,Jt(),Ht&&"function"===typeof Ht.onPostCommitFiberRoot)try{Ht.onPostCommitFiberRoot(Qt,e)}catch(_){}r=!0}return r}finally{Rt=n,qo.transition=t}}return!1}function Ha(e,t,n){vn(e,t=Ei(0,t=vi(n,t),1)),t=ba(),null!==(e=Ea(e,1))&&(Bt(e,1,t),Sa(e,t))}function Va(e,t,n){if(3===e.tag)Ha(e,e,n);else for(;null!==t;){if(3===t.tag){Ha(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===fa||!fa.has(r))){vn(t,e=Si(t,e=vi(n,e),1)),e=ba(),null!==(t=Ea(t,1))&&(Bt(t,1,e),Sa(t,e));break}}t=t.return}}function Wa(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ba(),e.pingedLanes|=e.suspendedLanes&n,Yo===e&&(Ko&n)===n&&(4===ea||3===ea&&(130023424&Ko)===Ko&&500>zt()-sa?Da(e,0):ia|=n),Sa(e,t)}function qa(e,t){0===t&&(0===(1&e.mode)?t=1:(t=Et,0===(130023424&(Et<<=1))&&(Et=4194304)));var n=ba();null!==(e=Ea(e,t))&&(Bt(e,t,n),Sa(e,n))}function Xa(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),qa(e,n)}function Ya(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),qa(e,n)}function Ja(e,t){return Ot(e,t)}function Ka(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Za(e,t,n,r){return new Ka(e,t,n,r)}function $a(e){return!(!(e=e.prototype)||!e.isReactComponent)}function es(e,t){var n=e.alternate;return null===n?((n=Za(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ts(e,t,n,r,i,o){var s=2;if(r=e,"function"===typeof e)$a(e)&&(s=1);else if("string"===typeof e)s=5;else e:switch(e){case u:return ns(n.children,i,o,t);case h:s=8,i|=8;break;case d:return(e=Za(12,n,t,2|i)).elementType=d,e.lanes=o,e;case g:return(e=Za(13,n,t,i)).elementType=g,e.lanes=o,e;case v:return(e=Za(19,n,t,i)).elementType=v,e.lanes=o,e;case x:return rs(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case f:s=10;break e;case p:s=9;break e;case m:s=11;break e;case y:s=14;break e;case A:s=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Za(s,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function ns(e,t,n,r){return(e=Za(7,e,r,t)).lanes=n,e}function rs(e,t,n,r){return(e=Za(22,e,r,t)).elementType=x,e.lanes=n,e.stateNode={},e}function is(e,t,n){return(e=Za(6,e,null,t)).lanes=n,e}function os(e,t,n){return(t=Za(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function as(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=W,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=It(0),this.expirationTimes=It(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=It(0),this.identifierPrefix=r,this.onRecoverableError=i,J&&(this.mutableSourceEagerHydrationData=null)}function ss(e,t,n,r,i,o,a,s,l){return e=new as(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Za(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null},pn(o),e}function ls(e){if(!e)return ct;e:{if(S(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(pt(n))return vt(e,n,t)}return t}function cs(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return null===(e=T(t))?null:e.stateNode}function us(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function hs(e,t){us(e,t),(e=e.alternate)&&us(e,t)}function ds(e){return null===(e=T(e))?null:e.stateNode}function fs(){return null}return ua=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||ht.current)Li=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return Li=!1,function(e,t,n){switch(t.tag){case 3:Wi(t),$n();break;case 5:pr(t);break;case 1:pt(t.type)&&yt(t);break;case 4:dr(t,t.stateNode.containerInfo);break;case 10:sn(0,t.type._context,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(lt(gr,1&gr.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ji(e,t,n):(lt(gr,1&gr.current),null!==(e=io(e,t,n))?e.sibling:null);lt(gr,1&gr.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return ro(e,t,n);t.flags|=128}var i=t.memoizedState;if(null!==i&&(i.rendering=null,i.tail=null,i.lastEffect=null),lt(gr,gr.current),r)break;return null;case 22:case 23:return t.lanes=0,ji(e,t,n)}return io(e,t,n)}(e,t,n);Li=0!==(131072&e.flags)}else Li=!1,Hn&&0!==(1048576&t.flags)&&Un(t,Rn,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var i=ft(t,ut.current);un(t,n),i=Rr(null,t,r,e,i,n);var o=Dr();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(r)?(o=!0,yt(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,pn(t),i.updater=En,t.stateNode=i,i._reactInternals=t,Tn(t,r,e,n),t=Vi(null,t,r,!0,o,n)):(t.tag=0,Hn&&o&&Nn(t),Fi(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return $a(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===m)return 11;if(e===y)return 14}return 2}(r),e=en(r,e),i){case 0:t=Qi(null,t,r,e,n);break e;case 1:t=Hi(null,t,r,e,n);break e;case 11:t=zi(null,t,r,e,n);break e;case 14:t=Ui(null,t,r,en(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Qi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 1:return r=t.type,i=t.pendingProps,Hi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 3:e:{if(Wi(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,mn(e,t),xn(t,r,null,n);var s=t.memoizedState;if(r=s.element,J&&o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:s.cache,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=qi(e,t,r,n,i=Error(a(423)));break e}if(r!==i){t=qi(e,t,r,n,i=Error(a(424)));break e}for(J&&(Qn=je(t.stateNode.containerInfo),Gn=t,Hn=!0,Wn=null,Vn=!1),n=ar(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if($n(),r===i){t=io(e,t,n);break e}Fi(e,t,r,n)}t=t.child}return t;case 5:return pr(t),null===e&&Jn(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,G(r,i)?s=null:null!==o&&G(r,o)&&(t.flags|=32),Gi(e,t),Fi(e,t,s,n),t.child;case 6:return null===e&&Jn(t),null;case 13:return Ji(e,t,n);case 4:return dr(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=or(t,null,r,n):Fi(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,zi(e,t,r,i=t.elementType===r?i:en(r,i),n);case 7:return Fi(e,t,t.pendingProps,n),t.child;case 8:case 12:return Fi(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,sn(0,r,s=i.value),null!==o)if(Vt(o.value,s)){if(o.children===i.children&&!ht.current){t=io(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){s=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=gn(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),cn(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)s=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(s=o.return))throw Error(a(341));s.lanes|=n,null!==(l=s.alternate)&&(l.lanes|=n),cn(s,n,t),s=o.sibling}else s=o.child;if(null!==s)s.return=o;else for(s=o;null!==s;){if(s===t){s=null;break}if(null!==(o=s.sibling)){o.return=s.return,s=o;break}s=s.return}o=s}Fi(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,un(t,n),r=r(i=hn(i)),t.flags|=1,Fi(e,t,r,n),t.child;case 14:return i=en(r=t.type,t.pendingProps),Ui(e,t,r,i=en(r.type,i),n);case 15:return Ni(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:en(r,i),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,pt(r)?(e=!0,yt(t)):e=!1,un(t,n),Cn(t,r,i),Tn(t,r,i,n),Vi(null,t,r,!0,e,n);case 19:return ro(e,t,n);case 22:return ji(e,t,n)}throw Error(a(156,t.tag))},t.attemptContinuousHydration=function(e){13===e.tag&&(wa(e,134217728,ba()),hs(e,134217728))},t.attemptHydrationAtCurrentPriority=function(e){if(13===e.tag){var t=ba(),n=_a(e);wa(e,n,t),hs(e,n)}},t.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=St(t.pendingLanes);0!==n&&(Pt(t,1|n),Sa(t,zt()),0===(6&Xo)&&(ca(),Jt()))}break;case 13:var r=ba();Pa((function(){return wa(e,1,r)})),hs(e,1)}},t.batchedUpdates=function(e,t){var n=Xo;Xo|=1;try{return e(t)}finally{0===(Xo=n)&&(ca(),qt&&Jt())}},t.createComponentSelector=function(e){return{$$typeof:Do,value:e}},t.createContainer=function(e,t,n,r,i,o,a){return ss(e,t,!1,null,0,r,0,o,a)},t.createHasPseudoClassSelector=function(e){return{$$typeof:Oo,value:e}},t.createHydrationContainer=function(e,t,n,r,i,o,a,s,l){return(e=ss(n,r,!0,e,0,o,0,s,l)).context=ls(null),n=e.current,(o=gn(r=ba(),i=_a(n))).callback=void 0!==t&&null!==t?t:null,vn(n,o),e.current.lanes=i,Bt(e,i,r),Sa(e,r),e},t.createPortal=function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:c,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}},t.createRoleSelector=function(e){return{$$typeof:ko,value:e}},t.createTestNameSelector=function(e){return{$$typeof:Lo,value:e}},t.createTextSelector=function(e){return{$$typeof:Fo,value:e}},t.deferredUpdates=function(e){var t=Rt,n=qo.transition;try{return qo.transition=null,Rt=16,e()}finally{Rt=t,qo.transition=n}},t.discreteUpdates=function(e,t,n,r,i){var o=Rt,a=qo.transition;try{return qo.transition=null,Rt=1,e(t,n,r,i)}finally{Rt=o,qo.transition=a,0===Xo&&ca()}},t.findAllNodes=Qo,t.findBoundingRects=function(e,t){if(!re)throw Error(a(363));t=Qo(e,t),e=[];for(var n=0;n<t.length;n++)e.push(oe(t[n]));for(t=e.length-1;0<t;t--)for(var r=(n=e[t]).x,i=r+n.width,o=n.y,s=o+n.height,l=t-1;0<=l;l--)if(t!==l){var c=e[l],u=c.x,h=u+c.width,d=c.y,f=d+c.height;if(r>=u&&o>=d&&i<=h&&s<=f){e.splice(t,1);break}if(!(r!==u||n.width!==c.width||f<o||d>s)){d>o&&(c.height+=d-o,c.y=o),f<s&&(c.height=s-d),e.splice(t,1);break}if(!(o!==d||n.height!==c.height||h<r||u>i)){u>r&&(c.width+=u-r,c.x=r),h<i&&(c.width=i-u),e.splice(t,1);break}}return e},t.findHostInstance=cs,t.findHostInstanceWithNoPortals=function(e){return null===(e=null!==(e=M(e))?B(e):null)?null:e.stateNode},t.findHostInstanceWithWarning=function(e){return cs(e)},t.flushControlled=function(e){var t=Xo;Xo|=1;var n=qo.transition,r=Rt;try{qo.transition=null,Rt=1,e()}finally{Rt=r,qo.transition=n,0===(Xo=t)&&(ca(),Jt())}},t.flushPassiveEffects=Qa,t.flushSync=Pa,t.focusWithin=function(e,t){if(!re)throw Error(a(363));for(t=Go(e=Uo(e),t),t=Array.from(t),e=0;e<t.length;){var n=t[e++];if(!se(n)){if(5===n.tag&&ce(n.stateNode))return!0;for(n=n.child;null!==n;)t.push(n),n=n.sibling}}return!1},t.getCurrentUpdatePriority=function(){return Rt},t.getFindAllNodesFailureDescription=function(e,t){if(!re)throw Error(a(363));var n=0,r=[];e=[Uo(e),0];for(var i=0;i<e.length;){var o=e[i++],s=e[i++],l=t[s];if((5!==o.tag||!se(o))&&(No(o,l)&&(r.push(jo(l)),++s>n&&(n=s)),s<t.length))for(o=o.child;null!==o;)e.push(o,s),o=o.sibling}if(n<t.length){for(e=[];n<t.length;n++)e.push(jo(t[n]));return"findAllNodes was able to match part of the selector:\n  "+r.join(" > ")+"\n\nNo matching component was found for:\n  "+e.join(" > ")}return null},t.getPublicRootInstance=function(e){return(e=e.current).child?5===e.child.tag?D(e.child.stateNode):e.child.stateNode:null},t.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:s.ReactCurrentDispatcher,findHostInstanceByFiber:ds,findFiberByHostInstance:e.findFiberByHostInstance||fs,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},"undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{Qt=t.inject(e),Ht=t}catch(n){}e=!!t.checkDCE}}return e},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(e,t,n,r){if(!re)throw Error(a(363));e=Qo(e,t);var i=ue(e,n,r).disconnect;return{disconnect:function(){i()}}},t.registerMutableSourceForHydration=function(e,t){var n=t._getVersion;n=n(t._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[t,n]:e.mutableSourceEagerHydrationData.push(t,n)},t.runWithPriority=function(e,t){var n=Rt;try{return Rt=e,t()}finally{Rt=n}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(e,t,n,r){var i=t.current,o=ba(),a=_a(i);return n=ls(n),null===t.context?t.context=n:t.pendingContext=n,(t=gn(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),vn(i,t),null!==(e=wa(i,a,o))&&yn(e,i,a),a},t}},7205:(e,t,n)=>{"use strict";e.exports=n(7302)},2016:(e,t,n)=>{"use strict";e.exports=n(6958)},2062:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,A="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,D(_);else{var t=r(u);null!==t&&O(b,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var o=f;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,E=!1,S=null,C=-1,M=5,T=-1;function I(){return!(t.unstable_now()-T<M)}function B(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?w():(E=!1,S=null)}}else E=!1}if("function"===typeof A)w=function(){A(B)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=B,w=function(){R.postMessage(null)}}else w=function(){v(B,0)};function D(e){S=e,E||(E=!0,w())}function O(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,O(b,o-a))):(e.sortIndex=s,n(c,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8513:(e,t,n)=>{"use strict";e.exports=n(2062)},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,o={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(o[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===o[r]&&(o[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:o,_owner:s.current}}t.Fragment=o,t.jsx=c,t.jsxs=c},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function A(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var x=A.prototype=new y;x.constructor=A,m(x,v.prototype),x.isPureReactComponent=!0;var b=Array.isArray,_=Object.prototype.hasOwnProperty,w={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,o={},a=null,s=null;if(null!=t)for(i in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(o[i]=t[i]);var l=arguments.length-2;if(1===l)o.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];o.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===o[i]&&(o[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:s,props:o,_owner:w.current}}function C(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var M=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function I(e,t,i,o,a){var s=typeof e;"undefined"!==s&&"boolean"!==s||(e=null);var l=!1;if(null===e)l=!0;else switch(s){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===o?"."+T(l,0):o,b(a)?(i="",null!=e&&(i=e.replace(M,"$&/")+"/"),I(a,t,i,"",(function(e){return e}))):null!=a&&(C(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(M,"$&/")+"/")+e)),t.push(a)),1;if(l=0,o=""===o?".":o+":",b(e))for(var c=0;c<e.length;c++){var u=o+T(s=e[c],c);l+=I(s,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(s=e.next()).done;)l+=I(s=s.value,t,i,u=o+T(s,c++),a);else if("object"===s)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function B(e,t,n){if(null==e)return e;var r=[],i=0;return I(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},D={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:D,ReactCurrentOwner:w};function k(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:B,forEach:function(e,t,n){B(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return B(e,(function(){t++})),t},toArray:function(e){return B(e,(function(e){return e}))||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=A,t.StrictMode=o,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=k,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=m({},e.props),o=e.key,a=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,s=w.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:o,ref:a,props:i,_owner:s}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:s,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=C,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=k,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},579:(e,t,n)=>{"use strict";e.exports=n(1153)},6378:(e,t)=>{"use strict";var n="function"===typeof Symbol&&Symbol.for,r=n?Symbol.for("react.element"):60103,i=n?Symbol.for("react.portal"):60106,o=n?Symbol.for("react.fragment"):60107,a=n?Symbol.for("react.strict_mode"):60108,s=n?Symbol.for("react.profiler"):60114,l=n?Symbol.for("react.provider"):60109,c=n?Symbol.for("react.context"):60110,u=n?Symbol.for("react.async_mode"):60111,h=n?Symbol.for("react.concurrent_mode"):60111,d=n?Symbol.for("react.forward_ref"):60112,f=n?Symbol.for("react.suspense"):60113,p=n?Symbol.for("react.suspense_list"):60120,m=n?Symbol.for("react.memo"):60115,g=n?Symbol.for("react.lazy"):60116,v=n?Symbol.for("react.block"):60121,y=n?Symbol.for("react.fundamental"):60117,A=n?Symbol.for("react.responder"):60118,x=n?Symbol.for("react.scope"):60119;function b(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case r:switch(e=e.type){case u:case h:case o:case s:case a:case f:return e;default:switch(e=e&&e.$$typeof){case c:case d:case g:case m:case l:return e;default:return t}}case i:return t}}}function _(e){return b(e)===h}t.isElement=function(e){return"object"===typeof e&&null!==e&&e.$$typeof===r},t.isFragment=function(e){return b(e)===o}},9062:(e,t,n)=>{"use strict";e.exports=n(6378)},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<o(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var s=2*(r+1)-1,l=e[s],c=s+1,u=e[c];if(0>o(l,n))c<i&&0>o(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[s]=n,r=s);else{if(!(c<i&&0>o(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function o(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,m=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,A="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function b(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,D(_);else{var t=r(u);null!==t&&O(b,t.startTime-e)}}function _(e,n){m=!1,g&&(g=!1,y(C),C=-1),p=!0;var o=f;try{for(x(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!I());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var s=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof s?d.callback=s:d===r(c)&&i(c),x(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&O(b,h.startTime-n),l=!1}return l}finally{d=null,f=o,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var w,E=!1,S=null,C=-1,M=5,T=-1;function I(){return!(t.unstable_now()-T<M)}function B(){if(null!==S){var e=t.unstable_now();T=e;var n=!0;try{n=S(!0,e)}finally{n?w():(E=!1,S=null)}}else E=!1}if("function"===typeof A)w=function(){A(B)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,R=P.port2;P.port1.onmessage=B,w=function(){R.postMessage(null)}}else w=function(){v(B,0)};function D(e){S=e,E||(E=!0,w())}function O(e,n){C=v((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,D(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,o){var a=t.unstable_now();switch("object"===typeof o&&null!==o?o="number"===typeof(o=o.delay)&&0<o?a+o:a:o=a,e){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(e.sortIndex=o,n(u,e),null===r(c)&&e===r(u)&&(g?(y(C),C=-1):g=!0,O(b,o-a))):(e.sortIndex=s,n(c,e),m||p||(m=!0,D(_))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},722:function(e){e.exports=function(){var e=function(){function t(e){return i.appendChild(e.dom),e}function n(e){for(var t=0;t<i.children.length;t++)i.children[t].style.display=t===e?"block":"none";r=e}var r=0,i=document.createElement("div");i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(e){e.preventDefault(),n(++r%i.children.length)}),!1);var o=(performance||Date).now(),a=o,s=0,l=t(new e.Panel("FPS","#0ff","#002")),c=t(new e.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=t(new e.Panel("MB","#f08","#201"));return n(0),{REVISION:16,dom:i,addPanel:t,showPanel:n,begin:function(){o=(performance||Date).now()},end:function(){s++;var e=(performance||Date).now();if(c.update(e-o,200),e>a+1e3&&(l.update(1e3*s/(e-a),100),a=e,s=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){o=this.end()},domElement:i,setMode:n}};return e.Panel=function(e,t,n){var r=1/0,i=0,o=Math.round,a=o(window.devicePixelRatio||1),s=80*a,l=48*a,c=3*a,u=2*a,h=3*a,d=15*a,f=74*a,p=30*a,m=document.createElement("canvas");m.width=s,m.height=l,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*a+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,s,l),g.fillStyle=t,g.fillText(e,c,u),g.fillRect(h,d,f,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h,d,f,p),{dom:m,update:function(l,v){r=Math.min(r,l),i=Math.max(i,l),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,s,d),g.fillStyle=t,g.fillText(o(l)+" "+e+" ("+o(r)+"-"+o(i)+")",c,u),g.drawImage(m,h+a,d,f-a,p,h,d,f-a,p),g.fillRect(h+f-a,d,a,p),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h+f-a,d,a,o((1-l/v)*p))}}},e}()},5956:(e,t,n)=>{"use strict";var r=n(5043);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},o=r.useState,a=r.useEffect,s=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var u="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),i=r[0].inst,u=r[1];return s((function(){i.value=n,i.getSnapshot=t,c(i)&&u({inst:i})}),[e,n,t]),a((function(){return c(i)&&u({inst:i}),e((function(){c(i)&&u({inst:i})}))}),[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:u},5039:(e,t,n)=>{"use strict";var r=n(5043),i=n(9461);var o="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=i.useSyncExternalStore,s=r.useRef,l=r.useEffect,c=r.useMemo,u=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var h=s(null);if(null===h.current){var d={hasValue:!1,value:null};h.current=d}else d=h.current;h=c((function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&d.hasValue){var t=d.value;if(i(t,e))return s=t}return s=e}if(t=s,o(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?t:(a=e,s=n)}var a,s,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]}),[t,n,r,i]);var f=a(e,h[0],h[1]);return l((function(){d.hasValue=!0,d.value=f}),[f]),u(f),f}},9461:(e,t,n)=>{"use strict";e.exports=n(5956)},8443:(e,t,n)=>{"use strict";e.exports=n(5039)},4448:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/check_scam_risk.2cbfa2dac3c6252ed5c8.png"},1101:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/email_scams_icon.5fc406e224e6f119a7b1.png"},4793:e=>{"use strict";e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEOUlEQVR4nO2bWahNURiAPxfXNXfLMT7IlGS8KUPmIVwpQ5EXhWRKinjUvS+GIgmZw4vMFAoptyTz9CBjxoiUS+bpOlr1n9qt1p6OPR32V+vh7LX3///r32vttda//gMpKSkpKaHQHBgJzAVWA0eBq8Bd4ClQDfyQUi3XVN0V4Ig8M0dkZCgAMsAMYBdwH8gGXO4BO4HpSXJIU2A+cBb4FUKj7cov0TlPbIiczsA24FOEjbYrH4GtQKcoGt4S2O3xbX8Frkm3XQJMBQYAHYFmQClQS0qpXFN1A+XeJfLsdeCbB30/ZfgpG0NhBvDexYibQAUwCCgOUHc9YLDIvuViwzuxNXCyNuUZsALoSnR0A1aKbju7AierlUfAbKAO8VEETJbpM3IH1CY51I7DAUkjdQBpDyAdAsT4DcjI/HsIeCKLlw/yhd4ODPehawSwQ9b/H0SWknlQdGSSNAT6AftlJea2WjsFtHDQoVZxpz2u+vaJ7tgdUOVz7X5Xlr46TYDbPmVVJcEBQ6WrrgEmAB2ABkBDeUNbDL3jmEH+CcNb3gz0FVkNRfYE0XVfdMfuAC8MAz7Lc29k9aYzWeqyssscgj8S7QDFFOCASzAjI/eYHFTwDgib1AGkPYDYh0B9ieScB17Ll/y1/FbXSzzoyVdGInrAZZd5+6IHPfnKSIQDLroYf8GDnnxlJMIBJcBi4BzwSg49XsnvxR6HQL4yEuGAOEkdQNoDSIcAMX0DJgF1iTYKXO7DvkD4oSlQ29Qc3SXYYdrnB02p6FI6c/TTbFO2Bs5RTckerV6FvR4CXQgPdXZ4Rw5mrezVbDschvJyTcl3oLWlvpWc1FZLUoMdlQ6LHFVnx0iR/VF05Whj6J2jCekY6ommaIN2T4Vc/yl5A34a7+SE+ZaoktJhZZPhyE7ZGgrzDGNNhamsG5nnHhqZb3kpobEc7aQnWu9R55WhUWw4kVXfBiszfTSo0mOvyBUl28oxrf5pwMfyRmYZDFOByhxFhgCnW1f34oTjWtee5MFBoVAEXNIUP9emwGJp1GOgxuM4NzmhRsZ0hfZmla4Xhl1iaGNfp4ch1H1c0l3CppZhSlYpO2VEzDrDG1sUgd6lBr1riYES4IZhVghlDhbGGnredY9xhlBoC7zVDPosSVJ2VHk86tLpb0jLUwlR7YmZicBvzTC1Yutpc/9QBwdYj7qslBky1JTO8SSESkNj1NsZZXO/nQNMjLFJz1tGwthkMFKN1wV/4YCFNkmZ60kgRTZOyEqyQyMfDmgsWaKmezZENN3mhTJslY3hj6U7uzmg3LDpypXlFAjTHfJ7Tzo44KRD3vE0Cow+Af1vQGWU9KZAaQBstNkPuJUa+dipLXbBU+Yzl0j9GaIX/yCjgTMODT/jsHb4p+gLfLE0/IsWZf4vqLQ4QI/z/RfUAx5IwCO23VzcjJOSkkI8/AEYJoDG3CvJ/AAAAABJRU5ErkJggg=="},2585:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/investment_scam.94f4a69570568cd718c7.png"},1807:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/job_scam.2510d38009cf9cbe2a6e.jpg"},5969:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/phone_scams_icon.53e38c0397cf4baad0b5.png"},5190:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/product.d8f90e906899cd639f9d.png"},5263:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/report_help.c9b374db94ba4676fbe7.png"},968:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/romance_scams_icon.f26dfc16df14edc0622a.png"},8869:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/scam_alert_no_background.8f841e5999b2006e8ab8.png"},6525:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/scam_detect.a359a01c43cc9fa3197e.png"},5101:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/social_media_scams_icon.f14b86427655e8ee3586.png"},8862:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/text_scams_icon.7e2962e427a03b51c375.png"},8562:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/verifying.ec375ca01e0abd0b5e02.png"},4779:(e,t,n)=>{"use strict";e.exports=n.p+"static/media/website_scams_icon.5e56907fa0f63656c078.png"}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var o=t[r]={id:r,loaded:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var o=Object.create(null);n.r(o);var a={};e=e||[null,t({}),t([]),t(t)];for(var s=2&i&&r;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach((e=>a[e]=()=>r[e]));return a.default=()=>r,n.d(o,a),o}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,r)=>(n.f[r](e,t),t)),[])),n.u=e=>"static/js/"+e+"."+{210:"81e3a53b",453:"2fa3f6c9",540:"331e9481"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="scamguard_react:";n.l=(r,i,o,a)=>{if(e[r])e[r].push(i);else{var s,l;if(void 0!==o)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+o){s=h;break}}s||(l=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,n.nc&&s.setAttribute("nonce",n.nc),s.setAttribute("data-webpack",t+o),s.src=r),e[r]=[i];var d=(t,n)=>{s.onerror=s.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],s.parentNode&&s.parentNode.removeChild(s),i&&i.forEach((e=>e(n))),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=d.bind(null,s.onerror),s.onload=d.bind(null,s.onload),l&&document.head.appendChild(s)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),n.p="/iteration2/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var o=new Promise(((n,r)=>i=e[t]=[n,r]));r.push(i[2]=o);var a=n.p+n.u(t),s=new Error;n.l(a,(r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var o=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+a+")",s.name="ChunkLoadError",s.type=o,s.request=a,i[1](s)}}),"chunk-"+t,t)}};var t=(t,r)=>{var i,o,a=r[0],s=r[1],l=r[2],c=0;if(a.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)o=a[c],n.o(e,o)&&e[o]&&e[o][0](),e[o]=0},r=self.webpackChunkscamguard_react=self.webpackChunkscamguard_react||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e={};n.r(e),n.d(e,{ACESFilmicToneMapping:()=>Ut,AddEquation:()=>it,AddOperation:()=>Ot,AdditiveAnimationBlendMode:()=>Er,AdditiveBlending:()=>et,AgXToneMapping:()=>jt,AlphaFormat:()=>wn,AlwaysCompare:()=>di,AlwaysDepth:()=>St,AlwaysStencilFunc:()=>ii,AmbientLight:()=>am,AnimationAction:()=>Ym,AnimationClip:()=>Bp,AnimationLoader:()=>Up,AnimationMixer:()=>Km,AnimationObjectGroup:()=>Xm,AnimationUtils:()=>vp,ArcCurve:()=>Od,ArrayCamera:()=>Ou,ArrowHelper:()=>Hg,AttachedBindMode:()=>Qt,Audio:()=>Dm,AudioAnalyser:()=>Um,AudioContext:()=>xm,AudioListener:()=>Rm,AudioLoader:()=>bm,AxesHelper:()=>Vg,BackSide:()=>Je,BasicDepthPacking:()=>Tr,BasicShadowMap:()=>Ve,BatchedMesh:()=>id,Bone:()=>Ch,BooleanKeyframeTrack:()=>wp,Box2:()=>hg,Box3:()=>xo,Box3Helper:()=>Ug,BoxGeometry:()=>Ps,BoxHelper:()=>zg,BufferAttribute:()=>Xa,BufferGeometry:()=>hs,BufferGeometryLoader:()=>fm,ByteType:()=>dn,Cache:()=>Rp,Camera:()=>Fs,CameraHelper:()=>kg,CanvasTexture:()=>Pd,CapsuleGeometry:()=>tf,CatmullRomCurve3:()=>Nd,CineonToneMapping:()=>zt,CircleGeometry:()=>nf,ClampToEdgeWrapping:()=>Zt,Clock:()=>Cm,Color:()=>La,ColorKeyframeTrack:()=>Ep,ColorManagement:()=>Zi,CompressedArrayTexture:()=>Id,CompressedCubeTexture:()=>Bd,CompressedTexture:()=>Td,CompressedTextureLoader:()=>Np,ConeGeometry:()=>of,ConstantAlphaFactor:()=>_t,ConstantColorFactor:()=>xt,Controls:()=>qg,CubeCamera:()=>Qs,CubeReflectionMapping:()=>Wt,CubeRefractionMapping:()=>qt,CubeTexture:()=>Hs,CubeTextureLoader:()=>Gp,CubeUVReflectionMapping:()=>Jt,CubicBezierCurve:()=>Hd,CubicBezierCurve3:()=>Vd,CubicInterpolant:()=>Ap,CullFaceBack:()=>Ge,CullFaceFront:()=>Qe,CullFaceFrontBack:()=>He,CullFaceNone:()=>je,Curve:()=>Rd,CurvePath:()=>Zd,CustomBlending:()=>rt,CustomToneMapping:()=>Nt,CylinderGeometry:()=>rf,Cylindrical:()=>lg,Data3DTexture:()=>po,DataArrayTexture:()=>ho,DataTexture:()=>Mh,DataTextureLoader:()=>Qp,DataUtils:()=>Va,DecrementStencilOp:()=>qr,DecrementWrapStencilOp:()=>Yr,DefaultLoadingManager:()=>Op,DepthFormat:()=>Tn,DepthStencilFormat:()=>In,DepthTexture:()=>Ul,DetachedBindMode:()=>Ht,DirectionalLight:()=>om,DirectionalLightHelper:()=>Rg,DiscreteInterpolant:()=>bp,DisplayP3ColorSpace:()=>Fr,DodecahedronGeometry:()=>sf,DoubleSide:()=>Ke,DstAlphaFactor:()=>mt,DstColorFactor:()=>vt,DynamicCopyUsage:()=>xi,DynamicDrawUsage:()=>pi,DynamicReadUsage:()=>vi,EdgesGeometry:()=>df,EllipseCurve:()=>Dd,EqualCompare:()=>si,EqualDepth:()=>Tt,EqualStencilFunc:()=>$r,EquirectangularReflectionMapping:()=>Xt,EquirectangularRefractionMapping:()=>Yt,Euler:()=>ra,EventDispatcher:()=>Ci,ExtrudeGeometry:()=>Gf,FileLoader:()=>zp,Float16BufferAttribute:()=>ns,Float32BufferAttribute:()=>rs,FloatType:()=>vn,Fog:()=>Wu,FogExp2:()=>Vu,FramebufferTexture:()=>Md,FrontSide:()=>Ye,Frustum:()=>Zs,GLBufferAttribute:()=>ng,GLSL1:()=>_i,GLSL3:()=>wi,GreaterCompare:()=>ci,GreaterDepth:()=>Bt,GreaterEqualCompare:()=>hi,GreaterEqualDepth:()=>It,GreaterEqualStencilFunc:()=>ri,GreaterStencilFunc:()=>ti,GridHelper:()=>Mg,Group:()=>ku,HalfFloatType:()=>yn,HemisphereLight:()=>Wp,HemisphereLightHelper:()=>Cg,IcosahedronGeometry:()=>Hf,ImageBitmapLoader:()=>ym,ImageLoader:()=>jp,ImageUtils:()=>no,IncrementStencilOp:()=>Wr,IncrementWrapStencilOp:()=>Xr,InstancedBufferAttribute:()=>Ph,InstancedBufferGeometry:()=>dm,InstancedInterleavedBuffer:()=>tg,InstancedMesh:()=>Uh,Int16BufferAttribute:()=>Za,Int32BufferAttribute:()=>es,Int8BufferAttribute:()=>Ya,IntType:()=>mn,InterleavedBuffer:()=>Xu,InterleavedBufferAttribute:()=>Ju,Interpolant:()=>yp,InterpolateDiscrete:()=>vr,InterpolateLinear:()=>yr,InterpolateSmooth:()=>Ar,InvertStencilOp:()=>Jr,KeepStencilOp:()=>Hr,KeyframeTrack:()=>_p,LOD:()=>mh,LatheGeometry:()=>ef,Layers:()=>ia,LessCompare:()=>ai,LessDepth:()=>Ct,LessEqualCompare:()=>li,LessEqualDepth:()=>Mt,LessEqualStencilFunc:()=>ei,LessStencilFunc:()=>Zr,Light:()=>Vp,LightProbe:()=>cm,Line:()=>fd,Line3:()=>pg,LineBasicMaterial:()=>od,LineCurve:()=>Wd,LineCurve3:()=>qd,LineDashedMaterial:()=>hp,LineLoop:()=>yd,LineSegments:()=>vd,LinearDisplayP3ColorSpace:()=>zr,LinearFilter:()=>an,LinearInterpolant:()=>xp,LinearMipMapLinearFilter:()=>un,LinearMipMapNearestFilter:()=>ln,LinearMipmapLinearFilter:()=>cn,LinearMipmapNearestFilter:()=>sn,LinearSRGBColorSpace:()=>Lr,LinearToneMapping:()=>Lt,LinearTransfer:()=>Ur,Loader:()=>kp,LoaderUtils:()=>hm,LoadingManager:()=>Dp,LoopOnce:()=>pr,LoopPingPong:()=>gr,LoopRepeat:()=>mr,LuminanceAlphaFormat:()=>Mn,LuminanceFormat:()=>Cn,MOUSE:()=>Ue,Material:()=>Ua,MaterialLoader:()=>um,MathUtils:()=>Fi,Matrix2:()=>cg,Matrix3:()=>Ui,Matrix4:()=>qo,MaxEquation:()=>lt,Mesh:()=>Is,MeshBasicMaterial:()=>Na,MeshDepthMaterial:()=>Cu,MeshDistanceMaterial:()=>Mu,MeshLambertMaterial:()=>cp,MeshMatcapMaterial:()=>up,MeshNormalMaterial:()=>lp,MeshPhongMaterial:()=>ap,MeshPhysicalMaterial:()=>op,MeshStandardMaterial:()=>ip,MeshToonMaterial:()=>sp,MinEquation:()=>st,MirroredRepeatWrapping:()=>$t,MixOperation:()=>Dt,MultiplyBlending:()=>nt,MultiplyOperation:()=>Rt,NearestFilter:()=>en,NearestMipMapLinearFilter:()=>on,NearestMipMapNearestFilter:()=>nn,NearestMipmapLinearFilter:()=>rn,NearestMipmapNearestFilter:()=>tn,NeutralToneMapping:()=>Gt,NeverCompare:()=>oi,NeverDepth:()=>Et,NeverStencilFunc:()=>Kr,NoBlending:()=>Ze,NoColorSpace:()=>Or,NoToneMapping:()=>kt,NormalAnimationBlendMode:()=>wr,NormalBlending:()=>$e,NotEqualCompare:()=>ui,NotEqualDepth:()=>Pt,NotEqualStencilFunc:()=>ni,NumberKeyframeTrack:()=>Sp,Object3D:()=>xa,ObjectLoader:()=>pm,ObjectSpaceNormalMap:()=>Dr,OctahedronGeometry:()=>Vf,OneFactor:()=>ut,OneMinusConstantAlphaFactor:()=>wt,OneMinusConstantColorFactor:()=>bt,OneMinusDstAlphaFactor:()=>gt,OneMinusDstColorFactor:()=>yt,OneMinusSrcAlphaFactor:()=>pt,OneMinusSrcColorFactor:()=>dt,OrthographicCamera:()=>pl,P3Primaries:()=>Gr,PCFShadowMap:()=>We,PCFSoftShadowMap:()=>qe,PMREMGenerator:()=>Cl,Path:()=>$d,PerspectiveCamera:()=>js,Plane:()=>Ys,PlaneGeometry:()=>tl,PlaneHelper:()=>Ng,PointLight:()=>rm,PointLightHelper:()=>_g,Points:()=>Ed,PointsMaterial:()=>Ad,PolarGridHelper:()=>Tg,PolyhedronGeometry:()=>af,PositionalAudio:()=>zm,PropertyBinding:()=>qm,PropertyMixer:()=>Nm,QuadraticBezierCurve:()=>Xd,QuadraticBezierCurve3:()=>Yd,Quaternion:()=>go,QuaternionKeyframeTrack:()=>Mp,QuaternionLinearInterpolant:()=>Cp,RED_GREEN_RGTC2_Format:()=>dr,RED_RGTC1_Format:()=>ur,REVISION:()=>ze,RGBADepthPacking:()=>Ir,RGBAFormat:()=>Sn,RGBAIntegerFormat:()=>kn,RGBA_ASTC_10x10_Format:()=>ir,RGBA_ASTC_10x5_Format:()=>tr,RGBA_ASTC_10x6_Format:()=>nr,RGBA_ASTC_10x8_Format:()=>rr,RGBA_ASTC_12x10_Format:()=>or,RGBA_ASTC_12x12_Format:()=>ar,RGBA_ASTC_4x4_Format:()=>qn,RGBA_ASTC_5x4_Format:()=>Xn,RGBA_ASTC_5x5_Format:()=>Yn,RGBA_ASTC_6x5_Format:()=>Jn,RGBA_ASTC_6x6_Format:()=>Kn,RGBA_ASTC_8x5_Format:()=>Zn,RGBA_ASTC_8x6_Format:()=>$n,RGBA_ASTC_8x8_Format:()=>er,RGBA_BPTC_Format:()=>sr,RGBA_ETC2_EAC_Format:()=>Wn,RGBA_PVRTC_2BPPV1_Format:()=>Qn,RGBA_PVRTC_4BPPV1_Format:()=>Gn,RGBA_S3TC_DXT1_Format:()=>Fn,RGBA_S3TC_DXT3_Format:()=>zn,RGBA_S3TC_DXT5_Format:()=>Un,RGBDepthPacking:()=>Br,RGBFormat:()=>En,RGBIntegerFormat:()=>On,RGB_BPTC_SIGNED_Format:()=>lr,RGB_BPTC_UNSIGNED_Format:()=>cr,RGB_ETC1_Format:()=>Hn,RGB_ETC2_Format:()=>Vn,RGB_PVRTC_2BPPV1_Format:()=>jn,RGB_PVRTC_4BPPV1_Format:()=>Nn,RGB_S3TC_DXT1_Format:()=>Ln,RGDepthPacking:()=>Pr,RGFormat:()=>Rn,RGIntegerFormat:()=>Dn,RawShaderMaterial:()=>rp,Ray:()=>Wo,Raycaster:()=>ig,Rec709Primaries:()=>jr,RectAreaLight:()=>sm,RedFormat:()=>Bn,RedIntegerFormat:()=>Pn,ReinhardToneMapping:()=>Ft,RenderTarget:()=>co,RepeatWrapping:()=>Kt,ReplaceStencilOp:()=>Vr,ReverseSubtractEquation:()=>at,RingGeometry:()=>Wf,SIGNED_RED_GREEN_RGTC2_Format:()=>fr,SIGNED_RED_RGTC1_Format:()=>hr,SRGBColorSpace:()=>kr,SRGBTransfer:()=>Nr,Scene:()=>qu,ShaderChunk:()=>nl,ShaderLib:()=>il,ShaderMaterial:()=>Ls,ShadowMaterial:()=>np,Shape:()=>ff,ShapeGeometry:()=>qf,ShapePath:()=>Wg,ShapeUtils:()=>Uf,ShortType:()=>fn,Skeleton:()=>Bh,SkeletonHelper:()=>xg,SkinnedMesh:()=>Sh,Source:()=>io,Sphere:()=>zo,SphereGeometry:()=>Xf,Spherical:()=>sg,SphericalHarmonics3:()=>lm,SplineCurve:()=>Jd,SpotLight:()=>Zp,SpotLightHelper:()=>gg,Sprite:()=>hh,SpriteMaterial:()=>Ku,SrcAlphaFactor:()=>ft,SrcAlphaSaturateFactor:()=>At,SrcColorFactor:()=>ht,StaticCopyUsage:()=>Ai,StaticDrawUsage:()=>fi,StaticReadUsage:()=>gi,StereoCamera:()=>Sm,StreamCopyUsage:()=>bi,StreamDrawUsage:()=>mi,StreamReadUsage:()=>yi,StringKeyframeTrack:()=>Tp,SubtractEquation:()=>ot,SubtractiveBlending:()=>tt,TOUCH:()=>Ne,TangentSpaceNormalMap:()=>Rr,TetrahedronGeometry:()=>Yf,Texture:()=>so,TextureLoader:()=>Hp,TextureUtils:()=>Pu,TorusGeometry:()=>Jf,TorusKnotGeometry:()=>Kf,Triangle:()=>Pa,TriangleFanDrawMode:()=>Mr,TriangleStripDrawMode:()=>Cr,TrianglesDrawMode:()=>Sr,TubeGeometry:()=>Zf,UVMapping:()=>Vt,Uint16BufferAttribute:()=>$a,Uint32BufferAttribute:()=>ts,Uint8BufferAttribute:()=>Ja,Uint8ClampedBufferAttribute:()=>Ka,Uniform:()=>Zm,UniformsGroup:()=>eg,UniformsLib:()=>rl,UniformsUtils:()=>ks,UnsignedByteType:()=>hn,UnsignedInt248Type:()=>bn,UnsignedInt5999Type:()=>_n,UnsignedIntType:()=>gn,UnsignedShort4444Type:()=>An,UnsignedShort5551Type:()=>xn,UnsignedShortType:()=>pn,VSMShadowMap:()=>Xe,Vector2:()=>zi,Vector3:()=>vo,Vector4:()=>lo,VectorKeyframeTrack:()=>Ip,VideoTexture:()=>Cd,WebGL3DRenderTarget:()=>mo,WebGLArrayRenderTarget:()=>fo,WebGLCoordinateSystem:()=>Ei,WebGLCubeRenderTarget:()=>Vs,WebGLMultipleRenderTargets:()=>Xg,WebGLRenderTarget:()=>uo,WebGLRenderer:()=>Hu,WebGLUtils:()=>Du,WebGPUCoordinateSystem:()=>Si,WireframeGeometry:()=>$f,WrapAroundEnding:()=>_r,ZeroCurvatureEnding:()=>xr,ZeroFactor:()=>ct,ZeroSlopeEnding:()=>br,ZeroStencilOp:()=>Qr,createCanvasElement:()=>Vi});var t={};n.r(t),n.d(t,{Canvas:()=>nA,ReactThreeFiber:()=>cv,_roots:()=>my,act:()=>Iy,addAfterEffect:()=>ey,addEffect:()=>$v,addTail:()=>ty,advance:()=>vy,applyProps:()=>Ay,buildGraph:()=>Tv,context:()=>Wv,createEvents:()=>Qv,createPointerEvents:()=>Py,createPortal:()=>Cy,createRoot:()=>_y,dispose:()=>Iv,events:()=>Py,extend:()=>hv,flushGlobalEffects:()=>ry,flushSync:()=>Ty,getRootState:()=>Sv,invalidate:()=>gy,reconciler:()=>yy,render:()=>wy,unmountComponentAtNode:()=>Sy,useFrame:()=>uy,useGraph:()=>hy,useInstanceHandle:()=>sy,useLoader:()=>py,useStore:()=>ly,useThree:()=>cy});var r={};n.r(r),n.d(r,{Any:()=>Tb,BailSignal:()=>r_,Controller:()=>S_,FrameValue:()=>s_,Globals:()=>_A,Interpolation:()=>K_,Spring:()=>X_,SpringContext:()=>D_,SpringRef:()=>k_,SpringValue:()=>p_,Trail:()=>Y_,Transition:()=>J_,a:()=>aw,animated:()=>aw,config:()=>Hb,createInterpolator:()=>hx,easings:()=>yx,inferTo:()=>Fb,interpolate:()=>nw,to:()=>tw,update:()=>rw,useChain:()=>Qb,useInView:()=>q_,useIsomorphicLayoutEffect:()=>ob,useReducedMotion:()=>hb,useResize:()=>V_,useScroll:()=>H_,useSpring:()=>F_,useSpringRef:()=>U_,useSpringValue:()=>N_,useSprings:()=>L_,useTrail:()=>j_,useTransition:()=>G_});var i={};n.r(i),n.d(i,{AccumulativeShadows:()=>kY,AdaptiveDpr:()=>RK,AdaptiveEvents:()=>DK,ArcballControls:()=>fU,AsciiRenderer:()=>_z,BBAnchor:()=>tq,Backdrop:()=>GY,BakeShadows:()=>CK,Billboard:()=>TD,Bounds:()=>QX,Box:()=>pX,Bvh:()=>HW,CameraControls:()=>RN,CameraShake:()=>XX,Capsule:()=>PX,CatmullRomLine:()=>dO,Caustics:()=>YY,Center:()=>aq,Circle:()=>mX,Clone:()=>KL,Cloud:()=>OJ,CloudInstance:()=>DJ,Clouds:()=>RJ,ComputedAttribute:()=>VL,Cone:()=>gX,ContactShadows:()=>RY,CubeCamera:()=>Dz,CubeTexture:()=>fj,CubicBezierLine:()=>hO,CurveModifier:()=>Nq,CycleRaycast:()=>fC,Cylinder:()=>vX,Decal:()=>lF,Detailed:()=>EK,DetectGPU:()=>ZQ,DeviceOrientationControls:()=>Fz,Dodecahedron:()=>TX,DragControls:()=>GM,Edges:()=>ML,Effects:()=>pL,Environment:()=>IY,EnvironmentCube:()=>CY,EnvironmentMap:()=>SY,EnvironmentPortal:()=>MY,Example:()=>sq,Extrude:()=>IX,FaceControls:()=>w$,FaceLandmarker:()=>y$,FaceLandmarkerDefaults:()=>v$,Facemesh:()=>d$,FacemeshDatas:()=>m$,FacemeshEye:()=>p$,FacemeshEyeDefaults:()=>f$,Fbo:()=>Iz,Fbx:()=>yG,FirstPersonControls:()=>OU,Fisheye:()=>QK,Float:()=>YX,FlyControls:()=>Gz,GizmoHelper:()=>YN,GizmoViewcube:()=>aj,GizmoViewport:()=>cj,Gltf:()=>xz,GradientTexture:()=>gL,GradientType:()=>mL,Grid:()=>hj,Helper:()=>IQ,Html:()=>dC,Hud:()=>zN,Icosahedron:()=>CX,Image:()=>CL,Instance:()=>Mq,InstancedAttribute:()=>Pq,Instances:()=>Tq,IsObject:()=>yL,KeyboardControls:()=>sD,Ktx2:()=>vQ,Lathe:()=>BX,Lightformer:()=>aJ,Line:()=>lO,Loader:()=>AC,MapControls:()=>Kz,MarchingCube:()=>rF,MarchingCubes:()=>nF,MarchingPlane:()=>iF,Mask:()=>jK,MatcapTexture:()=>HJ,Merged:()=>Iq,MeshDiscardMaterial:()=>aX,MeshDistortMaterial:()=>Gq,MeshPortalMaterial:()=>WK,MeshReflectorMaterial:()=>Xq,MeshRefractionMaterial:()=>nX,MeshTransmissionMaterial:()=>oX,MeshWobbleMaterial:()=>Hq,MotionPathControls:()=>LN,NormalTexture:()=>XJ,Octahedron:()=>MX,OrbitControls:()=>Zz,OrthographicCamera:()=>Bz,Outlines:()=>IL,PerformanceMonitor:()=>kK,PerspectiveCamera:()=>Pz,PivotControls:()=>c$,Plane:()=>AX,Point:()=>gK,PointMaterial:()=>cX,PointMaterialImpl:()=>lX,PointerLockControls:()=>IU,Points:()=>yK,PointsBuffer:()=>vK,Polyhedron:()=>SX,PositionMesh:()=>Aq,PositionPoint:()=>cK,PositionalAudio:()=>fO,Preload:()=>SK,PresentationControls:()=>iD,Progress:()=>vC,QuadraticBezierLine:()=>uO,RandomizedLight:()=>LY,Reflector:()=>JY,RenderCubeTexture:()=>UK,RenderTexture:()=>FK,Resize:()=>FX,Ring:()=>EX,RoundedBox:()=>OX,Sampler:()=>HL,ScreenQuad:()=>LX,ScreenSizer:()=>LD,ScreenSpace:()=>ID,Scroll:()=>TI,ScrollControls:()=>SI,Segment:()=>wK,SegmentObject:()=>bK,Segments:()=>xK,Select:()=>CD,Shadow:()=>QY,ShadowAlpha:()=>iK,Shape:()=>RX,Sky:()=>fJ,SoftShadows:()=>dX,Sparkles:()=>NJ,Sphere:()=>yX,Splat:()=>Mz,SpotLight:()=>oJ,SpotLightShadow:()=>iJ,SpriteAnimator:()=>Oq,Stage:()=>NY,Stars:()=>gJ,Stats:()=>DQ,StatsGl:()=>LQ,Svg:()=>uF,Tetrahedron:()=>wX,Text:()=>Ok,Text3D:()=>qk,Texture:()=>xL,Torus:()=>bX,TorusKnot:()=>_X,TrackballControls:()=>nU,Trail:()=>UL,TrailTexture:()=>oq,TransformControls:()=>AU,Tube:()=>xX,VideoTexture:()=>wQ,View:()=>yZ,Wireframe:()=>rK,accumulativeContext:()=>DY,calcPosFromAngles:()=>dJ,calculateAspectRatio:()=>CQ,calculateScaleFactor:()=>OD,checkIfFrameIsEmpty:()=>SQ,createInstances:()=>Bq,getFirstItem:()=>EQ,isWebGL2Available:()=>fL,meshBounds:()=>PK,shaderMaterial:()=>vL,useAnimations:()=>WW,useAspect:()=>zQ,useBVH:()=>QW,useBounds:()=>HX,useBoxProjectedEnv:()=>ZW,useCamera:()=>UQ,useContextBridge:()=>VW,useCubeCamera:()=>Rz,useCubeTexture:()=>dj,useCursor:()=>pC,useDepthBuffer:()=>FQ,useDetectGPU:()=>KQ,useEnvironment:()=>vY,useFBO:()=>Tz,useFBX:()=>vG,useFaceControls:()=>E$,useFaceLandmarker:()=>A$,useFont:()=>Vk,useGLTF:()=>Az,useGizmoContext:()=>NN,useHelper:()=>TQ,useIntersect:()=>qW,useKTX2:()=>gQ,useKeyboardControls:()=>lD,useMask:()=>GK,useMatcapTexture:()=>QJ,useMotion:()=>ON,useNormalTexture:()=>qJ,usePerformanceMonitor:()=>LK,useProgress:()=>gC,useScroll:()=>EI,useSelect:()=>MD,useSpriteAnimator:()=>Dq,useSpriteLoader:()=>MQ,useSurfaceSampler:()=>QL,useTexture:()=>AL,useTrail:()=>zL,useTrailTexture:()=>iq,useVideoTexture:()=>_Q});var o={};n.r(o),n.d(o,{scaleBand:()=>R5,scaleDiverging:()=>cte,scaleDivergingLog:()=>ute,scaleDivergingPow:()=>dte,scaleDivergingSqrt:()=>fte,scaleDivergingSymlog:()=>hte,scaleIdentity:()=>r9,scaleImplicit:()=>B5,scaleLinear:()=>n9,scaleLog:()=>d9,scaleOrdinal:()=>P5,scalePoint:()=>O5,scalePow:()=>b9,scaleQuantile:()=>D9,scaleQuantize:()=>O9,scaleRadial:()=>E9,scaleSequential:()=>nte,scaleSequentialLog:()=>rte,scaleSequentialPow:()=>ote,scaleSequentialQuantile:()=>ste,scaleSequentialSqrt:()=>ate,scaleSequentialSymlog:()=>ite,scaleSqrt:()=>_9,scaleSymlog:()=>g9,scaleThreshold:()=>k9,scaleTime:()=>Zee,scaleUtc:()=>$ee,tickFormat:()=>e9});var a={};n.r(a),n.d(a,{hasBrowserEnv:()=>qce,hasStandardBrowserEnv:()=>Yce,hasStandardBrowserWebWorkerEnv:()=>Jce,navigator:()=>Xce,origin:()=>Kce});var s,l=n(5043),c=n.t(l,2),u=n(4391),h=n(7950),d=n.t(h,2);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const p="popstate";function m(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function g(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(NQ){}}}function v(e,t){return{usr:e.state,key:e.key,idx:t}}function y(e,t,n,r){return void 0===n&&(n=null),f({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?x(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function A(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function x(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function b(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=s.Pop,c=null,u=h();function h(){return(a.state||{idx:null}).idx}function d(){l=s.Pop;let e=h(),t=null==e?null:e-u;u=e,c&&c({action:l,location:x.location,delta:t})}function g(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:A(e);return n=n.replace(/ $/,"%20"),m(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==u&&(u=0,a.replaceState(f({},a.state,{idx:u}),""));let x={get action(){return l},get location(){return e(i,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(p,d),c=e,()=>{i.removeEventListener(p,d),c=null}},createHref:e=>t(i,e),createURL:g,encodeLocation(e){let t=g(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let r=y(x.location,e,t);n&&n(r,e),u=h()+1;let d=v(r,u),f=x.createHref(r);try{a.pushState(d,"",f)}catch(Wy){if(Wy instanceof DOMException&&"DataCloneError"===Wy.name)throw Wy;i.location.assign(f)}o&&c&&c({action:l,location:x.location,delta:1})},replace:function(e,t){l=s.Replace;let r=y(x.location,e,t);n&&n(r,e),u=h();let i=v(r,u),d=x.createHref(r);a.replaceState(i,"",d),o&&c&&c({action:l,location:x.location,delta:0})},go:e=>a.go(e)};return x}var _;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(_||(_={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function w(e,t,n){return void 0===n&&(n="/"),E(e,t,n,!1)}function E(e,t,n,r){let i=z(("string"===typeof t?x(t):t).pathname||"/",n);if(null==i)return null;let o=S(e);!function(e){e.sort(((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every(((e,n)=>e===t[n]));return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map((e=>e.childrenIndex)),t.routesMeta.map((e=>e.childrenIndex)))))}(o);let a=null;for(let s=0;null==a&&s<o.length;++s){let e=F(i);a=k(o[s],e,r)}return a}function S(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,o)=>{let a={relativePath:void 0===o?e.path||"":o,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(m(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let s=Q([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(m(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+s+'".'),S(e.children,t,l,s)),(null!=e.path||e.index)&&t.push({path:s,score:O(s,e.index),routesMeta:l})};return e.forEach(((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of C(e.path))i(e,t,r);else i(e,t)})),t}function C(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(0===r.length)return i?[o,""]:[o];let a=C(r.join("/")),s=[];return s.push(...a.map((e=>""===e?o:[o,e].join("/")))),i&&s.push(...a),s.map((t=>e.startsWith("/")&&""===t?"/":t))}const M=/^:[\w-]+$/,T=3,I=2,B=1,P=10,R=-2,D=e=>"*"===e;function O(e,t){let n=e.split("/"),r=n.length;return n.some(D)&&(r+=R),t&&(r+=I),n.filter((e=>!D(e))).reduce(((e,t)=>e+(M.test(t)?T:""===t?B:P)),r)}function k(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},o="/",a=[];for(let s=0;s<r.length;++s){let e=r[s],l=s===r.length-1,c="/"===o?t:t.slice(o.length)||"/",u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=L({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:Q([o,u.pathname]),pathnameBase:H(Q([o,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(o=Q([o,u.pathnameBase]))}return a}function L(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);g("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,((e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)")));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let o=new RegExp(i,t?void 0:"i");return[o,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let o=i[0],a=o.replace(/(.)\/+$/,"$1"),s=i.slice(1),l=r.reduce(((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=s[n]||"";a=o.slice(0,o.length-e.length).replace(/(.)\/+$/,"$1")}const l=s[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e}),{});return{params:l,pathname:o,pathnameBase:a,pattern:e}}function F(e){try{return e.split("/").map((e=>decodeURIComponent(e).replace(/\//g,"%2F"))).join("/")}catch(Wy){return g(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+Wy+")."),e}}function z(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function U(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter(((e,t)=>0===t||e.route.path&&e.route.path.length>0))}function j(e,t){let n=N(e);return t?n.map(((e,t)=>t===n.length-1?e.pathname:e.pathnameBase)):n.map((e=>e.pathnameBase))}function G(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=x(e):(i=f({},e),m(!i.pathname||!i.pathname.includes("?"),U("?","pathname","search",i)),m(!i.pathname||!i.pathname.includes("#"),U("#","pathname","hash",i)),m(!i.search||!i.search.includes("#"),U("#","search","hash",i)));let o,a=""===e||""===i.pathname,s=a?"/":i.pathname;if(null==s)o=n;else{let e=t.length-1;if(!r&&s.startsWith("..")){let t=s.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}o=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?x(e):e,o=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach((e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)})),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:o,search:V(r),hash:W(i)}}(i,o),c=s&&"/"!==s&&s.endsWith("/"),u=(a||"."===s)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!u||(l.pathname+="/"),l}const Q=e=>e.join("/").replace(/\/\/+/g,"/"),H=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),V=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",W=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const X=["post","put","patch","delete"],Y=(new Set(X),["get",...X]);new Set(Y),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}const K=l.createContext(null);const Z=l.createContext(null);const $=l.createContext(null);const ee=l.createContext(null);const te=l.createContext({outlet:null,matches:[],isDataRoute:!1});const ne=l.createContext(null);function re(){return null!=l.useContext(ee)}function ie(){return re()||m(!1),l.useContext(ee).location}function oe(e){l.useContext($).static||l.useLayoutEffect(e)}function ae(){let{isDataRoute:e}=l.useContext(te);return e?function(){let{router:e}=ge(pe.UseNavigateStable),t=ye(me.UseNavigateStable),n=l.useRef(!1);oe((()=>{n.current=!0}));let r=l.useCallback((function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,J({fromRouteId:t},i)))}),[e,t]);return r}():function(){re()||m(!1);let e=l.useContext(K),{basename:t,future:n,navigator:r}=l.useContext($),{matches:i}=l.useContext(te),{pathname:o}=ie(),a=JSON.stringify(j(i,n.v7_relativeSplatPath)),s=l.useRef(!1);oe((()=>{s.current=!0}));let c=l.useCallback((function(n,i){if(void 0===i&&(i={}),!s.current)return;if("number"===typeof n)return void r.go(n);let l=G(n,JSON.parse(a),o,"path"===i.relative);null==e&&"/"!==t&&(l.pathname="/"===l.pathname?t:Q([t,l.pathname])),(i.replace?r.replace:r.push)(l,i.state,i)}),[t,r,a,o,e]);return c}()}function se(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=l.useContext($),{matches:i}=l.useContext(te),{pathname:o}=ie(),a=JSON.stringify(j(i,r.v7_relativeSplatPath));return l.useMemo((()=>G(e,JSON.parse(a),o,"path"===n)),[e,a,o,n])}function le(e,t,n,r){re()||m(!1);let{navigator:i}=l.useContext($),{matches:o}=l.useContext(te),a=o[o.length-1],c=a?a.params:{},u=(a&&a.pathname,a?a.pathnameBase:"/");a&&a.route;let h,d=ie();if(t){var f;let e="string"===typeof t?x(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||m(!1),h=e}else h=d;let p=h.pathname||"/",g=p;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+p.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=w(e,{pathname:g});let y=fe(v&&v.map((e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:Q([u,i.encodeLocation?i.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:Q([u,i.encodeLocation?i.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])}))),o,n,r);return t&&y?l.createElement(ee.Provider,{value:{location:J({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:s.Pop}},y):y}function ce(){let e=function(){var e;let t=l.useContext(ne),n=ve(me.UseRouteError),r=ye(me.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r};return l.createElement(l.Fragment,null,l.createElement("h2",null,"Unexpected Application Error!"),l.createElement("h3",{style:{fontStyle:"italic"}},t),n?l.createElement("pre",{style:i},n):null,null)}const ue=l.createElement(ce,null);class he extends l.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?l.createElement(te.Provider,{value:this.props.routeContext},l.createElement(ne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function de(e){let{routeContext:t,match:n,children:r}=e,i=l.useContext(K);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),l.createElement(te.Provider,{value:t},r)}function fe(e,t,n,r){var i;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,s=null==(i=n)?void 0:i.errors;if(null!=s){let e=a.findIndex((e=>e.route.id&&void 0!==(null==s?void 0:s[e.route.id])));e>=0||m(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let l=0;l<a.length;l++){let e=a[l];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=l),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight(((e,r,i)=>{let o,h=!1,d=null,f=null;var p;n&&(o=s&&r.route.id?s[r.route.id]:void 0,d=r.route.errorElement||ue,c&&(u<0&&0===i?(p="route-fallback",!1||Ae[p]||(Ae[p]=!0),h=!0,f=null):u===i&&(h=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,i+1)),g=()=>{let t;return t=o?d:h?f:r.route.Component?l.createElement(r.route.Component,null):r.route.element?r.route.element:e,l.createElement(de,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===i)?l.createElement(he,{location:n.location,revalidation:n.revalidation,component:d,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()}),null)}var pe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pe||{}),me=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(me||{});function ge(e){let t=l.useContext(K);return t||m(!1),t}function ve(e){let t=l.useContext(Z);return t||m(!1),t}function ye(e){let t=function(){let e=l.useContext(te);return e||m(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||m(!1),n.route.id}const Ae={};c.startTransition;function xe(e){m(!1)}function be(e){let{basename:t="/",children:n=null,location:r,navigationType:i=s.Pop,navigator:o,static:a=!1,future:c}=e;re()&&m(!1);let u=t.replace(/^\/*/,"/"),h=l.useMemo((()=>({basename:u,navigator:o,static:a,future:J({v7_relativeSplatPath:!1},c)})),[u,c,o,a]);"string"===typeof r&&(r=x(r));let{pathname:d="/",search:f="",hash:p="",state:g=null,key:v="default"}=r,y=l.useMemo((()=>{let e=z(d,u);return null==e?null:{location:{pathname:e,search:f,hash:p,state:g,key:v},navigationType:i}}),[u,d,f,p,g,v,i]);return null==y?null:l.createElement($.Provider,{value:h},l.createElement(ee.Provider,{children:n,value:y}))}function _e(e){let{children:t,location:n}=e;return le(we(t),n)}new Promise((()=>{}));l.Component;function we(e,t){void 0===t&&(t=[]);let n=[];return l.Children.forEach(e,((e,r)=>{if(!l.isValidElement(e))return;let i=[...t,r];if(e.type===l.Fragment)return void n.push.apply(n,we(e.props.children,i));e.type!==xe&&m(!1),e.props.index&&e.props.children&&m(!1);let o={id:e.props.id||i.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=we(e.props.children,i)),n.push(o)})),n}function Ee(){return Ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ee.apply(this,arguments)}function Se(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Ce=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"],Me=["aria-current","caseSensitive","className","end","style","to","unstable_viewTransition","children"];try{window.__reactRouterVersion="6"}catch(NQ){}const Te=l.createContext({isTransitioning:!1});new Map;const Ie=c.startTransition;d.flushSync,c.useId;function Be(e){let{basename:t,children:n,future:r,window:i}=e,o=l.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:i,v5Compat:!0})&&(a={}),b((function(e,t){let{pathname:n,search:r,hash:i}=e.location;return y("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}),(function(e,t){return"string"===typeof t?t:A(t)}),null,a)));let s=o.current,[c,u]=l.useState({action:s.action,location:s.location}),{v7_startTransition:h}=r||{},d=l.useCallback((e=>{h&&Ie?Ie((()=>u(e))):u(e)}),[u,h]);return l.useLayoutEffect((()=>s.listen(d)),[s,d]),l.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:s,future:r})}const Pe="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Re=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,De=l.forwardRef((function(e,t){let n,{onClick:r,relative:i,reloadDocument:o,replace:a,state:s,target:c,to:u,preventScrollReset:h,unstable_viewTransition:d}=e,f=Se(e,Ce),{basename:p}=l.useContext($),g=!1;if("string"===typeof u&&Re.test(u)&&(n=u,Pe))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=z(t.pathname,p);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:g=!0}catch(NQ){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;re()||m(!1);let{basename:r,navigator:i}=l.useContext($),{hash:o,pathname:a,search:s}=se(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:Q([r,a])),i.createHref({pathname:c,search:s,hash:o})}(u,{relative:i}),y=function(e,t){let{target:n,replace:r,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s}=void 0===t?{}:t,c=ae(),u=ie(),h=se(e,{relative:a});return l.useCallback((t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:A(u)===A(h);c(e,{replace:n,state:i,preventScrollReset:o,relative:a,unstable_viewTransition:s})}}),[u,c,h,r,i,n,e,o,a,s])}(u,{replace:a,state:s,target:c,preventScrollReset:h,relative:i,unstable_viewTransition:d});return l.createElement("a",Ee({},f,{href:n||v,onClick:g||o?r:function(e){r&&r(e),e.defaultPrevented||y(e)},ref:t,target:c}))}));const Oe=l.forwardRef((function(e,t){let{"aria-current":n="page",caseSensitive:r=!1,className:i="",end:o=!1,style:a,to:s,unstable_viewTransition:c,children:u}=e,h=Se(e,Me),d=se(s,{relative:h.relative}),f=ie(),p=l.useContext(Z),{navigator:g,basename:v}=l.useContext($),y=null!=p&&function(e,t){void 0===t&&(t={});let n=l.useContext(Te);null==n&&m(!1);let{basename:r}=Fe(ke.useViewTransitionState),i=se(e,{relative:t.relative});if(!n.isTransitioning)return!1;let o=z(n.currentLocation.pathname,r)||n.currentLocation.pathname,a=z(n.nextLocation.pathname,r)||n.nextLocation.pathname;return null!=L(i.pathname,a)||null!=L(i.pathname,o)}(d)&&!0===c,A=g.encodeLocation?g.encodeLocation(d).pathname:d.pathname,x=f.pathname,b=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;r||(x=x.toLowerCase(),b=b?b.toLowerCase():null,A=A.toLowerCase()),b&&v&&(b=z(b,v)||b);const _="/"!==A&&A.endsWith("/")?A.length-1:A.length;let w,E=x===A||!o&&x.startsWith(A)&&"/"===x.charAt(_),S=null!=b&&(b===A||!o&&b.startsWith(A)&&"/"===b.charAt(A.length)),C={isActive:E,isPending:S,isTransitioning:y},M=E?n:void 0;w="function"===typeof i?i(C):[i,E?"active":null,S?"pending":null,y?"transitioning":null].filter(Boolean).join(" ");let T="function"===typeof a?a(C):a;return l.createElement(De,Ee({},h,{"aria-current":M,className:w,ref:t,style:T,to:s,unstable_viewTransition:c}),"function"===typeof u?u(C):u)}));var ke,Le;function Fe(e){let t=l.useContext(K);return t||m(!1),t}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(ke||(ke={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Le||(Le={}));const ze="168",Ue={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},Ne={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},je=0,Ge=1,Qe=2,He=3,Ve=0,We=1,qe=2,Xe=3,Ye=0,Je=1,Ke=2,Ze=0,$e=1,et=2,tt=3,nt=4,rt=5,it=100,ot=101,at=102,st=103,lt=104,ct=200,ut=201,ht=202,dt=203,ft=204,pt=205,mt=206,gt=207,vt=208,yt=209,At=210,xt=211,bt=212,_t=213,wt=214,Et=0,St=1,Ct=2,Mt=3,Tt=4,It=5,Bt=6,Pt=7,Rt=0,Dt=1,Ot=2,kt=0,Lt=1,Ft=2,zt=3,Ut=4,Nt=5,jt=6,Gt=7,Qt="attached",Ht="detached",Vt=300,Wt=301,qt=302,Xt=303,Yt=304,Jt=306,Kt=1e3,Zt=1001,$t=1002,en=1003,tn=1004,nn=1004,rn=1005,on=1005,an=1006,sn=1007,ln=1007,cn=1008,un=1008,hn=1009,dn=1010,fn=1011,pn=1012,mn=1013,gn=1014,vn=1015,yn=1016,An=1017,xn=1018,bn=1020,_n=35902,wn=1021,En=1022,Sn=1023,Cn=1024,Mn=1025,Tn=1026,In=1027,Bn=1028,Pn=1029,Rn=1030,Dn=1031,On=1032,kn=1033,Ln=33776,Fn=33777,zn=33778,Un=33779,Nn=35840,jn=35841,Gn=35842,Qn=35843,Hn=36196,Vn=37492,Wn=37496,qn=37808,Xn=37809,Yn=37810,Jn=37811,Kn=37812,Zn=37813,$n=37814,er=37815,tr=37816,nr=37817,rr=37818,ir=37819,or=37820,ar=37821,sr=36492,lr=36494,cr=36495,ur=36283,hr=36284,dr=36285,fr=36286,pr=2200,mr=2201,gr=2202,vr=2300,yr=2301,Ar=2302,xr=2400,br=2401,_r=2402,wr=2500,Er=2501,Sr=0,Cr=1,Mr=2,Tr=3200,Ir=3201,Br=3202,Pr=3203,Rr=0,Dr=1,Or="",kr="srgb",Lr="srgb-linear",Fr="display-p3",zr="display-p3-linear",Ur="linear",Nr="srgb",jr="rec709",Gr="p3",Qr=0,Hr=7680,Vr=7681,Wr=7682,qr=7683,Xr=34055,Yr=34056,Jr=5386,Kr=512,Zr=513,$r=514,ei=515,ti=516,ni=517,ri=518,ii=519,oi=512,ai=513,si=514,li=515,ci=516,ui=517,hi=518,di=519,fi=35044,pi=35048,mi=35040,gi=35045,vi=35049,yi=35041,Ai=35046,xi=35050,bi=35042,_i="100",wi="300 es",Ei=2e3,Si=2001;class Ci{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const Mi=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Ti=1234567;const Ii=Math.PI/180,Bi=180/Math.PI;function Pi(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Mi[255&e]+Mi[e>>8&255]+Mi[e>>16&255]+Mi[e>>24&255]+"-"+Mi[255&t]+Mi[t>>8&255]+"-"+Mi[t>>16&15|64]+Mi[t>>24&255]+"-"+Mi[63&n|128]+Mi[n>>8&255]+"-"+Mi[n>>16&255]+Mi[n>>24&255]+Mi[255&r]+Mi[r>>8&255]+Mi[r>>16&255]+Mi[r>>24&255]).toLowerCase()}function Ri(e,t,n){return Math.max(t,Math.min(n,e))}function Di(e,t){return(e%t+t)%t}function Oi(e,t,n){return(1-n)*e+n*t}function ki(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function Li(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Fi={DEG2RAD:Ii,RAD2DEG:Bi,generateUUID:Pi,clamp:Ri,euclideanModulo:Di,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Oi,damp:function(e,t,n,r){return Oi(e,t,1-Math.exp(-n*r))},pingpong:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return t-Math.abs(Di(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Ti=e);let t=Ti+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Ii},radToDeg:function(e){return e*Bi},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((t+r)/2),u=a((t+r)/2),h=o((t-r)/2),d=a((t-r)/2),f=o((r-t)/2),p=a((r-t)/2);switch(i){case"XYX":e.set(s*u,l*h,l*d,s*c);break;case"YZY":e.set(l*d,s*u,l*h,s*c);break;case"ZXZ":e.set(l*h,l*d,s*u,s*c);break;case"XZX":e.set(s*u,l*p,l*f,s*c);break;case"YXY":e.set(l*f,s*u,l*p,s*c);break;case"ZYZ":e.set(l*p,l*f,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:Li,denormalize:ki};class zi{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;zi.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ri(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,o=this.y-e.y;return this.x=i*n-o*r+e.x,this.y=i*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Ui{constructor(e,t,n,r,i,o,a,s,l){Ui.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,o,a,s,l)}set(e,t,n,r,i,o,a,s,l){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=i,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],f=n[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],A=r[7],x=r[2],b=r[5],_=r[8];return i[0]=o*p+a*v+s*x,i[3]=o*m+a*y+s*b,i[6]=o*g+a*A+s*_,i[1]=l*p+c*v+u*x,i[4]=l*m+c*y+u*b,i[7]=l*g+c*A+u*_,i[2]=h*p+d*v+f*x,i[5]=h*m+d*y+f*b,i[8]=h*g+d*A+f*_,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8];return t*o*c-t*a*l-n*i*c+n*a*s+r*i*l-r*o*s}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=c*o-a*l,h=a*s-c*i,d=l*i-o*s,f=t*u+n*h+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return e[0]=u*p,e[1]=(r*l-c*n)*p,e[2]=(a*n-r*o)*p,e[3]=h*p,e[4]=(c*t-r*s)*p,e[5]=(r*i-a*t)*p,e[6]=d*p,e[7]=(n*s-l*t)*p,e[8]=(o*t-n*i)*p,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,o,a){const s=Math.cos(i),l=Math.sin(i);return this.set(n*s,n*l,-n*(s*o+l*a)+o+e,-r*l,r*s,-r*(-l*o+s*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(Ni.makeScale(e,t)),this}rotate(e){return this.premultiply(Ni.makeRotation(-e)),this}translate(e,t){return this.premultiply(Ni.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const Ni=new Ui;function ji(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const Gi={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:Uint8ClampedArray,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Qi(e,t){return new Gi[e](t)}function Hi(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function Vi(){const e=Hi("canvas");return e.style.display="block",e}const Wi={};function qi(e){e in Wi||(Wi[e]=!0,console.warn(e))}const Xi=(new Ui).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),Yi=(new Ui).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),Ji={[Lr]:{transfer:Ur,primaries:jr,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e,fromReference:e=>e},[kr]:{transfer:Nr,primaries:jr,luminanceCoefficients:[.2126,.7152,.0722],toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[zr]:{transfer:Ur,primaries:Gr,luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.applyMatrix3(Yi),fromReference:e=>e.applyMatrix3(Xi)},[Fr]:{transfer:Nr,primaries:Gr,luminanceCoefficients:[.2289,.6917,.0793],toReference:e=>e.convertSRGBToLinear().applyMatrix3(Yi),fromReference:e=>e.applyMatrix3(Xi).convertLinearToSRGB()}},Ki=new Set([Lr,zr]),Zi={enabled:!0,_workingColorSpace:Lr,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!Ki.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=Ji[t].toReference;return(0,Ji[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return Ji[e].primaries},getTransfer:function(e){return e===Or?Ur:Ji[e].transfer},getLuminanceCoefficients:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._workingColorSpace;return e.fromArray(Ji[t].luminanceCoefficients)}};function $i(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function eo(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let to;class no{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"===typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===to&&(to=Hi("canvas")),to.width=e.width,to.height=e.height;const n=to.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=to}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap){const t=Hi("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*$i(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*$i(t[e]/255)):t[e]=$i(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let ro=0;class io{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.isSource=!0,Object.defineProperty(this,"id",{value:ro++}),this.uuid=Pi(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(oo(r[t].image)):e.push(oo(r[t]))}else e=oo(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function oo(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap?no.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let ao=0;class so extends Ci{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:so.DEFAULT_IMAGE,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:so.DEFAULT_MAPPING,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Zt,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zt,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:an,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:cn,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Sn,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:hn,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:so.DEFAULT_ANISOTROPY,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Or;super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:ao++}),this.uuid=Pi(),this.name="",this.source=new io(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new zi(0,0),this.repeat=new zi(1,1),this.center=new zi(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Ui,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e){void 0===e&&(e=null),this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"===typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Vt)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Kt:e.x=e.x-Math.floor(e.x);break;case Zt:e.x=e.x<0?0:1;break;case $t:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case Kt:e.y=e.y-Math.floor(e.y);break;case Zt:e.y=e.y<0?0:1;break;case $t:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}so.DEFAULT_IMAGE=null,so.DEFAULT_MAPPING=Vt,so.DEFAULT_ANISOTROPY=1;class lo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;lo.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*i,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*i,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*i,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const o=.01,a=.1,s=e.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],f=s[9],p=s[2],m=s[6],g=s[10];if(Math.abs(c-h)<o&&Math.abs(u-p)<o&&Math.abs(f-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+p)<a&&Math.abs(f+m)<a&&Math.abs(l+d+g-3)<a)return this.set(1,0,0,0),this;t=Math.PI;const e=(l+1)/2,s=(d+1)/2,v=(g+1)/2,y=(c+h)/4,A=(u+p)/4,x=(f+m)/4;return e>s&&e>v?e<o?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=A/n):s>v?s<o?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(s),n=y/r,i=x/r):v<o?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(v),n=A/i,r=x/i),this.set(n,r,i,t),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(h-c)*(h-c));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(h-c)/v,this.w=Math.acos((l+d+g-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class co extends Ci{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new lo(0,0,e,t),this.scissorTest=!1,this.viewport=new lo(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:an,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const i=new so(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);i.flipY=!1,i.generateMipmaps=n.generateMipmaps,i.internalFormat=n.internalFormat,this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=i.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,r=e.textures.length;n<r;n++)this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new io(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class uo extends co{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this.isWebGLRenderTarget=!0}}class ho extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=en,this.minFilter=en,this.wrapR=Zt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class fo extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new ho(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class po extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=en,this.minFilter=en,this.wrapR=Zt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mo extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{}),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new po(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class go{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,o,a){let s=n[r+0],l=n[r+1],c=n[r+2],u=n[r+3];const h=i[o+0],d=i[o+1],f=i[o+2],p=i[o+3];if(0===a)return e[t+0]=s,e[t+1]=l,e[t+2]=c,void(e[t+3]=u);if(1===a)return e[t+0]=h,e[t+1]=d,e[t+2]=f,void(e[t+3]=p);if(u!==p||s!==h||l!==d||c!==f){let e=1-a;const t=s*h+l*d+c*f+u*p,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),o=Math.atan2(i,t*n);e=Math.sin(e*o)/i,a=Math.sin(a*o)/i}const i=a*n;if(s=s*e+h*i,l=l*e+d*i,c=c*e+f*i,u=u*e+p*i,e===1-a){const e=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=e,l*=e,c*=e,u*=e}}e[t]=s,e[t+1]=l,e[t+2]=c,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,o){const a=n[r],s=n[r+1],l=n[r+2],c=n[r+3],u=i[o],h=i[o+1],d=i[o+2],f=i[o+3];return e[t]=a*f+c*u+s*d-l*h,e[t+1]=s*f+c*h+l*u-a*d,e[t+2]=l*f+c*d+a*h-s*u,e[t+3]=c*f-a*u-s*h-l*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=e._x,r=e._y,i=e._z,o=e._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(r/2),u=a(i/2),h=s(n/2),d=s(r/2),f=s(i/2);switch(o){case"XYZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"YXZ":this._x=h*c*u+l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"ZXY":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u-h*d*f;break;case"ZYX":this._x=h*c*u-l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u+h*d*f;break;case"YZX":this._x=h*c*u+l*d*f,this._y=l*d*u+h*c*f,this._z=l*c*f-h*d*u,this._w=l*c*u-h*d*f;break;case"XZY":this._x=h*c*u-l*d*f,this._y=l*d*u-h*c*f,this._z=l*c*f+h*d*u,this._w=l*c*u+h*d*f;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],o=t[1],a=t[5],s=t[9],l=t[2],c=t[6],u=t[10],h=n+a+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(c-s)*e,this._y=(i-l)*e,this._z=(o-r)*e}else if(n>a&&n>u){const e=2*Math.sqrt(1+n-a-u);this._w=(c-s)/e,this._x=.25*e,this._y=(r+o)/e,this._z=(i+l)/e}else if(a>u){const e=2*Math.sqrt(1+a-n-u);this._w=(i-l)/e,this._x=(r+o)/e,this._y=.25*e,this._z=(s+c)/e}else{const e=2*Math.sqrt(1+u-n-a);this._w=(o-r)/e,this._x=(i+l)/e,this._y=(s+c)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Ri(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,o=e._w,a=t._x,s=t._y,l=t._z,c=t._w;return this._x=n*c+o*a+r*l-i*s,this._y=r*c+o*s+i*a-n*l,this._z=i*c+o*l+n*s-r*a,this._w=o*c-n*a-r*s-i*l,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+i*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=i,this;const s=1-a*a;if(s<=Number.EPSILON){const e=1-t;return this._w=e*o+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-t)*c)/l,h=Math.sin(t*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class vo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;vo.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Ao.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Ao.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,o=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*o,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*o,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,o=e.y,a=e.z,s=e.w,l=2*(o*r-a*n),c=2*(a*t-i*r),u=2*(i*n-o*t);return this.x=t+s*l+o*u-a*c,this.y=n+s*c+a*l-i*u,this.z=r+s*u+i*c-o*l,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,o=t.x,a=t.y,s=t.z;return this.x=r*s-i*a,this.y=i*o-n*s,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return yo.copy(this).projectOnVector(e),this.sub(yo)}reflect(e){return this.sub(yo.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Ri(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const yo=new vo,Ao=new go;class xo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo(1/0,1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo(-1/0,-1/0,-1/0);this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(_o.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(_o.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=_o.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,_o):_o.fromBufferAttribute(r,t),_o.applyMatrix4(e.matrixWorld),this.expandByPoint(_o);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),wo.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),wo.copy(n.boundingBox)),wo.applyMatrix4(e.matrixWorld),this.union(wo)}const r=e.children;for(let i=0,o=r.length;i<o;i++)this.expandByObject(r[i],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,_o),_o.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Bo),Po.subVectors(this.max,Bo),Eo.subVectors(e.a,Bo),So.subVectors(e.b,Bo),Co.subVectors(e.c,Bo),Mo.subVectors(So,Eo),To.subVectors(Co,So),Io.subVectors(Eo,Co);let t=[0,-Mo.z,Mo.y,0,-To.z,To.y,0,-Io.z,Io.y,Mo.z,0,-Mo.x,To.z,0,-To.x,Io.z,0,-Io.x,-Mo.y,Mo.x,0,-To.y,To.x,0,-Io.y,Io.x,0];return!!Oo(t,Eo,So,Co,Po)&&(t=[1,0,0,0,1,0,0,0,1],!!Oo(t,Eo,So,Co,Po)&&(Ro.crossVectors(Mo,To),t=[Ro.x,Ro.y,Ro.z],Oo(t,Eo,So,Co,Po)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,_o).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(_o).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(bo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),bo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),bo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),bo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),bo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),bo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),bo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),bo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(bo)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const bo=[new vo,new vo,new vo,new vo,new vo,new vo,new vo,new vo],_o=new vo,wo=new xo,Eo=new vo,So=new vo,Co=new vo,Mo=new vo,To=new vo,Io=new vo,Bo=new vo,Po=new vo,Ro=new vo,Do=new vo;function Oo(e,t,n,r,i){for(let o=0,a=e.length-3;o<=a;o+=3){Do.fromArray(e,o);const a=i.x*Math.abs(Do.x)+i.y*Math.abs(Do.y)+i.z*Math.abs(Do.z),s=t.dot(Do),l=n.dot(Do),c=r.dot(Do);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const ko=new xo,Lo=new vo,Fo=new vo;class zo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):ko.setFromPoints(e).getCenter(n);let r=0;for(let i=0,o=e.length;i<o;i++)r=Math.max(r,n.distanceToSquared(e[i]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Lo.subVectors(e,this.center);const t=Lo.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Lo,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):(Fo.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Lo.copy(e.center).add(Fo)),this.expandByPoint(Lo.copy(e.center).sub(Fo))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const Uo=new vo,No=new vo,jo=new vo,Go=new vo,Qo=new vo,Ho=new vo,Vo=new vo;class Wo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo(0,0,-1);this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Uo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Uo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Uo.copy(this.origin).addScaledVector(this.direction,t),Uo.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){No.copy(e).add(t).multiplyScalar(.5),jo.copy(t).sub(e).normalize(),Go.copy(this.origin).sub(No);const i=.5*e.distanceTo(t),o=-this.direction.dot(jo),a=Go.dot(this.direction),s=-Go.dot(jo),l=Go.lengthSq(),c=Math.abs(1-o*o);let u,h,d,f;if(c>0)if(u=o*s-a,h=o*a-s,f=i*c,u>=0)if(h>=-f)if(h<=f){const e=1/c;u*=e,h*=e,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-f?(u=Math.max(0,-(-o*i+a)),h=u>0?-i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l):h<=f?(u=0,h=Math.min(Math.max(-i,-s),i),d=h*(h+2*s)+l):(u=Math.max(0,-(o*i+a)),h=u>0?i:Math.min(Math.max(-i,-s),i),d=-u*u+h*(h+2*s)+l);else h=o>0?-i:i,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(No).addScaledVector(jo,h),d}intersectSphere(e,t){Uo.subVectors(e.center,this.origin);const n=Uo.dot(this.direction),r=Uo.dot(Uo)-n*n,i=e.radius*e.radius;if(r>i)return null;const o=Math.sqrt(i-r),a=n-o,s=n+o;return s<0?null:a<0?this.at(s,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(e.min.x-h.x)*l,r=(e.max.x-h.x)*l):(n=(e.max.x-h.x)*l,r=(e.min.x-h.x)*l),c>=0?(i=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(i=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),n>o||i>r?null:((i>n||isNaN(n))&&(n=i),(o<r||isNaN(r))&&(r=o),u>=0?(a=(e.min.z-h.z)*u,s=(e.max.z-h.z)*u):(a=(e.max.z-h.z)*u,s=(e.min.z-h.z)*u),n>s||a>r?null:((a>n||n!==n)&&(n=a),(s<r||r!==r)&&(r=s),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,Uo)}intersectTriangle(e,t,n,r,i){Qo.subVectors(t,e),Ho.subVectors(n,e),Vo.crossVectors(Qo,Ho);let o,a=this.direction.dot(Vo);if(a>0){if(r)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}Go.subVectors(this.origin,e);const s=o*this.direction.dot(Ho.crossVectors(Go,Ho));if(s<0)return null;const l=o*this.direction.dot(Qo.cross(Go));if(l<0)return null;if(s+l>a)return null;const c=-o*Go.dot(Vo);return c<0?null:this.at(c/a,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class qo{constructor(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){qo.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m)}set(e,t,n,r,i,o,a,s,l,c,u,h,d,f,p,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=c,g[10]=u,g[14]=h,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new qo).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/Xo.setFromMatrixColumn(e,0).length(),i=1/Xo.setFromMatrixColumn(e,1).length(),o=1/Xo.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(r),l=Math.sin(r),c=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=-s*u,t[8]=l,t[1]=n+r*l,t[5]=e-i*l,t[9]=-a*s,t[2]=i-e*l,t[6]=r+n*l,t[10]=o*s}else if("YXZ"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e+i*a,t[4]=r*a-n,t[8]=o*l,t[1]=o*u,t[5]=o*c,t[9]=-a,t[2]=n*a-r,t[6]=i+e*a,t[10]=o*s}else if("ZXY"===e.order){const e=s*c,n=s*u,r=l*c,i=l*u;t[0]=e-i*a,t[4]=-o*u,t[8]=r+n*a,t[1]=n+r*a,t[5]=o*c,t[9]=i-e*a,t[2]=-o*l,t[6]=a,t[10]=o*s}else if("ZYX"===e.order){const e=o*c,n=o*u,r=a*c,i=a*u;t[0]=s*c,t[4]=r*l-n,t[8]=e*l+i,t[1]=s*u,t[5]=i*l+e,t[9]=n*l-r,t[2]=-l,t[6]=a*s,t[10]=o*s}else if("YZX"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=o*c,t[9]=-a*c,t[2]=-l*c,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=o*s,n=o*l,r=a*s,i=a*l;t[0]=s*c,t[4]=-u,t[8]=l*c,t[1]=e*u+i,t[5]=o*c,t[9]=n*u-r,t[2]=r*u-n,t[6]=a*c,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Jo,e,Ko)}lookAt(e,t,n){const r=this.elements;return ea.subVectors(e,t),0===ea.lengthSq()&&(ea.z=1),ea.normalize(),Zo.crossVectors(n,ea),0===Zo.lengthSq()&&(1===Math.abs(n.z)?ea.x+=1e-4:ea.z+=1e-4,ea.normalize(),Zo.crossVectors(n,ea)),Zo.normalize(),$o.crossVectors(ea,Zo),r[0]=Zo.x,r[4]=$o.x,r[8]=ea.x,r[1]=Zo.y,r[5]=$o.y,r[9]=ea.y,r[2]=Zo.z,r[6]=$o.z,r[10]=ea.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],f=n[2],p=n[6],m=n[10],g=n[14],v=n[3],y=n[7],A=n[11],x=n[15],b=r[0],_=r[4],w=r[8],E=r[12],S=r[1],C=r[5],M=r[9],T=r[13],I=r[2],B=r[6],P=r[10],R=r[14],D=r[3],O=r[7],k=r[11],L=r[15];return i[0]=o*b+a*S+s*I+l*D,i[4]=o*_+a*C+s*B+l*O,i[8]=o*w+a*M+s*P+l*k,i[12]=o*E+a*T+s*R+l*L,i[1]=c*b+u*S+h*I+d*D,i[5]=c*_+u*C+h*B+d*O,i[9]=c*w+u*M+h*P+d*k,i[13]=c*E+u*T+h*R+d*L,i[2]=f*b+p*S+m*I+g*D,i[6]=f*_+p*C+m*B+g*O,i[10]=f*w+p*M+m*P+g*k,i[14]=f*E+p*T+m*R+g*L,i[3]=v*b+y*S+A*I+x*D,i[7]=v*_+y*C+A*B+x*O,i[11]=v*w+y*M+A*P+x*k,i[15]=v*E+y*T+A*R+x*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],o=e[1],a=e[5],s=e[9],l=e[13],c=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*s*u-r*l*u-i*a*h+n*l*h+r*a*d-n*s*d)+e[7]*(+t*s*d-t*l*h+i*o*h-r*o*d+r*l*c-i*s*c)+e[11]*(+t*l*u-t*a*d-i*o*u+n*o*d+i*a*c-n*l*c)+e[15]*(-r*a*c-t*s*u+t*a*h+r*o*u-n*o*h+n*s*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],c=e[8],u=e[9],h=e[10],d=e[11],f=e[12],p=e[13],m=e[14],g=e[15],v=u*m*l-p*h*l+p*s*d-a*m*d-u*s*g+a*h*g,y=f*h*l-c*m*l-f*s*d+o*m*d+c*s*g-o*h*g,A=c*p*l-f*u*l+f*a*d-o*p*d-c*a*g+o*u*g,x=f*u*s-c*p*s-f*a*h+o*p*h+c*a*m-o*u*m,b=t*v+n*y+r*A+i*x;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/b;return e[0]=v*_,e[1]=(p*h*i-u*m*i-p*r*d+n*m*d+u*r*g-n*h*g)*_,e[2]=(a*m*i-p*s*i+p*r*l-n*m*l-a*r*g+n*s*g)*_,e[3]=(u*s*i-a*h*i-u*r*l+n*h*l+a*r*d-n*s*d)*_,e[4]=y*_,e[5]=(c*m*i-f*h*i+f*r*d-t*m*d-c*r*g+t*h*g)*_,e[6]=(f*s*i-o*m*i-f*r*l+t*m*l+o*r*g-t*s*g)*_,e[7]=(o*h*i-c*s*i+c*r*l-t*h*l-o*r*d+t*s*d)*_,e[8]=A*_,e[9]=(f*u*i-c*p*i-f*n*d+t*p*d+c*n*g-t*u*g)*_,e[10]=(o*p*i-f*a*i+f*n*l-t*p*l-o*n*g+t*a*g)*_,e[11]=(c*a*i-o*u*i-c*n*l+t*u*l+o*n*d-t*a*d)*_,e[12]=x*_,e[13]=(c*p*r-f*u*r+f*n*h-t*p*h-c*n*m+t*u*m)*_,e[14]=(f*a*r-o*p*r-f*n*s+t*p*s+o*n*m-t*a*m)*_,e[15]=(o*u*r-c*a*r+c*n*s-t*u*s-o*n*h+t*a*h)*_,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,o=e.x,a=e.y,s=e.z,l=i*o,c=i*a;return this.set(l*o+n,l*a-r*s,l*s+r*a,0,l*a+r*s,c*a+n,c*s-r*o,0,l*s-r*a,c*s+r*o,i*s*s+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,o){return this.set(1,n,i,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,o=t._y,a=t._z,s=t._w,l=i+i,c=o+o,u=a+a,h=i*l,d=i*c,f=i*u,p=o*c,m=o*u,g=a*u,v=s*l,y=s*c,A=s*u,x=n.x,b=n.y,_=n.z;return r[0]=(1-(p+g))*x,r[1]=(d+A)*x,r[2]=(f-y)*x,r[3]=0,r[4]=(d-A)*b,r[5]=(1-(h+g))*b,r[6]=(m+v)*b,r[7]=0,r[8]=(f+y)*_,r[9]=(m-v)*_,r[10]=(1-(h+p))*_,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=Xo.set(r[0],r[1],r[2]).length();const o=Xo.set(r[4],r[5],r[6]).length(),a=Xo.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],Yo.copy(this);const s=1/i,l=1/o,c=1/a;return Yo.elements[0]*=s,Yo.elements[1]*=s,Yo.elements[2]*=s,Yo.elements[4]*=l,Yo.elements[5]*=l,Yo.elements[6]*=l,Yo.elements[8]*=c,Yo.elements[9]*=c,Yo.elements[10]*=c,t.setFromRotationMatrix(Yo),n.x=i,n.y=o,n.z=a,this}makePerspective(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ei;const s=this.elements,l=2*i/(t-e),c=2*i/(n-r),u=(t+e)/(t-e),h=(n+r)/(n-r);let d,f;if(a===Ei)d=-(o+i)/(o-i),f=-2*o*i/(o-i);else{if(a!==Si)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);d=-o/(o-i),f=-o*i/(o-i)}return s[0]=l,s[4]=0,s[8]=u,s[12]=0,s[1]=0,s[5]=c,s[9]=h,s[13]=0,s[2]=0,s[6]=0,s[10]=d,s[14]=f,s[3]=0,s[7]=0,s[11]=-1,s[15]=0,this}makeOrthographic(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Ei;const s=this.elements,l=1/(t-e),c=1/(n-r),u=1/(o-i),h=(t+e)*l,d=(n+r)*c;let f,p;if(a===Ei)f=(o+i)*u,p=-2*u;else{if(a!==Si)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);f=i*u,p=-1*u}return s[0]=2*l,s[4]=0,s[8]=0,s[12]=-h,s[1]=0,s[5]=2*c,s[9]=0,s[13]=-d,s[2]=0,s[6]=0,s[10]=p,s[14]=-f,s[3]=0,s[7]=0,s[11]=0,s[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const Xo=new vo,Yo=new qo,Jo=new vo(0,0,0),Ko=new vo(1,1,1),Zo=new vo,$o=new vo,ea=new vo,ta=new qo,na=new go;class ra{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ra.DEFAULT_ORDER;this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this._order;return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order,n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=e.elements,i=r[0],o=r[4],a=r[8],s=r[1],l=r[5],c=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Ri(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,d),this._z=Math.atan2(-o,i)):(this._x=Math.atan2(h,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ri(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,d),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Ri(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,i));break;case"ZYX":this._y=Math.asin(-Ri(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(s,i)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Ri(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-c,l),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(a,d));break;case"XZY":this._z=Math.asin(-Ri(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,i)):(this._x=Math.atan2(-c,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return ta.makeRotationFromQuaternion(e),this.setFromRotationMatrix(ta,t,n)}setFromVector3(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._order;return this.set(e.x,e.y,e.z,t)}reorder(e){return na.setFromEuler(this),this.setFromQuaternion(na,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}ra.DEFAULT_ORDER="XYZ";class ia{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return 0!==(this.mask&1<<e)}}let oa=0;const aa=new vo,sa=new go,la=new qo,ca=new vo,ua=new vo,ha=new vo,da=new go,fa=new vo(1,0,0),pa=new vo(0,1,0),ma=new vo(0,0,1),ga={type:"added"},va={type:"removed"},ya={type:"childadded",child:null},Aa={type:"childremoved",child:null};class xa extends Ci{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:oa++}),this.uuid=Pi(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=xa.DEFAULT_UP.clone();const e=new vo,t=new ra,n=new go,r=new vo(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new qo},normalMatrix:{value:new Ui}}),this.matrix=new qo,this.matrixWorld=new qo,this.matrixAutoUpdate=xa.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=xa.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new ia,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return sa.setFromAxisAngle(e,t),this.quaternion.multiply(sa),this}rotateOnWorldAxis(e,t){return sa.setFromAxisAngle(e,t),this.quaternion.premultiply(sa),this}rotateX(e){return this.rotateOnAxis(fa,e)}rotateY(e){return this.rotateOnAxis(pa,e)}rotateZ(e){return this.rotateOnAxis(ma,e)}translateOnAxis(e,t){return aa.copy(e).applyQuaternion(this.quaternion),this.position.add(aa.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(fa,e)}translateY(e){return this.translateOnAxis(pa,e)}translateZ(e){return this.translateOnAxis(ma,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(la.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?ca.copy(e):ca.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),ua.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?la.lookAt(ua,ca,this.up):la.lookAt(ca,ua,this.up),this.quaternion.setFromRotationMatrix(la),r&&(la.extractRotation(r.matrixWorld),sa.setFromRotationMatrix(la),this.quaternion.premultiply(sa.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ga),ya.child=e,this.dispatchEvent(ya),ya.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(va),Aa.child=e,this.dispatchEvent(Aa),Aa.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),la.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),la.multiply(e.parent.matrixWorld)),e.applyMatrix4(la),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ga),ya.child=e,this.dispatchEvent(ya),ya.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];this[e]===t&&n.push(this);const r=this.children;for(let i=0,o=r.length;i<o;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ua,e,ha),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(ua,da,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){t[n].updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){e[t].updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"===typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=o(e.geometries),r=o(e.materials),i=o(e.textures),a=o(e.images),s=o(e.shapes),l=o(e.skeletons),c=o(e.animations),u=o(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c),u.length>0&&(n.nodes=u)}return n.object=r,n;function o(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let n=0;n<e.children.length;n++){const t=e.children[n];this.add(t.clone())}return this}}xa.DEFAULT_UP=new vo(0,1,0),xa.DEFAULT_MATRIX_AUTO_UPDATE=!0,xa.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ba=new vo,_a=new vo,wa=new vo,Ea=new vo,Sa=new vo,Ca=new vo,Ma=new vo,Ta=new vo,Ia=new vo,Ba=new vo;class Pa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vo;this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),ba.subVectors(e,t),r.cross(ba);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){ba.subVectors(r,t),_a.subVectors(n,t),wa.subVectors(e,t);const o=ba.dot(ba),a=ba.dot(_a),s=ba.dot(wa),l=_a.dot(_a),c=_a.dot(wa),u=o*l-a*a;if(0===u)return i.set(0,0,0),null;const h=1/u,d=(l*s-a*c)*h,f=(o*c-a*s)*h;return i.set(1-d-f,f,d)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,Ea)&&(Ea.x>=0&&Ea.y>=0&&Ea.x+Ea.y<=1)}static getInterpolation(e,t,n,r,i,o,a,s){return null===this.getBarycoord(e,t,n,r,Ea)?(s.x=0,s.y=0,"z"in s&&(s.z=0),"w"in s&&(s.w=0),null):(s.setScalar(0),s.addScaledVector(i,Ea.x),s.addScaledVector(o,Ea.y),s.addScaledVector(a,Ea.z),s)}static isFrontFacing(e,t,n,r){return ba.subVectors(n,t),_a.subVectors(e,t),ba.cross(_a).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ba.subVectors(this.c,this.b),_a.subVectors(this.a,this.b),.5*ba.cross(_a).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Pa.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Pa.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return Pa.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Pa.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Pa.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let o,a;Sa.subVectors(r,n),Ca.subVectors(i,n),Ta.subVectors(e,n);const s=Sa.dot(Ta),l=Ca.dot(Ta);if(s<=0&&l<=0)return t.copy(n);Ia.subVectors(e,r);const c=Sa.dot(Ia),u=Ca.dot(Ia);if(c>=0&&u<=c)return t.copy(r);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),t.copy(n).addScaledVector(Sa,o);Ba.subVectors(e,i);const d=Sa.dot(Ba),f=Ca.dot(Ba);if(f>=0&&d<=f)return t.copy(i);const p=d*l-s*f;if(p<=0&&l>=0&&f<=0)return a=l/(l-f),t.copy(n).addScaledVector(Ca,a);const m=c*f-d*u;if(m<=0&&u-c>=0&&d-f>=0)return Ma.subVectors(i,r),a=(u-c)/(u-c+(d-f)),t.copy(r).addScaledVector(Ma,a);const g=1/(m+p+h);return o=p*g,a=h*g,t.copy(n).addScaledVector(Sa,o).addScaledVector(Ca,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Ra={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Da={h:0,s:0,l:0},Oa={h:0,s:0,l:0};function ka(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class La{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr;return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,Zi.toWorkingColorSpace(this,t),this}setRGB(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zi.workingColorSpace;return this.r=e,this.g=t,this.b=n,Zi.toWorkingColorSpace(this,r),this}setHSL(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Zi.workingColorSpace;if(e=Di(e,1),t=Ri(t,0,1),n=Ri(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=ka(i,r,e+1/3),this.g=ka(i,r,e),this.b=ka(i,r,e-1/3)}return Zi.toWorkingColorSpace(this,r),this}setStyle(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr;function r(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}if(t=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const o=t[1],a=t[2];switch(o){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,n);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,n);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return r(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(t=/^\#([A-Fa-f\d]+)$/.exec(e)){const r=t[1],i=r.length;if(3===i)return this.setRGB(parseInt(r.charAt(0),16)/15,parseInt(r.charAt(1),16)/15,parseInt(r.charAt(2),16)/15,n);if(6===i)return this.setHex(parseInt(r,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:kr;const n=Ra[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=$i(e.r),this.g=$i(e.g),this.b=$i(e.b),this}copyLinearToSRGB(e){return this.r=eo(e.r),this.g=eo(e.g),this.b=eo(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr;return Zi.fromWorkingColorSpace(Fa.copy(this),e),65536*Math.round(Ri(255*Fa.r,0,255))+256*Math.round(Ri(255*Fa.g,0,255))+Math.round(Ri(255*Fa.b,0,255))}getHexString(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr;return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zi.workingColorSpace;Zi.fromWorkingColorSpace(Fa.copy(this),t);const n=Fa.r,r=Fa.g,i=Fa.b,o=Math.max(n,r,i),a=Math.min(n,r,i);let s,l;const c=(a+o)/2;if(a===o)s=0,l=0;else{const e=o-a;switch(l=c<=.5?e/(o+a):e/(2-o-a),o){case n:s=(r-i)/e+(r<i?6:0);break;case r:s=(i-n)/e+2;break;case i:s=(n-r)/e+4}s/=6}return e.h=s,e.s=l,e.l=c,e}getRGB(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Zi.workingColorSpace;return Zi.fromWorkingColorSpace(Fa.copy(this),t),e.r=Fa.r,e.g=Fa.g,e.b=Fa.b,e}getStyle(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kr;Zi.fromWorkingColorSpace(Fa.copy(this),e);const t=Fa.r,n=Fa.g,r=Fa.b;return e!==kr?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(Da),this.setHSL(Da.h+e,Da.s+t,Da.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Da),e.getHSL(Oa);const n=Oi(Da.h,Oa.h,t),r=Oi(Da.s,Oa.s,t),i=Oi(Da.l,Oa.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Fa=new La;La.NAMES=Ra;let za=0;class Ua extends Ci{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:za++}),this.uuid=Pi(),this.name="",this.type="Material",this.blending=$e,this.side=Ye,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ft,this.blendDst=pt,this.blendEquation=it,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new La(0,0,0),this.blendAlpha=0,this.depthFunc=Mt,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ii,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hr,this.stencilZFail=Hr,this.stencilZPass=Hr,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!==e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"===typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==$e&&(n.blending=this.blending),this.side!==Ye&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==ft&&(n.blendSrc=this.blendSrc),this.blendDst!==pt&&(n.blendDst=this.blendDst),this.blendEquation!==it&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==Mt&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ii&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Hr&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Hr&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Hr&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Na extends Ua{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new La(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ra,this.combine=Rt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ja=Ga();function Ga(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let l=0;l<256;++l){const e=l-127;e<-27?(r[l]=0,r[256|l]=32768,i[l]=24,i[256|l]=24):e<-14?(r[l]=1024>>-e-14,r[256|l]=1024>>-e-14|32768,i[l]=-e-1,i[256|l]=-e-1):e<=15?(r[l]=e+15<<10,r[256|l]=e+15<<10|32768,i[l]=13,i[256|l]=13):e<128?(r[l]=31744,r[256|l]=64512,i[l]=24,i[256|l]=24):(r[l]=31744,r[256|l]=64512,i[l]=13,i[256|l]=13)}const o=new Uint32Array(2048),a=new Uint32Array(64),s=new Uint32Array(64);for(let l=1;l<1024;++l){let e=l<<13,t=0;for(;0===(8388608&e);)e<<=1,t-=8388608;e&=-8388609,t+=947912704,o[l]=e|t}for(let l=1024;l<2048;++l)o[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)a[l]=l<<23;a[31]=1199570944,a[32]=2147483648;for(let l=33;l<63;++l)a[l]=2147483648+(l-32<<23);a[63]=3347054592;for(let l=1;l<64;++l)32!==l&&(s[l]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:o,exponentTable:a,offsetTable:s}}function Qa(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Ri(e,-65504,65504),ja.floatView[0]=e;const t=ja.uint32View[0],n=t>>23&511;return ja.baseTable[n]+((8388607&t)>>ja.shiftTable[n])}function Ha(e){const t=e>>10;return ja.uint32View[0]=ja.mantissaTable[ja.offsetTable[t]+(1023&e)]+ja.exponentTable[t],ja.floatView[0]}const Va={toHalfFloat:Qa,fromHalfFloat:Ha},Wa=new vo,qa=new zi;class Xa{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=fi,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=vn,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return qi("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)qa.fromBufferAttribute(this,t),qa.applyMatrix3(e),this.setXY(t,qa.x,qa.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)Wa.fromBufferAttribute(this,t),Wa.applyMatrix3(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Wa.fromBufferAttribute(this,t),Wa.applyMatrix4(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Wa.fromBufferAttribute(this,t),Wa.applyNormalMatrix(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Wa.fromBufferAttribute(this,t),Wa.transformDirection(e),this.setXYZ(t,Wa.x,Wa.y,Wa.z);return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=ki(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Li(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=ki(t,this.array)),t}setX(e,t){return this.normalized&&(t=Li(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=ki(t,this.array)),t}setY(e,t){return this.normalized&&(t=Li(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=ki(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Li(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=ki(t,this.array)),t}setW(e,t){return this.normalized&&(t=Li(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Li(t,this.array),n=Li(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Li(t,this.array),n=Li(n,this.array),r=Li(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Li(t,this.array),n=Li(n,this.array),r=Li(r,this.array),i=Li(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==fi&&(e.usage=this.usage),e}}class Ya extends Xa{constructor(e,t,n){super(new Int8Array(e),t,n)}}class Ja extends Xa{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class Ka extends Xa{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class Za extends Xa{constructor(e,t,n){super(new Int16Array(e),t,n)}}class $a extends Xa{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class es extends Xa{constructor(e,t,n){super(new Int32Array(e),t,n)}}class ts extends Xa{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class ns extends Xa{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Ha(this.array[e*this.itemSize]);return this.normalized&&(t=ki(t,this.array)),t}setX(e,t){return this.normalized&&(t=Li(t,this.array)),this.array[e*this.itemSize]=Qa(t),this}getY(e){let t=Ha(this.array[e*this.itemSize+1]);return this.normalized&&(t=ki(t,this.array)),t}setY(e,t){return this.normalized&&(t=Li(t,this.array)),this.array[e*this.itemSize+1]=Qa(t),this}getZ(e){let t=Ha(this.array[e*this.itemSize+2]);return this.normalized&&(t=ki(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Li(t,this.array)),this.array[e*this.itemSize+2]=Qa(t),this}getW(e){let t=Ha(this.array[e*this.itemSize+3]);return this.normalized&&(t=ki(t,this.array)),t}setW(e,t){return this.normalized&&(t=Li(t,this.array)),this.array[e*this.itemSize+3]=Qa(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Li(t,this.array),n=Li(n,this.array)),this.array[e+0]=Qa(t),this.array[e+1]=Qa(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Li(t,this.array),n=Li(n,this.array),r=Li(r,this.array)),this.array[e+0]=Qa(t),this.array[e+1]=Qa(n),this.array[e+2]=Qa(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=Li(t,this.array),n=Li(n,this.array),r=Li(r,this.array),i=Li(i,this.array)),this.array[e+0]=Qa(t),this.array[e+1]=Qa(n),this.array[e+2]=Qa(r),this.array[e+3]=Qa(i),this}}class rs extends Xa{constructor(e,t,n){super(new Float32Array(e),t,n)}}let is=0;const os=new qo,as=new xa,ss=new vo,ls=new xo,cs=new xo,us=new vo;class hs extends Ci{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:is++}),this.uuid=Pi(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(ji(e)?ts:$a)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new Ui).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return os.makeRotationFromQuaternion(e),this.applyMatrix4(os),this}rotateX(e){return os.makeRotationX(e),this.applyMatrix4(os),this}rotateY(e){return os.makeRotationY(e),this.applyMatrix4(os),this}rotateZ(e){return os.makeRotationZ(e),this.applyMatrix4(os),this}translate(e,t,n){return os.makeTranslation(e,t,n),this.applyMatrix4(os),this}scale(e,t,n){return os.makeScale(e,t,n),this.applyMatrix4(os),this}lookAt(e){return as.lookAt(e),as.updateMatrix(),this.applyMatrix4(as.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(ss).negate(),this.translate(ss.x,ss.y,ss.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new rs(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new xo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new vo(-1/0,-1/0,-1/0),new vo(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const e=t[n];ls.setFromBufferAttribute(e),this.morphTargetsRelative?(us.addVectors(this.boundingBox.min,ls.min),this.boundingBox.expandByPoint(us),us.addVectors(this.boundingBox.max,ls.max),this.boundingBox.expandByPoint(us)):(this.boundingBox.expandByPoint(ls.min),this.boundingBox.expandByPoint(ls.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zo);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new vo,1/0);if(e){const n=this.boundingSphere.center;if(ls.setFromBufferAttribute(e),t)for(let e=0,i=t.length;e<i;e++){const n=t[e];cs.setFromBufferAttribute(n),this.morphTargetsRelative?(us.addVectors(ls.min,cs.min),ls.expandByPoint(us),us.addVectors(ls.max,cs.max),ls.expandByPoint(us)):(ls.expandByPoint(cs.min),ls.expandByPoint(cs.max))}ls.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)us.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(us));if(t)for(let i=0,o=t.length;i<o;i++){const o=t[i],a=this.morphTargetsRelative;for(let t=0,i=o.count;t<i;t++)us.fromBufferAttribute(o,t),a&&(ss.fromBufferAttribute(e,t),us.add(ss)),r=Math.max(r,n.distanceToSquared(us))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new Xa(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],s=[];for(let w=0;w<n.count;w++)a[w]=new vo,s[w]=new vo;const l=new vo,c=new vo,u=new vo,h=new zi,d=new zi,f=new zi,p=new vo,m=new vo;function g(e,t,r){l.fromBufferAttribute(n,e),c.fromBufferAttribute(n,t),u.fromBufferAttribute(n,r),h.fromBufferAttribute(i,e),d.fromBufferAttribute(i,t),f.fromBufferAttribute(i,r),c.sub(l),u.sub(l),d.sub(h),f.sub(h);const o=1/(d.x*f.y-f.x*d.y);isFinite(o)&&(p.copy(c).multiplyScalar(f.y).addScaledVector(u,-d.y).multiplyScalar(o),m.copy(u).multiplyScalar(d.x).addScaledVector(c,-f.x).multiplyScalar(o),a[e].add(p),a[t].add(p),a[r].add(p),s[e].add(m),s[t].add(m),s[r].add(m))}let v=this.groups;0===v.length&&(v=[{start:0,count:e.count}]);for(let w=0,E=v.length;w<E;++w){const t=v[w],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)g(e.getX(r+0),e.getX(r+1),e.getX(r+2))}const y=new vo,A=new vo,x=new vo,b=new vo;function _(e){x.fromBufferAttribute(r,e),b.copy(x);const t=a[e];y.copy(t),y.sub(x.multiplyScalar(x.dot(t))).normalize(),A.crossVectors(b,t);const n=A.dot(s[e])<0?-1:1;o.setXYZW(e,y.x,y.y,y.z,n)}for(let w=0,E=v.length;w<E;++w){const t=v[w],n=t.start;for(let r=n,i=n+t.count;r<i;r+=3)_(e.getX(r+0)),_(e.getX(r+1)),_(e.getX(r+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new Xa(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new vo,i=new vo,o=new vo,a=new vo,s=new vo,l=new vo,c=new vo,u=new vo;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),f=e.getX(h+1),p=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,f),o.fromBufferAttribute(t,p),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,f),l.fromBufferAttribute(n,p),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(f,s.x,s.y,s.z),n.setXYZ(p,l.x,l.y,l.z)}else for(let e=0,h=t.count;e<h;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),o.fromBufferAttribute(t,e+2),c.subVectors(o,i),u.subVectors(r,i),c.cross(u),n.setXYZ(e+0,c.x,c.y,c.z),n.setXYZ(e+1,c.x,c.y,c.z),n.setXYZ(e+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)us.fromBufferAttribute(e,t),us.normalize(),e.setXYZ(t,us.x,us.y,us.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,o=new n.constructor(t.length*r);let a=0,s=0;for(let l=0,c=t.length;l<c;l++){a=e.isInterleavedBufferAttribute?t[l]*e.data.stride+e.offset:t[l]*r;for(let e=0;e<r;e++)o[s++]=n[a++]}return new Xa(o,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new hs,n=this.index.array,r=this.attributes;for(const a in r){const i=e(r[a],n);t.setAttribute(a,i)}const i=this.morphAttributes;for(const a in i){const r=[],o=i[a];for(let t=0,i=o.length;t<i;t++){const i=e(o[t],n);r.push(i)}t.morphAttributes[a]=r}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const e=o[a];t.addGroup(e.start,e.count,e.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const s in n){const t=n[s];e.data.attributes[s]=t.toJSON(e.data)}const r={};let i=!1;for(const s in this.morphAttributes){const t=this.morphAttributes[s],n=[];for(let r=0,i=t.length;r<i;r++){const i=t[r];n.push(i.toJSON(e.data))}n.length>0&&(r[s]=n,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const l in r){const e=r[l];this.setAttribute(l,e.clone(t))}const i=e.morphAttributes;for(const l in i){const e=[],n=i[l];for(let r=0,i=n.length;r<i;r++)e.push(n[r].clone(t));this.morphAttributes[l]=e}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let l=0,c=o.length;l<c;l++){const e=o[l];this.addGroup(e.start,e.count,e.materialIndex)}const a=e.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=e.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ds=new qo,fs=new Wo,ps=new zo,ms=new vo,gs=new vo,vs=new vo,ys=new vo,As=new vo,xs=new vo,bs=new zi,_s=new zi,ws=new zi,Es=new vo,Ss=new vo,Cs=new vo,Ms=new vo,Ts=new vo;class Is extends xa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Na;super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(i&&a){xs.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=a[n],s=i[n];0!==r&&(As.fromBufferAttribute(s,e),o?xs.addScaledVector(As,r):xs.addScaledVector(As.sub(t),r))}t.add(xs)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),ps.copy(n.boundingSphere),ps.applyMatrix4(i),fs.copy(e.ray).recast(e.near),!1===ps.containsPoint(fs.origin)){if(null===fs.intersectSphere(ps,ms))return;if(fs.origin.distanceToSquared(ms)>(e.far-e.near)**2)return}ds.copy(i).invert(),fs.copy(e.ray).applyMatrix4(ds),null!==n.boundingBox&&!1===fs.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,fs)}}_computeIntersections(e,t,n){let r;const i=this.geometry,o=this.material,a=i.index,s=i.attributes.position,l=i.attributes.uv,c=i.attributes.uv1,u=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==a)if(Array.isArray(o))for(let f=0,p=h.length;f<p;f++){const i=h[f],s=o[i.materialIndex];for(let o=Math.max(i.start,d.start),h=Math.min(a.count,Math.min(i.start+i.count,d.start+d.count));o<h;o+=3){r=Bs(this,s,e,n,l,c,u,a.getX(o),a.getX(o+1),a.getX(o+2)),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),s=Math.min(a.count,d.start+d.count);i<s;i+=3){r=Bs(this,o,e,n,l,c,u,a.getX(i),a.getX(i+1),a.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}else if(void 0!==s)if(Array.isArray(o))for(let f=0,p=h.length;f<p;f++){const i=h[f],a=o[i.materialIndex];for(let o=Math.max(i.start,d.start),h=Math.min(s.count,Math.min(i.start+i.count,d.start+d.count));o<h;o+=3){r=Bs(this,a,e,n,l,c,u,o,o+1,o+2),r&&(r.faceIndex=Math.floor(o/3),r.face.materialIndex=i.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),a=Math.min(s.count,d.start+d.count);i<a;i+=3){r=Bs(this,o,e,n,l,c,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}}}function Bs(e,t,n,r,i,o,a,s,l,c){e.getVertexPosition(s,gs),e.getVertexPosition(l,vs),e.getVertexPosition(c,ys);const u=function(e,t,n,r,i,o,a,s){let l;if(l=t.side===Je?r.intersectTriangle(a,o,i,!0,s):r.intersectTriangle(i,o,a,t.side===Ye,s),null===l)return null;Ts.copy(s),Ts.applyMatrix4(e.matrixWorld);const c=n.ray.origin.distanceTo(Ts);return c<n.near||c>n.far?null:{distance:c,point:Ts.clone(),object:e}}(e,t,n,r,gs,vs,ys,Ms);if(u){i&&(bs.fromBufferAttribute(i,s),_s.fromBufferAttribute(i,l),ws.fromBufferAttribute(i,c),u.uv=Pa.getInterpolation(Ms,gs,vs,ys,bs,_s,ws,new zi)),o&&(bs.fromBufferAttribute(o,s),_s.fromBufferAttribute(o,l),ws.fromBufferAttribute(o,c),u.uv1=Pa.getInterpolation(Ms,gs,vs,ys,bs,_s,ws,new zi)),a&&(Es.fromBufferAttribute(a,s),Ss.fromBufferAttribute(a,l),Cs.fromBufferAttribute(a,c),u.normal=Pa.getInterpolation(Ms,gs,vs,ys,Es,Ss,Cs,new vo),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const e={a:s,b:l,c:c,normal:new vo,materialIndex:0};Pa.getNormal(gs,vs,ys,e.normal),u.face=e}return u}class Ps extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1;super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:o};const a=this;r=Math.floor(r),i=Math.floor(i),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function f(e,t,n,r,i,o,f,p,m,g,v){const y=o/m,A=f/g,x=o/2,b=f/2,_=p/2,w=m+1,E=g+1;let S=0,C=0;const M=new vo;for(let a=0;a<E;a++){const o=a*A-b;for(let s=0;s<w;s++){const h=s*y-x;M[e]=h*r,M[t]=o*i,M[n]=_,l.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=p>0?1:-1,c.push(M.x,M.y,M.z),u.push(s/m),u.push(1-a/g),S+=1}}for(let a=0;a<g;a++)for(let e=0;e<m;e++){const t=h+e+w*a,n=h+e+w*(a+1),r=h+(e+1)+w*(a+1),i=h+(e+1)+w*a;s.push(t,n,i),s.push(n,r,i),C+=6}a.addGroup(d,C,v),d+=C,h+=S}f("z","y","x",-1,-1,n,t,e,o,i,0),f("z","y","x",1,-1,n,t,-e,o,i,1),f("x","z","y",1,1,e,n,t,r,o,2),f("x","z","y",1,-1,e,n,-t,r,o,3),f("x","y","z",1,-1,e,t,n,r,i,4),f("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(s),this.setAttribute("position",new rs(l,3)),this.setAttribute("normal",new rs(c,3)),this.setAttribute("uv",new rs(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ps(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function Rs(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Ds(e){const t={};for(let n=0;n<e.length;n++){const r=Rs(e[n]);for(const e in r)t[e]=r[e]}return t}function Os(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:Zi.workingColorSpace}const ks={clone:Rs,merge:Ds};class Ls extends Ua{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Rs(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const n=this.uniforms[r].value;n&&n.isTexture?t.uniforms[r]={type:"t",value:n.toJSON(e).uuid}:n&&n.isColor?t.uniforms[r]={type:"c",value:n.getHex()}:n&&n.isVector2?t.uniforms[r]={type:"v2",value:n.toArray()}:n&&n.isVector3?t.uniforms[r]={type:"v3",value:n.toArray()}:n&&n.isVector4?t.uniforms[r]={type:"v4",value:n.toArray()}:n&&n.isMatrix3?t.uniforms[r]={type:"m3",value:n.toArray()}:n&&n.isMatrix4?t.uniforms[r]={type:"m4",value:n.toArray()}:t.uniforms[r]={value:n}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)!0===this.extensions[r]&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class Fs extends xa{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new qo,this.projectionMatrix=new qo,this.projectionMatrixInverse=new qo,this.coordinateSystem=Ei}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const zs=new vo,Us=new zi,Ns=new zi;class js extends Fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2e3;super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Bi*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Ii*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Bi*Math.atan(Math.tan(.5*Ii*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){zs.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(zs.x,zs.y).multiplyScalar(-e/zs.z),zs.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(zs.x,zs.y).multiplyScalar(-e/zs.z)}getViewSize(e,t){return this.getViewBounds(e,Us,Ns),t.subVectors(Ns,Us)}setViewOffset(e,t,n,r,i,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Ii*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const o=this.view;if(null!==this.view&&this.view.enabled){const e=o.fullWidth,a=o.fullHeight;i+=o.offsetX*r/e,t-=o.offsetY*n/a,r*=o.width/e,n*=o.height/a}const a=this.filmOffset;0!==a&&(i+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Gs=-90;class Qs extends xa{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new js(Gs,1,e,t);r.layers=this.layers,this.add(r);const i=new js(Gs,1,e,t);i.layers=this.layers,this.add(i);const o=new js(Gs,1,e,t);o.layers=this.layers,this.add(o);const a=new js(Gs,1,e,t);a.layers=this.layers,this.add(a);const s=new js(Gs,1,e,t);s.layers=this.layers,this.add(s);const l=new js(Gs,1,e,t);l.layers=this.layers,this.add(l)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,o,a,s]=t;for(const l of t)this.remove(l);if(e===Ei)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),s.up.set(0,1,0),s.lookAt(0,0,-1);else{if(e!==Si)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),s.up.set(0,-1,0),s.lookAt(0,0,-1)}for(const l of t)this.add(l),l.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,o,a,s,l,c]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),f=e.xr.enabled;e.xr.enabled=!1;const p=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,s),e.setRenderTarget(n,4,r),e.render(t,l),n.texture.generateMipmaps=p,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(u,h,d),e.xr.enabled=f,n.texture.needsPMREMUpdate=!0}}class Hs extends so{constructor(e,t,n,r,i,o,a,s,l,c){super(e=void 0!==e?e:[],t=void 0!==t?t:Wt,n,r,i,o,a,s,l,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Vs extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new Hs(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:an}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Ps(5,5,5),i=new Ls({name:"CubemapFromEquirect",uniforms:Rs(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Je,blending:Ze});i.uniforms.tEquirect.value=t;const o=new Is(r,i),a=t.minFilter;t.minFilter===cn&&(t.minFilter=an);return new Qs(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(i)}}const Ws=new vo,qs=new vo,Xs=new Ui;class Ys{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo(1,0,0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Ws.subVectors(n,t).cross(qs.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Ws),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||Xs.getNormalMatrix(e),r=this.coplanarPoint(Ws).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Js=new zo,Ks=new vo;class Zs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ys,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ys,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Ys,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Ys,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:new Ys,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:new Ys;this.planes=[e,t,n,r,i,o]}set(e,t,n,r,i,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ei;const n=this.planes,r=e.elements,i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],c=r[5],u=r[6],h=r[7],d=r[8],f=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],A=r[15];if(n[0].setComponents(s-i,h-l,m-d,A-g).normalize(),n[1].setComponents(s+i,h+l,m+d,A+g).normalize(),n[2].setComponents(s+o,h+c,m+f,A+v).normalize(),n[3].setComponents(s-o,h-c,m-f,A-v).normalize(),n[4].setComponents(s-a,h-u,m-p,A-y).normalize(),t===Ei)n[5].setComponents(s+a,h+u,m+p,A+y).normalize();else{if(t!==Si)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(a,u,p,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),Js.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),Js.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Js)}intersectsSprite(e){return Js.center.set(0,0,0),Js.radius=.7071067811865476,Js.applyMatrix4(e.matrixWorld),this.intersectsSphere(Js)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let i=0;i<6;i++){if(t[i].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(Ks.x=r.normal.x>0?e.max.x:e.min.x,Ks.y=r.normal.y>0?e.max.y:e.min.y,Ks.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Ks)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function $s(){let e=null,t=!1,n=null,r=null;function i(t,o){n(t,o),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function el(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isInterleavedBufferAttribute&&(n=n.data),n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}const i=t.get(n);if(void 0===i)t.set(n,function(t,n){const r=t.array,i=t.usage,o=r.byteLength,a=e.createBuffer();let s;if(e.bindBuffer(n,a),e.bufferData(n,r,i),t.onUploadCallback(),r instanceof Float32Array)s=e.FLOAT;else if(r instanceof Uint16Array)s=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)s=e.SHORT;else if(r instanceof Uint32Array)s=e.UNSIGNED_INT;else if(r instanceof Int32Array)s=e.INT;else if(r instanceof Int8Array)s=e.BYTE;else if(r instanceof Uint8Array)s=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);s=e.UNSIGNED_BYTE}return{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:o}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const i=n.array,o=n._updateRange,a=n.updateRanges;if(e.bindBuffer(r,t),-1===o.count&&0===a.length&&e.bufferSubData(r,0,i),0!==a.length){for(let t=0,n=a.length;t<n;t++){const n=a[t];e.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}-1!==o.count&&(e.bufferSubData(r,o.offset*i.BYTES_PER_ELEMENT,i,o.offset,o.count),o.count=-1),n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}class tl extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,o=t/2,a=Math.floor(n),s=Math.floor(r),l=a+1,c=s+1,u=e/a,h=t/s,d=[],f=[],p=[],m=[];for(let g=0;g<c;g++){const e=g*h-o;for(let t=0;t<l;t++){const n=t*u-i;f.push(n,-e,0),p.push(0,0,1),m.push(t/a),m.push(1-g/s)}}for(let g=0;g<s;g++)for(let e=0;e<a;e++){const t=e+l*g,n=e+l*(g+1),r=e+1+l*(g+1),i=e+1+l*g;d.push(t,n,i),d.push(n,r,i)}this.setIndex(d),this.setAttribute("position",new rs(f,3)),this.setAttribute("normal",new rs(p,3)),this.setAttribute("uv",new rs(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new tl(e.width,e.height,e.widthSegments,e.heightSegments)}}const nl={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},rl={common:{diffuse:{value:new La(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Ui},alphaMap:{value:null},alphaMapTransform:{value:new Ui},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Ui}},envmap:{envMap:{value:null},envMapRotation:{value:new Ui},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Ui}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Ui}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Ui},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Ui},normalScale:{value:new zi(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Ui},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Ui}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Ui}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Ui}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new La(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new La(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Ui},alphaTest:{value:0},uvTransform:{value:new Ui}},sprite:{diffuse:{value:new La(16777215)},opacity:{value:1},center:{value:new zi(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Ui},alphaMap:{value:null},alphaMapTransform:{value:new Ui},alphaTest:{value:0}}},il={basic:{uniforms:Ds([rl.common,rl.specularmap,rl.envmap,rl.aomap,rl.lightmap,rl.fog]),vertexShader:nl.meshbasic_vert,fragmentShader:nl.meshbasic_frag},lambert:{uniforms:Ds([rl.common,rl.specularmap,rl.envmap,rl.aomap,rl.lightmap,rl.emissivemap,rl.bumpmap,rl.normalmap,rl.displacementmap,rl.fog,rl.lights,{emissive:{value:new La(0)}}]),vertexShader:nl.meshlambert_vert,fragmentShader:nl.meshlambert_frag},phong:{uniforms:Ds([rl.common,rl.specularmap,rl.envmap,rl.aomap,rl.lightmap,rl.emissivemap,rl.bumpmap,rl.normalmap,rl.displacementmap,rl.fog,rl.lights,{emissive:{value:new La(0)},specular:{value:new La(1118481)},shininess:{value:30}}]),vertexShader:nl.meshphong_vert,fragmentShader:nl.meshphong_frag},standard:{uniforms:Ds([rl.common,rl.envmap,rl.aomap,rl.lightmap,rl.emissivemap,rl.bumpmap,rl.normalmap,rl.displacementmap,rl.roughnessmap,rl.metalnessmap,rl.fog,rl.lights,{emissive:{value:new La(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nl.meshphysical_vert,fragmentShader:nl.meshphysical_frag},toon:{uniforms:Ds([rl.common,rl.aomap,rl.lightmap,rl.emissivemap,rl.bumpmap,rl.normalmap,rl.displacementmap,rl.gradientmap,rl.fog,rl.lights,{emissive:{value:new La(0)}}]),vertexShader:nl.meshtoon_vert,fragmentShader:nl.meshtoon_frag},matcap:{uniforms:Ds([rl.common,rl.bumpmap,rl.normalmap,rl.displacementmap,rl.fog,{matcap:{value:null}}]),vertexShader:nl.meshmatcap_vert,fragmentShader:nl.meshmatcap_frag},points:{uniforms:Ds([rl.points,rl.fog]),vertexShader:nl.points_vert,fragmentShader:nl.points_frag},dashed:{uniforms:Ds([rl.common,rl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nl.linedashed_vert,fragmentShader:nl.linedashed_frag},depth:{uniforms:Ds([rl.common,rl.displacementmap]),vertexShader:nl.depth_vert,fragmentShader:nl.depth_frag},normal:{uniforms:Ds([rl.common,rl.bumpmap,rl.normalmap,rl.displacementmap,{opacity:{value:1}}]),vertexShader:nl.meshnormal_vert,fragmentShader:nl.meshnormal_frag},sprite:{uniforms:Ds([rl.sprite,rl.fog]),vertexShader:nl.sprite_vert,fragmentShader:nl.sprite_frag},background:{uniforms:{uvTransform:{value:new Ui},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:nl.background_vert,fragmentShader:nl.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Ui}},vertexShader:nl.backgroundCube_vert,fragmentShader:nl.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:nl.cube_vert,fragmentShader:nl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nl.equirect_vert,fragmentShader:nl.equirect_frag},distanceRGBA:{uniforms:Ds([rl.common,rl.displacementmap,{referencePosition:{value:new vo},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nl.distanceRGBA_vert,fragmentShader:nl.distanceRGBA_frag},shadow:{uniforms:Ds([rl.lights,rl.fog,{color:{value:new La(0)},opacity:{value:1}}]),vertexShader:nl.shadow_vert,fragmentShader:nl.shadow_frag}};il.physical={uniforms:Ds([il.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Ui},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Ui},clearcoatNormalScale:{value:new zi(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Ui},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Ui},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Ui},sheen:{value:0},sheenColor:{value:new La(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Ui},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Ui},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Ui},transmissionSamplerSize:{value:new zi},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Ui},attenuationDistance:{value:0},attenuationColor:{value:new La(0)},specularColor:{value:new La(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Ui},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Ui},anisotropyVector:{value:new zi},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Ui}}]),vertexShader:nl.meshphysical_vert,fragmentShader:nl.meshphysical_frag};const ol={r:0,b:0,g:0},al=new ra,sl=new qo;function ll(e,t,n,r,i,o,a){const s=new La(0);let l,c,u=!0===o?0:1,h=null,d=0,f=null;function p(e){let r=!0===e.isScene?e.background:null;if(r&&r.isTexture){r=(e.backgroundBlurriness>0?n:t).get(r)}return r}function m(t,n){t.getRGB(ol,Os(e)),r.buffers.color.setClear(ol.r,ol.g,ol.b,n,a)}return{getClearColor:function(){return s},setClearColor:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s.set(e),u=t,m(s,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,m(s,u)},render:function(t){let n=!1;const i=p(t);null===i?m(s,u):i&&i.isColor&&(m(i,1),n=!0);const o=e.xr.getEnvironmentBlendMode();"additive"===o?r.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===o&&r.buffers.color.setClear(0,0,0,0,a),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=p(n);r&&(r.isCubeTexture||r.mapping===Jt)?(void 0===c&&(c=new Is(new Ps(1,1,1),new Ls({name:"BackgroundCubeMaterial",uniforms:Rs(il.backgroundCube.uniforms),vertexShader:il.backgroundCube.vertexShader,fragmentShader:il.backgroundCube.fragmentShader,side:Je,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(c)),al.copy(n.backgroundRotation),al.x*=-1,al.y*=-1,al.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(al.y*=-1,al.z*=-1),c.material.uniforms.envMap.value=r,c.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,c.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(sl.makeRotationFromEuler(al)),c.material.toneMapped=Zi.getTransfer(r.colorSpace)!==Nr,h===r&&d===r.version&&f===e.toneMapping||(c.material.needsUpdate=!0,h=r,d=r.version,f=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null)):r&&r.isTexture&&(void 0===l&&(l=new Is(new tl(2,2),new Ls({name:"BackgroundMaterial",uniforms:Rs(il.background.uniforms),vertexShader:il.background.vertexShader,fragmentShader:il.background.fragmentShader,side:Ye,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),Object.defineProperty(l.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(l)),l.material.uniforms.t2D.value=r,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.toneMapped=Zi.getTransfer(r.colorSpace)!==Nr,!0===r.matrixAutoUpdate&&r.updateMatrix(),l.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&d===r.version&&f===e.toneMapping||(l.material.needsUpdate=!0,h=r,d=r.version,f=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null))}}}function cl(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=c(null);let o=i,a=!1;function s(t){return e.bindVertexArray(t)}function l(t){return e.deleteVertexArray(t)}function c(e){const t=[],r=[],i=[];for(let o=0;o<n;o++)t[o]=0,r[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function u(){const e=o.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){d(e,0)}function d(t,n){const r=o.newAttributes,i=o.enabledAttributes,a=o.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),a[t]!==n&&(e.vertexAttribDivisor(t,n),a[t]=n)}function f(){const t=o.newAttributes,n=o.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function p(t,n,r,i,o,a,s){!0===s?e.vertexAttribIPointer(t,n,r,o,a):e.vertexAttribPointer(t,n,r,i,o,a)}function m(){g(),a=!0,o!==i&&(o=i,s(o.object))}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,l,m,g){let v=!1;const y=function(t,n,i){const o=!0===i.wireframe;let a=r[t.id];void 0===a&&(a={},r[t.id]=a);let s=a[n.id];void 0===s&&(s={},a[n.id]=s);let l=s[o];void 0===l&&(l=c(e.createVertexArray()),s[o]=l);return l}(m,l,i);o!==y&&(o=y,s(o.object)),v=function(e,t,n,r){const i=o.attributes,a=t.attributes;let s=0;const l=n.getAttributes();for(const o in l){if(l[o].location>=0){const t=i[o];let n=a[o];if(void 0===n&&("instanceMatrix"===o&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(n=e.instanceColor)),void 0===t)return!0;if(t.attribute!==n)return!0;if(n&&t.data!==n.data)return!0;s++}}return o.attributesNum!==s||o.index!==r}(n,m,l,g),v&&function(e,t,n,r){const i={},a=t.attributes;let s=0;const l=n.getAttributes();for(const o in l){if(l[o].location>=0){let t=a[o];void 0===t&&("instanceMatrix"===o&&e.instanceMatrix&&(t=e.instanceMatrix),"instanceColor"===o&&e.instanceColor&&(t=e.instanceColor));const n={};n.attribute=t,t&&t.data&&(n.data=t.data),i[o]=n,s++}}o.attributes=i,o.attributesNum=s,o.index=r}(n,m,l,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(v||a)&&(a=!1,function(n,r,i,o){u();const a=o.attributes,s=i.getAttributes(),l=r.defaultAttributeValues;for(const c in s){const r=s[c];if(r.location>=0){let i=a[c];if(void 0===i&&("instanceMatrix"===c&&n.instanceMatrix&&(i=n.instanceMatrix),"instanceColor"===c&&n.instanceColor&&(i=n.instanceColor)),void 0!==i){const a=i.normalized,s=i.itemSize,l=t.get(i);if(void 0===l)continue;const c=l.buffer,u=l.type,f=l.bytesPerElement,m=u===e.INT||u===e.UNSIGNED_INT||i.gpuType===mn;if(i.isInterleavedBufferAttribute){const t=i.data,l=t.stride,g=i.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<r.locationSize;e++)d(r.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<r.locationSize;e++)h(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)p(r.location+e,s/r.locationSize,u,a,l*f,(g+s/r.locationSize*e)*f,m)}else{if(i.isInstancedBufferAttribute){for(let e=0;e<r.locationSize;e++)d(r.location+e,i.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=i.meshPerAttribute*i.count)}else for(let e=0;e<r.locationSize;e++)h(r.location+e);e.bindBuffer(e.ARRAY_BUFFER,c);for(let e=0;e<r.locationSize;e++)p(r.location+e,s/r.locationSize,u,a,s*f,s/r.locationSize*e*f,m)}}else if(void 0!==l){const t=l[c];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(r.location,t);break;case 3:e.vertexAttrib3fv(r.location,t);break;case 4:e.vertexAttrib4fv(r.location,t);break;default:e.vertexAttrib1fv(r.location,t)}}}}f()}(n,i,l,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)l(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const n in t){const e=t[n];for(const t in e)l(e[t].object),delete e[t];delete t[n]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)l(i[e].object),delete i[e];delete n[e.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:f}}function ul(e,t,n){let r;function i(t,i,o){0!==o&&(e.drawArraysInstanced(r,t,i,o),n.update(i,r,o))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,o){if(0===o)return;t.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,e,0,i,0,o);let a=0;for(let t=0;t<o;t++)a+=i[t];n.update(a,r,1)},this.renderMultiDrawInstances=function(e,o,a,s){if(0===a)return;const l=t.get("WEBGL_multi_draw");if(null===l)for(let t=0;t<e.length;t++)i(e[t],o[t],s[t]);else{l.multiDrawArraysInstancedWEBGL(r,e,0,o,0,s,0,a);let t=0;for(let e=0;e<a;e++)t+=o[e];for(let e=0;e<s.length;e++)n.update(t,r,s[e])}}}function hl(e,t,n,r){let i;function o(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let a=void 0!==n.precision?n.precision:"highp";const s=o(a);s!==a&&(console.warn("THREE.WebGLRenderer:",a,"not supported, using",s,"instead."),a=s);const l=!0===n.logarithmicDepthBuffer,c=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:o,textureFormatReadable:function(t){return t===Sn||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const i=n===yn&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==hn&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==vn&&!i)},precision:a,logarithmicDepthBuffer:l,maxTextures:c,maxVertexTextures:u,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function dl(e){const t=this;let n=null,r=0,i=!1,o=!1;const a=new Ys,s=new Ui,l={value:null,needsUpdate:!1};function c(e,n,r,i){const o=null!==e?e.length:0;let c=null;if(0!==o){if(c=l.value,!0!==i||null===c){const t=r+4*o,i=n.matrixWorldInverse;s.getNormalMatrix(i),(null===c||c.length<t)&&(c=new Float32Array(t));for(let n=0,l=r;n!==o;++n,l+=4)a.copy(e[n]).applyMatrix4(i,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return t.numPlanes=o,t.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){o=!0,c(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(e,t){n=c(e,t,0)},this.setState=function(a,s,u){const h=a.clippingPlanes,d=a.clipIntersection,f=a.clipShadows,p=e.get(a);if(!i||null===h||0===h.length||o&&!f)o?c(null):function(){l.value!==n&&(l.value=n,l.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=o?0:r,t=4*e;let i=p.clippingState||null;l.value=i,i=c(h,s,t,u);for(let r=0;r!==t;++r)i[r]=n[r];p.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function fl(e){let t=new WeakMap;function n(e,t){return t===Xt?e.mapping=Wt:t===Yt&&(e.mapping=qt),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping;if(o===Xt||o===Yt){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=new Vs(o.height);return a.fromEquirectangularTexture(e,i),t.set(i,a),i.addEventListener("dispose",r),n(a.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class pl extends Fs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:-1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.1,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2e3;super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,o=n+e,a=r+t,s=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,o=i+e*this.view.width,a-=t*this.view.offsetY,s=a-t*this.view.height}this.projectionMatrix.makeOrthographic(i,o,a,s,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const ml=[.125,.215,.35,.446,.526,.582],gl=20,vl=new pl,yl=new La;let Al=null,xl=0,bl=0,_l=!1;const wl=(1+Math.sqrt(5))/2,El=1/wl,Sl=[new vo(-wl,El,0),new vo(wl,El,0),new vo(-El,0,wl),new vo(El,0,wl),new vo(0,wl,-El),new vo(0,wl,El),new vo(-1,1,-1),new vo(1,1,-1),new vo(-1,1,1),new vo(1,1,1)];class Cl{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100;Al=this._renderer.getRenderTarget(),xl=this._renderer.getActiveCubeFace(),bl=this._renderer.getActiveMipmapLevel(),_l=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}fromCubemap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Bl(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Il(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Al,xl,bl),this._renderer.xr.enabled=_l,e.scissorTest=!1,Tl(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Wt||e.mapping===qt?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Al=this._renderer.getRenderTarget(),xl=this._renderer.getActiveCubeFace(),bl=this._renderer.getActiveMipmapLevel(),_l=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:an,minFilter:an,generateMipmaps:!1,type:yn,format:Sn,colorSpace:Lr,depthBuffer:!1},r=Ml(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Ml(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const o=e-4+1+ml.length;for(let a=0;a<o;a++){const o=Math.pow(2,i);n.push(o);let s=1/o;a>e-4?s=ml[a-e+4-1]:0===a&&(s=0),r.push(s);const l=1/(o-2),c=-l,u=1+l,h=[c,c,u,c,u,u,c,c,u,u,c,u],d=6,f=6,p=3,m=2,g=1,v=new Float32Array(p*f*d),y=new Float32Array(m*f*d),A=new Float32Array(g*f*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];v.set(r,p*f*e),y.set(h,m*f*e);const i=[e,e,e,e,e,e];A.set(i,g*f*e)}const x=new hs;x.setAttribute("position",new Xa(v,p)),x.setAttribute("uv",new Xa(y,m)),x.setAttribute("faceIndex",new Xa(A,g)),t.push(x),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(gl),i=new vo(0,1,0),o=new Ls({name:"SphericalGaussianBlur",defines:{n:gl,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:Pl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:Ze,depthTest:!1,depthWrite:!1});return o}(r,e,t)}return r}_compileMaterial(e){const t=new Is(this._lodPlanes[0],e);this._renderer.compile(t,vl)}_sceneToCubeUV(e,t,n,r){const i=new js(90,1,t,n),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],s=this._renderer,l=s.autoClear,c=s.toneMapping;s.getClearColor(yl),s.toneMapping=kt,s.autoClear=!1;const u=new Na({name:"PMREM.Background",side:Je,depthWrite:!1,depthTest:!1}),h=new Is(new Ps,u);let d=!1;const f=e.background;f?f.isColor&&(u.color.copy(f),e.background=null,d=!0):(u.color.copy(yl),d=!0);for(let p=0;p<6;p++){const t=p%3;0===t?(i.up.set(0,o[p],0),i.lookAt(a[p],0,0)):1===t?(i.up.set(0,0,o[p]),i.lookAt(0,a[p],0)):(i.up.set(0,o[p],0),i.lookAt(0,0,a[p]));const n=this._cubeSize;Tl(r,t*n,p>2?n:0,n,n),s.setRenderTarget(r),d&&s.render(h,i),s.render(e,i)}h.geometry.dispose(),h.material.dispose(),s.toneMapping=c,s.autoClear=l,e.background=f}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===Wt||e.mapping===qt;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Bl()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Il());const i=r?this._cubemapMaterial:this._equirectMaterial,o=new Is(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const a=this._cubeSize;Tl(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,vl)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let i=1;i<r;i++){const t=Math.sqrt(this._sigmas[i]*this._sigmas[i]-this._sigmas[i-1]*this._sigmas[i-1]),n=Sl[(r-i-1)%Sl.length];this._blur(e,i-1,i,t,n)}t.autoClear=n}_blur(e,t,n,r,i){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",i),this._halfBlur(o,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=new Is(this._lodPlanes[r],l),u=l.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,f=i/d,p=isFinite(i)?1+Math.floor(3*f):gl;p>gl&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${p} samples when the maximum is set to 20`);const m=[];let g=0;for(let A=0;A<gl;++A){const e=A/f,t=Math.exp(-e*e/2);m.push(t),0===A?g+=t:A<p&&(g+=2*t)}for(let A=0;A<m.length;A++)m[A]=m[A]/g;u.envMap.value=e.texture,u.samples.value=p,u.weights.value=m,u.latitudinal.value="latitudinal"===o,a&&(u.poleAxis.value=a);const{_lodMax:v}=this;u.dTheta.value=d,u.mipInt.value=v-n;const y=this._sizeLods[r];Tl(t,3*y*(r>v-4?r-v+4:0),4*(this._cubeSize-y),3*y,2*y),s.setRenderTarget(t),s.render(c,vl)}}function Ml(e,t,n){const r=new uo(e,t,n);return r.texture.mapping=Jt,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Tl(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Il(){return new Ls({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Pl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:Ze,depthTest:!1,depthWrite:!1})}function Bl(){return new Ls({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Pl(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:Ze,depthTest:!1,depthWrite:!1})}function Pl(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Rl(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const o=i.mapping,a=o===Xt||o===Yt,s=o===Wt||o===qt;if(a||s){let o=t.get(i);const l=void 0!==o?o.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==l)return null===n&&(n=new Cl(e)),o=a?n.fromEquirectangular(i,o):n.fromCubemap(i,o),o.texture.pmremVersion=i.pmremVersion,t.set(i,o),o.texture;if(void 0!==o)return o.texture;{const l=i.image;return a&&l&&l.height>0||s&&l&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(l)?(null===n&&(n=new Cl(e)),o=a?n.fromEquirectangular(i):n.fromCubemap(i),o.texture.pmremVersion=i.pmremVersion,t.set(i,o),i.addEventListener("dispose",r),o.texture):null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Dl(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&qi("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Ol(e,t,n,r){const i={},o=new WeakMap;function a(e){const s=e.target;null!==s.index&&t.remove(s.index);for(const n in s.attributes)t.remove(s.attributes[n]);for(const n in s.morphAttributes){const e=s.morphAttributes[n];for(let n=0,r=e.length;n<r;n++)t.remove(e[n])}s.removeEventListener("dispose",a),delete i[s.id];const l=o.get(s);l&&(t.remove(l),o.delete(s)),r.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(e){const n=[],r=e.index,i=e.attributes.position;let a=0;if(null!==r){const e=r.array;a=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],o=e[t+2];n.push(r,i,i,o,o,r)}}else{if(void 0===i)return;{const e=i.array;a=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const s=new(ji(n)?ts:$a)(n,1);s.version=a;const l=o.get(e);l&&t.remove(l),o.set(e,s)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",a),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const o in r)t.update(r[o],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const o in i){const n=i[o];for(let r=0,i=n.length;r<i;r++)t.update(n[r],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=o.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&s(e)}else s(e);return o.get(e)}}}function kl(e,t,n){let r,i,o;function a(t,a,s){0!==s&&(e.drawElementsInstanced(r,a,i,t*o,s),n.update(a,r,s))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(r,a,i,t*o),n.update(a,r,1)},this.renderInstances=a,this.renderMultiDraw=function(e,o,a){if(0===a)return;t.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,o,0,i,e,0,a);let s=0;for(let t=0;t<a;t++)s+=o[t];n.update(s,r,1)},this.renderMultiDrawInstances=function(e,s,l,c){if(0===l)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)a(e[t]/o,s[t],c[t]);else{u.multiDrawElementsInstancedWEBGL(r,s,0,i,e,0,c,0,l);let t=0;for(let e=0;e<l;e++)t+=s[e];for(let e=0;e<c.length;e++)n.update(t,r,c[e])}}}function Ll(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Fl(e,t,n){const r=new WeakMap,i=new lo;return{update:function(o,a,s){const l=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,u=void 0!==c?c.length:0;let h=r.get(a);if(void 0===h||h.count!==u){void 0!==h&&h.texture.dispose();const d=void 0!==a.morphAttributes.position,f=void 0!==a.morphAttributes.normal,p=void 0!==a.morphAttributes.color,m=a.morphAttributes.position||[],g=a.morphAttributes.normal||[],v=a.morphAttributes.color||[];let y=0;!0===d&&(y=1),!0===f&&(y=2),!0===p&&(y=3);let A=a.attributes.position.count*y,x=1;A>t.maxTextureSize&&(x=Math.ceil(A/t.maxTextureSize),A=t.maxTextureSize);const b=new Float32Array(A*x*4*u),_=new ho(b,A,x,u);_.type=vn,_.needsUpdate=!0;const w=4*y;for(let S=0;S<u;S++){const C=m[S],M=g[S],T=v[S],I=A*x*4*S;for(let B=0;B<C.count;B++){const P=B*w;!0===d&&(i.fromBufferAttribute(C,B),b[I+P+0]=i.x,b[I+P+1]=i.y,b[I+P+2]=i.z,b[I+P+3]=0),!0===f&&(i.fromBufferAttribute(M,B),b[I+P+4]=i.x,b[I+P+5]=i.y,b[I+P+6]=i.z,b[I+P+7]=0),!0===p&&(i.fromBufferAttribute(T,B),b[I+P+8]=i.x,b[I+P+9]=i.y,b[I+P+10]=i.z,b[I+P+11]=4===T.itemSize?i.w:1)}}function E(){_.dispose(),r.delete(a),a.removeEventListener("dispose",E)}h={count:u,texture:_,size:new zi(A,x)},r.set(a,h),a.addEventListener("dispose",E)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)s.getUniforms().setValue(e,"morphTexture",o.morphTexture,n);else{let R=0;for(let O=0;O<l.length;O++)R+=l[O];const D=a.morphTargetsRelative?1:1-R;s.getUniforms().setValue(e,"morphTargetBaseInfluence",D),s.getUniforms().setValue(e,"morphTargetInfluences",l)}s.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),s.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function zl(e,t,n,r){let i=new WeakMap;function o(e){const t=e.target;t.removeEventListener("dispose",o),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(a){const s=r.render.frame,l=a.geometry,c=t.get(a,l);if(i.get(c)!==s&&(t.update(c),i.set(c,s)),a.isInstancedMesh&&(!1===a.hasEventListener("dispose",o)&&a.addEventListener("dispose",o),i.get(a)!==s&&(n.update(a.instanceMatrix,e.ARRAY_BUFFER),null!==a.instanceColor&&n.update(a.instanceColor,e.ARRAY_BUFFER),i.set(a,s))),a.isSkinnedMesh){const e=a.skeleton;i.get(e)!==s&&(e.update(),i.set(e,s))}return c},dispose:function(){i=new WeakMap}}}class Ul extends so{constructor(e,t,n,r,i,o,a,s,l){let c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:Tn;if(c!==Tn&&c!==In)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Tn&&(n=gn),void 0===n&&c===In&&(n=bn),super(null,r,i,o,a,s,c,n,l),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==a?a:en,this.minFilter=void 0!==s?s:en,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const Nl=new so,jl=new Ul(1,1),Gl=new ho,Ql=new po,Hl=new Hs,Vl=[],Wl=[],ql=new Float32Array(16),Xl=new Float32Array(9),Yl=new Float32Array(4);function Jl(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let o=Vl[i];if(void 0===o&&(o=new Float32Array(i),Vl[i]=o),0!==t){r.toArray(o,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(o,i)}return o}function Kl(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function Zl(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function $l(e,t){let n=Wl[t];void 0===n&&(n=new Int32Array(t),Wl[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function ec(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function tc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Kl(n,t))return;e.uniform2fv(this.addr,t),Zl(n,t)}}function nc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(Kl(n,t))return;e.uniform3fv(this.addr,t),Zl(n,t)}}function rc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Kl(n,t))return;e.uniform4fv(this.addr,t),Zl(n,t)}}function ic(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Kl(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),Zl(n,t)}else{if(Kl(n,r))return;Yl.set(r),e.uniformMatrix2fv(this.addr,!1,Yl),Zl(n,r)}}function oc(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Kl(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),Zl(n,t)}else{if(Kl(n,r))return;Xl.set(r),e.uniformMatrix3fv(this.addr,!1,Xl),Zl(n,r)}}function ac(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(Kl(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),Zl(n,t)}else{if(Kl(n,r))return;ql.set(r),e.uniformMatrix4fv(this.addr,!1,ql),Zl(n,r)}}function sc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function lc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Kl(n,t))return;e.uniform2iv(this.addr,t),Zl(n,t)}}function cc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Kl(n,t))return;e.uniform3iv(this.addr,t),Zl(n,t)}}function uc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Kl(n,t))return;e.uniform4iv(this.addr,t),Zl(n,t)}}function hc(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function dc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(Kl(n,t))return;e.uniform2uiv(this.addr,t),Zl(n,t)}}function fc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(Kl(n,t))return;e.uniform3uiv(this.addr,t),Zl(n,t)}}function pc(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(Kl(n,t))return;e.uniform4uiv(this.addr,t),Zl(n,t)}}function mc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();let o;r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),this.type===e.SAMPLER_2D_SHADOW?(jl.compareFunction=li,o=jl):o=Nl,n.setTexture2D(t||o,i)}function gc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||Ql,i)}function vc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||Hl,i)}function yc(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||Gl,i)}function Ac(e,t){e.uniform1fv(this.addr,t)}function xc(e,t){const n=Jl(t,this.size,2);e.uniform2fv(this.addr,n)}function bc(e,t){const n=Jl(t,this.size,3);e.uniform3fv(this.addr,n)}function _c(e,t){const n=Jl(t,this.size,4);e.uniform4fv(this.addr,n)}function wc(e,t){const n=Jl(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function Ec(e,t){const n=Jl(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Sc(e,t){const n=Jl(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function Cc(e,t){e.uniform1iv(this.addr,t)}function Mc(e,t){e.uniform2iv(this.addr,t)}function Tc(e,t){e.uniform3iv(this.addr,t)}function Ic(e,t){e.uniform4iv(this.addr,t)}function Bc(e,t){e.uniform1uiv(this.addr,t)}function Pc(e,t){e.uniform2uiv(this.addr,t)}function Rc(e,t){e.uniform3uiv(this.addr,t)}function Dc(e,t){e.uniform4uiv(this.addr,t)}function Oc(e,t,n){const r=this.cache,i=t.length,o=$l(n,i);Kl(r,o)||(e.uniform1iv(this.addr,o),Zl(r,o));for(let a=0;a!==i;++a)n.setTexture2D(t[a]||Nl,o[a])}function kc(e,t,n){const r=this.cache,i=t.length,o=$l(n,i);Kl(r,o)||(e.uniform1iv(this.addr,o),Zl(r,o));for(let a=0;a!==i;++a)n.setTexture3D(t[a]||Ql,o[a])}function Lc(e,t,n){const r=this.cache,i=t.length,o=$l(n,i);Kl(r,o)||(e.uniform1iv(this.addr,o),Zl(r,o));for(let a=0;a!==i;++a)n.setTextureCube(t[a]||Hl,o[a])}function Fc(e,t,n){const r=this.cache,i=t.length,o=$l(n,i);Kl(r,o)||(e.uniform1iv(this.addr,o),Zl(r,o));for(let a=0;a!==i;++a)n.setTexture2DArray(t[a]||Gl,o[a])}class zc{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return ec;case 35664:return tc;case 35665:return nc;case 35666:return rc;case 35674:return ic;case 35675:return oc;case 35676:return ac;case 5124:case 35670:return sc;case 35667:case 35671:return lc;case 35668:case 35672:return cc;case 35669:case 35673:return uc;case 5125:return hc;case 36294:return dc;case 36295:return fc;case 36296:return pc;case 35678:case 36198:case 36298:case 36306:case 35682:return mc;case 35679:case 36299:case 36307:return gc;case 35680:case 36300:case 36308:case 36293:return vc;case 36289:case 36303:case 36311:case 36292:return yc}}(t.type)}}class Uc{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return Ac;case 35664:return xc;case 35665:return bc;case 35666:return _c;case 35674:return wc;case 35675:return Ec;case 35676:return Sc;case 5124:case 35670:return Cc;case 35667:case 35671:return Mc;case 35668:case 35672:return Tc;case 35669:case 35673:return Ic;case 5125:return Bc;case 36294:return Pc;case 36295:return Rc;case 36296:return Dc;case 35678:case 36198:case 36298:case 36306:case 35682:return Oc;case 35679:case 36299:case 36307:return kc;case 35680:case 36300:case 36308:case 36293:return Lc;case 36289:case 36303:case 36311:case 36292:return Fc}}(t.type)}}class Nc{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,o=r.length;i!==o;++i){const o=r[i];o.setValue(e,t[o.id],n)}}}const jc=/(\w+)(\])?(\[|\.)?/g;function Gc(e,t){e.seq.push(t),e.map[t.id]=t}function Qc(e,t,n){const r=e.name,i=r.length;for(jc.lastIndex=0;;){const o=jc.exec(r),a=jc.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===i){Gc(n,void 0===c?new zc(s,e,t):new Uc(s,e,t));break}{let e=n.map[s];void 0===e&&(e=new Nc(s),Gc(n,e)),n=e}}}class Hc{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);Qc(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,o=t.length;i!==o;++i){const o=t[i],a=n[o.id];!1!==a.needsUpdate&&o.setValue(e,a.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function Vc(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}const Wc=37297;let qc=0;function Xc(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const o=/ERROR: 0:(\d+)/.exec(i);if(o){const r=parseInt(o[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=i;a<o;a++){const e=a+1;r.push(`${e===t?">":" "} ${e}: ${n[a]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function Yc(e,t){const n=function(e){const t=Zi.getPrimaries(Zi.workingColorSpace),n=Zi.getPrimaries(e);let r;switch(t===n?r="":t===Gr&&n===jr?r="LinearDisplayP3ToLinearSRGB":t===jr&&n===Gr&&(r="LinearSRGBToLinearDisplayP3"),e){case Lr:case zr:return[r,"LinearTransferOETF"];case kr:case Fr:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[r,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function Jc(e,t){let n;switch(t){case Lt:n="Linear";break;case Ft:n="Reinhard";break;case zt:n="Cineon";break;case Ut:n="ACESFilmic";break;case jt:n="AgX";break;case Gt:n="Neutral";break;case Nt:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const Kc=new vo;function Zc(){Zi.getLuminanceCoefficients(Kc);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Kc.x.toFixed(4)}, ${Kc.y.toFixed(4)}, ${Kc.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function $c(e){return""!==e}function eu(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function tu(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const nu=/^[ \t]*#include +<([\w\d./]+)>/gm;function ru(e){return e.replace(nu,ou)}const iu=new Map;function ou(e,t){let n=nl[t];if(void 0===n){const e=iu.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=nl[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return ru(n)}const au=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function su(e){return e.replace(au,lu)}function lu(e,t,n,r){let i="";for(let o=parseInt(t);o<parseInt(n);o++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return i}function cu(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function uu(e,t,n,r){const i=e.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===We?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===qe?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===Xe&&(t="SHADOWMAP_TYPE_VSM"),t}(n),c=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case Wt:case qt:t="ENVMAP_TYPE_CUBE";break;case Jt:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===qt&&(t="ENVMAP_MODE_REFRACTION");return t}(n),h=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case Rt:t="ENVMAP_BLENDING_MULTIPLY";break;case Dt:t="ENVMAP_BLENDING_MIX";break;case Ot:t="ENVMAP_BLENDING_ADD"}return t}(n),d=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),f=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter($c).join("\n")}(n),p=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(o),m=i.createProgram();let g,v,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter($c).join("\n"),g.length>0&&(g+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p].filter($c).join("\n"),v.length>0&&(v+="\n")):(g=[cu(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter($c).join("\n"),v=[cu(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,p,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",d?"#define CUBEUV_TEXEL_WIDTH "+d.texelWidth:"",d?"#define CUBEUV_TEXEL_HEIGHT "+d.texelHeight:"",d?"#define CUBEUV_MAX_MIP "+d.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==kt?"#define TONE_MAPPING":"",n.toneMapping!==kt?nl.tonemapping_pars_fragment:"",n.toneMapping!==kt?Jc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",nl.colorspace_pars_fragment,Yc("linearToOutputTexel",n.outputColorSpace),Zc(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter($c).join("\n")),a=ru(a),a=eu(a,n),a=tu(a,n),s=ru(s),s=eu(s,n),s=tu(s,n),a=su(a),s=su(s),!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",g=[f,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+g,v=["#define varying in",n.glslVersion===wi?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===wi?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const A=y+g+a,x=y+v+s,b=Vc(i,i.VERTEX_SHADER,A),_=Vc(i,i.FRAGMENT_SHADER,x);function w(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(m).trim(),r=i.getShaderInfoLog(b).trim(),o=i.getShaderInfoLog(_).trim();let a=!0,s=!0;if(!1===i.getProgramParameter(m,i.LINK_STATUS))if(a=!1,"function"===typeof e.debug.onShaderError)e.debug.onShaderError(i,m,b,_);else{const e=Xc(i,b,"vertex"),r=Xc(i,_,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(m,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==o||(s=!1);s&&(t.diagnostics={runnable:a,programLog:n,vertexShader:{log:r,prefix:g},fragmentShader:{log:o,prefix:v}})}i.deleteShader(b),i.deleteShader(_),E=new Hc(i,m),S=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),o=r.name;let a=1;r.type===e.FLOAT_MAT2&&(a=2),r.type===e.FLOAT_MAT3&&(a=3),r.type===e.FLOAT_MAT4&&(a=4),n[o]={type:r.type,location:e.getAttribLocation(t,o),locationSize:a}}return n}(i,m)}let E,S;i.attachShader(m,b),i.attachShader(m,_),void 0!==n.index0AttributeName?i.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(m,0,"position"),i.linkProgram(m),this.getUniforms=function(){return void 0===E&&w(this),E},this.getAttributes=function(){return void 0===S&&w(this),S};let C=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===C&&(C=i.getProgramParameter(m,Wc)),C},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(m),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=qc++,this.cacheKey=t,this.usedTimes=1,this.program=m,this.vertexShader=b,this.fragmentShader=_,this}let hu=0;class du{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return!1===o.has(r)&&(o.add(r),r.usedTimes++),!1===o.has(i)&&(o.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,0===n.usedTimes&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new fu(e),t.set(e,n)),n}}class fu{constructor(e){this.id=hu++,this.code=e,this.usedTimes=0}}function pu(e,t,n,r,i,o,a){const s=new ia,l=new du,c=new Set,u=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures;let f=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function m(e){return c.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(o,s,u,g,v){const y=g.fog,A=v.geometry,x=o.isMeshStandardMaterial?g.environment:null,b=(o.isMeshStandardMaterial?n:t).get(o.envMap||x),_=b&&b.mapping===Jt?b.image.height:null,w=p[o.type];null!==o.precision&&(f=i.getMaxPrecision(o.precision),f!==o.precision&&console.warn("THREE.WebGLProgram.getParameters:",o.precision,"not supported, using",f,"instead."));const E=A.morphAttributes.position||A.morphAttributes.normal||A.morphAttributes.color,S=void 0!==E?E.length:0;let C,M,T,I,B=0;if(void 0!==A.morphAttributes.position&&(B=1),void 0!==A.morphAttributes.normal&&(B=2),void 0!==A.morphAttributes.color&&(B=3),w){const e=il[w];C=e.vertexShader,M=e.fragmentShader}else C=o.vertexShader,M=o.fragmentShader,l.update(o),T=l.getVertexShaderID(o),I=l.getFragmentShaderID(o);const P=e.getRenderTarget(),R=!0===v.isInstancedMesh,D=!0===v.isBatchedMesh,O=!!o.map,k=!!o.matcap,L=!!b,F=!!o.aoMap,z=!!o.lightMap,U=!!o.bumpMap,N=!!o.normalMap,j=!!o.displacementMap,G=!!o.emissiveMap,Q=!!o.metalnessMap,H=!!o.roughnessMap,V=o.anisotropy>0,W=o.clearcoat>0,q=o.dispersion>0,X=o.iridescence>0,Y=o.sheen>0,J=o.transmission>0,K=V&&!!o.anisotropyMap,Z=W&&!!o.clearcoatMap,$=W&&!!o.clearcoatNormalMap,ee=W&&!!o.clearcoatRoughnessMap,te=X&&!!o.iridescenceMap,ne=X&&!!o.iridescenceThicknessMap,re=Y&&!!o.sheenColorMap,ie=Y&&!!o.sheenRoughnessMap,oe=!!o.specularMap,ae=!!o.specularColorMap,se=!!o.specularIntensityMap,le=J&&!!o.transmissionMap,ce=J&&!!o.thicknessMap,ue=!!o.gradientMap,he=!!o.alphaMap,de=o.alphaTest>0,fe=!!o.alphaHash,pe=!!o.extensions;let me=kt;o.toneMapped&&(null!==P&&!0!==P.isXRRenderTarget||(me=e.toneMapping));const ge={shaderID:w,shaderType:o.type,shaderName:o.name,vertexShader:C,fragmentShader:M,defines:o.defines,customVertexShaderID:T,customFragmentShaderID:I,isRawShaderMaterial:!0===o.isRawShaderMaterial,glslVersion:o.glslVersion,precision:f,batching:D,batchingColor:D&&null!==v._colorsTexture,instancing:R,instancingColor:R&&null!==v.instanceColor,instancingMorph:R&&null!==v.morphTexture,supportsVertexTextures:d,outputColorSpace:null===P?e.outputColorSpace:!0===P.isXRRenderTarget?P.texture.colorSpace:Lr,alphaToCoverage:!!o.alphaToCoverage,map:O,matcap:k,envMap:L,envMapMode:L&&b.mapping,envMapCubeUVHeight:_,aoMap:F,lightMap:z,bumpMap:U,normalMap:N,displacementMap:d&&j,emissiveMap:G,normalMapObjectSpace:N&&o.normalMapType===Dr,normalMapTangentSpace:N&&o.normalMapType===Rr,metalnessMap:Q,roughnessMap:H,anisotropy:V,anisotropyMap:K,clearcoat:W,clearcoatMap:Z,clearcoatNormalMap:$,clearcoatRoughnessMap:ee,dispersion:q,iridescence:X,iridescenceMap:te,iridescenceThicknessMap:ne,sheen:Y,sheenColorMap:re,sheenRoughnessMap:ie,specularMap:oe,specularColorMap:ae,specularIntensityMap:se,transmission:J,transmissionMap:le,thicknessMap:ce,gradientMap:ue,opaque:!1===o.transparent&&o.blending===$e&&!1===o.alphaToCoverage,alphaMap:he,alphaTest:de,alphaHash:fe,combine:o.combine,mapUv:O&&m(o.map.channel),aoMapUv:F&&m(o.aoMap.channel),lightMapUv:z&&m(o.lightMap.channel),bumpMapUv:U&&m(o.bumpMap.channel),normalMapUv:N&&m(o.normalMap.channel),displacementMapUv:j&&m(o.displacementMap.channel),emissiveMapUv:G&&m(o.emissiveMap.channel),metalnessMapUv:Q&&m(o.metalnessMap.channel),roughnessMapUv:H&&m(o.roughnessMap.channel),anisotropyMapUv:K&&m(o.anisotropyMap.channel),clearcoatMapUv:Z&&m(o.clearcoatMap.channel),clearcoatNormalMapUv:$&&m(o.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ee&&m(o.clearcoatRoughnessMap.channel),iridescenceMapUv:te&&m(o.iridescenceMap.channel),iridescenceThicknessMapUv:ne&&m(o.iridescenceThicknessMap.channel),sheenColorMapUv:re&&m(o.sheenColorMap.channel),sheenRoughnessMapUv:ie&&m(o.sheenRoughnessMap.channel),specularMapUv:oe&&m(o.specularMap.channel),specularColorMapUv:ae&&m(o.specularColorMap.channel),specularIntensityMapUv:se&&m(o.specularIntensityMap.channel),transmissionMapUv:le&&m(o.transmissionMap.channel),thicknessMapUv:ce&&m(o.thicknessMap.channel),alphaMapUv:he&&m(o.alphaMap.channel),vertexTangents:!!A.attributes.tangent&&(N||V),vertexColors:o.vertexColors,vertexAlphas:!0===o.vertexColors&&!!A.attributes.color&&4===A.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!A.attributes.uv&&(O||he),fog:!!y,useFog:!0===o.fog,fogExp2:!!y&&y.isFogExp2,flatShading:!0===o.flatShading,sizeAttenuation:!0===o.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==A.morphAttributes.position,morphNormals:void 0!==A.morphAttributes.normal,morphColors:void 0!==A.morphAttributes.color,morphTargetsCount:S,morphTextureStride:B,numDirLights:s.directional.length,numPointLights:s.point.length,numSpotLights:s.spot.length,numSpotLightMaps:s.spotLightMap.length,numRectAreaLights:s.rectArea.length,numHemiLights:s.hemi.length,numDirLightShadows:s.directionalShadowMap.length,numPointLightShadows:s.pointShadowMap.length,numSpotLightShadows:s.spotShadowMap.length,numSpotLightShadowsWithMaps:s.numSpotLightShadowsWithMaps,numLightProbes:s.numLightProbes,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:o.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:me,decodeVideoTexture:O&&!0===o.map.isVideoTexture&&Zi.getTransfer(o.map.colorSpace)===Nr,premultipliedAlpha:o.premultipliedAlpha,doubleSided:o.side===Ke,flipSided:o.side===Je,useDepthPacking:o.depthPacking>=0,depthPacking:o.depthPacking||0,index0AttributeName:o.index0AttributeName,extensionClipCullDistance:pe&&!0===o.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(pe&&!0===o.extensions.multiDraw||D)&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:o.customProgramCacheKey()};return ge.vertexUv1s=c.has(1),ge.vertexUv2s=c.has(2),ge.vertexUv3s=c.has(3),c.clear(),ge},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){s.disableAll(),t.supportsVertexTextures&&s.enable(0);t.instancing&&s.enable(1);t.instancingColor&&s.enable(2);t.instancingMorph&&s.enable(3);t.matcap&&s.enable(4);t.envMap&&s.enable(5);t.normalMapObjectSpace&&s.enable(6);t.normalMapTangentSpace&&s.enable(7);t.clearcoat&&s.enable(8);t.iridescence&&s.enable(9);t.alphaTest&&s.enable(10);t.vertexColors&&s.enable(11);t.vertexAlphas&&s.enable(12);t.vertexUv1s&&s.enable(13);t.vertexUv2s&&s.enable(14);t.vertexUv3s&&s.enable(15);t.vertexTangents&&s.enable(16);t.anisotropy&&s.enable(17);t.alphaHash&&s.enable(18);t.batching&&s.enable(19);t.dispersion&&s.enable(20);t.batchingColor&&s.enable(21);e.push(s.mask),s.disableAll(),t.fog&&s.enable(0);t.useFog&&s.enable(1);t.flatShading&&s.enable(2);t.logarithmicDepthBuffer&&s.enable(3);t.skinning&&s.enable(4);t.morphTargets&&s.enable(5);t.morphNormals&&s.enable(6);t.morphColors&&s.enable(7);t.premultipliedAlpha&&s.enable(8);t.shadowMapEnabled&&s.enable(9);t.doubleSided&&s.enable(10);t.flipSided&&s.enable(11);t.useDepthPacking&&s.enable(12);t.dithering&&s.enable(13);t.transmission&&s.enable(14);t.sheen&&s.enable(15);t.opaque&&s.enable(16);t.pointsUvs&&s.enable(17);t.decodeVideoTexture&&s.enable(18);t.alphaToCoverage&&s.enable(19);e.push(s.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=p[e.type];let n;if(t){const e=il[t];n=ks.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,i=u.length;e<i;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new uu(e,n,t,o),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){l.remove(e)},programs:u,dispose:function(){l.dispose()}}}function mu(){let e=new WeakMap;return{has:function(t){return e.has(t)},get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function gu(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function vu(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function yu(){const e=[];let t=0;const n=[],r=[],i=[];function o(n,r,i,o,a,s){let l=e[t];return void 0===l?(l={id:n.id,object:n,geometry:r,material:i,groupOrder:o,renderOrder:n.renderOrder,z:a,group:s},e[t]=l):(l.id=n.id,l.object=n,l.geometry=r,l.material=i,l.groupOrder=o,l.renderOrder=n.renderOrder,l.z=a,l.group=s),t++,l}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.push(u):!0===a.transparent?i.push(u):n.push(u)},unshift:function(e,t,a,s,l,c){const u=o(e,t,a,s,l,c);a.transmission>0?r.unshift(u):!0===a.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||gu),r.length>1&&r.sort(t||vu),i.length>1&&i.sort(t||vu)}}}function Au(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new yu,e.set(t,[i])):n>=r.length?(i=new yu,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function xu(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new vo,color:new La};break;case"SpotLight":n={position:new vo,direction:new vo,color:new La,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new vo,color:new La,distance:0,decay:0};break;case"HemisphereLight":n={direction:new vo,skyColor:new La,groundColor:new La};break;case"RectAreaLight":n={color:new La,position:new vo,halfWidth:new vo,halfHeight:new vo}}return e[t.id]=n,n}}}let bu=0;function _u(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function wu(e){const t=new xu,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zi};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new zi,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let s=0;s<9;s++)r.probe.push(new vo);const i=new vo,o=new qo,a=new qo;return{setup:function(i){let o=0,a=0,s=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let l=0,c=0,u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0;i.sort(_u);for(let e=0,x=i.length;e<x;e++){const A=i[e],x=A.color,b=A.intensity,_=A.distance,w=A.shadow&&A.shadow.map?A.shadow.map.texture:null;if(A.isAmbientLight)o+=x.r*b,a+=x.g*b,s+=x.b*b;else if(A.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(A.sh.coefficients[e],b);y++}else if(A.isDirectionalLight){const e=t.get(A);if(e.color.copy(A.color).multiplyScalar(A.intensity),A.castShadow){const e=A.shadow,t=n.get(A);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[l]=t,r.directionalShadowMap[l]=w,r.directionalShadowMatrix[l]=A.shadow.matrix,f++}r.directional[l]=e,l++}else if(A.isSpotLight){const e=t.get(A);e.position.setFromMatrixPosition(A.matrixWorld),e.color.copy(x).multiplyScalar(b),e.distance=_,e.coneCos=Math.cos(A.angle),e.penumbraCos=Math.cos(A.angle*(1-A.penumbra)),e.decay=A.decay,r.spot[u]=e;const i=A.shadow;if(A.map&&(r.spotLightMap[g]=A.map,g++,i.updateMatrices(A),A.castShadow&&v++),r.spotLightMatrix[u]=i.matrix,A.castShadow){const e=n.get(A);e.shadowIntensity=i.intensity,e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[u]=e,r.spotShadowMap[u]=w,m++}u++}else if(A.isRectAreaLight){const e=t.get(A);e.color.copy(x).multiplyScalar(b),e.halfWidth.set(.5*A.width,0,0),e.halfHeight.set(0,.5*A.height,0),r.rectArea[h]=e,h++}else if(A.isPointLight){const e=t.get(A);if(e.color.copy(A.color).multiplyScalar(A.intensity),e.distance=A.distance,e.decay=A.decay,A.castShadow){const e=A.shadow,t=n.get(A);t.shadowIntensity=e.intensity,t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[c]=t,r.pointShadowMap[c]=w,r.pointShadowMatrix[c]=A.shadow.matrix,p++}r.point[c]=e,c++}else if(A.isHemisphereLight){const e=t.get(A);e.skyColor.copy(A.color).multiplyScalar(b),e.groundColor.copy(A.groundColor).multiplyScalar(b),r.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=rl.LTC_FLOAT_1,r.rectAreaLTC2=rl.LTC_FLOAT_2):(r.rectAreaLTC1=rl.LTC_HALF_1,r.rectAreaLTC2=rl.LTC_HALF_2)),r.ambient[0]=o,r.ambient[1]=a,r.ambient[2]=s;const A=r.hash;A.directionalLength===l&&A.pointLength===c&&A.spotLength===u&&A.rectAreaLength===h&&A.hemiLength===d&&A.numDirectionalShadows===f&&A.numPointShadows===p&&A.numSpotShadows===m&&A.numSpotMaps===g&&A.numLightProbes===y||(r.directional.length=l,r.spot.length=u,r.rectArea.length=h,r.point.length=c,r.hemi.length=d,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=p,r.pointShadowMap.length=p,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=p,r.spotLightMatrix.length=m+g-v,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=v,r.numLightProbes=y,A.directionalLength=l,A.pointLength=c,A.spotLength=u,A.rectAreaLength=h,A.hemiLength=d,A.numDirectionalShadows=f,A.numPointShadows=p,A.numSpotShadows=m,A.numSpotMaps=g,A.numLightProbes=y,r.version=bu++)},setupView:function(e,t){let n=0,s=0,l=0,c=0,u=0;const h=t.matrixWorldInverse;for(let d=0,f=e.length;d<f;d++){const t=e[d];if(t.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(t.matrixWorld),i.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),n++}else if(t.isSpotLight){const e=r.spot[l];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(t.matrixWorld),i.setFromMatrixPosition(t.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),l++}else if(t.isRectAreaLight){const e=r.rectArea[c];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),a.identity(),o.copy(t.matrixWorld),o.premultiply(h),a.extractRotation(o),e.halfWidth.set(.5*t.width,0,0),e.halfHeight.set(0,.5*t.height,0),e.halfWidth.applyMatrix4(a),e.halfHeight.applyMatrix4(a),c++}else if(t.isPointLight){const e=r.point[s];e.position.setFromMatrixPosition(t.matrixWorld),e.position.applyMatrix4(h),s++}else if(t.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(t.matrixWorld),e.direction.transformDirection(h),u++}}},state:r}}function Eu(e){const t=new wu(e),n=[],r=[];const i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function Su(e){let t=new WeakMap;return{get:function(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const i=t.get(n);let o;return void 0===i?(o=new Eu(e),t.set(n,[o])):r>=i.length?(o=new Eu(e),i.push(o)):o=i[r],o},dispose:function(){t=new WeakMap}}}class Cu extends Ua{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Tr,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Mu extends Ua{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Tu(e,t,n){let r=new Zs;const i=new zi,o=new zi,a=new lo,s=new Cu({depthPacking:Ir}),l=new Mu,c={},u=n.maxTextureSize,h={[Ye]:Je,[Je]:Ye,[Ke]:Ke},d=new Ls({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new zi},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),f=d.clone();f.defines.HORIZONTAL_PASS=1;const p=new hs;p.setAttribute("position",new Xa(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const m=new Is(p,d),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=We;let v=this.type;function y(n,r){const o=t.update(m);d.defines.VSM_SAMPLES!==n.blurSamples&&(d.defines.VSM_SAMPLES=n.blurSamples,f.defines.VSM_SAMPLES=n.blurSamples,d.needsUpdate=!0,f.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new uo(i.x,i.y)),d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,o,d,m,null),f.uniforms.shadow_pass.value=n.mapPass.texture,f.uniforms.resolution.value=n.mapSize,f.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,o,f,m,null)}function A(t,n,r,i){let o=null;const a=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===r.isPointLight?l:s,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=o.uuid,t=n.uuid;let r=c[e];void 0===r&&(r={},c[e]=r);let i=r[t];void 0===i&&(i=o.clone(),r[t]=i,n.addEventListener("dispose",b)),o=i}if(o.visible=n.visible,o.wireframe=n.wireframe,o.side=i===Xe?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:h[n.side],o.alphaMap=n.alphaMap,o.alphaTest=n.alphaTest,o.map=n.map,o.clipShadows=n.clipShadows,o.clippingPlanes=n.clippingPlanes,o.clipIntersection=n.clipIntersection,o.displacementMap=n.displacementMap,o.displacementScale=n.displacementScale,o.displacementBias=n.displacementBias,o.wireframeLinewidth=n.wireframeLinewidth,o.linewidth=n.linewidth,!0===r.isPointLight&&!0===o.isMeshDistanceMaterial){e.properties.get(o).light=r}return o}function x(n,i,o,a,s){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===Xe)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const r=t.update(n),l=n.material;if(Array.isArray(l)){const t=r.groups;for(let c=0,u=t.length;c<u;c++){const u=t[c],h=l[u.materialIndex];if(h&&h.visible){const t=A(n,h,a,s);n.onBeforeShadow(e,n,i,o,r,t,u),e.renderBufferDirect(o,null,r,t,n,u),n.onAfterShadow(e,n,i,o,r,t,u)}}}else if(l.visible){const t=A(n,l,a,s);n.onBeforeShadow(e,n,i,o,r,t,null),e.renderBufferDirect(o,null,r,t,n,null),n.onAfterShadow(e,n,i,o,r,t,null)}}const l=n.children;for(let e=0,t=l.length;e<t;e++)x(l[e],i,o,a,s)}function b(e){e.target.removeEventListener("dispose",b);for(const t in c){const n=c[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,s){if(!1===g.enabled)return;if(!1===g.autoUpdate&&!1===g.needsUpdate)return;if(0===t.length)return;const l=e.getRenderTarget(),c=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(Ze),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const f=v!==Xe&&this.type===Xe,p=v===Xe&&this.type!==Xe;for(let m=0,g=t.length;m<g;m++){const l=t[m],c=l.shadow;if(void 0===c){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===c.autoUpdate&&!1===c.needsUpdate)continue;i.copy(c.mapSize);const h=c.getFrameExtents();if(i.multiply(h),o.copy(c.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(o.x=Math.floor(u/h.x),i.x=o.x*h.x,c.mapSize.x=o.x),i.y>u&&(o.y=Math.floor(u/h.y),i.y=o.y*h.y,c.mapSize.y=o.y)),null===c.map||!0===f||!0===p){const e=this.type!==Xe?{minFilter:en,magFilter:en}:{};null!==c.map&&c.map.dispose(),c.map=new uo(i.x,i.y,e),c.map.texture.name=l.name+".shadowMap",c.camera.updateProjectionMatrix()}e.setRenderTarget(c.map),e.clear();const g=c.getViewportCount();for(let e=0;e<g;e++){const t=c.getViewport(e);a.set(o.x*t.x,o.y*t.y,o.x*t.z,o.y*t.w),d.viewport(a),c.updateMatrices(l,e),r=c.getFrustum(),x(n,s,c.camera,l,this.type)}!0!==c.isPointLightShadow&&this.type===Xe&&y(c,s),c.needsUpdate=!1}v=this.type,g.needsUpdate=!1,e.setRenderTarget(l,c,h)}}function Iu(e){const t=new function(){let t=!1;const n=new lo;let r=null;const i=new lo(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,o,a,s){!0===s&&(t*=a,r*=a,o*=a),n.set(t,r,o,a),!1===i.equals(n)&&(e.clearColor(t,r,o,a),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},n=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?U(e.DEPTH_TEST):N(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case Et:e.depthFunc(e.NEVER);break;case St:e.depthFunc(e.ALWAYS);break;case Ct:e.depthFunc(e.LESS);break;case Mt:e.depthFunc(e.LEQUAL);break;case Tt:e.depthFunc(e.EQUAL);break;case It:e.depthFunc(e.GEQUAL);break;case Bt:e.depthFunc(e.GREATER);break;case Pt:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},r=new function(){let t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(n){t||(n?U(e.STENCIL_TEST):N(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,a){r===t&&i===n&&o===a||(e.stencilFunc(t,n,a),r=t,i=n,o=a)},setOp:function(t,n,r){a===t&&s===n&&l===r||(e.stencilOp(t,n,r),a=t,s=n,l=r)},setLocked:function(e){t=e},setClear:function(t){c!==t&&(e.clearStencil(t),c=t)},reset:function(){t=!1,n=null,r=null,i=null,o=null,a=null,s=null,l=null,c=null}}},i=new WeakMap,o=new WeakMap;let a={},s={},l=new WeakMap,c=[],u=null,h=!1,d=null,f=null,p=null,m=null,g=null,v=null,y=null,A=new La(0,0,0),x=0,b=!1,_=null,w=null,E=null,S=null,C=null;const M=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let T=!1,I=0;const B=e.getParameter(e.VERSION);-1!==B.indexOf("WebGL")?(I=parseFloat(/^WebGL (\d)/.exec(B)[1]),T=I>=1):-1!==B.indexOf("OpenGL ES")&&(I=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),T=I>=2);let P=null,R={};const D=e.getParameter(e.SCISSOR_BOX),O=e.getParameter(e.VIEWPORT),k=(new lo).fromArray(D),L=(new lo).fromArray(O);function F(t,n,r,i){const o=new Uint8Array(4),a=e.createTexture();e.bindTexture(t,a),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let s=0;s<r;s++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,o):e.texImage2D(n+s,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,o);return a}const z={};function U(t){!0!==a[t]&&(e.enable(t),a[t]=!0)}function N(t){!1!==a[t]&&(e.disable(t),a[t]=!1)}z[e.TEXTURE_2D]=F(e.TEXTURE_2D,e.TEXTURE_2D,1),z[e.TEXTURE_CUBE_MAP]=F(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),z[e.TEXTURE_2D_ARRAY]=F(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),z[e.TEXTURE_3D]=F(e.TEXTURE_3D,e.TEXTURE_3D,1,1),t.setClear(0,0,0,1),n.setClear(1),r.setClear(0),U(e.DEPTH_TEST),n.setFunc(Mt),H(!1),V(Ge),U(e.CULL_FACE),Q(Ze);const j={[it]:e.FUNC_ADD,[ot]:e.FUNC_SUBTRACT,[at]:e.FUNC_REVERSE_SUBTRACT};j[st]=e.MIN,j[lt]=e.MAX;const G={[ct]:e.ZERO,[ut]:e.ONE,[ht]:e.SRC_COLOR,[ft]:e.SRC_ALPHA,[At]:e.SRC_ALPHA_SATURATE,[vt]:e.DST_COLOR,[mt]:e.DST_ALPHA,[dt]:e.ONE_MINUS_SRC_COLOR,[pt]:e.ONE_MINUS_SRC_ALPHA,[yt]:e.ONE_MINUS_DST_COLOR,[gt]:e.ONE_MINUS_DST_ALPHA,[xt]:e.CONSTANT_COLOR,[bt]:e.ONE_MINUS_CONSTANT_COLOR,[_t]:e.CONSTANT_ALPHA,[wt]:e.ONE_MINUS_CONSTANT_ALPHA};function Q(t,n,r,i,o,a,s,l,c,u){if(t!==Ze){if(!1===h&&(U(e.BLEND),h=!0),t===rt)o=o||n,a=a||r,s=s||i,n===f&&o===g||(e.blendEquationSeparate(j[n],j[o]),f=n,g=o),r===p&&i===m&&a===v&&s===y||(e.blendFuncSeparate(G[r],G[i],G[a],G[s]),p=r,m=i,v=a,y=s),!1!==l.equals(A)&&c===x||(e.blendColor(l.r,l.g,l.b,c),A.copy(l),x=c),d=t,b=!1;else if(t!==d||u!==b){if(f===it&&g===it||(e.blendEquation(e.FUNC_ADD),f=it,g=it),u)switch(t){case $e:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case et:e.blendFunc(e.ONE,e.ONE);break;case tt:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case nt:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case $e:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case et:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case tt:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case nt:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}p=null,m=null,v=null,y=null,A.set(0,0,0),x=0,d=t,b=u}}else!0===h&&(N(e.BLEND),h=!1)}function H(t){_!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),_=t)}function V(t){t!==je?(U(e.CULL_FACE),t!==w&&(t===Ge?e.cullFace(e.BACK):t===Qe?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):N(e.CULL_FACE),w=t}function W(t,n,r){t?(U(e.POLYGON_OFFSET_FILL),S===n&&C===r||(e.polygonOffset(n,r),S=n,C=r)):N(e.POLYGON_OFFSET_FILL)}return{buffers:{color:t,depth:n,stencil:r},enable:U,disable:N,bindFramebuffer:function(t,n){return s[t]!==n&&(e.bindFramebuffer(t,n),s[t]=n,t===e.DRAW_FRAMEBUFFER&&(s[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(s[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=c,i=!1;if(t){r=l.get(n),void 0===r&&(r=[],l.set(n,r));const o=t.textures;if(r.length!==o.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=o.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=o.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return u!==t&&(e.useProgram(t),u=t,!0)},setBlending:Q,setMaterial:function(i,o){i.side===Ke?N(e.CULL_FACE):U(e.CULL_FACE);let a=i.side===Je;o&&(a=!a),H(a),i.blending===$e&&!1===i.transparent?Q(Ze):Q(i.blending,i.blendEquation,i.blendSrc,i.blendDst,i.blendEquationAlpha,i.blendSrcAlpha,i.blendDstAlpha,i.blendColor,i.blendAlpha,i.premultipliedAlpha),n.setFunc(i.depthFunc),n.setTest(i.depthTest),n.setMask(i.depthWrite),t.setMask(i.colorWrite);const s=i.stencilWrite;r.setTest(s),s&&(r.setMask(i.stencilWriteMask),r.setFunc(i.stencilFunc,i.stencilRef,i.stencilFuncMask),r.setOp(i.stencilFail,i.stencilZFail,i.stencilZPass)),W(i.polygonOffset,i.polygonOffsetFactor,i.polygonOffsetUnits),!0===i.alphaToCoverage?U(e.SAMPLE_ALPHA_TO_COVERAGE):N(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:H,setCullFace:V,setLineWidth:function(t){t!==E&&(T&&e.lineWidth(t),E=t)},setPolygonOffset:W,setScissorTest:function(t){t?U(e.SCISSOR_TEST):N(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+M-1),P!==t&&(e.activeTexture(t),P=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===P?e.TEXTURE0+M-1:P);let i=R[r];void 0===i&&(i={type:void 0,texture:void 0},R[r]=i),i.type===t&&i.texture===n||(P!==r&&(e.activeTexture(r),P=r),e.bindTexture(t,n||z[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=R[P];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},updateUBOMapping:function(t,n){let r=o.get(n);void 0===r&&(r=new WeakMap,o.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=o.get(n).get(t);i.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),i.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(Wy){console.error("THREE.WebGLState:",Wy)}},scissor:function(t){!1===k.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),k.copy(t))},viewport:function(t){!1===L.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),L.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),a={},P=null,R={},s={},l=new WeakMap,c=[],u=null,h=!1,d=null,f=null,p=null,m=null,g=null,v=null,y=null,A=new La(0,0,0),x=0,b=!1,_=null,w=null,E=null,S=null,C=null,k.set(0,0,e.canvas.width,e.canvas.height),L.set(0,0,e.canvas.width,e.canvas.height),t.reset(),n.reset(),r.reset()}}}function Bu(e,t,n,r){const i=function(e){switch(e){case hn:case dn:return{byteLength:1,components:1};case pn:case fn:case yn:return{byteLength:2,components:1};case An:case xn:return{byteLength:2,components:4};case gn:case mn:case vn:return{byteLength:4,components:1};case _n:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${e}.`)}(r);switch(n){case wn:case Cn:return e*t;case Mn:return e*t*2;case Bn:case Pn:return e*t/i.components*i.byteLength;case Rn:case Dn:return e*t*2/i.components*i.byteLength;case En:return e*t*3/i.components*i.byteLength;case Sn:case kn:return e*t*4/i.components*i.byteLength;case Ln:case Fn:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case zn:case Un:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case jn:case Qn:return Math.max(e,16)*Math.max(t,8)/4;case Nn:case Gn:return Math.max(e,8)*Math.max(t,8)/2;case Hn:case Vn:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*8;case Wn:case qn:return Math.floor((e+3)/4)*Math.floor((t+3)/4)*16;case Xn:return Math.floor((e+4)/5)*Math.floor((t+3)/4)*16;case Yn:return Math.floor((e+4)/5)*Math.floor((t+4)/5)*16;case Jn:return Math.floor((e+5)/6)*Math.floor((t+4)/5)*16;case Kn:return Math.floor((e+5)/6)*Math.floor((t+5)/6)*16;case Zn:return Math.floor((e+7)/8)*Math.floor((t+4)/5)*16;case $n:return Math.floor((e+7)/8)*Math.floor((t+5)/6)*16;case er:return Math.floor((e+7)/8)*Math.floor((t+7)/8)*16;case tr:return Math.floor((e+9)/10)*Math.floor((t+4)/5)*16;case nr:return Math.floor((e+9)/10)*Math.floor((t+5)/6)*16;case rr:return Math.floor((e+9)/10)*Math.floor((t+7)/8)*16;case ir:return Math.floor((e+9)/10)*Math.floor((t+9)/10)*16;case or:return Math.floor((e+11)/12)*Math.floor((t+9)/10)*16;case ar:return Math.floor((e+11)/12)*Math.floor((t+11)/12)*16;case sr:case lr:case cr:return Math.ceil(e/4)*Math.ceil(t/4)*16;case ur:case hr:return Math.ceil(e/4)*Math.ceil(t/4)*8;case dr:case fr:return Math.ceil(e/4)*Math.ceil(t/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}const Pu={contain:function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2):(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0),e},cover:function(e,t){const n=e.image&&e.image.width?e.image.width/e.image.height:1;return n>t?(e.repeat.x=t/n,e.repeat.y=1,e.offset.x=(1-e.repeat.x)/2,e.offset.y=0):(e.repeat.x=1,e.repeat.y=n/t,e.offset.x=0,e.offset.y=(1-e.repeat.y)/2),e},fill:function(e){return e.repeat.x=1,e.repeat.y=1,e.offset.x=0,e.offset.y=0,e},getByteLength:Bu};function Ru(e,t,n,r,i,o,a){const s=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,l="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new zi,u=new WeakMap;let h;const d=new WeakMap;let f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(j){}function p(e,t){return f?new OffscreenCanvas(e,t):Hi("canvas")}function m(e,t,n){let r=1;const i=N(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*i.width),o=Math.floor(r*i.height);void 0===h&&(h=p(n,o));const a=t?p(n,o):h;a.width=n,a.height=o;return a.getContext("2d").drawImage(e,0,0,n,o),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+o+")."),a}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),e}return e}function g(e){return e.generateMipmaps&&e.minFilter!==en&&e.minFilter!==an}function v(t){e.generateMipmap(t)}function y(n,r,i,o){let a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let s=r;if(r===e.RED&&(i===e.FLOAT&&(s=e.R32F),i===e.HALF_FLOAT&&(s=e.R16F),i===e.UNSIGNED_BYTE&&(s=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.R8UI),i===e.UNSIGNED_SHORT&&(s=e.R16UI),i===e.UNSIGNED_INT&&(s=e.R32UI),i===e.BYTE&&(s=e.R8I),i===e.SHORT&&(s=e.R16I),i===e.INT&&(s=e.R32I)),r===e.RG&&(i===e.FLOAT&&(s=e.RG32F),i===e.HALF_FLOAT&&(s=e.RG16F),i===e.UNSIGNED_BYTE&&(s=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(s=e.RG8UI),i===e.UNSIGNED_SHORT&&(s=e.RG16UI),i===e.UNSIGNED_INT&&(s=e.RG32UI),i===e.BYTE&&(s=e.RG8I),i===e.SHORT&&(s=e.RG16I),i===e.INT&&(s=e.RG32I)),r===e.RGB&&i===e.UNSIGNED_INT_5_9_9_9_REV&&(s=e.RGB9_E5),r===e.RGBA){const t=a?Ur:Zi.getTransfer(o);i===e.FLOAT&&(s=e.RGBA32F),i===e.HALF_FLOAT&&(s=e.RGBA16F),i===e.UNSIGNED_BYTE&&(s=t===Nr?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(s=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(s=e.RGB5_A1)}return s!==e.R16F&&s!==e.R32F&&s!==e.RG16F&&s!==e.RG32F&&s!==e.RGBA16F&&s!==e.RGBA32F||t.get("EXT_color_buffer_float"),s}function A(t,n){let r;return t?null===n||n===gn||n===bn?r=e.DEPTH24_STENCIL8:n===vn?r=e.DEPTH32F_STENCIL8:n===pn&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===gn||n===bn?r=e.DEPTH_COMPONENT24:n===vn?r=e.DEPTH_COMPONENT32F:n===pn&&(r=e.DEPTH_COMPONENT16),r}function x(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==en&&e.minFilter!==an?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function b(e){const t=e.target;t.removeEventListener("dispose",b),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=d.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&w(e),0===Object.keys(i).length&&d.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function _(t){const n=t.target;n.removeEventListener("dispose",_),function(t){const n=r.get(t);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let r=0;r<6;r++){if(Array.isArray(n.__webglFramebuffer[r]))for(let t=0;t<n.__webglFramebuffer[r].length;t++)e.deleteFramebuffer(n.__webglFramebuffer[r][t]);else e.deleteFramebuffer(n.__webglFramebuffer[r]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[r])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let o=0,s=i.length;o<s;o++){const t=r.get(i[o]);t.__webglTexture&&(e.deleteTexture(t.__webglTexture),a.memory.textures--),r.remove(i[o])}r.remove(t)}(n)}function w(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete d.get(i)[n.__cacheKey],a.memory.textures--}let E=0;function S(t,i){const o=r.get(t);if(t.isVideoTexture&&function(e){const t=a.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&o.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void P(o,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,o.__webglTexture,e.TEXTURE0+i)}const C={[Kt]:e.REPEAT,[Zt]:e.CLAMP_TO_EDGE,[$t]:e.MIRRORED_REPEAT},M={[en]:e.NEAREST,[tn]:e.NEAREST_MIPMAP_NEAREST,[rn]:e.NEAREST_MIPMAP_LINEAR,[an]:e.LINEAR,[sn]:e.LINEAR_MIPMAP_NEAREST,[cn]:e.LINEAR_MIPMAP_LINEAR},T={[oi]:e.NEVER,[di]:e.ALWAYS,[ai]:e.LESS,[li]:e.LEQUAL,[si]:e.EQUAL,[hi]:e.GEQUAL,[ci]:e.GREATER,[ui]:e.NOTEQUAL};function I(n,o){if(o.type!==vn||!1!==t.has("OES_texture_float_linear")||o.magFilter!==an&&o.magFilter!==sn&&o.magFilter!==rn&&o.magFilter!==cn&&o.minFilter!==an&&o.minFilter!==sn&&o.minFilter!==rn&&o.minFilter!==cn||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,C[o.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,C[o.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,C[o.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,M[o.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,M[o.minFilter]),o.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,T[o.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(o.magFilter===en)return;if(o.minFilter!==rn&&o.minFilter!==cn)return;if(o.type===vn&&!1===t.has("OES_texture_float_linear"))return;if(o.anisotropy>1||r.get(o).__currentAnisotropy){const a=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,a.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,i.getMaxAnisotropy())),r.get(o).__currentAnisotropy=o.anisotropy}}}function B(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",b));const i=n.source;let o=d.get(i);void 0===o&&(o={},d.set(i,o));const s=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(s!==t.__cacheKey){void 0===o[s]&&(o[s]={texture:e.createTexture(),usedTimes:0},a.memory.textures++,r=!0),o[s].usedTimes++;const i=o[t.__cacheKey];void 0!==i&&(o[t.__cacheKey].usedTimes--,0===i.usedTimes&&w(n)),t.__cacheKey=s,t.__webglTexture=o[s].texture}return r}function P(t,a,s){let l=e.TEXTURE_2D;(a.isDataArrayTexture||a.isCompressedArrayTexture)&&(l=e.TEXTURE_2D_ARRAY),a.isData3DTexture&&(l=e.TEXTURE_3D);const c=B(t,a),u=a.source;n.bindTexture(l,t.__webglTexture,e.TEXTURE0+s);const h=r.get(u);if(u.version!==h.__version||!0===c){n.activeTexture(e.TEXTURE0+s);const t=Zi.getPrimaries(Zi.workingColorSpace),r=a.colorSpace===Or?null:Zi.getPrimaries(a.colorSpace),d=a.colorSpace===Or||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let f=m(a.image,!1,i.maxTextureSize);f=U(a,f);const p=o.convert(a.format,a.colorSpace),b=o.convert(a.type);let _,w=y(a.internalFormat,p,b,a.colorSpace,a.isVideoTexture);I(l,a);const E=a.mipmaps,S=!0!==a.isVideoTexture,C=void 0===h.__version||!0===c,M=u.dataReady,T=x(a,f);if(a.isDepthTexture)w=A(a.format===In,a.type),C&&(S?n.texStorage2D(e.TEXTURE_2D,1,w,f.width,f.height):n.texImage2D(e.TEXTURE_2D,0,w,f.width,f.height,0,p,b,null));else if(a.isDataTexture)if(E.length>0){S&&C&&n.texStorage2D(e.TEXTURE_2D,T,w,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)_=E[t],S?M&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,_.width,_.height,p,b,_.data):n.texImage2D(e.TEXTURE_2D,t,w,_.width,_.height,0,p,b,_.data);a.generateMipmaps=!1}else S?(C&&n.texStorage2D(e.TEXTURE_2D,T,w,f.width,f.height),M&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f.width,f.height,p,b,f.data)):n.texImage2D(e.TEXTURE_2D,0,w,f.width,f.height,0,p,b,f.data);else if(a.isCompressedTexture)if(a.isCompressedArrayTexture){S&&C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,T,w,E[0].width,E[0].height,f.depth);for(let t=0,r=E.length;t<r;t++)if(_=E[t],a.format!==Sn)if(null!==p)if(S){if(M)if(a.layerUpdates.size>0){const r=Bu(_.width,_.height,a.format,a.type);for(const i of a.layerUpdates){const o=_.data.subarray(i*r/_.data.BYTES_PER_ELEMENT,(i+1)*r/_.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,i,_.width,_.height,1,p,o,0,0)}a.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,_.width,_.height,f.depth,p,_.data,0,0)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,w,_.width,_.height,f.depth,0,_.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else S?M&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,_.width,_.height,f.depth,p,b,_.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,w,_.width,_.height,f.depth,0,p,b,_.data)}else{S&&C&&n.texStorage2D(e.TEXTURE_2D,T,w,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)_=E[t],a.format!==Sn?null!==p?S?M&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,_.width,_.height,p,_.data):n.compressedTexImage2D(e.TEXTURE_2D,t,w,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):S?M&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,_.width,_.height,p,b,_.data):n.texImage2D(e.TEXTURE_2D,t,w,_.width,_.height,0,p,b,_.data)}else if(a.isDataArrayTexture)if(S){if(C&&n.texStorage3D(e.TEXTURE_2D_ARRAY,T,w,f.width,f.height,f.depth),M)if(a.layerUpdates.size>0){const t=Bu(f.width,f.height,a.format,a.type);for(const r of a.layerUpdates){const i=f.data.subarray(r*t/f.data.BYTES_PER_ELEMENT,(r+1)*t/f.data.BYTES_PER_ELEMENT);n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,r,f.width,f.height,1,p,b,i)}a.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,f.width,f.height,f.depth,p,b,f.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,w,f.width,f.height,f.depth,0,p,b,f.data);else if(a.isData3DTexture)S?(C&&n.texStorage3D(e.TEXTURE_3D,T,w,f.width,f.height,f.depth),M&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,f.width,f.height,f.depth,p,b,f.data)):n.texImage3D(e.TEXTURE_3D,0,w,f.width,f.height,f.depth,0,p,b,f.data);else if(a.isFramebufferTexture){if(C)if(S)n.texStorage2D(e.TEXTURE_2D,T,w,f.width,f.height);else{let t=f.width,r=f.height;for(let i=0;i<T;i++)n.texImage2D(e.TEXTURE_2D,i,w,t,r,0,p,b,null),t>>=1,r>>=1}}else if(E.length>0){if(S&&C){const t=N(E[0]);n.texStorage2D(e.TEXTURE_2D,T,w,t.width,t.height)}for(let t=0,r=E.length;t<r;t++)_=E[t],S?M&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,p,b,_):n.texImage2D(e.TEXTURE_2D,t,w,p,b,_);a.generateMipmaps=!1}else if(S){if(C){const t=N(f);n.texStorage2D(e.TEXTURE_2D,T,w,t.width,t.height)}M&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,p,b,f)}else n.texImage2D(e.TEXTURE_2D,0,w,p,b,f);g(a)&&v(l),h.__version=u.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}function R(t,i,a,l,c,u){const h=o.convert(a.format,a.colorSpace),d=o.convert(a.type),f=y(a.internalFormat,h,d,a.colorSpace);if(!r.get(i).__hasExternalTextures){const t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);c===e.TEXTURE_3D||c===e.TEXTURE_2D_ARRAY?n.texImage3D(c,u,f,t,r,i.depth,0,h,d,null):n.texImage2D(c,u,f,t,r,0,h,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),z(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,l,c,r.get(a).__webglTexture,0,F(i)):(c===e.TEXTURE_2D||c>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&c<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,l,c,r.get(a).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const i=n.depthTexture,o=i&&i.isDepthTexture?i.type:null,a=A(n.stencilBuffer,o),l=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,c=F(n);z(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,c,a,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,c,a,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,a,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,l,e.RENDERBUFFER,t)}else{const t=n.textures;for(let i=0;i<t.length;i++){const a=t[i],l=o.convert(a.format,a.colorSpace),c=o.convert(a.type),u=y(a.internalFormat,l,c,a.colorSpace),h=F(n);r&&!1===z(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,u,n.width,n.height):z(n)?s.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function O(t){const i=r.get(t),o=!0===t.isWebGLCubeRenderTarget;if(i.__boundDepthTexture!==t.depthTexture){const e=t.depthTexture;if(i.__depthDisposeCallback&&i.__depthDisposeCallback(),e){const t=()=>{delete i.__boundDepthTexture,delete i.__depthDisposeCallback,e.removeEventListener("dispose",t)};e.addEventListener("dispose",t),i.__depthDisposeCallback=t}i.__boundDepthTexture=e}if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),S(i.depthTexture,0);const o=r.get(i.depthTexture).__webglTexture,a=F(i);if(i.depthTexture.format===Tn)z(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,o,0);else{if(i.depthTexture.format!==In)throw new Error("Unknown depthTexture format");z(i)?s.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0,a):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,o,0)}}(i.__webglFramebuffer,t)}else if(o){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),void 0===i.__webglDepthbuffer[r])i.__webglDepthbuffer[r]=e.createRenderbuffer(),D(i.__webglDepthbuffer[r],t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,o=i.__webglDepthbuffer[r];e.bindRenderbuffer(e.RENDERBUFFER,o),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,o)}}else if(n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),void 0===i.__webglDepthbuffer)i.__webglDepthbuffer=e.createRenderbuffer(),D(i.__webglDepthbuffer,t,!1);else{const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,r=i.__webglDepthbuffer;e.bindRenderbuffer(e.RENDERBUFFER,r),e.framebufferRenderbuffer(e.FRAMEBUFFER,n,e.RENDERBUFFER,r)}n.bindFramebuffer(e.FRAMEBUFFER,null)}const k=[],L=[];function F(e){return Math.min(i.maxSamples,e.samples)}function z(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function U(e,t){const n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==Lr&&n!==Or&&(Zi.getTransfer(n)===Nr?r===Sn&&i===hn||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function N(e){return"undefined"!==typeof HTMLImageElement&&e instanceof HTMLImageElement?(c.width=e.naturalWidth||e.width,c.height=e.naturalHeight||e.height):"undefined"!==typeof VideoFrame&&e instanceof VideoFrame?(c.width=e.displayWidth,c.height=e.displayHeight):(c.width=e.width,c.height=e.height),c}this.allocateTextureUnit=function(){const e=E;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=S,this.setTexture2DArray=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?P(o,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,o.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const o=r.get(t);t.version>0&&o.__version!==t.version?P(o,t,i):n.bindTexture(e.TEXTURE_3D,o.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,a){const s=r.get(t);t.version>0&&s.__version!==t.version?function(t,a,s){if(6!==a.image.length)return;const l=B(t,a),c=a.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+s);const u=r.get(c);if(c.version!==u.__version||!0===l){n.activeTexture(e.TEXTURE0+s);const t=Zi.getPrimaries(Zi.workingColorSpace),r=a.colorSpace===Or?null:Zi.getPrimaries(a.colorSpace),h=a.colorSpace===Or||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,a.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,a.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=a.isCompressedTexture||a.image[0].isCompressedTexture,f=a.image[0]&&a.image[0].isDataTexture,p=[];for(let e=0;e<6;e++)p[e]=d||f?f?a.image[e].image:a.image[e]:m(a.image[e],!0,i.maxCubemapSize),p[e]=U(a,p[e]);const A=p[0],b=o.convert(a.format,a.colorSpace),_=o.convert(a.type),w=y(a.internalFormat,b,_,a.colorSpace),E=!0!==a.isVideoTexture,S=void 0===u.__version||!0===l,C=c.dataReady;let M,T=x(a,A);if(I(e.TEXTURE_CUBE_MAP,a),d){E&&S&&n.texStorage2D(e.TEXTURE_CUBE_MAP,T,w,A.width,A.height);for(let t=0;t<6;t++){M=p[t].mipmaps;for(let r=0;r<M.length;r++){const i=M[r];a.format!==Sn?null!==b?E?C&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,b,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,w,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,b,_,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,w,i.width,i.height,0,b,_,i.data)}}}else{if(M=a.mipmaps,E&&S){M.length>0&&T++;const t=N(p[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,T,w,t.width,t.height)}for(let t=0;t<6;t++)if(f){E?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,p[t].width,p[t].height,b,_,p[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,p[t].width,p[t].height,0,b,_,p[t].data);for(let r=0;r<M.length;r++){const i=M[r].image[t].image;E?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,b,_,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,w,i.width,i.height,0,b,_,i.data)}}else{E?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,b,_,p[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,b,_,p[t]);for(let r=0;r<M.length;r++){const i=M[r];E?C&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,b,_,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,w,b,_,i.image[t])}}}g(a)&&v(e.TEXTURE_CUBE_MAP),u.__version=c.version,a.onUpdate&&a.onUpdate(a)}t.__version=a.version}(s,t,a):n.bindTexture(e.TEXTURE_CUBE_MAP,s.__webglTexture,e.TEXTURE0+a)},this.rebindTextures=function(t,n,i){const o=r.get(t);void 0!==n&&R(o.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&O(t)},this.setupRenderTarget=function(t){const i=t.texture,s=r.get(t),l=r.get(i);t.addEventListener("dispose",_);const c=t.textures,u=!0===t.isWebGLCubeRenderTarget,h=c.length>1;if(h||(void 0===l.__webglTexture&&(l.__webglTexture=e.createTexture()),l.__version=i.version,a.memory.textures++),u){s.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)s.__webglFramebuffer[t][n]=e.createFramebuffer()}else s.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){s.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)s.__webglFramebuffer[t]=e.createFramebuffer()}else s.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,n=c.length;t<n;t++){const n=r.get(c[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),a.memory.textures++)}if(t.samples>0&&!1===z(t)){s.__webglMultisampledFramebuffer=e.createFramebuffer(),s.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,s.__webglMultisampledFramebuffer);for(let n=0;n<c.length;n++){const r=c[n];s.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,s.__webglColorRenderbuffer[n]);const i=o.convert(r.format,r.colorSpace),a=o.convert(r.type),l=y(r.internalFormat,i,a,r.colorSpace,!0===t.isXRRenderTarget),u=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,l,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,s.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(s.__webglDepthRenderbuffer=e.createRenderbuffer(),D(s.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,l.__webglTexture),I(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)R(s.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else R(s.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&v(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let i=0,o=c.length;i<o;i++){const o=c[i],a=r.get(o);n.bindTexture(e.TEXTURE_2D,a.__webglTexture),I(e.TEXTURE_2D,o),R(s.__webglFramebuffer,t,o,e.COLOR_ATTACHMENT0+i,e.TEXTURE_2D,0),g(o)&&v(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,l.__webglTexture),I(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)R(s.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else R(s.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);g(i)&&v(r),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(t){const i=t.textures;for(let o=0,a=i.length;o<a;o++){const a=i[o];if(g(a)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,o=r.get(a).__webglTexture;n.bindTexture(i,o),v(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===z(t)){const i=t.textures,o=t.width,a=t.height;let s=e.COLOR_BUFFER_BIT;const c=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),h=i.length>1;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(s|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(s|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,o,a,0,0,o,a,s,e.NEAREST),!0===l&&(k.length=0,L.length=0,k.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(k.push(c),L.push(c),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,L)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,k))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const o=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,o,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&l){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=R,this.useMultisampledRTT=z}function Du(e,t){return{convert:function(n){let r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Or;const o=Zi.getTransfer(i);if(n===hn)return e.UNSIGNED_BYTE;if(n===An)return e.UNSIGNED_SHORT_4_4_4_4;if(n===xn)return e.UNSIGNED_SHORT_5_5_5_1;if(n===_n)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===dn)return e.BYTE;if(n===fn)return e.SHORT;if(n===pn)return e.UNSIGNED_SHORT;if(n===mn)return e.INT;if(n===gn)return e.UNSIGNED_INT;if(n===vn)return e.FLOAT;if(n===yn)return e.HALF_FLOAT;if(n===wn)return e.ALPHA;if(n===En)return e.RGB;if(n===Sn)return e.RGBA;if(n===Cn)return e.LUMINANCE;if(n===Mn)return e.LUMINANCE_ALPHA;if(n===Tn)return e.DEPTH_COMPONENT;if(n===In)return e.DEPTH_STENCIL;if(n===Bn)return e.RED;if(n===Pn)return e.RED_INTEGER;if(n===Rn)return e.RG;if(n===Dn)return e.RG_INTEGER;if(n===kn)return e.RGBA_INTEGER;if(n===Ln||n===Fn||n===zn||n===Un)if(o===Nr){if(r=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===r)return null;if(n===Ln)return r.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===Fn)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===zn)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Un)return r.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(r=t.get("WEBGL_compressed_texture_s3tc"),null===r)return null;if(n===Ln)return r.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===Fn)return r.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===zn)return r.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Un)return r.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===Nn||n===jn||n===Gn||n===Qn){if(r=t.get("WEBGL_compressed_texture_pvrtc"),null===r)return null;if(n===Nn)return r.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===jn)return r.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===Gn)return r.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===Qn)return r.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===Hn||n===Vn||n===Wn){if(r=t.get("WEBGL_compressed_texture_etc"),null===r)return null;if(n===Hn||n===Vn)return o===Nr?r.COMPRESSED_SRGB8_ETC2:r.COMPRESSED_RGB8_ETC2;if(n===Wn)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:r.COMPRESSED_RGBA8_ETC2_EAC}if(n===qn||n===Xn||n===Yn||n===Jn||n===Kn||n===Zn||n===$n||n===er||n===tr||n===nr||n===rr||n===ir||n===or||n===ar){if(r=t.get("WEBGL_compressed_texture_astc"),null===r)return null;if(n===qn)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:r.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===Xn)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:r.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===Yn)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:r.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===Jn)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:r.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===Kn)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:r.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===Zn)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:r.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===$n)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:r.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===er)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:r.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===tr)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:r.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===nr)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:r.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===rr)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:r.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===ir)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:r.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===or)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:r.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===ar)return o===Nr?r.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:r.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===sr||n===lr||n===cr){if(r=t.get("EXT_texture_compression_bptc"),null===r)return null;if(n===sr)return o===Nr?r.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:r.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===lr)return r.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===cr)return r.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===ur||n===hr||n===dr||n===fr){if(r=t.get("EXT_texture_compression_rgtc"),null===r)return null;if(n===sr)return r.COMPRESSED_RED_RGTC1_EXT;if(n===hr)return r.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===dr)return r.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===fr)return r.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===bn?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class Ou extends js{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isArrayCamera=!0,this.cameras=e}}class ku extends xa{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Lu={type:"move"};class Fu{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new ku,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new ku,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new vo,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new vo),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new ku,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new vo,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new vo),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(l&&e.hand){o=!0;for(const o of e.hand.values()){const e=t.getJointPose(o,n),r=this._getHandJoint(l,o);null!==e&&(r.matrix.fromArray(e.transform.matrix),r.matrix.decompose(r.position,r.rotation,r.scale),r.matrixWorldNeedsUpdate=!0,r.jointRadius=e.radius),r.visible=null!==e}const r=l.joints["index-finger-tip"],i=l.joints["thumb-tip"],a=r.position.distanceTo(i.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==s&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(s.matrix.fromArray(i.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale),s.matrixWorldNeedsUpdate=!0,i.linearVelocity?(s.hasLinearVelocity=!0,s.linearVelocity.copy(i.linearVelocity)):s.hasLinearVelocity=!1,i.angularVelocity?(s.hasAngularVelocity=!0,s.angularVelocity.copy(i.angularVelocity)):s.hasAngularVelocity=!1));null!==a&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(Lu)))}return null!==a&&(a.visible=null!==r),null!==s&&(s.visible=null!==i),null!==l&&(l.visible=null!==o),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new ku;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class zu{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new so;e.properties.get(r).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new Ls({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Is(new tl(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Uu extends Ci{constructor(e,t){super();const n=this;let r=null,i=1,o=null,a="local-floor",s=1,l=null,c=null,u=null,h=null,d=null,f=null;const p=new zu,m=t.getContextAttributes();let g=null,v=null;const y=[],A=[],x=new zi;let b=null;const _=new js;_.layers.enable(1),_.viewport=new lo;const w=new js;w.layers.enable(2),w.viewport=new lo;const E=[_,w],S=new Ou;S.layers.enable(1),S.layers.enable(2);let C=null,M=null;function T(e){const t=A.indexOf(e.inputSource);if(-1===t)return;const n=y[t];void 0!==n&&(n.update(e.inputSource,e.frame,l||o),n.dispatchEvent({type:e.type,data:e.inputSource}))}function I(){r.removeEventListener("select",T),r.removeEventListener("selectstart",T),r.removeEventListener("selectend",T),r.removeEventListener("squeeze",T),r.removeEventListener("squeezestart",T),r.removeEventListener("squeezeend",T),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",B);for(let e=0;e<y.length;e++){const t=A[e];null!==t&&(A[e]=null,y[e].disconnect(t))}C=null,M=null,p.reset(),e.setRenderTarget(g),d=null,h=null,u=null,r=null,v=null,k.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(x.width,x.height,!1),n.dispatchEvent({type:"sessionend"})}function B(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=A.indexOf(n);r>=0&&(A[r]=null,y[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=A.indexOf(n);if(-1===r){for(let e=0;e<y.length;e++){if(e>=A.length){A.push(n),r=e;break}if(null===A[e]){A[e]=n,r=e;break}}if(-1===r)break}const i=y[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=y[e];return void 0===t&&(t=new Fu,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new Fu,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new Fu,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){a=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return l||o},this.setReferenceSpace=function(e){l=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return f},this.getSession=function(){return r},this.setSession=async function(c){if(r=c,null!==r){if(g=e.getRenderTarget(),r.addEventListener("select",T),r.addEventListener("selectstart",T),r.addEventListener("selectend",T),r.addEventListener("squeeze",T),r.addEventListener("squeezestart",T),r.addEventListener("squeezeend",T),r.addEventListener("end",I),r.addEventListener("inputsourceschange",B),!0!==m.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(x),void 0===r.renderState.layers){const n={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),v=new uo(d.framebufferWidth,d.framebufferHeight,{format:Sn,type:hn,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let n=null,o=null,a=null;m.depth&&(a=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=m.stencil?In:Tn,o=m.stencil?bn:gn);const s={colorFormat:t.RGBA8,depthFormat:a,scaleFactor:i};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(s),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),v=new uo(h.textureWidth,h.textureHeight,{format:Sn,type:hn,depthTexture:new Ul(h.textureWidth,h.textureHeight,o,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}v.isXRRenderTarget=!0,this.setFoveation(s),l=null,o=await r.requestReferenceSpace(a),k.setContext(r),k.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode},this.getDepthTexture=function(){return p.getDepthTexture()};const P=new vo,R=new vo;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;let t=e.near,n=e.far;null!==p.texture&&(p.depthNear>0&&(t=p.depthNear),p.depthFar>0&&(n=p.depthFar)),S.near=w.near=_.near=t,S.far=w.far=_.far=n,C===S.near&&M===S.far||(r.updateRenderState({depthNear:S.near,depthFar:S.far}),C=S.near,M=S.far);const i=e.parent,o=S.cameras;D(S,i);for(let r=0;r<o.length;r++)D(o[r],i);2===o.length?function(e,t,n){P.setFromMatrixPosition(t.matrixWorld),R.setFromMatrixPosition(n.matrixWorld);const r=P.distanceTo(R),i=t.projectionMatrix.elements,o=n.projectionMatrix.elements,a=i[14]/(i[10]-1),s=i[14]/(i[10]+1),l=(i[9]+1)/i[5],c=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(o[8]+1)/o[0],d=a*u,f=a*h,p=r/(-u+h),m=p*-u;if(t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(p),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert(),-1===i[10])e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse);else{const t=a+p,n=s+p,i=d-m,o=f+(r-m),u=l*s/n*t,h=c*s/n*t;e.projectionMatrix.makePerspective(i,o,u,h,t,n),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}}(S,_,w):S.projectionMatrix.copy(_.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Bi*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,S,i)},this.getCamera=function(){return S},this.getFoveation=function(){if(null!==h||null!==d)return s},this.setFoveation=function(e){s=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==p.texture},this.getDepthSensingMesh=function(){return p.getMesh(S)};let O=null;const k=new $s;k.setAnimationLoop((function(t,i){if(c=i.getViewerPose(l||o),f=i,null!==c){const t=c.views;null!==d&&(e.setRenderTargetFramebuffer(v,d.framebuffer),e.setRenderTarget(v));let n=!1;t.length!==S.cameras.length&&(S.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let o=null;if(null!==d)o=d.getViewport(i);else{const t=u.getViewSubImage(h,i);o=t.viewport,0===r&&(e.setRenderTargetTextures(v,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(v))}let a=E[r];void 0===a&&(a=new js,a.layers.enable(r),a.viewport=new lo,E[r]=a),a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(i.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===r&&(S.matrix.copy(a.matrix),S.matrix.decompose(S.position,S.quaternion,S.scale)),!0===n&&S.cameras.push(a)}const i=r.enabledFeatures;if(i&&i.includes("depth-sensing")){const n=u.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&p.init(e,n,r.renderState)}}for(let e=0;e<y.length;e++){const t=A[e],n=y[e];null!==t&&void 0!==n&&n.update(t,i,l||o)}O&&O(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),f=null})),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}const Nu=new ra,ju=new qo;function Gu(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,r.side===Je&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),r.side===Je&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const i=t.get(r),o=i.envMap,a=i.envMapRotation;o&&(e.envMap.value=o,Nu.copy(a),Nu.x*=-1,Nu.y*=-1,Nu.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(Nu.y*=-1,Nu.z*=-1),e.envMapRotation.value.setFromMatrix4(ju.makeRotationFromEuler(Nu)),e.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Os(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,o,a,s){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===Je&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,s)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,o,a):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function Qu(e,t,n,r){let i={},o={},a=[];const s=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function l(e,t,n,r){const i=e.value,o=t+"_"+n;if(void 0===r[o])return r[o]="number"===typeof i||"boolean"===typeof i?i:i.clone(),!0;{const e=r[o];if("number"===typeof i||"boolean"===typeof i){if(e!==i)return r[o]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function c(e){const t={boundary:0,storage:0};return"number"===typeof e||"boolean"===typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=a.indexOf(n.__bindingPointIndex);a.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete o[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let o=0,a=t.length;o<a;o++){const e=Array.isArray(t[o])?t[o]:[t[o]];for(let t=0,i=e.length;t<i;t++){const i=e[t],o=Array.isArray(i.value)?i.value:[i.value];for(let e=0,t=o.length;e<t;e++){const t=c(o[e]),a=n%r,s=a%t.boundary,l=a+s;n+=s,0!==l&&r-l<t.storage&&(n+=r-l),i.__data=new Float32Array(t.storage/Float32Array.BYTES_PER_ELEMENT),i.__offset=n,n+=t.storage}}}const i=n%r;i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<s;e++)if(-1===a.indexOf(e))return a.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,o=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,o),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const f=h.program;r.updateUBOMapping(n,f);const p=t.render.frame;o[n.id]!==p&&(!function(t){const n=i[t.id],r=t.uniforms,o=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let i=0,a=r.length;i<a;i++){const t=Array.isArray(r[i])?r[i]:[r[i]];for(let n=0,r=t.length;n<r;n++){const r=t[n];if(!0===l(r,i,n,o)){const t=r.__offset,n=Array.isArray(r.value)?r.value:[r.value];let i=0;for(let o=0;o<n.length;o++){const a=n[o],s=c(a);"number"===typeof a||"boolean"===typeof a?(r.__data[0]=a,e.bufferSubData(e.UNIFORM_BUFFER,t+i,r.__data)):a.isMatrix3?(r.__data[0]=a.elements[0],r.__data[1]=a.elements[1],r.__data[2]=a.elements[2],r.__data[3]=0,r.__data[4]=a.elements[3],r.__data[5]=a.elements[4],r.__data[6]=a.elements[5],r.__data[7]=0,r.__data[8]=a.elements[6],r.__data[9]=a.elements[7],r.__data[10]=a.elements[8],r.__data[11]=0):(a.toArray(r.__data,i),i+=s.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,r.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),o[n.id]=p)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);a=[],i={},o={}}}}class Hu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{canvas:t=Vi(),context:n=null,depth:r=!0,stencil:i=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:s=!0,preserveDrawingBuffer:l=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:u=!1}=e;let h;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!==typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=n.getContextAttributes().alpha}else h=o;const d=new Uint32Array(4),f=new Int32Array(4);let p=null,m=null;const g=[],v=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=kr,this.toneMapping=kt,this.toneMappingExposure=1;const y=this;let A=!1,x=0,b=0,_=null,w=-1,E=null;const S=new lo,C=new lo;let M=null;const T=new La(0);let I=0,B=t.width,P=t.height,R=1,D=null,O=null;const k=new lo(0,0,B,P),L=new lo(0,0,B,P);let F=!1;const z=new Zs;let U=!1,N=!1;const j=new qo,G=new vo,Q=new lo,H={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let V=!1;function W(){return null===_?R:1}let q,X,Y,J,K,Z,$,ee,te,ne,re,ie,oe,ae,se,le,ce,ue,he,de,fe,pe,me,ge,ve=n;function ye(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:r,stencil:i,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${ze}`),t.addEventListener("webglcontextlost",be,!1),t.addEventListener("webglcontextrestored",_e,!1),t.addEventListener("webglcontextcreationerror",we,!1),null===ve){const t="webgl2";if(ve=ye(t,e),null===ve)throw ye(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Wy){throw console.error("THREE.WebGLRenderer: "+Wy.message),Wy}function Ae(){q=new Dl(ve),q.init(),pe=new Du(ve,q),X=new hl(ve,q,e,pe),Y=new Iu(ve),J=new Ll(ve),K=new mu,Z=new Ru(ve,q,Y,K,X,pe,J),$=new fl(y),ee=new Rl(y),te=new el(ve),me=new cl(ve,te),ne=new Ol(ve,te,J,me),re=new zl(ve,ne,te,J),he=new Fl(ve,X,Z),le=new dl(K),ie=new pu(y,$,ee,q,X,me,le),oe=new Gu(y,K),ae=new Au,se=new Su(q),ue=new ll(y,$,ee,Y,re,h,s),ce=new Tu(y,re,X),ge=new Qu(ve,J,X,Y),de=new ul(ve,q,J),fe=new kl(ve,q,J),J.programs=ie.programs,y.capabilities=X,y.extensions=q,y.properties=K,y.renderLists=ae,y.shadowMap=ce,y.state=Y,y.info=J}Ae();const xe=new Uu(y,ve);function be(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),A=!0}function _e(){console.log("THREE.WebGLRenderer: Context Restored."),A=!1;const e=J.autoReset,t=ce.enabled,n=ce.autoUpdate,r=ce.needsUpdate,i=ce.type;Ae(),J.autoReset=e,ce.enabled=t,ce.autoUpdate=n,ce.needsUpdate=r,ce.type=i}function we(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Ee(e){const t=e.target;t.removeEventListener("dispose",Ee),function(e){(function(e){const t=K.get(e).programs;void 0!==t&&(t.forEach((function(e){ie.releaseProgram(e)})),e.isShaderMaterial&&ie.releaseShaderCache(e))})(e),K.remove(e)}(t)}function Se(e,t,n){!0===e.transparent&&e.side===Ke&&!1===e.forceSinglePass?(e.side=Je,e.needsUpdate=!0,ke(e,t,n),e.side=Ye,e.needsUpdate=!0,ke(e,t,n),e.side=Ke):ke(e,t,n)}this.xr=xe,this.getContext=function(){return ve},this.getContextAttributes=function(){return ve.getContextAttributes()},this.forceContextLoss=function(){const e=q.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=q.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return R},this.setPixelRatio=function(e){void 0!==e&&(R=e,this.setSize(B,P,!1))},this.getSize=function(e){return e.set(B,P)},this.setSize=function(e,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];xe.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(B=e,P=n,t.width=Math.floor(e*R),t.height=Math.floor(n*R),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(B*R,P*R).floor()},this.setDrawingBufferSize=function(e,n,r){B=e,P=n,R=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(S)},this.getViewport=function(e){return e.copy(k)},this.setViewport=function(e,t,n,r){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,r),Y.viewport(S.copy(k).multiplyScalar(R).round())},this.getScissor=function(e){return e.copy(L)},this.setScissor=function(e,t,n,r){e.isVector4?L.set(e.x,e.y,e.z,e.w):L.set(e,t,n,r),Y.scissor(C.copy(L).multiplyScalar(R).round())},this.getScissorTest=function(){return F},this.setScissorTest=function(e){Y.setScissorTest(F=e)},this.setOpaqueSort=function(e){D=e},this.setTransparentSort=function(e){O=e},this.getClearColor=function(e){return e.copy(ue.getClearColor())},this.setClearColor=function(){ue.setClearColor.apply(ue,arguments)},this.getClearAlpha=function(){return ue.getClearAlpha()},this.setClearAlpha=function(){ue.setClearAlpha.apply(ue,arguments)},this.clear=function(){let e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=0;if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){let e=!1;if(null!==_){const t=_.texture.format;e=t===kn||t===Dn||t===Pn}if(e){const e=_.texture.type,t=e===hn||e===gn||e===pn||e===bn||e===An||e===xn,n=ue.getClearColor(),r=ue.getClearAlpha(),i=n.r,o=n.g,a=n.b;t?(d[0]=i,d[1]=o,d[2]=a,d[3]=r,ve.clearBufferuiv(ve.COLOR,0,d)):(f[0]=i,f[1]=o,f[2]=a,f[3]=r,ve.clearBufferiv(ve.COLOR,0,f))}else n|=ve.COLOR_BUFFER_BIT}e&&(n|=ve.DEPTH_BUFFER_BIT),t&&(n|=ve.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),ve.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",be,!1),t.removeEventListener("webglcontextrestored",_e,!1),t.removeEventListener("webglcontextcreationerror",we,!1),ae.dispose(),se.dispose(),K.dispose(),$.dispose(),ee.dispose(),re.dispose(),me.dispose(),ge.dispose(),ie.dispose(),xe.dispose(),xe.removeEventListener("sessionstart",Me),xe.removeEventListener("sessionend",Te),Ie.stop()},this.renderBufferDirect=function(e,t,n,r,i,o){null===t&&(t=H);const a=i.isMesh&&i.matrixWorld.determinant()<0,s=function(e,t,n,r,i){!0!==t.isScene&&(t=H);Z.resetTextureUnits();const o=t.fog,a=r.isMeshStandardMaterial?t.environment:null,s=null===_?y.outputColorSpace:!0===_.isXRRenderTarget?_.texture.colorSpace:Lr,l=(r.isMeshStandardMaterial?ee:$).get(r.envMap||a),c=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,f=!!n.morphAttributes.color;let p=kt;r.toneMapped&&(null!==_&&!0!==_.isXRRenderTarget||(p=y.toneMapping));const g=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,v=void 0!==g?g.length:0,A=K.get(r),x=m.state.lights;if(!0===U&&(!0===N||e!==E)){const t=e===E&&r.id===w;le.setState(r,e,t)}let b=!1;r.version===A.__version?A.needsLights&&A.lightsStateVersion!==x.state.version||A.outputColorSpace!==s||i.isBatchedMesh&&!1===A.batching?b=!0:i.isBatchedMesh||!0!==A.batching?i.isBatchedMesh&&!0===A.batchingColor&&null===i.colorTexture||i.isBatchedMesh&&!1===A.batchingColor&&null!==i.colorTexture||i.isInstancedMesh&&!1===A.instancing?b=!0:i.isInstancedMesh||!0!==A.instancing?i.isSkinnedMesh&&!1===A.skinning?b=!0:i.isSkinnedMesh||!0!==A.skinning?i.isInstancedMesh&&!0===A.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===A.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===A.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===A.instancingMorph&&null!==i.morphTexture||A.envMap!==l||!0===r.fog&&A.fog!==o?b=!0:void 0===A.numClippingPlanes||A.numClippingPlanes===le.numPlanes&&A.numIntersection===le.numIntersection?(A.vertexAlphas!==c||A.vertexTangents!==u||A.morphTargets!==h||A.morphNormals!==d||A.morphColors!==f||A.toneMapping!==p||A.morphTargetsCount!==v)&&(b=!0):b=!0:b=!0:b=!0:b=!0:(b=!0,A.__version=r.version);let S=A.currentProgram;!0===b&&(S=ke(r,t,i));let C=!1,M=!1,T=!1;const I=S.getUniforms(),B=A.uniforms;Y.useProgram(S.program)&&(C=!0,M=!0,T=!0);r.id!==w&&(w=r.id,M=!0);if(C||E!==e){I.setValue(ve,"projectionMatrix",e.projectionMatrix),I.setValue(ve,"viewMatrix",e.matrixWorldInverse);const t=I.map.cameraPosition;void 0!==t&&t.setValue(ve,G.setFromMatrixPosition(e.matrixWorld)),X.logarithmicDepthBuffer&&I.setValue(ve,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&I.setValue(ve,"isOrthographic",!0===e.isOrthographicCamera),E!==e&&(E=e,M=!0,T=!0)}if(i.isSkinnedMesh){I.setOptional(ve,i,"bindMatrix"),I.setOptional(ve,i,"bindMatrixInverse");const e=i.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),I.setValue(ve,"boneTexture",e.boneTexture,Z))}i.isBatchedMesh&&(I.setOptional(ve,i,"batchingTexture"),I.setValue(ve,"batchingTexture",i._matricesTexture,Z),I.setOptional(ve,i,"batchingIdTexture"),I.setValue(ve,"batchingIdTexture",i._indirectTexture,Z),I.setOptional(ve,i,"batchingColorTexture"),null!==i._colorsTexture&&I.setValue(ve,"batchingColorTexture",i._colorsTexture,Z));const D=n.morphAttributes;void 0===D.position&&void 0===D.normal&&void 0===D.color||he.update(i,n,S);(M||A.receiveShadow!==i.receiveShadow)&&(A.receiveShadow=i.receiveShadow,I.setValue(ve,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(B.envMap.value=l,B.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(B.envMapIntensity.value=t.environmentIntensity);M&&(I.setValue(ve,"toneMappingExposure",y.toneMappingExposure),A.needsLights&&function(e,t){e.ambientLightColor.needsUpdate=t,e.lightProbe.needsUpdate=t,e.directionalLights.needsUpdate=t,e.directionalLightShadows.needsUpdate=t,e.pointLights.needsUpdate=t,e.pointLightShadows.needsUpdate=t,e.spotLights.needsUpdate=t,e.spotLightShadows.needsUpdate=t,e.rectAreaLights.needsUpdate=t,e.hemisphereLights.needsUpdate=t}(B,T),o&&!0===r.fog&&oe.refreshFogUniforms(B,o),oe.refreshMaterialUniforms(B,r,R,P,m.state.transmissionRenderTarget[e.id]),Hc.upload(ve,Le(A),B,Z));r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(Hc.upload(ve,Le(A),B,Z),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&I.setValue(ve,"center",i.center);if(I.setValue(ve,"modelViewMatrix",i.modelViewMatrix),I.setValue(ve,"normalMatrix",i.normalMatrix),I.setValue(ve,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];ge.update(n,S),ge.bind(n,S)}}return S}(e,t,n,r,i);Y.setMaterial(r,a);let l=n.index,c=1;if(!0===r.wireframe){if(l=ne.getWireframeAttribute(n),void 0===l)return;c=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*c,f=(u.start+u.count)*c;null!==o&&(d=Math.max(d,o.start*c),f=Math.min(f,(o.start+o.count)*c)),null!==l?(d=Math.max(d,0),f=Math.min(f,l.count)):void 0!==h&&null!==h&&(d=Math.max(d,0),f=Math.min(f,h.count));const p=f-d;if(p<0||p===1/0)return;let g;me.setup(i,r,s,n,l);let v=de;if(null!==l&&(g=te.get(l),v=fe,v.setIndex(g)),i.isMesh)!0===r.wireframe?(Y.setLineWidth(r.wireframeLinewidth*W()),v.setMode(ve.LINES)):v.setMode(ve.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),Y.setLineWidth(e*W()),i.isLineSegments?v.setMode(ve.LINES):i.isLineLoop?v.setMode(ve.LINE_LOOP):v.setMode(ve.LINE_STRIP)}else i.isPoints?v.setMode(ve.POINTS):i.isSprite&&v.setMode(ve.TRIANGLES);if(i.isBatchedMesh)if(null!==i._multiDrawInstances)v.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances);else if(q.get("WEBGL_multi_draw"))v.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else{const e=i._multiDrawStarts,t=i._multiDrawCounts,n=i._multiDrawCount,o=l?te.get(l).bytesPerElement:1,a=K.get(r).currentProgram.getUniforms();for(let r=0;r<n;r++)a.setValue(ve,"_gl_DrawID",r),v.render(e[r]/o,t[r])}else if(i.isInstancedMesh)v.renderInstances(d,p,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);v.renderInstances(d,p,t)}else v.render(d,p)},this.compile=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null===n&&(n=e),m=se.get(n),m.init(t),v.push(m),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(m.pushLight(e),e.castShadow&&m.pushShadow(e))})),m.setupLights();const r=new Set;return e.traverse((function(e){const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const o=t[i];Se(o,n,e),r.add(o)}else Se(t,n,e),r.add(t)})),v.pop(),m=null,r},this.compileAsync=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const r=this.compile(e,t,n);return new Promise((t=>{function n(){r.forEach((function(e){K.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==q.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let Ce=null;function Me(){Ie.stop()}function Te(){Ie.start()}const Ie=new $s;function Be(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)m.pushLight(e),e.castShadow&&m.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||z.intersectsSprite(e)){r&&Q.setFromMatrixPosition(e.matrixWorld).applyMatrix4(j);const t=re.update(e),i=e.material;i.visible&&p.push(e,t,i,n,Q.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||z.intersectsObject(e))){const t=re.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),Q.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),Q.copy(t.boundingSphere.center)),Q.applyMatrix4(e.matrixWorld).applyMatrix4(j)),Array.isArray(i)){const r=t.groups;for(let o=0,a=r.length;o<a;o++){const a=r[o],s=i[a.materialIndex];s&&s.visible&&p.push(e,t,s,n,Q.z,a)}}else i.visible&&p.push(e,t,i,n,Q.z,null)}const i=e.children;for(let o=0,a=i.length;o<a;o++)Be(i[o],t,n,r)}function Pe(e,t,n,r){const i=e.opaque,o=e.transmissive,a=e.transparent;m.setupLightsView(n),!0===U&&le.setGlobalState(y.clippingPlanes,n),r&&Y.viewport(S.copy(r)),i.length>0&&De(i,t,n),o.length>0&&De(o,t,n),a.length>0&&De(a,t,n),Y.buffers.depth.setTest(!0),Y.buffers.depth.setMask(!0),Y.buffers.color.setMask(!0),Y.setPolygonOffset(!1)}function Re(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===m.state.transmissionRenderTarget[r.id]&&(m.state.transmissionRenderTarget[r.id]=new uo(1,1,{generateMipmaps:!0,type:q.has("EXT_color_buffer_half_float")||q.has("EXT_color_buffer_float")?yn:hn,minFilter:cn,samples:4,stencilBuffer:i,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Zi.workingColorSpace}));const o=m.state.transmissionRenderTarget[r.id],a=r.viewport||S;o.setSize(a.z,a.w);const s=y.getRenderTarget();y.setRenderTarget(o),y.getClearColor(T),I=y.getClearAlpha(),I<1&&y.setClearColor(16777215,.5),y.clear(),V&&ue.render(n);const l=y.toneMapping;y.toneMapping=kt;const c=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),m.setupLightsView(r),!0===U&&le.setGlobalState(y.clippingPlanes,r),De(e,n,r),Z.updateMultisampleRenderTarget(o),Z.updateRenderTargetMipmap(o),!1===q.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=o.object,s=o.geometry,l=o.material,c=o.group;if(l.side===Ke&&a.layers.test(r.layers)){const t=l.side;l.side=Je,l.needsUpdate=!0,Oe(a,n,r,s,l,c),l.side=t,l.needsUpdate=!0,e=!0}}!0===e&&(Z.updateMultisampleRenderTarget(o),Z.updateRenderTargetMipmap(o))}y.setRenderTarget(s),y.setClearColor(T,I),void 0!==c&&(r.viewport=c),y.toneMapping=l}function De(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,o=e.length;i<o;i++){const o=e[i],a=o.object,s=o.geometry,l=null===r?o.material:r,c=o.group;a.layers.test(n.layers)&&Oe(a,t,n,s,l,c)}}function Oe(e,t,n,r,i,o){e.onBeforeRender(y,t,n,r,i,o),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(y,t,n,r,e,o),!0===i.transparent&&i.side===Ke&&!1===i.forceSinglePass?(i.side=Je,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,o),i.side=Ye,i.needsUpdate=!0,y.renderBufferDirect(n,t,r,i,e,o),i.side=Ke):y.renderBufferDirect(n,t,r,i,e,o),e.onAfterRender(y,t,n,r,i,o)}function ke(e,t,n){!0!==t.isScene&&(t=H);const r=K.get(e),i=m.state.lights,o=m.state.shadowsArray,a=i.state.version,s=ie.getParameters(e,i.state,o,t,n),l=ie.getProgramCacheKey(s);let c=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ee:$).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===c&&(e.addEventListener("dispose",Ee),c=new Map,r.programs=c);let u=c.get(l);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===a)return Fe(e,s),u}else s.uniforms=ie.getUniforms(e),e.onBeforeCompile(s,y),u=ie.acquireProgram(s,l),c.set(l,u),r.uniforms=s.uniforms;const h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=le.uniform),Fe(e,s),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=a,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function Le(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=Hc.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Fe(e,t){const n=K.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ie.setAnimationLoop((function(e){Ce&&Ce(e)})),"undefined"!==typeof self&&Ie.setContext(self),this.setAnimationLoop=function(e){Ce=e,xe.setAnimationLoop(e),null===e?Ie.stop():Ie.start()},xe.addEventListener("sessionstart",Me),xe.addEventListener("sessionend",Te),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===A)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===xe.enabled&&!0===xe.isPresenting&&(!0===xe.cameraAutoUpdate&&xe.updateCamera(t),t=xe.getCamera()),!0===e.isScene&&e.onBeforeRender(y,e,t,_),m=se.get(e,v.length),m.init(t),v.push(m),j.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),z.setFromProjectionMatrix(j),N=this.localClippingEnabled,U=le.init(this.clippingPlanes,N),p=ae.get(e,g.length),p.init(),g.push(p),!0===xe.enabled&&!0===xe.isPresenting){const e=y.xr.getDepthSensingMesh();null!==e&&Be(e,t,-1/0,y.sortObjects)}Be(e,t,0,y.sortObjects),p.finish(),!0===y.sortObjects&&p.sort(D,O),V=!1===xe.enabled||!1===xe.isPresenting||!1===xe.hasDepthSensing(),V&&ue.addToRenderList(p,e),this.info.render.frame++,!0===U&&le.beginShadows();const n=m.state.shadowsArray;ce.render(n,e,t),!0===U&&le.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=p.opaque,i=p.transmissive;if(m.setupLights(),t.isArrayCamera){const n=t.cameras;if(i.length>0)for(let t=0,o=n.length;t<o;t++){Re(r,i,e,n[t])}V&&ue.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];Pe(p,e,r,r.viewport)}}else i.length>0&&Re(r,i,e,t),V&&ue.render(e),Pe(p,e,t);null!==_&&(Z.updateMultisampleRenderTarget(_),Z.updateRenderTargetMipmap(_)),!0===e.isScene&&e.onAfterRender(y,e,t),me.resetDefaultState(),w=-1,E=null,v.pop(),v.length>0?(m=v[v.length-1],!0===U&&le.setGlobalState(y.clippingPlanes,m.state.camera)):m=null,g.pop(),p=g.length>0?g[g.length-1]:null},this.getActiveCubeFace=function(){return x},this.getActiveMipmapLevel=function(){return b},this.getRenderTarget=function(){return _},this.setRenderTargetTextures=function(e,t,n){K.get(e.texture).__webglTexture=t,K.get(e.depthTexture).__webglTexture=n;const r=K.get(e);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===q.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const n=K.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_=e,x=t,b=n;let r=!0,i=null,o=!1,a=!1;if(e){const s=K.get(e);if(void 0!==s.__useDefaultFramebuffer)Y.bindFramebuffer(ve.FRAMEBUFFER,null),r=!1;else if(void 0===s.__webglFramebuffer)Z.setupRenderTarget(e);else if(s.__hasExternalTextures)Z.rebindTextures(e,K.get(e.texture).__webglTexture,K.get(e.depthTexture).__webglTexture);else if(e.depthBuffer){const t=e.depthTexture;if(s.__boundDepthTexture!==t){if(null!==t&&K.has(t)&&(e.width!==t.image.width||e.height!==t.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Z.setupDepthRenderbuffer(e)}}const l=e.texture;(l.isData3DTexture||l.isDataArrayTexture||l.isCompressedArrayTexture)&&(a=!0);const c=K.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(c[t])?c[t][n]:c[t],o=!0):i=e.samples>0&&!1===Z.useMultisampledRTT(e)?K.get(e).__webglMultisampledFramebuffer:Array.isArray(c)?c[n]:c,S.copy(e.viewport),C.copy(e.scissor),M=e.scissorTest}else S.copy(k).multiplyScalar(R).floor(),C.copy(L).multiplyScalar(R).floor(),M=F;if(Y.bindFramebuffer(ve.FRAMEBUFFER,i)&&r&&Y.drawBuffers(e,i),Y.viewport(S),Y.scissor(C),Y.setScissorTest(M),o){const r=K.get(e.texture);ve.framebufferTexture2D(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,ve.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(a){const r=K.get(e.texture),i=t||0;ve.framebufferTextureLayer(ve.FRAMEBUFFER,ve.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}w=-1},this.readRenderTargetPixels=function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=K.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){Y.bindFramebuffer(ve.FRAMEBUFFER,s);try{const a=e.texture,s=a.format,l=a.type;if(!X.textureFormatReadable(s))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(l))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&ve.readPixels(t,n,r,i,pe.convert(s),pe.convert(l),o)}finally{const e=null!==_?K.get(_).__webglFramebuffer:null;Y.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,i,o,a){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=K.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){Y.bindFramebuffer(ve.FRAMEBUFFER,s);try{const a=e.texture,s=a.format,l=a.type;if(!X.textureFormatReadable(s))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!X.textureTypeReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i){const e=ve.createBuffer();ve.bindBuffer(ve.PIXEL_PACK_BUFFER,e),ve.bufferData(ve.PIXEL_PACK_BUFFER,o.byteLength,ve.STREAM_READ),ve.readPixels(t,n,r,i,pe.convert(s),pe.convert(l),0),ve.flush();const a=ve.fenceSync(ve.SYNC_GPU_COMMANDS_COMPLETE,0);await function(e,t,n){return new Promise((function(r,i){setTimeout((function o(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:i();break;case e.TIMEOUT_EXPIRED:setTimeout(o,n);break;default:r()}}),n)}))}(ve,a,4);try{ve.bindBuffer(ve.PIXEL_PACK_BUFFER,e),ve.getBufferSubData(ve.PIXEL_PACK_BUFFER,0,o)}finally{ve.deleteBuffer(e),ve.deleteSync(a)}return o}}finally{const e=null!==_?K.get(_).__webglFramebuffer:null;Y.bindFramebuffer(ve.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!0!==e.isTexture&&(qi("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),o=Math.floor(e.image.height*r),a=null!==t?t.x:0,s=null!==t?t.y:0;Z.setTexture2D(e,0),ve.copyTexSubImage2D(ve.TEXTURE_2D,n,0,0,a,s,i,o),Y.unbindTexture()},this.copyTextureToTexture=function(e,t){let n,r,i,o,a,s,l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!0!==e.isTexture&&(qi("WebGLRenderer: copyTextureToTexture function signature has changed."),c=arguments[0]||null,e=arguments[1],t=arguments[2],u=arguments[3]||0,l=null),null!==l?(n=l.max.x-l.min.x,r=l.max.y-l.min.y,i=l.min.x,o=l.min.y):(n=e.image.width,r=e.image.height,i=0,o=0),null!==c?(a=c.x,s=c.y):(a=0,s=0);const h=pe.convert(t.format),d=pe.convert(t.type);Z.setTexture2D(t,0),ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,t.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,t.unpackAlignment);const f=ve.getParameter(ve.UNPACK_ROW_LENGTH),p=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),m=ve.getParameter(ve.UNPACK_SKIP_PIXELS),g=ve.getParameter(ve.UNPACK_SKIP_ROWS),v=ve.getParameter(ve.UNPACK_SKIP_IMAGES),y=e.isCompressedTexture?e.mipmaps[u]:e.image;ve.pixelStorei(ve.UNPACK_ROW_LENGTH,y.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,y.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,i),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,o),e.isDataTexture?ve.texSubImage2D(ve.TEXTURE_2D,u,a,s,n,r,h,d,y.data):e.isCompressedTexture?ve.compressedTexSubImage2D(ve.TEXTURE_2D,u,a,s,y.width,y.height,h,y.data):ve.texSubImage2D(ve.TEXTURE_2D,u,a,s,n,r,h,d,y),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,f),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,p),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,m),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,g),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,v),0===u&&t.generateMipmaps&&ve.generateMipmap(ve.TEXTURE_2D),Y.unbindTexture()},this.copyTextureToTexture3D=function(e,t){let n,r,i,o,a,s,l,c,u,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,f=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!0!==e.isTexture&&(qi("WebGLRenderer: copyTextureToTexture3D function signature has changed."),h=arguments[0]||null,d=arguments[1]||null,e=arguments[2],t=arguments[3],f=arguments[4]||0);const p=e.isCompressedTexture?e.mipmaps[f]:e.image;null!==h?(n=h.max.x-h.min.x,r=h.max.y-h.min.y,i=h.max.z-h.min.z,o=h.min.x,a=h.min.y,s=h.min.z):(n=p.width,r=p.height,i=p.depth,o=0,a=0,s=0),null!==d?(l=d.x,c=d.y,u=d.z):(l=0,c=0,u=0);const m=pe.convert(t.format),g=pe.convert(t.type);let v;if(t.isData3DTexture)Z.setTexture3D(t,0),v=ve.TEXTURE_3D;else{if(!t.isDataArrayTexture&&!t.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");Z.setTexture2DArray(t,0),v=ve.TEXTURE_2D_ARRAY}ve.pixelStorei(ve.UNPACK_FLIP_Y_WEBGL,t.flipY),ve.pixelStorei(ve.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),ve.pixelStorei(ve.UNPACK_ALIGNMENT,t.unpackAlignment);const y=ve.getParameter(ve.UNPACK_ROW_LENGTH),A=ve.getParameter(ve.UNPACK_IMAGE_HEIGHT),x=ve.getParameter(ve.UNPACK_SKIP_PIXELS),b=ve.getParameter(ve.UNPACK_SKIP_ROWS),_=ve.getParameter(ve.UNPACK_SKIP_IMAGES);ve.pixelStorei(ve.UNPACK_ROW_LENGTH,p.width),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,p.height),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,o),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,a),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,s),e.isDataTexture||e.isData3DTexture?ve.texSubImage3D(v,f,l,c,u,n,r,i,m,g,p.data):t.isCompressedArrayTexture?ve.compressedTexSubImage3D(v,f,l,c,u,n,r,i,m,p.data):ve.texSubImage3D(v,f,l,c,u,n,r,i,m,g,p),ve.pixelStorei(ve.UNPACK_ROW_LENGTH,y),ve.pixelStorei(ve.UNPACK_IMAGE_HEIGHT,A),ve.pixelStorei(ve.UNPACK_SKIP_PIXELS,x),ve.pixelStorei(ve.UNPACK_SKIP_ROWS,b),ve.pixelStorei(ve.UNPACK_SKIP_IMAGES,_),0===f&&t.generateMipmaps&&ve.generateMipmap(v),Y.unbindTexture()},this.initRenderTarget=function(e){void 0===K.get(e).__webglFramebuffer&&Z.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?Z.setTextureCube(e,0):e.isData3DTexture?Z.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?Z.setTexture2DArray(e,0):Z.setTexture2D(e,0),Y.unbindTexture()},this.resetState=function(){x=0,b=0,_=null,Y.reset(),me.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ei}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Fr?"display-p3":"srgb",t.unpackColorSpace=Zi.workingColorSpace===zr?"display-p3":"srgb"}}class Vu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25e-5;this.isFogExp2=!0,this.name="",this.color=new La(e),this.density=t}clone(){return new Vu(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Wu{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;this.isFog=!0,this.name="",this.color=new La(e),this.near=t,this.far=n}clone(){return new Wu(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class qu extends xa{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new ra,this.environmentIntensity=1,this.environmentRotation=new ra,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Xu{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=fi,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=Pi()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return qi("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Pi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Pi()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Yu=new vo;class Ju{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)Yu.fromBufferAttribute(this,t),Yu.applyMatrix4(e),this.setXYZ(t,Yu.x,Yu.y,Yu.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Yu.fromBufferAttribute(this,t),Yu.applyNormalMatrix(e),this.setXYZ(t,Yu.x,Yu.y,Yu.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Yu.fromBufferAttribute(this,t),Yu.transformDirection(e),this.setXYZ(t,Yu.x,Yu.y,Yu.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=ki(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Li(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Li(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Li(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Li(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Li(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=ki(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=ki(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=ki(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=ki(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Li(t,this.array),n=Li(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Li(t,this.array),n=Li(n,this.array),r=Li(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Li(t,this.array),n=Li(n,this.array),r=Li(r,this.array),i=Li(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new Xa(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Ju(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ku extends Ua{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new La(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Zu;const $u=new vo,eh=new vo,th=new vo,nh=new zi,rh=new zi,ih=new qo,oh=new vo,ah=new vo,sh=new vo,lh=new zi,ch=new zi,uh=new zi;class hh extends xa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ku;if(super(),this.isSprite=!0,this.type="Sprite",void 0===Zu){Zu=new hs;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new Xu(e,5);Zu.setIndex([0,1,2,0,2,3]),Zu.setAttribute("position",new Ju(t,3,0,!1)),Zu.setAttribute("uv",new Ju(t,2,3,!1))}this.geometry=Zu,this.material=e,this.center=new zi(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),eh.setFromMatrixScale(this.matrixWorld),ih.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),th.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&eh.multiplyScalar(-th.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const o=this.center;dh(oh.set(-.5,-.5,0),th,o,eh,r,i),dh(ah.set(.5,-.5,0),th,o,eh,r,i),dh(sh.set(.5,.5,0),th,o,eh,r,i),lh.set(0,0),ch.set(1,0),uh.set(1,1);let a=e.ray.intersectTriangle(oh,ah,sh,!1,$u);if(null===a&&(dh(ah.set(-.5,.5,0),th,o,eh,r,i),ch.set(0,1),a=e.ray.intersectTriangle(oh,sh,ah,!1,$u),null===a))return;const s=e.ray.origin.distanceTo($u);s<e.near||s>e.far||t.push({distance:s,point:$u.clone(),uv:Pa.getInterpolation($u,oh,ah,sh,lh,ch,uh,new zi),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function dh(e,t,n,r,i,o){nh.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(rh.x=o*nh.x-i*nh.y,rh.y=i*nh.x+o*nh.y):rh.copy(nh),e.copy(t),e.x+=rh.x,e.y+=rh.y,e.applyMatrix4(ih)}const fh=new vo,ph=new vo;class mh extends xa{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const e=t[n];this.addLevel(e.object.clone(),e.distance,e.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){fh.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(fh);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){fh.setFromMatrixPosition(e.matrixWorld),ph.setFromMatrixPosition(this.matrixWorld);const n=fh.distanceTo(ph)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,i=n.length;r<i;r++){const e=n[r];t.object.levels.push({object:e.object.uuid,distance:e.distance,hysteresis:e.hysteresis})}return t}}const gh=new vo,vh=new lo,yh=new lo,Ah=new vo,xh=new qo,bh=new vo,_h=new zo,wh=new qo,Eh=new Wo;class Sh extends Is{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=Qt,this.bindMatrix=new qo,this.bindMatrixInverse=new qo,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new xo),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,bh),this.boundingBox.expandByPoint(bh)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new zo),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,bh),this.boundingSphere.expandByPoint(bh)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),_h.copy(this.boundingSphere),_h.applyMatrix4(r),!1!==e.ray.intersectsSphere(_h)&&(wh.copy(r).invert(),Eh.copy(e.ray).applyMatrix4(wh),null!==this.boundingBox&&!1===Eh.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Eh)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new lo,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===Qt?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===Ht?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;vh.fromBufferAttribute(r.attributes.skinIndex,e),yh.fromBufferAttribute(r.attributes.skinWeight,e),gh.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let i=0;i<4;i++){const e=yh.getComponent(i);if(0!==e){const r=vh.getComponent(i);xh.multiplyMatrices(n.bones[r].matrixWorld,n.boneInverses[r]),t.addScaledVector(Ah.copy(gh).applyMatrix4(xh),e)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Ch extends xa{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Mh extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(null,arguments.length>5?arguments[5]:void 0,arguments.length>6?arguments[6]:void 0,arguments.length>7?arguments[7]:void 0,arguments.length>8&&void 0!==arguments[8]?arguments[8]:en,arguments.length>9&&void 0!==arguments[9]?arguments[9]:en,arguments.length>3?arguments[3]:void 0,arguments.length>4?arguments[4]:void 0,arguments.length>10?arguments[10]:void 0,arguments.length>11?arguments[11]:void 0),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Th=new qo,Ih=new qo;class Bh{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.uuid=Pi(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new qo)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new qo;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let i=0,o=e.length;i<o;i++){const r=e[i]?e[i].matrixWorld:Ih;Th.multiplyMatrices(r,t[i]),Th.toArray(n,16*i)}null!==r&&(r.needsUpdate=!0)}clone(){return new Bh(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Mh(t,e,e,Sn,vn);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Ch),this.bones.push(i),this.boneInverses.push((new qo).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const o=n[r];e.boneInverses.push(o.toArray())}return e}}class Ph extends Xa{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Rh=new qo,Dh=new qo,Oh=[],kh=new xo,Lh=new qo,Fh=new Is,zh=new zo;class Uh extends Is{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Ph(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,Lh)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new xo),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Rh),kh.copy(e.boundingBox).applyMatrix4(Rh),this.boundingBox.union(kh)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new zo),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Rh),zh.copy(e.boundingSphere).applyMatrix4(Rh),this.boundingSphere.union(zh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=e*(n.length+1)+1;for(let o=0;o<n.length;o++)n[o]=r[i+o]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Fh.geometry=this.geometry,Fh.material=this.material,void 0!==Fh.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),zh.copy(this.boundingSphere),zh.applyMatrix4(n),!1!==e.ray.intersectsSphere(zh)))for(let i=0;i<r;i++){this.getMatrixAt(i,Rh),Dh.multiplyMatrices(n,Rh),Fh.matrixWorld=Dh,Fh.raycast(e,Oh);for(let e=0,n=Oh.length;e<n;e++){const n=Oh[e];n.instanceId=i,n.object=this,t.push(n)}Oh.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new Ph(new Float32Array(3*this.instanceMatrix.count).fill(1),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new Mh(new Float32Array(r*this.count),r,this.count,Bn,vn));const i=this.morphTexture.source.data.data;let o=0;for(let l=0;l<n.length;l++)o+=n[l];const a=this.geometry.morphTargetsRelative?1:1-o,s=r*e;i[s]=a,i.set(n,s+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Nh(e,t){return e.z-t.z}function jh(e,t){return t.z-e.z}class Gh{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n){const r=this.pool,i=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];i.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=n}reset(){this.list.length=0,this.index=0}}const Qh=new qo,Hh=new qo,Vh=new qo,Wh=new La(1,1,1),qh=new qo,Xh=new Zs,Yh=new xo,Jh=new zo,Kh=new vo,Zh=new vo,$h=new vo,ed=new Gh,td=new Is,nd=[];function rd(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const i=e.count;for(let o=0;o<i;o++)for(let i=0;i<r;i++)t.setComponent(o+n,i,e.getComponent(o,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}class id extends Is{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2*t,r=arguments.length>3?arguments[3]:void 0;super(new hs,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(4*this._maxInstanceCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Mh(t,e,e,Sn,vn);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new Mh(t,e,e,Pn,gn);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Mh(t,e,e,Sn,vn);n.colorSpace=Zi.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in e.attributes){const i=e.getAttribute(r),{array:o,itemSize:a,normalized:s}=i,l=new o.constructor(n*a),c=new Xa(l,a,s);t.setAttribute(r,c)}if(null!==e.getIndex()){const e=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Xa(e,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new xo);const e=this.boundingBox,t=this._drawInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Qh),this.getBoundingBoxAt(r,Yh).applyMatrix4(Qh),e.union(Yh)}}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zo);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(!1===t[n].active)continue;const r=t[n].geometryIndex;this.getMatrixAt(n,Qh),this.getBoundingSphereAt(r,Jh).applyMatrix4(Qh),e.union(Jh)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const t=this._drawInfo.length-1,n=this._matricesTexture,r=n.image.data;Vh.toArray(r,16*t),n.needsUpdate=!0;const i=this._colorsTexture;return i&&(Wh.toArray(i.image.data,4*t),i.needsUpdate=!0),t}addGeometry(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let i=null;const o=this._reservedRanges,a=this._drawRanges,s=this._bounds;0!==this._geometryCount&&(i=o[o.length-1]),r.vertexCount=-1===t?e.getAttribute("position").count:t,r.vertexStart=null===i?0:i.vertexStart+i.vertexCount;const l=e.getIndex(),c=null!==l;if(c&&(r.indexCount=-1===n?l.count:n,r.indexStart=null===i?0:i.indexStart+i.indexCount),-1!==r.indexStart&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const u=this._geometryCount;return this._geometryCount++,o.push(r),a.push({start:c?r.indexStart:r.vertexStart,count:-1}),s.push({boxInitialized:!1,box:new xo,sphereInitialized:!1,sphere:new zo}),this.setGeometryAt(u,e),u}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const s=a.vertexStart,l=a.vertexCount;for(const d in n.attributes){const e=t.getAttribute(d),r=n.getAttribute(d);rd(e,r,s);const i=e.itemSize;for(let t=e.count,n=l;t<n;t++){const e=s+t;for(let t=0;t<i;t++)r.setComponent(e,t,0)}r.needsUpdate=!0,r.addUpdateRange(s*i,l*i)}if(r){const e=a.indexStart;for(let t=0;t<o.count;t++)i.setX(e+t,s+o.getX(t));for(let t=o.count,n=a.indexCount;t<n;t++)i.setX(e+t,s);i.needsUpdate=!0,i.addUpdateRange(e,a.indexCount)}const c=this._bounds[e];null!==t.boundingBox?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,null!==t.boundingSphere?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const u=this._drawRanges[e],h=t.getAttribute("position");return u.count=r?o.count:h.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],r=n.box,i=this.geometry;if(!1===n.boxInitialized){r.makeEmpty();const t=i.index,o=i.attributes.position,a=this._drawRanges[e];for(let e=a.start,n=a.start+a.count;e<n;e++){let n=e;t&&(n=t.getX(n)),r.expandByPoint(Kh.fromBufferAttribute(o,n))}n.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this._bounds[e],r=n.sphere,i=this.geometry;if(!1===n.sphereInitialized){r.makeEmpty(),this.getBoundingBoxAt(e,Yh),Yh.getCenter(r.center);const t=i.index,o=i.attributes.position,a=this._drawRanges[e];let s=0;for(let e=a.start,n=a.start+a.count;e<n;e++){let n=e;t&&(n=t.getX(n)),Kh.fromBufferAttribute(o,n),s=Math.max(s,r.center.distanceToSquared(Kh))}r.radius=Math.sqrt(s),n.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const n=this._drawInfo,r=this._matricesTexture,i=this._matricesTexture.image.data;return e>=n.length||!1===n[e].active||(t.toArray(i,16*e),r.needsUpdate=!0),this}getMatrixAt(e,t){const n=this._drawInfo,r=this._matricesTexture.image.data;return e>=n.length||!1===n[e].active?null:t.fromArray(r,16*e)}setColorAt(e,t){null===this._colorsTexture&&this._initColorsTexture();const n=this._colorsTexture,r=this._colorsTexture.image.data,i=this._drawInfo;return e>=i.length||!1===i[e].active||(t.toArray(r,4*e),n.needsUpdate=!0),this}getColorAt(e,t){const n=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||!1===r[e].active?null:t.fromArray(n,4*e)}setVisibleAt(e,t){const n=this._drawInfo;return e>=n.length||!1===n[e].active||n[e].visible===t||(n[e].visible=t,this._visibilityChanged=!0),this}getVisibleAt(e){const t=this._drawInfo;return!(e>=t.length||!1===t[e].active)&&t[e].visible}raycast(e,t){const n=this._drawInfo,r=this._drawRanges,i=this.matrixWorld,o=this.geometry;td.material=this.material,td.geometry.index=o.index,td.geometry.attributes=o.attributes,null===td.geometry.boundingBox&&(td.geometry.boundingBox=new xo),null===td.geometry.boundingSphere&&(td.geometry.boundingSphere=new zo);for(let a=0,s=n.length;a<s;a++){if(!n[a].visible||!n[a].active)continue;const o=n[a].geometryIndex,s=r[o];td.geometry.setDrawRange(s.start,s.count),this.getMatrixAt(a,td.matrixWorld).premultiply(i),this.getBoundingBoxAt(o,td.geometry.boundingBox),this.getBoundingSphereAt(o,td.geometry.boundingSphere),td.raycast(e,nd);for(let e=0,n=nd.length;e<n;e++){const n=nd[e];n.object=this,n.batchId=a,t.push(n)}nd.length=0}td.material=null,td.geometry.index=null,td.geometry.attributes={},td.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map((e=>({...e}))),this._reservedRanges=e._reservedRanges.map((e=>({...e}))),this._drawInfo=e._drawInfo.map((e=>({...e}))),this._bounds=e._bounds.map((e=>({boxInitialized:e.boxInitialized,box:e.box.clone(),sphereInitialized:e.sphereInitialized,sphere:e.sphere.clone()}))),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=null===o?1:o.array.BYTES_PER_ELEMENT,s=this._drawInfo,l=this._multiDrawStarts,c=this._multiDrawCounts,u=this._drawRanges,h=this.perObjectFrustumCulled,d=this._indirectTexture,f=d.image.data;h&&(qh.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),Xh.setFromProjectionMatrix(qh,e.coordinateSystem));let p=0;if(this.sortObjects){Hh.copy(this.matrixWorld).invert(),Kh.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Hh),Zh.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Hh);for(let n=0,r=s.length;n<r;n++)if(s[n].visible&&s[n].active){const e=s[n].geometryIndex;this.getMatrixAt(n,Qh),this.getBoundingSphereAt(e,Jh).applyMatrix4(Qh);let t=!1;if(h&&(t=!Xh.intersectsSphere(Jh)),!t){const t=$h.subVectors(Jh.center,Kh).dot(Zh);ed.push(u[e],t,n)}}const e=ed.list,t=this.customSort;null===t?e.sort(i.transparent?jh:Nh):t.call(this,e,n);for(let n=0,r=e.length;n<r;n++){const t=e[n];l[p]=t.start*a,c[p]=t.count,f[p]=t.index,p++}ed.reset()}else for(let m=0,g=s.length;m<g;m++)if(s[m].visible&&s[m].active){const e=s[m].geometryIndex;let t=!1;if(h&&(this.getMatrixAt(m,Qh),this.getBoundingSphereAt(e,Jh).applyMatrix4(Qh),t=!Xh.intersectsSphere(Jh)),!t){const t=u[e];l[p]=t.start*a,c[p]=t.count,f[p]=m,p++}}d.needsUpdate=!0,this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,o){this.onBeforeRender(e,null,r,i,o)}}class od extends Ua{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new La(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ad=new vo,sd=new vo,ld=new qo,cd=new Wo,ud=new zo,hd=new vo,dd=new vo;class fd extends xa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new od;super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)ad.fromBufferAttribute(t,e-1),sd.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=ad.distanceTo(sd);e.setAttribute("lineDistance",new rs(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),ud.copy(n.boundingSphere),ud.applyMatrix4(r),ud.radius+=i,!1===e.ray.intersectsSphere(ud))return;ld.copy(r).invert(),cd.copy(e.ray).applyMatrix4(ld);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=this.isLineSegments?2:1,c=n.index,u=n.attributes.position;if(null!==c){const n=Math.max(0,o.start),r=Math.min(c.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=l){const n=c.getX(i),r=c.getX(i+1),o=pd(this,e,cd,s,n,r);o&&t.push(o)}if(this.isLineLoop){const i=c.getX(r-1),o=c.getX(n),a=pd(this,e,cd,s,i,o);a&&t.push(a)}}else{const n=Math.max(0,o.start),r=Math.min(u.count,o.start+o.count);for(let i=n,o=r-1;i<o;i+=l){const n=pd(this,e,cd,s,i,i+1);n&&t.push(n)}if(this.isLineLoop){const i=pd(this,e,cd,s,r-1,n);i&&t.push(i)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function pd(e,t,n,r,i,o){const a=e.geometry.attributes.position;ad.fromBufferAttribute(a,i),sd.fromBufferAttribute(a,o);if(n.distanceSqToSegment(ad,sd,hd,dd)>r)return;hd.applyMatrix4(e.matrixWorld);const s=t.ray.origin.distanceTo(hd);return s<t.near||s>t.far?void 0:{distance:s,point:dd.clone().applyMatrix4(e.matrixWorld),index:i,face:null,faceIndex:null,object:e}}const md=new vo,gd=new vo;class vd extends fd{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)md.fromBufferAttribute(t,e),gd.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+md.distanceTo(gd);e.setAttribute("lineDistance",new rs(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class yd extends fd{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Ad extends Ua{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new La(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const xd=new qo,bd=new Wo,_d=new zo,wd=new vo;class Ed extends xa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new hs,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Ad;super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,o=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),_d.copy(n.boundingSphere),_d.applyMatrix4(r),_d.radius+=i,!1===e.ray.intersectsSphere(_d))return;xd.copy(r).invert(),bd.copy(e.ray).applyMatrix4(xd);const a=i/((this.scale.x+this.scale.y+this.scale.z)/3),s=a*a,l=n.index,c=n.attributes.position;if(null!==l){for(let n=Math.max(0,o.start),i=Math.min(l.count,o.start+o.count);n<i;n++){const i=l.getX(n);wd.fromBufferAttribute(c,i),Sd(wd,i,s,r,e,t,this)}}else{for(let n=Math.max(0,o.start),i=Math.min(c.count,o.start+o.count);n<i;n++)wd.fromBufferAttribute(c,n),Sd(wd,n,s,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Sd(e,t,n,r,i,o,a){const s=bd.distanceSqToPoint(e);if(s<n){const n=new vo;bd.closestPointToPoint(e,n),n.applyMatrix4(r);const l=i.ray.origin.distanceTo(n);if(l<i.near||l>i.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:t,face:null,object:a})}}class Cd extends so{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.isVideoTexture=!0,this.minFilter=void 0!==o?o:an,this.magFilter=void 0!==i?i:an,this.generateMipmaps=!1;const c=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){c.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Md extends so{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=en,this.minFilter=en,this.generateMipmaps=!1,this.needsUpdate=!0}}class Td extends so{constructor(e,t,n,r,i,o,a,s,l,c,u,h){super(null,o,a,s,l,c,r,i,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Id extends Td{constructor(e,t,n,r,i,o){super(e,t,n,i,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Zt,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Bd extends Td{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Wt),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Pd extends so{constructor(e,t,n,r,i,o,a,s,l){super(e,t,n,r,i,o,a,s,l),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Rd{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.arcLengthDivisions;if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let o;o=t||e*n[i-1];let a,s=0,l=i-1;for(;s<=l;)if(r=Math.floor(s+(l-s)/2),a=n[r]-o,a<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,n[r]===o)return r/(i-1);const c=n[r];return(r+(o-c)/(n[r+1]-c))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const o=this.getPoint(r),a=this.getPoint(i),s=t||(o.isVector2?new zi:new vo);return s.copy(a).sub(o).normalize(),s}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new vo,r=[],i=[],o=[],a=new vo,s=new qo;for(let d=0;d<=e;d++){const t=d/e;r[d]=this.getTangentAt(t,new vo)}i[0]=new vo,o[0]=new vo;let l=Number.MAX_VALUE;const c=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],a),o[0].crossVectors(r[0],i[0]);for(let d=1;d<=e;d++){if(i[d]=i[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(r[d-1],r[d]),a.length()>Number.EPSILON){a.normalize();const e=Math.acos(Ri(r[d-1].dot(r[d]),-1,1));i[d].applyMatrix4(s.makeRotationAxis(a,e))}o[d].crossVectors(r[d],i[d])}if(!0===t){let t=Math.acos(Ri(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(a.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(s.makeRotationAxis(r[n],t*n)),o[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:o}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Dd extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI,a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0;super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=o,this.aClockwise=a,this.aRotation=s}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const i=Math.abs(r)<Number.EPSILON;for(;r<0;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=i?0:n),!0!==this.aClockwise||i||(r===n?r=-n:r-=n);const o=this.aStartAngle+e*r;let a=this.aX+this.xRadius*Math.cos(o),s=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=s-this.aY;a=n*e-r*t+this.aX,s=n*t+r*e+this.aY}return t.set(a,s)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Od extends Dd{constructor(e,t,n,r,i,o){super(e,t,n,n,r,i,o),this.isArcCurve=!0,this.type="ArcCurve"}}function kd(){let e=0,t=0,n=0,r=0;function i(i,o,a,s){e=i,t=a,n=-3*i+3*o-2*a-s,r=2*i-2*o+a+s}return{initCatmullRom:function(e,t,n,r,o){i(t,n,o*(n-e),o*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,o,a,s){let l=(t-e)/o-(n-e)/(o+a)+(n-t)/a,c=(n-t)/a-(r-t)/(a+s)+(r-n)/s;l*=a,c*=a,i(t,n,l,c)},calc:function(i){const o=i*i;return e+t*i+n*o+r*(o*i)}}}const Ld=new vo,Fd=new kd,zd=new kd,Ud=new kd;class Nd extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"centripetal",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo,n=this.points,r=n.length,i=(r-(this.closed?0:1))*e;let o,a,s=Math.floor(i),l=i-s;this.closed?s+=s>0?0:(Math.floor(Math.abs(s)/r)+1)*r:0===l&&s===r-1&&(s=r-2,l=1),this.closed||s>0?o=n[(s-1)%r]:(Ld.subVectors(n[0],n[1]).add(n[0]),o=Ld);const c=n[s%r],u=n[(s+1)%r];if(this.closed||s+2<r?a=n[(s+2)%r]:(Ld.subVectors(n[r-1],n[r-2]).add(n[r-1]),a=Ld),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(c),e),n=Math.pow(c.distanceToSquared(u),e),r=Math.pow(u.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Fd.initNonuniformCatmullRom(o.x,c.x,u.x,a.x,t,n,r),zd.initNonuniformCatmullRom(o.y,c.y,u.y,a.y,t,n,r),Ud.initNonuniformCatmullRom(o.z,c.z,u.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(Fd.initCatmullRom(o.x,c.x,u.x,a.x,this.tension),zd.initCatmullRom(o.y,c.y,u.y,a.y,this.tension),Ud.initCatmullRom(o.z,c.z,u.z,a.z,this.tension));return t.set(Fd.calc(l),zd.calc(l),Ud.calc(l)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new vo).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function jd(e,t,n,r,i){const o=.5*(r-t),a=.5*(i-n),s=e*e;return(2*n-2*r+o+a)*(e*s)+(-3*n+3*r-2*o-a)*s+o*e+n}function Gd(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function Qd(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class Hd extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zi,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new zi;super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(Qd(e,n.x,r.x,i.x,o.x),Qd(e,n.y,r.y,i.y,o.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Vd extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vo,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new vo;super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo,n=this.v0,r=this.v1,i=this.v2,o=this.v3;return t.set(Qd(e,n.x,r.x,i.x,o.x),Qd(e,n.y,r.y,i.y,o.y),Qd(e,n.z,r.z,i.z,o.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Wd extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qd extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo;super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo;return 1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo).subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Xd extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new zi;super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=this.v0,r=this.v1,i=this.v2;return t.set(Gd(e,n.x,r.x,i.x),Gd(e,n.y,r.y,i.y)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Yd extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vo;super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo,n=this.v0,r=this.v1,i=this.v2;return t.set(Gd(e,n.x,r.x,i.x),Gd(e,n.y,r.y,i.y),Gd(e,n.z,r.z,i.z)),t}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Jd extends Rd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi,n=this.points,r=(n.length-1)*e,i=Math.floor(r),o=r-i,a=n[0===i?i:i-1],s=n[i],l=n[i>n.length-2?n.length-1:i+1],c=n[i>n.length-3?n.length-1:i+2];return t.set(jd(o,a.x,s.x,l.x,c.x),jd(o,a.y,s.y,l.y,c.y)),t}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new zi).fromArray(n))}return this}}var Kd=Object.freeze({__proto__:null,ArcCurve:Od,CatmullRomCurve3:Nd,CubicBezierCurve:Hd,CubicBezierCurve3:Vd,EllipseCurve:Dd,LineCurve:Wd,LineCurve3:qd,QuadraticBezierCurve:Xd,QuadraticBezierCurve3:Yd,SplineCurve:Jd});class Zd extends Rd{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new Kd[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,o=this.curves[i],a=o.getLength(),s=0===a?0:1-e/a;return o.getPointAt(s,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:40;const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:12;const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const o=i[r],a=o.isEllipseCurve?2*e:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,s=o.getPoints(a);for(let e=0;e<s.length;e++){const r=s[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new Kd[n.type]).fromJSON(n))}return this}}class $d extends Zd{constructor(e){super(),this.type="Path",this.currentPoint=new zi,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Wd(this.currentPoint.clone(),new zi(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new Xd(this.currentPoint.clone(),new zi(e,t),new zi(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,o){const a=new Hd(this.currentPoint.clone(),new zi(e,t),new zi(n,r),new zi(i,o));return this.curves.push(a),this.currentPoint.set(i,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new Jd(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(e+a,t+s,n,r,i,o),this}absarc(e,t,n,r,i,o){return this.absellipse(e,t,n,n,r,i,o),this}ellipse(e,t,n,r,i,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+l,t+c,n,r,i,o,a,s),this}absellipse(e,t,n,r,i,o,a,s){const l=new Dd(e,t,n,r,i,o,a,s);if(this.curves.length>0){const e=l.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class ef extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[new zi(0,-.5),new zi(.5,0),new zi(0,.5)],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Ri(r,0,2*Math.PI);const i=[],o=[],a=[],s=[],l=[],c=1/t,u=new vo,h=new zi,d=new vo,f=new vo,p=new vo;let m=0,g=0;for(let v=0;v<=e.length-1;v++)switch(v){case 0:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.normalize(),s.push(d.x,d.y,d.z);break;case e.length-1:s.push(p.x,p.y,p.z);break;default:m=e[v+1].x-e[v].x,g=e[v+1].y-e[v].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.x+=p.x,d.y+=p.y,d.z+=p.z,d.normalize(),s.push(d.x,d.y,d.z),p.copy(f)}for(let v=0;v<=t;v++){const i=n+v*c*r,d=Math.sin(i),f=Math.cos(i);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*d,u.y=e[n].y,u.z=e[n].x*f,o.push(u.x,u.y,u.z),h.x=v/t,h.y=n/(e.length-1),a.push(h.x,h.y);const r=s[3*n+0]*d,i=s[3*n+1],c=s[3*n+0]*f;l.push(r,i,c)}}for(let v=0;v<t;v++)for(let t=0;t<e.length-1;t++){const n=t+v*e.length,r=n,o=n+e.length,a=n+e.length+1,s=n+1;i.push(r,o,s),i.push(a,s,o)}this.setIndex(i),this.setAttribute("position",new rs(o,3)),this.setAttribute("uv",new rs(a,2)),this.setAttribute("normal",new rs(l,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ef(e.points,e.segments,e.phiStart,e.phiLength)}}class tf extends ef{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8;const i=new $d;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new tf(e.radius,e.length,e.capSegments,e.radialSegments)}}class nf extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2*Math.PI;super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],o=[],a=[],s=[],l=new vo,c=new zi;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let u=0,h=3;u<=t;u++,h+=3){const i=n+u/t*r;l.x=e*Math.cos(i),l.y=e*Math.sin(i),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,s.push(c.x,c.y)}for(let u=1;u<=t;u++)i.push(u,u+1,0);this.setIndex(i),this.setAttribute("position",new rs(o,3)),this.setAttribute("normal",new rs(a,3)),this.setAttribute("uv",new rs(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new nf(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class rf extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:32,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,o=arguments.length>5&&void 0!==arguments[5]&&arguments[5],a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:2*Math.PI;super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:o,thetaStart:a,thetaLength:s};const l=this;r=Math.floor(r),i=Math.floor(i);const c=[],u=[],h=[],d=[];let f=0;const p=[],m=n/2;let g=0;function v(n){const i=f,o=new zi,p=new vo;let v=0;const y=!0===n?e:t,A=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*A,0),h.push(0,A,0),d.push(.5,.5),f++;const x=f;for(let e=0;e<=r;e++){const t=e/r*s+a,n=Math.cos(t),i=Math.sin(t);p.x=y*i,p.y=m*A,p.z=y*n,u.push(p.x,p.y,p.z),h.push(0,A,0),o.x=.5*n+.5,o.y=.5*i*A+.5,d.push(o.x,o.y),f++}for(let e=0;e<r;e++){const t=i+e,r=x+e;!0===n?c.push(r,r+1,t):c.push(r+1,r,t),v+=3}l.addGroup(g,v,!0===n?1:2),g+=v}!function(){const o=new vo,v=new vo;let y=0;const A=(t-e)/n;for(let l=0;l<=i;l++){const c=[],g=l/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*s+a,l=Math.sin(i),p=Math.cos(i);v.x=y*l,v.y=-g*n+m,v.z=y*p,u.push(v.x,v.y,v.z),o.set(l,A,p).normalize(),h.push(o.x,o.y,o.z),d.push(t,1-g),c.push(f++)}p.push(c)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=p[t][e],r=p[t+1][e],i=p[t+1][e+1],o=p[t][e+1];c.push(n,r,o),c.push(r,i,o),y+=6}l.addGroup(g,y,0),g+=y}(),!1===o&&(e>0&&v(!0),t>0&&v(!1)),this.setIndex(c),this.setAttribute("position",new rs(u,3)),this.setAttribute("normal",new rs(h,3)),this.setAttribute("uv",new rs(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class of extends rf{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:2*Math.PI;super(0,e,t,n,r,i,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:o,thetaLength:a}}static fromJSON(e){return new of(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class af extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],o=[];function a(e,t,n,r){const i=r+1,o=[];for(let a=0;a<=i;a++){o[a]=[];const r=e.clone().lerp(n,a/i),s=t.clone().lerp(n,a/i),l=i-a;for(let e=0;e<=l;e++)o[a][e]=0===e&&a===i?r:r.clone().lerp(s,e/l)}for(let a=0;a<i;a++)for(let e=0;e<2*(i-a)-1;e++){const t=Math.floor(e/2);e%2===0?(s(o[a][t+1]),s(o[a+1][t]),s(o[a][t])):(s(o[a][t+1]),s(o[a+1][t+1]),s(o[a+1][t]))}}function s(e){i.push(e.x,e.y,e.z)}function l(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function c(e,t,n,r){r<0&&1===e.x&&(o[t]=e.x-1),0===n.x&&0===n.z&&(o[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new vo,r=new vo,i=new vo;for(let o=0;o<t.length;o+=3)l(t[o+0],n),l(t[o+1],r),l(t[o+2],i),a(n,r,i,e)}(r),function(e){const t=new vo;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new vo;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,a=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);o.push(r,1-a)}var t;(function(){const e=new vo,t=new vo,n=new vo,r=new vo,a=new zi,s=new zi,l=new zi;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),a.set(o[d+0],o[d+1]),s.set(o[d+2],o[d+3]),l.set(o[d+4],o[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const f=u(r);c(a,d+0,e,f),c(s,d+2,t,f),c(l,d+4,n,f)}})(),function(){for(let e=0;e<o.length;e+=6){const t=o[e+0],n=o[e+2],r=o[e+4],i=Math.max(t,n,r),a=Math.min(t,n,r);i>.9&&a<.1&&(t<.2&&(o[e+0]+=1),n<.2&&(o[e+2]+=1),r<.2&&(o[e+4]+=1))}}()}(),this.setAttribute("position",new rs(i,3)),this.setAttribute("normal",new rs(i.slice(),3)),this.setAttribute("uv",new rs(o,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new af(e.vertices,e.indices,e.radius,e.details)}}class sf extends af{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new sf(e.radius,e.detail)}}const lf=new vo,cf=new vo,uf=new vo,hf=new Pa;class df extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(Ii*t),o=e.getIndex(),a=e.getAttribute("position"),s=o?o.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<s;e+=3){o?(l[0]=o.getX(e),l[1]=o.getX(e+1),l[2]=o.getX(e+2)):(l[0]=e,l[1]=e+1,l[2]=e+2);const{a:t,b:n,c:s}=hf;if(t.fromBufferAttribute(a,l[0]),n.fromBufferAttribute(a,l[1]),s.fromBufferAttribute(a,l[2]),hf.getNormal(uf),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(s.x*r)},${Math.round(s.y*r)},${Math.round(s.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],o=hf[c[e]],a=hf[c[t]],s=`${n}_${r}`,f=`${r}_${n}`;f in h&&h[f]?(uf.dot(h[f].normal)<=i&&(d.push(o.x,o.y,o.z),d.push(a.x,a.y,a.z)),h[f]=null):s in h||(h[s]={index0:l[e],index1:l[t],normal:uf.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];lf.fromBufferAttribute(a,t),cf.fromBufferAttribute(a,n),d.push(lf.x,lf.y,lf.z),d.push(cf.x,cf.y,cf.z)}this.setAttribute("position",new rs(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class ff extends $d{constructor(e){super(e),this.uuid=Pi(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new $d).fromJSON(n))}return this}}const pf=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;const r=t&&t.length,i=r?t[0]*n:e.length;let o=mf(e,0,i,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,h,d,f;if(r&&(o=function(e,t,n,r){const i=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;o++)s=t[o]*r,l=o<a-1?t[o+1]*r:e.length,c=mf(e,s,l,r,!1),c===c.next&&(c.steiner=!0),i.push(Cf(c));for(i.sort(_f),o=0;o<i.length;o++)n=wf(i[o],n);return n}(e,t,o,n)),e.length>80*n){s=c=e[0],l=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<s&&(s=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);f=Math.max(c-s,u-l),f=0!==f?32767/f:0}return vf(o,a,n,s,l,f,0),a};function mf(e,t,n,r,i){let o,a;if(i===function(e,t,n,r){let i=0;for(let o=t,a=n-r;o<n;o+=r)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}(e,t,n,r)>0)for(o=t;o<n;o+=r)a=Lf(o,e[o],e[o+1],a);else for(o=n-r;o>=t;o-=r)a=Lf(o,e[o],e[o+1],a);return a&&Bf(a,a.next)&&(Ff(a),a=a.next),a}function gf(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Bf(r,r.next)&&0!==If(r.prev,r,r.next))r=r.next;else{if(Ff(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function vf(e,t,n,r,i,o,a){if(!e)return;!a&&o&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=Sf(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,o,a,s,l,c=1;do{for(n=e,e=null,o=null,a=0;n;){for(a++,r=n,s=0,t=0;t<c&&(s++,r=r.nextZ,r);t++);for(l=c;s>0||l>0&&r;)0!==s&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,s--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,c*=2}while(a>1)}(i)}(e,r,i,o);let s,l,c=e;for(;e.prev!==e.next;)if(s=e.prev,l=e.next,o?Af(e,r,i,o):yf(e))t.push(s.i/n|0),t.push(e.i/n|0),t.push(l.i/n|0),Ff(e),e=l.next,c=l.next;else if((e=l)===c){a?1===a?vf(e=xf(gf(e),t,n),t,n,r,i,o,2):2===a&&bf(e,t,n,r,i,o):vf(gf(e),t,n,r,i,o,1);break}}function yf(e){const t=e.prev,n=e,r=e.next;if(If(t,n,r)>=0)return!1;const i=t.x,o=n.x,a=r.x,s=t.y,l=n.y,c=r.y,u=i<o?i<a?i:a:o<a?o:a,h=s<l?s<c?s:c:l<c?l:c,d=i>o?i>a?i:a:o>a?o:a,f=s>l?s>c?s:c:l>c?l:c;let p=r.next;for(;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=h&&p.y<=f&&Mf(i,s,o,l,a,c,p.x,p.y)&&If(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Af(e,t,n,r){const i=e.prev,o=e,a=e.next;if(If(i,o,a)>=0)return!1;const s=i.x,l=o.x,c=a.x,u=i.y,h=o.y,d=a.y,f=s<l?s<c?s:c:l<c?l:c,p=u<h?u<d?u:d:h<d?h:d,m=s>l?s>c?s:c:l>c?l:c,g=u>h?u>d?u:d:h>d?h:d,v=Sf(f,p,t,n,r),y=Sf(m,g,t,n,r);let A=e.prevZ,x=e.nextZ;for(;A&&A.z>=v&&x&&x.z<=y;){if(A.x>=f&&A.x<=m&&A.y>=p&&A.y<=g&&A!==i&&A!==a&&Mf(s,u,l,h,c,d,A.x,A.y)&&If(A.prev,A,A.next)>=0)return!1;if(A=A.prevZ,x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==a&&Mf(s,u,l,h,c,d,x.x,x.y)&&If(x.prev,x,x.next)>=0)return!1;x=x.nextZ}for(;A&&A.z>=v;){if(A.x>=f&&A.x<=m&&A.y>=p&&A.y<=g&&A!==i&&A!==a&&Mf(s,u,l,h,c,d,A.x,A.y)&&If(A.prev,A,A.next)>=0)return!1;A=A.prevZ}for(;x&&x.z<=y;){if(x.x>=f&&x.x<=m&&x.y>=p&&x.y<=g&&x!==i&&x!==a&&Mf(s,u,l,h,c,d,x.x,x.y)&&If(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function xf(e,t,n){let r=e;do{const i=r.prev,o=r.next.next;!Bf(i,o)&&Pf(i,r,r.next,o)&&Of(i,o)&&Of(o,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(o.i/n|0),Ff(r),Ff(r.next),r=e=o),r=r.next}while(r!==e);return gf(r)}function bf(e,t,n,r,i,o){let a=e;do{let e=a.next.next;for(;e!==a.prev;){if(a.i!==e.i&&Tf(a,e)){let s=kf(a,e);return a=gf(a,a.next),s=gf(s,s.next),vf(a,t,n,r,i,o,0),void vf(s,t,n,r,i,o,0)}e=e.next}a=a.next}while(a!==e)}function _f(e,t){return e.x-t.x}function wf(e,t){const n=function(e,t){let n,r=t,i=-1/0;const o=e.x,a=e.y;do{if(a<=r.y&&a>=r.next.y&&r.next.y!==r.y){const e=r.x+(a-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=o&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===o))return n}r=r.next}while(r!==t);if(!n)return null;const s=n,l=n.x,c=n.y;let u,h=1/0;r=n;do{o>=r.x&&r.x>=l&&o!==r.x&&Mf(a<c?o:i,a,l,c,a<c?i:o,a,r.x,r.y)&&(u=Math.abs(a-r.y)/(o-r.x),Of(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&Ef(n,r)))&&(n=r,h=u)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;const r=kf(n,e);return gf(r,r.next),gf(n,n.next)}function Ef(e,t){return If(e.prev,e,t.prev)<0&&If(t.next,e,e.next)<0}function Sf(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Cf(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Mf(e,t,n,r,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(r-s)>=(n-a)*(t-s)&&(n-a)*(o-s)>=(i-a)*(r-s)}function Tf(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&Pf(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Of(e,t)&&Of(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(If(e.prev,e,t.prev)||If(e,t.prev,t))||Bf(e,t)&&If(e.prev,e,e.next)>0&&If(t.prev,t,t.next)>0)}function If(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Bf(e,t){return e.x===t.x&&e.y===t.y}function Pf(e,t,n,r){const i=Df(If(e,t,n)),o=Df(If(e,t,r)),a=Df(If(n,r,e)),s=Df(If(n,r,t));return i!==o&&a!==s||(!(0!==i||!Rf(e,n,t))||(!(0!==o||!Rf(e,r,t))||(!(0!==a||!Rf(n,e,r))||!(0!==s||!Rf(n,t,r)))))}function Rf(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Df(e){return e>0?1:e<0?-1:0}function Of(e,t){return If(e.prev,e,e.next)<0?If(e,t,e.next)>=0&&If(e,e.prev,t)>=0:If(e,t,e.prev)<0||If(e,e.next,t)<0}function kf(e,t){const n=new zf(e.i,e.x,e.y),r=new zf(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function Lf(e,t,n,r){const i=new zf(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Ff(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function zf(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Uf{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Uf.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];Nf(e),jf(n,e);let o=e.length;t.forEach(Nf);for(let s=0;s<t.length;s++)r.push(o),o+=t[s].length,jf(n,t[s]);const a=pf(n,r);for(let s=0;s<a.length;s+=3)i.push(a.slice(s,s+3));return i}}function Nf(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function jf(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Gf extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ff([new zi(.5,.5),new zi(-.5,.5),new zi(-.5,-.5),new zi(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let a=0,s=e.length;a<s;a++){o(e[a])}function o(e){const o=[],a=void 0!==t.curveSegments?t.curveSegments:12,s=void 0!==t.steps?t.steps:1,l=void 0!==t.depth?t.depth:1;let c=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,f=void 0!==t.bevelSegments?t.bevelSegments:3;const p=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:Qf;let g,v,y,A,x,b=!1;p&&(g=p.getSpacedPoints(s),b=!0,c=!1,v=p.computeFrenetFrames(s,!1),y=new vo,A=new vo,x=new vo),c||(f=0,u=0,h=0,d=0);const _=e.extractPoints(a);let w=_.shape;const E=_.holes;if(!Uf.isClockWise(w)){w=w.reverse();for(let e=0,t=E.length;e<t;e++){const t=E[e];Uf.isClockWise(t)&&(E[e]=t.reverse())}}const S=Uf.triangulateShape(w,E),C=w;for(let t=0,n=E.length;t<n;t++){const e=E[t];w=w.concat(e)}function M(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const T=w.length,I=S.length;function B(e,t,n){let r,i,o;const a=e.x-t.x,s=e.y-t.y,l=n.x-e.x,c=n.y-e.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),f=t.x-s/h,p=t.y+a/h,m=((n.x-c/d-f)*c-(n.y+l/d-p)*l)/(a*c-s*l);r=f+a*m-e.x,i=p+s*m-e.y;const g=r*r+i*i;if(g<=2)return new zi(r,i);o=Math.sqrt(g/2)}else{let e=!1;a>Number.EPSILON?l>Number.EPSILON&&(e=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(e=!0):Math.sign(s)===Math.sign(c)&&(e=!0),e?(r=-s,i=a,o=Math.sqrt(u)):(r=a,i=s,o=Math.sqrt(u/2))}return new zi(r/o,i/o)}const P=[];for(let t=0,n=C.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),P[t]=B(C[t],C[r],C[i]);const R=[];let D,O=P.concat();for(let t=0,n=E.length;t<n;t++){const e=E[t];D=[];for(let t=0,n=e.length,r=n-1,i=t+1;t<n;t++,r++,i++)r===n&&(r=0),i===n&&(i=0),D[t]=B(e[t],e[r],e[i]);R.push(D),O=O.concat(D)}for(let t=0;t<f;t++){const e=t/f,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=C.length;t<i;t++){const e=M(C[t],P[t],r);F(e.x,e.y,-n)}for(let t=0,i=E.length;t<i;t++){const e=E[t];D=R[t];for(let t=0,i=e.length;t<i;t++){const i=M(e[t],D[t],r);F(i.x,i.y,-n)}}}const k=h+d;for(let t=0;t<T;t++){const e=c?M(w[t],O[t],k):w[t];b?(A.copy(v.normals[0]).multiplyScalar(e.x),y.copy(v.binormals[0]).multiplyScalar(e.y),x.copy(g[0]).add(A).add(y),F(x.x,x.y,x.z)):F(e.x,e.y,0)}for(let t=1;t<=s;t++)for(let e=0;e<T;e++){const n=c?M(w[e],O[e],k):w[e];b?(A.copy(v.normals[t]).multiplyScalar(n.x),y.copy(v.binormals[t]).multiplyScalar(n.y),x.copy(g[t]).add(A).add(y),F(x.x,x.y,x.z)):F(n.x,n.y,l/s*t)}for(let t=f-1;t>=0;t--){const e=t/f,n=u*Math.cos(e*Math.PI/2),r=h*Math.sin(e*Math.PI/2)+d;for(let t=0,i=C.length;t<i;t++){const e=M(C[t],P[t],r);F(e.x,e.y,l+n)}for(let t=0,i=E.length;t<i;t++){const e=E[t];D=R[t];for(let t=0,i=e.length;t<i;t++){const i=M(e[t],D[t],r);b?F(i.x,i.y+g[s-1].y,g[s-1].x+n):F(i.x,i.y,l+n)}}}function L(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=s+2*f;e<n;e++){const n=T*e,o=T*(e+1);U(t+r+n,t+i+n,t+i+o,t+r+o)}}}function F(e,t,n){o.push(e),o.push(t),o.push(n)}function z(e,t,i){N(e),N(t),N(i);const o=r.length/3,a=m.generateTopUV(n,r,o-3,o-2,o-1);j(a[0]),j(a[1]),j(a[2])}function U(e,t,i,o){N(e),N(t),N(o),N(t),N(i),N(o);const a=r.length/3,s=m.generateSideWallUV(n,r,a-6,a-3,a-2,a-1);j(s[0]),j(s[1]),j(s[3]),j(s[1]),j(s[2]),j(s[3])}function N(e){r.push(o[3*e+0]),r.push(o[3*e+1]),r.push(o[3*e+2])}function j(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(c){let e=0,t=T*e;for(let n=0;n<I;n++){const e=S[n];z(e[2]+t,e[1]+t,e[0]+t)}e=s+2*f,t=T*e;for(let n=0;n<I;n++){const e=S[n];z(e[0]+t,e[1]+t,e[2]+t)}}else{for(let e=0;e<I;e++){const t=S[e];z(t[2],t[1],t[0])}for(let e=0;e<I;e++){const t=S[e];z(t[0]+T*s,t[1]+T*s,t[2]+T*s)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;L(C,t),t+=C.length;for(let n=0,r=E.length;n<r;n++){const e=E[n];L(e,t),t+=e.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new rs(r,3)),this.setAttribute("uv",new rs(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let r=0,i=e.length;r<i;r++){const t=e[r];n.shapes.push(t.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let i=0,o=e.shapes.length;i<o;i++){const r=t[e.shapes[i]];n.push(r)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new Kd[r.type]).fromJSON(r)),new Gf(n,e.options)}}const Qf={generateTopUV:function(e,t,n,r,i){const o=t[3*n],a=t[3*n+1],s=t[3*r],l=t[3*r+1],c=t[3*i],u=t[3*i+1];return[new zi(o,a),new zi(s,l),new zi(c,u)]},generateSideWallUV:function(e,t,n,r,i,o){const a=t[3*n],s=t[3*n+1],l=t[3*n+2],c=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],f=t[3*i+1],p=t[3*i+2],m=t[3*o],g=t[3*o+1],v=t[3*o+2];return Math.abs(s-u)<Math.abs(a-c)?[new zi(a,1-l),new zi(c,1-h),new zi(d,1-p),new zi(m,1-v)]:[new zi(s,1-l),new zi(u,1-h),new zi(f,1-p),new zi(g,1-v)]}};class Hf extends af{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hf(e.radius,e.detail)}}class Vf extends af{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vf(e.radius,e.detail)}}class Wf extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:32,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2*Math.PI;super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],s=[],l=[],c=[];let u=e;const h=(t-e)/r,d=new vo,f=new zi;for(let p=0;p<=r;p++){for(let e=0;e<=n;e++){const r=i+e/n*o;d.x=u*Math.cos(r),d.y=u*Math.sin(r),s.push(d.x,d.y,d.z),l.push(0,0,1),f.x=(d.x/t+1)/2,f.y=(d.y/t+1)/2,c.push(f.x,f.y)}u+=h}for(let p=0;p<r;p++){const e=p*(n+1);for(let t=0;t<n;t++){const r=t+e,i=r,o=r+n+1,s=r+n+2,l=r+1;a.push(i,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new rs(s,3)),this.setAttribute("normal",new rs(l,3)),this.setAttribute("uv",new rs(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wf(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class qf extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new ff([new zi(0,.5),new zi(-.5,-.5),new zi(.5,-.5)]),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:12;super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],o=[];let a=0,s=0;if(!1===Array.isArray(e))l(e);else for(let c=0;c<e.length;c++)l(e[c]),this.addGroup(a,s,c),a+=s,s=0;function l(e){const a=r.length/3,l=e.extractPoints(t);let c=l.shape;const u=l.holes;!1===Uf.isClockWise(c)&&(c=c.reverse());for(let t=0,n=u.length;t<n;t++){const e=u[t];!0===Uf.isClockWise(e)&&(u[t]=e.reverse())}const h=Uf.triangulateShape(c,u);for(let t=0,n=u.length;t<n;t++){const e=u[t];c=c.concat(e)}for(let t=0,n=c.length;t<n;t++){const e=c[t];r.push(e.x,e.y,0),i.push(0,0,1),o.push(e.x,e.y)}for(let t=0,r=h.length;t<r;t++){const e=h[t],r=e[0]+a,i=e[1]+a,o=e[2]+a;n.push(r,i,o),s+=3}}this.setIndex(n),this.setAttribute("position",new rs(r,3)),this.setAttribute("normal",new rs(i,3)),this.setAttribute("uv",new rs(o,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new qf(n,e.curveSegments)}}class Xf extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Math.PI;super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new vo,h=new vo,d=[],f=[],p=[],m=[];for(let g=0;g<=n;g++){const d=[],v=g/n;let y=0;0===g&&0===o?y=.5/t:g===n&&s===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const s=n/t;u.x=-e*Math.cos(r+s*i)*Math.sin(o+v*a),u.y=e*Math.cos(o+v*a),u.z=e*Math.sin(r+s*i)*Math.sin(o+v*a),f.push(u.x,u.y,u.z),h.copy(u).normalize(),p.push(h.x,h.y,h.z),m.push(s+y,1-v),d.push(l++)}c.push(d)}for(let g=0;g<n;g++)for(let e=0;e<t;e++){const t=c[g][e+1],r=c[g][e],i=c[g+1][e],a=c[g+1][e+1];(0!==g||o>0)&&d.push(t,r,a),(g!==n-1||s<Math.PI)&&d.push(r,i,a)}this.setIndex(d),this.setAttribute("position",new rs(f,3)),this.setAttribute("normal",new rs(p,3)),this.setAttribute("uv",new rs(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Xf(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Yf extends af{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Yf(e.radius,e.detail)}}class Jf extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:12,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:48,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2*Math.PI;super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],s=[],l=[],c=new vo,u=new vo,h=new vo;for(let d=0;d<=n;d++)for(let o=0;o<=r;o++){const f=o/r*i,p=d/n*Math.PI*2;u.x=(e+t*Math.cos(p))*Math.cos(f),u.y=(e+t*Math.cos(p))*Math.sin(f),u.z=t*Math.sin(p),a.push(u.x,u.y,u.z),c.x=e*Math.cos(f),c.y=e*Math.sin(f),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(o/r),l.push(d/n)}for(let d=1;d<=n;d++)for(let e=1;e<=r;e++){const t=(r+1)*d+e-1,n=(r+1)*(d-1)+e-1,i=(r+1)*(d-1)+e,a=(r+1)*d+e;o.push(t,n,a),o.push(n,i,a)}this.setIndex(o),this.setAttribute("position",new rs(a,3)),this.setAttribute("normal",new rs(s,3)),this.setAttribute("uv",new rs(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Jf(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Kf extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.4,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:64,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3;super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],s=[],l=[],c=[],u=new vo,h=new vo,d=new vo,f=new vo,p=new vo,m=new vo,g=new vo;for(let y=0;y<=n;++y){const a=y/n*i*Math.PI*2;v(a,i,o,e,d),v(a+.01,i,o,e,f),m.subVectors(f,d),g.addVectors(f,d),p.crossVectors(m,g),g.crossVectors(p,m),p.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,o=-t*Math.cos(i),a=t*Math.sin(i);u.x=d.x+(o*g.x+a*p.x),u.y=d.y+(o*g.y+a*p.y),u.z=d.z+(o*g.z+a*p.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(y/n),c.push(e/r)}}for(let y=1;y<=n;y++)for(let e=1;e<=r;e++){const t=(r+1)*(y-1)+(e-1),n=(r+1)*y+(e-1),i=(r+1)*y+e,o=(r+1)*(y-1)+e;a.push(t,n,o),a.push(n,i,o)}function v(e,t,n,r,i){const o=Math.cos(e),a=Math.sin(e),s=n/t*e,l=Math.cos(s);i.x=r*(2+l)*.5*o,i.y=r*(2+l)*a*.5,i.z=r*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new rs(s,3)),this.setAttribute("normal",new rs(l,3)),this.setAttribute("uv",new rs(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Kf(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Zf extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Yd(new vo(-1,-1,0),new vo(-1,1,0),new vo(1,1,0)),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const o=e.computeFrenetFrames(t,i);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new vo,s=new vo,l=new zi;let c=new vo;const u=[],h=[],d=[],f=[];function p(i){c=e.getPointAt(i/t,c);const l=o.normals[i],d=o.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),o=-Math.cos(t);s.x=o*l.x+i*d.x,s.y=o*l.y+i*d.y,s.z=o*l.z+i*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}!function(){for(let e=0;e<t;e++)p(e);p(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)l.x=e/t,l.y=n/r,d.push(l.x,l.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),o=(r+1)*e+t,a=(r+1)*(e-1)+t;f.push(n,i,a),f.push(i,o,a)}}()}(),this.setIndex(f),this.setAttribute("position",new rs(u,3)),this.setAttribute("normal",new rs(h,3)),this.setAttribute("uv",new rs(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Zf((new Kd[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class $f extends hs{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new vo,i=new vo;if(null!==e.index){const o=e.attributes.position,a=e.index;let s=e.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let e=0,l=s.length;e<l;++e){const l=s[e],c=l.start;for(let e=c,s=c+l.count;e<s;e+=3)for(let l=0;l<3;l++){const s=a.getX(e+l),c=a.getX(e+(l+1)%3);r.fromBufferAttribute(o,s),i.fromBufferAttribute(o,c),!0===ep(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const o=e.attributes.position;for(let e=0,a=o.count/3;e<a;e++)for(let s=0;s<3;s++){const a=3*e+s,l=3*e+(s+1)%3;r.fromBufferAttribute(o,a),i.fromBufferAttribute(o,l),!0===ep(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new rs(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function ep(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var tp=Object.freeze({__proto__:null,BoxGeometry:Ps,CapsuleGeometry:tf,CircleGeometry:nf,ConeGeometry:of,CylinderGeometry:rf,DodecahedronGeometry:sf,EdgesGeometry:df,ExtrudeGeometry:Gf,IcosahedronGeometry:Hf,LatheGeometry:ef,OctahedronGeometry:Vf,PlaneGeometry:tl,PolyhedronGeometry:af,RingGeometry:Wf,ShapeGeometry:qf,SphereGeometry:Xf,TetrahedronGeometry:Yf,TorusGeometry:Jf,TorusKnotGeometry:Kf,TubeGeometry:Zf,WireframeGeometry:$f});class np extends Ua{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new La(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class rp extends Ls{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class ip extends Ua{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new La(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new La(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rr,this.normalScale=new zi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ra,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class op extends ip{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new zi(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Ri(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new La(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new La(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new La(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!==e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!==e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!==e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!==e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!==e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!==e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class ap extends Ua{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new La(16777215),this.specular=new La(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new La(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rr,this.normalScale=new zi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ra,this.combine=Rt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class sp extends Ua{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new La(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new La(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rr,this.normalScale=new zi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class lp extends Ua{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rr,this.normalScale=new zi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class cp extends Ua{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new La(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new La(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rr,this.normalScale=new zi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new ra,this.combine=Rt,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class up extends Ua{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new La(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Rr,this.normalScale=new zi(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class hp extends od{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function dp(e,t,n){return!e||!n&&e.constructor===t?e:"number"===typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function fp(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pp(e){const t=e.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort((function(t,n){return e[t]-e[n]})),n}function mp(e,t,n){const r=e.length,i=new e.constructor(r);for(let o=0,a=0;a!==r;++o){const r=n[o]*t;for(let n=0;n!==t;++n)i[a++]=e[r+n]}return i}function gp(e,t,n,r){let i=1,o=e[0];for(;void 0!==o&&void 0===o[r];)o=e[i++];if(void 0===o)return;let a=o[r];if(void 0!==a)if(Array.isArray(a))do{a=o[r],void 0!==a&&(t.push(o.time),n.push.apply(n,a)),o=e[i++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[r],void 0!==a&&(t.push(o.time),a.toArray(n,n.length)),o=e[i++]}while(void 0!==o);else do{a=o[r],void 0!==a&&(t.push(o.time),n.push(a)),o=e[i++]}while(void 0!==o)}const vp={convertArray:dp,isTypedArray:fp,getKeyframeOrder:pp,sortedArray:mp,flattenJSON:gp,subclip:function(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:30;const o=e.clone();o.name=t;const a=[];for(let l=0;l<o.tracks.length;++l){const e=o.tracks[l],t=e.getValueSize(),s=[],c=[];for(let o=0;o<e.times.length;++o){const a=e.times[o]*i;if(!(a<n||a>=r)){s.push(e.times[o]);for(let n=0;n<t;++n)c.push(e.values[o*t+n])}}0!==s.length&&(e.times=dp(s,e.times.constructor),e.values=dp(c,e.values.constructor),a.push(e))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;r<=0&&(r=30);const i=n.tracks.length,o=t/r;for(let a=0;a<i;++a){const t=n.tracks[a],r=t.ValueTypeName;if("bool"===r||"string"===r)continue;const i=e.tracks.find((function(e){return e.name===t.name&&e.ValueTypeName===r}));if(void 0===i)continue;let s=0;const l=t.getValueSize();t.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=i.getValueSize();i.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=t.times.length-1;let d;if(o<=t.times[0]){const e=s,n=l-s;d=t.values.slice(e,n)}else if(o>=t.times[h]){const e=h*l+s,n=e+l-s;d=t.values.slice(e,n)}else{const e=t.createInterpolant(),n=s,r=l-s;e.evaluate(o),d=e.resultBuffer.slice(n,r)}if("quaternion"===r){(new go).fromArray(d).normalize().conjugate().toArray(d)}const f=i.times.length;for(let e=0;e<f;++e){const t=e*u+c;if("quaternion"===r)go.multiplyQuaternionsFlat(i.values,t,d,0,i.values,t);else{const e=u-2*c;for(let n=0;n<e;++n)i.values[t+n]-=d[n]}}}return e.blendMode=Er,e}};class yp{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let o;n:{r:if(!(e<r)){for(let o=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===o)break;if(i=r,r=t[++n],e<r)break t}o=t.length;break n}if(e>=i)break e;{const a=t[1];e<a&&(n=2,i=a);for(let o=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===o)break;if(r=i,i=t[--n-1],e>=i)break t}o=n,n=0}}for(;n<o;){const r=n+o>>>1;e<t[r]?o=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let o=0;o!==r;++o)t[o]=n[i+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Ap extends yp{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:xr,endingEnd:xr}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,o=e+1,a=r[i],s=r[o];if(void 0===a)switch(this.getSettings_().endingStart){case br:i=e,a=2*t-n;break;case _r:i=r.length-2,a=t+r[i]-r[i+1];break;default:i=e,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case br:o=e,s=2*n-t;break;case _r:o=1,s=n+r[1]-r[0];break;default:o=e-1,s=t}const l=.5*(n-t),c=this.valueSize;this._weightPrev=l/(t-a),this._weightNext=l/(s-n),this._offsetPrev=i*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,f=(n-t)/(r-t),p=f*f,m=p*f,g=-h*m+2*h*p-h*f,v=(1+h)*m+(-1.5-2*h)*p+(-.5+h)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,A=d*m-d*p;for(let x=0;x!==a;++x)i[x]=g*o[c+x]+v*o[l+x]+y*o[s+x]+A*o[u+x];return i}}class xp extends yp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=e*a,l=s-a,c=(n-t)/(r-t),u=1-c;for(let h=0;h!==a;++h)i[h]=o[l+h]*u+o[s+h]*c;return i}}class bp extends yp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class _p{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=dp(t,this.TimeBufferType),this.values=dp(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:dp(e.times,Array),values:dp(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new bp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new xp(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Ap(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case vr:t=this.InterpolantFactoryMethodDiscrete;break;case yr:t=this.InterpolantFactoryMethodLinear;break;case Ar:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return vr;case this.InterpolantFactoryMethodLinear:return yr;case this.InterpolantFactoryMethodSmooth:return Ar}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,o=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==o&&n[o]>t;)--o;if(++o,0!==i||o!==r){i>=o&&(o=Math.max(o,1),i=o-1);const e=this.getValueSize();this.times=n.slice(i,o),this.values=this.values.slice(i*e,o*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==i;a++){const t=n[a];if("number"===typeof t&&isNaN(t)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,t),e=!1;break}if(null!==o&&o>t){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,t,o),e=!1;break}o=t}if(void 0!==r&&fp(r))for(let a=0,s=r.length;a!==s;++a){const t=r[a];if(isNaN(t)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,t),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Ar,i=e.length-1;let o=1;for(let a=1;a<i;++a){let i=!1;const s=e[a];if(s!==e[a+1]&&(1!==a||s!==e[0]))if(r)i=!0;else{const e=a*n,r=e-n,o=e+n;for(let a=0;a!==n;++a){const n=t[e+a];if(n!==t[r+a]||n!==t[o+a]){i=!0;break}}}if(i){if(a!==o){e[o]=e[a];const r=a*n,i=o*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++o}}if(i>0){e[o]=e[i];for(let e=i*n,r=o*n,a=0;a!==n;++a)t[r+a]=t[e+a];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}_p.prototype.TimeBufferType=Float32Array,_p.prototype.ValueBufferType=Float32Array,_p.prototype.DefaultInterpolation=yr;class wp extends _p{constructor(e,t,n){super(e,t,n)}}wp.prototype.ValueTypeName="bool",wp.prototype.ValueBufferType=Array,wp.prototype.DefaultInterpolation=vr,wp.prototype.InterpolantFactoryMethodLinear=void 0,wp.prototype.InterpolantFactoryMethodSmooth=void 0;class Ep extends _p{}Ep.prototype.ValueTypeName="color";class Sp extends _p{}Sp.prototype.ValueTypeName="number";class Cp extends yp{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-t)/(r-t);let l=e*a;for(let c=l+a;l!==c;l+=4)go.slerpFlat(i,0,o,l-a,o,l,s);return i}}class Mp extends _p{InterpolantFactoryMethodLinear(e){return new Cp(this.times,this.values,this.getValueSize(),e)}}Mp.prototype.ValueTypeName="quaternion",Mp.prototype.InterpolantFactoryMethodSmooth=void 0;class Tp extends _p{constructor(e,t,n){super(e,t,n)}}Tp.prototype.ValueTypeName="string",Tp.prototype.ValueBufferType=Array,Tp.prototype.DefaultInterpolation=vr,Tp.prototype.InterpolantFactoryMethodLinear=void 0,Tp.prototype.InterpolantFactoryMethodSmooth=void 0;class Ip extends _p{}Ip.prototype.ValueTypeName="vector";class Bp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:wr;this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=Pi(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(Pp(n[o]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let i=0,o=n.length;i!==o;++i)t.push(_p.toJSON(n[i]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,o=[];for(let a=0;a<i;a++){let e=[],s=[];e.push((a+i-1)%i,a,(a+1)%i),s.push(0,1,0);const l=pp(e);e=mp(e,1,l),s=mp(s,1,l),r||0!==e[0]||(e.push(i),s.push(s[0])),o.push(new Sp(".morphTargetInfluences["+t[a].name+"]",e,s).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let a=0,s=e.length;a<s;a++){const t=e[a],n=t.name.match(i);if(n&&n.length>1){const e=n[1];let i=r[e];i||(r[e]=i=[]),i.push(t)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const o=[],a=[];gp(n,o,a,r),0!==o.length&&i.push(new e(t,o,a))}},r=[],i=e.name||"default",o=e.fps||30,a=e.blendMode;let s=e.length||-1;const l=e.hierarchy||[];for(let c=0;c<l.length;c++){const e=l[c].keys;if(e&&0!==e.length)if(e[0].morphTargets){const t={};let n;for(n=0;n<e.length;n++)if(e[n].morphTargets)for(let r=0;r<e[n].morphTargets.length;r++)t[e[n].morphTargets[r]]=-1;for(const i in t){const t=[],o=[];for(let r=0;r!==e[n].morphTargets.length;++r){const r=e[n];t.push(r.time),o.push(r.morphTarget===i?1:0)}r.push(new Sp(".morphTargetInfluence["+i+"]",t,o))}s=t.length*o}else{const i=".bones["+t[c].name+"]";n(Ip,i+".position",e,"pos",r),n(Mp,i+".quaternion",e,"rot",r),n(Ip,i+".scale",e,"scl",r)}}if(0===r.length)return null;return new this(i,s,r,a)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Pp(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Sp;case"vector":case"vector2":case"vector3":case"vector4":return Ip;case"color":return Ep;case"quaternion":return Mp;case"bool":case"boolean":return wp;case"string":return Tp}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];gp(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Rp={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Dp{constructor(e,t,n){const r=this;let i,o=!1,a=0,s=0;const l=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){s++,!1===o&&void 0!==r.onStart&&r.onStart(e,a,s),o=!0},this.itemEnd=function(e){a++,void 0!==r.onProgress&&r.onProgress(e,a,s),a===s&&(o=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return l.push(e,t),this},this.removeHandler=function(e){const t=l.indexOf(e);return-1!==t&&l.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=l.length;t<n;t+=2){const n=l[t],r=l[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Op=new Dp;class kp{constructor(e){this.manager=void 0!==e?e:Op,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}kp.DEFAULT_MATERIAL_NAME="__DEFAULT";const Lp={};class Fp extends Error{constructor(e,t){super(e),this.response=t}}class zp extends kp{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Rp.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==Lp[e])return void Lp[e].push({onLoad:t,onProgress:n,onError:r});Lp[e]=[],Lp[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,s=this.responseType;fetch(o).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=Lp[e],r=t.body.getReader(),i=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),o=i?parseInt(i):0,a=0!==o;let s=0;const l=new ReadableStream({start(e){!function t(){r.read().then((r=>{let{done:i,value:l}=r;if(i)e.close();else{s+=l.byteLength;const r=new ProgressEvent("progress",{lengthComputable:a,loaded:s,total:o});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(l),t()}}),(t=>{e.error(t)}))}()}});return new Response(l)}throw new Fp(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(s){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,a)));case"json":return e.json();default:if(void 0===a)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(a),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Rp.add(e,t);const n=Lp[e];delete Lp[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=Lp[e];if(void 0===n)throw this.manager.itemError(e),t;delete Lp[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Up extends kp{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new zp(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(NQ){r?r(NQ):console.error(NQ),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Bp.parse(e[n]);t.push(r)}return t}}class Np extends kp{constructor(e){super(e)}load(e,t,n,r){const i=this,o=[],a=new Td,s=new zp(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(i.withCredentials);let l=0;function c(c){s.load(e[c],(function(e){const n=i.parse(e,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=an),a.image=o,a.format=n.format,a.needsUpdate=!0,t&&t(a))}),n,r)}if(Array.isArray(e))for(let u=0,h=e.length;u<h;++u)c(u);else s.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){o[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)o[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),o[t].format=n.format,o[t].width=n.width,o[t].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=an),a.format=n.format,a.needsUpdate=!0,t&&t(a)}),n,r);return a}}class jp extends kp{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Rp.get(e);if(void 0!==o)return i.manager.itemStart(e),setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o;const a=Hi("img");function s(){c(),Rp.add(e,this),t&&t(this),i.manager.itemEnd(e)}function l(t){c(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function c(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),i.manager.itemStart(e),a.src=e,a}}class Gp extends kp{constructor(e){super(e)}load(e,t,n,r){const i=new Hs;i.colorSpace=kr;const o=new jp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(e[n],(function(e){i.images[n]=e,a++,6===a&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let l=0;l<e.length;++l)s(l);return i}}class Qp extends kp{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new Mh,a=new zp(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(i.withCredentials),a.load(e,(function(e){let n;try{n=i.parse(e)}catch(Wy){if(void 0===r)return void console.error(Wy);r(Wy)}void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Zt,o.wrapT=void 0!==n.wrapT?n.wrapT:Zt,o.magFilter=void 0!==n.magFilter?n.magFilter:an,o.minFilter=void 0!==n.minFilter?n.minFilter:an,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(o.colorSpace=n.colorSpace),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=cn),1===n.mipmapCount&&(o.minFilter=an),void 0!==n.generateMipmaps&&(o.generateMipmaps=n.generateMipmaps),o.needsUpdate=!0,t&&t(o,n)}),n,r),o}}class Hp extends kp{constructor(e){super(e)}load(e,t,n,r){const i=new so,o=new jp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class Vp extends xa{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.isLight=!0,this.type="Light",this.color=new La(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),void 0!==this.target&&(t.object.target=this.target.uuid),t}}class Wp extends Vp{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(xa.DEFAULT_UP),this.updateMatrix(),this.groundColor=new La(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const qp=new qo,Xp=new vo,Yp=new vo;class Jp{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new zi(512,512),this.map=null,this.mapPass=null,this.matrix=new qo,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Zs,this._frameExtents=new zi(1,1),this._viewportCount=1,this._viewports=[new lo(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;Xp.setFromMatrixPosition(e.matrixWorld),t.position.copy(Xp),Yp.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Yp),t.updateMatrixWorld(),qp.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(qp),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(qp)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 1!==this.intensity&&(e.intensity=this.intensity),0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Kp extends Jp{constructor(){super(new js(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Bi*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class Zp extends Vp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Math.PI/3,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:2;super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(xa.DEFAULT_UP),this.updateMatrix(),this.target=new xa,this.distance=n,this.angle=r,this.penumbra=i,this.decay=o,this.map=null,this.shadow=new Kp}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const $p=new qo,em=new vo,tm=new vo;class nm extends Jp{constructor(){super(new js(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new zi(4,2),this._viewportCount=6,this._viewports=[new lo(2,1,1,1),new lo(0,1,1,1),new lo(3,1,1,1),new lo(1,1,1,1),new lo(3,0,1,1),new lo(1,0,1,1)],this._cubeDirections=[new vo(1,0,0),new vo(-1,0,0),new vo(0,0,1),new vo(0,0,-1),new vo(0,1,0),new vo(0,-1,0)],this._cubeUps=[new vo(0,1,0),new vo(0,1,0),new vo(0,1,0),new vo(0,1,0),new vo(0,0,1),new vo(0,0,-1)]}updateMatrices(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),em.setFromMatrixPosition(e.matrixWorld),n.position.copy(em),tm.copy(n.position),tm.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(tm),n.updateMatrixWorld(),r.makeTranslation(-em.x,-em.y,-em.z),$p.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix($p)}}class rm extends Vp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:2;super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new nm}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class im extends Jp{constructor(){super(new pl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class om extends Vp{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(xa.DEFAULT_UP),this.updateMatrix(),this.target=new xa,this.shadow=new im}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class am extends Vp{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class sm extends Vp{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class lm{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new vo)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*i),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],n*r*1.092548),t.addScaledVector(o[5],r*i*1.092548),t.addScaledVector(o[6],.315392*(3*i*i-1)),t.addScaledVector(o[7],n*i*1.092548),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],1.023328*r),t.addScaledVector(o[2],1.023328*i),t.addScaledVector(o[3],1.023328*n),t.addScaledVector(o[4],.858086*n*r),t.addScaledVector(o[5],.858086*r*i),t.addScaledVector(o[6],.743125*i*i-.247708),t.addScaledVector(o[7],.858086*n*i),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class cm extends Vp{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new lm;super(void 0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class um extends kp{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,o=new zp(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(NQ){r?r(NQ):console.error(NQ),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=um.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new La).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"===typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const i in e.uniforms){const t=e.uniforms[i];switch(r.uniforms[i]={},t.type){case"t":r.uniforms[i].value=n(t.value);break;case"c":r.uniforms[i].value=(new La).setHex(t.value);break;case"v2":r.uniforms[i].value=(new zi).fromArray(t.value);break;case"v3":r.uniforms[i].value=(new vo).fromArray(t.value);break;case"v4":r.uniforms[i].value=(new lo).fromArray(t.value);break;case"m3":r.uniforms[i].value=(new Ui).fromArray(t.value);break;case"m4":r.uniforms[i].value=(new qo).fromArray(t.value);break;default:r.uniforms[i].value=t.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const i in e.extensions)r.extensions[i]=e.extensions[i];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new zi).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new zi).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:np,SpriteMaterial:Ku,RawShaderMaterial:rp,ShaderMaterial:Ls,PointsMaterial:Ad,MeshPhysicalMaterial:op,MeshStandardMaterial:ip,MeshPhongMaterial:ap,MeshToonMaterial:sp,MeshNormalMaterial:lp,MeshLambertMaterial:cp,MeshDepthMaterial:Cu,MeshDistanceMaterial:Mu,MeshBasicMaterial:Na,MeshMatcapMaterial:up,LineDashedMaterial:hp,LineBasicMaterial:od,Material:Ua}[e]}}class hm{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(NQ){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!==typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class dm extends hs{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class fm extends kp{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new zp(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(NQ){r?r(NQ):console.error(NQ),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],o=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,i=r[t],o=new Uint32Array(i).buffer;return n[t]=o,o}(e,i.buffer),a=Qi(i.type,o),s=new Xu(a,i.stride);return s.uuid=i.uuid,t[r]=s,s}const i=e.isInstancedBufferGeometry?new dm:new hs,o=e.data.index;if(void 0!==o){const e=Qi(o.type,o.array);i.setIndex(new Xa(e,1))}const a=e.data.attributes;for(const u in a){const t=a[u];let n;if(t.isInterleavedBufferAttribute){const i=r(e.data,t.data);n=new Ju(i,t.itemSize,t.offset,t.normalized)}else{const e=Qi(t.type,t.array);n=new(t.isInstancedBufferAttribute?Ph:Xa)(e,t.itemSize,t.normalized)}void 0!==t.name&&(n.name=t.name),void 0!==t.usage&&n.setUsage(t.usage),i.setAttribute(u,n)}const s=e.data.morphAttributes;if(s)for(const u in s){const t=s[u],n=[];for(let i=0,o=t.length;i<o;i++){const o=t[i];let a;if(o.isInterleavedBufferAttribute){const t=r(e.data,o.data);a=new Ju(t,o.itemSize,o.offset,o.normalized)}else{const e=Qi(o.type,o.array);a=new Xa(e,o.itemSize,o.normalized)}void 0!==o.name&&(a.name=o.name),n.push(a)}i.morphAttributes[u]=n}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const l=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==l)for(let u=0,h=l.length;u!==h;++u){const e=l[u];i.addGroup(e.start,e.count,e.materialIndex)}const c=e.data.boundingSphere;if(void 0!==c){const e=new vo;void 0!==c.center&&e.fromArray(c.center),i.boundingSphere=new zo(e,c.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class pm extends kp{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===this.path?hm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new zp(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,(function(n){let o=null;try{o=JSON.parse(n)}catch(Wy){return void 0!==r&&r(Wy),void console.error("THREE:ObjectLoader: Can't parse "+e+".",Wy.message)}const a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(o,t)}),n,r)}async loadAsync(e,t){const n=""===this.path?hm.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new zp(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),o=JSON.parse(i),a=o.metadata;if(void 0===a||void 0===a.type||"geometry"===a.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(o)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,(function(){void 0!==t&&t(l)})),a=this.parseTextures(e.textures,o),s=this.parseMaterials(e.materials,a),l=this.parseObject(e.object,i,s,a,n),c=this.parseSkeletons(e.skeletons,l);if(this.bindSkeletons(l,c),this.bindLightTargets(l),void 0!==t){let e=!1;for(const t in o)if(o[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(l)}return l}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,i),a=this.parseMaterials(e.materials,o),s=this.parseObject(e.object,r,a,o,t),l=this.parseSkeletons(e.skeletons,s);return this.bindSkeletons(s,l),this.bindLightTargets(s),s}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new ff).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let i=0,o=e.length;i<o;i++){const t=(new Bh).fromJSON(e[i],r);n[t.uuid]=t}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new fm;for(let i=0,o=e.length;i<o;i++){let o;const a=e[i];switch(a.type){case"BufferGeometry":case"InstancedBufferGeometry":o=r.parse(a);break;default:a.type in tp?o=tp[a.type].fromJSON(a,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${a.type}"`)}o.uuid=a.uuid,void 0!==a.name&&(o.name=a.name),void 0!==a.userData&&(o.userData=a.userData),n[a.uuid]=o}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new um;i.setTextures(t);for(let t=0,o=e.length;t<o;t++){const o=e[t];void 0===n[o.uuid]&&(n[o.uuid]=i.parse(o)),r[o.uuid]=n[o.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=Bp.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function o(e){if("string"===typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:Qi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Dp(t);i=new jp(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,i=e.length;t<i;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=o(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Mh(n.data,n.width,n.height)))}r[n.uuid]=new io(e)}else{const e=o(n.url);r[n.uuid]=new io(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"===typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:Qi(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new jp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.url;if(Array.isArray(o)){const e=[];for(let t=0,n=o.length;t<n;t++){const n=o[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Mh(r.data,r.width,r.height)))}n[r.uuid]=new io(e)}else{const e=await i(r.url);n[r.uuid]=new io(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"===typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,o=e.length;i<o;i++){const o=e[i];void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===t[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const a=t[o.image],s=a.data;let l;Array.isArray(s)?(l=new Hs,6===s.length&&(l.needsUpdate=!0)):(l=s&&s.data?new Mh:new so,s&&(l.needsUpdate=!0)),l.source=a,l.uuid=o.uuid,void 0!==o.name&&(l.name=o.name),void 0!==o.mapping&&(l.mapping=n(o.mapping,mm)),void 0!==o.channel&&(l.channel=o.channel),void 0!==o.offset&&l.offset.fromArray(o.offset),void 0!==o.repeat&&l.repeat.fromArray(o.repeat),void 0!==o.center&&l.center.fromArray(o.center),void 0!==o.rotation&&(l.rotation=o.rotation),void 0!==o.wrap&&(l.wrapS=n(o.wrap[0],gm),l.wrapT=n(o.wrap[1],gm)),void 0!==o.format&&(l.format=o.format),void 0!==o.internalFormat&&(l.internalFormat=o.internalFormat),void 0!==o.type&&(l.type=o.type),void 0!==o.colorSpace&&(l.colorSpace=o.colorSpace),void 0!==o.minFilter&&(l.minFilter=n(o.minFilter,vm)),void 0!==o.magFilter&&(l.magFilter=n(o.magFilter,vm)),void 0!==o.anisotropy&&(l.anisotropy=o.anisotropy),void 0!==o.flipY&&(l.flipY=o.flipY),void 0!==o.generateMipmaps&&(l.generateMipmaps=o.generateMipmaps),void 0!==o.premultiplyAlpha&&(l.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(l.unpackAlignment=o.unpackAlignment),void 0!==o.compareFunction&&(l.compareFunction=o.compareFunction),void 0!==o.userData&&(l.userData=o.userData),r[o.uuid]=l}return r}parseObject(e,t,n,r,i){let o,a,s;function l(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function c(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":o=new qu,void 0!==e.background&&(Number.isInteger(e.background)?o.background=new La(e.background):o.background=u(e.background)),void 0!==e.environment&&(o.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new Wu(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new Vu(e.fog.color,e.fog.density)),""!==e.fog.name&&(o.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(o.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(o.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&o.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(o.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new js(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new pl(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new am(e.color,e.intensity);break;case"DirectionalLight":o=new om(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new rm(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new sm(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Zp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new Wp(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=(new cm).fromJSON(e);break;case"SkinnedMesh":a=l(e.geometry),s=c(e.material),o=new Sh(a,s),void 0!==e.bindMode&&(o.bindMode=e.bindMode),void 0!==e.bindMatrix&&o.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(o.skeleton=e.skeleton);break;case"Mesh":a=l(e.geometry),s=c(e.material),o=new Is(a,s);break;case"InstancedMesh":a=l(e.geometry),s=c(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;o=new Uh(a,s,t),o.instanceMatrix=new Ph(new Float32Array(n.array),16),void 0!==r&&(o.instanceColor=new Ph(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":a=l(e.geometry),s=c(e.material),o=new id(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,s),o.geometry=a,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map((e=>{const t=new xo;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const n=new zo;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}})),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new mh;break;case"Line":o=new fd(l(e.geometry),c(e.material));break;case"LineLoop":o=new yd(l(e.geometry),c(e.material));break;case"LineSegments":o=new vd(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":o=new Ed(l(e.geometry),c(e.material));break;case"Sprite":o=new hh(c(e.material));break;case"Group":o=new ku;break;case"Bone":o=new Ch;break;default:o=new xa}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.up&&o.up.fromArray(e.up),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.intensity&&(o.shadow.intensity=e.shadow.intensity),void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(o.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.layers&&(o.layers.mask=e.layers),void 0!==e.children){const a=e.children;for(let e=0;e<a.length;e++)o.add(this.parseObject(a[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];o.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(o.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=o.getObjectByProperty("uuid",n.object);void 0!==r&&o.addLevel(r,n.distance,n.hysteresis)}}return o}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}bindLightTargets(e){e.traverse((function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);t.target=void 0!==r?r:new xa}}))}}const mm={UVMapping:Vt,CubeReflectionMapping:Wt,CubeRefractionMapping:qt,EquirectangularReflectionMapping:Xt,EquirectangularRefractionMapping:Yt,CubeUVReflectionMapping:Jt},gm={RepeatWrapping:Kt,ClampToEdgeWrapping:Zt,MirroredRepeatWrapping:$t},vm={NearestFilter:en,NearestMipmapNearestFilter:tn,NearestMipmapLinearFilter:rn,LinearFilter:an,LinearMipmapNearestFilter:sn,LinearMipmapLinearFilter:cn};class ym extends kp{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,o=Rp.get(e);if(void 0!==o)return i.manager.itemStart(e),o.then?void o.then((n=>{t&&t(n),i.manager.itemEnd(e)})).catch((e=>{r&&r(e)})):(setTimeout((function(){t&&t(o),i.manager.itemEnd(e)}),0),o);const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",a.headers=this.requestHeader;const s=fetch(e,a).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){return Rp.add(e,n),t&&t(n),i.manager.itemEnd(e),n})).catch((function(t){r&&r(t),Rp.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)}));Rp.add(e,s),i.manager.itemStart(e)}}let Am;class xm{static getContext(){return void 0===Am&&(Am=new(window.AudioContext||window.webkitAudioContext)),Am}static setContext(e){Am=e}}class bm extends kp{constructor(e){super(e)}load(e,t,n,r){const i=this,o=new zp(this.manager);function a(t){r?r(t):console.error(t),i.manager.itemError(e)}o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(e){try{const n=e.slice(0);xm.getContext().decodeAudioData(n,(function(e){t(e)})).catch(a)}catch(NQ){a(NQ)}}),n,r)}}const _m=new qo,wm=new qo,Em=new qo;class Sm{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new js,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new js,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Em.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(Ii*t.fov*.5)/t.zoom;let o,a;wm.elements[12]=-n,_m.elements[12]=n,o=-i*t.aspect+r,a=i*t.aspect+r,Em.elements[0]=2*t.near/(a-o),Em.elements[8]=(a+o)/(a-o),this.cameraL.projectionMatrix.copy(Em),o=-i*t.aspect-r,a=i*t.aspect-r,Em.elements[0]=2*t.near/(a-o),Em.elements[8]=(a+o)/(a-o),this.cameraR.projectionMatrix.copy(Em)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(wm),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(_m)}}class Cm{constructor(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Mm(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Mm();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Mm(){return("undefined"===typeof performance?Date:performance).now()}const Tm=new vo,Im=new go,Bm=new vo,Pm=new vo;class Rm extends xa{constructor(){super(),this.type="AudioListener",this.context=xm.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Cm}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Tm,Im,Bm),Pm.set(0,0,-1).applyQuaternion(Im),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Tm.x,e),t.positionY.linearRampToValueAtTime(Tm.y,e),t.positionZ.linearRampToValueAtTime(Tm.z,e),t.forwardX.linearRampToValueAtTime(Pm.x,e),t.forwardY.linearRampToValueAtTime(Pm.y,e),t.forwardZ.linearRampToValueAtTime(Pm.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(Tm.x,Tm.y,Tm.z),t.setOrientation(Pm.x,Pm.y,Pm.z,n.x,n.y,n.z)}}class Dm extends xa{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Om=new vo,km=new go,Lm=new vo,Fm=new vo;class zm extends Dm{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Om,km,Lm),Fm.set(0,0,1).applyQuaternion(km);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Om.x,e),t.positionY.linearRampToValueAtTime(Om.y,e),t.positionZ.linearRampToValueAtTime(Om.z,e),t.orientationX.linearRampToValueAtTime(Fm.x,e),t.orientationY.linearRampToValueAtTime(Fm.y,e),t.orientationZ.linearRampToValueAtTime(Fm.z,e)}else t.setPosition(Om.x,Om.y,Om.z),t.setOrientation(Fm.x,Fm.y,Fm.z)}}class Um{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2048;this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Nm{constructor(e,t,n){let r,i,o;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let o=this.cumulativeWeight;if(0===o){for(let e=0;e!==r;++e)n[i+e]=n[e];o=t}else{o+=t;const e=t/o;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let s=t,l=t+t;s!==l;++s)if(n[s]!==n[s+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let i=n,o=r;i!==o;++i)t[i]=t[r+i%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let o=0;o!==i;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){go.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const o=this._workIndex*i;go.multiplyQuaternionsFlat(e,o,e,t,e,n),go.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,i){const o=1-r;for(let a=0;a!==i;++a){const i=t+a;e[i]=e[i]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,i){for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]+e[n+o]*r}}}const jm="\\[\\]\\.:\\/",Gm=new RegExp("["+jm+"]","g"),Qm="[^"+jm+"]",Hm="[^"+jm.replace("\\.","")+"]",Vm=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Qm)+/(WCOD+)?/.source.replace("WCOD",Hm)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Qm)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Qm)+"$"),Wm=["material","materials","bones","map"];class qm{constructor(e,t,n){this.path=t,this.parsedPath=n||qm.parseTrackName(t),this.node=qm.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new qm.Composite(e,t,n):new qm(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Gm,"")}static parseTrackName(e){const t=Vm.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==Wm.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const o=n(i.children);if(o)return o}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=qm.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const o=e[r];if(void 0===o){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let a=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=i}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}qm.Composite=class{constructor(e,t,n){const r=n||qm.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},qm.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},qm.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},qm.prototype.GetterByBindingType=[qm.prototype._getValue_direct,qm.prototype._getValue_array,qm.prototype._getValue_arrayElement,qm.prototype._getValue_toArray],qm.prototype.SetterByBindingTypeAndVersioning=[[qm.prototype._setValue_direct,qm.prototype._setValue_direct_setNeedsUpdate,qm.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[qm.prototype._setValue_array,qm.prototype._setValue_array_setNeedsUpdate,qm.prototype._setValue_array_setMatrixWorldNeedsUpdate],[qm.prototype._setValue_arrayElement,qm.prototype._setValue_arrayElement_setNeedsUpdate,qm.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[qm.prototype._setValue_fromArray,qm.prototype._setValue_fromArray_setNeedsUpdate,qm.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Xm{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Pi(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,o=i.length;let a,s=e.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=t[h];if(void 0===d){d=s++,t[h]=d,e.push(u);for(let e=0,t=o;e!==t;++e)i[e].push(new qm(u,n[e],r[e]))}else if(d<l){a=e[d];const s=--l,c=e[s];t[c.uuid]=d,e[d]=c,t[h]=s,e[s]=u;for(let e=0,t=o;e!==t;++e){const t=i[e],o=t[s];let a=t[d];t[d]=o,void 0===a&&(a=new qm(u,n[e],r[e])),t[s]=a}}else e[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=t[s];if(void 0!==l&&l>=i){const o=i++,c=e[o];t[c.uuid]=l,e[l]=c,t[s]=o,e[o]=a;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[l];t[l]=r,t[o]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,o=e.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a].uuid,l=t[s];if(void 0!==l)if(delete t[s],l<i){const a=--i,s=e[a],c=--o,u=e[c];t[s.uuid]=l,e[l]=s,t[u.uuid]=a,e[a]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[a],i=t[c];t[l]=r,t[a]=i,t.pop()}}else{const i=--o,a=e[i];i>0&&(t[a.uuid]=l),e[l]=a,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[l]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);r=i.length,n[e]=r,o.push(e),a.push(t),i.push(u);for(let h=c,d=s.length;h!==d;++h){const n=s[h];u[h]=new qm(n,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=n,o[n]=s,o.pop(),i[n]=i[a],i.pop(),r[n]=r[a],r.pop()}}}class Ym{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.blendMode;this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,o=i.length,a=new Array(o),s={endingStart:xr,endingEnd:xr};for(let l=0;l!==o;++l){const e=i[l].createInterpolant(null);a[l]=e,e.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=mr,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,o=n/r;e.warp(1,i,t),this.warp(o,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=i,s[1]=i+n,l[0]=e/o,l[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Er)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(o),t[n].accumulateAdditive(a);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(o),t[n].accumulate(r,a)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const o=n===gr;if(0===e)return-1===i?r:o&&1===(1&i)?t-r:r;if(n===pr){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const a=this.repetitions-i;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===a){const t=e<0;this._setEndings(t,!t,o)}else this._setEndings(!1,!1,o);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(o&&1===(1&i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=br,r.endingEnd=br):(r.endingStart=e?this.zeroSlopeAtStart?br:xr:_r,r.endingEnd=t?this.zeroSlopeAtEnd?br:xr:_r)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let o=this._weightInterpolant;null===o&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=i,s[0]=t,a[1]=i+e,s[1]=n,this}}const Jm=new Float32Array(1);class Km extends Ci{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,o=e._propertyBindings,a=e._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let u=0;u!==i;++u){const e=r[u],i=e.name;let l=c[i];if(void 0!==l)++l.referenceCount,o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,i));continue}const r=t&&t._propertyBindings[u].binding.parsedPath;l=new Nm(qm.create(n,i,r),e.ValueTypeName,e.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,i),o[u]=l}a[u].resultBuffer=l.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let o=i[t];if(void 0===o)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=o;else{const t=o.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,o=this._actionsByClip,a=o[i],s=a.knownActions,l=s[s.length-1],c=e._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),e._byClipCacheIndex=null;delete a.actionByRoot[(e._localRoot||this._root).uuid],0===s.length&&delete o[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const e=t[n];0===--e.referenceCount&&this._removeInactiveBinding(e)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let o=r[t];void 0===o&&(o={},r[t]=o),o[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,o=this._bindingsByRootAndName,a=o[r],s=t[t.length-1],l=e._cacheIndex;s._cacheIndex=l,t[l]=s,t.pop(),delete a[i],0===Object.keys(a).length&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new xp(new Float32Array(2),new Float32Array(2),1,Jm),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let o="string"===typeof e?Bp.findByName(r,e):e;const a=null!==o?o.uuid:e,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:wr),void 0!==s){const e=s.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new Ym(this,o,t,n);return this._bindAction(c,l),this._addInactiveAction(c,a,i),c}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"===typeof e?Bp.findByName(n,e):e,o=i?i.uuid:e,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),o=this._accuIndex^=1;for(let l=0;l!==n;++l){t[l]._update(r,e,i,o)}const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,o=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,o._cacheIndex=i,t[i]=o,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const i in n){const e=n[i].actionByRoot[t];void 0!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const i in r){const e=r[i];e.restoreOriginalState(),this._removeInactiveBinding(e)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class Zm{constructor(e){this.value=e}clone(){return new Zm(void 0===this.value.clone?this.value:this.value.clone())}}let $m=0;class eg extends Ci{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:$m++}),this.name="",this.usage=fi,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const e=Array.isArray(t[n])?t[n]:[t[n]];for(let t=0;t<e.length;t++)this.uniforms.push(e[t].clone())}return this}clone(){return(new this.constructor).copy(this)}}class tg extends Xu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class ng{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const rg=new qo;class ig{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;this.ray=new Wo(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new ia,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return rg.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(rg),this}intersectObject(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return ag(e,this,t,!(arguments.length>1&&void 0!==arguments[1])||arguments[1]),t.sort(og),t}intersectObjects(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let r=0,i=e.length;r<i;r++)ag(e[r],this,n,t);return n.sort(og),n}}function og(e,t){return e.distance-t.distance}function ag(e,t,n,r){let i=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(i=!1)}if(!0===i&&!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)ag(r[e],t,n,!0)}}class sg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Ri(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class lg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}class cg{constructor(e,t,n,r){cg.prototype.isMatrix2=!0,this.elements=[1,0,0,1],void 0!==e&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const i=this.elements;return i[0]=e,i[2]=t,i[1]=n,i[3]=r,this}}const ug=new zi;class hg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi(1/0,1/0),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi(-1/0,-1/0);this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=ug.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ug).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const dg=new vo,fg=new vo;class pg{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo;this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){dg.subVectors(e,this.start),fg.subVectors(this.end,this.start);const n=fg.dot(fg);let r=fg.dot(dg)/n;return t&&(r=Ri(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const mg=new vo;class gg extends xa{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new hs,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const e=o/s*Math.PI*2,t=a/s*Math.PI*2;r.push(Math.cos(e),Math.sin(e),1,Math.cos(t),Math.sin(t),1)}n.setAttribute("position",new rs(r,3));const i=new od({fog:!1,toneMapped:!1});this.cone=new vd(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),mg.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(mg),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const vg=new vo,yg=new qo,Ag=new qo;class xg extends vd{constructor(e){const t=bg(e),n=new hs,r=[],i=[],o=new La(0,0,1),a=new La(0,1,0);for(let s=0;s<t.length;s++){const e=t[s];e.parent&&e.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(o.r,o.g,o.b),i.push(a.r,a.g,a.b))}n.setAttribute("position",new rs(r,3)),n.setAttribute("color",new rs(i,3));super(n,new od({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Ag.copy(this.root.matrixWorld).invert();for(let i=0,o=0;i<t.length;i++){const e=t[i];e.parent&&e.parent.isBone&&(yg.multiplyMatrices(Ag,e.matrixWorld),vg.setFromMatrixPosition(yg),r.setXYZ(o,vg.x,vg.y,vg.z),yg.multiplyMatrices(Ag,e.parent.matrixWorld),vg.setFromMatrixPosition(yg),r.setXYZ(o+1,vg.x,vg.y,vg.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function bg(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,bg(e.children[n]));return t}class _g extends Is{constructor(e,t,n){super(new Xf(t,4,2),new Na({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const wg=new vo,Eg=new La,Sg=new La;class Cg extends xa{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Vf(t);r.rotateY(.5*Math.PI),this.material=new Na({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),o=new Float32Array(3*i.count);r.setAttribute("color",new Xa(o,3)),this.add(new Is(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Eg.copy(this.light.color),Sg.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Eg:Sg;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(wg.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Mg extends vd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:4473924,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:8947848;n=new La(n),r=new La(r);const i=t/2,o=e/t,a=e/2,s=[],l=[];for(let u=0,h=0,d=-a;u<=t;u++,d+=o){s.push(-a,0,d,a,0,d),s.push(d,0,-a,d,0,a);const e=u===i?n:r;e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3,e.toArray(l,h),h+=3}const c=new hs;c.setAttribute("position",new rs(s,3)),c.setAttribute("color",new rs(l,3));super(c,new od({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tg extends vd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:8,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:64,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:4473924,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:8947848;i=new La(i),o=new La(o);const a=[],s=[];if(t>1)for(let c=0;c<t;c++){const n=c/t*(2*Math.PI),r=Math.sin(n)*e,l=Math.cos(n)*e;a.push(0,0,0),a.push(r,0,l);const u=1&c?i:o;s.push(u.r,u.g,u.b),s.push(u.r,u.g,u.b)}for(let c=0;c<n;c++){const t=1&c?i:o,l=e-e/n*c;for(let e=0;e<r;e++){let n=e/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l;a.push(i,0,o),s.push(t.r,t.g,t.b),n=(e+1)/r*(2*Math.PI),i=Math.sin(n)*l,o=Math.cos(n)*l,a.push(i,0,o),s.push(t.r,t.g,t.b)}}const l=new hs;l.setAttribute("position",new rs(a,3)),l.setAttribute("color",new rs(s,3));super(l,new od({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const Ig=new vo,Bg=new vo,Pg=new vo;class Rg extends xa{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new hs;r.setAttribute("position",new rs([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new od({fog:!1,toneMapped:!1});this.lightPlane=new fd(r,i),this.add(this.lightPlane),r=new hs,r.setAttribute("position",new rs([0,0,0,0,0,1],3)),this.targetLine=new fd(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),Ig.setFromMatrixPosition(this.light.matrixWorld),Bg.setFromMatrixPosition(this.light.target.matrixWorld),Pg.subVectors(Bg,Ig),this.lightPlane.lookAt(Bg),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Bg),this.targetLine.scale.z=Pg.length()}}const Dg=new vo,Og=new Fs;class kg extends vd{constructor(e){const t=new hs,n=new od({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],o={};function a(e,t){s(e),s(t)}function s(e){r.push(0,0,0),i.push(0,0,0),void 0===o[e]&&(o[e]=[]),o[e].push(r.length/3-1)}a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4"),t.setAttribute("position",new rs(r,3)),t.setAttribute("color",new rs(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const l=new La(16755200),c=new La(16711680),u=new La(43775),h=new La(16777215),d=new La(3355443);this.setColors(l,c,u,h,d)}setColors(e,t,n,r,i){const o=this.geometry.getAttribute("color");o.setXYZ(0,e.r,e.g,e.b),o.setXYZ(1,e.r,e.g,e.b),o.setXYZ(2,e.r,e.g,e.b),o.setXYZ(3,e.r,e.g,e.b),o.setXYZ(4,e.r,e.g,e.b),o.setXYZ(5,e.r,e.g,e.b),o.setXYZ(6,e.r,e.g,e.b),o.setXYZ(7,e.r,e.g,e.b),o.setXYZ(8,e.r,e.g,e.b),o.setXYZ(9,e.r,e.g,e.b),o.setXYZ(10,e.r,e.g,e.b),o.setXYZ(11,e.r,e.g,e.b),o.setXYZ(12,e.r,e.g,e.b),o.setXYZ(13,e.r,e.g,e.b),o.setXYZ(14,e.r,e.g,e.b),o.setXYZ(15,e.r,e.g,e.b),o.setXYZ(16,e.r,e.g,e.b),o.setXYZ(17,e.r,e.g,e.b),o.setXYZ(18,e.r,e.g,e.b),o.setXYZ(19,e.r,e.g,e.b),o.setXYZ(20,e.r,e.g,e.b),o.setXYZ(21,e.r,e.g,e.b),o.setXYZ(22,e.r,e.g,e.b),o.setXYZ(23,e.r,e.g,e.b),o.setXYZ(24,t.r,t.g,t.b),o.setXYZ(25,t.r,t.g,t.b),o.setXYZ(26,t.r,t.g,t.b),o.setXYZ(27,t.r,t.g,t.b),o.setXYZ(28,t.r,t.g,t.b),o.setXYZ(29,t.r,t.g,t.b),o.setXYZ(30,t.r,t.g,t.b),o.setXYZ(31,t.r,t.g,t.b),o.setXYZ(32,n.r,n.g,n.b),o.setXYZ(33,n.r,n.g,n.b),o.setXYZ(34,n.r,n.g,n.b),o.setXYZ(35,n.r,n.g,n.b),o.setXYZ(36,n.r,n.g,n.b),o.setXYZ(37,n.r,n.g,n.b),o.setXYZ(38,r.r,r.g,r.b),o.setXYZ(39,r.r,r.g,r.b),o.setXYZ(40,i.r,i.g,i.b),o.setXYZ(41,i.r,i.g,i.b),o.setXYZ(42,i.r,i.g,i.b),o.setXYZ(43,i.r,i.g,i.b),o.setXYZ(44,i.r,i.g,i.b),o.setXYZ(45,i.r,i.g,i.b),o.setXYZ(46,i.r,i.g,i.b),o.setXYZ(47,i.r,i.g,i.b),o.setXYZ(48,i.r,i.g,i.b),o.setXYZ(49,i.r,i.g,i.b),o.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Og.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Lg("c",t,e,Og,0,0,-1),Lg("t",t,e,Og,0,0,1),Lg("n1",t,e,Og,-1,-1,-1),Lg("n2",t,e,Og,1,-1,-1),Lg("n3",t,e,Og,-1,1,-1),Lg("n4",t,e,Og,1,1,-1),Lg("f1",t,e,Og,-1,-1,1),Lg("f2",t,e,Og,1,-1,1),Lg("f3",t,e,Og,-1,1,1),Lg("f4",t,e,Og,1,1,1),Lg("u1",t,e,Og,.7,1.1,-1),Lg("u2",t,e,Og,-.7,1.1,-1),Lg("u3",t,e,Og,0,2,-1),Lg("cf1",t,e,Og,-1,0,1),Lg("cf2",t,e,Og,1,0,1),Lg("cf3",t,e,Og,0,-1,1),Lg("cf4",t,e,Og,0,1,1),Lg("cn1",t,e,Og,-1,0,-1),Lg("cn2",t,e,Og,1,0,-1),Lg("cn3",t,e,Og,0,-1,-1),Lg("cn4",t,e,Og,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Lg(e,t,n,r,i,o,a){Dg.set(i,o,a).unproject(r);const s=t[e];if(void 0!==s){const e=n.getAttribute("position");for(let t=0,n=s.length;t<n;t++)e.setXYZ(s[t],Dg.x,Dg.y,Dg.z)}}const Fg=new xo;class zg extends vd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new hs;i.setIndex(new Xa(n,1)),i.setAttribute("position",new Xa(r,3)),super(i,new od({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Fg.setFromObject(this.object),Fg.isEmpty())return;const t=Fg.min,n=Fg.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ug extends vd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16776960;const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new hs;r.setIndex(new Xa(n,1)),r.setAttribute("position",new rs([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new od({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Ng extends fd{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16776960,r=new hs;r.setAttribute("position",new rs([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),r.computeBoundingSphere(),super(r,new od({color:n,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const i=new hs;i.setAttribute("position",new rs([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new Is(i,new Na({color:n,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const jg=new vo;let Gg,Qg;class Hg extends xa{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo(0,0,1),t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo(0,0,0),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16776960,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.2*n,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:.2*i;super(),this.type="ArrowHelper",void 0===Gg&&(Gg=new hs,Gg.setAttribute("position",new rs([0,0,0,0,1,0],3)),Qg=new rf(0,.5,1,5,1),Qg.translate(0,-.5,0)),this.position.copy(t),this.line=new fd(Gg,new od({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Is(Qg,new Na({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{jg.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(jg,t)}}setLength(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2*e,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.2*t;this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class Vg extends vd{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new hs;n.setAttribute("position",new rs(t,3)),n.setAttribute("color",new rs([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new od({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new La,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Wg{constructor(){this.type="ShapePath",this.color=new La,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new $d,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,o){return this.currentPath.bezierCurveTo(e,t,n,r,i,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,o=0;o<n;i=o++){let n=t[i],a=t[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=t[o],s=-s,a=t[i],l=-l),e.y<n.y||e.y>a.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=l*(e.x-n.x)-s*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(a.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=a.x)return!0}}return r}const n=Uf.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,o,a;const s=[];if(1===r.length)return o=r[0],a=new ff,a.curves=o.curves,s.push(a),s;let l=!n(r[0].getPoints());l=e?!l:l;const c=[],u=[];let h,d,f=[],p=0;u[p]=void 0,f[p]=[];for(let m=0,g=r.length;m<g;m++)o=r[m],h=o.getPoints(),i=n(h),i=e?!i:i,i?(!l&&u[p]&&p++,u[p]={s:new ff,p:h},u[p].s.curves=o.curves,l&&p++,f[p]=[]):f[p].push({h:o,p:h[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new ff;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let t=0,r=u.length;t<r;t++)c[t]=[];for(let r=0,i=u.length;r<i;r++){const i=f[r];for(let o=0;o<i.length;o++){const a=i[o];let s=!0;for(let i=0;i<u.length;i++)t(a.p,u[i].p)&&(r!==i&&n++,s?(s=!1,c[i].push(a)):e=!0);s&&c[r].push(a)}}n>0&&!1===e&&(f=c)}for(let m=0,g=u.length;m<g;m++){a=u[m].s,s.push(a),d=f[m];for(let e=0,t=d.length;e<t;e++)a.holes.push(d[e].h)}return s}}class qg extends Ci{constructor(e,t){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class Xg extends uo{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ze}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ze);var Yg=n(7205);function Jg(e){let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(i!==t){const e=t;t=r?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,subscribe:(e,r,o)=>r||o?function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.is;console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let a=r(t);function s(){const n=r(t);if(!o(a,n)){const t=a;e(a=n,t)}}return n.add(s),()=>n.delete(s)}(e,r,o):(n.add(e),()=>n.delete(e)),destroy:()=>n.clear()};return t=e(r,i,o),o}const Kg="undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent)?l.useEffect:l.useLayoutEffect;function Zg(e){const t="function"===typeof e?Jg(e):e,n=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.getState,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.is;const[,r]=(0,l.useReducer)((e=>e+1),0),i=t.getState(),o=(0,l.useRef)(i),a=(0,l.useRef)(e),s=(0,l.useRef)(n),c=(0,l.useRef)(!1),u=(0,l.useRef)();let h;void 0===u.current&&(u.current=e(i));let d=!1;(o.current!==i||a.current!==e||s.current!==n||c.current)&&(h=e(i),d=!n(u.current,h)),Kg((()=>{d&&(u.current=h),o.current=i,a.current=e,s.current=n,c.current=!1}));const f=(0,l.useRef)(i);Kg((()=>{const e=()=>{try{const e=t.getState(),n=a.current(e);s.current(u.current,n)||(o.current=e,u.current=n,r())}catch(Wy){c.current=!0,r()}},n=t.subscribe(e);return t.getState()!==f.current&&e(),n}),[]);const p=d?h:u.current;return(0,l.useDebugValue)(p),p};return Object.assign(n,t),n[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const e=[n,t];return{next(){const t=e.length<=0;return{value:e.shift(),done:t}}}},n}const $g=[];function ev(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(e,t)=>e===t;if(e===t)return!0;if(!e||!t)return!1;const r=e.length;if(t.length!==r)return!1;for(let i=0;i<r;i++)if(!n(e[i],t[i]))return!1;return!0}function tv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};null===t&&(t=[e]);for(const a of $g)if(ev(t,a.keys,a.equal)){if(n)return;if(Object.prototype.hasOwnProperty.call(a,"error"))throw a.error;if(Object.prototype.hasOwnProperty.call(a,"response"))return r.lifespan&&r.lifespan>0&&(a.timeout&&clearTimeout(a.timeout),a.timeout=setTimeout(a.remove,r.lifespan)),a.response;if(!n)throw a.promise}const i={keys:t,equal:r.equal,remove:()=>{const e=$g.indexOf(i);-1!==e&&$g.splice(e,1)},promise:(o=e,"object"===typeof o&&"function"===typeof o.then?e:e(...t)).then((e=>{i.response=e,r.lifespan&&r.lifespan>0&&(i.timeout=setTimeout(i.remove,r.lifespan))})).catch((e=>i.error=e))};var o;if($g.push(i),!n)throw i.promise}const nv=(e,t,n)=>tv(e,t,!1,n),rv=(e,t,n)=>{tv(e,t,!0,n)},iv=e=>{if(void 0===e||0===e.length)$g.splice(0,$g.length);else{const t=$g.find((t=>ev(e,t.keys,t.equal)));t&&t.remove()}};var ov=n(579),av=n(2016),sv=n.n(av),lv=n(8784),cv=Object.freeze({__proto__:null});const uv={},hv=e=>{Object.assign(uv,e)};var dv,fv;const pv=e=>"colorSpace"in e||"outputColorSpace"in e,mv=()=>{var e;return null!=(e=uv.ColorManagement)?e:null},gv=e=>e&&e.isOrthographicCamera,vv="undefined"!==typeof window&&(null!=(dv=window.document)&&dv.createElement||"ReactNative"===(null==(fv=window.navigator)?void 0:fv.product))?l.useLayoutEffect:l.useEffect;function yv(e){const t=l.useRef(e);return vv((()=>{t.current=e}),[e]),t}function Av(e){let{set:t}=e;return vv((()=>(t(new Promise((()=>null))),()=>t(!1))),[t]),null}class xv extends l.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}xv.getDerivedStateFromError=()=>({error:!0});const bv="__default",_v=new Map,wv=e=>e&&!!e.memoized&&!!e.changes;function Ev(e){var t;const n="undefined"!==typeof window?null!=(t=window.devicePixelRatio)?t:2:1;return Array.isArray(e)?Math.min(Math.max(e[0],n),e[1]):e}const Sv=e=>{var t;return null==(t=e.__r3f)?void 0:t.root.getState()};function Cv(e){let t=e.__r3f.root;for(;t.getState().previousRoot;)t=t.getState().previousRoot;return t}const Mv={obj:e=>e===Object(e)&&!Mv.arr(e)&&"function"!==typeof e,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,boo:e=>"boolean"===typeof e,und:e=>void 0===e,arr:e=>Array.isArray(e),equ(e,t){let{arrays:n="shallow",objects:r="reference",strict:i=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(typeof e!==typeof t||!!e!==!!t)return!1;if(Mv.str(e)||Mv.num(e)||Mv.boo(e))return e===t;const o=Mv.obj(e);if(o&&"reference"===r)return e===t;const a=Mv.arr(e);if(a&&"reference"===n)return e===t;if((a||o)&&e===t)return!0;let s;for(s in e)if(!(s in t))return!1;if(o&&"shallow"===n&&"shallow"===r){for(s in i?t:e)if(!Mv.equ(e[s],t[s],{strict:i,objects:"reference"}))return!1}else for(s in i?t:e)if(e[s]!==t[s])return!1;if(Mv.und(s)){if(a&&0===e.length&&0===t.length)return!0;if(o&&0===Object.keys(e).length&&0===Object.keys(t).length)return!0;if(e!==t)return!1}return!0}};function Tv(e){const t={nodes:{},materials:{}};return e&&e.traverse((e=>{e.name&&(t.nodes[e.name]=e),e.material&&!t.materials[e.material.name]&&(t.materials[e.material.name]=e.material)})),t}function Iv(e){e.dispose&&"Scene"!==e.type&&e.dispose();for(const t in e)null==t.dispose||t.dispose(),delete e[t]}function Bv(e,t){return e.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...t},e}function Pv(e,t){let n=e;if(t.includes("-")){const r=t.split("-"),i=r.pop();return n=r.reduce(((e,t)=>e[t]),e),{target:n,key:i}}return{target:n,key:t}}const Rv=/-\d+$/;function Dv(e,t,n){if(Mv.str(n)){if(Rv.test(n)){const t=n.replace(Rv,""),{target:r,key:i}=Pv(e,t);Array.isArray(r[i])||(r[i]=[])}const{target:r,key:i}=Pv(e,n);t.__r3f.previousAttach=r[i],r[i]=t}else t.__r3f.previousAttach=n(e,t)}function Ov(e,t,n){var r,i;if(Mv.str(n)){const{target:r,key:i}=Pv(e,n),o=t.__r3f.previousAttach;void 0===o?delete r[i]:r[i]=o}else null==(r=t.__r3f)||null==r.previousAttach||r.previousAttach(e,t);null==(i=t.__r3f)||delete i.previousAttach}function kv(e,t){let{children:n,key:r,ref:i,...o}=t,{children:a,key:s,ref:l,...c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const h=e.__r3f,d=Object.entries(o),f=[];if(u){const e=Object.keys(c);for(let t=0;t<e.length;t++)o.hasOwnProperty(e[t])||d.unshift([e[t],bv+"remove"])}d.forEach((t=>{let[n,r]=t;var i;if(null!=(i=e.__r3f)&&i.primitive&&"object"===n)return;if(Mv.equ(r,c[n]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(n))return f.push([n,r,!0,[]]);let a=[];n.includes("-")&&(a=n.split("-")),f.push([n,r,!1,a]);for(const e in o){const t=o[e];e.startsWith(`${n}-`)&&f.push([e,t,!1,e.split("-")])}}));const p={...o};return null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.args&&(p.args=h.memoizedProps.args),null!=h&&h.memoizedProps&&null!=h&&h.memoizedProps.attach&&(p.attach=h.memoizedProps.attach),{memoized:p,changes:f}}const Lv="undefined"!==typeof process&&!1;function Fv(e,t){var n;const r=e.__r3f,i=null==r?void 0:r.root,o=null==i||null==i.getState?void 0:i.getState(),{memoized:a,changes:s}=wv(t)?t:kv(e,t),l=null==r?void 0:r.eventCount;e.__r3f&&(e.__r3f.memoizedProps=a);for(let c=0;c<s.length;c++){let[t,n,i,a]=s[c];if(pv(e)){const e=3001,r="srgb",i="srgb-linear";"encoding"===t?(t="colorSpace",n=n===e?r:i):"outputEncoding"===t&&(t="outputColorSpace",n=n===e?r:i)}let l=e,u=l[t];if(a.length&&(u=a.reduce(((e,t)=>e[t]),e),!u||!u.set)){const[n,...r]=a.reverse();l=r.reverse().reduce(((e,t)=>e[t]),e),t=n}if(n===bv+"remove")if(l.constructor){let e=_v.get(l.constructor);e||(e=new l.constructor,_v.set(l.constructor,e)),n=e[t]}else n=0;if(i&&r)n?r.handlers[t]=n:delete r.handlers[t],r.eventCount=Object.keys(r.handlers).length;else if(u&&u.set&&(u.copy||u instanceof ia)){if(Array.isArray(n))u.fromArray?u.fromArray(n):u.set(...n);else if(u.copy&&n&&n.constructor&&(Lv?u.constructor.name===n.constructor.name:u.constructor===n.constructor))u.copy(n);else if(void 0!==n){const e=u instanceof La;!e&&u.setScalar?u.setScalar(n):u instanceof ia&&n instanceof ia?u.mask=n.mask:u.set(n),!mv()&&o&&!o.linear&&e&&u.convertSRGBToLinear()}}else if(l[t]=n,l[t]instanceof so&&l[t].format===Sn&&l[t].type===hn&&o){const e=l[t];pv(e)&&pv(o.gl)?e.colorSpace=o.gl.outputColorSpace:e.encoding=o.gl.outputEncoding}zv(e)}if(r&&r.parent&&e.raycast&&l!==r.eventCount){const t=Cv(e).getState().internal,n=t.interaction.indexOf(e);n>-1&&t.interaction.splice(n,1),r.eventCount&&t.interaction.push(e)}return!(1===s.length&&"onUpdate"===s[0][0])&&s.length&&null!=(n=e.__r3f)&&n.parent&&Uv(e),e}function zv(e){var t,n;const r=null==(t=e.__r3f)||null==(n=t.root)||null==n.getState?void 0:n.getState();r&&0===r.internal.frames&&r.invalidate()}function Uv(e){null==e.onUpdate||e.onUpdate(e)}function Nv(e,t){e.manual||(gv(e)?(e.left=t.width/-2,e.right=t.width/2,e.top=t.height/2,e.bottom=t.height/-2):e.aspect=t.width/t.height,e.updateProjectionMatrix(),e.updateMatrixWorld())}function jv(e){return(e.eventObject||e.object).uuid+"/"+e.index+e.instanceId}function Gv(e,t,n,r){const i=n.get(t);i&&(n.delete(t),0===n.size&&(e.delete(r),i.target.releasePointerCapture(r)))}function Qv(e){function t(e){return e.filter((e=>["Move","Over","Enter","Out","Leave"].some((t=>{var n;return null==(n=e.__r3f)?void 0:n.handlers["onPointer"+t]}))))}function n(t){const{internal:n}=e.getState();for(const e of n.hovered.values())if(!t.length||!t.find((t=>t.object===e.object&&t.index===e.index&&t.instanceId===e.instanceId))){const r=e.eventObject.__r3f,i=null==r?void 0:r.handlers;if(n.hovered.delete(jv(e)),null!=r&&r.eventCount){const n={...e,intersections:t};null==i.onPointerOut||i.onPointerOut(n),null==i.onPointerLeave||i.onPointerLeave(n)}}}function r(e,t){for(let n=0;n<t.length;n++){const r=t[n].__r3f;null==r||null==r.handlers.onPointerMissed||r.handlers.onPointerMissed(e)}}return{handlePointer:function(i){switch(i){case"onPointerLeave":case"onPointerCancel":return()=>n([]);case"onLostPointerCapture":return t=>{const{internal:r}=e.getState();"pointerId"in t&&r.capturedMap.has(t.pointerId)&&requestAnimationFrame((()=>{r.capturedMap.has(t.pointerId)&&(r.capturedMap.delete(t.pointerId),n([]))}))}}return function(o){const{onPointerMissed:a,internal:s}=e.getState();s.lastEvent.current=o;const l="onPointerMove"===i,c="onClick"===i||"onContextMenu"===i||"onDoubleClick"===i,u=function(t,n){const r=e.getState(),i=new Set,o=[],a=n?n(r.internal.interaction):r.internal.interaction;for(let e=0;e<a.length;e++){const t=Sv(a[e]);t&&(t.raycaster.camera=void 0)}r.previousRoot||null==r.events.compute||r.events.compute(t,r);let s=a.flatMap((function(e){const n=Sv(e);return n&&n.events.enabled&&null!==n.raycaster.camera?(void 0===n.raycaster.camera&&(null==n.events.compute||n.events.compute(t,n,null==(r=n.previousRoot)?void 0:r.getState()),void 0===n.raycaster.camera&&(n.raycaster.camera=null)),n.raycaster.camera?n.raycaster.intersectObject(e,!0):[]):[];var r})).sort(((e,t)=>{const n=Sv(e.object),r=Sv(t.object);return n&&r&&r.events.priority-n.events.priority||e.distance-t.distance})).filter((e=>{const t=jv(e);return!i.has(t)&&(i.add(t),!0)}));r.events.filter&&(s=r.events.filter(s,r));for(const e of s){let t=e.object;for(;t;){var l;null!=(l=t.__r3f)&&l.eventCount&&o.push({...e,eventObject:t}),t=t.parent}}if("pointerId"in t&&r.internal.capturedMap.has(t.pointerId))for(let e of r.internal.capturedMap.get(t.pointerId).values())i.has(jv(e.intersection))||o.push(e.intersection);return o}(o,l?t:void 0),h=c?function(t){const{internal:n}=e.getState(),r=t.offsetX-n.initialClick[0],i=t.offsetY-n.initialClick[1];return Math.round(Math.sqrt(r*r+i*i))}(o):0;"onPointerDown"===i&&(s.initialClick=[o.offsetX,o.offsetY],s.initialHits=u.map((e=>e.eventObject))),c&&!u.length&&h<=2&&(r(o,s.interaction),a&&a(o)),l&&n(u),function(t,r,i,o){const a=e.getState();if(t.length){const e={stopped:!1};for(const s of t){const l=Sv(s.object)||a,{raycaster:c,pointer:u,camera:h,internal:d}=l,f=new vo(u.x,u.y,0).unproject(h),p=e=>{var t,n;return null!=(t=null==(n=d.capturedMap.get(e))?void 0:n.has(s.eventObject))&&t},m=e=>{const t={intersection:s,target:r.target};d.capturedMap.has(e)?d.capturedMap.get(e).set(s.eventObject,t):d.capturedMap.set(e,new Map([[s.eventObject,t]])),r.target.setPointerCapture(e)},g=e=>{const t=d.capturedMap.get(e);t&&Gv(d.capturedMap,s.eventObject,t,e)};let v={};for(let e in r){let t=r[e];"function"!==typeof t&&(v[e]=t)}let y={...s,...v,pointer:u,intersections:t,stopped:e.stopped,delta:i,unprojectedPoint:f,ray:c.ray,camera:h,stopPropagation(){const i="pointerId"in r&&d.capturedMap.get(r.pointerId);(!i||i.has(s.eventObject))&&(y.stopped=e.stopped=!0,d.hovered.size&&Array.from(d.hovered.values()).find((e=>e.eventObject===s.eventObject)))&&n([...t.slice(0,t.indexOf(s)),s])},target:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},currentTarget:{hasPointerCapture:p,setPointerCapture:m,releasePointerCapture:g},nativeEvent:r};if(o(y),!0===e.stopped)break}}}(u,o,h,(function(e){const t=e.eventObject,n=t.__r3f,a=null==n?void 0:n.handlers;if(null!=n&&n.eventCount)if(l){if(a.onPointerOver||a.onPointerEnter||a.onPointerOut||a.onPointerLeave){const t=jv(e),n=s.hovered.get(t);n?n.stopped&&e.stopPropagation():(s.hovered.set(t,e),null==a.onPointerOver||a.onPointerOver(e),null==a.onPointerEnter||a.onPointerEnter(e))}null==a.onPointerMove||a.onPointerMove(e)}else{const n=a[i];n?c&&!s.initialHits.includes(t)||(r(o,s.interaction.filter((e=>!s.initialHits.includes(e)))),n(e)):c&&s.initialHits.includes(t)&&r(o,s.interaction.filter((e=>!s.initialHits.includes(e))))}}))}}}}const Hv=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],Vv=e=>!(null==e||!e.render),Wv=l.createContext(null),qv=(e,t)=>{const n=Zg(((n,r)=>{const i=new vo,o=new vo,a=new vo;function s(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r().camera,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r().size;const{width:s,height:l,top:c,left:u}=n,h=s/l;t instanceof vo?a.copy(t):a.set(...t);const d=e.getWorldPosition(i).distanceTo(a);if(gv(e))return{width:s/e.zoom,height:l/e.zoom,top:c,left:u,factor:1,distance:d,aspect:h};{const t=e.fov*Math.PI/180,n=2*Math.tan(t/2)*d,r=n*(s/l);return{width:r,height:n,top:c,left:u,factor:s/r,distance:d,aspect:h}}}let c;const u=e=>n((t=>({performance:{...t.performance,current:e}}))),h=new zi,d={set:n,get:r,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return e(r(),t)},advance:(e,n)=>t(e,n,r()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Cm,pointer:h,mouse:h,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const e=r();c&&clearTimeout(c),e.performance.current!==e.performance.min&&u(e.performance.min),c=setTimeout((()=>u(r().performance.max)),e.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:s},setEvents:e=>n((t=>({...t,events:{...t.events,...e}}))),setSize:(e,t,i,a,l)=>{const c=r().camera,u={width:e,height:t,top:a||0,left:l||0,updateStyle:i};n((e=>({size:u,viewport:{...e.viewport,...s(c,o,u)}})))},setDpr:e=>n((t=>{const n=Ev(e);return{viewport:{...t.viewport,dpr:n,initialDpr:t.viewport.initialDpr||n}}})),setFrameloop:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"always";const t=r().clock;t.stop(),t.elapsedTime=0,"never"!==e&&(t.start(),t.elapsedTime=0),n((()=>({frameloop:e})))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:l.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(e,t,n)=>{const i=r().internal;return i.priority=i.priority+(t>0?1:0),i.subscribers.push({ref:e,priority:t,store:n}),i.subscribers=i.subscribers.sort(((e,t)=>e.priority-t.priority)),()=>{const n=r().internal;null!=n&&n.subscribers&&(n.priority=n.priority-(t>0?1:0),n.subscribers=n.subscribers.filter((t=>t.ref!==e)))}}}};return d})),r=n.getState();let i=r.size,o=r.viewport.dpr,a=r.camera;return n.subscribe((()=>{const{camera:e,size:t,viewport:r,gl:s,set:l}=n.getState();if(t.width!==i.width||t.height!==i.height||r.dpr!==o){var c;i=t,o=r.dpr,Nv(e,t),s.setPixelRatio(r.dpr);const n=null!=(c=t.updateStyle)?c:"undefined"!==typeof HTMLCanvasElement&&s.domElement instanceof HTMLCanvasElement;s.setSize(t.width,t.height,n)}e!==a&&(a=e,l((t=>({viewport:{...t.viewport,...t.viewport.getCurrentViewport(e)}}))))})),n.subscribe((t=>e(t))),n};function Xv(e,t){const n={callback:e};return t.add(n),()=>{t.delete(n)}}let Yv,Jv=new Set,Kv=new Set,Zv=new Set;const $v=e=>Xv(e,Jv),ey=e=>Xv(e,Kv),ty=e=>Xv(e,Zv);function ny(e,t){if(e.size)for(const{callback:n}of e.values())n(t)}function ry(e,t){switch(e){case"before":return ny(Jv,t);case"after":return ny(Kv,t);case"tail":return ny(Zv,t)}}let iy,oy;function ay(e,t,n){let r=t.clock.getDelta();for("never"===t.frameloop&&"number"===typeof e&&(r=e-t.clock.elapsedTime,t.clock.oldTime=t.clock.elapsedTime,t.clock.elapsedTime=e),iy=t.internal.subscribers,Yv=0;Yv<iy.length;Yv++)oy=iy[Yv],oy.ref.current(oy.store.getState(),r,n);return!t.internal.priority&&t.gl.render&&t.gl.render(t.scene,t.camera),t.internal.frames=Math.max(0,t.internal.frames-1),"always"===t.frameloop?1:t.internal.frames}function sy(e){const t=l.useRef(null);return vv((()=>{t.current=e.current.__r3f}),[e]),t}function ly(){const e=l.useContext(Wv);if(!e)throw new Error("R3F: Hooks can only be used within the Canvas component!");return e}function cy(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e=>e,t=arguments.length>1?arguments[1]:void 0;return ly()(e,t)}function uy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=ly(),r=n.getState().internal.subscribe,i=yv(e);return vv((()=>r(i,t,n)),[t,r,n]),null}function hy(e){return l.useMemo((()=>Tv(e)),[e])}const dy=new WeakMap;function fy(e,t){return function(n){let r=dy.get(n);r||(r=new n,dy.set(n,r)),e&&e(r);for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return Promise.all(o.map((e=>new Promise(((n,i)=>r.load(e,(e=>{e.scene&&Object.assign(e,Tv(e.scene)),n(e)}),t,(t=>i(new Error(`Could not load ${e}: ${null==t?void 0:t.message}`)))))))))}}function py(e,t,n,r){const i=Array.isArray(t)?t:[t],o=nv(fy(n,r),[e,...i],{equal:Mv.equ});return Array.isArray(t)?o:o[0]}py.preload=function(e,t,n){const r=Array.isArray(t)?t:[t];return rv(fy(n),[e,...r])},py.clear=function(e,t){const n=Array.isArray(t)?t:[t];return iv([e,...n])};const my=new Map,{invalidate:gy,advance:vy}=function(e){let t,n,r,i=!1,o=!1;function a(s){n=requestAnimationFrame(a),i=!0,t=0,ry("before",s),o=!0;for(const n of e.values()){var l;r=n.store.getState(),!r.internal.active||!("always"===r.frameloop||r.internal.frames>0)||null!=(l=r.gl.xr)&&l.isPresenting||(t+=ay(s,r))}if(o=!1,ry("after",s),0===t)return ry("tail",s),i=!1,cancelAnimationFrame(n)}return{loop:a,invalidate:function t(n){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;var s;if(!n)return e.forEach((e=>t(e.store.getState(),r)));null!=(s=n.gl.xr)&&s.isPresenting||!n.internal.active||"never"===n.frameloop||(n.internal.frames=r>1?Math.min(60,n.internal.frames+r):o?2:1,i||(i=!0,requestAnimationFrame(a)))},advance:function(t){let n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0;if(n&&ry("before",t),r)ay(t,r,i);else for(const o of e.values())ay(t,o.store.getState());n&&ry("after",t)}}}(my),{reconciler:yy,applyProps:Ay}=function(e,t){function n(e,t,n){let r,{args:i=[],attach:o,...a}=t,s=`${e[0].toUpperCase()}${e.slice(1)}`;if("primitive"===e){if(void 0===a.object)throw new Error("R3F: Primitives without 'object' are invalid!");r=Bv(a.object,{type:e,root:n,attach:o,primitive:!0})}else{const t=uv[s];if(!t)throw new Error(`R3F: ${s} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(i))throw new Error("R3F: The args prop must be an array!");r=Bv(new t(...i),{type:e,root:n,attach:o,memoizedProps:{args:i}})}return void 0===r.__r3f.attach&&(r instanceof hs?r.__r3f.attach="geometry":r instanceof Ua&&(r.__r3f.attach="material")),"inject"!==s&&Fv(r,a),r}function r(e,t){let n=!1;var r,i;t&&(null!=(r=t.__r3f)&&r.attach?Dv(e,t,t.__r3f.attach):t.isObject3D&&e.isObject3D&&(e.add(t),n=!0),n||null==(i=e.__r3f)||i.objects.push(t),t.__r3f||Bv(t,{}),t.__r3f.parent=e,Uv(t),zv(t))}function i(e,t,n){let r=!1;if(t){var i,o;if(null!=(i=t.__r3f)&&i.attach)Dv(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){t.parent=e,t.dispatchEvent({type:"added"}),e.dispatchEvent({type:"childadded",child:t});const i=e.children.filter((e=>e!==t)),o=i.indexOf(n);e.children=[...i.slice(0,o),t,...i.slice(o)],r=!0}r||null==(o=e.__r3f)||o.objects.push(t),t.__r3f||Bv(t,{}),t.__r3f.parent=e,Uv(t),zv(t)}}function o(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e&&[...e].forEach((e=>a(t,e,n)))}function a(e,t,n){if(t){var r,i,a;if(t.__r3f&&(t.__r3f.parent=null),null!=(r=e.__r3f)&&r.objects&&(e.__r3f.objects=e.__r3f.objects.filter((e=>e!==t))),null!=(i=t.__r3f)&&i.attach)Ov(e,t,t.__r3f.attach);else if(t.isObject3D&&e.isObject3D){var s;e.remove(t),null!=(s=t.__r3f)&&s.root&&function(e,t){const{internal:n}=e.getState();n.interaction=n.interaction.filter((e=>e!==t)),n.initialHits=n.initialHits.filter((e=>e!==t)),n.hovered.forEach(((e,r)=>{e.eventObject!==t&&e.object!==t||n.hovered.delete(r)})),n.capturedMap.forEach(((e,r)=>{Gv(n.capturedMap,t,e,r)}))}(Cv(t),t)}const c=null==(a=t.__r3f)?void 0:a.primitive,u=!c&&(void 0===n?null!==t.dispose:n);var l;if(!c)o(null==(l=t.__r3f)?void 0:l.objects,t,u),o(t.children,t,u);if(delete t.__r3f,u&&t.dispose&&"Scene"!==t.type){const e=()=>{try{t.dispose()}catch(NQ){}};"undefined"===typeof IS_REACT_ACT_ENVIRONMENT?(0,lv.unstable_scheduleCallback)(lv.unstable_IdlePriority,e):e()}zv(e)}}const s=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters."),l=sv()({createInstance:n,removeChild:a,appendChild:r,appendInitialChild:r,insertBefore:i,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(e,t)=>{if(!t)return;const n=e.getState().scene;n.__r3f&&(n.__r3f.root=e,r(n,t))},removeChildFromContainer:(e,t)=>{t&&a(e.getState().scene,t)},insertInContainerBefore:(e,t,n)=>{if(!t||!n)return;const r=e.getState().scene;r.__r3f&&i(r,t,n)},getRootHostContext:()=>null,getChildHostContext:e=>e,finalizeInitialChildren(e){var t;const n=null!=(t=null==e?void 0:e.__r3f)?t:{};return Boolean(n.handlers)},prepareUpdate(e,t,n,r){var i;if((null!=(i=null==e?void 0:e.__r3f)?i:{}).primitive&&r.object&&r.object!==e)return[!0];{const{args:t=[],children:i,...o}=r,{args:a=[],children:s,...l}=n;if(!Array.isArray(t))throw new Error("R3F: the args prop must be an array!");if(t.some(((e,t)=>e!==a[t])))return[!0];const c=kv(e,o,l,!0);return c.changes.length?[!1,c]:null}},commitUpdate(e,t,i,o,s,l){let[c,u]=t;c?function(e,t,i,o){var s;const l=null==(s=e.__r3f)?void 0:s.parent;if(!l)return;const c=n(t,i,e.__r3f.root);if(e.children){for(const t of e.children)t.__r3f&&r(c,t);e.children=e.children.filter((e=>!e.__r3f))}e.__r3f.objects.forEach((e=>r(c,e))),e.__r3f.objects=[],e.__r3f.autoRemovedBeforeAppend||a(l,e),c.parent&&(c.__r3f.autoRemovedBeforeAppend=!0),r(l,c),c.raycast&&c.__r3f.eventCount&&Cv(c).getState().internal.interaction.push(c);[o,o.alternate].forEach((e=>{null!==e&&(e.stateNode=c,e.ref&&("function"===typeof e.ref?e.ref(c):e.ref.current=c))}))}(e,i,s,l):Fv(e,u)},commitMount(e,t,n,r){var i;const o=null!=(i=e.__r3f)?i:{};e.raycast&&o.handlers&&o.eventCount&&Cv(e).getState().internal.interaction.push(e)},getPublicInstance:e=>e,prepareForCommit:()=>null,preparePortalMount:e=>Bv(e.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(e){var t;const{attach:n,parent:r}=null!=(t=e.__r3f)?t:{};n&&r&&Ov(r,e,n),e.isObject3D&&(e.visible=!1),zv(e)},unhideInstance(e,t){var n;const{attach:r,parent:i}=null!=(n=e.__r3f)?n:{};r&&i&&Dv(i,e,r),(e.isObject3D&&null==t.visible||t.visible)&&(e.visible=!0),zv(e)},createTextInstance:s,hideTextInstance:s,unhideTextInstance:s,getCurrentEventPriority:()=>t?t():Yg.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:"undefined"!==typeof performance&&Mv.fun(performance.now)?performance.now:Mv.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Mv.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Mv.fun(clearTimeout)?clearTimeout:void 0});return{reconciler:l,applyProps:Fv}}(0,(function(){var e;const t="undefined"!==typeof self&&self||"undefined"!==typeof window&&window;if(!t)return Yg.DefaultEventPriority;switch(null==(e=t.event)?void 0:e.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Yg.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Yg.ContinuousEventPriority;default:return Yg.DefaultEventPriority}})),xy={objects:"shallow",strict:!1},by=(e,t)=>{const n="function"===typeof e?e(t):e;return Vv(n)?n:new Hu({powerPreference:"high-performance",canvas:t,antialias:!0,alpha:!0,...e})};function _y(e){const t=my.get(e),n=null==t?void 0:t.fiber,r=null==t?void 0:t.store;t&&console.warn("R3F.createRoot should only be called once!");const i="function"===typeof reportError?reportError:console.error,o=r||qv(gy,vy),a=n||yy.createContainer(o,Yg.ConcurrentRoot,null,!1,null,"",i,null);let s;t||my.set(e,{fiber:a,store:o});let l,c=!1;return{configure(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{gl:n,size:r,scene:i,events:a,onCreated:u,shadows:h=!1,linear:d=!1,flat:f=!1,legacy:p=!1,orthographic:m=!1,frameloop:g="always",dpr:v=[1,2],performance:y,raycaster:A,camera:x,onPointerMissed:b}=t,_=o.getState(),w=_.gl;_.gl||_.set({gl:w=by(n,e)});let E=_.raycaster;E||_.set({raycaster:E=new ig});const{params:S,...C}=A||{};if(Mv.equ(C,E,xy)||Ay(E,{...C}),Mv.equ(S,E.params,xy)||Ay(E,{params:{...E.params,...S}}),!_.camera||_.camera===l&&!Mv.equ(l,x,xy)){l=x;const e=x instanceof Fs,t=e?x:m?new pl(0,0,0,0,.1,1e3):new js(75,0,.1,1e3);e||(t.position.z=5,x&&(Ay(t,x),("aspect"in x||"left"in x||"right"in x||"bottom"in x||"top"in x)&&(t.manual=!0,t.updateProjectionMatrix())),_.camera||null!=x&&x.rotation||t.lookAt(0,0,0)),_.set({camera:t}),E.camera=t}if(!_.scene){let e;i instanceof qu?e=i:(e=new qu,i&&Ay(e,i)),_.set({scene:Bv(e)})}if(!_.xr){var M;const e=(e,t)=>{const n=o.getState();"never"!==n.frameloop&&vy(e,!0,n,t)},t=()=>{const t=o.getState();t.gl.xr.enabled=t.gl.xr.isPresenting,t.gl.xr.setAnimationLoop(t.gl.xr.isPresenting?e:null),t.gl.xr.isPresenting||gy(t)},n={connect(){const e=o.getState().gl;e.xr.addEventListener("sessionstart",t),e.xr.addEventListener("sessionend",t)},disconnect(){const e=o.getState().gl;e.xr.removeEventListener("sessionstart",t),e.xr.removeEventListener("sessionend",t)}};"function"===typeof(null==(M=w.xr)?void 0:M.addEventListener)&&n.connect(),_.set({xr:n})}if(w.shadowMap){const e=w.shadowMap.enabled,t=w.shadowMap.type;if(w.shadowMap.enabled=!!h,Mv.boo(h))w.shadowMap.type=qe;else if(Mv.str(h)){var T;const e={basic:Ve,percentage:We,soft:qe,variance:Xe};w.shadowMap.type=null!=(T=e[h])?T:qe}else Mv.obj(h)&&Object.assign(w.shadowMap,h);e===w.shadowMap.enabled&&t===w.shadowMap.type||(w.shadowMap.needsUpdate=!0)}const I=mv();if(I&&("enabled"in I?I.enabled=!p:"legacyMode"in I&&(I.legacyMode=p)),!c){Ay(w,{outputEncoding:d?3e3:3001,toneMapping:f?kt:Ut})}_.legacy!==p&&_.set((()=>({legacy:p}))),_.linear!==d&&_.set((()=>({linear:d}))),_.flat!==f&&_.set((()=>({flat:f}))),!n||Mv.fun(n)||Vv(n)||Mv.equ(n,w,xy)||Ay(w,n),a&&!_.events.handlers&&_.set({events:a(o)});const B=function(e,t){const n="undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement;if(t){const{width:e,height:r,top:i,left:o,updateStyle:a=n}=t;return{width:e,height:r,top:i,left:o,updateStyle:a}}if("undefined"!==typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement&&e.parentElement){const{width:t,height:r,top:i,left:o}=e.parentElement.getBoundingClientRect();return{width:t,height:r,top:i,left:o,updateStyle:n}}return"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?{width:e.width,height:e.height,top:0,left:0,updateStyle:n}:{width:0,height:0,top:0,left:0}}(e,r);return Mv.equ(B,_.size,xy)||_.setSize(B.width,B.height,B.updateStyle,B.top,B.left),v&&_.viewport.dpr!==Ev(v)&&_.setDpr(v),_.frameloop!==g&&_.setFrameloop(g),_.onPointerMissed||_.set({onPointerMissed:b}),y&&!Mv.equ(y,_.performance,xy)&&_.set((e=>({performance:{...e.performance,...y}}))),s=u,c=!0,this},render(t){return c||this.configure(),yy.updateContainer((0,ov.jsx)(Ey,{store:o,children:t,onCreated:s,rootElement:e}),a,null,(()=>{})),o},unmount(){Sy(e)}}}function wy(e,t,n){console.warn("R3F.render is no longer supported in React 18. Use createRoot instead!");const r=_y(t);return r.configure(n),r.render(e)}function Ey(e){let{store:t,children:n,onCreated:r,rootElement:i}=e;return vv((()=>{const e=t.getState();e.set((e=>({internal:{...e.internal,active:!0}}))),r&&r(e),t.getState().events.connected||null==e.events.connect||e.events.connect(i)}),[]),(0,ov.jsx)(Wv.Provider,{value:t,children:n})}function Sy(e,t){const n=my.get(e),r=null==n?void 0:n.fiber;if(r){const i=null==n?void 0:n.store.getState();i&&(i.internal.active=!1),yy.updateContainer(null,r,null,(()=>{i&&setTimeout((()=>{try{var n,r,o,a;null==i.events.disconnect||i.events.disconnect(),null==(n=i.gl)||null==(r=n.renderLists)||null==r.dispose||r.dispose(),null==(o=i.gl)||null==o.forceContextLoss||o.forceContextLoss(),null!=(a=i.gl)&&a.xr&&i.xr.disconnect(),Iv(i),my.delete(e),t&&t(e)}catch(NQ){}}),500)}))}}function Cy(e,t,n){return(0,ov.jsx)(My,{children:e,container:t,state:n},t.uuid)}function My(e){let{state:t={},children:n,container:r}=e;const{events:i,size:o,...a}=t,s=ly(),[c]=l.useState((()=>new ig)),[u]=l.useState((()=>new zi)),h=l.useCallback(((e,t)=>{const n={...e};let l;if(Object.keys(e).forEach((r=>{(Hv.includes(r)||e[r]!==t[r]&&t[r])&&delete n[r]})),t&&o){const n=t.camera;l=e.viewport.getCurrentViewport(n,new vo,o),n!==e.camera&&Nv(n,o)}return{...n,scene:r,raycaster:c,pointer:u,mouse:u,previousRoot:s,events:{...e.events,...null==t?void 0:t.events,...i},size:{...e.size,...o},viewport:{...e.viewport,...l},...a}}),[t]),[d]=l.useState((()=>{const e=s.getState(),t=Zg(((t,n)=>({...e,scene:r,raycaster:c,pointer:u,mouse:u,previousRoot:s,events:{...e.events,...i},size:{...e.size,...o},...a,set:t,get:n,setEvents:e=>t((t=>({...t,events:{...t.events,...e}})))})));return t}));return l.useEffect((()=>{const e=s.subscribe((e=>d.setState((t=>h(e,t)))));return()=>{e()}}),[h]),l.useEffect((()=>{d.setState((e=>h(s.getState(),e)))}),[h]),l.useEffect((()=>()=>{d.destroy()}),[]),(0,ov.jsx)(ov.Fragment,{children:yy.createPortal((0,ov.jsx)(Wv.Provider,{value:d,children:n}),d,null)})}function Ty(e){return yy.flushSync(e,void 0)}yy.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:l.version});const Iy=l.unstable_act,By={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Py(e){const{handlePointer:t}=Qv(e);return{priority:1,enabled:!0,compute(e,t,n){t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)},connected:void 0,handlers:Object.keys(By).reduce(((e,n)=>({...e,[n]:t(n)})),{}),update:()=>{var t;const{events:n,internal:r}=e.getState();null!=(t=r.lastEvent)&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:i}=e.getState();null==i.disconnect||i.disconnect(),r((e=>({events:{...e.events,connected:t}}))),Object.entries(null!=(n=i.handlers)?n:[]).forEach((e=>{let[n,r]=e;const[i,o]=By[n];t.addEventListener(i,r,{passive:o})}))},disconnect:()=>{const{set:t,events:n}=e.getState();var r;n.connected&&(Object.entries(null!=(r=n.handlers)?r:[]).forEach((e=>{let[t,r]=e;if(n&&n.connected instanceof HTMLElement){const[e]=By[t];n.connected.removeEventListener(e,r)}})),t((e=>({events:{...e.events,connected:void 0}}))))}}}var Ry,Dy,Oy=n(4695),ky=n.n(Oy),Ly=Object.defineProperty,Fy=Object.defineProperties,zy=Object.getOwnPropertyDescriptors,Uy=Object.getOwnPropertySymbols,Ny=Object.prototype.hasOwnProperty,jy=Object.prototype.propertyIsEnumerable,Gy=(e,t,n)=>t in e?Ly(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Qy=(e,t)=>{for(var n in t||(t={}))Ny.call(t,n)&&Gy(e,n,t[n]);if(Uy)for(var n of Uy(t))jy.call(t,n)&&Gy(e,n,t[n]);return e};"undefined"===typeof window||!(null==(Ry=window.document)?void 0:Ry.createElement)&&"ReactNative"!==(null==(Dy=window.navigator)?void 0:Dy.product)?l.useEffect:l.useLayoutEffect;function Hy(e,t,n){if(!e)return;if(!0===n(e))return e;let r=t?e.return:e.child;for(;r;){const e=Hy(r,t,n);if(e)return e;r=t?null:r.sibling}}function Vy(e){try{return Object.defineProperties(e,{_currentRenderer:{get:()=>null,set(){}},_currentRenderer2:{get:()=>null,set(){}}})}catch(kE){return e}}const Wy=console.error;console.error=function(){const e=[...arguments].join("");if(!(null==e?void 0:e.startsWith("Warning:"))||!e.includes("useContext"))return Wy.apply(this,arguments);console.error=Wy};const qy=Vy(l.createContext(null));class Xy extends l.Component{render(){return l.createElement(qy.Provider,{value:this._reactInternals},this.props.children)}}function Yy(){const e=l.useContext(qy);if(null===e)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const t=l.useId();return l.useMemo((()=>{for(const n of[e,null==e?void 0:e.alternate]){if(!n)continue;const e=Hy(n,!1,(e=>{let n=e.memoizedState;for(;n;){if(n.memoizedState===t)return!0;n=n.next}}));if(e)return e}}),[e,t])}function Jy(){const e=function(){const e=Yy(),[t]=l.useState((()=>new Map));t.clear();let n=e;for(;n;){if(n.type&&"object"===typeof n.type){const e=void 0===n.type._context&&n.type.Provider===n.type?n.type:n.type._context;e&&e!==qy&&!t.has(e)&&t.set(e,l.useContext(Vy(e)))}n=n.return}return t}();return l.useMemo((()=>Array.from(e.keys()).reduce(((t,n)=>r=>l.createElement(t,null,l.createElement(n.Provider,((e,t)=>Fy(e,zy(t)))(Qy({},r),{value:e.get(n)})))),(e=>l.createElement(Xy,Qy({},e))))),[e])}function Ky(){let{debounce:e,scroll:t,polyfill:n,offsetSize:r}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{debounce:0,scroll:!1,offsetSize:!1};const i=n||"undefined"!==typeof window&&window.ResizeObserver,[o,a]=(0,l.useState)({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!i)return o.width=1280,o.height=800,[()=>{},o,()=>{}];const s=(0,l.useRef)({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),c=e?"number"===typeof e?e:e.scroll:null,u=e?"number"===typeof e?e:e.resize:null,h=(0,l.useRef)(!1);(0,l.useEffect)((()=>(h.current=!0,()=>{h.current=!1})));const[d,f,p]=(0,l.useMemo)((()=>{const e=()=>{if(!s.current.element)return;const{left:e,top:t,width:n,height:i,bottom:o,right:l,x:c,y:u}=s.current.element.getBoundingClientRect(),d={left:e,top:t,width:n,height:i,bottom:o,right:l,x:c,y:u};s.current.element instanceof HTMLElement&&r&&(d.height=s.current.element.offsetHeight,d.width=s.current.element.offsetWidth),Object.freeze(d),h.current&&!eA(s.current.lastBounds,d)&&a(s.current.lastBounds=d)};return[e,u?ky()(e,u):e,c?ky()(e,c):e]}),[a,r,c,u]);function m(){s.current.scrollContainers&&(s.current.scrollContainers.forEach((e=>e.removeEventListener("scroll",p,!0))),s.current.scrollContainers=null),s.current.resizeObserver&&(s.current.resizeObserver.disconnect(),s.current.resizeObserver=null)}function g(){s.current.element&&(s.current.resizeObserver=new i(p),s.current.resizeObserver.observe(s.current.element),t&&s.current.scrollContainers&&s.current.scrollContainers.forEach((e=>e.addEventListener("scroll",p,{capture:!0,passive:!0}))))}var v;return function(e,t){(0,l.useEffect)((()=>{if(t){const t=e;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>{window.removeEventListener("scroll",t,!0)}}}),[e,t])}(p,Boolean(t)),v=f,(0,l.useEffect)((()=>{const e=v;return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[v]),(0,l.useEffect)((()=>{m(),g()}),[t,p,f]),(0,l.useEffect)((()=>m),[]),[e=>{e&&e!==s.current.element&&(m(),s.current.element=e,s.current.scrollContainers=Zy(e),g())},o,d]}function Zy(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:i}=window.getComputedStyle(e);return[n,r,i].some((e=>"auto"===e||"scroll"===e))&&t.push(e),[...t,...Zy(e.parentElement)]}const $y=["x","y","top","bottom","left","right","width","height"],eA=(e,t)=>$y.every((n=>e[n]===t[n])),tA=l.forwardRef((function(t,n){let{children:r,fallback:i,resize:o,style:a,gl:s,events:c=Py,eventSource:u,eventPrefix:h,shadows:d,linear:f,flat:p,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:A,raycaster:x,camera:b,scene:_,onPointerMissed:w,onCreated:E,...S}=t;l.useMemo((()=>hv(e)),[]);const C=Jy(),[M,T]=Ky({scroll:!0,debounce:{scroll:50,resize:0},...o}),I=l.useRef(null),B=l.useRef(null);l.useImperativeHandle(n,(()=>I.current));const P=yv(w),[R,D]=l.useState(!1),[O,k]=l.useState(!1);if(R)throw R;if(O)throw O;const L=l.useRef(null);vv((()=>{const e=I.current;T.width>0&&T.height>0&&e&&(L.current||(L.current=_y(e)),L.current.configure({gl:s,events:c,shadows:d,linear:f,flat:p,legacy:m,orthographic:g,frameloop:v,dpr:y,performance:A,raycaster:x,camera:b,scene:_,size:T,onPointerMissed:function(){return null==P.current?void 0:P.current(...arguments)},onCreated:e=>{var t;null==e.events.connect||e.events.connect(u?(t=u)&&t.hasOwnProperty("current")?u.current:u:B.current),h&&e.setEvents({compute:(e,t)=>{const n=e[h+"X"],r=e[h+"Y"];t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),null==E||E(e)}}),L.current.render((0,ov.jsx)(C,{children:(0,ov.jsx)(xv,{set:k,children:(0,ov.jsx)(l.Suspense,{fallback:(0,ov.jsx)(Av,{set:D}),children:r})})})))})),l.useEffect((()=>{const e=I.current;if(e)return()=>Sy(e)}),[]);const F=u?"none":"auto";return(0,ov.jsx)("div",{ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:F,...a},...S,children:(0,ov.jsx)("div",{ref:M,style:{width:"100%",height:"100%"},children:(0,ov.jsx)("canvas",{ref:I,style:{display:"block"},children:i})})})})),nA=l.forwardRef((function(e,t){return(0,ov.jsx)(Xy,{children:(0,ov.jsx)(tA,{...e,ref:t})})}));var rA=AA(),iA=e=>mA(e,rA),oA=AA();iA.write=e=>mA(e,oA);var aA=AA();iA.onStart=e=>mA(e,aA);var sA=AA();iA.onFrame=e=>mA(e,sA);var lA=AA();iA.onFinish=e=>mA(e,lA);var cA=[];iA.setTimeout=(e,t)=>{const n=iA.now()+t,r=()=>{const e=cA.findIndex((e=>e.cancel==r));~e&&cA.splice(e,1),fA-=~e?1:0},i={time:n,handler:e,cancel:r};return cA.splice(uA(n),0,i),fA+=1,gA(),i};var uA=e=>~(~cA.findIndex((t=>t.time>e))||~cA.length);iA.cancel=e=>{aA.delete(e),sA.delete(e),lA.delete(e),rA.delete(e),oA.delete(e)},iA.sync=e=>{pA=!0,iA.batchedUpdates(e),pA=!1},iA.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t=r,iA.onStart(n)}return r.handler=e,r.cancel=()=>{aA.delete(n),t=null},r};var hA="undefined"!=typeof window?window.requestAnimationFrame:()=>{};iA.use=e=>hA=e,iA.now="undefined"!=typeof performance?()=>performance.now():Date.now,iA.batchedUpdates=e=>e(),iA.catch=console.error,iA.frameLoop="always",iA.advance=()=>{"demand"!==iA.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):yA()};var dA=-1,fA=0,pA=!1;function mA(e,t){pA?(t.delete(e),e(0)):(t.add(e),gA())}function gA(){dA<0&&(dA=0,"demand"!==iA.frameLoop&&hA(vA))}function vA(){~dA&&(hA(vA),iA.batchedUpdates(yA))}function yA(){const e=dA;dA=iA.now();const t=uA(dA);t&&(xA(cA.splice(0,t),(e=>e.handler())),fA-=t),fA?(aA.flush(),rA.flush(e?Math.min(64,dA-e):16.667),sA.flush(),oA.flush(),lA.flush()):dA=-1}function AA(){let e=new Set,t=e;return{add(n){fA+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(fA-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,fA-=t.size,xA(t,(t=>t(n)&&e.add(t))),fA+=e.size,t=e)}}}function xA(e,t){e.forEach((e=>{try{t(e)}catch(NQ){iA.catch(NQ)}}))}var bA=Object.defineProperty,_A={};function wA(){}((e,t)=>{for(var n in t)bA(e,n,{get:t[n],enumerable:!0})})(_A,{assign:()=>FA,colors:()=>OA,createStringInterpolator:()=>BA,skipAnimation:()=>kA,to:()=>PA,willAdvance:()=>LA});var EA={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,und:e=>void 0===e};function SA(e,t){if(EA.arr(e)){if(!EA.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var CA=(e,t)=>e.forEach(t);function MA(e,t,n){if(EA.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var TA=e=>EA.und(e)?[]:EA.arr(e)?e:[e];function IA(e,t){if(e.size){const n=Array.from(e);e.clear(),CA(n,t)}}var BA,PA,RA=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return IA(e,(e=>e(...n)))},DA=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),OA=null,kA=!1,LA=wA,FA=e=>{e.to&&(PA=e.to),e.now&&(iA.now=e.now),void 0!==e.colors&&(OA=e.colors),null!=e.skipAnimation&&(kA=e.skipAnimation),e.createStringInterpolator&&(BA=e.createStringInterpolator),e.requestAnimationFrame&&iA.use(e.requestAnimationFrame),e.batchedUpdates&&(iA.batchedUpdates=e.batchedUpdates),e.willAdvance&&(LA=e.willAdvance),e.frameLoop&&(iA.frameLoop=e.frameLoop)},zA=new Set,UA=[],NA=[],jA=0,GA={get idle(){return!zA.size&&!UA.length},start(e){jA>e.priority?(zA.add(e),iA.onStart(QA)):(HA(e),iA(WA))},advance:WA,sort(e){if(jA)iA.onFrame((()=>GA.sort(e)));else{const t=UA.indexOf(e);~t&&(UA.splice(t,1),VA(e))}},clear(){UA=[],zA.clear()}};function QA(){zA.forEach(HA),zA.clear(),iA(WA)}function HA(e){UA.includes(e)||VA(e)}function VA(e){UA.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(UA,(t=>t.priority>e.priority)),0,e)}function WA(e){const t=NA;for(let n=0;n<UA.length;n++){const r=UA[n];jA=r.priority,r.idle||(LA(r),r.advance(e),r.idle||t.push(r))}return jA=0,(NA=UA).length=0,(UA=t).length>0}var qA="[-+]?\\d*\\.?\\d+",XA=qA+"%";function YA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}var JA=new RegExp("rgb"+YA(qA,qA,qA)),KA=new RegExp("rgba"+YA(qA,qA,qA,qA)),ZA=new RegExp("hsl"+YA(qA,XA,XA)),$A=new RegExp("hsla"+YA(qA,XA,XA,qA)),ex=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,tx=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,nx=/^#([0-9a-fA-F]{6})$/,rx=/^#([0-9a-fA-F]{8})$/;function ix(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function ox(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,o=ix(i,r,e+1/3),a=ix(i,r,e),s=ix(i,r,e-1/3);return Math.round(255*o)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function ax(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function sx(e){return(parseFloat(e)%360+360)%360/360}function lx(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function cx(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function ux(e){let t=function(e){let t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=nx.exec(e))?parseInt(t[1]+"ff",16)>>>0:OA&&void 0!==OA[e]?OA[e]:(t=JA.exec(e))?(ax(t[1])<<24|ax(t[2])<<16|ax(t[3])<<8|255)>>>0:(t=KA.exec(e))?(ax(t[1])<<24|ax(t[2])<<16|ax(t[3])<<8|lx(t[4]))>>>0:(t=ex.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=rx.exec(e))?parseInt(t[1],16)>>>0:(t=tx.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=ZA.exec(e))?(255|ox(sx(t[1]),cx(t[2]),cx(t[3])))>>>0:(t=$A.exec(e))?(ox(sx(t[1]),cx(t[2]),cx(t[3]))|lx(t[4]))>>>0:null}(e);if(null===t)return e;t=t||0;return`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`}var hx=(e,t,n)=>{if(EA.fun(e))return e;if(EA.arr(e))return hx({range:e,output:t,extrapolate:n});if(EA.str(e.output[0]))return BA(e);const r=e,i=r.output,o=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,o);return function(e,t,n,r,i,o,a,s,l){let c=l?l(e):e;if(c<t){if("identity"===a)return c;"clamp"===a&&(c=t)}if(c>n){if("identity"===s)return c;"clamp"===s&&(c=n)}if(r===i)return r;if(t===n)return e<=t?r:i;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=o(c),r===-1/0?c=-c:i===1/0?c+=r:c=c*(i-r)+r;return c}(e,o[t],o[t+1],i[t],i[t+1],l,a,s,r.map)}};var dx=1.70158,fx=1.525*dx,px=dx+1,mx=2*Math.PI/3,gx=2*Math.PI/4.5,vx=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},yx={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>px*e*e*e-dx*e*e,easeOutBack:e=>1+px*Math.pow(e-1,3)+dx*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-fx)/2:(Math.pow(2*e-2,2)*((fx+1)*(2*e-2)+fx)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*mx),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*mx)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*gx)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*gx)/2+1,easeInBounce:e=>1-vx(1-e),easeOutBounce:vx,easeInOutBounce:e=>e<.5?(1-vx(1-2*e))/2:(1+vx(2*e-1))/2,steps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e;return((e,t,n)=>Math.min(Math.max(n,e),t))(0,1,("end"===t?Math.floor(r):Math.ceil(r))/e)}}},Ax=Symbol.for("FluidValue.get"),xx=Symbol.for("FluidValue.observers"),bx=e=>Boolean(e&&e[Ax]),_x=e=>e&&e[Ax]?e[Ax]():e,wx=e=>e[xx]||null;function Ex(e,t){const n=e[xx];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}var Sx=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Cx(this,e)}},Cx=(e,t)=>Bx(e,Ax,t);function Mx(e,t){if(e[Ax]){let n=e[xx];n||Bx(e,xx,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Tx(e,t){const n=e[xx];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[xx]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var Ix,Bx=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Px=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Rx=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Dx=new RegExp(`(${Px.source})(%|[a-z]+)`,"i"),Ox=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,kx=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Lx=e=>{const[t,n]=Fx(e);if(!t||DA())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&kx.test(n)?Lx(n):n||e},Fx=e=>{const t=kx.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},zx=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,Ux=e=>{Ix||(Ix=OA?new RegExp(`(${Object.keys(OA).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>_x(e).replace(kx,Lx).replace(Rx,ux).replace(Ix,ux))),n=t.map((e=>e.match(Px).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))),i=r.map((t=>hx({...e,output:t})));return e=>{const n=!Dx.test(t[0])&&t.find((e=>Dx.test(e)))?.replace(Px,"");let r=0;return t[0].replace(Px,(()=>`${i[r++](e)}${n||""}`)).replace(Ox,zx)}},Nx="react-spring: ",jx=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${Nx}once requires a function parameter`);return function(){n||(t(...arguments),n=!0)}},Gx=jx(console.warn);function Qx(){Gx(`${Nx}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Hx,Vx=jx(console.warn);function Wx(e){return EA.str(e)&&("#"==e[0]||/\d/.test(e)||!DA()&&kx.test(e)||e in(OA||{}))}var qx=new WeakMap,Xx=e=>e.forEach((e=>{let{target:t,contentRect:n}=e;return qx.get(t)?.forEach((e=>e(n)))}));var Yx,Jx=new Set,Kx=e=>(Jx.add(e),Yx||(Yx=(()=>{const e=()=>{Jx.forEach((e=>e({width:window.innerWidth,height:window.innerHeight})))};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}})()),()=>{Jx.delete(e),!Jx.size&&Yx&&(Yx(),Yx=void 0)}),Zx=function(e){let{container:t=document.documentElement}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t===document.documentElement?Kx(e):function(e,t){Hx||"undefined"!==typeof ResizeObserver&&(Hx=new ResizeObserver(Xx));let n=qx.get(t);return n||(n=new Set,qx.set(t,n)),n.add(e),Hx&&Hx.observe(t),()=>{const n=qx.get(t);n&&(n.delete(e),!n.size&&Hx&&Hx.unobserve(t))}}(e,t)},$x={x:{length:"Width",position:"Left"},y:{length:"Height",position:"Top"}},eb=class{constructor(e,t){this.createAxis=()=>({current:0,progress:0,scrollLength:0}),this.updateAxis=e=>{const t=this.info[e],{length:n,position:r}=$x[e];t.current=this.container[`scroll${r}`],t.scrollLength=this.container[`scroll${n}`]-this.container[`client${n}`],t.progress=((e,t,n)=>t-e===0?1:(n-e)/(t-e))(0,t.scrollLength,t.current)},this.update=()=>{this.updateAxis("x"),this.updateAxis("y")},this.sendEvent=()=>{this.callback(this.info)},this.advance=()=>{this.update(),this.sendEvent()},this.callback=e,this.container=t,this.info={time:0,x:this.createAxis(),y:this.createAxis()}}},tb=new WeakMap,nb=new WeakMap,rb=new WeakMap,ib=e=>e===document.documentElement?window:e;var ob=DA()?l.useEffect:l.useLayoutEffect,ab=()=>{const e=(0,l.useRef)(!1);return ob((()=>(e.current=!0,()=>{e.current=!1})),[]),e};function sb(){const e=(0,l.useState)()[1],t=ab();return()=>{t.current&&e(Math.random())}}var lb=e=>(0,l.useEffect)(e,cb),cb=[];function ub(e){const t=(0,l.useRef)();return(0,l.useEffect)((()=>{t.current=e})),t.current}var hb=()=>{const[e,t]=(0,l.useState)(null);return ob((()=>{const e=window.matchMedia("(prefers-reduced-motion)"),n=e=>{t(e.matches),FA({skipAnimation:e.matches})};return n(e),e.addEventListener?e.addEventListener("change",n):e.addListener(n),()=>{e.removeEventListener?e.removeEventListener("change",n):e.removeListener(n)}}),[]),e},db=Symbol.for("Animated:node"),fb=e=>e&&e[db],pb=(e,t)=>((e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}))(e,db,t),mb=e=>e&&e[db]&&e[db].getPayload(),gb=class{constructor(){pb(this,this)}getPayload(){return this.payload||[]}},vb=class extends gb{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,EA.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new vb(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return EA.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,EA.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},yb=class extends vb{constructor(e){super(0),this._string=null,this._toString=hx({output:[e,e]})}static create(e){return new yb(e)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(EA.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=hx({output:[this.getValue(),e]})),this._value=0,super.reset()}},Ab={dependencies:null},xb=class extends gb{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return MA(this.source,((n,r)=>{(e=>!!e&&e[db]===e)(n)?t[r]=n.getValue(e):bx(n)?t[r]=_x(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&CA(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return MA(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Ab.dependencies&&bx(e)&&Ab.dependencies.add(e);const t=mb(e);t&&CA(t,(e=>this.add(e)))}},bb=class extends xb{constructor(e){super(e)}static create(e){return new bb(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(_b)),!0)}};function _b(e){return(Wx(e)?yb:vb).create(e)}function wb(e){const t=fb(e);return t?t.constructor:EA.arr(e)?bb:Wx(e)?yb:vb}var Eb=(e,t)=>{const n=!EA.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,l.forwardRef)(((r,i)=>{const o=(0,l.useRef)(null),a=n&&(0,l.useCallback)((e=>{o.current=function(e,t){e&&(EA.fun(e)?e(t):e.current=t);return t}(i,e)}),[i]),[s,c]=function(e,t){const n=new Set;Ab.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)});return e=new xb(e),Ab.dependencies=null,[e,n]}(r,t),u=sb(),h=()=>{const e=o.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,s.getValue(!0)))&&u()},d=new Sb(h,c),f=(0,l.useRef)();ob((()=>(f.current=d,CA(c,(e=>Mx(e,d))),()=>{f.current&&(CA(f.current.deps,(e=>Tx(e,f.current))),iA.cancel(f.current.update))}))),(0,l.useEffect)(h,[]),lb((()=>()=>{const e=f.current;CA(e.deps,(t=>Tx(t,e)))}));const p=t.getComponentProps(s.getValue());return l.createElement(e,{...p,ref:a})}))},Sb=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&iA.write(this.update)}};var Cb=Symbol.for("AnimatedComponent"),Mb=e=>EA.str(e)?e:e&&EA.str(e.displayName)?e.displayName:EA.fun(e)&&e.name||null,Tb=class{};function Ib(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return EA.fun(e)?e(...n):e}var Bb=(e,t)=>!0===e||!!(t&&e&&(EA.fun(e)?e(t):TA(e).includes(t))),Pb=(e,t)=>EA.obj(e)?t&&e[t]:e,Rb=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,Db=e=>e,Ob=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Db,n=kb;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const n=t(e[i],i);EA.und(n)||(r[i]=n)}return r},kb=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Lb={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Fb(e){const t=function(e){const t={};let n=0;if(MA(e,((e,r)=>{Lb[r]||(t[r]=e,n++)})),n)return t}(e);if(t){const n={to:t};return MA(e,((e,r)=>r in t||(n[r]=e))),n}return{...e}}function zb(e){return e=_x(e),EA.arr(e)?e.map(zb):Wx(e)?_A.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Ub(e){for(const t in e)return!0;return!1}function Nb(e){return EA.fun(e)||EA.arr(e)&&EA.obj(e[0])}function jb(e,t){e.ref?.delete(e),t?.delete(e)}function Gb(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}function Qb(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3;ob((()=>{if(t){let r=0;CA(e,((e,i)=>{const o=e.current;if(o.length){let a=n*t[i];isNaN(a)?a=r:r=a,CA(o,(e=>{CA(e.queue,(e=>{const t=e.delay;e.delay=e=>a+Ib(t||0,e)}))})),e.start()}}))}else{let t=Promise.resolve();CA(e,(e=>{const n=e.current;if(n.length){const r=n.map((e=>{const t=e.queue;return e.queue=[],t}));t=t.then((()=>(CA(n,((e,t)=>CA(r[t]||[],(t=>e.queue.push(t))))),Promise.all(e.start()))))}}))}}))}var Hb={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Vb={...Hb.default,mass:1,damping:1,easing:yx.linear,clamp:!1},Wb=class{constructor(){this.velocity=0,Object.assign(this,Vb)}};function qb(e,t){if(EA.und(t.decay)){const n=!EA.und(t.tension)||!EA.und(t.friction);!n&&EA.und(t.frequency)&&EA.und(t.damping)&&EA.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}var Xb=[],Yb=class{constructor(){this.changed=!1,this.values=Xb,this.toValues=null,this.fromValues=Xb,this.config=new Wb,this.immediate=!1}};function Jb(e,t){let{key:n,props:r,defaultProps:i,state:o,actions:a}=t;return new Promise(((t,s)=>{let l,c,u=Bb(r.cancel??i?.cancel,n);if(u)f();else{EA.und(r.pause)||(o.paused=Bb(r.pause,n));let e=i?.pause;!0!==e&&(e=o.paused||Bb(e,n)),l=Ib(r.delay||0,n),e?(o.resumeQueue.add(d),a.pause()):(a.resume(),d())}function h(){o.resumeQueue.add(d),o.timeouts.delete(c),c.cancel(),l=c.time-iA.now()}function d(){l>0&&!_A.skipAnimation?(o.delayed=!0,c=iA.setTimeout(f,l),o.pauseQueue.add(h),o.timeouts.add(c)):f()}function f(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(h),o.timeouts.delete(c),e<=(o.cancelId||0)&&(u=!0);try{a.start({...r,callId:e,cancel:u},t)}catch(n){s(n)}}}))}var Kb=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?e_(e.get()):t.every((e=>e.noop))?Zb(e.get()):$b(e.get(),t.every((e=>e.finished))),Zb=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),$b=function(e,t){return{value:e,finished:t,cancelled:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},e_=e=>({value:e,cancelled:!0,finished:!1});function t_(e,t,n,r){const{callId:i,parentId:o,onRest:a}=t,{asyncTo:s,promise:l}=n;return o||e!==s||t.reset?n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const c=Ob(t,((e,t)=>"onRest"===t?void 0:e));let u,h;const d=new Promise(((e,t)=>(u=e,h=t))),f=e=>{const t=i<=(n.cancelId||0)&&e_(r)||i!==n.asyncId&&$b(r,!1);if(t)throw e.result=t,h(e),e},p=(e,t)=>{const o=new r_,a=new i_;return(async()=>{if(_A.skipAnimation)throw n_(n),a.result=$b(r,!1),h(a),a;f(o);const s=EA.obj(e)?{...e}:{...t,to:e};s.parentId=i,MA(c,((e,t)=>{EA.und(s[t])&&(s[t]=e)}));const l=await r.start(s);return f(o),n.paused&&await new Promise((e=>{n.resumeQueue.add(e)})),l})()};let m;if(_A.skipAnimation)return n_(n),$b(r,!1);try{let t;t=EA.arr(e)?(async e=>{for(const t of e)await p(t)})(e):Promise.resolve(e(p,r.stop.bind(r))),await Promise.all([t.then(u),d]),m=$b(r.get(),!0,!1)}catch(g){if(g instanceof r_)m=g.result;else{if(!(g instanceof i_))throw g;m=g.result}}finally{i==n.asyncId&&(n.asyncId=o,n.asyncTo=o?s:void 0,n.promise=o?l:void 0)}return EA.fun(a)&&iA.batchedUpdates((()=>{a(m,r,r.item)})),m})():l}function n_(e,t){IA(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var r_=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},i_=class extends Error{constructor(){super("SkipAnimationSignal")}},o_=e=>e instanceof s_,a_=1,s_=class extends Sx{constructor(){super(...arguments),this.id=a_++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=fb(this);return e&&e.getValue()}to(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _A.to(this,t)}interpolate(){Qx();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return _A.to(this,t)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e){Ex(this,{type:"change",parent:this,value:e,idle:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}_onPriorityChange(e){this.idle||GA.sort(this),Ex(this,{type:"priority",parent:this,priority:e})}},l_=Symbol.for("SpringPhase"),c_=e=>(1&e[l_])>0,u_=e=>(2&e[l_])>0,h_=e=>(4&e[l_])>0,d_=(e,t)=>t?e[l_]|=3:e[l_]&=-3,f_=(e,t)=>t?e[l_]|=4:e[l_]&=-5,p_=class extends s_{constructor(e,t){if(super(),this.animation=new Yb,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!EA.und(e)||!EA.und(t)){const n=EA.obj(e)?{...e}:{...t,from:e};EA.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(u_(this)||this._state.asyncTo)||h_(this)}get goal(){return _x(this.animation.to)}get velocity(){const e=fb(this);return e instanceof vb?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return c_(this)}get isAnimating(){return u_(this)}get isPaused(){return h_(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:i}=r;const{config:o}=r,a=mb(r.to);!a&&bx(r.to)&&(i=TA(_x(r.to))),r.values.forEach(((s,l)=>{if(s.done)return;const c=s.constructor==yb?1:a?a[l].lastPosition:i[l];let u=r.immediate,h=c;if(!u){if(h=s.lastPosition,o.tension<=0)return void(s.done=!0);let t=s.elapsedTime+=e;const n=r.fromValues[l],i=null!=s.v0?s.v0:s.v0=EA.arr(o.velocity)?o.velocity[l]:o.velocity;let a;const d=o.precision||(n==c?.005:Math.min(1,.001*Math.abs(c-n)));if(EA.und(o.duration))if(o.decay){const e=!0===o.decay?.998:o.decay,r=Math.exp(-(1-e)*t);h=n+i/(1-e)*(1-r),u=Math.abs(s.lastPosition-h)<=d,a=i*r}else{a=null==s.lastVelocity?i:s.lastVelocity;const t=o.restVelocity||d/10,r=o.clamp?0:o.bounce,l=!EA.und(r),f=n==c?s.v0>0:n<c;let p,m=!1;const g=1,v=Math.ceil(e/g);for(let e=0;e<v&&(p=Math.abs(a)>t,p||(u=Math.abs(c-h)<=d,!u));++e){l&&(m=h==c||h>c==f,m&&(a=-a*r,h=c));a+=(1e-6*-o.tension*(h-c)+.001*-o.friction*a)/o.mass*g,h+=a*g}}else{let r=1;o.duration>0&&(this._memoizedDuration!==o.duration&&(this._memoizedDuration=o.duration,s.durationProgress>0&&(s.elapsedTime=o.duration*s.durationProgress,t=s.elapsedTime+=e)),r=(o.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,s.durationProgress=r),h=n+o.easing(r)*(c-n),a=(h-s.lastPosition)/e,u=1==r}s.lastVelocity=a,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),u=!0)}a&&!a[l].done&&(u=!1),u?s.done=!0:t=!1,s.setValue(h,o.round)&&(n=!0)}));const s=fb(this),l=s.getValue();if(t){const e=_x(r.to);l===e&&!n||o.decay?n&&o.decay&&this._onChange(l):(s.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(l)}set(e){return iA.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(u_(this)){const{to:e,config:t}=this.animation;iA.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return EA.und(e)?(n=this.queue||[],this.queue=[]):n=[EA.obj(e)?e:{...t,to:e}],Promise.all(n.map((e=>this._update(e)))).then((e=>Kb(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),n_(this._state,e&&this._lastCallId),iA.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=EA.obj(n)?n[t]:n,(null==n||Nb(n))&&(n=void 0),r=EA.obj(r)?r[t]:r,null==r&&(r=void 0);const i={to:n,from:r};return c_(this)||(e.reverse&&([n,r]=[r,n]),r=_x(r),EA.und(r)?fb(this)||this._set(n):this._set(r)),i}_update(e,t){let{...n}=e;const{key:r,defaultProps:i}=this;n.default&&Object.assign(i,Ob(n,((e,t)=>/^on/.test(t)?Pb(e,r):e))),b_(this,n,"onProps"),__(this,"onProps",n,this);const o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return Jb(++this._lastCallId,{key:r,props:n,defaultProps:i,state:a,actions:{pause:()=>{h_(this)||(f_(this,!0),RA(a.pauseQueue),__(this,"onPause",$b(this,m_(this,this.animation.to)),this))},resume:()=>{h_(this)&&(f_(this,!1),u_(this)&&this._resume(),RA(a.resumeQueue),__(this,"onResume",$b(this,m_(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then((e=>{if(n.loop&&e.finished&&(!t||!e.noop)){const e=g_(n);if(e)return this._update(e,!0)}return e}))}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(e_(this));const r=!EA.und(e.to),i=!EA.und(e.from);if(r||i){if(!(t.callId>this._lastToId))return n(e_(this));this._lastToId=t.callId}const{key:o,defaultProps:a,animation:s}=this,{to:l,from:c}=s;let{to:u=l,from:h=c}=e;!i||r||t.default&&!EA.und(u)||(u=h),t.reverse&&([u,h]=[h,u]);const d=!SA(h,c);d&&(s.from=h),h=_x(h);const f=!SA(u,l);f&&this._focus(u);const p=Nb(t.to),{config:m}=s,{decay:g,velocity:v}=m;(r||i)&&(m.velocity=0),t.config&&!p&&function(e,t,n){n&&(qb(n={...n},t),t={...n,...t}),qb(e,t),Object.assign(e,t);for(const a in Vb)null==e[a]&&(e[a]=Vb[a]);let{frequency:r,damping:i}=e;const{mass:o}=e;EA.und(r)||(r<.01&&(r=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/r,2)*o,e.friction=4*Math.PI*i*o/r)}(m,Ib(t.config,o),t.config!==a.config?Ib(a.config,o):void 0);let y=fb(this);if(!y||EA.und(u))return n($b(this,!0));const A=EA.und(t.reset)?i&&!t.default:!EA.und(h)&&Bb(t.reset,o),x=A?h:this.get(),b=zb(u),_=EA.num(b)||EA.arr(b)||Wx(b),w=!p&&(!_||Bb(a.immediate||t.immediate,o));if(f){const e=wb(u);if(e!==y.constructor){if(!w)throw Error(`Cannot animate between ${y.constructor.name} and ${e.name}, as the "to" prop suggests`);y=this._set(b)}}const E=y.constructor;let S=bx(u),C=!1;if(!S){const e=A||!c_(this)&&d;(f||e)&&(C=SA(zb(x),b),S=!C),(SA(s.immediate,w)||w)&&SA(m.decay,g)&&SA(m.velocity,v)||(S=!0)}if(C&&u_(this)&&(s.changed&&!A?S=!0:S||this._stop(l)),!p&&((S||bx(l))&&(s.values=y.getPayload(),s.toValues=bx(u)?null:E==yb?[1]:TA(b)),s.immediate!=w&&(s.immediate=w,w||A||this._set(l)),S)){const{onRest:e}=s;CA(x_,(e=>b_(this,t,e)));const r=$b(this,m_(this,l));RA(this._pendingCalls,r),this._pendingCalls.add(n),s.changed&&iA.batchedUpdates((()=>{s.changed=!A,e?.(r,this),A?Ib(a.onRest,r):s.onStart?.(r,this)}))}A&&this._set(x),p?n(t_(t.to,t,this._state,this)):S?this._start():u_(this)&&!f?this._pendingCalls.add(n):n(Zb(x))}_focus(e){const t=this.animation;e!==t.to&&(wx(this)&&this._detach(),t.to=e,wx(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;bx(t)&&(Mx(t,this),o_(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;bx(e)&&Tx(e,this)}_set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=_x(e);if(!EA.und(n)){const e=fb(this);if(!e||!SA(n,e.getValue())){const r=wb(n);e&&e.constructor==r?e.setValue(n):pb(this,r.create(n)),e&&iA.batchedUpdates((()=>{this._onChange(n,t)}))}}return fb(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,__(this,"onStart",$b(this,m_(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Ib(this.animation.onChange,e,this)),Ib(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;fb(this).reset(_x(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),u_(this)||(d_(this,!0),h_(this)||this._resume())}_resume(){_A.skipAnimation?this.finish():GA.start(this)}_stop(e,t){if(u_(this)){d_(this,!1);const n=this.animation;CA(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Ex(this,{type:"idle",parent:this});const r=t?e_(this.get()):$b(this.get(),m_(this,e??n.to));RA(this._pendingCalls,r),n.changed&&(n.changed=!1,__(this,"onRest",r,this))}}};function m_(e,t){const n=zb(t);return SA(zb(e.get()),n)}function g_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to;const r=Ib(t);if(r){const i=!0!==r&&Fb(r),o=(i||e).reverse,a=!i||i.reset;return v_({...e,loop:t,default:!1,pause:void 0,to:!o||Nb(n)?n:void 0,from:a?e.from:void 0,reset:a,...i})}}function v_(e){const{to:t,from:n}=e=Fb(e),r=new Set;return EA.obj(t)&&A_(t,r),EA.obj(n)&&A_(n,r),e.keys=r.size?Array.from(r):null,e}function y_(e){const t=v_(e);return EA.und(t.default)&&(t.default=Ob(t)),t}function A_(e,t){MA(e,((e,n)=>null!=e&&t.add(n)))}var x_=["onStart","onRest","onChange","onPause","onResume"];function b_(e,t,n){e.animation[n]=t[n]!==Rb(t,n)?Pb(t[n],e.key):void 0}function __(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];e.animation[t]?.(...r),e.defaultProps[t]?.(...r)}var w_=["onStart","onChange","onRest"],E_=1,S_=class{constructor(e,t){this.id=E_++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(const t in e){const n=e[t];EA.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(v_(e)),this}start(e){let{queue:t}=this;return e?t=TA(e).map(v_):this.queue=[],this._flush?this._flush(this,t):(R_(this,t),C_(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;CA(TA(t),(t=>n[t].stop(!!e)))}else n_(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(EA.und(e))this.start({pause:!0});else{const t=this.springs;CA(TA(e),(e=>t[e].pause()))}return this}resume(e){if(EA.und(e))this.start({pause:!1});else{const t=this.springs;CA(TA(e),(e=>t[e].resume()))}return this}each(e){MA(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,IA(e,(e=>{let[t,n]=e;n.value=this.get(),t(n,this,this._item)})));const o=!r&&this._started,a=i||o&&n.size?this.get():null;i&&t.size&&IA(t,(e=>{let[t,n]=e;n.value=a,t(n,this,this._item)})),o&&(this._started=!1,IA(n,(e=>{let[t,n]=e;n.value=a,t(n,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}iA.onFrame(this._onFrame)}};function C_(e,t){return Promise.all(t.map((t=>M_(e,t)))).then((t=>Kb(e,t)))}async function M_(e,t,n){const{keys:r,to:i,from:o,loop:a,onRest:s,onResolve:l}=t,c=EA.obj(t.default)&&t.default;a&&(t.loop=!1),!1===i&&(t.to=null),!1===o&&(t.from=null);const u=EA.arr(i)||EA.fun(i)?i:void 0;u?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):CA(w_,(n=>{const r=t[n];if(EA.fun(r)){const i=e._events[n];t[n]=e=>{let{finished:t,cancelled:n}=e;const o=i.get(r);o?(t||(o.finished=!1),n&&(o.cancelled=!0)):i.set(r,{value:null,finished:t||!1,cancelled:n||!1})},c&&(c[n]=t[n])}}));const h=e._state;t.pause===!h.paused?(h.paused=t.pause,RA(t.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),f=!0===t.cancel||!0===Rb(t,"cancel");(u||f&&h.asyncId)&&d.push(Jb(++e._lastAsyncId,{props:t,state:h,actions:{pause:wA,resume:wA,start(t,n){f?(n_(h,e._lastAsyncId),n(e_(e))):(t.onRest=s,n(t_(u,t,h,e)))}}})),h.paused&&await new Promise((e=>{h.resumeQueue.add(e)}));const p=Kb(e,await Promise.all(d));if(a&&p.finished&&(!n||!p.noop)){const n=g_(t,a,i);if(n)return R_(e,[n]),M_(e,n,!0)}return l&&iA.batchedUpdates((()=>l(p,e,e.item))),p}function T_(e,t){const n={...e.springs};return t&&CA(TA(t),(e=>{EA.und(e.keys)&&(e=v_(e)),EA.obj(e.to)||(e={...e,to:void 0}),P_(n,e,(e=>B_(e)))})),I_(e,n),n}function I_(e,t){MA(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,Mx(t,e))}))}function B_(e,t){const n=new p_;return n.key=e,t&&Mx(n,t),n}function P_(e,t,n){t.keys&&CA(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function R_(e,t){CA(t,(t=>{P_(e.springs,t,(t=>B_(t,e)))}))}var D_=e=>{let{children:t,...n}=e;const r=(0,l.useContext)(O_),i=n.pause||!!r.pause,o=n.immediate||!!r.immediate;n=function(e,t){const[n]=(0,l.useState)((()=>({inputs:t,result:e()}))),r=(0,l.useRef)(),i=r.current;let o=i;if(o){const n=Boolean(t&&o.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,o.inputs));n||(o={inputs:t,result:e()})}else o=n;return(0,l.useEffect)((()=>{r.current=o,i==n&&(n.inputs=n.result=void 0)}),[o]),o.result}((()=>({pause:i,immediate:o})),[i,o]);const{Provider:a}=O_;return l.createElement(a,{value:n},t)},O_=function(e,t){return Object.assign(e,l.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}(D_,{});D_.Provider=O_.Provider,D_.Consumer=O_.Consumer;var k_=()=>{const e=[],t=function(t){Vx(`${Nx}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const r=[];return CA(e,((e,i)=>{if(EA.und(t))r.push(e.start());else{const o=n(t,e,i);o&&r.push(e.start(o))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return CA(e,(e=>e.pause(...arguments))),this},t.resume=function(){return CA(e,(e=>e.resume(...arguments))),this},t.set=function(t){CA(e,((e,n)=>{const r=EA.fun(t)?t(n,e):t;r&&e.set(r)}))},t.start=function(t){const n=[];return CA(e,((e,r)=>{if(EA.und(t))n.push(e.start());else{const i=this._getProps(t,e,r);i&&n.push(e.start(i))}})),n},t.stop=function(){return CA(e,(e=>e.stop(...arguments))),this},t.update=function(t){return CA(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};const n=function(e,t,n){return EA.fun(e)?e(n,t):e};return t._getProps=n,t};function L_(e,t,n){const r=EA.fun(t)&&t;r&&!n&&(n=[]);const i=(0,l.useMemo)((()=>r||3==arguments.length?k_():void 0),[]),o=(0,l.useRef)(0),a=sb(),s=(0,l.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const n=T_(e,t);return o.current>0&&!s.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?C_(e,t):new Promise((r=>{I_(e,n),s.queue.push((()=>{r(C_(e,t))})),a()}))}})),[]),c=(0,l.useRef)([...s.ctrls]),u=[],h=ub(e)||0;function d(e,n){for(let i=e;i<n;i++){const e=c.current[i]||(c.current[i]=new S_(null,s.flush)),n=r?r(i,e):t[i];n&&(u[i]=y_(n))}}(0,l.useMemo)((()=>{CA(c.current.slice(e,h),(e=>{jb(e,i),e.stop(!0)})),c.current.length=e,d(h,e)}),[e]),(0,l.useMemo)((()=>{d(0,Math.min(h,e))}),n);const f=c.current.map(((e,t)=>T_(e,u[t]))),p=(0,l.useContext)(D_),m=ub(p),g=p!==m&&Ub(p);ob((()=>{o.current++,s.ctrls=c.current;const{queue:e}=s;e.length&&(s.queue=[],CA(e,(e=>e()))),CA(c.current,((e,t)=>{i?.add(e),g&&e.start({default:p});const n=u[t];n&&(Gb(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),lb((()=>()=>{CA(s.ctrls,(e=>e.stop(!0)))}));const v=f.map((e=>({...e})));return i?[v,i]:v}function F_(e,t){const n=EA.fun(e),[[r],i]=L_(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[r,i]:r}var z_=()=>k_(),U_=()=>(0,l.useState)(z_)[0],N_=(e,t)=>{const n=function(e){const t=(0,l.useRef)(null);return null===t.current&&(t.current=e()),t.current}((()=>new p_(e,t)));return lb((()=>()=>{n.stop()})),n};function j_(e,t,n){const r=EA.fun(t)&&t;r&&!n&&(n=[]);let i,o=!0;const a=L_(e,((e,n)=>{const a=r?r(e,n):t;return i=a.ref,o=o&&a.reverse,a}),n||[{}]);if(ob((()=>{CA(a[1].current,((e,t)=>{const n=a[1].current[t+(o?1:-1)];Gb(e,i),e.ref?n&&e.update({to:n.springs}):n?e.start({to:n.springs}):e.start()}))}),n),r||3==arguments.length){const e=i??a[1];return e._getProps=(t,n,r)=>{const i=EA.fun(t)?t(r,n):t;if(i){const t=e.current[r+(i.reverse?1:-1)];return t&&(i.to=t.springs),i}},a}return a[0]}function G_(e,t,n){const r=EA.fun(t)&&t,{reset:i,sort:o,trail:a=0,expires:s=!0,exitBeforeEnter:c=!1,onDestroyed:u,ref:h,config:d}=r?r():t,f=(0,l.useMemo)((()=>r||3==arguments.length?k_():void 0),[]),p=TA(e),m=[],g=(0,l.useRef)(null),v=i?null:g.current;ob((()=>{g.current=m})),lb((()=>(CA(m,(e=>{f?.add(e.ctrl),e.ctrl.ref=f})),()=>{CA(g.current,(e=>{e.expired&&clearTimeout(e.expirationId),jb(e.ctrl,f),e.ctrl.stop(!0)}))})));const y=function(e,t,n){let{key:r,keys:i=r}=t;if(null===i){const t=new Set;return e.map((e=>{const r=n&&n.find((n=>n.item===e&&"leave"!==n.phase&&!t.has(n)));return r?(t.add(r),r.key):Q_++}))}return EA.und(i)?e:EA.fun(i)?e.map(i):TA(i)}(p,r?r():t,v),A=i&&g.current||[];ob((()=>CA(A,(e=>{let{ctrl:t,item:n,key:r}=e;jb(t,f),Ib(u,n,r)}))));const x=[];if(v&&CA(v,((e,t)=>{e.expired?(clearTimeout(e.expirationId),A.push(e)):~(t=x[t]=y.indexOf(e.key))&&(m[t]=e)})),CA(p,((e,t)=>{m[t]||(m[t]={key:y[t],item:e,phase:"mount",ctrl:new S_},m[t].ctrl.item=e)})),x.length){let e=-1;const{leave:n}=r?r():t;CA(x,((t,r)=>{const i=v[r];~t?(e=m.indexOf(i),m[e]={...i,item:p[t]}):n&&m.splice(++e,0,i)}))}EA.fun(o)&&m.sort(((e,t)=>o(e.item,t.item)));let b=-a;const _=sb(),w=Ob(t),E=new Map,S=(0,l.useRef)(new Map),C=(0,l.useRef)(!1);CA(m,((e,n)=>{const i=e.key,o=e.phase,l=r?r():t;let u,f;const p=Ib(l.delay||0,i);if("mount"==o)u=l.enter,f="enter";else{const e=y.indexOf(i)<0;if("leave"!=o)if(e)u=l.leave,f="leave";else{if(!(u=l.update))return;f="update"}else{if(e)return;u=l.enter,f="enter"}}if(u=Ib(u,e.item,n),u=EA.obj(u)?Fb(u):{to:u},!u.config){const t=d||w.config;u.config=Ib(t,e.item,n,f)}b+=a;const m={...w,delay:p+b,ref:h,immediate:l.immediate,reset:!1,...u};if("enter"==f&&EA.und(m.from)){const i=r?r():t,o=EA.und(i.initial)||v?i.from:i.initial;m.from=Ib(o,e.item,n)}const{onResolve:A}=m;m.onResolve=e=>{Ib(A,e);const t=g.current,n=t.find((e=>e.key===i));if(n&&(!e.cancelled||"update"==n.phase)&&n.ctrl.idle){const e=t.every((e=>e.ctrl.idle));if("leave"==n.phase){const t=Ib(s,n.item);if(!1!==t){const r=!0===t?0:t;if(n.expired=!0,!e&&r>0)return void(r<=2147483647&&(n.expirationId=setTimeout(_,r)))}}e&&t.some((e=>e.expired))&&(S.current.delete(n),c&&(C.current=!0),_())}};const x=T_(e.ctrl,m);"leave"===f&&c?S.current.set(e,{phase:f,springs:x,payload:m}):E.set(e,{phase:f,springs:x,payload:m})}));const M=(0,l.useContext)(D_),T=ub(M),I=M!==T&&Ub(M);ob((()=>{I&&CA(m,(e=>{e.ctrl.start({default:M})}))}),[M]),CA(E,((e,t)=>{if(S.current.size){const e=m.findIndex((e=>e.key===t.key));m.splice(e,1)}})),ob((()=>{CA(S.current.size?S.current:E,((e,t)=>{let{phase:n,payload:r}=e;const{ctrl:i}=t;t.phase=n,f?.add(i),I&&"enter"==n&&i.start({default:M}),r&&(Gb(i,r.ref),!i.ref&&!f||C.current?(i.start(r),C.current&&(C.current=!1)):i.update(r))}))}),i?void 0:n);const B=e=>l.createElement(l.Fragment,null,m.map(((t,n)=>{const{springs:r}=E.get(t)||t.ctrl,i=e({...r},t.item,t,n);return i&&i.type?l.createElement(i.type,{...i.props,key:EA.str(t.key)||EA.num(t.key)?t.key:t.ctrl.id,ref:i.ref}):i})));return f?[B,f]:B}var Q_=1;var H_=function(){let{container:e,...t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const[n,r]=F_((()=>({scrollX:0,scrollY:0,scrollXProgress:0,scrollYProgress:0,...t})),[]);return ob((()=>{const t=function(e){let{container:t=document.documentElement}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=rb.get(t);n||(n=new Set,rb.set(t,n));const r=new eb(e,t);if(n.add(r),!tb.has(t)){const e=()=>(n?.forEach((e=>e.advance())),!0);tb.set(t,e);const r=ib(t);window.addEventListener("resize",e,{passive:!0}),t!==document.documentElement&&nb.set(t,Zx(e,{container:t})),r.addEventListener("scroll",e,{passive:!0})}const i=tb.get(t);return iA(i),()=>{iA.cancel(i);const e=rb.get(t);if(!e)return;if(e.delete(r),e.size)return;const n=tb.get(t);tb.delete(t),n&&(ib(t).removeEventListener("scroll",n),window.removeEventListener("resize",n),nb.get(t)?.())}}((e=>{let{x:t,y:n}=e;r.start({scrollX:t.current,scrollXProgress:t.progress,scrollY:n.current,scrollYProgress:n.progress})}),{container:e?.current||void 0});return()=>{CA(Object.values(n),(e=>e.stop())),t()}}),[]),n},V_=e=>{let{container:t,...n}=e;const[r,i]=F_((()=>({width:0,height:0,...n})),[]);return ob((()=>{const e=Zx((e=>{let{width:t,height:n}=e;i.start({width:t,height:n,immediate:0===r.width.get()||0===r.height.get()})}),{container:t?.current||void 0});return()=>{CA(Object.values(r),(e=>e.stop())),e()}}),[]),r},W_={any:0,all:1};function q_(e,t){const[n,r]=(0,l.useState)(!1),i=(0,l.useRef)(),o=EA.fun(e)&&e,a=o?o():{},{to:s={},from:c={},...u}=a,h=o?t:e,[d,f]=F_((()=>({from:c,...u})),[]);return ob((()=>{const e=i.current,{root:t,once:o,amount:a="any",...l}=h??{};if(!e||o&&n||"undefined"===typeof IntersectionObserver)return;const u=new WeakMap,d=new IntersectionObserver((e=>{e.forEach((e=>{const t=u.get(e.target);if(e.isIntersecting!==Boolean(t))if(e.isIntersecting){const t=(s&&f.start(s),r(!0),o?void 0:()=>{c&&f.start(c),r(!1)});EA.fun(t)?u.set(e.target,t):d.unobserve(e.target)}else t&&(t(),u.delete(e.target))}))}),{root:t&&t.current||void 0,threshold:"number"===typeof a||Array.isArray(a)?a:W_[a],...l});return d.observe(e),()=>d.unobserve(e)}),[h]),o?[i,d]:[i,n]}function X_(e){let{children:t,...n}=e;return t(F_(n))}function Y_(e){let{items:t,children:n,...r}=e;const i=j_(t.length,r);return t.map(((e,t)=>{const r=n(e,t);return EA.fun(r)?r(i[t]):r}))}function J_(e){let{items:t,children:n,...r}=e;return G_(t,r)(n)}var K_=class extends s_{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=hx(...t);const n=this._get(),r=wb(n);pb(this,r.create(n))}advance(e){const t=this._get();SA(t,this.get())||(fb(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&$_(this._active)&&ew(this)}_get(){const e=EA.arr(this.source)?this.source.map(_x):TA(_x(this.source));return this.calc(...e)}_start(){this.idle&&!$_(this._active)&&(this.idle=!1,CA(mb(this),(e=>{e.done=!1})),_A.skipAnimation?(iA.batchedUpdates((()=>this.advance())),ew(this)):GA.start(this))}_attach(){let e=1;CA(TA(this.source),(t=>{bx(t)&&Mx(t,this),o_(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){CA(TA(this.source),(e=>{bx(e)&&Tx(e,this)})),this._active.clear(),ew(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=TA(this.source).reduce(((e,t)=>Math.max(e,(o_(t)?t.priority:0)+1)),0))}};function Z_(e){return!1!==e.idle}function $_(e){return!e.size||Array.from(e).every(Z_)}function ew(e){e.idle||(e.idle=!0,CA(mb(e),(e=>{e.done=!0})),Ex(e,{type:"idle",parent:e}))}var tw=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new K_(e,n)},nw=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Qx(),new K_(e,n)};_A.assign({createStringInterpolator:Ux,to:(e,t)=>new K_(e,t)});var rw=GA.advance,iw=["primitive"].concat(Object.keys(e).filter((e=>/^[A-Z]/.test(e))).map((e=>e[0].toLowerCase()+e.slice(1))));_A.assign({createStringInterpolator:Ux,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},frameLoop:"demand"}),$v((()=>{iA.advance()}));var ow=function(e){let{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=e=>new xb(e),getComponentProps:r=e=>e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=e=>{const t=Mb(e)||"Anonymous";return(e=EA.str(e)?o[e]||(o[e]=Eb(e,i)):e[Cb]||(e[Cb]=Eb(e,i))).displayName=`Animated(${t})`,e};return MA(e,((t,n)=>{EA.arr(e)&&(n=Mb(t)),o[n]=o(t)})),{animated:o}}(iw,{applyAnimatedValues:Ay}),aw=ow.animated,sw=Object.create,lw=Object.defineProperty,cw=Object.defineProperties,uw=Object.getOwnPropertyDescriptor,hw=Object.getOwnPropertyDescriptors,dw=Object.getOwnPropertyNames,fw=Object.getOwnPropertySymbols,pw=Object.getPrototypeOf,mw=Object.prototype.hasOwnProperty,gw=Object.prototype.propertyIsEnumerable,vw=(e,t,n)=>t in e?lw(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yw=(e,t)=>{for(var n in t||(t={}))mw.call(t,n)&&vw(e,n,t[n]);if(fw)for(var n of fw(t))gw.call(t,n)&&vw(e,n,t[n]);return e},Aw=(e,t)=>cw(e,hw(t)),xw=(e,t)=>{var n={};for(var r in e)mw.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&fw)for(var r of fw(e))t.indexOf(r)<0&&gw.call(e,r)&&(n[r]=e[r]);return n},bw=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),_w=(e,t)=>{for(var n in t)lw(e,n,{get:t[n],enumerable:!0})},ww=(e,t,n)=>new Promise(((r,i)=>{var o=e=>{try{s(n.next(e))}catch(XQ){i(XQ)}},a=e=>{try{s(n.throw(e))}catch(XQ){i(XQ)}},s=e=>e.done?r(e.value):Promise.resolve(e.value).then(o,a);s((n=n.apply(e,t)).next())})),Ew=bw(((e,t)=>{t.exports=e=>encodeURIComponent(e).replace(/[!'()*]/g,(e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`))})),Sw=bw(((e,t)=>{var n="%[a-f0-9]{2}",r=new RegExp("("+n+")|([^%]+?)","gi"),i=new RegExp("("+n+")+","gi");function o(e,t){try{return[decodeURIComponent(e.join(""))]}catch(Yv){}if(1===e.length)return e;t=t||1;var n=e.slice(0,t),r=e.slice(t);return Array.prototype.concat.call([],o(n),o(r))}function a(e){try{return decodeURIComponent(e)}catch(HQ){for(var t=e.match(r)||[],n=1;n<t.length;n++)t=(e=o(t,n).join("")).match(r)||[];return e}}t.exports=function(e){if("string"!=typeof e)throw new TypeError("Expected `encodedURI` to be of type `string`, got `"+typeof e+"`");try{return e=e.replace(/\+/g," "),decodeURIComponent(e)}catch(NQ){return function(e){for(var t={"%FE%FF":"\ufffd\ufffd","%FF%FE":"\ufffd\ufffd"},n=i.exec(e);n;){try{t[n[0]]=decodeURIComponent(n[0])}catch(YQ){var r=a(n[0]);r!==n[0]&&(t[n[0]]=r)}n=i.exec(e)}t["%C2"]="\ufffd";for(var o=Object.keys(t),s=0;s<o.length;s++){var l=o[s];e=e.replace(new RegExp(l,"g"),t[l])}return e}(e)}}})),Cw=bw(((e,t)=>{t.exports=(e,t)=>{if("string"!=typeof e||"string"!=typeof t)throw new TypeError("Expected the arguments to be of type `string`");if(""===t)return[e];let n=e.indexOf(t);return-1===n?[e]:[e.slice(0,n),e.slice(n+t.length)]}})),Mw=bw(((e,t)=>{t.exports=function(e,t){for(var n={},r=Object.keys(e),i=Array.isArray(t),o=0;o<r.length;o++){var a=r[o],s=e[a];(i?-1!==t.indexOf(a):t(a,s,e))&&(n[a]=s)}return n}})),Tw=bw((e=>{var t=Ew(),n=Sw(),r=Cw(),i=Mw(),o=Symbol("encodeFragmentIdentifier");function a(e){if("string"!=typeof e||1!==e.length)throw new TypeError("arrayFormatSeparator must be single character string")}function s(e,n){return n.encode?n.strict?t(e):encodeURIComponent(e):e}function l(e,t){return t.decode?n(e):e}function c(e){return Array.isArray(e)?e.sort():"object"==typeof e?c(Object.keys(e)).sort(((e,t)=>Number(e)-Number(t))).map((t=>e[t])):e}function u(e){let t=e.indexOf("#");return-1!==t&&(e=e.slice(0,t)),e}function h(e){let t=(e=u(e)).indexOf("?");return-1===t?"":e.slice(t+1)}function d(e,t){return t.parseNumbers&&!Number.isNaN(Number(e))&&"string"==typeof e&&""!==e.trim()?e=Number(e):t.parseBooleans&&null!==e&&("true"===e.toLowerCase()||"false"===e.toLowerCase())&&(e="true"===e.toLowerCase()),e}function f(e,t){a((t=Object.assign({decode:!0,sort:!0,arrayFormat:"none",arrayFormatSeparator:",",parseNumbers:!1,parseBooleans:!1},t)).arrayFormatSeparator);let n=function(e){let t;switch(e.arrayFormat){case"index":return(e,n,r)=>{t=/\[(\d*)\]$/.exec(e),e=e.replace(/\[\d*\]$/,""),t?(void 0===r[e]&&(r[e]={}),r[e][t[1]]=n):r[e]=n};case"bracket":return(e,n,r)=>{t=/(\[\])$/.exec(e),e=e.replace(/\[\]$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"colon-list-separator":return(e,n,r)=>{t=/(:list)$/.exec(e),e=e.replace(/:list$/,""),t?void 0!==r[e]?r[e]=[].concat(r[e],n):r[e]=[n]:r[e]=n};case"comma":case"separator":return(t,n,r)=>{let i="string"==typeof n&&n.includes(e.arrayFormatSeparator),o="string"==typeof n&&!i&&l(n,e).includes(e.arrayFormatSeparator);n=o?l(n,e):n;let a=i||o?n.split(e.arrayFormatSeparator).map((t=>l(t,e))):null===n?n:l(n,e);r[t]=a};case"bracket-separator":return(t,n,r)=>{let i=/(\[\])$/.test(t);if(t=t.replace(/\[\]$/,""),!i)return void(r[t]=n&&l(n,e));let o=null===n?[]:n.split(e.arrayFormatSeparator).map((t=>l(t,e)));void 0!==r[t]?r[t]=[].concat(r[t],o):r[t]=o};default:return(e,t,n)=>{void 0!==n[e]?n[e]=[].concat(n[e],t):n[e]=t}}}(t),i=Object.create(null);if("string"!=typeof e||!(e=e.trim().replace(/^[?#&]/,"")))return i;for(let o of e.split("&")){if(""===o)continue;let[e,a]=r(t.decode?o.replace(/\+/g," "):o,"=");a=void 0===a?null:["comma","separator","bracket-separator"].includes(t.arrayFormat)?a:l(a,t),n(l(e,t),a,i)}for(let r of Object.keys(i)){let e=i[r];if("object"==typeof e&&null!==e)for(let n of Object.keys(e))e[n]=d(e[n],t);else i[r]=d(e,t)}return!1===t.sort?i:(!0===t.sort?Object.keys(i).sort():Object.keys(i).sort(t.sort)).reduce(((e,t)=>{let n=i[t];return n&&"object"==typeof n&&!Array.isArray(n)?e[t]=c(n):e[t]=n,e}),Object.create(null))}e.extract=h,e.parse=f,e.stringify=(e,t)=>{if(!e)return"";a((t=Object.assign({encode:!0,strict:!0,arrayFormat:"none",arrayFormatSeparator:","},t)).arrayFormatSeparator);let n=n=>t.skipNull&&(e=>null==e)(e[n])||t.skipEmptyString&&""===e[n],r=function(e){switch(e.arrayFormat){case"index":return t=>(n,r)=>{let i=n.length;return void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[",i,"]"].join("")]:[...n,[s(t,e),"[",s(i,e),"]=",s(r,e)].join("")]};case"bracket":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),"[]"].join("")]:[...n,[s(t,e),"[]=",s(r,e)].join("")];case"colon-list-separator":return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,[s(t,e),":list="].join("")]:[...n,[s(t,e),":list=",s(r,e)].join("")];case"comma":case"separator":case"bracket-separator":{let t="bracket-separator"===e.arrayFormat?"[]=":"=";return n=>(r,i)=>void 0===i||e.skipNull&&null===i||e.skipEmptyString&&""===i?r:(i=null===i?"":i,0===r.length?[[s(n,e),t,s(i,e)].join("")]:[[r,s(i,e)].join(e.arrayFormatSeparator)])}default:return t=>(n,r)=>void 0===r||e.skipNull&&null===r||e.skipEmptyString&&""===r?n:null===r?[...n,s(t,e)]:[...n,[s(t,e),"=",s(r,e)].join("")]}}(t),i={};for(let a of Object.keys(e))n(a)||(i[a]=e[a]);let o=Object.keys(i);return!1!==t.sort&&o.sort(t.sort),o.map((n=>{let i=e[n];return void 0===i?"":null===i?s(n,t):Array.isArray(i)?0===i.length&&"bracket-separator"===t.arrayFormat?s(n,t)+"[]":i.reduce(r(n),[]).join("&"):s(n,t)+"="+s(i,t)})).filter((e=>e.length>0)).join("&")},e.parseUrl=(e,t)=>{t=Object.assign({decode:!0},t);let[n,i]=r(e,"#");return Object.assign({url:n.split("?")[0]||"",query:f(h(e),t)},t&&t.parseFragmentIdentifier&&i?{fragmentIdentifier:l(i,t)}:{})},e.stringifyUrl=(t,n)=>{n=Object.assign({encode:!0,strict:!0,[o]:!0},n);let r=u(t.url).split("?")[0]||"",i=e.extract(t.url),a=e.parse(i,{sort:!1}),l=Object.assign(a,t.query),c=e.stringify(l,n);c&&(c=`?${c}`);let h=function(e){let t="",n=e.indexOf("#");return-1!==n&&(t=e.slice(n)),t}(t.url);return t.fragmentIdentifier&&(h=`#${n[o]?s(t.fragmentIdentifier,n):t.fragmentIdentifier}`),`${r}${c}${h}`},e.pick=(t,n,r)=>{r=Object.assign({parseFragmentIdentifier:!0,[o]:!1},r);let{url:a,query:s,fragmentIdentifier:l}=e.parseUrl(t,r);return e.stringifyUrl({url:a,query:i(s,n),fragmentIdentifier:l},r)},e.exclude=(t,n,r)=>{let i=Array.isArray(n)?e=>!n.includes(e):(e,t)=>!n(e,t);return e.pick(t,i,r)}})),Iw=(e,t)=>({dpr:e,camera:{fov:t},linear:!0,flat:!0,gl:{preserveDrawingBuffer:!0}}),Bw=1,Pw=14,Rw={zoom:1,distance:14},Dw={zoom:5,distance:14},Ow="https://ruucm.github.io/shadergradient/shadergradient@1.0.0/hdr/";function kw(e){let{title:t="",color1:n="#ff7e5f",color2:r="#feb47b"}=e;return(0,ov.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",background:`linear-gradient(to right, ${n}, ${r})`,color:"white",fontSize:"20px",textAlign:"center",padding:"20px",fontFamily:"Inter",fontWeight:"500"},children:(0,ov.jsx)("p",{children:t})})}function Lw(e){var t=e,{children:n,pointerEvents:r="none",pixelDensity:i=1,fov:o=45}=t,a=xw(t,["children","pointerEvents","pixelDensity","fov"]);let[s,c]=function(){let[e,t]=(0,l.useState)(-1);return[e,e=>{let n=e.gl.domElement,r=e=>{e.preventDefault(),t(1),console.log("[Context Lost]")},i=e=>{t(0),console.log("[Context Restored]")},o=e=>{t(2),console.log("[Context Error]")};return n.addEventListener("webglcontextlost",r),n.addEventListener("webglcontextrestored",i),n.addEventListener("webglcontextcreationerror",o),()=>{n.removeEventListener("webglcontextlost",r),n.removeEventListener("webglcontextrestored",i),n.removeEventListener("webglcontextcreationerror",o)}}]}();return 1===s?(0,ov.jsx)(kw,{title:"The graphics context has been lost. Please wait while we try to restore it..."}):(0,ov.jsx)(ov.Fragment,{children:(0,ov.jsx)(nA,Aw(yw(Aw(yw({id:"gradientCanvas",resize:{offsetSize:!0}},Iw(i,o)),{style:{pointerEvents:r},onCreated:c}),a),{children:n}),i+o)})}var Fw=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},zw=new pl(-1,1,1,-1,0,1),Uw=new hs;Uw.setAttribute("position",new rs([-1,3,0,-1,-1,0,3,-1,0],3)),Uw.setAttribute("uv",new rs([0,2,0,0,2,0],2));var Nw=class{constructor(e){this._mesh=new Is(Uw,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,zw)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},jw=class extends Fw{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){let r,i,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(r=0,i=1):(r=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}},Gw=class extends Fw{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}},Qw=class extends Fw{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof Ls?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=ks.clone(e.uniforms),this.material=new Ls({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Nw(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}},Hw={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\t\t}"},Vw=class{constructor(e,t){if(this.renderer=e,void 0===t){let n={minFilter:an,magFilter:an,format:Sn},r=e.getSize(new zi);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,(t=new uo(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===Hw&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===Qw&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new Qw(Hw),this.clock=new Cm}swapBuffers(){let e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){let t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());let t=this.renderer.getRenderTarget(),n=!1;for(let r=0,i=this.passes.length;r<i;r++){let t=this.passes[r];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){let t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==jw&&(t instanceof jw?n=!0:t instanceof Gw&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){let t=this.renderer.getSize(new zi);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;let n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}},Ww=(new pl(-1,1,1,-1,0,1),new hs);Ww.setAttribute("position",new rs([-1,3,0,-1,-1,0,3,-1,0],3)),Ww.setAttribute("uv",new rs([0,2,0,0,2,0],2));var qw=class extends Fw{constructor(e,t,n,r,i){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=void 0!==i?i:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new La}render(e,t,n){let r,i,o=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(i=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=i),e.autoClear=o}},Xw=16,Yw=new Map([[0,null],[1,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x+y,1.0)*opacity+x*(1.0-opacity);}"],[2,"vec3 blend(const in vec3 x,const in vec3 y,const in float opacity){return y*opacity+x*(1.0-opacity);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){float a=min(y.a,opacity);return vec4(blend(x.rgb,y.rgb,a),max(x.a,a));}"],[3,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y)*0.5*opacity+x*(1.0-opacity);}"],[4,"float blend(const in float x,const in float y){return(y==0.0)?y:max(1.0-(1.0-x)/y,0.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[5,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[6,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return min(x,y)*opacity+x*(1.0-opacity);}"],[7,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return abs(x-y)*opacity+x*(1.0-opacity);}"],[8,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(x+y-2.0*x*y)*opacity+x*(1.0-opacity);}"],[9,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x,y)*opacity+x*(1.0-opacity);}"],[10,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return x*y*opacity+x*(1.0-opacity);}"],[11,"float blend(const in float x,const in float y){return(y>0.0)?min(x/y,1.0):1.0;}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[12,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-abs(1.0-x-y))*opacity+x*(1.0-opacity);}"],[13,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y*opacity+x*(1.0-opacity);}"],[14,"float blend(const in float x,const in float y){return(x<0.5)?(2.0*x*y):(1.0-2.0*(1.0-x)*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[15,"float blend(const in float x,const in float y){return(y==1.0)?y:min(x*x/(1.0-y),1.0);}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[Xw,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return(1.0-(1.0-x)*(1.0-y))*opacity+x*(1.0-opacity);}"],[17,"float blend(const in float x,const in float y){return(y<0.5)?(2.0*x*y+x*x*(1.0-2.0*y)):(sqrt(x)*(2.0*y-1.0)+2.0*x*(1.0-y));}vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=vec4(blend(x.r,y.r),blend(x.g,y.g),blend(x.b,y.b),blend(x.a,y.a));return z*opacity+x*(1.0-opacity);}"],[18,"vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return max(x+y-1.0,0.0)*opacity+x*(1.0-opacity);}"]]),Jw=class extends Ci{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;super(),this.blendFunction=e,this.opacity=new Zm(t)}getBlendFunction(){return this.blendFunction}setBlendFunction(e){this.blendFunction=e,this.dispatchEvent({type:"change"})}getShaderCode(){return Yw.get(this.blendFunction)}},Kw={uniforms:{tDiffuse:{value:null},shape:{value:1},radius:{value:2},rotateR:{value:Math.PI/12*1},rotateG:{value:Math.PI/12*2},rotateB:{value:Math.PI/12*3},scatter:{value:1},width:{value:20},height:{value:20},blending:{value:1},blendingMode:{value:1},greyscale:{value:!1},disable:{value:!1}},vertexShader:"\n\n\t\tvarying vec2 vUV;\n\t\tvarying vec3 vPosition;\n\n\t\tvoid main() {\n\n\t\t\tvUV = uv;\n\t\t\tvPosition = position;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\n\t\t}",fragmentShader:"\n\n\t\t#define SQRT2_MINUS_ONE 0.41421356\n\t\t#define SQRT2_HALF_MINUS_ONE 0.20710678\n\t\t#define PI2 6.28318531\n\t\t#define SHAPE_DOT 1\n\t\t#define SHAPE_ELLIPSE 2\n\t\t#define SHAPE_LINE 3\n\t\t#define SHAPE_SQUARE 4\n\t\t#define BLENDING_LINEAR 1\n\t\t#define BLENDING_MULTIPLY 2\n\t\t#define BLENDING_ADD 3\n\t\t#define BLENDING_LIGHTER 4\n\t\t#define BLENDING_DARKER 5\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform float radius;\n\t\tuniform float rotateR;\n\t\tuniform float rotateG;\n\t\tuniform float rotateB;\n\t\tuniform float scatter;\n\t\tuniform float width;\n\t\tuniform float height;\n\t\tuniform int shape;\n\t\tuniform bool disable;\n\t\tuniform float blending;\n\t\tuniform int blendingMode;\n\t\tvarying vec2 vUV;\n\t\tvarying vec3 vPosition;\n\t\tuniform bool greyscale;\n\t\tconst int samples = 8;\n\n\t\tfloat blend( float a, float b, float t ) {\n\n\t\t// linear blend\n\t\t\treturn a * ( 1.0 - t ) + b * t;\n\n\t\t}\n\n\t\tfloat hypot( float x, float y ) {\n\n\t\t// vector magnitude\n\t\t\treturn sqrt( x * x + y * y );\n\n\t\t}\n\n\t\tfloat rand( vec2 seed ){\n\n\t\t// get pseudo-random number\n\t\t\treturn fract( sin( dot( seed.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );\n\n\t\t}\n\n\t\tfloat distanceToDotRadius( float channel, vec2 coord, vec2 normal, vec2 p, float angle, float rad_max ) {\n\n\t\t// apply shape-specific transforms\n\t\t\tfloat dist = hypot( coord.x - p.x, coord.y - p.y );\n\t\t\tfloat rad = channel;\n\n\t\t\tif ( shape == SHAPE_DOT ) {\n\n\t\t\t\trad = pow( abs( rad ), 1.125 ) * rad_max;\n\n\t\t\t} else if ( shape == SHAPE_ELLIPSE ) {\n\n\t\t\t\trad = pow( abs( rad ), 1.125 ) * rad_max;\n\n\t\t\t\tif ( dist != 0.0 ) {\n\t\t\t\t\tfloat dot_p = abs( ( p.x - coord.x ) / dist * normal.x + ( p.y - coord.y ) / dist * normal.y );\n\t\t\t\t\tdist = ( dist * ( 1.0 - SQRT2_HALF_MINUS_ONE ) ) + dot_p * dist * SQRT2_MINUS_ONE;\n\t\t\t\t}\n\n\t\t\t} else if ( shape == SHAPE_LINE ) {\n\n\t\t\t\trad = pow( abs( rad ), 1.5) * rad_max;\n\t\t\t\tfloat dot_p = ( p.x - coord.x ) * normal.x + ( p.y - coord.y ) * normal.y;\n\t\t\t\tdist = hypot( normal.x * dot_p, normal.y * dot_p );\n\n\t\t\t} else if ( shape == SHAPE_SQUARE ) {\n\n\t\t\t\tfloat theta = atan( p.y - coord.y, p.x - coord.x ) - angle;\n\t\t\t\tfloat sin_t = abs( sin( theta ) );\n\t\t\t\tfloat cos_t = abs( cos( theta ) );\n\t\t\t\trad = pow( abs( rad ), 1.4 );\n\t\t\t\trad = rad_max * ( rad + ( ( sin_t > cos_t ) ? rad - sin_t * rad : rad - cos_t * rad ) );\n\n\t\t\t}\n\n\t\t\treturn rad - dist;\n\n\t\t}\n\n\t\tstruct Cell {\n\n\t\t// grid sample positions\n\t\t\tvec2 normal;\n\t\t\tvec2 p1;\n\t\t\tvec2 p2;\n\t\t\tvec2 p3;\n\t\t\tvec2 p4;\n\t\t\tfloat samp2;\n\t\t\tfloat samp1;\n\t\t\tfloat samp3;\n\t\t\tfloat samp4;\n\n\t\t};\n\n\t\tvec4 getSample( vec2 point ) {\n\n\t\t// multi-sampled point\n\t\t\tvec4 tex = texture2D( tDiffuse, vec2( point.x / width, point.y / height ) );\n\t\t\tfloat base = rand( vec2( floor( point.x ), floor( point.y ) ) ) * PI2;\n\t\t\tfloat step = PI2 / float( samples );\n\t\t\t// float dist = radius * 0.66;\n\t\t\tfloat dist = radius * 0.0;\n\n\t\t\tfor ( int i = 0; i < samples; ++i ) {\n\n\t\t\t\tfloat r = base + step * float( i );\n\t\t\t\tvec2 coord = point + vec2( cos( r ) * dist, sin( r ) * dist );\n\t\t\t\ttex += texture2D( tDiffuse, vec2( coord.x / width, coord.y / height ) );\n\n\t\t\t}\n\n\t\t\ttex /= float( samples ) + 1.0;\n\t\t\treturn tex;\n\n\t\t}\n\n\t\tfloat getDotColour( Cell c, vec2 p, int channel, float angle, float aa ) {\n\n\t\t// get colour for given point\n\t\t\tfloat dist_c_1, dist_c_2, dist_c_3, dist_c_4, res;\n\n\t\t\tif ( channel == 0 ) {\n\n\t\t\t\tc.samp1 = getSample( c.p1 ).r;\n\t\t\t\tc.samp2 = getSample( c.p2 ).r;\n\t\t\t\tc.samp3 = getSample( c.p3 ).r;\n\t\t\t\tc.samp4 = getSample( c.p4 ).r;\n\n\t\t\t} else if (channel == 1) {\n\n\t\t\t\tc.samp1 = getSample( c.p1 ).g;\n\t\t\t\tc.samp2 = getSample( c.p2 ).g;\n\t\t\t\tc.samp3 = getSample( c.p3 ).g;\n\t\t\t\tc.samp4 = getSample( c.p4 ).g;\n\n\t\t\t} else {\n\n\t\t\t\tc.samp1 = getSample( c.p1 ).b;\n\t\t\t\tc.samp3 = getSample( c.p3 ).b;\n\t\t\t\tc.samp2 = getSample( c.p2 ).b;\n\t\t\t\tc.samp4 = getSample( c.p4 ).b;\n\n\t\t\t}\n\n\t\t\tdist_c_1 = distanceToDotRadius( c.samp1, c.p1, c.normal, p, angle, radius );\n\t\t\tdist_c_2 = distanceToDotRadius( c.samp2, c.p2, c.normal, p, angle, radius );\n\t\t\tdist_c_3 = distanceToDotRadius( c.samp3, c.p3, c.normal, p, angle, radius );\n\t\t\tdist_c_4 = distanceToDotRadius( c.samp4, c.p4, c.normal, p, angle, radius );\n\t\t\tres = ( dist_c_1 > 0.0 ) ? clamp( dist_c_1 / aa, 0.0, 1.0 ) : 0.0;\n\t\t\t// res = 0.0;\n\t\t\tres += ( dist_c_2 > 0.0 ) ? clamp( dist_c_2 / aa, 0.0, 1.0 ) : 0.0;\n\t\t\tres += ( dist_c_3 > 0.0 ) ? clamp( dist_c_3 / aa, 0.0, 1.0 ) : 0.0;\n\t\t\tres += ( dist_c_4 > 0.0 ) ? clamp( dist_c_4 / aa, 0.0, 1.0 ) : 0.0;\n\t\t\tres = clamp( res, 0.0, 1.0 );\n\n\t\t\treturn res;\n\t\t\t// return 2\n\n\t\t}\n\n\t\tCell getReferenceCell( vec2 p, vec2 origin, float grid_angle, float step ) {\n\n\t\t// get containing cell\n\t\t\tCell c;\n\n\t\t// calc grid\n\t\t\tvec2 n = vec2( cos( grid_angle ), sin( grid_angle ) );\n\t\t\tfloat threshold = step * 0.5;\n\t\t\tfloat dot_normal = n.x * ( p.x - origin.x ) + n.y * ( p.y - origin.y );\n\t\t\tfloat dot_line = -n.y * ( p.x - origin.x ) + n.x * ( p.y - origin.y );\n\t\t\tvec2 offset = vec2( n.x * dot_normal, n.y * dot_normal );\n\t\t\tfloat offset_normal = mod( hypot( offset.x, offset.y ), step );\n\t\t\tfloat normal_dir = ( dot_normal < 0.0 ) ? 1.0 : -1.0;\n\t\t\tfloat normal_scale = ( ( offset_normal < threshold ) ? -offset_normal : step - offset_normal ) * normal_dir;\n\t\t\tfloat offset_line = mod( hypot( ( p.x - offset.x ) - origin.x, ( p.y - offset.y ) - origin.y ), step );\n\t\t\tfloat line_dir = ( dot_line < 0.0 ) ? 1.0 : -1.0;\n\t\t\tfloat line_scale = ( ( offset_line < threshold ) ? -offset_line : step - offset_line ) * line_dir;\n\n\t\t// get closest corner\n\t\t\tc.normal = n;\n\t\t\tc.p1.x = p.x - n.x * normal_scale + n.y * line_scale;\n\t\t\tc.p1.y = p.y - n.y * normal_scale - n.x * line_scale;\n\n\t\t// scatter\n\t\t\tif ( scatter != 0.0 ) {\n\n\t\t\t\tfloat off_mag = scatter * threshold * 0.5;\n\t\t\t\tfloat off_angle = rand( vec2( floor( c.p1.x ), floor( c.p1.y ) ) ) * PI2;\n\t\t\t\tc.p1.x += cos( off_angle ) * off_mag;\n\t\t\t\tc.p1.y += sin( off_angle ) * off_mag;\n\n\t\t\t}\n\n\t\t// find corners\n\t\t\tfloat normal_step = normal_dir * ( ( offset_normal < threshold ) ? step : -step );\n\t\t\tfloat line_step = line_dir * ( ( offset_line < threshold ) ? step : -step );\n\t\t\tc.p2.x = c.p1.x - n.x * normal_step;\n\t\t\tc.p2.y = c.p1.y - n.y * normal_step;\n\t\t\tc.p3.x = c.p1.x + n.y * line_step;\n\t\t\tc.p3.y = c.p1.y - n.x * line_step;\n\t\t\tc.p4.x = c.p1.x - n.x * normal_step + n.y * line_step;\n\t\t\tc.p4.y = c.p1.y - n.y * normal_step - n.x * line_step;\n\n\t\t\treturn c;\n\n\t\t}\n\n\t\tfloat blendColour( float a, float b, float t ) {\n\n\t\t// blend colours\n\t\t\tif ( blendingMode == BLENDING_LINEAR ) {\n\t\t\t\treturn blend( a, b, 1.0 - t );\n\t\t\t} else if ( blendingMode == BLENDING_ADD ) {\n\t\t\t\treturn blend( a, min( 1.0, a + b ), t );\n\t\t\t} else if ( blendingMode == BLENDING_MULTIPLY ) {\n\t\t\t\treturn blend( a, max( 0.0, a * b ), t );\n\t\t\t} else if ( blendingMode == BLENDING_LIGHTER ) {\n\t\t\t\treturn blend( a, max( a, b ), t );\n\t\t\t} else if ( blendingMode == BLENDING_DARKER ) {\n\t\t\t\treturn blend( a, min( a, b ), t );\n\t\t\t} else {\n\t\t\t\treturn blend( a, b, 1.0 - t );\n\t\t\t}\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tif ( ! disable ) {\n\n\t\t// setup\n\t\t\t\tvec2 p = vec2( vUV.x * width, vUV.y * height ) - vec2(vPosition.x, vPosition.y) * 3.0; // - position values to remove black borders.\n\t\t\t\tvec2 origin = vec2( 0, 0 );\n\t\t\t\tfloat aa = ( radius < 2.5 ) ? radius * 0.5 : 1.25;\n\t\t\t\t// float aa = 0.0;\n\n\t\t// get channel samples\n\t\t\t\tCell cell_r = getReferenceCell( p, origin, rotateR, radius );\n\t\t\t\tCell cell_g = getReferenceCell( p, origin, rotateG, radius );\n\t\t\t\tCell cell_b = getReferenceCell( p, origin, rotateB, radius );\n\t\t\t\tfloat r = getDotColour( cell_r, p, 0, rotateR, aa );\n\t\t\t\tfloat g = getDotColour( cell_g, p, 1, rotateG, aa );\n\t\t\t\tfloat b = getDotColour( cell_b, p, 2, rotateB, aa );\n\n\t\t// blend with original\n\t\t\t\tvec4 colour = texture2D( tDiffuse, vUV );\n\t\t\t\t\n\t\t\t\t// add masking before blendColour\n\t\t\t\tif (colour.r == 0.0) {\n\t\t\t\t\tr = 0.0;\n\t\t\t\t} else {\n\t\t\t\t\tr = blendColour( r, colour.r, blending );\n\t\t\t\t}\n\n\t\t\t\tif (colour.g == 0.0) {\n\t\t\t\t\tg = 0.0;\n\t\t\t\t} else {\n\t\t\t\t\tg = blendColour( g, colour.g, blending );\n\t\t\t\t}\n\n\t\t\t\tif (colour.b == 0.0) {\n\t\t\t\t\tb = 0.0;\n\t\t\t\t} else {\n\t\t\t\t\tb = blendColour( b, colour.b, blending );\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\n\t\t\t\tif ( greyscale ) {\n\t\t\t\t\tr = g = b = (r + b + g) / 3.0;\n\t\t\t\t}\n\n\t\t\t\t// add alpha channel to each r, g, b colors\n\t\t\t\tvec4 vR;\n\t\t\t\tvec4 vG;\n\t\t\t\tvec4 vB;\n\t\n\t\t\t\t// apply transparent to outside of mesh\n\t\t\t\tif (r == 0.0 && colour.r == 0.0) {\n\t\t\t\t\tvR = vec4( 0, 0, 0, 0 );\n\t\t\t\t} else {\n\t\t\t\t\tvR = vec4( r, 0, 0, 1 );\n\t\t\t\t}\n\t\n\t\t\t\tif (g == 0.0 && colour.g == 0.0) {\n\t\t\t\t\tvG = vec4( 0, 0, 0, 0 );\n\t\t\t\t} else {\n\t\t\t\t\tvG = vec4( 0, g, 0, 1 );\n\t\t\t\t}\n\t\n\t\t\t\tif (b == 0.0 && colour.b == 0.0) {\n\t\t\t\t\tvB = vec4( 0, 0, 0, 0 );\n\t\t\t\t} else {\n\t\t\t\t\tvB = vec4( 0, 0, b, 1 );\n\t\t\t\t}\n\n\t\t\t\t// gl_FragColor = vec4( r, g, b, 1.0 );\n\t\t\t\tgl_FragColor = vR + vG + vB;\n\n\t\t\t} else {\n\n\t\t\t\tgl_FragColor = texture2D( tDiffuse, vUV );\n\n\t\t\t}\n\n\t\t}"},Zw=class{constructor(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}},$w=new pl(-1,1,1,-1,0,1),eE=new hs;eE.setAttribute("position",new rs([-1,3,0,-1,-1,0,3,-1,0],3)),eE.setAttribute("uv",new rs([0,2,0,0,2,0],2));var tE=class{constructor(e){this._mesh=new Is(eE,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,$w)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}},nE=class extends Zw{constructor(e,t,n){super(),void 0===Kw&&console.error("THREE.HalftonePass requires HalftoneShader"),this.uniforms=ks.clone(Kw.uniforms),this.material=new Ls({uniforms:this.uniforms,fragmentShader:Kw.fragmentShader,vertexShader:Kw.vertexShader}),this.uniforms.width.value=e,this.uniforms.height.value=t,this.uniforms.disable.value=n.disable,this.uniforms.blending.value=n.blending,this.fsQuad=new tE(this.material),this.blendMode=new Jw(Xw),this.extensions=null}render(e,t,n){this.material.uniforms.tDiffuse.value=n.texture,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}setSize(e,t){this.uniforms.width.value=e,this.uniforms.height.value=t}initialize(e,t,n){}addEventListener(){}getAttributes(){return this.attributes}getFragmentShader(){return Kw.fragmentShader}getVertexShader(){return Kw.vertexShader}update(e,t,n){}};var rE=function(e){return function(t){e.forEach((function(e){"function"==typeof e?e(t):null!=e&&(e.current=t)}))}};var iE=l.forwardRef(((e,t)=>{var n=e,{envMap:r,resolution:i=256,frames:o=1/0,children:a,makeDefault:s}=n,c=xw(n,["envMap","resolution","frames","children","makeDefault"]);let u=cy((e=>{let{set:t}=e;return t})),h=cy((e=>{let{camera:t}=e;return t})),d=cy((e=>{let{size:t}=e;return t})),f=l.useRef(null),p=l.useRef(null),m=function(e,t,n){let{gl:r,size:i,viewport:o}=cy(),a="number"==typeof e?e:i.width*o.dpr,s="number"==typeof t?t:i.height*o.dpr,c=("number"==typeof e?n:e)||{},{samples:u}=c,h=xw(c,["samples"]),d=l.useMemo((()=>{let e;return e=new uo(a,s,yw({minFilter:an,magFilter:an,encoding:r.outputEncoding,type:yn},h)),e.samples=u,e}),[]);return l.useLayoutEffect((()=>{d.setSize(a,s),u&&(d.samples=u)}),[u,d,a,s]),l.useEffect((()=>()=>d.dispose()),[]),d}(i);l.useLayoutEffect((()=>{c.manual||f.current.updateProjectionMatrix()}),[d,c]),l.useLayoutEffect((()=>{f.current.updateProjectionMatrix()})),l.useLayoutEffect((()=>{if(s){let e=h;return u((()=>({camera:f.current}))),()=>u((()=>({camera:e})))}}),[f,s,u]);let g=0,v=null,y=(e=>"function"==typeof e)(a);return uy((e=>{y&&(o===1/0||g<o)&&(p.current.visible=!1,e.gl.setRenderTarget(m),v=e.scene.background,r&&(e.scene.background=r),e.gl.render(e.scene,f.current),e.scene.background=v,e.gl.setRenderTarget(null),p.current.visible=!0,g++)})),(0,ov.jsxs)(ov.Fragment,{children:[(0,ov.jsx)("orthographicCamera",Aw(yw({left:d.width/-2,right:d.width/2,top:d.height/2,bottom:d.height/-2,ref:rE([f,t])},c),{children:!y&&a})),(0,ov.jsx)("group",{ref:p,children:y&&a(m.texture)})]})}));var oE=l.createContext({}),aE=2*Math.PI,sE=new xa,lE=new qo,[cE,uE]=[new go,new go],hE=new vo,dE=new vo,fE=e=>{let{alignment:t="bottom-right",margin:n=[80,80],renderPriority:r=0,autoClear:i=!0,onUpdate:o,onTarget:a,children:s}=e,c=cy((e=>{let{size:t}=e;return t})),u=cy((e=>{let{camera:t}=e;return t})),h=cy((e=>{let{controls:t}=e;return t})),d=cy((e=>{let{gl:t}=e;return t})),f=cy((e=>{let{scene:t}=e;return t})),p=cy((e=>{let{invalidate:t}=e;return t})),m=l.useRef(),g=l.useRef(),v=l.useRef(null),[y]=l.useState((()=>new qu)),A=l.useRef(!1),x=l.useRef(0),b=l.useRef(new vo(0,0,0)),_=l.useRef(new vo(0,0,0));l.useEffect((()=>{_.current.copy(u.up)}),[u]);let w=l.useCallback((e=>{A.current=!0,(h||a)&&(b.current=(null==h?void 0:h.target)||(null==a?void 0:a())),x.current=u.position.distanceTo(hE),cE.copy(u.quaternion),dE.copy(e).multiplyScalar(x.current).add(hE),sE.lookAt(dE),uE.copy(sE.quaternion),p()}),[h,u,a,p]);l.useEffect((()=>(f.background&&(m.current=f.background,f.background=null,y.background=m.current),()=>{m.current&&(f.background=m.current)})),[]),uy(((e,t)=>{var n;if(v.current&&g.current){if(A.current)if(cE.angleTo(uE)<.01)A.current=!1,(e=>"minPolarAngle"in e)(h)&&u.up.copy(_.current);else{let e=t*aE;cE.rotateTowards(uE,e),u.position.set(0,0,1).applyQuaternion(cE).multiplyScalar(x.current).add(b.current),u.up.set(0,1,0).applyQuaternion(cE).normalize(),u.quaternion.copy(cE),o?o():h&&h.update(),p()}lE.copy(u.matrix).invert(),null==(n=g.current)||n.quaternion.setFromRotationMatrix(lE),i&&(d.autoClear=!1),d.clearDepth(),d.render(y,v.current)}}),r);let E=function(e,t){let n=cy((e=>e.pointer)),[r]=l.useState((()=>{let r=new ig;return t&&Ay(r,t,{}),function(t,i){r.setFromCamera(n,e instanceof Fs?e:e.current);let o=this.constructor.prototype.raycast.bind(this);o&&o(r,i)}}));return r}(v),S=l.useMemo((()=>({tweenCamera:w,raycast:E})),[w]),[C,M]=n,T=t.endsWith("-center")?0:t.endsWith("-left")?-c.width/2+C:c.width/2-C,I=t.startsWith("center-")?0:t.startsWith("top-")?c.height/2-M:-c.height/2+M;return Cy((0,ov.jsxs)(oE.Provider,{value:S,children:[(0,ov.jsx)(iE,{ref:v,position:[0,0,200]}),(0,ov.jsx)("group",{ref:g,position:[T,I,0],children:s})]}),y)};function pE(e){let{scale:t=[.8,.05,.05],color:n,rotation:r}=e;return(0,ov.jsx)("group",{rotation:r,children:(0,ov.jsxs)("mesh",{position:[.4,0,0],children:[(0,ov.jsx)("boxGeometry",{args:t}),(0,ov.jsx)("meshBasicMaterial",{color:n,toneMapped:!1})]})})}function mE(e){var t=e,{onClick:n,font:r,disabled:i,arcStyle:o,label:a,labelColor:s,axisHeadScale:c=1}=t,u=xw(t,["onClick","font","disabled","arcStyle","label","labelColor","axisHeadScale"]);let h=cy((e=>e.gl)),d=l.useMemo((()=>{let e=document.createElement("canvas");e.width=64,e.height=64;let t=e.getContext("2d");return t.beginPath(),t.arc(32,32,16,0,2*Math.PI),t.closePath(),t.fillStyle=o,t.fill(),a&&(t.font=r,t.textAlign="center",t.fillStyle=s,t.fillText(a,32,41)),new Pd(e)}),[o,a,s,r]),[f,p]=l.useState(!1),m=(a?1:.75)*(f?1.2:1)*c;return(0,ov.jsx)("sprite",Aw(yw({scale:m,onPointerOver:i?void 0:e=>{e.stopPropagation(),p(!0)},onPointerOut:i?void 0:n||(e=>{e.stopPropagation(),p(!1)})},u),{children:(0,ov.jsx)("spriteMaterial",{map:d,"map-encoding":h.outputEncoding,"map-anisotropy":h.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:a?1:.75,toneMapped:!1})}))}var gE=e=>{var t=e,{hideNegativeAxes:n,hideAxisHeads:r,disabled:i,font:o="18px Inter var, Arial, sans-serif",axisColors:a=["#ff2060","#20df80","#2080ff"],axisHeadScale:s=1,axisScale:c,labels:u=["X","Y","Z"],labelColor:h="#000",onClick:d}=t,f=xw(t,["hideNegativeAxes","hideAxisHeads","disabled","font","axisColors","axisHeadScale","axisScale","labels","labelColor","onClick"]);let[p,m,g]=a,{tweenCamera:v,raycast:y}=l.useContext(oE),A={font:o,disabled:i,labelColor:h,raycast:y,onClick:d,axisHeadScale:s,onPointerDown:i?void 0:e=>{v(e.object.position),e.stopPropagation()}};return(0,ov.jsxs)("group",Aw(yw({scale:40},f),{children:[(0,ov.jsx)(pE,{color:p,rotation:[0,0,0],scale:c}),(0,ov.jsx)(pE,{color:m,rotation:[0,0,Math.PI/2],scale:c}),(0,ov.jsx)(pE,{color:g,rotation:[0,-Math.PI/2,0],scale:c}),!r&&(0,ov.jsxs)(ov.Fragment,{children:[(0,ov.jsx)(mE,yw({arcStyle:p,position:[1,0,0],label:u[0]},A)),(0,ov.jsx)(mE,yw({arcStyle:m,position:[0,1,0],label:u[1]},A)),(0,ov.jsx)(mE,yw({arcStyle:g,position:[0,0,1],label:u[2]},A)),!n&&(0,ov.jsxs)(ov.Fragment,{children:[(0,ov.jsx)(mE,yw({arcStyle:p,position:[-1,0,0]},A)),(0,ov.jsx)(mE,yw({arcStyle:m,position:[0,-1,0]},A)),(0,ov.jsx)(mE,yw({arcStyle:g,position:[0,0,-1]},A))]})]}),(0,ov.jsx)("ambientLight",{intensity:.5}),(0,ov.jsx)("pointLight",{position:[10,10,10],intensity:.5})]}))};function vE(e){let{isFigmaPlugin:t}=e;return(0,ov.jsx)(ov.Fragment,{children:(0,ov.jsx)(fE,{alignment:"bottom-right",margin:t?[25,25]:[65,110],renderPriority:2,children:(0,ov.jsx)(gE,{axisColors:["#FF430A","#FF430A","#FF430A"],labelColor:"white",hideNegativeAxes:!0,axisHeadScale:.8})})})}var yE=1,AE=2,xE=4,bE=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768});function _E(e){return e.isPerspectiveCamera}function wE(e){return e.isOrthographicCamera}var EE=2*Math.PI,SE=Math.PI/2,CE=1e-5;function ME(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:CE;return Math.abs(e)<t}function TE(e,t){return ME(e-t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:CE)}function IE(e,t){return Math.round(e/t)*t}function BE(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function PE(e){return Math.abs(e)<Number.MAX_VALUE?e:e*(1/0)}function RE(e,t){t.set(0,0),e.forEach((e=>{t.x+=e.clientX,t.y+=e.clientY})),t.x/=e.length,t.y/=e.length}function DE(e,t){return!!wE(e)&&(console.warn(`${t} is not supported in OrthographicCamera`),!0)}function OE(e){return e.invert?e.invert():e.inverse(),e}var kE,LE,FE,zE,UE,NE,jE,GE,QE,HE,VE,WE,qE,XE,YE,JE,KE,ZE,$E,eS,tS,nS,rS=class{constructor(){this._listeners={}}addEventListener(e,t){let n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}removeEventListener(e,t){let n=this._listeners[e];if(void 0!==n){let e=n.indexOf(t);-1!==e&&n.splice(e,1)}}removeAllEventListeners(e){e?Array.isArray(this._listeners[e])&&(this._listeners[e].length=0):this._listeners={}}dispatchEvent(e){let t=this._listeners[e.type];if(void 0!==t){e.target=this;let n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}},iS="undefined"!=typeof window,oS=iS&&/Mac/.test(navigator.platform),aS=!(iS&&"PointerEvent"in window),sS=1/8,lS=class extends rS{constructor(e,t){if(super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=0,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.dampingFactor=.05,this.draggingDampingFactor=.25,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=bE.NONE,this._viewport=null,this._dollyControlAmount=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._activePointers=[],this._truckInternal=(e,t,n)=>{if(_E(this._camera)){let r=NE.copy(this._camera.position).sub(this._target),i=this._camera.getEffectiveFOV()*kE.MathUtils.DEG2RAD,o=r.length()*Math.tan(.5*i),a=this.truckSpeed*e*o/this._elementRect.height,s=this.truckSpeed*t*o/this._elementRect.height;this.verticalDragToForward?(n?this.setFocalOffset(this._focalOffsetEnd.x+a,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(a,0,!0),this.forward(-s,!0)):n?this.setFocalOffset(this._focalOffsetEnd.x+a,this._focalOffsetEnd.y+s,this._focalOffsetEnd.z,!0):this.truck(a,s,!0)}else if(wE(this._camera)){let r=this._camera,i=e*(r.right-r.left)/r.zoom/this._elementRect.width,o=t*(r.top-r.bottom)/r.zoom/this._elementRect.height;n?this.setFocalOffset(this._focalOffsetEnd.x+i,this._focalOffsetEnd.y+o,this._focalOffsetEnd.z,!0):this.truck(i,o,!0)}},this._rotateInternal=(e,t)=>{let n=EE*this.azimuthRotateSpeed*e/this._elementRect.height,r=EE*this.polarRotateSpeed*t/this._elementRect.height;this.rotate(n,r,!0)},this._dollyInternal=(e,t,n)=>{let r=Math.pow(.95,-e*this.dollySpeed),i=this._sphericalEnd.radius*r,o=this._sphericalEnd.radius,a=o*(e>=0?-1:1);this.dollyTo(i),this.infinityDolly&&(i<this.minDistance||this.maxDistance===this.minDistance)&&(this._camera.getWorldDirection(NE),this._targetEnd.add(NE.normalize().multiplyScalar(a)),this._target.add(NE.normalize().multiplyScalar(a))),this.dollyToCursor&&(this._dollyControlAmount+=this._sphericalEnd.radius-o,this.infinityDolly&&(i<this.minDistance||this.maxDistance===this.minDistance)&&(this._dollyControlAmount-=a),this._dollyControlCoord.set(t,n))},this._zoomInternal=(e,t,n)=>{let r=Math.pow(.95,e*this.dollySpeed),i=this._zoomEnd;this.zoomTo(this._zoom*r),this.dollyToCursor&&(this._dollyControlAmount+=this._zoomEnd-i,this._dollyControlCoord.set(t,n))},"undefined"==typeof kE&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=(new kE.Quaternion).setFromUnitVectors(this._camera.up,FE),this._yAxisUpSpaceInverse=OE(this._yAxisUpSpace.clone()),this._state=bE.NONE,this._domElement=t,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._target=new kE.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new kE.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new kE.Spherical).setFromVector3(NE.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._nearPlaneCorners=[new kE.Vector3,new kE.Vector3,new kE.Vector3,new kE.Vector3],this._updateNearPlaneCorners(),this._boundary=new kE.Box3(new kE.Vector3(-1/0,-1/0,-1/0),new kE.Vector3(1/0,1/0,1/0)),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlAmount=0,this._dollyControlCoord=new kE.Vector2,this.mouseButtons={left:bE.ROTATE,middle:bE.DOLLY,right:bE.TRUCK,wheel:_E(this._camera)?bE.DOLLY:wE(this._camera)?bE.ZOOM:bE.NONE},this.touches={one:bE.TOUCH_ROTATE,two:_E(this._camera)?bE.TOUCH_DOLLY_TRUCK:wE(this._camera)?bE.TOUCH_ZOOM_TRUCK:bE.NONE,three:bE.TOUCH_TRUCK},this._domElement){let e=new kE.Vector2,t=new kE.Vector2,n=new kE.Vector2,r=e=>{if(!this._enabled)return;let t={pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0};this._activePointers.push(t),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",c),m(e)},i=e=>{if(!this._enabled)return;let t={pointerId:0,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0};this._activePointers.push(t),this._domElement.ownerDocument.removeEventListener("mousemove",s),this._domElement.ownerDocument.removeEventListener("mouseup",u),this._domElement.ownerDocument.addEventListener("mousemove",s),this._domElement.ownerDocument.addEventListener("mouseup",u),m(e)},o=e=>{this._enabled&&(e.preventDefault(),Array.prototype.forEach.call(e.changedTouches,(e=>{let t={pointerId:e.identifier,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0};this._activePointers.push(t)})),this._domElement.ownerDocument.removeEventListener("touchmove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",h),this._domElement.ownerDocument.addEventListener("touchmove",l,{passive:!1}),this._domElement.ownerDocument.addEventListener("touchend",h),m(e))},a=e=>{e.cancelable&&e.preventDefault();let t=e.pointerId,n=this._findPointerById(t);if(n){if(n.clientX=e.clientX,n.clientY=e.clientY,n.deltaX=e.movementX,n.deltaY=e.movementY,"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=0,(e.buttons&yE)===yE&&(this._state=this._state|this.mouseButtons.left),(e.buttons&xE)===xE&&(this._state=this._state|this.mouseButtons.middle),(e.buttons&AE)===AE&&(this._state=this._state|this.mouseButtons.right);g()}},s=e=>{let t=this._findPointerById(0);t&&(t.clientX=e.clientX,t.clientY=e.clientY,t.deltaX=e.movementX,t.deltaY=e.movementY,this._state=0,(e.buttons&yE)===yE&&(this._state=this._state|this.mouseButtons.left),(e.buttons&xE)===xE&&(this._state=this._state|this.mouseButtons.middle),(e.buttons&AE)===AE&&(this._state=this._state|this.mouseButtons.right),g())},l=e=>{e.cancelable&&e.preventDefault(),Array.prototype.forEach.call(e.changedTouches,(e=>{let t=e.identifier,n=this._findPointerById(t);n&&(n.clientX=e.clientX,n.clientY=e.clientY)})),g()},c=e=>{let t=e.pointerId,n=this._findPointerById(t);if(n&&this._activePointers.splice(this._activePointers.indexOf(n),1),"touch"===e.pointerType)switch(this._activePointers.length){case 0:this._state=bE.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=bE.NONE;v()},u=()=>{let e=this._findPointerById(0);e&&this._activePointers.splice(this._activePointers.indexOf(e),1),this._state=bE.NONE,v()},h=e=>{switch(Array.prototype.forEach.call(e.changedTouches,(e=>{let t=e.identifier,n=this._findPointerById(t);n&&this._activePointers.splice(this._activePointers.indexOf(n),1)})),this._activePointers.length){case 0:this._state=bE.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}v()},d=-1,f=e=>{if(!this._enabled||this.mouseButtons.wheel===bE.NONE)return;if(e.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===bE.ROTATE||this.mouseButtons.wheel===bE.TRUCK){let e=performance.now();d-e<1e3&&this._getClientRect(this._elementRect),d=e}let t=oS?-1:-3,n=1===e.deltaMode?e.deltaY/t:e.deltaY/(10*t),r=this.dollyToCursor?(e.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,i=this.dollyToCursor?(e.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case bE.ROTATE:this._rotateInternal(e.deltaX,e.deltaY);break;case bE.TRUCK:this._truckInternal(e.deltaX,e.deltaY,!1);break;case bE.OFFSET:this._truckInternal(e.deltaX,e.deltaY,!0);break;case bE.DOLLY:this._dollyInternal(-n,r,i);break;case bE.ZOOM:this._zoomInternal(-n,r,i)}this.dispatchEvent({type:"control"})},p=e=>{this._enabled&&e.preventDefault()},m=r=>{if(this._enabled){if(RE(this._activePointers,UE),this._getClientRect(this._elementRect),e.copy(UE),t.copy(UE),this._activePointers.length>=2){let e=UE.x-this._activePointers[1].clientX,r=UE.y-this._activePointers[1].clientY,i=Math.sqrt(e*e+r*r);n.set(0,i);let o=.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),a=.5*(this._activePointers[0].clientY+this._activePointers[1].clientY);t.set(o,a)}if("touches"in r||"pointerType"in r&&"touch"===r.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=0,(r.buttons&yE)===yE&&(this._state=this._state|this.mouseButtons.left),(r.buttons&xE)===xE&&(this._state=this._state|this.mouseButtons.middle),(r.buttons&AE)===AE&&(this._state=this._state|this.mouseButtons.right);this.dispatchEvent({type:"controlstart"})}},g=()=>{if(!this._enabled)return;RE(this._activePointers,UE);let r=this._domElement&&document.pointerLockElement===this._domElement,i=r?-this._activePointers[0].deltaX:t.x-UE.x,o=r?-this._activePointers[0].deltaY:t.y-UE.y;if(t.copy(UE),((this._state&bE.ROTATE)===bE.ROTATE||(this._state&bE.TOUCH_ROTATE)===bE.TOUCH_ROTATE||(this._state&bE.TOUCH_DOLLY_ROTATE)===bE.TOUCH_DOLLY_ROTATE||(this._state&bE.TOUCH_ZOOM_ROTATE)===bE.TOUCH_ZOOM_ROTATE)&&this._rotateInternal(i,o),(this._state&bE.DOLLY)===bE.DOLLY||(this._state&bE.ZOOM)===bE.ZOOM){let t=this.dollyToCursor?(e.x-this._elementRect.x)/this._elementRect.width*2-1:0,n=this.dollyToCursor?(e.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===bE.DOLLY?this._dollyInternal(o*sS,t,n):this._zoomInternal(o*sS,t,n)}if((this._state&bE.TOUCH_DOLLY)===bE.TOUCH_DOLLY||(this._state&bE.TOUCH_ZOOM)===bE.TOUCH_ZOOM||(this._state&bE.TOUCH_DOLLY_TRUCK)===bE.TOUCH_DOLLY_TRUCK||(this._state&bE.TOUCH_ZOOM_TRUCK)===bE.TOUCH_ZOOM_TRUCK||(this._state&bE.TOUCH_DOLLY_OFFSET)===bE.TOUCH_DOLLY_OFFSET||(this._state&bE.TOUCH_ZOOM_OFFSET)===bE.TOUCH_ZOOM_OFFSET||(this._state&bE.TOUCH_DOLLY_ROTATE)===bE.TOUCH_DOLLY_ROTATE||(this._state&bE.TOUCH_ZOOM_ROTATE)===bE.TOUCH_ZOOM_ROTATE){let e=UE.x-this._activePointers[1].clientX,r=UE.y-this._activePointers[1].clientY,i=Math.sqrt(e*e+r*r),o=n.y-i;n.set(0,i);let a=this.dollyToCursor?(t.x-this._elementRect.x)/this._elementRect.width*2-1:0,s=this.dollyToCursor?(t.y-this._elementRect.y)/this._elementRect.height*-2+1:0;this._state===bE.TOUCH_DOLLY||this._state===bE.TOUCH_DOLLY_ROTATE||this._state===bE.TOUCH_DOLLY_TRUCK||this._state===bE.TOUCH_DOLLY_OFFSET?this._dollyInternal(o*sS,a,s):this._zoomInternal(o*sS,a,s)}((this._state&bE.TRUCK)===bE.TRUCK||(this._state&bE.TOUCH_TRUCK)===bE.TOUCH_TRUCK||(this._state&bE.TOUCH_DOLLY_TRUCK)===bE.TOUCH_DOLLY_TRUCK||(this._state&bE.TOUCH_ZOOM_TRUCK)===bE.TOUCH_ZOOM_TRUCK)&&this._truckInternal(i,o,!1),((this._state&bE.OFFSET)===bE.OFFSET||(this._state&bE.TOUCH_OFFSET)===bE.TOUCH_OFFSET||(this._state&bE.TOUCH_DOLLY_OFFSET)===bE.TOUCH_DOLLY_OFFSET||(this._state&bE.TOUCH_ZOOM_OFFSET)===bE.TOUCH_ZOOM_OFFSET)&&this._truckInternal(i,o,!0),this.dispatchEvent({type:"control"})},v=()=>{RE(this._activePointers,UE),t.copy(UE),0===this._activePointers.length&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.removeEventListener("touchmove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("touchend",h),this.dispatchEvent({type:"controlend"}))};this._domElement.addEventListener("pointerdown",r),aS&&this._domElement.addEventListener("mousedown",i),aS&&this._domElement.addEventListener("touchstart",o),this._domElement.addEventListener("pointercancel",c),this._domElement.addEventListener("wheel",f,{passive:!1}),this._domElement.addEventListener("contextmenu",p),this._removeAllEventListeners=()=>{this._domElement.removeEventListener("pointerdown",r),this._domElement.removeEventListener("mousedown",i),this._domElement.removeEventListener("touchstart",o),this._domElement.removeEventListener("pointercancel",c),this._domElement.removeEventListener("wheel",f,{passive:!1}),this._domElement.removeEventListener("contextmenu",p),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("mousemove",s),this._domElement.ownerDocument.removeEventListener("touchmove",l,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",c),this._domElement.ownerDocument.removeEventListener("mouseup",u),this._domElement.ownerDocument.removeEventListener("touchend",h)},this.cancel=()=>{this._state!==bE.NONE&&(this._state=bE.NONE,this._activePointers.length=0,v())}}this.update(0)}static install(e){kE=e.THREE,LE=Object.freeze(new kE.Vector3(0,0,0)),FE=Object.freeze(new kE.Vector3(0,1,0)),zE=Object.freeze(new kE.Vector3(0,0,1)),UE=new kE.Vector2,NE=new kE.Vector3,jE=new kE.Vector3,GE=new kE.Vector3,QE=new kE.Vector3,HE=new kE.Vector3,VE=new kE.Vector3,WE=new kE.Vector3,qE=new kE.Vector3,XE=new kE.Spherical,YE=new kE.Spherical,JE=new kE.Box3,KE=new kE.Box3,ZE=new kE.Sphere,$E=new kE.Quaternion,eS=new kE.Quaternion,tS=new kE.Matrix4,nS=new kE.Raycaster}static get ACTION(){return bE}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="")}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=kE.MathUtils.clamp(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=kE.MathUtils.clamp(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);let o=!n||TE(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&TE(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this._sphericalEnd.radius,r=kE.MathUtils.clamp(e,this.minDistance,this.maxDistance);if(this.colliderMeshes.length>=1){let e=this._collisionTest(),t=TE(e,this._spherical.radius);if(!(n>r)&&t)return Promise.resolve();this._sphericalEnd.radius=Math.min(r,e)}else this._sphericalEnd.radius=r;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);let i=!t||TE(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(i)}zoom(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._zoomEnd=kE.MathUtils.clamp(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);let n=!t||TE(this._zoom,this._zoomEnd,this.restThreshold);return this._createOnRestPromise(n)}pan(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._camera.updateMatrix(),QE.setFromMatrixColumn(this._camera.matrix,0),HE.setFromMatrixColumn(this._camera.matrix,1),QE.multiplyScalar(e),HE.multiplyScalar(-t);let r=NE.copy(QE).add(HE),i=jE.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,n)}forward(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];NE.setFromMatrixColumn(this._camera.matrix,0),NE.crossVectors(this._camera.up,NE),NE.multiplyScalar(e);let n=jE.copy(this._targetEnd).add(NE);return this.moveTo(n.x,n.y,n.z,t)}moveTo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=NE.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);let o=!r||TE(this._target.x,this._targetEnd.x,this.restThreshold)&&TE(this._target.y,this._targetEnd.y,this.restThreshold)&&TE(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}fitToBox(e,t){let{cover:n=!1,paddingLeft:r=0,paddingRight:i=0,paddingBottom:o=0,paddingTop:a=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=[],l=e.isBox3?JE.copy(e):JE.setFromObject(e);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());let c=IE(this._sphericalEnd.theta,SE),u=IE(this._sphericalEnd.phi,SE);s.push(this.rotateTo(c,u,t));let h=NE.setFromSpherical(this._sphericalEnd).normalize(),d=$E.setFromUnitVectors(h,zE),f=TE(Math.abs(h.y),1);f&&d.multiply(eS.setFromAxisAngle(FE,c)),d.multiply(this._yAxisUpSpaceInverse);let p=KE.makeEmpty();jE.copy(l.min).applyQuaternion(d),p.expandByPoint(jE),jE.copy(l.min).setX(l.max.x).applyQuaternion(d),p.expandByPoint(jE),jE.copy(l.min).setY(l.max.y).applyQuaternion(d),p.expandByPoint(jE),jE.copy(l.max).setZ(l.min.z).applyQuaternion(d),p.expandByPoint(jE),jE.copy(l.min).setZ(l.max.z).applyQuaternion(d),p.expandByPoint(jE),jE.copy(l.max).setY(l.min.y).applyQuaternion(d),p.expandByPoint(jE),jE.copy(l.max).setX(l.min.x).applyQuaternion(d),p.expandByPoint(jE),jE.copy(l.max).applyQuaternion(d),p.expandByPoint(jE),p.min.x-=r,p.min.y-=o,p.max.x+=i,p.max.y+=a,d.setFromUnitVectors(zE,h),f&&d.premultiply(eS.invert()),d.premultiply(this._yAxisUpSpace);let m=p.getSize(NE),g=p.getCenter(jE).applyQuaternion(d);if(_E(this._camera)){let e=this.getDistanceToFitBox(m.x,m.y,m.z,n);s.push(this.moveTo(g.x,g.y,g.z,t)),s.push(this.dollyTo(e,t)),s.push(this.setFocalOffset(0,0,0,t))}else if(wE(this._camera)){let e=this._camera,r=e.right-e.left,i=e.top-e.bottom,o=n?Math.max(r/m.x,i/m.y):Math.min(r/m.x,i/m.y);s.push(this.moveTo(g.x,g.y,g.z,t)),s.push(this.zoomTo(o,t)),s.push(this.setFocalOffset(0,0,0,t))}return Promise.all(s)}fitToSphere(e,t){let n=[],r=e instanceof kE.Sphere?ZE.copy(e):function(e,t){let n=t,r=n.center;JE.makeEmpty(),e.traverseVisible((e=>{e.isMesh&&JE.expandByObject(e)})),JE.getCenter(r);let i=0;return e.traverseVisible((e=>{if(!e.isMesh)return;let t=e,n=t.geometry.clone();if(n.applyMatrix4(t.matrixWorld),n.isBufferGeometry){let e=n.attributes.position;for(let t=0,n=e.count;t<n;t++)NE.fromBufferAttribute(e,t),i=Math.max(i,r.distanceToSquared(NE))}else{let e=n.attributes.position,t=new kE.Vector3;for(let n=0,o=e.count;n<o;n++)t.fromBufferAttribute(e,n),i=Math.max(i,r.distanceToSquared(t))}})),n.radius=Math.sqrt(i),n}(e,ZE);if(n.push(this.moveTo(r.center.x,r.center.y,r.center.z,t)),_E(this._camera)){let e=this.getDistanceToFitSphere(r.radius);n.push(this.dollyTo(e,t))}else if(wE(this._camera)){let e=this._camera.right-this._camera.left,i=this._camera.top-this._camera.bottom,o=2*r.radius,a=Math.min(e/o,i/o);n.push(this.zoomTo(a,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=jE.set(r,i,o),l=NE.set(e,t,n);this._targetEnd.copy(s),this._sphericalEnd.setFromVector3(l.sub(s).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let c=!a||TE(this._target.x,this._targetEnd.x,this.restThreshold)&&TE(this._target.y,this._targetEnd.y,this.restThreshold)&&TE(this._target.z,this._targetEnd.z,this.restThreshold)&&TE(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&TE(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&TE(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(e,t,n,r,i,o,a,s,l,c,u,h,d){let f=arguments.length>13&&void 0!==arguments[13]&&arguments[13],p=NE.set(r,i,o),m=jE.set(e,t,n);XE.setFromVector3(m.sub(p).applyQuaternion(this._yAxisUpSpace));let g=GE.set(c,u,h),v=jE.set(a,s,l);YE.setFromVector3(v.sub(g).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(g,d));let y=YE.theta-XE.theta,A=YE.phi-XE.phi,x=YE.radius-XE.radius;this._sphericalEnd.set(XE.radius+x*d,XE.phi+A*d,XE.theta+y*d),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));let b=!f||TE(this._target.x,this._targetEnd.x,this.restThreshold)&&TE(this._target.y,this._targetEnd.y,this.restThreshold)&&TE(this._target.z,this._targetEnd.z,this.restThreshold)&&TE(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&TE(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&TE(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(b)}setPosition(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.getPosition(NE);return this.setLookAt(i.x,i.y,i.z,e,t,n,r)}setFocalOffset(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);let i=!r||TE(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&TE(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&TE(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),QE.setFromMatrixColumn(this._camera.matrixWorldInverse,0),HE.setFromMatrixColumn(this._camera.matrixWorldInverse,1),VE.setFromMatrixColumn(this._camera.matrixWorldInverse,2);let r=NE.set(e,t,n),i=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);QE.multiplyScalar(o.x),HE.multiplyScalar(o.y),VE.multiplyScalar(o.z),NE.copy(QE).add(HE).add(VE),NE.z=NE.z+i,this.dollyTo(i,!1),this.setFocalOffset(-NE.x,NE.y,-NE.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){null!==e?(this._viewport=this._viewport||new kE.Vector4,"number"==typeof e?this._viewport.set(e,t,n,r):this._viewport.copy(e)):this._viewport=null}getDistanceToFitBox(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(DE(this._camera,"getDistanceToFitBox"))return this._spherical.radius;let i=e/t,o=this._camera.getEffectiveFOV()*kE.MathUtils.DEG2RAD,a=this._camera.aspect;return.5*((r?i>a:i<a)?t:e/a)/Math.tan(.5*o)+.5*n}getDistanceToFitSphere(e){if(DE(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;let t=this._camera.getEffectiveFOV()*kE.MathUtils.DEG2RAD,n=2*Math.atan(Math.tan(.5*t)*this._camera.aspect),r=1<this._camera.aspect?t:n;return e/Math.sin(.5*r)}getTarget(e){return(e&&e.isVector3?e:new kE.Vector3).copy(this._targetEnd)}getPosition(e){return(e&&e.isVector3?e:new kE.Vector3).setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).add(this._targetEnd)}getFocalOffset(e){return(e&&e.isVector3?e:new kE.Vector3).copy(this._focalOffsetEnd)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%EE,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=EE),this._spherical.theta+=EE*Math.round((this._sphericalEnd.theta-this._spherical.theta)/EE)}reset(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,FE),OE(this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace))}update(e){let t=this._state===bE.NONE?this.dampingFactor:this.draggingDampingFactor,n=Math.min(t*e*60,1),r=this._sphericalEnd.theta-this._spherical.theta,i=this._sphericalEnd.phi-this._spherical.phi,o=this._sphericalEnd.radius-this._spherical.radius,a=WE.subVectors(this._targetEnd,this._target),s=qE.subVectors(this._focalOffsetEnd,this._focalOffset);if(ME(r)&&ME(i)&&ME(o)&&ME(a.x)&&ME(a.y)&&ME(a.z)&&ME(s.x)&&ME(s.y)&&ME(s.z)?(this._spherical.copy(this._sphericalEnd),this._target.copy(this._targetEnd),this._focalOffset.copy(this._focalOffsetEnd)):(this._spherical.set(this._spherical.radius+o*n,this._spherical.phi+i*n,this._spherical.theta+r*n),this._target.add(a.multiplyScalar(n)),this._focalOffset.add(s.multiplyScalar(n)),this._needsUpdate=!0),0!==this._dollyControlAmount){if(_E(this._camera)){let e=this._camera,t=NE.setFromSpherical(this._sphericalEnd).applyQuaternion(this._yAxisUpSpaceInverse).normalize().negate(),n=jE.copy(t).cross(e.up).normalize();0===n.lengthSq()&&(n.x=1);let r=GE.crossVectors(n,t),i=this._sphericalEnd.radius*Math.tan(e.getEffectiveFOV()*kE.MathUtils.DEG2RAD*.5),o=(this._sphericalEnd.radius-this._dollyControlAmount-this._sphericalEnd.radius)/this._sphericalEnd.radius,a=NE.copy(this._targetEnd).add(n.multiplyScalar(this._dollyControlCoord.x*i*e.aspect)).add(r.multiplyScalar(this._dollyControlCoord.y*i));this._targetEnd.lerp(a,o)}else if(wE(this._camera)){let e=this._camera,t=e.getWorldDirection(NE.clone()),n=this._targetEnd.x*t.x+this._targetEnd.y*t.y+this._targetEnd.z*t.z,r=NE.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(e.near+e.far)/(e.near-e.far)).unproject(e),i=jE.set(0,0,-1).applyQuaternion(e.quaternion),o=GE.copy(r).add(i.multiplyScalar(-r.dot(e.up))),a=-(this._zoom-this._dollyControlAmount-this._zoomEnd)/this._zoom;this._targetEnd.lerp(o,a);let s=this._targetEnd.x*t.x+this._targetEnd.y*t.y+this._targetEnd.z*t.z,l=t.multiplyScalar(s-n);this._targetEnd.sub(l)}this._target.copy(this._targetEnd),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._dollyControlAmount=0}let l=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,l),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target),(!ME(this._focalOffset.x)||!ME(this._focalOffset.y)||!ME(this._focalOffset.z))&&(this._camera.updateMatrix(),QE.setFromMatrixColumn(this._camera.matrix,0),HE.setFromMatrixColumn(this._camera.matrix,1),VE.setFromMatrixColumn(this._camera.matrix,2),QE.multiplyScalar(this._focalOffset.x),HE.multiplyScalar(-this._focalOffset.y),VE.multiplyScalar(this._focalOffset.z),NE.copy(QE).add(HE).add(VE),this._camera.position.add(NE)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),NE.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);let c=this._zoomEnd-this._zoom;this._zoom+=c*n,this._camera.zoom!==this._zoom&&(ME(c)&&(this._zoom=this._zoomEnd),this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0);let u=this._needsUpdate;return u&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):u?(this.dispatchEvent({type:"update"}),ME(r,this.restThreshold)&&ME(i,this.restThreshold)&&ME(o,this.restThreshold)&&ME(a.x,this.restThreshold)&&ME(a.y,this.restThreshold)&&ME(a.z,this.restThreshold)&&ME(s.x,this.restThreshold)&&ME(s.y,this.restThreshold)&&ME(s.z,this.restThreshold)&&ME(c,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!u&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._updatedLastTime=u,this._needsUpdate=!1,u}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:BE(this.maxDistance),minZoom:this.minZoom,maxZoom:BE(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:BE(this.maxPolarAngle),minAzimuthAngle:BE(this.minAzimuthAngle),maxAzimuthAngle:BE(this.maxAzimuthAngle),dampingFactor:this.dampingFactor,draggingDampingFactor:this.draggingDampingFactor,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:NE.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=JSON.parse(e),r=NE.fromArray(n.position);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=PE(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=PE(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=PE(n.maxPolarAngle),this.minAzimuthAngle=PE(n.minAzimuthAngle),this.maxAzimuthAngle=PE(n.maxAzimuthAngle),this.dampingFactor=n.dampingFactor,this.draggingDampingFactor=n.draggingDampingFactor,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),XE.setFromVector3(r.sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(XE.theta,XE.phi,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}dispose(){this._removeAllEventListeners()}_findPointerById(e){let t=null;return this._activePointers.some((n=>n.pointerId===e&&(t=n,!0))),t}_encloseToBoundary(e,t,n){let r=t.lengthSq();if(0===r)return e;let i=jE.copy(t).add(e),o=this._boundary.clampPoint(i,GE).sub(i),a=o.lengthSq();if(0===a)return e.add(t);if(a===r)return e;if(0===n)return e.add(t).add(o);{let r=1+n*a/t.dot(o);return e.add(jE.copy(t).multiplyScalar(r)).add(o.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(_E(this._camera)){let e=this._camera,t=e.near,n=e.getEffectiveFOV()*kE.MathUtils.DEG2RAD,r=Math.tan(.5*n)*t,i=r*e.aspect;this._nearPlaneCorners[0].set(-i,-r,0),this._nearPlaneCorners[1].set(i,-r,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(-i,r,0)}else if(wE(this._camera)){let e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,i=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(n,i,0),this._nearPlaneCorners[1].set(r,i,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1)||DE(this._camera,"_collisionTest"))return e;let t=NE.setFromSpherical(this._spherical).divideScalar(this._spherical.radius);tS.lookAt(LE,t,this._camera.up);for(let n=0;n<4;n++){let r=jE.copy(this._nearPlaneCorners[n]);r.applyMatrix4(tS);let i=GE.addVectors(this._target,r);nS.set(i,t),nS.far=this._spherical.radius+1;let o=nS.intersectObjects(this.colliderMeshes);0!==o.length&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){let t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((e=>{let t=()=>{this.removeEventListener("rest",t),e()};this.addEventListener("rest",t)})))}_removeAllEventListeners(){}};function cS(e){return e/180*Math.PI}function uS(e){return e.map((e=>cS(e)))}function hS(e){return e.replace("http://localhost:3001/customize","").replace("https://shadergradient.co/customize","").replace("https://www.shadergradient.co/customize","")}function dS(t){var n=t,{dampingFactor:r=.05}=n,i=xw(n,["dampingFactor"]);lS.install({THREE:e}),hv({CameraControls:lS});let o=cy((e=>e.camera)),a=cy((e=>e.gl)),s=function(e){let{type:t,cAzimuthAngle:n,cPolarAngle:r,cDistance:i,cameraZoom:o,zoomOut:a,enableTransition:s}=e,c=(0,l.useRef)(),u=c.current;return uy(((e,t)=>c.current.update(t))),(0,l.useEffect)((()=>{null==u||u.rotateTo(cS(n),cS(r),s)}),[u,n,r]),(0,l.useEffect)((()=>{a?"sphere"===t?(null==u||u.dollyTo(Dw.distance,s),null==u||u.zoomTo(Dw.zoom,s)):(null==u||u.dollyTo(Rw.distance,s),null==u||u.zoomTo(Rw.zoom,s)):"sphere"===t?(null==u||u.zoomTo(o,s),null==u||u.dollyTo(Pw,s)):(null==u||u.dollyTo(i,s),null==u||u.zoomTo(Bw,s))}),[u,a,t,o,i]),c}(i);return(0,ov.jsx)("cameraControls",{ref:s,args:[o,a.domElement],enableDamping:!0,dampingFactor:r,zoomSpeed:10,dollySpeed:10,restThreshold:0})}var fS=class extends Qp{constructor(e){super(e),this.type=yn}parse(e){let t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},n=function(e,t,n){t=t||1024;let r=e.pos,i=-1,o=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=s.indexOf("\n"))&&o<t&&r<e.byteLength;)a+=s,o+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=o+i+1),a+s.slice(0,i))},r=function(e,t,n,r){let i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*o,n[r+1]=e[t+1]*o,n[r+2]=e[t+2]*o,n[r+3]=1},i=function(e,t,n,r){let i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=Va.toHalfFloat(Math.min(e[t+0]*o,65504)),n[r+1]=Va.toHalfFloat(Math.min(e[t+1]*o,65504)),n[r+2]=Va.toHalfFloat(Math.min(e[t+2]*o,65504)),n[r+3]=Va.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;let a,s,l,c=function(e){let r,i,o=/^#\?(\S+)/,a=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,l=/^\s*FORMAT=(\S+)\s*$/,c=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};for((e.pos>=e.byteLength||!(r=n(e)))&&t(1,"no header found"),(i=r.match(o))||t(3,"bad initial token"),u.valid|=1,u.programtype=i[1],u.string+=r+"\n";r=n(e),!1!==r;)if(u.string+=r+"\n","#"!==r.charAt(0)){if((i=r.match(a))&&(u.gamma=parseFloat(i[1])),(i=r.match(s))&&(u.exposure=parseFloat(i[1])),(i=r.match(l))&&(u.valid|=2,u.format=i[1]),(i=r.match(c))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=r+"\n";return 2&u.valid||t(3,"missing format specifier"),4&u.valid||t(3,"missing image size specifier"),u}(o),u=c.width,h=c.height,d=function(e,n,r){let i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);i!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");let o=new Uint8Array(4*n*r);o.length||t(4,"unable to allocate buffer space");let a=0,s=0,l=4*i,c=new Uint8Array(4),u=new Uint8Array(l),h=r;for(;h>0&&s<e.byteLength;){s+4>e.byteLength&&t(1),c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++],(2!=c[0]||2!=c[1]||(c[2]<<8|c[3])!=i)&&t(3,"bad rgbe scanline format");let n,r=0;for(;r<l&&s<e.byteLength;){n=e[s++];let i=n>128;if(i&&(n-=128),(0===n||r+n>l)&&t(3,"bad scanline data"),i){let t=e[s++];for(let e=0;e<n;e++)u[r++]=t}else u.set(e.subarray(s,s+n),r),r+=n,s+=n}let d=i;for(let e=0;e<d;e++){let t=0;o[a]=u[e+t],t+=i,o[a+1]=u[e+t],t+=i,o[a+2]=u[e+t],t+=i,o[a+3]=u[e+t],a+=4}h--}return o}(o.subarray(o.pos),u,h);switch(this.type){case vn:l=d.length/4;let e=new Float32Array(4*l);for(let n=0;n<l;n++)r(d,4*n,e,4*n);a=e,s=vn;break;case yn:l=d.length/4;let t=new Uint16Array(4*l);for(let n=0;n<l;n++)i(d,4*n,t,4*n);a=t,s=yn;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:u,height:h,data:a,header:c.string,gamma:c.gamma,exposure:c.exposure,type:s}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){switch(e.type){case vn:case yn:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=an,e.magFilter=an,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,r)}};function pS(e,t){let{path:n}=t;return py(fS,e,(e=>e.setPath(n)))}var mS=e=>(e=>e.current&&e.current.isScene)(e)?e.current:e;function gS(e){let{background:t=!1,envPreset:n}=e,r={city:pS("city.hdr",{path:Ow}),dawn:pS("dawn.hdr",{path:Ow}),lobby:pS("lobby.hdr",{path:Ow})}[n],i=cy((e=>e.scene));return l.useLayoutEffect((()=>{if(r){let e=mS(i),n=(e.background,e.environment);return"only"!==t&&(e.environment=r),t&&(e.background=r),()=>{"only"!==t&&(e.environment=n),t&&(e.background="black")}}}),[i,r,t]),r.mapping=Xt,null}var vS=0;function yS(e){let{lightType:t,brightness:n,envPreset:r}=e;return(0,ov.jsxs)(ov.Fragment,{children:["3d"===t&&(0,ov.jsx)("ambientLight",{intensity:n||1}),"env"===t&&(0,ov.jsx)(l.Suspense,{fallback:(0,ov.jsx)(AS,{}),children:(0,ov.jsx)(gS,{envPreset:r,background:!1,loadingCallback:()=>{}})})]})}function AS(){let{progress:e}=function(){let[e,t]=(0,l.useState)({});return Op.onLoad=()=>{t((e=>Aw(yw({},e),{active:!1})))},Op.onProgress=(e,n,r)=>{n===r&&(vS=r);let i=(n-vS)/(r-vS)*100||100;t((t=>Aw(yw({},t),{active:!0,item:e,loaded:n,total:r,progress:i})))},e}();return(0,l.useEffect)((()=>{let t=document.getElementById("LoaderRoot");t&&e&&(100===e?(t.innerHTML="Ligths are loaded",setTimeout((()=>{t.innerHTML=""}),1e3)):t.innerHTML="Loading lights...")}),[e]),(0,ov.jsx)("ambientLight",{intensity:.4})}function xS(e){let t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function bS(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)/255}nl.uv2_pars_vertex="",nl.uv2_vertex="",nl.uv2_pars_fragment="",nl.encodings_fragment="";var _S={};_w(_S,{defaults:()=>wS,positionMix:()=>DS});var wS={};_w(wS,{plane:()=>ES,sphere:()=>MS,waterPlane:()=>BS});var ES={};_w(ES,{fragment:()=>SS,vertex:()=>CS});var SS="\n#define STANDARD\n#ifdef PHYSICAL\n#define REFLECTIVITY\n#define CLEARCOAT\n#define TRANSMISSION\n#endif\nuniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;\n#ifdef TRANSMISSION\nuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\nuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\nuniform float clearcoat;uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\nuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <color_pars_fragment>\n#include <common>\n#include <dithering_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <map_pars_fragment>\n#include <packing>\n#include <uv2_pars_fragment>\n#include <uv_pars_fragment>\n#include <bsdfs>\n#include <bumpmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <shadowmap_pars_fragment>\nvarying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(mix(mix(color1,color2,smoothstep(-3.0,3.0,vPos.x)),color3,vPos.z),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#ifdef TRANSMISSION\nfloat totalTransmission=transmission;\n#endif\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <roughnessmap_fragment>\n#include <metalnessmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <clearcoat_normal_fragment_begin>\n#include <clearcoat_normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_physical_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;\n#ifdef TRANSMISSION\ndiffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);\n#endif\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\ngl_FragColor=vec4(outgoingLight,diffuseColor.a);}",CS="vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;\n#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <clipping_planes_pars_vertex>\n#include <color_pars_vertex>\n#include <common>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <skinning_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uv_pars_vertex>\nvoid main(){\n#include <beginnormal_vertex>\n#include <color_vertex>\n#include <defaultnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <uv2_vertex>\n#include <uv_vertex>\n#ifndef FLAT_SHADED\nvNormal=normalize(transformedNormal);\n#ifdef USE_TANGENT\nvTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);\n#endif\n#endif\n#include <begin_vertex>\n#include <clipping_planes_vertex>\n#include <displacementmap_vertex>\n#include <logdepthbuf_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\n#include <skinning_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <fog_vertex>\n#include <shadowmap_vertex>\n#include <worldpos_vertex>\nvUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}",MS={};_w(MS,{fragment:()=>TS,vertex:()=>IS});var TS="\n#define STANDARD\n#ifdef PHYSICAL\n#define REFLECTIVITY\n#define CLEARCOAT\n#define TRANSMISSION\n#endif\nuniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;\n#ifdef TRANSMISSION\nuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\nuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\nuniform float clearcoat;uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\nuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <color_pars_fragment>\n#include <common>\n#include <dithering_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <map_pars_fragment>\n#include <packing>\n#include <uv2_pars_fragment>\n#include <uv_pars_fragment>\n#include <bsdfs>\n#include <bumpmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <shadowmap_pars_fragment>\nvarying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;varying float distanceToCenter;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;\n#include <clipping_planes_fragment>\nfloat distanceToCenter=distance(vPos,vec3(0,0,0));vec4 diffuseColor=vec4(mix(color3,mix(color2,color1,smoothstep(-1.0,1.0,vPos.y)),distanceToCenter),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#ifdef TRANSMISSION\nfloat totalTransmission=transmission;\n#endif\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <roughnessmap_fragment>\n#include <metalnessmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <clearcoat_normal_fragment_begin>\n#include <clearcoat_normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_physical_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;\n#ifdef TRANSMISSION\ndiffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);\n#endif\ngl_FragColor=vec4(outgoingLight,diffuseColor.a);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",IS="vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}varying vec3 vNormal;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;uniform float uFrequency;uniform float uAmplitude;varying vec3 vPos;varying float vDistort;varying vec2 vUv;varying vec3 vViewPosition;\n#define STANDARD\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <clipping_planes_pars_vertex>\n#include <color_pars_vertex>\n#include <common>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <skinning_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uv_pars_vertex>\nmat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}void main(){\n#include <beginnormal_vertex>\n#include <color_vertex>\n#include <defaultnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <uv2_vertex>\n#include <uv_vertex>\n#ifndef FLAT_SHADED\nvNormal=normalize(transformedNormal);\n#ifdef USE_TANGENT\nvTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);\n#endif\n#endif\n#include <begin_vertex>\n#include <clipping_planes_vertex>\n#include <displacementmap_vertex>\n#include <logdepthbuf_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\n#include <skinning_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <fog_vertex>\n#include <shadowmap_vertex>\n#include <worldpos_vertex>\nfloat t=uTime*uSpeed;float distortion=pnoise((normal+t)*uNoiseDensity,vec3(10.0))*uNoiseStrength;vec3 pos=position+(normal*distortion);float angle=sin(uv.y*uFrequency+t)*uAmplitude;pos=rotateY(pos,angle);vPos=pos;vDistort=distortion;vNormal=normal;vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}",BS={};_w(BS,{fragment:()=>PS,vertex:()=>RS});var PS="\n#define STANDARD\n#ifdef PHYSICAL\n#define REFLECTIVITY\n#define CLEARCOAT\n#define TRANSMISSION\n#endif\nuniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;\n#ifdef TRANSMISSION\nuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\nuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\nuniform float clearcoat;uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\nuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <color_pars_fragment>\n#include <common>\n#include <dithering_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <map_pars_fragment>\n#include <packing>\n#include <uv2_pars_fragment>\n#include <uv_pars_fragment>\n#include <bsdfs>\n#include <bumpmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <shadowmap_pars_fragment>\nvarying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;float linearToRelativeLuminance2(const in vec3 color){vec3 weights=vec3(0.2126,0.7152,0.0722);return dot(weights,color.rgb);}void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;\n#include <clipping_planes_fragment>\nvec4 diffuseColor=vec4(mix(mix(color1,color2,smoothstep(-3.0,3.0,vPos.x)),color3,vPos.z),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#ifdef TRANSMISSION\nfloat totalTransmission=transmission;\n#endif\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <roughnessmap_fragment>\n#include <metalnessmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <clearcoat_normal_fragment_begin>\n#include <clearcoat_normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_physical_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;\n#ifdef TRANSMISSION\ndiffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance2(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);\n#endif\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\ngl_FragColor=vec4(outgoingLight,diffuseColor.a);}",RS="vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;\n#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <clipping_planes_pars_vertex>\n#include <color_pars_vertex>\n#include <common>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <skinning_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uv_pars_vertex>\nvoid main(){\n#include <beginnormal_vertex>\n#include <color_vertex>\n#include <defaultnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <uv2_vertex>\n#include <uv_vertex>\n#ifndef FLAT_SHADED\nvNormal=normalize(transformedNormal);\n#ifdef USE_TANGENT\nvTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);\n#endif\n#endif\n#include <begin_vertex>\n#include <clipping_planes_vertex>\n#include <displacementmap_vertex>\n#include <logdepthbuf_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\n#include <skinning_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <fog_vertex>\n#include <shadowmap_vertex>\n#include <worldpos_vertex>\nfloat t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}",DS={};_w(DS,{plane:()=>OS,sphere:()=>FS,waterPlane:()=>NS});var OS={};_w(OS,{fragment:()=>kS,vertex:()=>LS});var kS="uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 vNormal;varying vec3 vPos;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);gl_FragColor=vec4(color1*vPos.x+color2*vPos.y+color3*vPos.z,1.);}",LS="vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;\n#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <clipping_planes_pars_vertex>\n#include <color_pars_vertex>\n#include <common>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <skinning_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uv_pars_vertex>\nvoid main(){\n#include <beginnormal_vertex>\n#include <color_vertex>\n#include <defaultnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <uv2_vertex>\n#include <uv_vertex>\n#ifndef FLAT_SHADED\nvNormal=normalize(transformedNormal);\n#ifdef USE_TANGENT\nvTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);\n#endif\n#endif\n#include <begin_vertex>\n#include <clipping_planes_vertex>\n#include <displacementmap_vertex>\n#include <logdepthbuf_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\n#include <skinning_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <fog_vertex>\n#include <shadowmap_vertex>\n#include <worldpos_vertex>\nvUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}",FS={};_w(FS,{fragment:()=>zS,vertex:()=>US});var zS="\n#define STANDARD\n#ifdef PHYSICAL\n#define REFLECTIVITY\n#define CLEARCOAT\n#define TRANSMISSION\n#endif\nuniform vec3 diffuse;uniform vec3 emissive;uniform float roughness;uniform float metalness;uniform float opacity;\n#ifdef TRANSMISSION\nuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\nuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\nuniform float clearcoat;uniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\nuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <color_pars_fragment>\n#include <common>\n#include <dithering_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <map_pars_fragment>\n#include <packing>\n#include <uv2_pars_fragment>\n#include <uv_pars_fragment>\n#include <bsdfs>\n#include <bumpmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <shadowmap_pars_fragment>\nvarying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 color1;varying vec3 color2;varying vec3 color3;varying float distanceToCenter;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);float clearcoat=1.0;float clearcoatRoughness=0.5;\n#include <clipping_planes_fragment>\nfloat distanceToCenter=distance(vPos,vec3(0,0,0));vec4 diffuseColor=vec4(mix(color3,mix(color2,color1,smoothstep(-1.0,1.0,vPos.y)),distanceToCenter),1);ReflectedLight reflectedLight=ReflectedLight(vec3(0.0),vec3(0.0),vec3(0.0),vec3(0.0));vec3 totalEmissiveRadiance=emissive;\n#ifdef TRANSMISSION\nfloat totalTransmission=transmission;\n#endif\n#include <logdepthbuf_fragment>\n#include <map_fragment>\n#include <color_fragment>\n#include <alphamap_fragment>\n#include <alphatest_fragment>\n#include <roughnessmap_fragment>\n#include <metalnessmap_fragment>\n#include <normal_fragment_begin>\n#include <normal_fragment_maps>\n#include <clearcoat_normal_fragment_begin>\n#include <clearcoat_normal_fragment_maps>\n#include <emissivemap_fragment>\n#include <lights_physical_fragment>\n#include <lights_fragment_begin>\n#include <lights_fragment_maps>\n#include <lights_fragment_end>\n#include <aomap_fragment>\nvec3 outgoingLight=reflectedLight.directDiffuse+reflectedLight.indirectDiffuse+reflectedLight.directSpecular+reflectedLight.indirectSpecular;\n#ifdef TRANSMISSION\ndiffuseColor.a*=mix(saturate(1.-totalTransmission+linearToRelativeLuminance(reflectedLight.directSpecular+reflectedLight.indirectSpecular)),1.0,metalness);\n#endif\ngl_FragColor=vec4(outgoingLight,diffuseColor.a);\n#include <tonemapping_fragment>\n#include <encodings_fragment>\n#include <fog_fragment>\n#include <premultiplied_alpha_fragment>\n#include <dithering_fragment>\n}",US="vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float pnoise(vec3 P,vec3 rep){vec3 Pi0=mod(floor(P),rep);vec3 Pi1=mod(Pi0+vec3(1.0),rep);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}varying vec3 vNormal;uniform float uTime;uniform float uSpeed;uniform float uNoiseDensity;uniform float uNoiseStrength;uniform float uFrequency;uniform float uAmplitude;varying vec3 vPos;varying float vDistort;varying vec2 vUv;varying vec3 vViewPosition;\n#define STANDARD\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <clipping_planes_pars_vertex>\n#include <color_pars_vertex>\n#include <common>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <skinning_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uv_pars_vertex>\nmat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}void main(){\n#include <beginnormal_vertex>\n#include <color_vertex>\n#include <defaultnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <uv2_vertex>\n#include <uv_vertex>\n#ifndef FLAT_SHADED\nvNormal=normalize(transformedNormal);\n#ifdef USE_TANGENT\nvTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);\n#endif\n#endif\n#include <begin_vertex>\n#include <clipping_planes_vertex>\n#include <displacementmap_vertex>\n#include <logdepthbuf_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\n#include <skinning_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <fog_vertex>\n#include <shadowmap_vertex>\n#include <worldpos_vertex>\nfloat t=uTime*uSpeed;float distortion=pnoise((normal+t)*uNoiseDensity,vec3(10.0))*uNoiseStrength;vec3 pos=position+(normal*distortion);float angle=sin(uv.y*uFrequency+t)*uAmplitude;pos=rotateY(pos,angle);vPos=pos;vDistort=distortion;vNormal=normal;vUv=uv;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}",NS={};_w(NS,{fragment:()=>jS,vertex:()=>GS});var jS="uniform float uC1r;uniform float uC1g;uniform float uC1b;uniform float uC2r;uniform float uC2g;uniform float uC2b;uniform float uC3r;uniform float uC3g;uniform float uC3b;varying vec3 vNormal;varying vec3 vPos;void main(){vec3 color1=vec3(uC1r,uC1g,uC1b);vec3 color2=vec3(uC2r,uC2g,uC2b);vec3 color3=vec3(uC3r,uC3g,uC3b);gl_FragColor=vec4(color1*vPos.x+color2*vPos.y+color3*vPos.z,1.);}",GS="vec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}vec3 fade(vec3 t){return t*t*t*(t*(t*6.0-15.0)+10.0);}float cnoise(vec3 P){vec3 Pi0=floor(P);vec3 Pi1=Pi0+vec3(1.0);Pi0=mod289(Pi0);Pi1=mod289(Pi1);vec3 Pf0=fract(P);vec3 Pf1=Pf0-vec3(1.0);vec4 ix=vec4(Pi0.x,Pi1.x,Pi0.x,Pi1.x);vec4 iy=vec4(Pi0.yy,Pi1.yy);vec4 iz0=Pi0.zzzz;vec4 iz1=Pi1.zzzz;vec4 ixy=permute(permute(ix)+iy);vec4 ixy0=permute(ixy+iz0);vec4 ixy1=permute(ixy+iz1);vec4 gx0=ixy0*(1.0/7.0);vec4 gy0=fract(floor(gx0)*(1.0/7.0))-0.5;gx0=fract(gx0);vec4 gz0=vec4(0.5)-abs(gx0)-abs(gy0);vec4 sz0=step(gz0,vec4(0.0));gx0-=sz0*(step(0.0,gx0)-0.5);gy0-=sz0*(step(0.0,gy0)-0.5);vec4 gx1=ixy1*(1.0/7.0);vec4 gy1=fract(floor(gx1)*(1.0/7.0))-0.5;gx1=fract(gx1);vec4 gz1=vec4(0.5)-abs(gx1)-abs(gy1);vec4 sz1=step(gz1,vec4(0.0));gx1-=sz1*(step(0.0,gx1)-0.5);gy1-=sz1*(step(0.0,gy1)-0.5);vec3 g000=vec3(gx0.x,gy0.x,gz0.x);vec3 g100=vec3(gx0.y,gy0.y,gz0.y);vec3 g010=vec3(gx0.z,gy0.z,gz0.z);vec3 g110=vec3(gx0.w,gy0.w,gz0.w);vec3 g001=vec3(gx1.x,gy1.x,gz1.x);vec3 g101=vec3(gx1.y,gy1.y,gz1.y);vec3 g011=vec3(gx1.z,gy1.z,gz1.z);vec3 g111=vec3(gx1.w,gy1.w,gz1.w);vec4 norm0=taylorInvSqrt(vec4(dot(g000,g000),dot(g010,g010),dot(g100,g100),dot(g110,g110)));g000*=norm0.x;g010*=norm0.y;g100*=norm0.z;g110*=norm0.w;vec4 norm1=taylorInvSqrt(vec4(dot(g001,g001),dot(g011,g011),dot(g101,g101),dot(g111,g111)));g001*=norm1.x;g011*=norm1.y;g101*=norm1.z;g111*=norm1.w;float n000=dot(g000,Pf0);float n100=dot(g100,vec3(Pf1.x,Pf0.yz));float n010=dot(g010,vec3(Pf0.x,Pf1.y,Pf0.z));float n110=dot(g110,vec3(Pf1.xy,Pf0.z));float n001=dot(g001,vec3(Pf0.xy,Pf1.z));float n101=dot(g101,vec3(Pf1.x,Pf0.y,Pf1.z));float n011=dot(g011,vec3(Pf0.x,Pf1.yz));float n111=dot(g111,Pf1);vec3 fade_xyz=fade(Pf0);vec4 n_z=mix(vec4(n000,n100,n010,n110),vec4(n001,n101,n011,n111),fade_xyz.z);vec2 n_yz=mix(n_z.xy,n_z.zw,fade_xyz.y);float n_xyz=mix(n_yz.x,n_yz.y,fade_xyz.x);return 2.2*n_xyz;}mat3 rotation3dY(float angle){float s=sin(angle);float c=cos(angle);return mat3(c,0.0,-s,0.0,1.0,0.0,s,0.0,c);}vec3 rotateY(vec3 v,float angle){return rotation3dY(angle)*v;}varying vec3 vNormal;varying float displacement;varying vec3 vPos;varying float vDistort;varying vec2 vUv;uniform float uTime;uniform float uSpeed;uniform float uLoadingTime;uniform float uNoiseDensity;uniform float uNoiseStrength;\n#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n#ifdef USE_TANGENT\nvarying vec3 vTangent;varying vec3 vBitangent;\n#endif\n#endif\n#include <clipping_planes_pars_vertex>\n#include <color_pars_vertex>\n#include <common>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <skinning_pars_vertex>\n#include <uv2_pars_vertex>\n#include <uv_pars_vertex>\nvoid main(){\n#include <beginnormal_vertex>\n#include <color_vertex>\n#include <defaultnormal_vertex>\n#include <morphnormal_vertex>\n#include <skinbase_vertex>\n#include <skinnormal_vertex>\n#include <uv2_vertex>\n#include <uv_vertex>\n#ifndef FLAT_SHADED\nvNormal=normalize(transformedNormal);\n#ifdef USE_TANGENT\nvTangent=normalize(transformedTangent);vBitangent=normalize(cross(vNormal,vTangent)*tangent.w);\n#endif\n#endif\n#include <begin_vertex>\n#include <clipping_planes_vertex>\n#include <displacementmap_vertex>\n#include <logdepthbuf_vertex>\n#include <morphtarget_vertex>\n#include <project_vertex>\n#include <skinning_vertex>\nvViewPosition=-mvPosition.xyz;\n#include <fog_vertex>\n#include <shadowmap_vertex>\n#include <worldpos_vertex>\nvUv=uv;float t=uTime*uSpeed;float distortion=0.75*cnoise(0.43*position*uNoiseDensity+t);vec3 pos=position+normal*distortion*uNoiseStrength*uLoadingTime;vPos=pos;gl_Position=projectionMatrix*modelViewMatrix*vec4(pos,1.);}";function QS(e){let{type:t,shader:n,color1:r,color2:i,color3:o,uTime:a,uSpeed:s,uDensity:c,uStrength:u,uFrequency:h,uAmplitude:d}=e,[f,p]=(0,l.useState)(!1),m=null!=t?t:"plane",g=wS[m];n&&"defaults"!==n&&(g=_S[n][m]);let v=function(e,t,n,r){return class extends op{constructor(){let i=Object.entries(e),o=e.colors,a=xS(o[0]),s=xS(o[1]),l=xS(o[2]),c={uC1r:{value:bS(null==a?void 0:a.r)},uC1g:{value:bS(null==a?void 0:a.g)},uC1b:{value:bS(null==a?void 0:a.b)},uC2r:{value:bS(null==s?void 0:s.r)},uC2g:{value:bS(null==s?void 0:s.g)},uC2b:{value:bS(null==s?void 0:s.b)},uC3r:{value:bS(null==l?void 0:l.r)},uC3g:{value:bS(null==l?void 0:l.g)},uC3b:{value:bS(null==l?void 0:l.b)}},u=i.reduce(((e,t)=>{let[n,r]=t,i=ks.clone({[n]:{value:r}});return yw(yw({},e),i)}),{});super({metalness:.2,userData:u,side:Ke,onBeforeCompile:e=>{e.uniforms=yw(yw(yw({},e.uniforms),u),c),e.vertexShader=t,e.fragmentShader=n}}),i.forEach((e=>{let[t]=e;return Object.defineProperty(this,t,{get:()=>this.uniforms[t].value,set:e=>this.uniforms[t].value=e})})),r&&r(this)}}}({colors:[r,i,o],uTime:a,uSpeed:s,uLoadingTime:0,uNoiseDensity:c,uNoiseStrength:u,uFrequency:h,uAmplitude:d,uIntensity:.5},g.vertex,g.fragment),y=function(e,t,n){return class extends od{constructor(){let r=Object.entries(e),i=r.reduce(((e,t)=>{let[n,r]=t,i=ks.clone({[n]:{value:r}});return yw(yw({},e),i)}),{});super({color:"#ffffff",linewidth:5,userData:i,onBeforeCompile:e=>{e.uniforms=yw(yw({},e.uniforms),i),e.vertexShader=t}}),r.forEach((e=>{let[t]=e;return Object.defineProperty(this,t,{get:()=>this.uniforms[t].value,set:e=>this.uniforms[t].value=e})})),n&&n(this)}}}({uTime:a,uSpeed:s,uNoiseDensity:c,uNoiseStrength:u,uFrequency:h,uAmplitude:d,uIntensity:.5},g.vertex);return hv({ColorShiftMaterial:v}),hv({HoveredLineMaterial:y}),(0,l.useEffect)((()=>{p(!0)}),[]),f}var{to:HS,rotDur:VS,meshDur:WS,rotDelay:qS,meshDelay:XS}={meshDelay:0,meshDur:0,rotDelay:1.7,rotDur:1,posDelay:1.3,posDur:2.2,logoTransition:3.1,text:2.5,to:1},YS=new Cm;Math.easeInOutCubic=function(e,t,n,r){return(e/=r/2)<1?n/2*e*e*e+t:n/2*((e-=2)*e*e+2)+t};var JS=192,KS=e=>{let{type:t,animate:n,range:r,rangeStart:i,rangeEnd:o,uTime:a,uSpeed:s,uStrength:c,uDensity:u,uFrequency:h,uAmplitude:d,positionX:f,positionY:p,positionZ:m,rotationX:g,rotationY:v,rotationZ:y,color1:A,color2:x,color3:b,reflection:_,wireframe:w,shader:E,rotSpringOption:S=e=>{let{rotation:t}=e;return{to:(e,n)=>ww(void 0,null,(function*(){yield e({animatedRotation:t})})),from:{rotation:uS([0,0,0])},config:{duration:300}}},posSpringOption:C=e=>{let{position:t}=e;return{to:(e,n)=>ww(void 0,null,(function*(){yield e({animatedPosition:t})})),from:{position:[0,0,0]},config:{duration:300}}}}=e,M=QS({type:t,shader:E,color1:A,color2:x,color3:b,uTime:a,uSpeed:s,uDensity:u,uStrength:c,uFrequency:h,uAmplitude:d}),{material:T,linemat:I}=function(e){let{animate:t,range:n,rangeStart:r,rangeEnd:i}=e,o=(0,l.useRef)(),a=(0,l.useRef)(),s=0;return uy(((e,l)=>{if(o.current){let e=YS.getElapsedTime();if("enabled"===n&&(e=r,e+=YS.getElapsedTime(),e>=i&&(e=r,YS.start())),e>XS){let t=o.current.userData.uLoadingTime.value,n=e<WS+XS?Math.easeInOutCubic(s,t,HS-t,1e3*WS):HS;o.current.userData.uLoadingTime.value=n,e<WS+XS&&(s+=20)}"on"===t&&(o.current.userData.uTime.value=e,void 0!==a.current&&(a.current.userData.uTime.value=e))}})),{material:o,linemat:a}}({animate:n,range:r,rangeStart:i,rangeEnd:o}),B=[f,p,m],P=uS([g,v,y]),{animatedPosition:R}=F_(C({position:B})),{animatedRotation:D}=F_(S({rotation:P}));return(0,ov.jsxs)("group",{children:[(0,ov.jsxs)(aw.mesh,{position:R,rotation:D,name:"shadergradient-mesh",children:["plane"===t&&(0,ov.jsx)("planeGeometry",{args:[10,10,1,JS]}),"sphere"===t&&(0,ov.jsx)("icosahedronGeometry",{args:[1,64]}),"waterPlane"===t&&(0,ov.jsx)("planeGeometry",{args:[10,10,JS,JS]}),M&&(0,ov.jsx)("colorShiftMaterial",{ref:T,roughness:1-_})]}),(0,ov.jsx)("mesh",{children:(0,ov.jsxs)("lineSegments",{renderOrder:1,position:B,rotation:P,visible:!1,children:["plane"===t&&(0,ov.jsx)("planeGeometry",{args:[10,10,1,36]}),"sphere"===t&&(0,ov.jsx)("icosahedronGeometry",{args:[1,12]}),"waterPlane"===t&&(0,ov.jsx)("planeGeometry",{args:[10,10,36,36]}),M&&(0,ov.jsx)("hoveredLineMaterial",{ref:I})]})})]})},ZS=((e,t,n)=>(n=null!=e?sw(pw(e)):{},((e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let i of dw(t))!mw.call(e,i)&&i!==n&&lw(e,i,{get:()=>t[i],enumerable:!(r=uw(t,i))||r.enumerable});return e})(!t&&e&&e.__esModule?n:lw(n,"default",{value:e,enumerable:!0}),e)))(Tw()),$S=ZS.parse(hS("?range=enabled&rangeStart=0&rangeEnd=40&frameRate=10&destination=onCanvas&format=gif&animate=on&axesHelper=off&brightness=1.2&cAzimuthAngle=180&cDistance=3.6&cPolarAngle=90&cameraZoom=1&color1=%23ff5005&color2=%23dbba95&color3=%23d0bce1&embedMode=off&envPreset=city&gizmoHelper=hide&grain=on&lightType=3d&pixelDensity=1&fov=45&positionX=-1.4&positionY=0&positionZ=0&reflection=0.1&rotationX=0&rotationY=10&rotationZ=50&shader=defaults&type=plane&uDensity=1.3&uSpeed=0.4&uStrength=4&uTime=0&uFrequency=5.5&wireframe=false"),{parseNumbers:!0,parseBooleans:!0,arrayFormat:"index"});function eC(e){var t=e,{control:n="props",dampingFactor:r,rotSpringOption:i,posSpringOption:o,isFigmaPlugin:a=!1,enableTransition:s=!0}=t,c=xw(t,["control","dampingFactor","rotSpringOption","posSpringOption","isFigmaPlugin","enableTransition"]);let u=yw(yw({},$S),c);"query"===n&&(u=ZS.parse(hS(c.urlString),{parseNumbers:!0,parseBooleans:!0,arrayFormat:"index"}));let h=u,{lightType:d,envPreset:f,brightness:p,grain:m,grainBlending:g,toggleAxis:v}=h,y=xw(h,["lightType","envPreset","brightness","grain","grainBlending","toggleAxis"]);return function(e,t){let{gl:n,scene:r,camera:i,size:o}=cy(),a=(0,l.useMemo)((()=>{let a=new Vw(n);a.addPass(new qw(r,i));let s={shape:1,radius:2,rotateR:Math.PI/12,rotateB:Math.PI/12*2,rotateG:Math.PI/12*3,scatter:1,blending:t,blendingMode:1,greyscale:!1,disable:e},l=new nE(o.width,o.height,s);return a.addPass(l),a}),[n,r,i,o,e,t]);(0,l.useEffect)((()=>null==a?void 0:a.setSize(o.width,o.height)),[a,o]),uy(((e,t)=>(n.autoClear=!0,void a.render(t))),1)}("off"===m,g||1),(0,ov.jsxs)(ov.Fragment,{children:[(0,ov.jsx)(yS,{lightType:d,brightness:p,envPreset:f}),(0,ov.jsx)(KS,Aw(yw({},y),{rotSpringOption:i,posSpringOption:o}),JSON.stringify(y)),v&&(0,ov.jsx)(vE,{isFigmaPlugin:a}),(0,ov.jsx)(dS,yw({dampingFactor:r,enableTransition:s},y))]})}function tC(){return tC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tC.apply(null,arguments)}const nC=new vo,rC=new vo,iC=new vo,oC=new zi;function aC(e,t,n){const r=nC.setFromMatrixPosition(e.matrixWorld);r.project(t);const i=n.width/2,o=n.height/2;return[r.x*i+i,-r.y*o+o]}const sC=e=>Math.abs(e)<1e-10?0:e;function lC(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="matrix3d(";for(let i=0;16!==i;i++)r+=sC(t[i]*e.elements[i])+(15!==i?",":")");return n+r}const cC=(uC=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],e=>lC(e,uC));var uC;const hC=(e,t)=>lC(e,(e=>[1/e,1/e,1/e,1,-1/e,-1/e,-1/e,-1,1/e,1/e,1/e,1,1,1,1,1])(t),"translate(-50%,-50%)");const dC=l.forwardRef(((e,t)=>{let{children:n,eps:r=.001,style:i,className:o,prepend:a,center:s,fullscreen:c,portal:h,distanceFactor:d,sprite:f=!1,transform:p=!1,occlude:m,onOcclude:g,castShadow:v,receiveShadow:y,material:A,geometry:x,zIndexRange:b=[16777271,0],calculatePosition:_=aC,as:w="div",wrapperClass:E,pointerEvents:S="auto",...C}=e;const{gl:M,camera:T,scene:I,size:B,raycaster:P,events:R,viewport:D}=cy(),[O]=l.useState((()=>document.createElement(w))),k=l.useRef(),L=l.useRef(null),F=l.useRef(0),z=l.useRef([0,0]),U=l.useRef(null),N=l.useRef(null),j=(null==h?void 0:h.current)||R.connected||M.domElement.parentNode,G=l.useRef(null),Q=l.useRef(!1),H=l.useMemo((()=>m&&"blending"!==m||Array.isArray(m)&&m.length&&function(e){return e&&"object"===typeof e&&"current"in e}(m[0])),[m]);l.useLayoutEffect((()=>{const e=M.domElement;m&&"blending"===m?(e.style.zIndex=`${Math.floor(b[0]/2)}`,e.style.position="absolute",e.style.pointerEvents="none"):(e.style.zIndex=null,e.style.position=null,e.style.pointerEvents=null)}),[m]),l.useLayoutEffect((()=>{if(L.current){const e=k.current=u.createRoot(O);if(I.updateMatrixWorld(),p)O.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const e=_(L.current,T,B);O.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${e[0]}px,${e[1]}px,0);transform-origin:0 0;`}return j&&(a?j.prepend(O):j.appendChild(O)),()=>{j&&j.removeChild(O),e.unmount()}}}),[j,p]),l.useLayoutEffect((()=>{E&&(O.className=E)}),[E]);const V=l.useMemo((()=>p?{position:"absolute",top:0,left:0,width:B.width,height:B.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...c&&{top:-B.height/2,left:-B.width/2,width:B.width,height:B.height},...i}),[i,s,c,B,p]),W=l.useMemo((()=>({position:"absolute",pointerEvents:S})),[S]);l.useLayoutEffect((()=>{var e,r;(Q.current=!1,p)?null==(e=k.current)||e.render(l.createElement("div",{ref:U,style:V},l.createElement("div",{ref:N,style:W},l.createElement("div",{ref:t,className:o,style:i,children:n})))):null==(r=k.current)||r.render(l.createElement("div",{ref:t,style:V,className:o,children:n}))}));const q=l.useRef(!0);uy((e=>{if(L.current){T.updateMatrixWorld(),L.current.updateWorldMatrix(!0,!1);const e=p?z.current:_(L.current,T,B);if(p||Math.abs(F.current-T.zoom)>r||Math.abs(z.current[0]-e[0])>r||Math.abs(z.current[1]-e[1])>r){const t=function(e,t){const n=nC.setFromMatrixPosition(e.matrixWorld),r=rC.setFromMatrixPosition(t.matrixWorld),i=n.sub(r),o=t.getWorldDirection(iC);return i.angleTo(o)>Math.PI/2}(L.current,T);let n=!1;H&&(Array.isArray(m)?n=m.map((e=>e.current)):"blending"!==m&&(n=[I]));const r=q.current;if(n){const e=function(e,t,n,r){const i=nC.setFromMatrixPosition(e.matrixWorld),o=i.clone();o.project(t),oC.set(o.x,o.y),n.setFromCamera(oC,t);const a=n.intersectObjects(r,!0);if(a.length){const e=a[0].distance;return i.distanceTo(n.ray.origin)<e}return!0}(L.current,T,P,n);q.current=e&&!t}else q.current=!t;r!==q.current&&(g?g(!q.current):O.style.display=q.current?"block":"none");const i=Math.floor(b[0]/2),o=m?H?[b[0],i]:[i-1,0]:b;if(O.style.zIndex=`${function(e,t,n){if(t instanceof js||t instanceof pl){const r=nC.setFromMatrixPosition(e.matrixWorld),i=rC.setFromMatrixPosition(t.matrixWorld),o=r.distanceTo(i),a=(n[1]-n[0])/(t.far-t.near),s=n[1]-a*t.far;return Math.round(a*o+s)}}(L.current,T,o)}`,p){const[e,t]=[B.width/2,B.height/2],n=T.projectionMatrix.elements[5]*t,{isOrthographicCamera:r,top:i,left:o,bottom:a,right:s}=T,l=cC(T.matrixWorldInverse),c=r?`scale(${n})translate(${sC(-(s+o)/2)}px,${sC((i+a)/2)}px)`:`translateZ(${n}px)`;let u=L.current.matrixWorld;f&&(u=T.matrixWorldInverse.clone().transpose().copyPosition(u).scale(L.current.scale),u.elements[3]=u.elements[7]=u.elements[11]=0,u.elements[15]=1),O.style.width=B.width+"px",O.style.height=B.height+"px",O.style.perspective=r?"":`${n}px`,U.current&&N.current&&(U.current.style.transform=`${c}${l}translate(${e}px,${t}px)`,N.current.style.transform=hC(u,1/((d||10)/400)))}else{const t=void 0===d?1:function(e,t){if(t instanceof pl)return t.zoom;if(t instanceof js){const n=nC.setFromMatrixPosition(e.matrixWorld),r=rC.setFromMatrixPosition(t.matrixWorld),i=t.fov*Math.PI/180,o=n.distanceTo(r);return 1/(2*Math.tan(i/2)*o)}return 1}(L.current,T)*d;O.style.transform=`translate3d(${e[0]}px,${e[1]}px,0) scale(${t})`}z.current=e,F.current=T.zoom}}if(!H&&G.current&&!Q.current)if(p){if(U.current){const e=U.current.children[0];if(null!=e&&e.clientWidth&&null!=e&&e.clientHeight){const{isOrthographicCamera:t}=T;if(t||x)C.scale&&(Array.isArray(C.scale)?C.scale instanceof vo?G.current.scale.copy(C.scale.clone().divideScalar(1)):G.current.scale.set(1/C.scale[0],1/C.scale[1],1/C.scale[2]):G.current.scale.setScalar(1/C.scale));else{const t=(d||10)/400,n=e.clientWidth*t,r=e.clientHeight*t;G.current.scale.set(n,r,1)}Q.current=!0}}}else{const t=O.children[0];if(null!=t&&t.clientWidth&&null!=t&&t.clientHeight){const e=1/D.factor,n=t.clientWidth*e,r=t.clientHeight*e;G.current.scale.set(n,r,1),Q.current=!0}G.current.lookAt(e.camera.position)}}));const X=l.useMemo((()=>({vertexShader:p?void 0:'\n          /*\n            This shader is from the THREE\'s SpriteMaterial.\n            We need to turn the backing plane into a Sprite\n            (make it always face the camera) if "transfrom"\n            is false.\n          */\n          #include <common>\n\n          void main() {\n            vec2 center = vec2(0., 1.);\n            float rotation = 0.0;\n\n            // This is somewhat arbitrary, but it seems to work well\n            // Need to figure out how to derive this dynamically if it even matters\n            float size = 0.03;\n\n            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n            vec2 scale;\n            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n            bool isPerspective = isPerspectiveMatrix( projectionMatrix );\n            if ( isPerspective ) scale *= - mvPosition.z;\n\n            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;\n            vec2 rotatedPosition;\n            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n            mvPosition.xy += rotatedPosition;\n\n            gl_Position = projectionMatrix * mvPosition;\n          }\n      ',fragmentShader:"\n        void main() {\n          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n        }\n      "})),[p]);return l.createElement("group",tC({},C,{ref:L}),m&&!H&&l.createElement("mesh",{castShadow:v,receiveShadow:y,ref:G},x||l.createElement("planeGeometry",null),A||l.createElement("shaderMaterial",{side:Ke,vertexShader:X.vertexShader,fragmentShader:X.fragmentShader})))}));function fC(e){let{onChanged:t,portal:n,preventDefault:r=!0,scroll:i=!0,keyCode:o=9}=e;const a=l.useRef(0),s=cy((e=>e.setEvents)),c=cy((e=>e.get)),u=cy((e=>e.gl));return l.useEffect((()=>{var e;let l,h=[];const d=c().events.filter,f=null!==(e=null==n?void 0:n.current)&&void 0!==e?e:u.domElement.parentNode,p=()=>f&&t&&t(h,Math.round(a.current)%h.length);s({filter:(e,t)=>{let n=[...e];n.length===h.length&&h.every((e=>n.map((e=>e.object.uuid)).includes(e.object.uuid)))||(a.current=0,h=n,p()),d&&(n=d(n,t));for(let r=0;r<Math.round(a.current)%n.length;r++){const e=n.shift();n=[...n,e]}return n}});const m=e=>{var t,n;a.current=e(a.current),null==(t=c().events.handlers)||t.onPointerCancel(void 0),null==(n=c().events.handlers)||n.onPointerMove(l),p()},g=e=>{(e.keyCode||e.which)===o&&(r&&e.preventDefault(),h.length>1&&m((e=>e+1)))},v=e=>{r&&e.preventDefault();let t=0;e||(e=window.event),e.wheelDelta?t=e.wheelDelta/120:e.detail&&(t=-e.detail/3),h.length>1&&m((e=>Math.abs(e-t)))},y=e=>l=e;return document.addEventListener("pointermove",y,{passive:!0}),i&&document.addEventListener("wheel",v),void 0!==o&&document.addEventListener("keydown",g),()=>{s({filter:d}),void 0!==o&&document.removeEventListener("keydown",g),i&&document.removeEventListener("wheel",v),document.removeEventListener("pointermove",y)}}),[u,c,s,r,i,o]),null}function pC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"pointer",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:document.body;l.useEffect((()=>{if(e)return r.style.cursor=t,()=>{r.style.cursor=n}}),[e])}let mC=0;const gC=Zg((e=>(Op.onStart=(t,n,r)=>{e({active:!0,item:t,loaded:n,total:r,progress:(n-mC)/(r-mC)*100})},Op.onLoad=()=>{e({active:!1})},Op.onError=t=>e((e=>({errors:[...e.errors,t]}))),Op.onProgress=(t,n,r)=>{n===r&&(mC=r),e({active:!0,item:t,loaded:n,total:r,progress:(n-mC)/(r-mC)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0})));function vC(e){let{children:t}=e;const n=gC();return l.createElement(l.Fragment,null,null==t?void 0:t(n))}const yC=e=>`Loading ${e.toFixed(2)}%`;function AC(e){let{containerStyles:t,innerStyles:n,barStyles:r,dataStyles:i,dataInterpolation:o=yC,initialState:a=e=>e}=e;const{active:s,progress:c}=gC(),u=l.useRef(0),h=l.useRef(0),d=l.useRef(null),[f,p]=l.useState(a(s));l.useEffect((()=>{let e;return s!==f&&(e=setTimeout((()=>p(s)),300)),()=>clearTimeout(e)}),[f,s]);const m=l.useCallback((()=>{d.current&&(u.current+=(c-u.current)/2,(u.current>.95*c||100===c)&&(u.current=c),d.current.innerText=o(u.current),u.current<c&&(h.current=requestAnimationFrame(m)))}),[o,c]);return l.useEffect((()=>(m(),()=>cancelAnimationFrame(h.current))),[m]),f?l.createElement("div",{style:{...xC.container,opacity:s?1:0,...t}},l.createElement("div",null,l.createElement("div",{style:{...xC.inner,...n}},l.createElement("div",{style:{...xC.bar,transform:`scaleX(${c/100})`,...r}}),l.createElement("span",{ref:d,style:{...xC.data,...i}})))):null}const xC={container:{position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"#171717",display:"flex",alignItems:"center",justifyContent:"center",transition:"opacity 300ms ease",zIndex:1e3},inner:{width:100,height:3,background:"#272727",textAlign:"center"},bar:{height:3,width:"100%",background:"white",transition:"transform 200ms",transformOrigin:"left center"},data:{display:"inline-block",position:"relative",fontVariantNumeric:"tabular-nums",marginTop:"0.8em",color:"#f0f0f0",fontSize:"0.6em",fontFamily:'-apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", "Helvetica Neue", Helvetica, Arial, Roboto, Ubuntu, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',whiteSpace:"nowrap"}};const bC={toVector:(e,t)=>(void 0===e&&(e=t),Array.isArray(e)?e:[e,e]),add:(e,t)=>[e[0]+t[0],e[1]+t[1]],sub:(e,t)=>[e[0]-t[0],e[1]-t[1]],addTo(e,t){e[0]+=t[0],e[1]+=t[1]},subTo(e,t){e[0]-=t[0],e[1]-=t[1]}};function _C(e,t,n){return 0===t||Math.abs(t)===1/0?Math.pow(e,5*n):e*t*n/(t+n*e)}function wC(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.15;return 0===r?function(e,t,n){return Math.max(t,Math.min(e,n))}(e,t,n):e<t?-_C(t-e,n-t,r)+t:e>n?+_C(e-n,n-t,r)+n:e}function EC(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function SC(e,t,n){return(t=EC(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function MC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CC(Object(n),!0).forEach((function(t){SC(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CC(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}const TC={pointer:{start:"down",change:"move",end:"up"},mouse:{start:"down",change:"move",end:"up"},touch:{start:"start",change:"move",end:"end"},gesture:{start:"start",change:"change",end:"end"}};function IC(e){return e?e[0].toUpperCase()+e.slice(1):""}const BC=["enter","leave"];function PC(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=TC[e],i=r&&r[t]||t;return"on"+IC(e)+IC(i)+(function(){let e=arguments.length>1?arguments[1]:void 0;return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&!BC.includes(e)}(n,i)?"Capture":"")}const RC=["gotpointercapture","lostpointercapture"];function DC(e){let t=e.substring(2).toLowerCase();const n=!!~t.indexOf("passive");n&&(t=t.replace("passive",""));const r=RC.includes(t)?"capturecapture":"capture",i=!!~t.indexOf(r);return i&&(t=t.replace("capture","")),{device:t,capture:i,passive:n}}function OC(e){return"touches"in e}function kC(e){return OC(e)?"touch":"pointerType"in e?e.pointerType:"mouse"}function LC(e){return OC(e)?function(e){return"touchend"===e.type||"touchcancel"===e.type?e.changedTouches:e.targetTouches}(e)[0]:e}function FC(e,t){try{const n=t.clientX-e.clientX,r=t.clientY-e.clientY,i=(t.clientX+e.clientX)/2,o=(t.clientY+e.clientY)/2,a=Math.hypot(n,r),s=-180*Math.atan2(n,r)/Math.PI;return{angle:s,distance:a,origin:[i,o]}}catch(n){}return null}function zC(e){return function(e){return Array.from(e.touches).filter((t=>{var n,r;return t.target===e.currentTarget||(null===(n=e.currentTarget)||void 0===n||null===(r=n.contains)||void 0===r?void 0:r.call(n,t.target))}))}(e).map((e=>e.identifier))}function UC(e,t){const[n,r]=Array.from(e.touches).filter((e=>t.includes(e.identifier)));return FC(n,r)}function NC(e){const t=LC(e);return OC(e)?t.identifier:t.pointerId}function jC(e){const t=LC(e);return[t.clientX,t.clientY]}function GC(e){let{deltaX:t,deltaY:n,deltaMode:r}=e;return 1===r?(t*=40,n*=40):2===r&&(t*=800,n*=800),[t,n]}function QC(e){if("function"===typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e(...n)}return e}function HC(){}function VC(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?HC:1===t.length?t[0]:function(){let e;for(const n of t)e=n.apply(this,arguments)||e;return e}}function WC(e,t){return Object.assign({},t,e||{})}class qC{constructor(e,t,n){this.ctrl=e,this.args=t,this.key=n,this.state||(this.state={},this.computeValues([0,0]),this.computeInitial(),this.init&&this.init(),this.reset())}get state(){return this.ctrl.state[this.key]}set state(e){this.ctrl.state[this.key]=e}get shared(){return this.ctrl.state.shared}get eventStore(){return this.ctrl.gestureEventStores[this.key]}get timeoutStore(){return this.ctrl.gestureTimeoutStores[this.key]}get config(){return this.ctrl.config[this.key]}get sharedConfig(){return this.ctrl.config.shared}get handler(){return this.ctrl.handlers[this.key]}reset(){const{state:e,shared:t,ingKey:n,args:r}=this;t[n]=e._active=e.active=e._blocked=e._force=!1,e._step=[!1,!1],e.intentional=!1,e._movement=[0,0],e._distance=[0,0],e._direction=[0,0],e._delta=[0,0],e._bounds=[[-1/0,1/0],[-1/0,1/0]],e.args=r,e.axis=void 0,e.memo=void 0,e.elapsedTime=e.timeDelta=0,e.direction=[0,0],e.distance=[0,0],e.overflow=[0,0],e._movementBound=[!1,!1],e.velocity=[0,0],e.movement=[0,0],e.delta=[0,0],e.timeStamp=0}start(e){const t=this.state,n=this.config;t._active||(this.reset(),this.computeInitial(),t._active=!0,t.target=e.target,t.currentTarget=e.currentTarget,t.lastOffset=n.from?QC(n.from,t):t.offset,t.offset=t.lastOffset,t.startTime=t.timeStamp=e.timeStamp)}computeValues(e){const t=this.state;t._values=e,t.values=this.config.transform(e)}computeInitial(){const e=this.state;e._initial=e._values,e.initial=e.values}compute(e){const{state:t,config:n,shared:r}=this;t.args=this.args;let i=0;if(e&&(t.event=e,n.preventDefault&&e.cancelable&&t.event.preventDefault(),t.type=e.type,r.touches=this.ctrl.pointerIds.size||this.ctrl.touchIds.size,r.locked=!!document.pointerLockElement,Object.assign(r,function(e){const t={};if("buttons"in e&&(t.buttons=e.buttons),"shiftKey"in e){const{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o}=e;Object.assign(t,{shiftKey:n,altKey:r,metaKey:i,ctrlKey:o})}return t}(e)),r.down=r.pressed=r.buttons%2===1||r.touches>0,i=e.timeStamp-t.timeStamp,t.timeStamp=e.timeStamp,t.elapsedTime=t.timeStamp-t.startTime),t._active){const e=t._delta.map(Math.abs);bC.addTo(t._distance,e)}this.axisIntent&&this.axisIntent(e);const[o,a]=t._movement,[s,l]=n.threshold,{_step:c,values:u}=t;if(n.hasCustomTransform?(!1===c[0]&&(c[0]=Math.abs(o)>=s&&u[0]),!1===c[1]&&(c[1]=Math.abs(a)>=l&&u[1])):(!1===c[0]&&(c[0]=Math.abs(o)>=s&&Math.sign(o)*s),!1===c[1]&&(c[1]=Math.abs(a)>=l&&Math.sign(a)*l)),t.intentional=!1!==c[0]||!1!==c[1],!t.intentional)return;const h=[0,0];if(n.hasCustomTransform){const[e,t]=u;h[0]=!1!==c[0]?e-c[0]:0,h[1]=!1!==c[1]?t-c[1]:0}else h[0]=!1!==c[0]?o-c[0]:0,h[1]=!1!==c[1]?a-c[1]:0;this.restrictToAxis&&!t._blocked&&this.restrictToAxis(h);const d=t.offset,f=t._active&&!t._blocked||t.active;f&&(t.first=t._active&&!t.active,t.last=!t._active&&t.active,t.active=r[this.ingKey]=t._active,e&&(t.first&&("bounds"in n&&(t._bounds=QC(n.bounds,t)),this.setup&&this.setup()),t.movement=h,this.computeOffset()));const[p,m]=t.offset,[[g,v],[y,A]]=t._bounds;t.overflow=[p<g?-1:p>v?1:0,m<y?-1:m>A?1:0],t._movementBound[0]=!!t.overflow[0]&&(!1===t._movementBound[0]?t._movement[0]:t._movementBound[0]),t._movementBound[1]=!!t.overflow[1]&&(!1===t._movementBound[1]?t._movement[1]:t._movementBound[1]);const x=t._active&&n.rubberband||[0,0];if(t.offset=function(e,t,n){let[r,i]=t,[o,a]=n;const[[s,l],[c,u]]=e;return[wC(r,s,l,o),wC(i,c,u,a)]}(t._bounds,t.offset,x),t.delta=bC.sub(t.offset,d),this.computeMovement(),f&&(!t.last||i>32)){t.delta=bC.sub(t.offset,d);const e=t.delta.map(Math.abs);bC.addTo(t.distance,e),t.direction=t.delta.map(Math.sign),t._direction=t._delta.map(Math.sign),!t.first&&i>0&&(t.velocity=[e[0]/i,e[1]/i],t.timeDelta=i)}}emit(){const e=this.state,t=this.shared,n=this.config;if(e._active||this.clean(),(e._blocked||!e.intentional)&&!e._force&&!n.triggerAllEvents)return;const r=this.handler(MC(MC(MC({},t),e),{},{[this.aliasKey]:e.values}));void 0!==r&&(e.memo=r)}clean(){this.eventStore.clean(),this.timeoutStore.clean()}}class XC extends qC{constructor(){super(...arguments),SC(this,"aliasKey","xy")}reset(){super.reset(),this.state.axis=void 0}init(){this.state.offset=[0,0],this.state.lastOffset=[0,0]}computeOffset(){this.state.offset=bC.add(this.state.lastOffset,this.state.movement)}computeMovement(){this.state.movement=bC.sub(this.state.offset,this.state.lastOffset)}axisIntent(e){const t=this.state,n=this.config;if(!t.axis&&e){const r="object"===typeof n.axisThreshold?n.axisThreshold[kC(e)]:n.axisThreshold;t.axis=function(e,t){let[n,r]=e;const i=Math.abs(n),o=Math.abs(r);return i>o&&i>t?"x":o>i&&o>t?"y":void 0}(t._movement,r)}t._blocked=(n.lockDirection||!!n.axis)&&!t.axis||!!n.axis&&n.axis!==t.axis}restrictToAxis(e){if(this.config.axis||this.config.lockDirection)switch(this.state.axis){case"x":e[1]=0;break;case"y":e[0]=0}}}const YC=e=>e,JC={enabled(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},eventOptions:(e,t,n)=>MC(MC({},n.shared.eventOptions),e),preventDefault(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},triggerAllEvents(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]},rubberband(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return[.15,.15];case!1:return[0,0];default:return bC.toVector(e)}},from:e=>"function"===typeof e?e:null!=e?bC.toVector(e):void 0,transform(e,t,n){const r=e||n.shared.transform;return this.hasCustomTransform=!!r,r||YC},threshold:e=>bC.toVector(e,0)};const KC=MC(MC({},JC),{},{axis(e,t,n){let{axis:r}=n;if(this.lockDirection="lock"===r,!this.lockDirection)return r},axisThreshold(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:0},bounds(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("function"===typeof e)return t=>KC.bounds(e(t));if("current"in e)return()=>e.current;if("function"===typeof HTMLElement&&e instanceof HTMLElement)return e;const{left:t=-1/0,right:n=1/0,top:r=-1/0,bottom:i=1/0}=e;return[[t,n],[r,i]]}}),ZC={ArrowRight:function(e){return[e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowLeft:function(e){return[-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1),0]},ArrowUp:function(e){return[0,-1*e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]},ArrowDown:function(e){return[0,e*(arguments.length>1&&void 0!==arguments[1]?arguments[1]:1)]}};const $C="undefined"!==typeof window&&window.document&&window.document.createElement;function eM(){return $C&&"ontouchstart"in window}const tM={isBrowser:$C,gesture:function(){try{return"constructor"in GestureEvent}catch(NQ){return!1}}(),touch:eM(),touchscreen:eM()||$C&&window.navigator.maxTouchPoints>1,pointer:$C&&"onpointerdown"in window,pointerLock:$C&&"exitPointerLock"in window.document},nM=.5,rM=50,iM=250,oM={mouse:0,touch:0,pen:8},aM=MC(MC({},KC),{},{device(e,t,n){let{pointer:{touch:r=!1,lock:i=!1,mouse:o=!1}={}}=n;return this.pointerLock=i&&tM.pointerLock,tM.touch&&r?"touch":this.pointerLock?"mouse":tM.pointer&&!o?"pointer":tM.touch?"touch":"mouse"},preventScrollAxis(e,t,n){let{preventScroll:r}=n;if(this.preventScrollDelay="number"===typeof r?r:r||void 0===r&&e?250:void 0,tM.touchscreen&&!1!==r)return e||(void 0!==r?"y":void 0)},pointerCapture(e,t,n){let{pointer:{capture:r=!0,buttons:i=1,keys:o=!0}={}}=n;return this.pointerButtons=i,this.keys=o,!this.pointerLock&&"pointer"===this.device&&r},threshold(e,t,n){let{filterTaps:r=!1,tapsThreshold:i=3,axis:o}=n;const a=bC.toVector(e,r?i:o?1:0);return this.filterTaps=r,this.tapsThreshold=i,a},swipe(){let{velocity:e=nM,distance:t=rM,duration:n=iM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{velocity:this.transform(bC.toVector(e)),distance:this.transform(bC.toVector(t)),duration:n}},delay(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;switch(e){case!0:return 180;case!1:return 0;default:return e}},axisThreshold:e=>e?MC(MC({},oM),e):oM,keyboardDisplacement(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:10}});function sM(e){const[t,n]=e.overflow,[r,i]=e._delta,[o,a]=e._direction;(t<0&&r>0&&o<0||t>0&&r<0&&o>0)&&(e._movement[0]=e._movementBound[0]),(n<0&&i>0&&a<0||n>0&&i<0&&a>0)&&(e._movement[1]=e._movementBound[1])}const lM=MC(MC({},JC),{},{device(e,t,n){let{shared:r,pointer:{touch:i=!1}={}}=n;if(r.target&&!tM.touch&&tM.gesture)return"gesture";if(tM.touch&&i)return"touch";if(tM.touchscreen){if(tM.pointer)return"pointer";if(tM.touch)return"touch"}},bounds(e,t,n){let{scaleBounds:r={},angleBounds:i={}}=n;const o=e=>{const t=WC(QC(r,e),{min:-1/0,max:1/0});return[t.min,t.max]},a=e=>{const t=WC(QC(i,e),{min:-1/0,max:1/0});return[t.min,t.max]};return"function"!==typeof r&&"function"!==typeof i?[o(),a()]:e=>[o(e),a(e)]},threshold(e,t,n){this.lockDirection="lock"===n.axis;return bC.toVector(e,this.lockDirection?[.1,3]:0)},modifierKey:e=>void 0===e?"ctrlKey":e,pinchOnWheel(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});const cM=MC(MC({},KC),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}});const uM=KC;const hM=KC;const dM=MC(MC({},KC),{},{mouseOnly:function(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]}}),fM=new Map,pM=new Map;function mM(e){fM.set(e.key,e.engine),pM.set(e.key,e.resolver)}const gM={key:"drag",engine:class extends XC{constructor(){super(...arguments),SC(this,"ingKey","dragging")}reset(){super.reset();const e=this.state;e._pointerId=void 0,e._pointerActive=!1,e._keyboardActive=!1,e._preventScroll=!1,e._delayed=!1,e.swipe=[0,0],e.tap=!1,e.canceled=!1,e.cancel=this.cancel.bind(this)}setup(){const e=this.state;if(e._bounds instanceof HTMLElement){const t=e._bounds.getBoundingClientRect(),n=e.currentTarget.getBoundingClientRect(),r={left:t.left-n.left+e.offset[0],right:t.right-n.right+e.offset[0],top:t.top-n.top+e.offset[1],bottom:t.bottom-n.bottom+e.offset[1]};e._bounds=KC.bounds(r)}}cancel(){const e=this.state;e.canceled||(e.canceled=!0,e._active=!1,setTimeout((()=>{this.compute(),this.emit()}),0))}setActive(){this.state._active=this.state._pointerActive||this.state._keyboardActive}clean(){this.pointerClean(),this.state._pointerActive=!1,this.state._keyboardActive=!1,super.clean()}pointerDown(e){const t=this.config,n=this.state;if(null!=e.buttons&&(Array.isArray(t.pointerButtons)?!t.pointerButtons.includes(e.buttons):-1!==t.pointerButtons&&t.pointerButtons!==e.buttons))return;const r=this.ctrl.setEventIds(e);t.pointerCapture&&e.target.setPointerCapture(e.pointerId),r&&r.size>1&&n._pointerActive||(this.start(e),this.setupPointer(e),n._pointerId=NC(e),n._pointerActive=!0,this.computeValues(jC(e)),this.computeInitial(),t.preventScrollAxis&&"mouse"!==kC(e)?(n._active=!1,this.setupScrollPrevention(e)):t.delay>0?(this.setupDelayTrigger(e),t.triggerAllEvents&&(this.compute(e),this.emit())):this.startPointerDrag(e))}startPointerDrag(e){const t=this.state;t._active=!0,t._preventScroll=!0,t._delayed=!1,this.compute(e),this.emit()}pointerMove(e){const t=this.state,n=this.config;if(!t._pointerActive)return;const r=NC(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;const i=jC(e);return document.pointerLockElement===e.target?t._delta=[e.movementX,e.movementY]:(t._delta=bC.sub(i,t._values),this.computeValues(i)),bC.addTo(t._movement,t._delta),this.compute(e),t._delayed&&t.intentional?(this.timeoutStore.remove("dragDelay"),t.active=!1,void this.startPointerDrag(e)):n.preventScrollAxis&&!t._preventScroll?t.axis?t.axis===n.preventScrollAxis||"xy"===n.preventScrollAxis?(t._active=!1,void this.clean()):(this.timeoutStore.remove("startPointerDrag"),void this.startPointerDrag(e)):void 0:void this.emit()}pointerUp(e){this.ctrl.setEventIds(e);try{this.config.pointerCapture&&e.target.hasPointerCapture(e.pointerId)&&e.target.releasePointerCapture(e.pointerId)}catch(a){0}const t=this.state,n=this.config;if(!t._active||!t._pointerActive)return;const r=NC(e);if(void 0!==t._pointerId&&r!==t._pointerId)return;this.state._pointerActive=!1,this.setActive(),this.compute(e);const[i,o]=t._distance;if(t.tap=i<=n.tapsThreshold&&o<=n.tapsThreshold,t.tap&&n.filterTaps)t._force=!0;else{const[e,r]=t._delta,[i,o]=t._movement,[a,s]=n.swipe.velocity,[l,c]=n.swipe.distance,u=n.swipe.duration;if(t.elapsedTime<u){const n=Math.abs(e/t.timeDelta),u=Math.abs(r/t.timeDelta);n>a&&Math.abs(i)>l&&(t.swipe[0]=Math.sign(e)),u>s&&Math.abs(o)>c&&(t.swipe[1]=Math.sign(r))}}this.emit()}pointerClick(e){!this.state.tap&&e.detail>0&&(e.preventDefault(),e.stopPropagation())}setupPointer(e){const t=this.config,n=t.device;t.pointerLock&&e.currentTarget.requestPointerLock(),t.pointerCapture||(this.eventStore.add(this.sharedConfig.window,n,"change",this.pointerMove.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"end",this.pointerUp.bind(this)),this.eventStore.add(this.sharedConfig.window,n,"cancel",this.pointerUp.bind(this)))}pointerClean(){this.config.pointerLock&&document.pointerLockElement===this.state.currentTarget&&document.exitPointerLock()}preventScroll(e){this.state._preventScroll&&e.cancelable&&e.preventDefault()}setupScrollPrevention(e){this.state._preventScroll=!1,function(e){"persist"in e&&"function"===typeof e.persist&&e.persist()}(e);const t=this.eventStore.add(this.sharedConfig.window,"touch","change",this.preventScroll.bind(this),{passive:!1});this.eventStore.add(this.sharedConfig.window,"touch","end",t),this.eventStore.add(this.sharedConfig.window,"touch","cancel",t),this.timeoutStore.add("startPointerDrag",this.startPointerDrag.bind(this),this.config.preventScrollDelay,e)}setupDelayTrigger(e){this.state._delayed=!0,this.timeoutStore.add("dragDelay",(()=>{this.state._step=[0,0],this.startPointerDrag(e)}),this.config.delay)}keyDown(e){const t=ZC[e.key];if(t){const n=this.state,r=e.shiftKey?10:e.altKey?.1:1;this.start(e),n._delta=t(this.config.keyboardDisplacement,r),n._keyboardActive=!0,bC.addTo(n._movement,n._delta),this.compute(e),this.emit()}}keyUp(e){e.key in ZC&&(this.state._keyboardActive=!1,this.setActive(),this.compute(e),this.emit())}bind(e){const t=this.config.device;e(t,"start",this.pointerDown.bind(this)),this.config.pointerCapture&&(e(t,"change",this.pointerMove.bind(this)),e(t,"end",this.pointerUp.bind(this)),e(t,"cancel",this.pointerUp.bind(this)),e("lostPointerCapture","",this.pointerUp.bind(this))),this.config.keys&&(e("key","down",this.keyDown.bind(this)),e("key","up",this.keyUp.bind(this))),this.config.filterTaps&&e("click","",this.pointerClick.bind(this),{capture:!0,passive:!1})}},resolver:aM},vM={key:"hover",engine:class extends XC{constructor(){super(...arguments),SC(this,"ingKey","hovering")}enter(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.start(e),this.computeValues(jC(e)),this.compute(e),this.emit())}leave(e){if(this.config.mouseOnly&&"mouse"!==e.pointerType)return;const t=this.state;if(!t._active)return;t._active=!1;const n=jC(e);t._movement=t._delta=bC.sub(n,t._values),this.computeValues(n),this.compute(e),t.delta=t.movement,this.emit()}bind(e){e("pointer","enter",this.enter.bind(this)),e("pointer","leave",this.leave.bind(this))}},resolver:dM},yM={key:"move",engine:class extends XC{constructor(){super(...arguments),SC(this,"ingKey","moving")}move(e){this.config.mouseOnly&&"mouse"!==e.pointerType||(this.state._active?this.moveChange(e):this.moveStart(e),this.timeoutStore.add("moveEnd",this.moveEnd.bind(this)))}moveStart(e){this.start(e),this.computeValues(jC(e)),this.compute(e),this.computeInitial(),this.emit()}moveChange(e){if(!this.state._active)return;const t=jC(e),n=this.state;n._delta=bC.sub(t,n._values),bC.addTo(n._movement,n._delta),this.computeValues(t),this.compute(e),this.emit()}moveEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}bind(e){e("pointer","change",this.move.bind(this)),e("pointer","leave",this.moveEnd.bind(this))}},resolver:cM},AM={key:"pinch",engine:class extends qC{constructor(){super(...arguments),SC(this,"ingKey","pinching"),SC(this,"aliasKey","da")}init(){this.state.offset=[1,0],this.state.lastOffset=[1,0],this.state._pointerEvents=new Map}reset(){super.reset();const e=this.state;e._touchIds=[],e.canceled=!1,e.cancel=this.cancel.bind(this),e.turns=0}computeOffset(){const{type:e,movement:t,lastOffset:n}=this.state;this.state.offset="wheel"===e?bC.add(t,n):[(1+t[0])*n[0],t[1]+n[1]]}computeMovement(){const{offset:e,lastOffset:t}=this.state;this.state.movement=[e[0]/t[0],e[1]-t[1]]}axisIntent(){const e=this.state,[t,n]=e._movement;if(!e.axis){const r=30*Math.abs(t)-Math.abs(n);r<0?e.axis="angle":r>0&&(e.axis="scale")}}restrictToAxis(e){this.config.lockDirection&&("scale"===this.state.axis?e[1]=0:"angle"===this.state.axis&&(e[0]=0))}cancel(){const e=this.state;e.canceled||setTimeout((()=>{e.canceled=!0,e._active=!1,this.compute(),this.emit()}),0)}touchStart(e){this.ctrl.setEventIds(e);const t=this.state,n=this.ctrl.touchIds;if(t._active&&t._touchIds.every((e=>n.has(e))))return;if(n.size<2)return;this.start(e),t._touchIds=Array.from(n).slice(0,2);const r=UC(e,t._touchIds);r&&this.pinchStart(e,r)}pointerStart(e){if(null!=e.buttons&&e.buttons%2!==1)return;this.ctrl.setEventIds(e),e.target.setPointerCapture(e.pointerId);const t=this.state,n=t._pointerEvents,r=this.ctrl.pointerIds;if(t._active&&Array.from(n.keys()).every((e=>r.has(e))))return;if(n.size<2&&n.set(e.pointerId,e),t._pointerEvents.size<2)return;this.start(e);const i=FC(...Array.from(n.values()));i&&this.pinchStart(e,i)}pinchStart(e,t){this.state.origin=t.origin,this.computeValues([t.distance,t.angle]),this.computeInitial(),this.compute(e),this.emit()}touchMove(e){if(!this.state._active)return;const t=UC(e,this.state._touchIds);t&&this.pinchMove(e,t)}pointerMove(e){const t=this.state._pointerEvents;if(t.has(e.pointerId)&&t.set(e.pointerId,e),!this.state._active)return;const n=FC(...Array.from(t.values()));n&&this.pinchMove(e,n)}pinchMove(e,t){const n=this.state,r=n._values[1],i=t.angle-r;let o=0;Math.abs(i)>270&&(o+=Math.sign(i)),this.computeValues([t.distance,t.angle-360*o]),n.origin=t.origin,n.turns=o,n._movement=[n._values[0]/n._initial[0]-1,n._values[1]-n._initial[1]],this.compute(e),this.emit()}touchEnd(e){this.ctrl.setEventIds(e),this.state._active&&this.state._touchIds.some((e=>!this.ctrl.touchIds.has(e)))&&(this.state._active=!1,this.compute(e),this.emit())}pointerEnd(e){const t=this.state;this.ctrl.setEventIds(e);try{e.target.releasePointerCapture(e.pointerId)}catch(n){}t._pointerEvents.has(e.pointerId)&&t._pointerEvents.delete(e.pointerId),t._active&&t._pointerEvents.size<2&&(t._active=!1,this.compute(e),this.emit())}gestureStart(e){e.cancelable&&e.preventDefault();const t=this.state;t._active||(this.start(e),this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY],this.compute(e),this.emit())}gestureMove(e){if(e.cancelable&&e.preventDefault(),!this.state._active)return;const t=this.state;this.computeValues([e.scale,e.rotation]),t.origin=[e.clientX,e.clientY];const n=t._movement;t._movement=[e.scale-1,e.rotation],t._delta=bC.sub(t._movement,n),this.compute(e),this.emit()}gestureEnd(e){this.state._active&&(this.state._active=!1,this.compute(e),this.emit())}wheel(e){const t=this.config.modifierKey;t&&!(Array.isArray(t)?t.find((t=>e[t])):e[t])||(this.state._active?this.wheelChange(e):this.wheelStart(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this)))}wheelStart(e){this.start(e),this.wheelChange(e)}wheelChange(e){"uv"in e||e.cancelable&&e.preventDefault();const t=this.state;t._delta=[-GC(e)[1]/100*t.offset[0],0],bC.addTo(t._movement,t._delta),sM(t),this.state.origin=[e.clientX,e.clientY],this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){const t=this.config.device;t&&(e(t,"start",this[t+"Start"].bind(this)),e(t,"change",this[t+"Move"].bind(this)),e(t,"end",this[t+"End"].bind(this)),e(t,"cancel",this[t+"End"].bind(this)),e("lostPointerCapture","",this[t+"End"].bind(this))),this.config.pinchOnWheel&&e("wheel","",this.wheel.bind(this),{passive:!1})}},resolver:lM},xM={key:"scroll",engine:class extends XC{constructor(){super(...arguments),SC(this,"ingKey","scrolling")}scroll(e){this.state._active||this.start(e),this.scrollChange(e),this.timeoutStore.add("scrollEnd",this.scrollEnd.bind(this))}scrollChange(e){e.cancelable&&e.preventDefault();const t=this.state,n=function(e){var t,n;const{scrollX:r,scrollY:i,scrollLeft:o,scrollTop:a}=e.currentTarget;return[null!==(t=null!==r&&void 0!==r?r:o)&&void 0!==t?t:0,null!==(n=null!==i&&void 0!==i?i:a)&&void 0!==n?n:0]}(e);t._delta=bC.sub(n,t._values),bC.addTo(t._movement,t._delta),this.computeValues(n),this.compute(e),this.emit()}scrollEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("scroll","",this.scroll.bind(this))}},resolver:uM},bM={key:"wheel",engine:class extends XC{constructor(){super(...arguments),SC(this,"ingKey","wheeling")}wheel(e){this.state._active||this.start(e),this.wheelChange(e),this.timeoutStore.add("wheelEnd",this.wheelEnd.bind(this))}wheelChange(e){const t=this.state;t._delta=GC(e),bC.addTo(t._movement,t._delta),sM(t),this.compute(e),this.emit()}wheelEnd(){this.state._active&&(this.state._active=!1,this.compute(),this.emit())}bind(e){e("wheel","",this.wheel.bind(this))}},resolver:hM};function _M(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const wM={target(e){if(e)return()=>"current"in e?e.current:e},enabled(){return!(arguments.length>0&&void 0!==arguments[0])||arguments[0]},window(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:tM.isBrowser?window:void 0},eventOptions(){let{passive:e=!0,capture:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{passive:e,capture:t}},transform:e=>e},EM=["target","eventOptions","window","enabled","transform"];function SM(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;const n={};for(const[r,i]of Object.entries(t))switch(typeof i){case"function":n[r]=i.call(n,e[r],r,e);break;case"object":n[r]=SM(e[r],i);break;case"boolean":i&&(n[r]=e[r])}return n}class CM{constructor(e,t){SC(this,"_listeners",new Set),this._ctrl=e,this._gestureKey=t}add(e,t,n,r,i){const o=this._listeners,a=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=TC[e];return e+(n&&n[t]||t)}(t,n),s=MC(MC({},this._gestureKey?this._ctrl.config[this._gestureKey].eventOptions:{}),i);e.addEventListener(a,r,s);const l=()=>{e.removeEventListener(a,r,s),o.delete(l)};return o.add(l),l}clean(){this._listeners.forEach((e=>e())),this._listeners.clear()}}class MM{constructor(){SC(this,"_timeouts",new Map)}add(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:140;this.remove(e);for(var r=arguments.length,i=new Array(r>3?r-3:0),o=3;o<r;o++)i[o-3]=arguments[o];this._timeouts.set(e,window.setTimeout(t,n,...i))}remove(e){const t=this._timeouts.get(e);t&&window.clearTimeout(t)}clean(){this._timeouts.forEach((e=>{window.clearTimeout(e)})),this._timeouts.clear()}}class TM{constructor(e){SC(this,"gestures",new Set),SC(this,"_targetEventStore",new CM(this)),SC(this,"gestureEventStores",{}),SC(this,"gestureTimeoutStores",{}),SC(this,"handlers",{}),SC(this,"config",{}),SC(this,"pointerIds",new Set),SC(this,"touchIds",new Set),SC(this,"state",{shared:{shiftKey:!1,metaKey:!1,ctrlKey:!1,altKey:!1}}),function(e,t){t.drag&&IM(e,"drag");t.wheel&&IM(e,"wheel");t.scroll&&IM(e,"scroll");t.move&&IM(e,"move");t.pinch&&IM(e,"pinch");t.hover&&IM(e,"hover")}(this,e)}setEventIds(e){return OC(e)?(this.touchIds=new Set(zC(e)),this.touchIds):"pointerId"in e?("pointerup"===e.type||"pointercancel"===e.type?this.pointerIds.delete(e.pointerId):"pointerdown"===e.type&&this.pointerIds.add(e.pointerId),this.pointerIds):void 0}applyHandlers(e,t){this.handlers=e,this.nativeHandlers=t}applyConfig(e,t){this.config=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e,{target:i,eventOptions:o,window:a,enabled:s,transform:l}=r,c=_M(r,EM);if(n.shared=SM({target:i,eventOptions:o,window:a,enabled:s,transform:l},wM),t){const e=pM.get(t);n[t]=SM(MC({shared:n.shared},c),e)}else for(const u in c){const e=pM.get(u);e&&(n[u]=SM(MC({shared:n.shared},c[u]),e))}return n}(e,t,this.config)}clean(){this._targetEventStore.clean();for(const e of this.gestures)this.gestureEventStores[e].clean(),this.gestureTimeoutStores[e].clean()}effect(){return this.config.shared.target&&this.bind(),()=>this._targetEventStore.clean()}bind(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=this.config.shared,i={};let o;if(!r.target||(o=r.target(),o)){if(r.enabled){for(const n of this.gestures){const e=this.config[n],r=BM(i,e.eventOptions,!!o);if(e.enabled){new(fM.get(n))(this,t,n).bind(r)}}const e=BM(i,r.eventOptions,!!o);for(const n in this.nativeHandlers)e(n,"",(e=>this.nativeHandlers[n](MC(MC({},this.state.shared),{},{event:e,args:t}))),void 0,!0)}for(const e in i)i[e]=VC(...i[e]);if(!o)return i;for(const e in i){const{device:t,capture:n,passive:r}=DC(e);this._targetEventStore.add(o,t,"",i[e],{capture:n,passive:r})}}}}function IM(e,t){e.gestures.add(t),e.gestureEventStores[t]=new CM(e,t),e.gestureTimeoutStores[t]=new MM}const BM=(e,t,n)=>function(r,i,o){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];var l,c;const u=null!==(l=a.capture)&&void 0!==l?l:t.capture,h=null!==(c=a.passive)&&void 0!==c?c:t.passive;let d=s?r:PC(r,i,u);n&&h&&(d+="Passive"),e[d]=e[d]||[],e[d].push(o)},PM=/^on(Drag|Wheel|Scroll|Move|Pinch|Hover)/;function RM(e,t,n,r,i,o){if(!e.has(n))return;if(!fM.has(r))return void 0;const a=n+"Start",s=n+"End";i[r]=e=>{let r;return e.first&&a in t&&t[a](e),n in t&&(r=t[n](e)),e.last&&s in t&&t[s](e),r},o[r]=o[r]||{}}function DM(e,t){const[n,r,i]=function(e){const t={},n={},r=new Set;for(let i in e)PM.test(i)?(r.add(RegExp.lastMatch),n[i]=e[i]):t[i]=e[i];return[n,t,r]}(e),o={};return RM(i,n,"onDrag","drag",o,t),RM(i,n,"onWheel","wheel",o,t),RM(i,n,"onScroll","scroll",o,t),RM(i,n,"onPinch","pinch",o,t),RM(i,n,"onMove","move",o,t),RM(i,n,"onHover","hover",o,t),{handlers:o,config:t,nativeHandlers:r}}function OM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;const i=l.useMemo((()=>new TM(e)),[]);if(i.applyHandlers(e,r),i.applyConfig(t,n),l.useEffect(i.effect.bind(i)),l.useEffect((()=>i.clean.bind(i)),[]),void 0===t.target)return i.bind.bind(i)}function kM(e,t){const n=([gM,AM,xM,bM,yM,vM].forEach(mM),function(e,t){const{handlers:n,nativeHandlers:r,config:i}=DM(e,t||{});return OM(n,i,void 0,r)});return n(e,t||{})}const LM=new vo,FM=new zi,zM=new vo,UM=new vo,NM=new vo,jM=new Ys,GM=l.forwardRef(((e,t)=>{let{autoTransform:n=!0,matrix:r,axisLock:i,dragLimits:o,onHover:a,onDragStart:s,onDrag:c,onDragEnd:u,children:h,dragConfig:d,...f}=e;const p=cy((e=>e.controls)),{camera:m,size:g,raycaster:v,invalidate:y}=cy(),A=l.useRef(null),x=kM({onHover:e=>{let{hovering:t}=e;return a&&a(null!==t&&void 0!==t&&t)},onDragStart:e=>{let{event:t}=e;p&&(p.enabled=!1);const{point:n}=t;A.current.matrix.decompose(LM,new go,new vo),zM.copy(n),UM.copy(zM).sub(LM),s&&s(LM),y()},onDrag:e=>{let{xy:[t,r],intentional:a}=e;if(!a)return;const s=(t-g.left)/g.width*2-1,l=-(r-g.top)/g.height*2+1;if(FM.set(s,l),v.setFromCamera(FM,m),i)switch(i){case"x":NM.set(1,0,0);break;case"y":NM.set(0,1,0);break;case"z":NM.set(0,0,1)}else m.getWorldDirection(NM).negate();jM.setFromNormalAndCoplanarPoint(NM,zM),v.ray.intersectPlane(jM,zM);const u=A.current.matrix.clone(),h=A.current.matrixWorld.clone(),d=new vo(zM.x-UM.x,zM.y-UM.y,zM.z-UM.z);if(o&&(d.x=o[0]?Math.max(Math.min(d.x,o[0][1]),o[0][0]):d.x,d.y=o[1]?Math.max(Math.min(d.y,o[1][1]),o[1][0]):d.y,d.z=o[2]?Math.max(Math.min(d.z,o[2][1]),o[2][0]):d.z),n){A.current.matrix.setPosition(d);const e=A.current.matrix.clone().multiply(u.invert()),t=A.current.matrix.clone().multiply(h.invert());c&&c(A.current.matrix,e,A.current.matrixWorld,t)}else{const e=(new qo).copy(A.current.matrix);e.setPosition(d);const t=e.clone().multiply(u.invert()),n=e.clone().multiply(h.invert());c&&c(e,t,A.current.matrixWorld,n)}y()},onDragEnd:()=>{p&&(p.enabled=!0),u&&u(),y()}},{drag:{filterTaps:!0,threshold:1,..."object"===typeof d?d:{}}});return l.useImperativeHandle(t,(()=>A.current),[]),l.useLayoutEffect((()=>{r&&(A.current.matrix=r)}),[r]),l.createElement("group",tC({ref:A},x(),{matrix:r,matrixAutoUpdate:!1},f),h)}));function QM(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function HM(e,t){return HM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},HM(e,t)}function VM(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(NQ){return!1}}function WM(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],c=t[6],u=t[7],h=t[8];return r*s*h+i*l*c+o*a*u-o*s*c-i*a*h-r*l*u}function qM(e,t){for(var n=[],r=e.toArray(),i=t.toArray(),o=0;o<r.length;o++)n[o]=r[o]+i[o];return(new Ui).fromArray(n)}function XM(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function YM(e,t){if(e){if("string"===typeof e)return XM(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?XM(e,t):void 0}}function JM(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);a=!0);}catch(l){s=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(s)throw i}}return o}}(e,t)||YM(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function KM(e){return function(e){if(Array.isArray(e))return XM(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||YM(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ZM(e,t,n){return ZM=VM()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&HM(i,n.prototype),i},ZM.apply(null,arguments)}function $M(e){var t=JM(e[0],2),n=t[0],r=t[1],i=JM(e[1],2),o=i[0],a=i[1],s=JM(e[2],2);return WM(n,r,1,o,a,1,s[0],s[1],1)}function eT(e){return 0===$M(e)}var tT=new zi,nT=new zi;function rT(e){var t=e.map((function(e){return Array.isArray(e)?ZM(zi,KM(e)):e})),n=JM(t,3),r=n[0],i=n[1],o=n[2];if(eT(e))return!1;var a=tT.subVectors(i,r);return nT.subVectors(o,r).cross(a)>0}function iT(e,t,n){return Math.max(t,Math.min(n,e))}function oT(e,t){return iT(e-Math.floor(e/t)*t,0,t)}function aT(e,t){var n=oT(t-e,2*Math.PI);return n>Math.PI&&(n-=2*Math.PI),n}function sT(e,t){return e.x===t.x?"undefined"!==typeof e.z&&e.y===t.y?e.z-t.z:e.y-t.y:e.x-t.x}function lT(e){return e*e*e*(e*(6*e-15)+10)}function cT(e,t,n){return e*(1-n)+t*n}function uT(e,t,n){return(n-e)/(t-e)}function hT(e,t){var n=(new vo).crossVectors(e,t),r=e.dot(t),i=(new Ui).identity(),o=(new Ui).set(0,-n.z,n.y,n.z,0,-n.x,-n.y,n.x,0),a=(new Ui).multiplyMatrices(o,o).multiplyScalar(1/(1+r));return qM(qM(i,o),a)}var dT=Object.freeze({__proto__:null,clamp:iT,repeat:oT,deltaAngle:aT,degToRad:function(e){return e/180*Math.PI},radToDeg:function(e){return 180*e/Math.PI},fibonacciOnSphere:function(e,t){for(var n=t.radius,r=void 0===n?1:n,i=e.length/3,o=2/i,a=Math.PI*(3-2.2360679775),s=0;s<e.length;s+=3){var l=s*o-1+o/2,c=Math.sqrt(1-Math.pow(l,2)),u=s%i*a,h=Math.cos(u)*c,d=Math.sin(u)*c;e[s]=h*r,e[s+1]=l*r,e[s+2]=d*r}},vectorEquals:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.EPSILON;return Math.abs(e.x-t.x)<n&&Math.abs(e.y-t.y)<n&&Math.abs(e.z-t.z)<n},lexicographic:sT,convexHull:function(e){for(var t=e.sort(sT),n=[t[0],t[1]],r=2;r<t.length;r++)for(n.push(t[r]);n.length>2&&rT(KM(n.slice(-3)));)n.splice(n.length-2,1);for(var i=[t[t.length-1],t[t.length-2]],o=t.length-3;o>=0;o--)for(i.push(t[o]);i.length>2&&rT(KM(i.slice(-3)));)i.splice(i.length-2,1);return i.splice(0,1),i.splice(i.length-1,1),[].concat(n,i)},remap:function(e,t,n){var r=JM(t,2),i=r[0],o=r[1],a=JM(n,2),s=a[0];return s+(e-i)*(a[1]-s)/(o-i)},fade:lT,lerp:cT,inverseLerp:uT,normalize:function(e,t,n){var r=Math.sqrt(e*e+t*t+n*n);return[e/r,t/r,n/r]},pointOnCubeToPointOnSphere:function(e,t,n){var r=e*e,i=t*t,o=n*n;return[e*Math.sqrt(1-(i+o)/2+i*o/3),t*Math.sqrt(1-(o+r)/2+o*r/3),n*Math.sqrt(1-(r+i)/2+r*i/3)]},rotateVectorOnVector:hT,pointToCoordinate:function(e,t,n){return[Math.asin(t),Math.atan2(e,-n)]},coordinateToPoint:function(e,t){var n=Math.sin(e),r=Math.cos(e);return[Math.sin(t)*r,n,-Math.cos(t)*r]},planeSegmentIntersection:function(e,t){var n=JM(t,2),r=n[0],i=n[1],o=hT(e.normal,new vo(0,1,0)),a=uT(r.clone().applyMatrix3(o).y,i.clone().applyMatrix3(o).y,0);return(new vo).lerpVectors(r,i,a)},pointToPlaneDistance:function(e,t){return t.normal.dot(e)},getIndexFrom3D:function(e,t){var n=JM(e,3),r=n[0],i=n[1],o=n[2],a=JM(t,2),s=a[0];return o*s*a[1]+i*s+r},get3DFromIndex:function(e,t){var n=JM(t,2),r=n[0],i=r*n[1],o=e/i,a=e-i*o;return[a%r,a/r,o]},getIndexFrom2D:function(e,t){return e[0]+t[0]*e[1]},get2DFromIndex:function(e,t){return[e%t,Math.floor(e/t)]}});function fT(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var pT=function e(t,n,r){var i=this;fT(this,e),QM(this,"dot2",(function(e,t){return i.x*e+i.y*t})),QM(this,"dot3",(function(e,t,n){return i.x*e+i.y*t+i.z*n})),this.x=t,this.y=n,this.z=r},mT=[new pT(1,1,0),new pT(-1,1,0),new pT(1,-1,0),new pT(-1,-1,0),new pT(1,0,1),new pT(-1,0,1),new pT(1,0,-1),new pT(-1,0,-1),new pT(0,1,1),new pT(0,-1,1),new pT(0,1,-1),new pT(0,-1,-1)],gT=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],vT=new Array(512),yT=new Array(512),AT=function(e){e>0&&e<1&&(e*=65536),(e=Math.floor(e))<256&&(e|=e<<8);for(var t=0;t<256;t++){var n;n=1&t?gT[t]^255&e:gT[t]^e>>8&255,vT[t]=vT[t+256]=n,yT[t]=yT[t+256]=mT[n%12]}};AT(0);Math.sqrt(3),Math.sqrt(3),Math.PI;function xT(e){var t=function(e){if("number"===typeof e)e=Math.abs(e);else if("string"===typeof e){var t=e;e=0;for(var n=0;n<t.length;n++)e=(e+(n+1)*(t.charCodeAt(n)%96))%2147483647}return 0===e&&(e=311),e}(e);return function(){var e=48271*t%2147483647;return t=e,e/2147483647}}var bT=function e(t){var n=this;fT(this,e),QM(this,"seed",0),QM(this,"init",(function(e){n.seed=e,n.value=xT(e)})),QM(this,"value",xT(this.seed)),this.init(t)};new bT(Math.random());var _T=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)},wT={in:function(e){return 1-Math.cos(e*Math.PI/2)},out:function(e){return Math.sin(e*Math.PI/2)},inOut:function(e){return-(Math.cos(Math.PI*e)-1)/2}},ET={in:function(e){return e*e*e},out:function(e){return 1-Math.pow(1-e,3)},inOut:function(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}},ST={in:function(e){return e*e*e*e*e},out:function(e){return 1-Math.pow(1-e,5)},inOut:function(e){return e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2}},CT={in:function(e){return 1-Math.sqrt(1-Math.pow(e,2))},out:function(e){return Math.sqrt(1-Math.pow(e-1,2))},inOut:function(e){return e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2}},MT={in:function(e){return 0===e?0:Math.pow(2,10*e-10)},out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},inOut:function(e){return 0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2}};function TT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.25,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:.01,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_T,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.001,l="velocity_"+t;if(void 0===e.__damp&&(e.__damp={}),void 0===e.__damp[l]&&(e.__damp[l]=0),Math.abs(e[t]-n)<=s)return e[t]=n,!1;var c=2/(r=Math.max(1e-4,r)),u=a(c*i),h=e[t]-n,d=n,f=o*r;h=Math.min(Math.max(h,-f),f),n=e[t]-h;var p=(e.__damp[l]+c*h)*i;e.__damp[l]=(e.__damp[l]-c*p)*u;var m=n+(h+p)*u;return d-e[t]>0===m>d&&(m=d,e.__damp[l]=(m-d)/i),e[t]=m,!0}var IT=new vo,BT=new go,PT=new go,RT=new qo,DT=new vo;function OT(e,t,n,r,i,o,a,s){return TT(e,t,e[t]+aT(e[t],n),r,i,o,a,s)}var kT,LT,FT=new zi;var zT,UT,NT,jT=new vo;function GT(e,t,n,r,i,o,a){return"number"===typeof t?jT.setScalar(t):Array.isArray(t)?jT.set(t[0],t[1],t[2]):jT.copy(t),zT=TT(e,"x",jT.x,n,r,i,o,a),UT=TT(e,"y",jT.y,n,r,i,o,a),NT=TT(e,"z",jT.z,n,r,i,o,a),zT||UT||NT}var QT,HT,VT,WT,qT=new lo;var XT,YT,JT,KT=new ra;var ZT,$T,eI,tI=new La;var nI,rI,iI,oI,aI=new go,sI=new lo,lI=new lo,cI=new lo;function uI(e,t,n,r,i,o,a){var s=e;Array.isArray(t)?aI.set(t[0],t[1],t[2],t[3]):aI.copy(t);var l=e.dot(aI)>0?1:-1;return aI.x*=l,aI.y*=l,aI.z*=l,aI.w*=l,nI=TT(e,"x",aI.x,n,r,i,o,a),rI=TT(e,"y",aI.y,n,r,i,o,a),iI=TT(e,"z",aI.z,n,r,i,o,a),oI=TT(e,"w",aI.w,n,r,i,o,a),sI.set(e.x,e.y,e.z,e.w).normalize(),lI.set(s.__damp.velocity_x,s.__damp.velocity_y,s.__damp.velocity_z,s.__damp.velocity_w),cI.copy(sI).multiplyScalar(lI.dot(sI)/sI.dot(sI)),s.__damp.velocity_x-=cI.x,s.__damp.velocity_y-=cI.y,s.__damp.velocity_z-=cI.z,s.__damp.velocity_w-=cI.w,e.set(sI.x,sI.y,sI.z,sI.w),nI||rI||iI||oI}var hI,dI,fI,pI=new sg;var mI,gI,vI,yI=new qo,AI=new vo,xI=new go,bI=new vo;var _I=Object.freeze({__proto__:null,rsqw:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.01,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/(2*Math.PI);return n/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},exp:_T,linear:function(e){return e},sine:wT,cubic:ET,quint:ST,circ:CT,quart:{in:function(e){return e*e*e*e},out:function(e){return 1- --e*e*e*e},inOut:function(e){return e<.5?8*e*e*e*e:1-8*--e*e*e*e}},expo:MT,damp:TT,dampLookAt:function(e,t,n,r,i,o,a){"number"===typeof t?IT.setScalar(t):Array.isArray(t)?IT.set(t[0],t[1],t[2]):IT.copy(t);var s=e.parent;e.updateWorldMatrix(!0,!1),DT.setFromMatrixPosition(e.matrixWorld),function(e){return e&&e.isCamera}(e)||function(e){return e&&e.isLight}(e)?RT.lookAt(DT,IT,e.up):RT.lookAt(IT,DT,e.up),uI(e.quaternion,PT.setFromRotationMatrix(RT),n,r,i,o,a),s&&(RT.extractRotation(s.matrixWorld),BT.setFromRotationMatrix(RT),uI(e.quaternion,PT.copy(e.quaternion).premultiply(BT.invert()),n,r,i,o,a))},dampAngle:OT,damp2:function(e,t,n,r,i,o,a){return"number"===typeof t?FT.setScalar(t):Array.isArray(t)?FT.set(t[0],t[1]):FT.copy(t),kT=TT(e,"x",FT.x,n,r,i,o,a),LT=TT(e,"y",FT.y,n,r,i,o,a),kT||LT},damp3:GT,damp4:function(e,t,n,r,i,o,a){return"number"===typeof t?qT.setScalar(t):Array.isArray(t)?qT.set(t[0],t[1],t[2],t[3]):qT.copy(t),QT=TT(e,"x",qT.x,n,r,i,o,a),HT=TT(e,"y",qT.y,n,r,i,o,a),VT=TT(e,"z",qT.z,n,r,i,o,a),WT=TT(e,"w",qT.w,n,r,i,o,a),QT||HT||VT||WT},dampE:function(e,t,n,r,i,o,a){return Array.isArray(t)?KT.set(t[0],t[1],t[2],t[3]):KT.copy(t),XT=OT(e,"x",KT.x,n,r,i,o,a),YT=OT(e,"y",KT.y,n,r,i,o,a),JT=OT(e,"z",KT.z,n,r,i,o,a),XT||YT||JT},dampC:function(e,t,n,r,i,o,a){return t instanceof La?tI.copy(t):Array.isArray(t)?tI.setRGB(t[0],t[1],t[2]):tI.set(t),ZT=TT(e,"r",tI.r,n,r,i,o,a),$T=TT(e,"g",tI.g,n,r,i,o,a),eI=TT(e,"b",tI.b,n,r,i,o,a),ZT||$T||eI},dampQ:uI,dampS:function(e,t,n,r,i,o,a){return Array.isArray(t)?pI.set(t[0],t[1],t[2]):pI.copy(t),hI=TT(e,"radius",pI.radius,n,r,i,o,a),dI=OT(e,"phi",pI.phi,n,r,i,o,a),fI=OT(e,"theta",pI.theta,n,r,i,o,a),hI||dI||fI},dampM:function(e,t,n,r,i,o,a){var s=e;return void 0===s.__damp&&(s.__damp={position:new vo,rotation:new go,scale:new vo},e.decompose(s.__damp.position,s.__damp.rotation,s.__damp.scale)),Array.isArray(t)?yI.set.apply(yI,KM(t)):yI.copy(t),yI.decompose(AI,xI,bI),mI=GT(s.__damp.position,AI,n,r,i,o,a),gI=uI(s.__damp.rotation,xI,n,r,i,o,a),vI=GT(s.__damp.scale,bI,n,r,i,o,a),e.compose(s.__damp.position,s.__damp.rotation,s.__damp.scale),mI||gI||vI}});const wI=l.createContext(null);function EI(){return l.useContext(wI)}function SI(e){let{eps:t=1e-5,enabled:n=!0,infinite:r,horizontal:i,pages:o=1,distance:a=1,damping:s=.25,maxSpeed:c=1/0,prepend:u=!1,style:h={},children:d}=e;const{get:f,setEvents:p,gl:m,size:g,invalidate:v,events:y}=cy(),[A]=l.useState((()=>document.createElement("div"))),[x]=l.useState((()=>document.createElement("div"))),[b]=l.useState((()=>document.createElement("div"))),_=m.domElement.parentNode,w=l.useRef(0),E=l.useMemo((()=>{const e={el:A,eps:t,fill:x,fixed:b,horizontal:i,damping:s,offset:0,delta:0,scroll:w,pages:o,range(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=e-n,i=r+t+2*n;return this.offset<r?0:this.offset>i?1:(this.offset-r)/(i-r)},curve(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Math.sin(this.range(e,t,n)*Math.PI)},visible(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=e-n,i=r+t+2*n;return this.offset>=r&&this.offset<=i}};return e}),[t,s,i,o]);l.useEffect((()=>{A.style.position="absolute",A.style.width="100%",A.style.height="100%",A.style[i?"overflowX":"overflowY"]="auto",A.style[i?"overflowY":"overflowX"]="hidden",A.style.top="0px",A.style.left="0px";for(const n in h)A.style[n]=h[n];b.style.position="sticky",b.style.top="0px",b.style.left="0px",b.style.width="100%",b.style.height="100%",b.style.overflow="hidden",A.appendChild(b),x.style.height=i?"100%":o*a*100+"%",x.style.width=i?o*a*100+"%":"100%",x.style.pointerEvents="none",A.appendChild(x),u?_.prepend(A):_.appendChild(A),A[i?"scrollLeft":"scrollTop"]=1;const e=y.connected||m.domElement;requestAnimationFrame((()=>null==y.connect?void 0:y.connect(A)));const t=f().events.compute;return p({compute(e,t){const{left:n,top:r}=_.getBoundingClientRect(),i=e.clientX-n,o=e.clientY-r;t.pointer.set(i/t.size.width*2-1,-o/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),()=>{_.removeChild(A),p({compute:t}),null==y.connect||y.connect(e)}}),[o,a,i,A,x,b,_]),l.useEffect((()=>{if(y.connected===A){const e=g[i?"width":"height"],t=A[i?"scrollWidth":"scrollHeight"],o=t-e;let a=0,s=!0,l=!0;const c=()=>{if(n&&!l&&(v(),a=A[i?"scrollLeft":"scrollTop"],w.current=a/o,r)){if(!s)if(a>=o){const e=1-E.offset;A[i?"scrollLeft":"scrollTop"]=1,w.current=E.offset=-e,s=!0}else if(a<=0){const e=1+E.offset;A[i?"scrollLeft":"scrollTop"]=t,w.current=E.offset=e,s=!0}s&&setTimeout((()=>s=!1),40)}};A.addEventListener("scroll",c,{passive:!0}),requestAnimationFrame((()=>l=!1));const u=e=>A.scrollLeft+=e.deltaY/2;return i&&A.addEventListener("wheel",u,{passive:!0}),()=>{A.removeEventListener("scroll",c),i&&A.removeEventListener("wheel",u)}}}),[A,y,g,r,E,v,i,n]);let S=0;return uy(((e,n)=>{S=E.offset,_I.damp(E,"offset",w.current,s,n,c,void 0,t),_I.damp(E,"delta",Math.abs(S-E.offset),s,n,c,void 0,t),E.delta>t&&v()})),l.createElement(wI.Provider,{value:E},d)}const CI=l.forwardRef(((e,t)=>{let{children:n}=e;const r=l.useRef(null);l.useImperativeHandle(t,(()=>r.current),[]);const i=EI(),{width:o,height:a}=cy((e=>e.viewport));return uy((()=>{r.current.position.x=i.horizontal?-o*(i.pages-1)*i.offset:0,r.current.position.y=i.horizontal?0:a*(i.pages-1)*i.offset})),l.createElement("group",{ref:r},n)})),MI=l.forwardRef(((e,t)=>{let{children:n,style:r,...i}=e;const o=EI(),a=l.useRef(null);l.useImperativeHandle(t,(()=>a.current),[]);const{width:s,height:c}=cy((e=>e.size)),h=l.useContext(Wv),d=l.useMemo((()=>u.createRoot(o.fixed)),[o.fixed]);return uy((()=>{o.delta>o.eps&&(a.current.style.transform=`translate3d(${o.horizontal?-s*(o.pages-1)*o.offset:0}px,${o.horizontal?0:c*(o.pages-1)*-o.offset}px,0)`)})),d.render(l.createElement("div",tC({ref:a,style:{...r,position:"absolute",top:0,left:0,willChange:"transform"}},i),l.createElement(wI.Provider,{value:o},l.createElement(Wv.Provider,{value:h},n)))),null})),TI=l.forwardRef(((e,t)=>{let{html:n,...r}=e;const i=n?MI:CI;return l.createElement(i,tC({ref:t},r))}));let II=VI();const BI=e=>jI(e,II);let PI=VI();BI.write=e=>jI(e,PI);let RI=VI();BI.onStart=e=>jI(e,RI);let DI=VI();BI.onFrame=e=>jI(e,DI);let OI=VI();BI.onFinish=e=>jI(e,OI);let kI=[];BI.setTimeout=(e,t)=>{let n=BI.now()+t,r=()=>{let e=kI.findIndex((e=>e.cancel==r));~e&&kI.splice(e,1),UI-=~e?1:0},i={time:n,handler:e,cancel:r};return kI.splice(LI(n),0,i),UI+=1,GI(),i};let LI=e=>~(~kI.findIndex((t=>t.time>e))||~kI.length);BI.cancel=e=>{RI.delete(e),DI.delete(e),OI.delete(e),II.delete(e),PI.delete(e)},BI.sync=e=>{NI=!0,BI.batchedUpdates(e),NI=!1},BI.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(){for(var e=arguments.length,r=new Array(e),i=0;i<e;i++)r[i]=arguments[i];t=r,BI.onStart(n)}return r.handler=e,r.cancel=()=>{RI.delete(n),t=null},r};let FI="undefined"!=typeof window?window.requestAnimationFrame:()=>{};BI.use=e=>FI=e,BI.now="undefined"!=typeof performance?()=>performance.now():Date.now,BI.batchedUpdates=e=>e(),BI.catch=console.error,BI.frameLoop="always",BI.advance=()=>{"demand"!==BI.frameLoop?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):HI()};let zI=-1,UI=0,NI=!1;function jI(e,t){NI?(t.delete(e),e(0)):(t.add(e),GI())}function GI(){zI<0&&(zI=0,"demand"!==BI.frameLoop&&FI(QI))}function QI(){~zI&&(FI(QI),BI.batchedUpdates(HI))}function HI(){let e=zI;zI=BI.now();let t=LI(zI);t&&(WI(kI.splice(0,t),(e=>e.handler())),UI-=t),UI?(RI.flush(),II.flush(e?Math.min(64,zI-e):16.667),DI.flush(),PI.flush(),OI.flush()):zI=-1}function VI(){let e=new Set,t=e;return{add(n){UI+=t!=e||e.has(n)?0:1,e.add(n)},delete:n=>(UI-=t==e&&e.has(n)?1:0,e.delete(n)),flush(n){t.size&&(e=new Set,UI-=t.size,WI(t,(t=>t(n)&&e.add(t))),UI+=e.size,t=e)}}}function WI(e,t){e.forEach((e=>{try{t(e)}catch(NQ){BI.catch(NQ)}}))}function qI(){}const XI={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"===typeof e,str:e=>"string"===typeof e,num:e=>"number"===typeof e,und:e=>void 0===e};function YI(e,t){if(XI.arr(e)){if(!XI.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}const JI=(e,t)=>e.forEach(t);function KI(e,t,n){if(XI.arr(e))for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);else for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}const ZI=e=>XI.und(e)?[]:XI.arr(e)?e:[e];function $I(e,t){if(e.size){const n=Array.from(e);e.clear(),JI(n,t)}}const eB=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return $I(e,(e=>e(...n)))},tB=()=>"undefined"===typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent);let nB,rB,iB=null,oB=!1,aB=qI;const sB=e=>{e.to&&(rB=e.to),e.now&&(BI.now=e.now),void 0!==e.colors&&(iB=e.colors),null!=e.skipAnimation&&(oB=e.skipAnimation),e.createStringInterpolator&&(nB=e.createStringInterpolator),e.requestAnimationFrame&&BI.use(e.requestAnimationFrame),e.batchedUpdates&&(BI.batchedUpdates=e.batchedUpdates),e.willAdvance&&(aB=e.willAdvance),e.frameLoop&&(BI.frameLoop=e.frameLoop)};var lB=Object.freeze({__proto__:null,get createStringInterpolator(){return nB},get to(){return rB},get colors(){return iB},get skipAnimation(){return oB},get willAdvance(){return aB},assign:sB});const cB=new Set;let uB=[],hB=[],dB=0;const fB={get idle(){return!cB.size&&!uB.length},start(e){dB>e.priority?(cB.add(e),BI.onStart(pB)):(mB(e),BI(vB))},advance:vB,sort(e){if(dB)BI.onFrame((()=>fB.sort(e)));else{const t=uB.indexOf(e);~t&&(uB.splice(t,1),gB(e))}},clear(){uB=[],cB.clear()}};function pB(){cB.forEach(mB),cB.clear(),BI(vB)}function mB(e){uB.includes(e)||gB(e)}function gB(e){uB.splice(function(e,t){const n=e.findIndex(t);return n<0?e.length:n}(uB,(t=>t.priority>e.priority)),0,e)}function vB(e){const t=hB;for(let n=0;n<uB.length;n++){const r=uB[n];dB=r.priority,r.idle||(aB(r),r.advance(e),r.idle||t.push(r))}return dB=0,hB=uB,hB.length=0,uB=t,uB.length>0}const yB="[-+]?\\d*\\.?\\d+",AB=yB+"%";function xB(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return"\\(\\s*("+t.join(")\\s*,\\s*(")+")\\s*\\)"}const bB=new RegExp("rgb"+xB(yB,yB,yB)),_B=new RegExp("rgba"+xB(yB,yB,yB,yB)),wB=new RegExp("hsl"+xB(yB,AB,AB)),EB=new RegExp("hsla"+xB(yB,AB,AB,yB)),SB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,CB=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,MB=/^#([0-9a-fA-F]{6})$/,TB=/^#([0-9a-fA-F]{8})$/;function IB(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function BB(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,i=2*n-r,o=IB(i,r,e+1/3),a=IB(i,r,e),s=IB(i,r,e-1/3);return Math.round(255*o)<<24|Math.round(255*a)<<16|Math.round(255*s)<<8}function PB(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function RB(e){return(parseFloat(e)%360+360)%360/360}function DB(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function OB(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function kB(e){let t=function(e){let t;return"number"===typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=MB.exec(e))?parseInt(t[1]+"ff",16)>>>0:iB&&void 0!==iB[e]?iB[e]:(t=bB.exec(e))?(PB(t[1])<<24|PB(t[2])<<16|PB(t[3])<<8|255)>>>0:(t=_B.exec(e))?(PB(t[1])<<24|PB(t[2])<<16|PB(t[3])<<8|DB(t[4]))>>>0:(t=SB.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=TB.exec(e))?parseInt(t[1],16)>>>0:(t=CB.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=wB.exec(e))?(255|BB(RB(t[1]),OB(t[2]),OB(t[3])))>>>0:(t=EB.exec(e))?(BB(RB(t[1]),OB(t[2]),OB(t[3]))|DB(t[4]))>>>0:null}(e);return null===t?e:(t=t||0,`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`)}const LB=(e,t,n)=>{if(XI.fun(e))return e;if(XI.arr(e))return LB({range:e,output:t,extrapolate:n});if(XI.str(e.output[0]))return nB(e);const r=e,i=r.output,o=r.range||[0,1],a=r.extrapolateLeft||r.extrapolate||"extend",s=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(e=>e);return e=>{const t=function(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}(e,o);return function(e,t,n,r,i,o,a,s,l){let c=l?l(e):e;if(c<t){if("identity"===a)return c;"clamp"===a&&(c=t)}if(c>n){if("identity"===s)return c;"clamp"===s&&(c=n)}if(r===i)return r;if(t===n)return e<=t?r:i;t===-1/0?c=-c:n===1/0?c-=t:c=(c-t)/(n-t);c=o(c),r===-1/0?c=-c:i===1/0?c+=r:c=c*(i-r)+r;return c}(e,o[t],o[t+1],i[t],i[t+1],l,a,s,r.map)}};const FB=1.70158,zB=2.5949095,UB=2.70158,NB=2*Math.PI/3,jB=2*Math.PI/4.5,GB=e=>{const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},QB={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>0===e?0:Math.pow(2,10*e-10),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>0===e?0:1===e?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>UB*e*e*e-FB*e*e,easeOutBack:e=>1+UB*Math.pow(e-1,3)+FB*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*(7.189819*e-zB)/2:(Math.pow(2*e-2,2)*(3.5949095*(2*e-2)+zB)+2)/2,easeInElastic:e=>0===e?0:1===e?1:-Math.pow(2,10*e-10)*Math.sin((10*e-10.75)*NB),easeOutElastic:e=>0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin((10*e-.75)*NB)+1,easeInOutElastic:e=>0===e?0:1===e?1:e<.5?-Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*jB)/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*jB)/2+1,easeInBounce:e=>1-GB(1-e),easeOutBounce:GB,easeInOutBounce:e=>e<.5?(1-GB(1-2*e))/2:(1+GB(2*e-1))/2,steps:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"end";return n=>{const r=(n="end"===t?Math.min(n,.999):Math.max(n,.001))*e;return((e,t,n)=>Math.min(Math.max(n,e),t))(0,1,("end"===t?Math.floor(r):Math.ceil(r))/e)}}};function HB(){return HB=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HB.apply(this,arguments)}const VB=Symbol.for("FluidValue.get"),WB=Symbol.for("FluidValue.observers"),qB=e=>Boolean(e&&e[VB]),XB=e=>e&&e[VB]?e[VB]():e,YB=e=>e[WB]||null;function JB(e,t){let n=e[WB];n&&n.forEach((e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)}))}class KB{constructor(e){if(this[VB]=void 0,this[WB]=void 0,!e&&!(e=this.get))throw Error("Unknown getter");ZB(this,e)}}const ZB=(e,t)=>tP(e,VB,t);function $B(e,t){if(e[VB]){let n=e[WB];n||tP(e,WB,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function eP(e,t){let n=e[WB];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[WB]=null,e.observerRemoved&&e.observerRemoved(r,t)}}const tP=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),nP=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,rP=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,iP=new RegExp(`(${nP.source})(%|[a-z]+)`,"i"),oP=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,aP=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,sP=e=>{const[t,n]=lP(e);if(!t||tB())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(n);return t||e}return n&&aP.test(n)?sP(n):n||e},lP=e=>{const t=aP.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]};let cP;const uP=(e,t,n,r,i)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${i})`,hP=e=>{cP||(cP=iB?new RegExp(`(${Object.keys(iB).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map((e=>XB(e).replace(aP,sP).replace(rP,kB).replace(cP,kB))),n=t.map((e=>e.match(nP).map(Number))),r=n[0].map(((e,t)=>n.map((e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})))),i=r.map((t=>LB(HB({},e,{output:t}))));return e=>{var n;const r=!iP.test(t[0])&&(null==(n=t.find((e=>iP.test(e))))?void 0:n.replace(nP,""));let o=0;return t[0].replace(nP,(()=>`${i[o++](e)}${r||""}`)).replace(oP,uP)}},dP="react-spring: ",fP=e=>{const t=e;let n=!1;if("function"!=typeof t)throw new TypeError(`${dP}once requires a function parameter`);return function(){n||(t(...arguments),n=!0)}},pP=fP(console.warn);const mP=fP(console.warn);function gP(e){return XI.str(e)&&("#"==e[0]||/\d/.test(e)||!tB()&&aP.test(e)||e in(iB||{}))}new WeakMap;new Set;new WeakMap,new WeakMap,new WeakMap;const vP=tB()?l.useEffect:l.useLayoutEffect,yP=()=>{const e=(0,l.useRef)(!1);return vP((()=>(e.current=!0,()=>{e.current=!1})),[]),e};function AP(){const e=(0,l.useState)()[1],t=yP();return()=>{t.current&&e(Math.random())}}const xP=e=>(0,l.useEffect)(e,bP),bP=[];function _P(e){const t=(0,l.useRef)();return(0,l.useEffect)((()=>{t.current=e})),t.current}const wP=Symbol.for("Animated:node"),EP=e=>e&&e[wP],SP=(e,t)=>((e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}))(e,wP,t),CP=e=>e&&e[wP]&&e[wP].getPayload();class MP{constructor(){this.payload=void 0,SP(this,this)}getPayload(){return this.payload||[]}}class TP extends MP{constructor(e){super(),this.done=!0,this.elapsedTime=void 0,this.lastPosition=void 0,this.lastVelocity=void 0,this.v0=void 0,this.durationProgress=0,this._value=e,XI.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new TP(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return XI.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,XI.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}}class IP extends TP{constructor(e){super(0),this._string=null,this._toString=void 0,this._toString=LB({output:[e,e]})}static create(e){return new IP(e)}getValue(){let e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(XI.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=LB({output:[this.getValue(),e]})),this._value=0,super.reset()}}const BP={dependencies:null};class PP extends MP{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return KI(this.source,((n,r)=>{(e=>!!e&&e[wP]===e)(n)?t[r]=n.getValue(e):qB(n)?t[r]=XB(n):e||(t[r]=n)})),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&JI(this.payload,(e=>e.reset()))}_makePayload(e){if(e){const t=new Set;return KI(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){BP.dependencies&&qB(e)&&BP.dependencies.add(e);const t=CP(e);t&&JI(t,(e=>this.add(e)))}}class RP extends PP{constructor(e){super(e)}static create(e){return new RP(e)}getValue(){return this.source.map((e=>e.getValue()))}setValue(e){const t=this.getPayload();return e.length==t.length?t.map(((t,n)=>t.setValue(e[n]))).some(Boolean):(super.setValue(e.map(DP)),!0)}}function DP(e){return(gP(e)?IP:TP).create(e)}function OP(e){const t=EP(e);return t?t.constructor:XI.arr(e)?RP:gP(e)?IP:TP}function kP(){return kP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kP.apply(this,arguments)}const LP=(e,t)=>{const n=!XI.fun(e)||e.prototype&&e.prototype.isReactComponent;return(0,l.forwardRef)(((r,i)=>{const o=(0,l.useRef)(null),a=n&&(0,l.useCallback)((e=>{o.current=function(e,t){e&&(XI.fun(e)?e(t):e.current=t);return t}(i,e)}),[i]),[s,c]=function(e,t){const n=new Set;BP.dependencies=n,e.style&&(e=kP({},e,{style:t.createAnimatedStyle(e.style)}));return e=new PP(e),BP.dependencies=null,[e,n]}(r,t),u=AP(),h=()=>{const e=o.current;if(n&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,s.getValue(!0)))&&u()},d=new FP(h,c),f=(0,l.useRef)();vP((()=>(f.current=d,JI(c,(e=>$B(e,d))),()=>{f.current&&(JI(f.current.deps,(e=>eP(e,f.current))),BI.cancel(f.current.update))}))),(0,l.useEffect)(h,[]),xP((()=>()=>{const e=f.current;JI(e.deps,(t=>eP(t,e)))}));const p=t.getComponentProps(s.getValue());return l.createElement(e,kP({},p,{ref:a}))}))};class FP{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&BI.write(this.update)}}const zP=Symbol.for("AnimatedComponent"),UP=e=>XI.str(e)?e:e&&XI.str(e.displayName)?e.displayName:XI.fun(e)&&e.name||null;function NP(){return NP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NP.apply(this,arguments)}function jP(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return XI.fun(e)?e(...n):e}const GP=(e,t)=>!0===e||!!(t&&e&&(XI.fun(e)?e(t):ZI(e).includes(t))),QP=(e,t)=>XI.obj(e)?t&&e[t]:e,HP=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,VP=e=>e,WP=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:VP,n=qP;e.default&&!0!==e.default&&(e=e.default,n=Object.keys(e));const r={};for(const i of n){const n=t(e[i],i);XI.und(n)||(r[i]=n)}return r},qP=["config","onProps","onStart","onChange","onPause","onResume","onRest"],XP={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function YP(e){const t=function(e){const t={};let n=0;if(KI(e,((e,r)=>{XP[r]||(t[r]=e,n++)})),n)return t}(e);if(t){const n={to:t};return KI(e,((e,r)=>r in t||(n[r]=e))),n}return NP({},e)}function JP(e){return e=XB(e),XI.arr(e)?e.map(JP):gP(e)?lB.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function KP(e){for(const t in e)return!0;return!1}function ZP(e){return XI.fun(e)||XI.arr(e)&&XI.obj(e[0])}function $P(e,t){var n;null==(n=e.ref)||n.delete(e),null==t||t.delete(e)}function eR(e,t){var n;t&&e.ref!==t&&(null==(n=e.ref)||n.delete(e),t.add(e),e.ref=t)}const tR=NP({},{tension:170,friction:26},{mass:1,damping:1,easing:QB.linear,clamp:!1});class nR{constructor(){this.tension=void 0,this.friction=void 0,this.frequency=void 0,this.damping=void 0,this.mass=void 0,this.velocity=0,this.restVelocity=void 0,this.precision=void 0,this.progress=void 0,this.duration=void 0,this.easing=void 0,this.clamp=void 0,this.bounce=void 0,this.decay=void 0,this.round=void 0,Object.assign(this,tR)}}function rR(e,t){if(XI.und(t.decay)){const n=!XI.und(t.tension)||!XI.und(t.friction);!n&&XI.und(t.frequency)&&XI.und(t.damping)&&XI.und(t.mass)||(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}else e.duration=void 0}const iR=[];class oR{constructor(){this.changed=!1,this.values=iR,this.toValues=null,this.fromValues=iR,this.to=void 0,this.from=void 0,this.config=new nR,this.immediate=!1}}function aR(e,t){let{key:n,props:r,defaultProps:i,state:o,actions:a}=t;return new Promise(((t,s)=>{var l;let c,u,h=GP(null!=(l=r.cancel)?l:null==i?void 0:i.cancel,n);if(h)p();else{XI.und(r.pause)||(o.paused=GP(r.pause,n));let e=null==i?void 0:i.pause;!0!==e&&(e=o.paused||GP(e,n)),c=jP(r.delay||0,n),e?(o.resumeQueue.add(f),a.pause()):(a.resume(),f())}function d(){o.resumeQueue.add(f),o.timeouts.delete(u),u.cancel(),c=u.time-BI.now()}function f(){c>0&&!lB.skipAnimation?(o.delayed=!0,u=BI.setTimeout(p,c),o.pauseQueue.add(d),o.timeouts.add(u)):p()}function p(){o.delayed&&(o.delayed=!1),o.pauseQueue.delete(d),o.timeouts.delete(u),e<=(o.cancelId||0)&&(h=!0);try{a.start(NP({},r,{callId:e,cancel:h}),t)}catch(n){s(n)}}}))}const sR=(e,t)=>1==t.length?t[0]:t.some((e=>e.cancelled))?uR(e.get()):t.every((e=>e.noop))?lR(e.get()):cR(e.get(),t.every((e=>e.finished))),lR=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),cR=function(e,t){return{value:e,finished:t,cancelled:arguments.length>2&&void 0!==arguments[2]&&arguments[2]}},uR=e=>({value:e,cancelled:!0,finished:!1});function hR(e,t,n,r){const{callId:i,parentId:o,onRest:a}=t,{asyncTo:s,promise:l}=n;return o||e!==s||t.reset?n.promise=(async()=>{n.asyncId=i,n.asyncTo=e;const c=WP(t,((e,t)=>"onRest"===t?void 0:e));let u,h;const d=new Promise(((e,t)=>(u=e,h=t))),f=e=>{const t=i<=(n.cancelId||0)&&uR(r)||i!==n.asyncId&&cR(r,!1);if(t)throw e.result=t,h(e),e},p=(e,t)=>{const o=new fR,a=new pR;return(async()=>{if(lB.skipAnimation)throw dR(n),a.result=cR(r,!1),h(a),a;f(o);const s=XI.obj(e)?NP({},e):NP({},t,{to:e});s.parentId=i,KI(c,((e,t)=>{XI.und(s[t])&&(s[t]=e)}));const l=await r.start(s);return f(o),n.paused&&await new Promise((e=>{n.resumeQueue.add(e)})),l})()};let m;if(lB.skipAnimation)return dR(n),cR(r,!1);try{let t;t=XI.arr(e)?(async e=>{for(const t of e)await p(t)})(e):Promise.resolve(e(p,r.stop.bind(r))),await Promise.all([t.then(u),d]),m=cR(r.get(),!0,!1)}catch(g){if(g instanceof fR)m=g.result;else{if(!(g instanceof pR))throw g;m=g.result}}finally{i==n.asyncId&&(n.asyncId=o,n.asyncTo=o?s:void 0,n.promise=o?l:void 0)}return XI.fun(a)&&BI.batchedUpdates((()=>{a(m,r,r.item)})),m})():l}function dR(e,t){$I(e.timeouts,(e=>e.cancel())),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}class fR extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise."),this.result=void 0}}class pR extends Error{constructor(){super("SkipAnimationSignal"),this.result=void 0}}const mR=e=>e instanceof vR;let gR=1;class vR extends KB{constructor(){super(...arguments),this.id=gR++,this.key=void 0,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=EP(this);return e&&e.getValue()}to(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lB.to(this,t)}interpolate(){pP(`${dP}The "interpolate" function is deprecated in v9 (use "to" instead)`);for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return lB.to(this,t)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e){JB(this,{type:"change",parent:this,value:e,idle:arguments.length>1&&void 0!==arguments[1]&&arguments[1]})}_onPriorityChange(e){this.idle||fB.sort(this),JB(this,{type:"priority",parent:this,priority:e})}}const yR=Symbol.for("SpringPhase"),AR=e=>(1&e[yR])>0,xR=e=>(2&e[yR])>0,bR=e=>(4&e[yR])>0,_R=(e,t)=>t?e[yR]|=3:e[yR]&=-3,wR=(e,t)=>t?e[yR]|=4:e[yR]&=-5;class ER extends vR{constructor(e,t){if(super(),this.key=void 0,this.animation=new oR,this.queue=void 0,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!XI.und(e)||!XI.und(t)){const n=XI.obj(e)?NP({},e):NP({},t,{from:e});XI.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(xR(this)||this._state.asyncTo)||bR(this)}get goal(){return XB(this.animation.to)}get velocity(){const e=EP(this);return e instanceof TP?e.lastVelocity||0:e.getPayload().map((e=>e.lastVelocity||0))}get hasAnimated(){return AR(this)}get isAnimating(){return xR(this)}get isPaused(){return bR(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{config:i,toValues:o}=r;const a=CP(r.to);!a&&qB(r.to)&&(o=ZI(XB(r.to))),r.values.forEach(((s,l)=>{if(s.done)return;const c=s.constructor==IP?1:a?a[l].lastPosition:o[l];let u=r.immediate,h=c;if(!u){if(h=s.lastPosition,i.tension<=0)return void(s.done=!0);let t=s.elapsedTime+=e;const n=r.fromValues[l],o=null!=s.v0?s.v0:s.v0=XI.arr(i.velocity)?i.velocity[l]:i.velocity;let a;const d=i.precision||(n==c?.005:Math.min(1,.001*Math.abs(c-n)));if(XI.und(i.duration))if(i.decay){const e=!0===i.decay?.998:i.decay,r=Math.exp(-(1-e)*t);h=n+o/(1-e)*(1-r),u=Math.abs(s.lastPosition-h)<=d,a=o*r}else{a=null==s.lastVelocity?o:s.lastVelocity;const t=i.restVelocity||d/10,r=i.clamp?0:i.bounce,l=!XI.und(r),f=n==c?s.v0>0:n<c;let p,m=!1;const g=1,v=Math.ceil(e/g);for(let e=0;e<v&&(p=Math.abs(a)>t,p||(u=Math.abs(c-h)<=d,!u));++e){l&&(m=h==c||h>c==f,m&&(a=-a*r,h=c));a+=(1e-6*-i.tension*(h-c)+.001*-i.friction*a)/i.mass*g,h+=a*g}}else{let r=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,s.durationProgress>0&&(s.elapsedTime=i.duration*s.durationProgress,t=s.elapsedTime+=e)),r=(i.progress||0)+t/this._memoizedDuration,r=r>1?1:r<0?0:r,s.durationProgress=r),h=n+i.easing(r)*(c-n),a=(h-s.lastPosition)/e,u=1==r}s.lastVelocity=a,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),u=!0)}a&&!a[l].done&&(u=!1),u?s.done=!0:t=!1,s.setValue(h,i.round)&&(n=!0)}));const s=EP(this),l=s.getValue();if(t){const e=XB(r.to);l===e&&!n||i.decay?n&&i.decay&&this._onChange(l):(s.setValue(e),this._onChange(e)),this._stop()}else n&&this._onChange(l)}set(e){return BI.batchedUpdates((()=>{this._stop(),this._focus(e),this._set(e)})),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(xR(this)){const{to:e,config:t}=this.animation;BI.batchedUpdates((()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()}))}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return XI.und(e)?(n=this.queue||[],this.queue=[]):n=[XI.obj(e)?e:NP({},t,{to:e})],Promise.all(n.map((e=>this._update(e)))).then((e=>sR(this,e)))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),dR(this._state,e&&this._lastCallId),BI.batchedUpdates((()=>this._stop(t,e))),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=XI.obj(n)?n[t]:n,(null==n||ZP(n))&&(n=void 0),r=XI.obj(r)?r[t]:r,null==r&&(r=void 0);const i={to:n,from:r};return AR(this)||(e.reverse&&([n,r]=[r,n]),r=XB(r),XI.und(r)?EP(this)||this._set(n):this._set(r)),i}_update(e,t){let n=NP({},e);const{key:r,defaultProps:i}=this;n.default&&Object.assign(i,WP(n,((e,t)=>/^on/.test(t)?QP(e,r):e))),PR(this,n,"onProps"),RR(this,"onProps",n,this);const o=this._prepareNode(n);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return aR(++this._lastCallId,{key:r,props:n,defaultProps:i,state:a,actions:{pause:()=>{bR(this)||(wR(this,!0),eB(a.pauseQueue),RR(this,"onPause",cR(this,SR(this,this.animation.to)),this))},resume:()=>{bR(this)&&(wR(this,!1),xR(this)&&this._resume(),eB(a.resumeQueue),RR(this,"onResume",cR(this,SR(this,this.animation.to)),this))},start:this._merge.bind(this,o)}}).then((e=>{if(n.loop&&e.finished&&(!t||!e.noop)){const e=CR(n);if(e)return this._update(e,!0)}return e}))}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(uR(this));const r=!XI.und(e.to),i=!XI.und(e.from);if(r||i){if(!(t.callId>this._lastToId))return n(uR(this));this._lastToId=t.callId}const{key:o,defaultProps:a,animation:s}=this,{to:l,from:c}=s;let{to:u=l,from:h=c}=e;!i||r||t.default&&!XI.und(u)||(u=h),t.reverse&&([u,h]=[h,u]);const d=!YI(h,c);d&&(s.from=h),h=XB(h);const f=!YI(u,l);f&&this._focus(u);const p=ZP(t.to),{config:m}=s,{decay:g,velocity:v}=m;(r||i)&&(m.velocity=0),t.config&&!p&&function(e,t,n){n&&(rR(n=NP({},n),t),t=NP({},n,t)),rR(e,t),Object.assign(e,t);for(const a in tR)null==e[a]&&(e[a]=tR[a]);let{mass:r,frequency:i,damping:o}=e;XI.und(i)||(i<.01&&(i=.01),o<0&&(o=0),e.tension=Math.pow(2*Math.PI/i,2)*r,e.friction=4*Math.PI*o*r/i)}(m,jP(t.config,o),t.config!==a.config?jP(a.config,o):void 0);let y=EP(this);if(!y||XI.und(u))return n(cR(this,!0));const A=XI.und(t.reset)?i&&!t.default:!XI.und(h)&&GP(t.reset,o),x=A?h:this.get(),b=JP(u),_=XI.num(b)||XI.arr(b)||gP(b),w=!p&&(!_||GP(a.immediate||t.immediate,o));if(f){const e=OP(u);if(e!==y.constructor){if(!w)throw Error(`Cannot animate between ${y.constructor.name} and ${e.name}, as the "to" prop suggests`);y=this._set(b)}}const E=y.constructor;let S=qB(u),C=!1;if(!S){const e=A||!AR(this)&&d;(f||e)&&(C=YI(JP(x),b),S=!C),(YI(s.immediate,w)||w)&&YI(m.decay,g)&&YI(m.velocity,v)||(S=!0)}if(C&&xR(this)&&(s.changed&&!A?S=!0:S||this._stop(l)),!p&&((S||qB(l))&&(s.values=y.getPayload(),s.toValues=qB(u)?null:E==IP?[1]:ZI(b)),s.immediate!=w&&(s.immediate=w,w||A||this._set(l)),S)){const{onRest:e}=s;JI(BR,(e=>PR(this,t,e)));const r=cR(this,SR(this,l));eB(this._pendingCalls,r),this._pendingCalls.add(n),s.changed&&BI.batchedUpdates((()=>{s.changed=!A,null==e||e(r,this),A?jP(a.onRest,r):null==s.onStart||s.onStart(r,this)}))}A&&this._set(x),p?n(hR(t.to,t,this._state,this)):S?this._start():xR(this)&&!f?this._pendingCalls.add(n):n(lR(x))}_focus(e){const t=this.animation;e!==t.to&&(YB(this)&&this._detach(),t.to=e,YB(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;qB(t)&&($B(t,this),mR(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;qB(e)&&eP(e,this)}_set(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=XB(e);if(!XI.und(n)){const e=EP(this);if(!e||!YI(n,e.getValue())){const r=OP(n);e&&e.constructor==r?e.setValue(n):SP(this,r.create(n)),e&&BI.batchedUpdates((()=>{this._onChange(n,t)}))}}return EP(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,RR(this,"onStart",cR(this,SR(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),jP(this.animation.onChange,e,this)),jP(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;EP(this).reset(XB(e.to)),e.immediate||(e.fromValues=e.values.map((e=>e.lastPosition))),xR(this)||(_R(this,!0),bR(this)||this._resume())}_resume(){lB.skipAnimation?this.finish():fB.start(this)}_stop(e,t){if(xR(this)){_R(this,!1);const n=this.animation;JI(n.values,(e=>{e.done=!0})),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),JB(this,{type:"idle",parent:this});const r=t?uR(this.get()):cR(this.get(),SR(this,null!=e?e:n.to));eB(this._pendingCalls,r),n.changed&&(n.changed=!1,RR(this,"onRest",r,this))}}}function SR(e,t){const n=JP(t);return YI(JP(e.get()),n)}function CR(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.loop,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.to,r=jP(t);if(r){const i=!0!==r&&YP(r),o=(i||e).reverse,a=!i||i.reset;return MR(NP({},e,{loop:t,default:!1,pause:void 0,to:!o||ZP(n)?n:void 0,from:a?e.from:void 0,reset:a},i))}}function MR(e){const{to:t,from:n}=e=YP(e),r=new Set;return XI.obj(t)&&IR(t,r),XI.obj(n)&&IR(n,r),e.keys=r.size?Array.from(r):null,e}function TR(e){const t=MR(e);return XI.und(t.default)&&(t.default=WP(t)),t}function IR(e,t){KI(e,((e,n)=>null!=e&&t.add(n)))}const BR=["onStart","onRest","onChange","onPause","onResume"];function PR(e,t,n){e.animation[n]=t[n]!==HP(t,n)?QP(t[n],e.key):void 0}function RR(e,t){for(var n,r,i,o,a=arguments.length,s=new Array(a>2?a-2:0),l=2;l<a;l++)s[l-2]=arguments[l];null==(n=(r=e.animation)[t])||n.call(r,...s),null==(i=(o=e.defaultProps)[t])||i.call(o,...s)}const DR=["onStart","onChange","onRest"];let OR=1;class kR{constructor(e,t){this.id=OR++,this.springs={},this.queue=[],this.ref=void 0,this._flush=void 0,this._initialProps=void 0,this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._item=void 0,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start(NP({default:!0},e))}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every((e=>e.idle&&!e.isDelayed&&!e.isPaused))}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each(((t,n)=>e[n]=t.get())),e}set(e){for(const t in e){const n=e[t];XI.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(MR(e)),this}start(e){let{queue:t}=this;return e?t=ZI(e).map(MR):this.queue=[],this._flush?this._flush(this,t):(GR(this,t),LR(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;JI(ZI(t),(t=>n[t].stop(!!e)))}else dR(this._state,this._lastAsyncId),this.each((t=>t.stop(!!e)));return this}pause(e){if(XI.und(e))this.start({pause:!0});else{const t=this.springs;JI(ZI(e),(e=>t[e].pause()))}return this}resume(e){if(XI.und(e))this.start({pause:!1});else{const t=this.springs;JI(ZI(e),(e=>t[e].resume()))}return this}each(e){KI(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,i=this._changed.size>0;(r&&!this._started||i&&!this._started)&&(this._started=!0,$I(e,(e=>{let[t,n]=e;n.value=this.get(),t(n,this,this._item)})));const o=!r&&this._started,a=i||o&&n.size?this.get():null;i&&t.size&&$I(t,(e=>{let[t,n]=e;n.value=a,t(n,this,this._item)})),o&&(this._started=!1,$I(n,(e=>{let[t,n]=e;n.value=a,t(n,this,this._item)})))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}BI.onFrame(this._onFrame)}}function LR(e,t){return Promise.all(t.map((t=>FR(e,t)))).then((t=>sR(e,t)))}async function FR(e,t,n){const{keys:r,to:i,from:o,loop:a,onRest:s,onResolve:l}=t,c=XI.obj(t.default)&&t.default;a&&(t.loop=!1),!1===i&&(t.to=null),!1===o&&(t.from=null);const u=XI.arr(i)||XI.fun(i)?i:void 0;u?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):JI(DR,(n=>{const r=t[n];if(XI.fun(r)){const i=e._events[n];t[n]=e=>{let{finished:t,cancelled:n}=e;const o=i.get(r);o?(t||(o.finished=!1),n&&(o.cancelled=!0)):i.set(r,{value:null,finished:t||!1,cancelled:n||!1})},c&&(c[n]=t[n])}}));const h=e._state;t.pause===!h.paused?(h.paused=t.pause,eB(t.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(t.pause=!0);const d=(r||Object.keys(e.springs)).map((n=>e.springs[n].start(t))),f=!0===t.cancel||!0===HP(t,"cancel");(u||f&&h.asyncId)&&d.push(aR(++e._lastAsyncId,{props:t,state:h,actions:{pause:qI,resume:qI,start(t,n){f?(dR(h,e._lastAsyncId),n(uR(e))):(t.onRest=s,n(hR(u,t,h,e)))}}})),h.paused&&await new Promise((e=>{h.resumeQueue.add(e)}));const p=sR(e,await Promise.all(d));if(a&&p.finished&&(!n||!p.noop)){const n=CR(t,a,i);if(n)return GR(e,[n]),FR(e,n,!0)}return l&&BI.batchedUpdates((()=>l(p,e,e.item))),p}function zR(e,t){const n=NP({},e.springs);return t&&JI(ZI(t),(e=>{XI.und(e.keys)&&(e=MR(e)),XI.obj(e.to)||(e=NP({},e,{to:void 0})),jR(n,e,(e=>NR(e)))})),UR(e,n),n}function UR(e,t){KI(t,((t,n)=>{e.springs[n]||(e.springs[n]=t,$B(t,e))}))}function NR(e,t){const n=new ER;return n.key=e,t&&$B(n,t),n}function jR(e,t,n){t.keys&&JI(t.keys,(r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)}))}function GR(e,t){JI(t,(t=>{jR(e.springs,t,(t=>NR(t,e)))}))}function QR(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}const HR=["children"],VR=e=>{let{children:t}=e,n=QR(e,HR);const r=(0,l.useContext)(WR),i=n.pause||!!r.pause,o=n.immediate||!!r.immediate;n=function(e,t){const[n]=(0,l.useState)((()=>({inputs:t,result:e()}))),r=(0,l.useRef)(),i=r.current;let o=i;if(o){const n=Boolean(t&&o.inputs&&function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}(t,o.inputs));n||(o={inputs:t,result:e()})}else o=n;return(0,l.useEffect)((()=>{r.current=o,i==n&&(n.inputs=n.result=void 0)}),[o]),o.result}((()=>({pause:i,immediate:o})),[i,o]);const{Provider:a}=WR;return l.createElement(a,{value:n},t)},WR=function(e,t){return Object.assign(e,l.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}(VR,{});VR.Provider=WR.Provider,VR.Consumer=WR.Consumer;const qR=()=>{const e=[],t=function(t){mP(`${dP}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const r=[];return JI(e,((e,i)=>{if(XI.und(t))r.push(e.start());else{const o=n(t,e,i);o&&r.push(e.start(o))}})),r};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const n=e.indexOf(t);~n&&e.splice(n,1)},t.pause=function(){return JI(e,(e=>e.pause(...arguments))),this},t.resume=function(){return JI(e,(e=>e.resume(...arguments))),this},t.set=function(t){JI(e,(e=>e.set(t)))},t.start=function(t){const n=[];return JI(e,((e,r)=>{if(XI.und(t))n.push(e.start());else{const i=this._getProps(t,e,r);i&&n.push(e.start(i))}})),n},t.stop=function(){return JI(e,(e=>e.stop(...arguments))),this},t.update=function(t){return JI(e,((e,n)=>e.update(this._getProps(t,e,n)))),this};const n=function(e,t,n){return XI.fun(e)?e(n,t):e};return t._getProps=n,t};function XR(e,t,n){const r=XI.fun(t)&&t;r&&!n&&(n=[]);const i=(0,l.useMemo)((()=>r||3==arguments.length?qR():void 0),[]),o=(0,l.useRef)(0),a=AP(),s=(0,l.useMemo)((()=>({ctrls:[],queue:[],flush(e,t){const n=zR(e,t);return o.current>0&&!s.queue.length&&!Object.keys(n).some((t=>!e.springs[t]))?LR(e,t):new Promise((r=>{UR(e,n),s.queue.push((()=>{r(LR(e,t))})),a()}))}})),[]),c=(0,l.useRef)([...s.ctrls]),u=[],h=_P(e)||0;function d(e,n){for(let i=e;i<n;i++){const e=c.current[i]||(c.current[i]=new kR(null,s.flush)),n=r?r(i,e):t[i];n&&(u[i]=TR(n))}}(0,l.useMemo)((()=>{JI(c.current.slice(e,h),(e=>{$P(e,i),e.stop(!0)})),c.current.length=e,d(h,e)}),[e]),(0,l.useMemo)((()=>{d(0,Math.min(h,e))}),n);const f=c.current.map(((e,t)=>zR(e,u[t]))),p=(0,l.useContext)(VR),m=_P(p),g=p!==m&&KP(p);vP((()=>{o.current++,s.ctrls=c.current;const{queue:e}=s;e.length&&(s.queue=[],JI(e,(e=>e()))),JI(c.current,((e,t)=>{null==i||i.add(e),g&&e.start({default:p});const n=u[t];n&&(eR(e,n.ref),e.ref?e.queue.push(n):e.start(n))}))})),xP((()=>()=>{JI(s.ctrls,(e=>e.stop(!0)))}));const v=f.map((e=>NP({},e)));return i?[v,i]:v}function YR(e,t){const n=XI.fun(e),[[r],i]=XR(1,n?e:[e],n?t||[]:t);return n||2==arguments.length?[r,i]:r}let JR;!function(e){e.MOUNT="mount",e.ENTER="enter",e.UPDATE="update",e.LEAVE="leave"}(JR||(JR={}));class KR extends vR{constructor(e,t){super(),this.key=void 0,this.idle=!0,this.calc=void 0,this._active=new Set,this.source=e,this.calc=LB(...t);const n=this._get(),r=OP(n);SP(this,r.create(n))}advance(e){const t=this._get();YI(t,this.get())||(EP(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&$R(this._active)&&eD(this)}_get(){const e=XI.arr(this.source)?this.source.map(XB):ZI(XB(this.source));return this.calc(...e)}_start(){this.idle&&!$R(this._active)&&(this.idle=!1,JI(CP(this),(e=>{e.done=!1})),lB.skipAnimation?(BI.batchedUpdates((()=>this.advance())),eD(this)):fB.start(this))}_attach(){let e=1;JI(ZI(this.source),(t=>{qB(t)&&$B(t,this),mR(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))})),this.priority=e,this._start()}_detach(){JI(ZI(this.source),(e=>{qB(e)&&eP(e,this)})),this._active.clear(),eD(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=ZI(this.source).reduce(((e,t)=>Math.max(e,(mR(t)?t.priority:0)+1)),0))}}function ZR(e){return!1!==e.idle}function $R(e){return!e.size||Array.from(e).every(ZR)}function eD(e){e.idle||(e.idle=!0,JI(CP(e),(e=>{e.done=!0})),JB(e,{type:"idle",parent:e}))}lB.assign({createStringInterpolator:hP,to:(e,t)=>new KR(e,t)});fB.advance;const tD=["primitive"].concat(Object.keys(e).filter((e=>/^[A-Z]/.test(e))).map((e=>e[0].toLowerCase()+e.slice(1))));lB.assign({createStringInterpolator:hP,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},frameLoop:"demand"}),$v((()=>{BI.advance()}));const nD=function(e){let{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=e=>new PP(e),getComponentProps:r=e=>e}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const i={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},o=e=>{const t=UP(e)||"Anonymous";return(e=XI.str(e)?o[e]||(o[e]=LP(e,i)):e[zP]||(e[zP]=LP(e,i))).displayName=`Animated(${t})`,e};return KI(e,((t,n)=>{XI.arr(e)&&(n=UP(t)),o[n]=o(t)})),{animated:o}}(tD,{applyAnimatedValues:Ay}),rD=nD.animated;function iD(e){let{enabled:t=!0,snap:n,global:r,domElement:i,cursor:o=!0,children:a,speed:s=1,rotation:c=[0,0,0],zoom:u=1,polar:h=[0,Math.PI/2],azimuth:d=[-1/0,1/0],config:f={mass:1,tension:170,friction:26}}=e;const p=cy((e=>e.events)),m=cy((e=>e.gl)),g=i||p.connected||m.domElement,{size:v}=cy(),y=l.useMemo((()=>[c[0]+h[0],c[0]+h[1]]),[c[0],h[0],h[1]]),A=l.useMemo((()=>[c[1]+d[0],c[1]+d[1]]),[c[1],d[0],d[1]]),x=l.useMemo((()=>[Fi.clamp(c[0],...y),Fi.clamp(c[1],...A),c[2]]),[c[0],c[1],c[2],y,A]),[b,_]=YR((()=>({scale:1,rotation:x,config:f})));l.useEffect((()=>{_.start({scale:1,rotation:x,config:f})}),[x]),l.useEffect((()=>{if(r&&o&&t)return g.style.cursor="grab",m.domElement.style.cursor="",()=>{g.style.cursor="default",m.domElement.style.cursor="default"}}),[r,o,g,t]);const w=kM({onHover:e=>{let{last:n}=e;o&&!r&&t&&(g.style.cursor=n?"auto":"grab")},onDrag:e=>{let{down:r,delta:[i,a],memo:[l,c]=b.rotation.animation.to||x}=e;if(!t)return[a,i];o&&(g.style.cursor=r?"grabbing":"grab"),i=Fi.clamp(c+i/v.width*Math.PI*s,...A),a=Fi.clamp(l+a/v.height*Math.PI*s,...y);const h=n&&!r&&"boolean"!==typeof n?n:f;return _.start({scale:r&&a>y[1]/2?u:1,rotation:n&&!r?x:[a,i,0],config:e=>"scale"===e?{...h,friction:3*h.friction}:h}),[a,i]}},{target:r?g:void 0});return l.createElement(rD.group,tC({},null==w?void 0:w(),b),a)}Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const oD=e=>(t,n,r)=>{const i=r.subscribe;r.subscribe=(e,t,n)=>{let o=e;if(t){const i=(null==n?void 0:n.equalityFn)||Object.is;let a=e(r.getState());o=n=>{const r=e(n);if(!i(a,r)){const e=a;t(a=r,e)}},(null==n?void 0:n.fireImmediately)&&t(a,a)}return i(o)};return e(t,n,r)};Object.defineProperty,Object.getOwnPropertySymbols,Object.prototype.hasOwnProperty,Object.prototype.propertyIsEnumerable;const aD=l.createContext(null);function sD(e){let{map:t,children:n,onChange:r,domElement:i}=e;const o=t.map((e=>e.name+e.keys)).join("-"),a=l.useMemo((()=>Zg(oD((()=>t.reduce(((e,t)=>({...e,[t.name]:!1})),{}))))),[o]),s=l.useMemo((()=>[a.subscribe,a.getState,a]),[o]),c=a.setState;return l.useEffect((()=>{const e=t.map((e=>{let{name:t,keys:n,up:i}=e;return{keys:n,up:i,fn:e=>{c({[t]:e}),r&&r(t,e,s[1]())}}})),n=e.reduce(((e,t)=>{let{keys:n,fn:r,up:i=!0}=t;return n.forEach((t=>e[t]={fn:r,pressed:!1,up:i})),e}),{}),o=e=>{let{key:t,code:r}=e;const i=n[t]||n[r];if(!i)return;const{fn:o,pressed:a,up:s}=i;i.pressed=!0,!s&&a||o(!0)},a=e=>{let{key:t,code:r}=e;const i=n[t]||n[r];if(!i)return;const{fn:o,up:a}=i;i.pressed=!1,a&&o(!1)},l=i||window;return l.addEventListener("keydown",o,{passive:!0}),l.addEventListener("keyup",a,{passive:!0}),()=>{l.removeEventListener("keydown",o),l.removeEventListener("keyup",a)}}),[i,o]),l.createElement(aD.Provider,{value:s,children:n})}function lD(e){const[t,n,r]=l.useContext(aD);return e?r(e):[t,n]}const cD=new Zs,uD=new vo,hD=new vo,dD=new vo,fD=new vo,pD=new vo,mD=new vo,gD=new vo,vD=new vo,yD=new vo,AD=new vo,xD=new vo,bD=new vo,_D=new vo,wD=new vo;class ED{constructor(e,t,n){this.camera=e,this.scene=t,this.startPoint=new vo,this.endPoint=new vo,this.collection=[],this.deep=n||Number.MAX_VALUE}select(e,t){return this.startPoint=e||this.startPoint,this.endPoint=t||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(cD,this.scene),this.collection}updateFrustum(e,t){if(e=e||this.startPoint,t=t||this.endPoint,e.x===t.x&&(t.x+=Number.EPSILON),e.y===t.y&&(t.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera)hD.copy(e),hD.x=Math.min(e.x,t.x),hD.y=Math.max(e.y,t.y),t.x=Math.max(e.x,t.x),t.y=Math.min(e.y,t.y),dD.setFromMatrixPosition(this.camera.matrixWorld),fD.copy(hD),pD.set(t.x,hD.y,0),mD.copy(t),gD.set(hD.x,t.y,0),fD.unproject(this.camera),pD.unproject(this.camera),mD.unproject(this.camera),gD.unproject(this.camera),bD.copy(fD).sub(dD),_D.copy(pD).sub(dD),wD.copy(mD).sub(dD),bD.normalize(),_D.normalize(),wD.normalize(),bD.multiplyScalar(this.deep),_D.multiplyScalar(this.deep),wD.multiplyScalar(this.deep),bD.add(dD),_D.add(dD),wD.add(dD),(n=cD.planes)[0].setFromCoplanarPoints(dD,fD,pD),n[1].setFromCoplanarPoints(dD,pD,mD),n[2].setFromCoplanarPoints(mD,gD,dD),n[3].setFromCoplanarPoints(gD,fD,dD),n[4].setFromCoplanarPoints(pD,mD,gD),n[5].setFromCoplanarPoints(wD,_D,bD),n[5].normal.multiplyScalar(-1);else if(this.camera.isOrthographicCamera){const r=Math.min(e.x,t.x),i=Math.max(e.y,t.y),o=Math.max(e.x,t.x),a=Math.min(e.y,t.y);var n;fD.set(r,i,-1),pD.set(o,i,-1),mD.set(o,a,-1),gD.set(r,a,-1),vD.set(r,i,1),yD.set(o,i,1),AD.set(o,a,1),xD.set(r,a,1),fD.unproject(this.camera),pD.unproject(this.camera),mD.unproject(this.camera),gD.unproject(this.camera),vD.unproject(this.camera),yD.unproject(this.camera),AD.unproject(this.camera),xD.unproject(this.camera),(n=cD.planes)[0].setFromCoplanarPoints(fD,vD,yD),n[1].setFromCoplanarPoints(pD,yD,AD),n[2].setFromCoplanarPoints(AD,xD,gD),n[3].setFromCoplanarPoints(xD,vD,fD),n[4].setFromCoplanarPoints(pD,mD,gD),n[5].setFromCoplanarPoints(AD,yD,vD),n[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")}searchChildInFrustum(e,t){if((t.isMesh||t.isLine||t.isPoints)&&void 0!==t.material&&(null===t.geometry.boundingSphere&&t.geometry.computeBoundingSphere(),uD.copy(t.geometry.boundingSphere.center),uD.applyMatrix4(t.matrixWorld),e.containsPoint(uD)&&this.collection.push(t)),t.children.length>0)for(let n=0;n<t.children.length;n++)this.searchChildInFrustum(e,t.children[n])}}const SD=l.createContext([]);function CD(e){let{box:t,multiple:n,children:r,onChange:i,onChangePointerUp:o,border:a="1px solid #55aaff",backgroundColor:s="rgba(75, 160, 255, 0.1)",filter:c=e=>e,...u}=e;const[h,d]=l.useState(!1),{setEvents:f,camera:p,raycaster:m,gl:g,controls:v,size:y,get:A}=cy(),[x,b]=l.useState(!1),[_,w]=l.useReducer(((e,t)=>{let{object:n,shift:r}=t;return void 0===n?[]:Array.isArray(n)?n:r?e.includes(n)?e.filter((e=>e!==n)):[n,...e]:e[0]===n?[]:[n]}),[]);l.useEffect((()=>{h?null==i||i(_):null==o||o(_)}),[_,h]);const E=l.useCallback((e=>{e.stopPropagation(),w({object:c([e.object])[0],shift:n&&e.shiftKey})}),[]),S=l.useCallback((e=>!x&&w({})),[x]),C=l.useRef(null);return l.useEffect((()=>{if(!t||!n)return;const e=new ED(p,C.current),r=document.createElement("div");r.style.pointerEvents="none",r.style.border=a,r.style.backgroundColor=s,r.style.position="fixed";const i=new zi,o=new zi,l=new zi,u=A().events.enabled,h=null==v?void 0:v.enabled;let m=!1;function x(e,t){const{offsetX:n,offsetY:r}=e,{width:i,height:o}=y;t.set(n/i*2-1,-r/o*2+1)}function b(t){t.shiftKey&&(!function(e){var t;v&&(v.enabled=!1),f({enabled:!1}),d(m=!0),null==(t=g.domElement.parentElement)||t.appendChild(r),r.style.left=`${e.clientX}px`,r.style.top=`${e.clientY}px`,r.style.width="0px",r.style.height="0px",i.x=e.clientX,i.y=e.clientY}(t),x(t,e.startPoint))}let _=[];function E(t){if(m){!function(e){l.x=Math.max(i.x,e.clientX),l.y=Math.max(i.y,e.clientY),o.x=Math.min(i.x,e.clientX),o.y=Math.min(i.y,e.clientY),r.style.left=`${o.x}px`,r.style.top=`${o.y}px`,r.style.width=l.x-o.x+"px",r.style.height=l.y-o.y+"px"}(t),x(t,e.endPoint);const n=e.select().sort((e=>e.uuid)).filter((e=>e.isMesh));(function(e,t){if(Object.is(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0})(n,_)||(_=n,w({object:c(n)}))}}function S(e){m&&function(){var e;m&&(v&&(v.enabled=h),f({enabled:u}),d(m=!1),null==(e=r.parentElement)||e.removeChild(r))}()}return document.addEventListener("pointerdown",b,{passive:!0}),document.addEventListener("pointermove",E,{passive:!0,capture:!0}),document.addEventListener("pointerup",S,{passive:!0}),()=>{document.removeEventListener("pointerdown",b),document.removeEventListener("pointermove",E,!0),document.removeEventListener("pointerup",S)}}),[y.width,y.height,m,p,v,g]),l.createElement("group",tC({ref:C,onClick:E,onPointerOver:()=>b(!0),onPointerOut:()=>b(!1),onPointerMissed:S},u),l.createElement(SD.Provider,{value:_},r))}function MD(){return l.useContext(SD)}const TD=l.forwardRef((function(e,t){let{children:n,follow:r=!0,lockX:i=!1,lockY:o=!1,lockZ:a=!1,...s}=e;const c=l.useRef(null),u=l.useRef(null),h=new go;return uy((e=>{let{camera:t}=e;if(!r||!u.current)return;const n=u.current.rotation.clone();u.current.updateMatrix(),u.current.updateWorldMatrix(!1,!1),u.current.getWorldQuaternion(h),t.getWorldQuaternion(c.current.quaternion).premultiply(h.invert()),i&&(u.current.rotation.x=n.x),o&&(u.current.rotation.y=n.y),a&&(u.current.rotation.z=n.z)})),l.useImperativeHandle(t,(()=>u.current),[]),l.createElement("group",tC({ref:u},s),l.createElement("group",{ref:c},n))})),ID=l.forwardRef(((e,t)=>{let{children:n,depth:r=-1,...i}=e;const o=l.useRef(null);return l.useImperativeHandle(t,(()=>o.current),[]),uy((e=>{let{camera:t}=e;o.current.quaternion.copy(t.quaternion),o.current.position.copy(t.position)})),l.createElement("group",tC({ref:o},i),l.createElement("group",{"position-z":-r},n))})),BD=new vo,PD=new vo,RD=new vo,DD=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;const i=BD.set(e.x/n.width*2-1,-e.y/n.height*2+1,r);return i.unproject(t),i},OD=(e,t,n,r)=>{const i=((e,t,n)=>{const r=n.width/2,i=n.height/2;t.updateMatrixWorld(!1);const o=e.project(t);return o.x=o.x*r+r,o.y=-o.y*i+i,o})(RD.copy(e),n,r);let o=0;for(let a=0;a<2;++a){const s=PD.copy(i).setComponent(a,i.getComponent(a)+t),l=DD(s,n,r,s.z);o=Math.max(o,e.distanceTo(l))}return o},kD=new vo,LD=(0,l.forwardRef)(((e,t)=>{let{scale:n=1,...r}=e;const i=(0,l.useRef)(null);return l.useImperativeHandle(t,(()=>i.current),[]),uy((e=>{const t=i.current;if(!t)return;const r=OD(t.getWorldPosition(kD),n,e.camera,e.size);t.scale.setScalar(r*n)})),l.createElement("object3D",tC({ref:i},r))})),FD=new xo,zD=new vo;class UD extends dm{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new rs([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new rs([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new tg(t,6,1);return this.setAttribute("instanceStart",new Ju(n,3,0)),this.setAttribute("instanceEnd",new Ju(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const r=new tg(t,2*n,1);return this.setAttribute("instanceColorStart",new Ju(r,n,0)),this.setAttribute("instanceColorEnd",new Ju(r,n,n)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new $f(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new xo);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),FD.setFromBufferAttribute(t),this.boundingBox.union(FD))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new zo),null===this.boundingBox&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let i=0,o=e.count;i<o;i++)zD.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(zD)),zD.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(zD));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class ND extends Ls{constructor(e){super({type:"LineMaterial",uniforms:ks.clone(ks.merge([rl.common,rl.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new zi(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:"\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\t\t\t\t#include <clipping_planes_pars_vertex>\n\n\t\t\t\tuniform float linewidth;\n\t\t\t\tuniform vec2 resolution;\n\n\t\t\t\tattribute vec3 instanceStart;\n\t\t\t\tattribute vec3 instanceEnd;\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t\tattribute vec4 instanceColorStart;\n\t\t\t\t\t\tattribute vec4 instanceColorEnd;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t\tattribute vec3 instanceColorStart;\n\t\t\t\t\t\tattribute vec3 instanceColorEnd;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashScale;\n\t\t\t\t\tattribute float instanceDistanceStart;\n\t\t\t\t\tattribute float instanceDistanceEnd;\n\t\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#endif\n\n\t\t\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t\t\t// conservative estimate of the near plane\n\t\t\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#ifdef USE_COLOR\n\n\t\t\t\t\t\tvLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t\t\t// camera space\n\t\t\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\tworldStart = start.xyz;\n\t\t\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvUv = uv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\t\t\tif ( perspective ) {\n\n\t\t\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// clip space\n\t\t\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t\t\t// ndc space\n\t\t\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t\t\t// direction\n\t\t\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t\t\t// account for clip-space aspect ratio\n\t\t\t\t\tdir.x *= aspect;\n\t\t\t\t\tdir = normalize( dir );\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// get the offset direction as perpendicular to the view vector\n\t\t\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\t\t\tvec3 offset;\n\t\t\t\t\t\tif ( position.y < 0.5 ) {\n\n\t\t\t\t\t\t\toffset = normalize( cross( start.xyz, worldDir ) );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\toffset = normalize( cross( end.xyz, worldDir ) );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\tfloat forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );\n\n\t\t\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t// extend the line bounds to encompass  endcaps\n\t\t\t\t\t\t\tstart.xyz += - worldDir * linewidth * 0.5;\n\t\t\t\t\t\t\tend.xyz += worldDir * linewidth * 0.5;\n\n\t\t\t\t\t\t\t// shift the position of the quad so it hugs the forward edge of the line\n\t\t\t\t\t\t\toffset.xy -= dir * forwardOffset;\n\t\t\t\t\t\t\toffset.z += 0.5;\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset.xy += dir * 2.0 * forwardOffset;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth * 0.5;\n\n\t\t\t\t\t\t// set the world position\n\t\t\t\t\t\tworldPos = ( position.y < 0.5 ) ? start : end;\n\t\t\t\t\t\tworldPos.xyz += offset;\n\n\t\t\t\t\t\t// project the worldpos\n\t\t\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t\t\t// segments overlap neatly\n\t\t\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\t\t\tdir.x /= aspect;\n\t\t\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t\t\t// sign flip\n\t\t\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t\t\t// endcaps\n\t\t\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\t\t\toffset += - dir;\n\n\t\t\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\t\t\toffset += dir;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// adjust for linewidth\n\t\t\t\t\t\toffset *= linewidth;\n\n\t\t\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t\t\t// select end\n\t\t\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t\t\t// back to clip space\n\t\t\t\t\t\toffset *= clip.w;\n\n\t\t\t\t\t\tclip.xy += offset;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tgl_Position = clip;\n\n\t\t\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t\t#include <clipping_planes_vertex>\n\t\t\t\t\t#include <fog_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:`\n\t\t\t\tuniform vec3 diffuse;\n\t\t\t\tuniform float opacity;\n\t\t\t\tuniform float linewidth;\n\n\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\tuniform float dashOffset;\n\t\t\t\t\tuniform float dashSize;\n\t\t\t\t\tuniform float gapSize;\n\n\t\t\t\t#endif\n\n\t\t\t\tvarying float vLineDistance;\n\n\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\tvarying vec4 worldPos;\n\t\t\t\t\tvarying vec3 worldStart;\n\t\t\t\t\tvarying vec3 worldEnd;\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#else\n\n\t\t\t\t\tvarying vec2 vUv;\n\n\t\t\t\t#endif\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <clipping_planes_pars_fragment>\n\n\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\tvarying vec4 vLineColor;\n\t\t\t\t\t#else\n\t\t\t\t\t\tvarying vec3 vLineColor;\n\t\t\t\t\t#endif\n\t\t\t\t#endif\n\n\t\t\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\t\t\tfloat mua;\n\t\t\t\t\tfloat mub;\n\n\t\t\t\t\tvec3 p13 = p1 - p3;\n\t\t\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\t\t\tmua = numer / denom;\n\t\t\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\t\t\treturn vec2( mua, mub );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t\t\t#ifdef USE_DASH\n\n\t\t\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tfloat alpha = opacity;\n\n\t\t\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\t\t\tfloat len = length( delta );\n\t\t\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t#endif\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#else\n\n\t\t\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t#endif\n\n\t\t\t\t\t#endif\n\n\t\t\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\t\t\t\t\t#ifdef USE_COLOR\n\t\t\t\t\t\t#ifdef USE_LINE_COLOR_ALPHA\n\t\t\t\t\t\t\tdiffuseColor *= vLineColor;\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tdiffuseColor.rgb *= vLineColor;\n\t\t\t\t\t\t#endif\n\t\t\t\t\t#endif\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\n\t\t\t\t\tgl_FragColor = diffuseColor;\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <${parseInt(ze.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n\t\t\t\t\t#include <fog_fragment>\n\t\t\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t\t\t}\n\t\t\t`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(e){this.uniforms.diffuse.value=e}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(e){this.uniforms.linewidth.value=e}},dashed:{enumerable:!0,get:function(){return Boolean("USE_DASH"in this.defines)},set(e){Boolean(e)!==Boolean("USE_DASH"in this.defines)&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(e){this.uniforms.dashScale.value=e}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(e){this.uniforms.dashSize.value=e}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(e){this.uniforms.dashOffset.value=e}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(e){this.uniforms.gapSize.value=e}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(e){this.uniforms.resolution.value.copy(e)}},alphaToCoverage:{enumerable:!0,get:function(){return Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)},set:function(e){Boolean(e)!==Boolean("USE_ALPHA_TO_COVERAGE"in this.defines)&&(this.needsUpdate=!0),!0===e?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const jD=parseInt(ze.replace(/\D+/g,"")),GD=jD>=125?"uv1":"uv2",QD=new lo,HD=new vo,VD=new vo,WD=new lo,qD=new lo,XD=new lo,YD=new vo,JD=new qo,KD=new pg,ZD=new vo,$D=new xo,eO=new zo,tO=new lo;let nO,rO;function iO(e,t,n){return tO.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),tO.multiplyScalar(1/tO.w),tO.x=rO/n.width,tO.y=rO/n.height,tO.applyMatrix4(e.projectionMatrixInverse),tO.multiplyScalar(1/tO.w),Math.abs(Math.max(tO.x,tO.y))}class oO extends Is{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new UD,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ND({color:16777215*Math.random()})),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,s=t.count;o<s;o++,a+=2)HD.fromBufferAttribute(t,o),VD.fromBufferAttribute(n,o),r[a]=0===a?0:r[a-1],r[a+1]=r[a]+HD.distanceTo(VD);const i=new tg(r,2,1);return e.setAttribute("instanceDistanceStart",new Ju(i,1,0)),e.setAttribute("instanceDistanceEnd",new Ju(i,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;null!==r||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const i=void 0!==e.params.Line2&&e.params.Line2.threshold||0;nO=e.ray;const o=this.matrixWorld,a=this.geometry,s=this.material;let l,c;if(rO=s.linewidth+i,null===a.boundingSphere&&a.computeBoundingSphere(),eO.copy(a.boundingSphere).applyMatrix4(o),n)l=.5*rO;else{l=iO(r,Math.max(r.near,eO.distanceToPoint(nO.origin)),s.resolution)}if(eO.radius+=l,!1!==nO.intersectsSphere(eO)){if(null===a.boundingBox&&a.computeBoundingBox(),$D.copy(a.boundingBox).applyMatrix4(o),n)c=.5*rO;else{c=iO(r,Math.max(r.near,$D.distanceToPoint(nO.origin)),s.resolution)}$D.expandByScalar(c),!1!==nO.intersectsBox($D)&&(n?function(e,t){const n=e.matrixWorld,r=e.geometry,i=r.attributes.instanceStart,o=r.attributes.instanceEnd;for(let a=0,s=Math.min(r.instanceCount,i.count);a<s;a++){KD.start.fromBufferAttribute(i,a),KD.end.fromBufferAttribute(o,a),KD.applyMatrix4(n);const r=new vo,s=new vo;nO.distanceSqToSegment(KD.start,KD.end,s,r),s.distanceTo(r)<.5*rO&&t.push({point:s,pointOnLine:r,distance:nO.origin.distanceTo(s),object:e,face:null,faceIndex:a,uv:null,[GD]:null})}}(this,t):function(e,t,n){const r=t.projectionMatrix,i=e.material.resolution,o=e.matrixWorld,a=e.geometry,s=a.attributes.instanceStart,l=a.attributes.instanceEnd,c=Math.min(a.instanceCount,s.count),u=-t.near;nO.at(1,XD),XD.w=1,XD.applyMatrix4(t.matrixWorldInverse),XD.applyMatrix4(r),XD.multiplyScalar(1/XD.w),XD.x*=i.x/2,XD.y*=i.y/2,XD.z=0,YD.copy(XD),JD.multiplyMatrices(t.matrixWorldInverse,o);for(let h=0,d=c;h<d;h++){if(WD.fromBufferAttribute(s,h),qD.fromBufferAttribute(l,h),WD.w=1,qD.w=1,WD.applyMatrix4(JD),qD.applyMatrix4(JD),WD.z>u&&qD.z>u)continue;if(WD.z>u){const e=WD.z-qD.z,t=(WD.z-u)/e;WD.lerp(qD,t)}else if(qD.z>u){const e=qD.z-WD.z,t=(qD.z-u)/e;qD.lerp(WD,t)}WD.applyMatrix4(r),qD.applyMatrix4(r),WD.multiplyScalar(1/WD.w),qD.multiplyScalar(1/qD.w),WD.x*=i.x/2,WD.y*=i.y/2,qD.x*=i.x/2,qD.y*=i.y/2,KD.start.copy(WD),KD.start.z=0,KD.end.copy(qD),KD.end.z=0;const t=KD.closestPointToPointParameter(YD,!0);KD.at(t,ZD);const a=Fi.lerp(WD.z,qD.z,t),c=a>=-1&&a<=1,d=YD.distanceTo(ZD)<.5*rO;if(c&&d){KD.start.fromBufferAttribute(s,h),KD.end.fromBufferAttribute(l,h),KD.start.applyMatrix4(o),KD.end.applyMatrix4(o);const t=new vo,r=new vo;nO.distanceSqToSegment(KD.start,KD.end,r,t),n.push({point:r,pointOnLine:t,distance:nO.origin.distanceTo(r),object:e,face:null,faceIndex:h,uv:null,[GD]:null})}}}(this,r,t))}}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(QD),this.material.uniforms.resolution.value.set(QD.z,QD.w))}}class aO extends UD{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;const n=e.length-t,r=new Float32Array(2*n);if(3===t)for(let i=0;i<n;i+=t)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5];else for(let i=0;i<n;i+=t)r[2*i]=e[i],r[2*i+1]=e[i+1],r[2*i+2]=e[i+2],r[2*i+3]=e[i+3],r[2*i+4]=e[i+4],r[2*i+5]=e[i+5],r[2*i+6]=e[i+6],r[2*i+7]=e[i+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class sO extends oO{constructor(){super(arguments.length>0&&void 0!==arguments[0]?arguments[0]:new aO,arguments.length>1&&void 0!==arguments[1]?arguments[1]:new ND({color:16777215*Math.random()})),this.isLine2=!0,this.type="Line2"}}const lO=l.forwardRef((function(e,t){let{points:n,color:r=16777215,vertexColors:i,linewidth:o,lineWidth:a,segments:s,dashed:c,...u}=e;var h,d;const f=cy((e=>e.size)),p=l.useMemo((()=>s?new oO:new sO),[s]),[m]=l.useState((()=>new ND)),g=4===(null==i||null==(h=i[0])?void 0:h.length)?4:3,v=l.useMemo((()=>{const e=s?new UD:new aO,t=n.map((e=>{const t=Array.isArray(e);return e instanceof vo||e instanceof lo?[e.x,e.y,e.z]:e instanceof zi?[e.x,e.y,0]:t&&3===e.length?[e[0],e[1],e[2]]:t&&2===e.length?[e[0],e[1],0]:e}));if(e.setPositions(t.flat()),i){r=16777215;const t=i.map((e=>e instanceof La?e.toArray():e));e.setColors(t.flat(),g)}return e}),[n,s,i,g]);return l.useLayoutEffect((()=>{p.computeLineDistances()}),[n,p]),l.useLayoutEffect((()=>{c?m.defines.USE_DASH="":delete m.defines.USE_DASH,m.needsUpdate=!0}),[c,m]),l.useEffect((()=>()=>{v.dispose(),m.dispose()}),[v]),l.createElement("primitive",tC({object:p,ref:t},u),l.createElement("primitive",{object:v,attach:"geometry"}),l.createElement("primitive",tC({object:m,attach:"material",color:r,vertexColors:Boolean(i),resolution:[f.width,f.height],linewidth:null!==(d=null!==o&&void 0!==o?o:a)&&void 0!==d?d:1,dashed:c,transparent:4===g},u)))})),cO=new vo,uO=l.forwardRef((function(e,t){let{start:n=[0,0,0],end:r=[0,0,0],mid:i,segments:o=20,...a}=e;const s=l.useRef(null);l.useImperativeHandle(t,(()=>s.current));const[c]=l.useState((()=>new Yd(void 0,void 0,void 0))),u=l.useCallback((function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return e instanceof vo?c.v0.copy(e):c.v0.set(...e),t instanceof vo?c.v2.copy(t):c.v2.set(...t),n instanceof vo?c.v1.copy(n):Array.isArray(n)?c.v1.set(...n):c.v1.copy(c.v0.clone().add(c.v2.clone().sub(c.v0)).add(cO.set(0,c.v0.y-c.v2.y,0))),c.getPoints(r)}),[]);l.useLayoutEffect((()=>{s.current.setPoints=(e,t,n)=>{const r=u(e,t,n);s.current.geometry&&s.current.geometry.setPositions(r.map((e=>e.toArray())).flat())}}),[]);const h=l.useMemo((()=>u(n,r,i,o)),[n,r,i,o]);return l.createElement(lO,tC({ref:s,points:h},a))})),hO=l.forwardRef((function(e,t){let{start:n,end:r,midA:i,midB:o,segments:a=20,...s}=e;const c=l.useMemo((()=>{const e=n instanceof vo?n:new vo(...n),t=r instanceof vo?r:new vo(...r),s=i instanceof vo?i:new vo(...i),l=o instanceof vo?o:new vo(...o);return new Vd(e,s,l,t).getPoints(a)}),[n,r,i,o,a]);return l.createElement(lO,tC({ref:t,points:c},s))})),dO=l.forwardRef((function(e,t){let{points:n,closed:r=!1,curveType:i="centripetal",tension:o=.5,segments:a=20,vertexColors:s,...c}=e;const u=l.useMemo((()=>{const e=n.map((e=>e instanceof vo?e:new vo(...e)));return new Nd(e,r,i,o)}),[n,r,i,o]),h=l.useMemo((()=>u.getPoints(a)),[u,a]),d=l.useMemo((()=>{if(!s||s.length<2)return;if(s.length===a+1)return s;const e=s.map((e=>e instanceof La?e:new La(...e)));r&&e.push(e[0].clone());const t=[e[0]],n=a/(e.length-1);for(let r=1;r<a;r++){const i=r%n/n,o=Math.floor(r/n);t.push(e[o].clone().lerp(e[o+1],i))}return t.push(e[e.length-1]),t}),[s,a]);return l.createElement(lO,tC({ref:t,points:h,vertexColors:d},c))})),fO=l.forwardRef(((e,t)=>{let{url:n,distance:r=1,loop:i=!0,autoplay:o,...a}=e;const s=l.useRef(null);l.useImperativeHandle(t,(()=>s.current),[]);const c=cy((e=>{let{camera:t}=e;return t})),[u]=l.useState((()=>new Rm)),h=py(bm,n);return l.useEffect((()=>{const e=s.current;e&&(e.setBuffer(h),e.setRefDistance(r),e.setLoop(i),o&&!e.isPlaying&&e.play())}),[h,c,r,i]),l.useEffect((()=>{const e=s.current;return c.add(u),()=>{c.remove(u),e&&(e.isPlaying&&e.stop(),e.source&&e.source._connected&&e.disconnect())}}),[]),l.createElement("positionalAudio",tC({ref:s,args:[u]},a))}));function pO(){var e=Object.create(null);function t(r,i){var o=r.id,a=r.name,s=r.dependencies;void 0===s&&(s=[]);var l=r.init;void 0===l&&(l=function(){});var c=r.getTransferables;if(void 0===c&&(c=null),!e[o])try{s=s.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),l=n("<"+a+">.init",l),c&&(c=n("<"+a+">.getTransferables",c));var u=null;"function"===typeof l?u=l.apply(void 0,s):console.error("worker module init function failed to rehydrate"),e[o]={id:o,value:u,getTransferables:c},i(u)}catch(h){h&&h.noLog||console.error(h),i(h)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(i){console.error(i)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,o=r.action,a=r.data;try{"registerModule"===o&&t(a,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"===typeof e}})})),"callModule"===o&&function(t,n){var r,i=t.id,o=t.args;e[i]&&"function"===typeof e[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var a=(r=e[i]).value.apply(r,o);a&&"function"===typeof a.then?a.then(s,(function(e){return n(e instanceof Error?e:new Error(""+e))})):s(a)}catch(l){n(l)}function s(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(l){console.error(l),n(l)}}}(a,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(s){postMessage({messageId:i,success:!1,error:s.stack})}}))}var mO=function(){var e=!1;if("undefined"!==typeof window&&"undefined"!==typeof window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return mO=function(){return e},e},gO=0,vO=0,yO=!1,AO=Object.create(null),xO=Object.create(null),bO=Object.create(null);function _O(e){if((!e||"function"!==typeof e.init)&&!yO)throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId;if(!mO())return function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"===typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var i=Promise.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}(e);null==i&&(i="#default");var o="workerModule"+ ++gO,a=e.name||o,s=null;function l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];if(!s){s=EO(i,"registerModule",l.workerModuleData);var n=function(){s=null,xO[i].delete(n)};(xO[i]||(xO[i]=new Set)).add(n)}return s.then((function(t){if(t.isCallable)return EO(i,"callModule",{id:o,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!==typeof e||e.workerModuleData||(yO=!0,e=_O({workerId:i,name:"<"+a+"> function dependency: "+e.name,init:"function(){return (\n"+wO(e)+"\n)}"}),yO=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),l.workerModuleData={isWorkerModule:!0,id:o,name:a,dependencies:t,init:wO(n),getTransferables:r&&wO(r)},l}function wO(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function EO(e,t,n){return new Promise((function(r,i){var o=++vO;bO[o]=function(e){e.success?r(e.result):i(new Error("Error in worker "+t+" call: "+e.error))},function(e){var t=AO[e];if(!t){var n=wO(pO);(t=AO[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=bO[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete bO[n],r(t)}}return t}(e).postMessage({messageId:o,action:t,data:n})}))}function SO(){var e=function(e){function t(e,t,n,r,i,o,a,s){var l=1-a;s.x=l*l*e+2*l*a*n+a*a*i,s.y=l*l*t+2*l*a*r+a*a*o}function n(e,t,n,r,i,o,a,s,l,c){var u=1-l;c.x=u*u*u*e+3*u*u*l*n+3*u*l*l*i+l*l*l*a,c.y=u*u*u*t+3*u*u*l*r+3*u*l*l*o+l*l*l*s}function r(e,t){for(var n,r,i,o,a,s=/([MLQCZ])([^MLQCZ]*)/g;n=s.exec(e);){var l=n[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map((function(e){return parseFloat(e)}));switch(n[1]){case"M":o=r=l[0],a=i=l[1];break;case"L":l[0]===o&&l[1]===a||t("L",o,a,o=l[0],a=l[1]);break;case"Q":t("Q",o,a,o=l[2],a=l[3],l[0],l[1]);break;case"C":t("C",o,a,o=l[4],a=l[5],l[0],l[1],l[2],l[3]);break;case"Z":o===r&&a===i||t("L",o,a,r,i)}}}function i(e,i,o){void 0===o&&(o=16);var a={x:0,y:0};r(e,(function(e,r,s,l,c,u,h,d,f){switch(e){case"L":i(r,s,l,c);break;case"Q":for(var p=r,m=s,g=1;g<o;g++)t(r,s,u,h,l,c,g/(o-1),a),i(p,m,a.x,a.y),p=a.x,m=a.y;break;case"C":for(var v=r,y=s,A=1;A<o;A++)n(r,s,u,h,d,f,l,c,A/(o-1),a),i(v,y,a.x,a.y),v=a.x,y=a.y}}))}var o="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",a="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",s=new WeakMap,l={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function c(e,t){var n=e.getContext?e.getContext("webgl",l):e,r=s.get(n);if(!r){var i="undefined"!==typeof WebGL2RenderingContext&&n instanceof WebGL2RenderingContext,o={},a={},c={},u=-1,h=[];function d(e){var t=o[e];if(!t&&!(t=o[e]=n.getExtension(e)))throw new Error(e+" not supported");return t}function f(e,t){var r=n.createShader(t);return n.shaderSource(r,e),n.compileShader(r),r}function p(e,t,r,o){if(!a[e]){var s={},l={},c=n.createProgram();n.attachShader(c,f(t,n.VERTEX_SHADER)),n.attachShader(c,f(r,n.FRAGMENT_SHADER)),n.linkProgram(c),a[e]={program:c,transaction:function(e){n.useProgram(c),e({setUniform:function(e,t){for(var r=[],i=arguments.length-2;i-- >0;)r[i]=arguments[i+2];var o=l[t]||(l[t]=n.getUniformLocation(c,t));n["uniform"+e].apply(n,[o].concat(r))},setAttribute:function(e,t,r,o,a){var l=s[e];l||(l=s[e]={buf:n.createBuffer(),loc:n.getAttribLocation(c,e),data:null}),n.bindBuffer(n.ARRAY_BUFFER,l.buf),n.vertexAttribPointer(l.loc,t,n.FLOAT,!1,0,0),n.enableVertexAttribArray(l.loc),i?n.vertexAttribDivisor(l.loc,o):d("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(l.loc,o),a!==l.data&&(n.bufferData(n.ARRAY_BUFFER,a,r),l.data=a)}})}}}a[e].transaction(o)}function m(e,t){u++;try{n.activeTexture(n.TEXTURE0+u);var r=c[e];r||(r=c[e]=n.createTexture(),n.bindTexture(n.TEXTURE_2D,r),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST)),n.bindTexture(n.TEXTURE_2D,r),t(r,u)}finally{u--}}function g(e,t,r){var i=n.createFramebuffer();h.push(i),n.bindFramebuffer(n.FRAMEBUFFER,i),n.activeTexture(n.TEXTURE0+t),n.bindTexture(n.TEXTURE_2D,e),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0);try{r(i)}finally{n.deleteFramebuffer(i),n.bindFramebuffer(n.FRAMEBUFFER,h[--h.length-1]||null)}}function v(){o={},a={},c={},u=-1,h.length=0}n.canvas.addEventListener("webglcontextlost",(function(e){v(),e.preventDefault()}),!1),s.set(n,r={gl:n,isWebGL2:i,getExtension:d,withProgram:p,withTexture:m,withTextureFramebuffer:g,handleContextLoss:v})}t(r)}function u(e,t,n,r,i,s,l,u){void 0===l&&(l=15),void 0===u&&(u=null),c(e,(function(e){var c=e.gl,h=e.withProgram;(0,e.withTexture)("copy",(function(e,d){c.texImage2D(c.TEXTURE_2D,0,c.RGBA,i,s,0,c.RGBA,c.UNSIGNED_BYTE,t),h("copy",o,a,(function(e){var t=e.setUniform;(0,e.setAttribute)("aUV",2,c.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),t("1i","image",d),c.bindFramebuffer(c.FRAMEBUFFER,u||null),c.disable(c.BLEND),c.colorMask(8&l,4&l,2&l,1&l),c.viewport(n,r,i,s),c.scissor(n,r,i,s),c.drawArrays(c.TRIANGLES,0,3)}))}))}))}var h=Object.freeze({__proto__:null,withWebGLContext:c,renderImageData:u,resizeWebGLCanvasWithoutClearing:function(e,t,n){var r=e.width,i=e.height;c(e,(function(o){var a=o.gl,s=new Uint8Array(r*i*4);a.readPixels(0,0,r,i,a.RGBA,a.UNSIGNED_BYTE,s),e.width=t,e.height=n,u(a,s,0,0,r,i)}))}});function d(e,t,n,r,o,a){void 0===a&&(a=1);var s=new Uint8Array(e*t),l=r[2]-r[0],c=r[3]-r[1],u=[];i(n,(function(e,t,n,r){u.push({x1:e,y1:t,x2:n,y2:r,minX:Math.min(e,n),minY:Math.min(t,r),maxX:Math.max(e,n),maxY:Math.max(t,r)})})),u.sort((function(e,t){return e.maxX-t.maxX}));for(var h=0;h<e;h++)for(var d=0;d<t;d++){var f=g(r[0]+l*(h+.5)/e,r[1]+c*(d+.5)/t),p=Math.pow(1-Math.abs(f)/o,a)/2;f<0&&(p=1-p),p=Math.max(0,Math.min(255,Math.round(255*p))),s[d*e+h]=p}return s;function g(e,t){for(var n=1/0,r=1/0,i=u.length;i--;){var o=u[i];if(o.maxX+r<=e)break;if(e+r>o.minX&&t-r<o.maxY&&t+r>o.minY){var a=m(e,t,o.x1,o.y1,o.x2,o.y2);a<n&&(n=a,r=Math.sqrt(n))}}return function(e,t){for(var n=0,r=u.length;r--;){var i=u[r];if(i.maxX<=e)break;i.y1>t!==i.y2>t&&e<(i.x2-i.x1)*(t-i.y1)/(i.y2-i.y1)+i.x1&&(n+=i.y1<i.y2?1:-1)}return 0!==n}(e,t)&&(r=-r),r}}function f(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),p(e,t,n,r,i,o,a,null,s,l,c)}function p(e,t,n,r,i,o,a,s,l,c,h){void 0===o&&(o=1),void 0===l&&(l=0),void 0===c&&(c=0),void 0===h&&(h=0);for(var f=d(e,t,n,r,i,o),p=new Uint8Array(4*f.length),m=0;m<f.length;m++)p[4*m+h]=f[m];u(a,p,l,c,e,t,1<<3-h,s)}function m(e,t,n,r,i,o){var a=i-n,s=o-r,l=a*a+s*s,c=l?Math.max(0,Math.min(1,((e-n)*a+(t-r)*s)/l)):0,u=e-(n+c*a),h=t-(r+c*s);return u*u+h*h}var g=Object.freeze({__proto__:null,generate:d,generateIntoCanvas:f,generateIntoFramebuffer:p}),v="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",y="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",A="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",x=new Float32Array([0,0,2,0,0,2]),b=null,_=!1,w={},E=new WeakMap;function S(e){if(!_&&!I(e))throw new Error("WebGL generation not supported")}function C(e,t,n,r,i,o,a){if(void 0===o&&(o=1),void 0===a&&(a=null),!a&&!(a=b)){var s="function"===typeof OffscreenCanvas?new OffscreenCanvas(1,1):"undefined"!==typeof document?document.createElement("canvas"):null;if(!s)throw new Error("OffscreenCanvas or DOM canvas not supported");a=b=s.getContext("webgl",{depth:!1})}S(a);var l=new Uint8Array(e*t*4);c(a,(function(a){var s=a.gl,c=a.withTexture,u=a.withTextureFramebuffer;c("readable",(function(a,c){s.texImage2D(s.TEXTURE_2D,0,s.RGBA,e,t,0,s.RGBA,s.UNSIGNED_BYTE,null),u(a,c,(function(a){T(e,t,n,r,i,o,s,a,0,0,0),s.readPixels(0,0,e,t,s.RGBA,s.UNSIGNED_BYTE,l)}))}))}));for(var u=new Uint8Array(e*t),h=0,d=0;h<l.length;h+=4)u[d++]=l[h];return u}function M(e,t,n,r,i,o,a,s,l,c){void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0),T(e,t,n,r,i,o,a,null,s,l,c)}function T(e,t,n,r,a,s,l,u,h,d,f){void 0===s&&(s=1),void 0===h&&(h=0),void 0===d&&(d=0),void 0===f&&(f=0),S(l);var p=[];i(n,(function(e,t,n,r){p.push(e,t,n,r)})),p=new Float32Array(p),c(l,(function(n){var i=n.gl,l=n.isWebGL2,c=n.getExtension,m=n.withProgram,g=n.withTexture,b=n.withTextureFramebuffer,_=n.handleContextLoss;if(g("rawDistances",(function(n,g){e===n._lastWidth&&t===n._lastHeight||i.texImage2D(i.TEXTURE_2D,0,i.RGBA,n._lastWidth=e,n._lastHeight=t,0,i.RGBA,i.UNSIGNED_BYTE,null),m("main",v,y,(function(o){var u=o.setAttribute,h=o.setUniform,d=!l&&c("ANGLE_instanced_arrays"),f=!l&&c("EXT_blend_minmax");u("aUV",2,i.STATIC_DRAW,0,x),u("aLineSegment",4,i.DYNAMIC_DRAW,1,p),h.apply(void 0,["4f","uGlyphBounds"].concat(r)),h("1f","uMaxDistance",a),h("1f","uExponent",s),b(n,g,(function(n){i.enable(i.BLEND),i.colorMask(!0,!0,!0,!0),i.viewport(0,0,e,t),i.scissor(0,0,e,t),i.blendFunc(i.ONE,i.ONE),i.blendEquationSeparate(i.FUNC_ADD,l?i.MAX:f.MAX_EXT),i.clear(i.COLOR_BUFFER_BIT),l?i.drawArraysInstanced(i.TRIANGLES,0,3,p.length/4):d.drawArraysInstancedANGLE(i.TRIANGLES,0,3,p.length/4)}))})),m("post",o,A,(function(n){n.setAttribute("aUV",2,i.STATIC_DRAW,0,x),n.setUniform("1i","tex",g),i.bindFramebuffer(i.FRAMEBUFFER,u),i.disable(i.BLEND),i.colorMask(0===f,1===f,2===f,3===f),i.viewport(h,d,e,t),i.scissor(h,d,e,t),i.drawArrays(i.TRIANGLES,0,3)}))})),i.isContextLost())throw _(),new Error("webgl context lost")}))}function I(e){var t=e&&e!==b?e.canvas||e:w,n=E.get(t);if(void 0===n){_=!0;var r=null;try{var i=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],o=C(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,e);n=o&&i.length===o.length&&o.every((function(e,t){return e===i[t]})),n||(r="bad trial run results",console.info(i,o))}catch(a){n=!1,r=a.message}r&&console.warn("WebGL SDF generation not supported:",r),_=!1,E.set(t,n)}return n}var B=Object.freeze({__proto__:null,generate:C,generateIntoCanvas:M,generateIntoFramebuffer:T,isSupported:I});return e.forEachPathCommand=r,e.generate=function(e,t,n,r,i,o){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1);try{return C.apply(B,arguments)}catch(NQ){return console.info("WebGL SDF generation failed, falling back to JS",NQ),d.apply(g,arguments)}},e.generateIntoCanvas=function(e,t,n,r,i,o,a,s,l,c){void 0===i&&(i=Math.max(r[2]-r[0],r[3]-r[1])/2),void 0===o&&(o=1),void 0===s&&(s=0),void 0===l&&(l=0),void 0===c&&(c=0);try{return M.apply(B,arguments)}catch(NQ){return console.info("WebGL SDF generation failed, falling back to JS",NQ),f.apply(g,arguments)}},e.javascript=g,e.pathToLineSegments=i,e.webgl=B,e.webglUtils=h,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e}const CO=function(){var e=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,o=n.L|n.R|n.AL,a=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,s=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,l=n.S|n.WS|n.B|i|n.PDI|s,c=null;function u(e){return function(){if(!c){c=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),o=i[0],a=i[1];o=parseInt(o,36),a=a?parseInt(a,36):0,c.set(r+=o,n[e]);for(var s=0;s<a;s++)c.set(++r,n[e])}))}};for(var r in t)e(r)}}(),c.get(e.codePointAt(0))||n.L}var h,d,f,p={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function m(e,t){var n,r=0,i=new Map,o=t&&new Map;return e.split(",").forEach((function e(a){if(-1!==a.indexOf("+"))for(var s=+a;s--;)e(n);else{n=a;var l=a.split(">"),c=l[0],u=l[1];c=String.fromCodePoint(r+=parseInt(c,36)),u=String.fromCodePoint(r+=parseInt(u,36)),i.set(c,u),t&&o.set(u,c)}})),{map:i,reverseMap:o}}function g(){if(!h){var e=m(p.pairs,!0),t=e.map,n=e.reverseMap;h=t,d=n,f=m(p.canonical,!1).map}}function v(e){return g(),h.get(e)||null}function y(e){return g(),d.get(e)||null}function A(e){return g(),f.get(e)||null}var x=n.L,b=n.R,_=n.EN,w=n.ES,E=n.ET,S=n.AN,C=n.CS,M=n.B,T=n.S,I=n.ON,B=n.BN,P=n.NSM,R=n.AL,D=n.LRO,O=n.RLO,k=n.LRE,L=n.RLE,F=n.PDF,z=n.LRI,U=n.RLI,N=n.FSI,j=n.PDI;var G,Q="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1";function H(e){return function(){if(!G){var e=m(Q,!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),G=t}}(),G.get(e)||null}function V(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var o=[];return t.paragraphs.forEach((function(i){var a=Math.max(n,i.start),s=Math.min(r,i.end);if(a<s){for(var c=t.levels.slice(a,s+1),h=s;h>=a&&u(e[h])&l;h--)c[h]=i.level;for(var d=i.level,f=1/0,p=0;p<c.length;p++){var m=c[p];m>d&&(d=m),m<f&&(f=1|m)}for(var g=d;g>=f;g--)for(var v=0;v<c.length;v++)if(c[v]>=g){for(var y=v;v+1<c.length&&c[v+1]>=g;)v++;v>y&&o.push([y+a,v+a])}}})),o}function W(e,t,n,r){for(var i=V(e,t,n,r),o=[],a=0;a<e.length;a++)o[a]=a;return i.forEach((function(e){for(var t=e[0],n=e[1],r=o.slice(t,n+1),i=r.length;i--;)o[n-i]=r[i]})),o}return e.closingToOpeningBracket=y,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return r[u(e)]},e.getCanonicalBracket=A,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=u(e[r]);var c=new Map;function h(e,t){var r=n[e];n[e]=t,c.set(r,c.get(r)-1),r&a&&c.set(a,c.get(a)-1),c.set(t,(c.get(t)||0)+1),t&a&&c.set(a,(c.get(a)||0)+1)}for(var d=new Uint8Array(e.length),f=new Map,p=[],m=null,g=0;g<e.length;g++)m||p.push(m={start:g,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:jt(g,!1)}),n[g]&M&&(m.end=g,m=null);for(var G=L|k|O|D|i|j|F|M,Q=function(e){return e+(1&e?1:2)},H=function(e){return e+(1&e?2:1)},V=0;V<p.length;V++){var W=[{_level:(m=p[V]).level,_override:0,_isolate:0}],q=void 0,X=0,Y=0,J=0;c.clear();for(var K=m.start;K<=m.end;K++){var Z=n[K];if(q=W[W.length-1],c.set(Z,(c.get(Z)||0)+1),Z&a&&c.set(a,(c.get(a)||0)+1),Z&G)if(Z&(L|k)){d[K]=q._level;var $=(Z===L?H:Q)(q._level);$<=125&&!X&&!Y?W.push({_level:$,_override:0,_isolate:0}):X||Y++}else if(Z&(O|D)){d[K]=q._level;var ee=(Z===O?H:Q)(q._level);ee<=125&&!X&&!Y?W.push({_level:ee,_override:Z&O?b:x,_isolate:0}):X||Y++}else if(Z&i){Z&N&&(Z=1===jt(K+1,!0)?U:z),d[K]=q._level,q._override&&h(K,q._override);var te=(Z===U?H:Q)(q._level);te<=125&&0===X&&0===Y?(J++,W.push({_level:te,_override:0,_isolate:1,_isolInitIndex:K})):X++}else if(Z&j){if(X>0)X--;else if(J>0){for(Y=0;!W[W.length-1]._isolate;)W.pop();var ne=W[W.length-1]._isolInitIndex;null!=ne&&(f.set(ne,K),f.set(K,ne)),W.pop(),J--}q=W[W.length-1],d[K]=q._level,q._override&&h(K,q._override)}else Z&F?(0===X&&(Y>0?Y--:!q._isolate&&W.length>1&&(W.pop(),q=W[W.length-1])),d[K]=q._level):Z&M&&(d[K]=m.level);else d[K]=q._level,q._override&&Z!==B&&h(K,q._override)}for(var re=[],ie=null,oe=m.start;oe<=m.end;oe++){var ae=n[oe];if(!(ae&s)){var se=d[oe],le=ae&i,ce=ae===j;ie&&se===ie._level?(ie._end=oe,ie._endsWithIsolInit=le):re.push(ie={_start:oe,_end:oe,_level:se,_startsWithPDI:ce,_endsWithIsolInit:le})}}for(var ue=[],he=0;he<re.length;he++){var de=re[he];if(!de._startsWithPDI||de._startsWithPDI&&!f.has(de._start)){for(var fe=[ie=de],pe=void 0;ie&&ie._endsWithIsolInit&&null!=(pe=f.get(ie._end));)for(var me=he+1;me<re.length;me++)if(re[me]._start===pe){fe.push(ie=re[me]);break}for(var ge=[],ve=0;ve<fe.length;ve++)for(var ye=fe[ve],Ae=ye._start;Ae<=ye._end;Ae++)ge.push(Ae);for(var xe=d[ge[0]],be=m.level,_e=ge[0]-1;_e>=0;_e--)if(!(n[_e]&s)){be=d[_e];break}var we=ge[ge.length-1],Ee=d[we],Se=m.level;if(!(n[we]&i))for(var Ce=we+1;Ce<=m.end;Ce++)if(!(n[Ce]&s)){Se=d[Ce];break}ue.push({_seqIndices:ge,_sosType:Math.max(be,xe)%2?b:x,_eosType:Math.max(Se,Ee)%2?b:x})}}for(var Me=0;Me<ue.length;Me++){var Te=ue[Me],Ie=Te._seqIndices,Be=Te._sosType,Pe=Te._eosType,Re=1&d[Ie[0]]?b:x;if(c.get(P))for(var De=0;De<Ie.length;De++){var Oe=Ie[De];if(n[Oe]&P){for(var ke=Be,Le=De-1;Le>=0;Le--)if(!(n[Ie[Le]]&s)){ke=n[Ie[Le]];break}h(Oe,ke&(i|j)?I:ke)}}if(c.get(_))for(var Fe=0;Fe<Ie.length;Fe++){var ze=Ie[Fe];if(n[ze]&_)for(var Ue=Fe-1;Ue>=-1;Ue--){var Ne=-1===Ue?Be:n[Ie[Ue]];if(Ne&o){Ne===R&&h(ze,S);break}}}if(c.get(R))for(var je=0;je<Ie.length;je++){var Ge=Ie[je];n[Ge]&R&&h(Ge,b)}if(c.get(w)||c.get(C))for(var Qe=1;Qe<Ie.length-1;Qe++){var He=Ie[Qe];if(n[He]&(w|C)){for(var Ve=0,We=0,qe=Qe-1;qe>=0&&(Ve=n[Ie[qe]])&s;qe--);for(var Xe=Qe+1;Xe<Ie.length&&(We=n[Ie[Xe]])&s;Xe++);Ve===We&&(n[He]===w?Ve===_:Ve&(_|S))&&h(He,Ve)}}if(c.get(_))for(var Ye=0;Ye<Ie.length;Ye++){var Je=Ie[Ye];if(n[Je]&_){for(var Ke=Ye-1;Ke>=0&&n[Ie[Ke]]&(E|s);Ke--)h(Ie[Ke],_);for(Ye++;Ye<Ie.length&&n[Ie[Ye]]&(E|s|_);Ye++)n[Ie[Ye]]!==_&&h(Ie[Ye],_)}}if(c.get(E)||c.get(w)||c.get(C))for(var Ze=0;Ze<Ie.length;Ze++){var $e=Ie[Ze];if(n[$e]&(E|w|C)){h($e,I);for(var et=Ze-1;et>=0&&n[Ie[et]]&s;et--)h(Ie[et],I);for(var tt=Ze+1;tt<Ie.length&&n[Ie[tt]]&s;tt++)h(Ie[tt],I)}}if(c.get(_))for(var nt=0,rt=Be;nt<Ie.length;nt++){var it=Ie[nt],ot=n[it];ot&_?rt===x&&h(it,x):ot&o&&(rt=ot)}if(c.get(a)){for(var at=b|_|S,st=at|x,lt=[],ct=[],ut=0;ut<Ie.length;ut++)if(n[Ie[ut]]&a){var ht=e[Ie[ut]],dt=void 0;if(null!==v(ht)){if(!(ct.length<63))break;ct.push({char:ht,seqIndex:ut})}else if(null!==(dt=y(ht)))for(var ft=ct.length-1;ft>=0;ft--){var pt=ct[ft].char;if(pt===dt||pt===y(A(ht))||v(A(pt))===ht){lt.push([ct[ft].seqIndex,ut]),ct.length=ft;break}}}lt.sort((function(e,t){return e[0]-t[0]}));for(var mt=0;mt<lt.length;mt++){for(var gt=lt[mt],vt=gt[0],yt=gt[1],At=!1,xt=0,bt=vt+1;bt<yt;bt++){var _t=Ie[bt];if(n[_t]&st){At=!0;var wt=n[_t]&at?b:x;if(wt===Re){xt=wt;break}}}if(At&&!xt){xt=Be;for(var Et=vt-1;Et>=0;Et--){var St=Ie[Et];if(n[St]&st){var Ct=n[St]&at?b:x;xt=Ct!==Re?Ct:Re;break}}}if(xt){if(n[Ie[vt]]=n[Ie[yt]]=xt,xt!==Re)for(var Mt=vt+1;Mt<Ie.length;Mt++)if(!(n[Ie[Mt]]&s)){u(e[Ie[Mt]])&P&&(n[Ie[Mt]]=xt);break}if(xt!==Re)for(var Tt=yt+1;Tt<Ie.length;Tt++)if(!(n[Ie[Tt]]&s)){u(e[Ie[Tt]])&P&&(n[Ie[Tt]]=xt);break}}}for(var It=0;It<Ie.length;It++)if(n[Ie[It]]&a){for(var Bt=It,Pt=It,Rt=Be,Dt=It-1;Dt>=0;Dt--){if(!(n[Ie[Dt]]&s)){Rt=n[Ie[Dt]]&at?b:x;break}Bt=Dt}for(var Ot=Pe,kt=It+1;kt<Ie.length;kt++){if(!(n[Ie[kt]]&(a|s))){Ot=n[Ie[kt]]&at?b:x;break}Pt=kt}for(var Lt=Bt;Lt<=Pt;Lt++)n[Ie[Lt]]=Rt===Ot?Rt:Re;It=Pt}}}for(var Ft=m.start;Ft<=m.end;Ft++){var zt=d[Ft],Ut=n[Ft];if(1&zt?Ut&(x|_|S)&&d[Ft]++:Ut&b?d[Ft]++:Ut&(S|_)&&(d[Ft]+=2),Ut&s&&(d[Ft]=0===Ft?m.level:d[Ft-1]),Ft===m.end||u(e[Ft])&(T|M))for(var Nt=Ft;Nt>=0&&u(e[Nt])&l;Nt--)d[Nt]=m.level}}return{levels:d,paragraphs:p};function jt(t,r){for(var o=t;o<e.length;o++){var a=n[o];if(a&(b|R))return 1;if(a&(M|x)||r&&a===j)return 0;if(a&i){var s=Gt(o);o=-1===s?e.length:s}}return 0}function Gt(t){for(var r=1,o=t+1;o<e.length;o++){var a=n[o];if(a&M)break;if(a&j){if(0===--r)return o}else a&i&&r++}return-1}},e.getMirroredCharacter=H,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var o=new Map,a=n;a<=r;a++)if(1&t[a]){var s=H(e[a]);null!==s&&o.set(a,s)}return o},e.getReorderSegments=V,e.getReorderedIndices=W,e.getReorderedString=function(e,t,n,r){var i=W(e,t,n,r),o=[].concat(e);return i.forEach((function(n,r){o[r]=(1&t.levels[n]?H(e[n]):null)||e[n]})),o.join("")},e.openingToClosingBracket=v,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return e},MO=/\bvoid\s+main\s*\(\s*\)\s*{/g;function TO(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let n=nl[t];return n?TO(n):e}))}const IO=[];for(let n=0;n<256;n++)IO[n]=(n<16?"0":"")+n.toString(16);const BO=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},PO=Date.now(),RO=new WeakMap,DO=new Map;let OO=1e10;function kO(e,t){const n=function(e){const t=JSON.stringify(e,FO);let n=UO.get(t);null==n&&UO.set(t,n=++zO);return n}(t);let r=RO.get(e);if(r||RO.set(e,r=Object.create(null)),r[n])return new r[n];const i=`_onBeforeCompile${n}`,o=function(r,o){e.onBeforeCompile.call(this,r,o);const a=this.customProgramCacheKey()+"|"+r.vertexShader+"|"+r.fragmentShader;let s=DO[a];if(!s){const e=function(e,t,n,r){let{vertexShader:i,fragmentShader:o}=t,{vertexDefs:a,vertexMainIntro:s,vertexMainOutro:l,vertexTransform:c,fragmentDefs:u,fragmentMainIntro:h,fragmentMainOutro:d,fragmentColorTransform:f,customRewriter:p,timeUniform:m}=n;a=a||"",s=s||"",l=l||"",u=u||"",h=h||"",d=d||"",(c||p)&&(i=TO(i));(f||p)&&(o=o.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n"),o=TO(o));if(p){let e=p({vertexShader:i,fragmentShader:o});i=e.vertexShader,o=e.fragmentShader}if(f){let e=[];o=o.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),d=`${f}\n${e.join("\n")}\n${d}`}if(m){const e=`\nuniform float ${m};\n`;a=e+a,u=e+u}c&&(i=`vec3 troika_position_${r};\nvec3 troika_normal_${r};\nvec2 troika_uv_${r};\n${i}\n`,a=`${a}\nvoid troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${c}\n}\n`,s=`\ntroika_position_${r} = vec3(position);\ntroika_normal_${r} = vec3(normal);\ntroika_uv_${r} = vec2(uv);\ntroikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});\n${s}\n`,i=i.replace(/\b(position|normal|uv)\b/g,((e,t,n,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,n))?t:`troika_${t}_${r}`)),e.map&&e.map.channel>0||(i=i.replace(/\bMAP_UV\b/g,`troika_uv_${r}`)));return i=LO(i,r,a,s,l),o=LO(o,r,u,h,d),{vertexShader:i,fragmentShader:o}}(this,r,t,n);s=DO[a]=e}r.vertexShader=s.vertexShader,r.fragmentShader=s.fragmentShader,BO(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-PO}}),this[i]&&this[i](r)},a=function(){return s(t.chained?e:e.clone())},s=function(r){const i=Object.create(r,l);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:OO++}),i.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(IO[255&e]+IO[e>>8&255]+IO[e>>16&255]+IO[e>>24&255]+"-"+IO[255&t]+IO[t>>8&255]+"-"+IO[t>>16&15|64]+IO[t>>24&255]+"-"+IO[63&n|128]+IO[n>>8&255]+"-"+IO[n>>16&255]+IO[n>>24&255]+IO[255&r]+IO[r>>8&255]+IO[r>>16&255]+IO[r>>24&255]).toUpperCase()}(),i.uniforms=BO({},r.uniforms,t.uniforms),i.defines=BO({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=BO({},r.extensions,t.extensions),i._listeners=void 0,i},l={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return e.customProgramCacheKey()+"|"+n}},onBeforeCompile:{get:()=>o,set(e){this[i]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(BO(this.extensions,t.extensions),BO(this.defines,t.defines),BO(this.uniforms,ks.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return s(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=kO(e.isDerivedMaterial?e.getDepthMaterial():new Cu({depthPacking:Ir}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=kO(e.isDerivedMaterial?e.getDistanceMaterial():new Mu,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return r[n]=a,new a}function LO(e,t,n,r,i){return(r||i||n)&&(e=e.replace(MO,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function FO(e,t){return"uniforms"===e?void 0:"function"===typeof t?t.toString():t}let zO=0;const UO=new Map;const NO=_O({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var o=n.readUint(r,i);i+=4;for(var a=[],s=0;s<o;s++){var l=n.readUint(r,i);i+=4,a.push(t._readFont(r,l))}return a}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var a=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],s={_data:e,_offset:i},l={},c=0;c<o;c++){var u=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var h=r.readUint(e,n);n+=4;var d=r.readUint(e,n);n+=4,l[u]={offset:h,length:d}}for(c=0;c<a.length;c++){var f=a[c];l[f]&&(s[f.trim()]=t[f.trim()].parse(e,l[f].offset,l[f].length,s))}return s},_tabOffset:function(e,n,r){for(var i=t._bin,o=i.readUshort(e,r+4),a=r+12,s=0;s<o;s++){var l=i.readASCII(e,a,4);a+=4,i.readUint(e,a),a+=4;var c=i.readUint(e,a);if(a+=4,i.readUint(e,a),a+=4,l==n)return c}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){return t._bin._view(e).getInt32(n)},readInt8:function(e,n){return t._bin._view(e).getInt8(n)},readShort:function(e,n){return t._bin._view(e).getInt16(n)},readUshort:function(e,n){return t._bin._view(e).getUint16(n)},readUshorts:function(e,n,r){for(var i=[],o=0;o<r;o++)i.push(t._bin.readUshort(e,n+2*o));return i},readUint:function(e,n){return t._bin._view(e).getUint32(n)},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var o=e[t++]<<8|e[t++];r+=String.fromCharCode(o)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r},_view:function(e){return e._dataView||(e._dataView=e.buffer?new DataView(e.buffer,e.byteOffset,e.byteLength):new DataView(new Uint8Array(e).buffer))}},t._lctf={},t._lctf.parse=function(e,n,r,i,o){var a=t._bin,s={},l=n;a.readFixed(e,n),n+=4;var c=a.readUshort(e,n);n+=2;var u=a.readUshort(e,n);n+=2;var h=a.readUshort(e,n);return n+=2,s.scriptList=t._lctf.readScriptList(e,l+c),s.featureList=t._lctf.readFeatureList(e,l+u),s.lookupList=t._lctf.readLookupList(e,l+h,o),s},t._lctf.readLookupList=function(e,n,r){var i=t._bin,o=n,a=[],s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=i.readUshort(e,n);n+=2;var u=t._lctf.readLookupTable(e,o+c,r);a.push(u)}return a},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,o=n,a={tabs:[]};a.ltype=i.readUshort(e,n),n+=2,a.flag=i.readUshort(e,n),n+=2;var s=i.readUshort(e,n);n+=2;for(var l=a.ltype,c=0;c<s;c++){var u=i.readUshort(e,n);n+=2;var h=r(e,l,o+u,a);a.tabs.push(h)}return a},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)0!=(e>>>n&1)&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],o=r.readUshort(e,n);if(n+=2,1==o){var a=r.readUshort(e,n);n+=2;var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++)i.push(a+l),i.push(a+l),i.push(r.readUshort(e,n)),n+=2}if(2==o){var c=r.readUshort(e,n);for(n+=2,l=0;l<c;l++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,o)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*o)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2;var u=t._lctf.readFeatureTable(e,i+c);u.tag=l.trim(),o.push(u)}return o},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,a>0&&(o.featureParams=i+a);var s=r.readUshort(e,n);n+=2,o.tab=[];for(var l=0;l<s;l++)o.tab.push(r.readUshort(e,n+2*l));return o},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readASCII(e,n,4);n+=4;var c=r.readUshort(e,n);n+=2,o[l.trim()]=t._lctf.readScriptTable(e,i+c)}return o},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,o={},a=r.readUshort(e,n);n+=2,a>0&&(o.default=t._lctf.readLangSysTable(e,i+a));var s=r.readUshort(e,n);n+=2;for(var l=0;l<s;l++){var c=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,o[c.trim()]=t._lctf.readLangSysTable(e,i+u)}return o},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,o),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var o=[];n=t.CFF.readIndex(e,n,o);for(var a=[],s=0;s<o.length-1;s++)a.push(i.readASCII(e,n+o[s],o[s+1]-o[s]));n+=o[o.length-1];var l=[];n=t.CFF.readIndex(e,n,l);var c=[];for(s=0;s<l.length-1;s++)c.push(t.CFF.readDict(e,n+l[s],n+l[s+1]));n+=l[l.length-1];var u=c[0],h=[];n=t.CFF.readIndex(e,n,h);var d=[];for(s=0;s<h.length-1;s++)d.push(i.readASCII(e,n+h[s],h[s+1]-h[s]));if(n+=h[h.length-1],t.CFF.readSubrs(e,n,u),u.CharStrings){n=u.CharStrings,h=[],n=t.CFF.readIndex(e,n,h);var f=[];for(s=0;s<h.length-1;s++)f.push(i.readBytes(e,n+h[s],h[s+1]-h[s]));u.CharStrings=f}if(u.ROS){n=u.FDArray;var p=[];for(n=t.CFF.readIndex(e,n,p),u.FDArray=[],s=0;s<p.length-1;s++){var m=t.CFF.readDict(e,n+p[s],n+p[s+1]);t.CFF._readFDict(e,m,d),u.FDArray.push(m)}n+=p[p.length-1],n=u.FDSelect,u.FDSelect=[];var g=e[n];if(n++,3!=g)throw g;var v=i.readUshort(e,n);for(n+=2,s=0;s<v+1;s++)u.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,n,r){var i;for(var o in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(o)&&(n[o]=r[n[o]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,o=[];n=t.CFF.readIndex(e,n,o);var a,s=o.length;a=s<1240?107:s<33900?1131:32768,r.Bias=a,r.Subrs=[];for(var l=0;l<o.length-1;l++)r.Subrs.push(i.readBytes(e,n+o[l],o[l+1]-o[l]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],o=e[n];if(n++,0!=o)throw"error: unknown encoding format: "+o;var a=e[n];n++;for(var s=0;s<a;s++)i.push(e[n+s]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,o=[".notdef"],a=e[n];if(n++,0==a)for(var s=0;s<r;s++){var l=i.readUshort(e,n);n+=2,o.push(l)}else{if(1!=a&&2!=a)throw"error: format: "+a;for(;o.length<r;){l=i.readUshort(e,n),n+=2;var c=0;for(1==a?(c=e[n],n++):(c=i.readUshort(e,n),n+=2),s=0;s<=c;s++)o.push(l),l++}}return o},t.CFF.readIndex=function(e,n,r){var i=t._bin,o=i.readUshort(e,n)+1,a=e[n+=2];if(n++,1==a)for(var s=0;s<o;s++)r.push(e[n+s]);else if(2==a)for(s=0;s<o;s++)r.push(i.readUshort(e,n+2*s));else if(3==a)for(s=0;s<o;s++)r.push(16777215&i.readUint(e,n+3*s-1));else if(1!=o)throw"unsupported offset size: "+a+", count: "+o;return(n+=o*a)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,o=e[n],a=e[n+1];e[n+2],e[n+3],e[n+4];var s=1,l=null,c=null;o<=20&&(l=o,s=1),12==o&&(l=100*o+a,s=2),21<=o&&o<=27&&(l=o,s=1),28==o&&(c=i.readShort(e,n+1),s=3),29<=o&&o<=31&&(l=o,s=1),32<=o&&o<=246&&(c=o-139,s=1),247<=o&&o<=250&&(c=256*(o-247)+a+108,s=2),251<=o&&o<=254&&(c=256*-(o-251)-a-108,s=2),255==o&&(c=i.readInt(e,n+1)/65535,s=5),r.val=null!=c?c:"o"+l,r.size=s},t.CFF.readCharString=function(e,n,r){for(var i=n+r,o=t._bin,a=[];n<i;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;s<=20&&(u=s,c=1),12==s&&(u=100*s+l,c=2),19!=s&&20!=s||(u=s,c=2),21<=s&&s<=27&&(u=s,c=1),28==s&&(h=o.readShort(e,n+1),c=3),29<=s&&s<=31&&(u=s,c=1),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s&&(h=o.readInt(e,n+1)/65535,c=5),a.push(null!=h?h:"o"+u),n+=c}return a},t.CFF.readDict=function(e,n,r){for(var i=t._bin,o={},a=[];n<r;){var s=e[n],l=e[n+1];e[n+2],e[n+3],e[n+4];var c=1,u=null,h=null;if(28==s&&(h=i.readShort(e,n+1),c=3),29==s&&(h=i.readInt(e,n+1),c=5),32<=s&&s<=246&&(h=s-139,c=1),247<=s&&s<=250&&(h=256*(s-247)+l+108,c=2),251<=s&&s<=254&&(h=256*-(s-251)-l-108,c=2),255==s)throw h=i.readInt(e,n+1)/65535,c=5,"unknown number";if(30==s){var d=[];for(c=1;;){var f=e[n+c];c++;var p=f>>4,m=15&f;if(15!=p&&d.push(p),15!=m&&d.push(m),15==m)break}for(var g="",v=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<d.length;y++)g+=v[d[y]];h=parseFloat(g)}s<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][s],c=1,12==s&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][l],c=2)),null!=u?(o[u]=1==a.length?a[0]:a,a=[]):a.push(h),n+=c}return o},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;var s=[];o.tables=[];for(var l=0;l<a;l++){var c=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var h=i.readUint(e,n);n+=4;var d="p"+c+"e"+u,f=s.indexOf(h);if(-1==f){var p;f=o.tables.length,s.push(h);var m=i.readUshort(e,h);0==m?p=t.cmap.parse0(e,h):4==m?p=t.cmap.parse4(e,h):6==m?p=t.cmap.parse6(e,h):12==m?p=t.cmap.parse12(e,h):console.debug("unknown format: "+m,c,u,h),o.tables.push(p)}if(null!=o[d])throw"multiple tables for one platform+encoding";o[d]=f}return o},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var a=0;a<o-6;a++)i.map.push(e[n+a]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,o={};o.format=r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;var l=s/2;o.searchRange=r.readUshort(e,n),n+=2,o.entrySelector=r.readUshort(e,n),n+=2,o.rangeShift=r.readUshort(e,n),n+=2,o.endCount=r.readUshorts(e,n,l),n+=2*l,n+=2,o.startCount=r.readUshorts(e,n,l),n+=2*l,o.idDelta=[];for(var c=0;c<l;c++)o.idDelta.push(r.readShort(e,n)),n+=2;for(o.idRangeOffset=r.readUshorts(e,n,l),n+=2*l,o.glyphIdArray=[];n<i+a;)o.glyphIdArray.push(r.readUshort(e,n)),n+=2;return o},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var a=0;a<o;a++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var o=r.readUint(e,n);n+=4,i.groups=[];for(var a=0;a<o;a++){var s=n+12*a,l=r.readUint(e,s+0),c=r.readUint(e,s+4),u=r.readUint(e,s+8);i.groups.push([l,c,u])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],o=0;o<r.maxp.numGlyphs;o++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,o=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var a={};if(a.noc=r.readShort(i,o),o+=2,a.xMin=r.readShort(i,o),o+=2,a.yMin=r.readShort(i,o),o+=2,a.xMax=r.readShort(i,o),o+=2,a.yMax=r.readShort(i,o),o+=2,a.xMin>=a.xMax||a.yMin>=a.yMax)return null;if(a.noc>0){a.endPts=[];for(var s=0;s<a.noc;s++)a.endPts.push(r.readUshort(i,o)),o+=2;var l=r.readUshort(i,o);if(o+=2,i.length-o<l)return null;a.instructions=r.readBytes(i,o,l),o+=l;var c=a.endPts[a.noc-1]+1;for(a.flags=[],s=0;s<c;s++){var u=i[o];if(o++,a.flags.push(u),0!=(8&u)){var h=i[o];o++;for(var d=0;d<h;d++)a.flags.push(u),s++}}for(a.xs=[],s=0;s<c;s++){var f=0!=(2&a.flags[s]),p=0!=(16&a.flags[s]);f?(a.xs.push(p?i[o]:-i[o]),o++):p?a.xs.push(0):(a.xs.push(r.readShort(i,o)),o+=2)}for(a.ys=[],s=0;s<c;s++)f=0!=(4&a.flags[s]),p=0!=(32&a.flags[s]),f?(a.ys.push(p?i[o]:-i[o]),o++):p?a.ys.push(0):(a.ys.push(r.readShort(i,o)),o+=2);var m=0,g=0;for(s=0;s<c;s++)m+=a.xs[s],g+=a.ys[s],a.xs[s]=m,a.ys[s]=g}else{var v;a.parts=[];do{v=r.readUshort(i,o),o+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(a.parts.push(y),y.glyphIndex=r.readUshort(i,o),o+=2,1&v){var A=r.readShort(i,o);o+=2;var x=r.readShort(i,o);o+=2}else A=r.readInt8(i,o),o++,x=r.readInt8(i,o),o++;2&v?(y.m.tx=A,y.m.ty=x):(y.p1=A,y.p2=x),8&v?(y.m.a=y.m.d=r.readF2dot14(i,o),o+=2):64&v?(y.m.a=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2):128&v&&(y.m.a=r.readF2dot14(i,o),o+=2,y.m.b=r.readF2dot14(i,o),o+=2,y.m.c=r.readF2dot14(i,o),o+=2,y.m.d=r.readF2dot14(i,o),o+=2)}while(32&v);if(256&v){var b=r.readUshort(i,o);for(o+=2,a.instr=[],s=0;s<b;s++)a.instr.push(i[o]),o++}}return a},t.GDEF={},t.GDEF.parse=function(e,n,r,i){var o=n;n+=4;var a=t._bin.readUshort(e,n);return{glyphClassDef:0===a?null:t._lctf.readClassDef(e,o+a)}},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,l+a)}if(1==n&&1==s.fmt){var c=o.readUshort(e,r);r+=2,0!=c&&(s.pos=t.GPOS.readValueRecord(e,r,c))}else if(2==n&&s.fmt>=1&&s.fmt<=2){c=o.readUshort(e,r),r+=2;var u=o.readUshort(e,r);r+=2;var h=t._lctf.numOfOnes(c),d=t._lctf.numOfOnes(u);if(1==s.fmt){s.pairsets=[];var f=o.readUshort(e,r);r+=2;for(var p=0;p<f;p++){var m=a+o.readUshort(e,r);r+=2;var g=o.readUshort(e,m);m+=2;for(var v=[],y=0;y<g;y++){var A=o.readUshort(e,m);m+=2,0!=c&&(S=t.GPOS.readValueRecord(e,m,c),m+=2*h),0!=u&&(C=t.GPOS.readValueRecord(e,m,u),m+=2*d),v.push({gid2:A,val1:S,val2:C})}s.pairsets.push(v)}}if(2==s.fmt){var x=o.readUshort(e,r);r+=2;var b=o.readUshort(e,r);r+=2;var _=o.readUshort(e,r);r+=2;var w=o.readUshort(e,r);for(r+=2,s.classDef1=t._lctf.readClassDef(e,a+x),s.classDef2=t._lctf.readClassDef(e,a+b),s.matrix=[],p=0;p<_;p++){var E=[];for(y=0;y<w;y++){var S=null,C=null;0!=c&&(S=t.GPOS.readValueRecord(e,r,c),r+=2*h),0!=u&&(C=t.GPOS.readValueRecord(e,r,u),r+=2*d),E.push({val1:S,val2:C})}s.matrix.push(E)}}}else if(4==n&&1==s.fmt)s.markCoverage=t._lctf.readCoverage(e,o.readUshort(e,r)+a),s.baseCoverage=t._lctf.readCoverage(e,o.readUshort(e,r+2)+a),s.markClassCount=o.readUshort(e,r+4),s.markArray=t.GPOS.readMarkArray(e,o.readUshort(e,r+6)+a),s.baseArray=t.GPOS.readBaseArray(e,o.readUshort(e,r+8)+a,s.markClassCount);else if(6==n&&1==s.fmt)s.mark1Coverage=t._lctf.readCoverage(e,o.readUshort(e,r)+a),s.mark2Coverage=t._lctf.readCoverage(e,o.readUshort(e,r+2)+a),s.markClassCount=o.readUshort(e,r+4),s.mark1Array=t.GPOS.readMarkArray(e,o.readUshort(e,r+6)+a),s.mark2Array=t.GPOS.readBaseArray(e,o.readUshort(e,r+8)+a,s.markClassCount);else{if(9==n&&1==s.fmt){var M=o.readUshort(e,r);r+=2;var T=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=M;else if(i.ltype!=M)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,a+T)}console.debug("unsupported GPOS table LookupType",n,"format",s.fmt)}return s},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,o=[];return o.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,o.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,o.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,o.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,o},t.GPOS.readBaseArray=function(e,n,r){var i=t._bin,o=[],a=n,s=i.readUshort(e,n);n+=2;for(var l=0;l<s;l++){for(var c=[],u=0;u<r;u++)c.push(t.GPOS.readAnchorRecord(e,a+i.readUshort(e,n))),n+=2;o.push(c)}return o},t.GPOS.readMarkArray=function(e,n){var r=t._bin,i=[],o=n,a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=t.GPOS.readAnchorRecord(e,r.readUshort(e,n+2)+o);l.markClass=r.readUshort(e,n),i.push(l),n+=4}return i},t.GPOS.readAnchorRecord=function(e,n){var r=t._bin,i={};return i.fmt=r.readUshort(e,n),i.x=r.readShort(e,n+2),i.y=r.readShort(e,n+4),i},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var o=t._bin,a=r,s={};if(s.fmt=o.readUshort(e,r),r+=2,1!=n&&2!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||2==n||4==n||5==n&&s.fmt<=2||6==n&&s.fmt<=2){var l=o.readUshort(e,r);r+=2,s.coverage=t._lctf.readCoverage(e,a+l)}if(1==n&&s.fmt>=1&&s.fmt<=2){if(1==s.fmt)s.delta=o.readShort(e,r),r+=2;else if(2==s.fmt){var c=o.readUshort(e,r);r+=2,s.newg=o.readUshorts(e,r,c),r+=2*s.newg.length}}else if(2==n&&1==s.fmt){c=o.readUshort(e,r),r+=2,s.seqs=[];for(var u=0;u<c;u++){var h=o.readUshort(e,r)+a;r+=2;var d=o.readUshort(e,h);s.seqs.push(o.readUshorts(e,h+2,d))}}else if(4==n)for(s.vals=[],c=o.readUshort(e,r),r+=2,u=0;u<c;u++){var f=o.readUshort(e,r);r+=2,s.vals.push(t.GSUB.readLigatureSet(e,a+f))}else if(5==n&&2==s.fmt){if(2==s.fmt){var p=o.readUshort(e,r);r+=2,s.cDef=t._lctf.readClassDef(e,a+p),s.scset=[];var m=o.readUshort(e,r);for(r+=2,u=0;u<m;u++){var g=o.readUshort(e,r);r+=2,s.scset.push(0==g?null:t.GSUB.readSubClassSet(e,a+g))}}}else if(6==n&&3==s.fmt){if(3==s.fmt){for(u=0;u<3;u++){c=o.readUshort(e,r),r+=2;for(var v=[],y=0;y<c;y++)v.push(t._lctf.readCoverage(e,a+o.readUshort(e,r+2*y)));r+=2*c,0==u&&(s.backCvg=v),1==u&&(s.inptCvg=v),2==u&&(s.ahedCvg=v)}c=o.readUshort(e,r),r+=2,s.lookupRec=t.GSUB.readSubstLookupRecords(e,r,c)}}else{if(7==n&&1==s.fmt){var A=o.readUshort(e,r);r+=2;var x=o.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=A;else if(i.ltype!=A)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,a+x)}console.debug("unsupported GSUB table LookupType",n,"format",s.fmt)}return s},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,o=[],a=r(e,n);n+=2;for(var s=0;s<a;s++){var l=r(e,n);n+=2,o.push(t.GSUB.readSubClassRule(e,i+l))}return o},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},o=r(e,n),a=r(e,n+=2);n+=2,i.input=[];for(var s=0;s<o-1;s++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,a),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,o=[],a=0;a<r;a++)o.push(i(e,n),i(e,n+2)),n+=4;return o},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readChainSubClassRule(e,i+l))}return o},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},o=["backtrack","input","lookahead"],a=0;a<o.length;a++){var s=r.readUshort(e,n);n+=2,1==a&&s--,i[o[a]]=r.readUshorts(e,n,s),n+=2*i[o[a]].length}return s=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*s),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,o=[],a=r.readUshort(e,n);n+=2;for(var s=0;s<a;s++){var l=r.readUshort(e,n);n+=2,o.push(t.GSUB.readLigature(e,i+l))}return o},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2;for(var a=0;a<o-1;a++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,o.flags=i.readUshort(e,n),n+=2,o.unitsPerEm=i.readUshort(e,n),n+=2,o.created=i.readUint64(e,n),n+=8,o.modified=i.readUint64(e,n),n+=8,o.xMin=i.readShort(e,n),n+=2,o.yMin=i.readShort(e,n),n+=2,o.xMax=i.readShort(e,n),n+=2,o.yMax=i.readShort(e,n),n+=2,o.macStyle=i.readUshort(e,n),n+=2,o.lowestRecPPEM=i.readUshort(e,n),n+=2,o.fontDirectionHint=i.readShort(e,n),n+=2,o.indexToLocFormat=i.readShort(e,n),n+=2,o.glyphDataFormat=i.readShort(e,n),n+=2,o},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,o={};return i.readFixed(e,n),n+=4,o.ascender=i.readShort(e,n),n+=2,o.descender=i.readShort(e,n),n+=2,o.lineGap=i.readShort(e,n),n+=2,o.advanceWidthMax=i.readUshort(e,n),n+=2,o.minLeftSideBearing=i.readShort(e,n),n+=2,o.minRightSideBearing=i.readShort(e,n),n+=2,o.xMaxExtent=i.readShort(e,n),n+=2,o.caretSlopeRise=i.readShort(e,n),n+=2,o.caretSlopeRun=i.readShort(e,n),n+=2,o.caretOffset=i.readShort(e,n),n+=2,n+=8,o.metricDataFormat=i.readShort(e,n),n+=2,o.numberOfHMetrics=i.readUshort(e,n),n+=2,o},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var o=t._bin,a={aWidth:[],lsBearing:[]},s=0,l=0,c=0;c<i.maxp.numGlyphs;c++)c<i.hhea.numberOfHMetrics&&(s=o.readUshort(e,n),n+=2,l=o.readShort(e,n),n+=2),a.aWidth.push(s),a.lsBearing.push(l);return a},t.kern={},t.kern.parse=function(e,n,r,i){var o=t._bin,a=o.readUshort(e,n);if(n+=2,1==a)return t.kern.parseV1(e,n-2,r,i);var s=o.readUshort(e,n);n+=2;for(var l={glyph1:[],rval:[]},c=0;c<s;c++){n+=2,r=o.readUshort(e,n),n+=2;var u=o.readUshort(e,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=t.kern.readFormat0(e,n,l)}return l},t.kern.parseV1=function(e,n,r,i){var o=t._bin;o.readFixed(e,n),n+=4;var a=o.readUint(e,n);n+=4;for(var s={glyph1:[],rval:[]},l=0;l<a;l++){o.readUint(e,n),n+=4;var c=o.readUshort(e,n);n+=2,o.readUshort(e,n),n+=2;var u=c>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,s)}return s},t.kern.readFormat0=function(e,n,r){var i=t._bin,o=-1,a=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var s=0;s<a;s++){var l=i.readUshort(e,n);n+=2;var c=i.readUshort(e,n);n+=2;var u=i.readShort(e,n);n+=2,l!=o&&(r.glyph1.push(l),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(c),h.vals.push(u),o=l}return n},t.loca={},t.loca.parse=function(e,n,r,i){var o=t._bin,a=[],s=i.head.indexToLocFormat,l=i.maxp.numGlyphs+1;if(0==s)for(var c=0;c<l;c++)a.push(o.readUshort(e,n+(c<<1))<<1);if(1==s)for(c=0;c<l;c++)a.push(o.readUint(e,n+(c<<2)));return a},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,o={},a=i.readUint(e,n);return n+=4,o.numGlyphs=i.readUshort(e,n),n+=2,65536==a&&(o.maxPoints=i.readUshort(e,n),n+=2,o.maxContours=i.readUshort(e,n),n+=2,o.maxCompositePoints=i.readUshort(e,n),n+=2,o.maxCompositeContours=i.readUshort(e,n),n+=2,o.maxZones=i.readUshort(e,n),n+=2,o.maxTwilightPoints=i.readUshort(e,n),n+=2,o.maxStorage=i.readUshort(e,n),n+=2,o.maxFunctionDefs=i.readUshort(e,n),n+=2,o.maxInstructionDefs=i.readUshort(e,n),n+=2,o.maxStackElements=i.readUshort(e,n),n+=2,o.maxSizeOfInstructions=i.readUshort(e,n),n+=2,o.maxComponentElements=i.readUshort(e,n),n+=2,o.maxComponentDepth=i.readUshort(e,n),n+=2),o},t.name={},t.name.parse=function(e,n,r){var i=t._bin,o={};i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var s,l=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],c=n+=2,u=0;u<a;u++){var h=i.readUshort(e,n);n+=2;var d=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var g=i.readUshort(e,n);n+=2;var v,y=l[p],A=c+12*a+g;if(0==h)v=i.readUnicode(e,A,m/2);else if(3==h&&0==d)v=i.readUnicode(e,A,m/2);else if(0==d)v=i.readASCII(e,A,m);else if(1==d)v=i.readUnicode(e,A,m/2);else if(3==d)v=i.readUnicode(e,A,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;v=i.readASCII(e,A,m),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var x="p"+h+","+f.toString(16);null==o[x]&&(o[x]={}),o[x][void 0!==y?y:p]=v,o[x]._lang=f}for(var b in o)if(null!=o[b].postScriptName&&1033==o[b]._lang)return o[b];for(var b in o)if(null!=o[b].postScriptName&&0==o[b]._lang)return o[b];for(var b in o)if(null!=o[b].postScriptName&&3084==o[b]._lang)return o[b];for(var b in o)if(null!=o[b].postScriptName)return o[b];for(var b in o){s=b;break}return console.debug("returning name table with languageID "+o[s]._lang),o[s]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var o={};if(0==i)t["OS/2"].version0(e,n,o);else if(1==i)t["OS/2"].version1(e,n,o);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,o);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,o)}return o},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,o={};return o.version=i.readFixed(e,n),n+=4,o.italicAngle=i.readFixed(e,n),n+=4,o.underlinePosition=i.readShort(e,n),n+=2,o.underlineThickness=i.readShort(e,n),n+=2,o},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var o=-1,a=0;a<i.endCount.length;a++)if(t<=i.endCount[a]){o=a;break}return-1==o||i.startCount[o]>t?0:65535&(0!=i.idRangeOffset[o]?i.glyphIdArray[t-i.startCount[o]+(i.idRangeOffset[o]>>1)-(i.idRangeOffset.length-o)]:t+i.idDelta[o])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(a=0;a<i.groups.length;a++){var s=i.groups[a];if(s[0]<=t&&t<=s[1])return s[2]+(t-s[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var o={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},a=e.CFF,s=e.CFF.Private;if(a.ROS){for(var l=0;a.FDSelect[l+2]<=n;)l+=2;s=a.FDArray[a.FDSelect[l+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],o,a,s,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,o=e.endPts[r],a=i;a<=o;a++){var s=a==i?o:a-1,l=a==o?i:a+1,c=1&e.flags[a],u=1&e.flags[s],h=1&e.flags[l],d=e.xs[a],f=e.ys[a];if(a==i)if(c){if(!u){t.U.P.moveTo(n,d,f);continue}t.U.P.moveTo(n,e.xs[s],e.ys[s])}else u?t.U.P.moveTo(n,e.xs[s],e.ys[s]):t.U.P.moveTo(n,(e.xs[s]+d)/2,(e.ys[s]+f)/2);c?u&&t.U.P.lineTo(n,d,f):h?t.U.P.qcurveTo(n,d,f,e.xs[l],e.ys[l]):t.U.P.qcurveTo(n,d,f,(d+e.xs[l])/2,(f+e.ys[l])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var o={cmds:[],crds:[]},a=e.parts[i];t.U._drawGlyf(a.glyphIndex,n,o);for(var s=a.m,l=0;l<o.crds.length;l+=2){var c=o.crds[l],u=o.crds[l+1];r.crds.push(c*s.a+u*s.b+s.tx),r.crds.push(c*s.c+u*s.d+s.ty)}for(l=0;l<o.cmds.length;l++)r.cmds.push(o.cmds[l])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U._applySubs=function(e,n,r,i){for(var o=e.length-n-1,a=0;a<r.tabs.length;a++)if(null!=r.tabs[a]){var s,l=r.tabs[a];if(!l.coverage||-1!=(s=t._lctf.coverageIndex(l.coverage,e[n])))if(1==r.ltype)e[n],1==l.fmt?e[n]=e[n]+l.delta:e[n]=l.newg[s];else if(4==r.ltype)for(var c=l.vals[s],u=0;u<c.length;u++){var h=c[u],d=h.chain.length;if(!(d>o)){for(var f=!0,p=0,m=0;m<d;m++){for(;-1==e[n+p+(1+m)];)p++;h.chain[m]!=e[n+p+(1+m)]&&(f=!1)}if(f){for(e[n]=h.nglyph,m=0;m<d+p;m++)e[n+m+1]=-1;break}}}else if(5==r.ltype&&2==l.fmt)for(var g=t._lctf.getInterval(l.cDef,e[n]),v=l.cDef[g+2],y=l.scset[v],A=0;A<y.length;A++){var x=y[A],b=x.input;if(!(b.length>o)){for(f=!0,m=0;m<b.length;m++){var _=t._lctf.getInterval(l.cDef,e[n+1+m]);if(-1==g&&l.cDef[_+2]!=b[m]){f=!1;break}}if(f){var w=x.substLookupRecords;for(u=0;u<w.length;u+=2)w[u],w[u+1]}}}else if(6==r.ltype&&3==l.fmt){if(!t.U._glsCovered(e,l.backCvg,n-l.backCvg.length))continue;if(!t.U._glsCovered(e,l.inptCvg,n))continue;if(!t.U._glsCovered(e,l.ahedCvg,n+l.inptCvg.length))continue;var E=l.lookupRec;for(A=0;A<E.length;A+=2){g=E[A];var S=i[E[A+1]];t.U._applySubs(e,n+g,S,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},o=0,a=0;a<n.length;a++){var s=n[a];if(-1!=s){for(var l=a<n.length-1&&-1!=n[a+1]?n[a+1]:0,c=t.U.glyphToPath(e,s),u=0;u<c.crds.length;u+=2)i.crds.push(c.crds[u]+o),i.crds.push(c.crds[u+1]);for(r&&i.cmds.push(r),u=0;u<c.cmds.length;u++)i.cmds.push(c.cmds[u]);r&&i.cmds.push("X"),o+=e.hmtx.aWidth[s],a<n.length-1&&(o+=t.U.getPairAdjustment(e,s,l))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,o,a){e.cmds.push("C"),e.crds.push(t,n,r,i,o,a)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,o){for(var a=n.stack,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open,h=0,d=n.x,f=n.y,p=0,m=0,g=0,v=0,y=0,A=0,x=0,b=0,_=0,w=0,E={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,E);var S=E.val;if(h+=E.size,"o1"==S||"o18"==S)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o3"==S||"o23"==S)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0;else if("o4"==S)a.length>1&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),u&&t.U.P.closePath(o),f+=a.pop(),t.U.P.moveTo(o,d,f),u=!0;else if("o5"==S)for(;a.length>0;)d+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,d,f);else if("o6"==S||"o7"==S)for(var C=a.length,M="o6"==S,T=0;T<C;T++){var I=a.shift();M?d+=I:f+=I,M=!M,t.U.P.lineTo(o,d,f)}else if("o8"==S||"o24"==S){C=a.length;for(var B=0;B+6<=C;)p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),d=g+a.shift(),f=v+a.shift(),t.U.P.curveTo(o,p,m,g,v,d,f),B+=6;"o24"==S&&(d+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,d,f))}else{if("o11"==S)break;if("o1234"==S||"o1235"==S||"o1236"==S||"o1237"==S)"o1234"==S&&(m=f,g=(p=d+a.shift())+a.shift(),w=v=m+a.shift(),A=v,b=f,d=(x=(y=(_=g+a.shift())+a.shift())+a.shift())+a.shift(),t.U.P.curveTo(o,p,m,g,v,_,w),t.U.P.curveTo(o,y,A,x,b,d,f)),"o1235"==S&&(p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),_=g+a.shift(),w=v+a.shift(),y=_+a.shift(),A=w+a.shift(),x=y+a.shift(),b=A+a.shift(),d=x+a.shift(),f=b+a.shift(),a.shift(),t.U.P.curveTo(o,p,m,g,v,_,w),t.U.P.curveTo(o,y,A,x,b,d,f)),"o1236"==S&&(p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),w=v=m+a.shift(),A=v,x=(y=(_=g+a.shift())+a.shift())+a.shift(),b=A+a.shift(),d=x+a.shift(),t.U.P.curveTo(o,p,m,g,v,_,w),t.U.P.curveTo(o,y,A,x,b,d,f)),"o1237"==S&&(p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),_=g+a.shift(),w=v+a.shift(),y=_+a.shift(),A=w+a.shift(),x=y+a.shift(),b=A+a.shift(),Math.abs(x-d)>Math.abs(b-f)?d=x+a.shift():f=b+a.shift(),t.U.P.curveTo(o,p,m,g,v,_,w),t.U.P.curveTo(o,y,A,x,b,d,f));else if("o14"==S){if(a.length>0&&!l&&(c=a.shift()+r.nominalWidthX,l=!0),4==a.length){var P=a.shift(),R=a.shift(),D=a.shift(),O=a.shift(),k=t.CFF.glyphBySE(r,D),L=t.CFF.glyphBySE(r,O);t.U._drawCFF(r.CharStrings[k],n,r,i,o),n.x=P,n.y=R,t.U._drawCFF(r.CharStrings[L],n,r,i,o)}u&&(t.U.P.closePath(o),u=!1)}else if("o19"==S||"o20"==S)a.length%2!=0&&!l&&(c=a.shift()+i.nominalWidthX),s+=a.length>>1,a.length=0,l=!0,h+=s+7>>3;else if("o21"==S)a.length>2&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),f+=a.pop(),d+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,f),u=!0;else if("o22"==S)a.length>1&&!l&&(c=a.shift()+i.nominalWidthX,l=!0),d+=a.pop(),u&&t.U.P.closePath(o),t.U.P.moveTo(o,d,f),u=!0;else if("o25"==S){for(;a.length>6;)d+=a.shift(),f+=a.shift(),t.U.P.lineTo(o,d,f);p=d+a.shift(),m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),d=g+a.shift(),f=v+a.shift(),t.U.P.curveTo(o,p,m,g,v,d,f)}else if("o26"==S)for(a.length%2&&(d+=a.shift());a.length>0;)p=d,m=f+a.shift(),d=g=p+a.shift(),f=(v=m+a.shift())+a.shift(),t.U.P.curveTo(o,p,m,g,v,d,f);else if("o27"==S)for(a.length%2&&(f+=a.shift());a.length>0;)m=f,g=(p=d+a.shift())+a.shift(),v=m+a.shift(),d=g+a.shift(),f=v,t.U.P.curveTo(o,p,m,g,v,d,f);else if("o10"==S||"o29"==S){var F="o10"==S?i:r;if(0==a.length)console.debug("error: empty stack");else{var z=a.pop(),U=F.Subrs[z+F.Bias];n.x=d,n.y=f,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u,t.U._drawCFF(U,n,r,i,o),d=n.x,f=n.y,s=n.nStems,l=n.haveWidth,c=n.width,u=n.open}}else if("o30"==S||"o31"==S){var N=a.length,j=(B=0,"o31"==S);for(B+=N-(C=-3&N);B<C;)j?(m=f,g=(p=d+a.shift())+a.shift(),f=(v=m+a.shift())+a.shift(),C-B==5?(d=g+a.shift(),B++):d=g,j=!1):(p=d,m=f+a.shift(),g=p+a.shift(),v=m+a.shift(),d=g+a.shift(),C-B==5?(f=v+a.shift(),B++):f=v,j=!0),t.U.P.curveTo(o,p,m,g,v,d,f),B+=4}else{if("o"==(S+"").charAt(0))throw console.debug("Unknown operation: "+S,e),S;a.push(S)}}}n.x=d,n.y=f,n.nStems=s,n.haveWidth=l,n.width=c,n.open=u};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),o=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(e,t){for(var i=new n(31),o=0;o<31;++o)i[o]=t+=1<<e[o-1];var a=new r(i[30]);for(o=1;o<30;++o)for(var s=i[o];s<i[o+1];++s)a[s]=s-i[o]<<5|o;return[i,a]},l=s(i,2),c=l[0],u=l[1];c[28]=258,u[258]=28;for(var h=s(o,0)[0],d=new n(32768),f=0;f<32768;++f){var p=(43690&f)>>>1|(21845&f)<<1;p=(61680&(p=(52428&p)>>>2|(13107&p)<<2))>>>4|(3855&p)<<4,d[f]=((65280&p)>>>8|(255&p)<<8)>>>1}var m=function(e,t,r){for(var i=e.length,o=0,a=new n(t);o<i;++o)++a[e[o]-1];var s,l=new n(t);for(o=0;o<t;++o)l[o]=l[o-1]+a[o-1]<<1;if(r){s=new n(1<<t);var c=15-t;for(o=0;o<i;++o)if(e[o])for(var u=o<<4|e[o],h=t-e[o],f=l[e[o]-1]++<<h,p=f|(1<<h)-1;f<=p;++f)s[d[f]>>>c]=u}else for(s=new n(i),o=0;o<i;++o)e[o]&&(s[o]=d[l[e[o]-1]++]>>>15-e[o]);return s},g=new t(288);for(f=0;f<144;++f)g[f]=8;for(f=144;f<256;++f)g[f]=9;for(f=256;f<280;++f)g[f]=7;for(f=280;f<288;++f)g[f]=8;var v=new t(32);for(f=0;f<32;++f)v[f]=5;var y=m(g,9,1),A=m(v,5,1),x=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},b=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},_=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},w=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(e,t,n){var r=new Error(t||w[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,E),!n)throw r;return r},S=function(e,s,l){var u=e.length;if(!u||l&&!l.l&&u<5)return s||new t(0);var d=!s||l,f=!l||l.i;l||(l={}),s||(s=new t(3*u));var p,g=function(e){var n=s.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(s),s=r}},v=l.f||0,w=l.p||0,S=l.b||0,C=l.l,M=l.d,T=l.m,I=l.n,B=8*u;do{if(!C){l.f=v=b(e,w,1);var P=b(e,w+1,3);if(w+=3,!P){var R=e[(Q=((p=w)/8|0)+(7&p&&1)+4)-4]|e[Q-3]<<8,D=Q+R;if(D>u){f&&E(0);break}d&&g(S+R),s.set(e.subarray(Q,D),S),l.b=S+=R,l.p=w=8*D;continue}if(1==P)C=y,M=A,T=9,I=5;else if(2==P){var O=b(e,w,31)+257,k=b(e,w+10,15)+4,L=O+b(e,w+5,31)+1;w+=14;for(var F=new t(L),z=new t(19),U=0;U<k;++U)z[a[U]]=b(e,w+3*U,7);w+=3*k;var N=x(z),j=(1<<N)-1,G=m(z,N,1);for(U=0;U<L;){var Q,H=G[b(e,w,j)];if(w+=15&H,(Q=H>>>4)<16)F[U++]=Q;else{var V=0,W=0;for(16==Q?(W=3+b(e,w,3),w+=2,V=F[U-1]):17==Q?(W=3+b(e,w,7),w+=3):18==Q&&(W=11+b(e,w,127),w+=7);W--;)F[U++]=V}}var q=F.subarray(0,O),X=F.subarray(O);T=x(q),I=x(X),C=m(q,T,1),M=m(X,I,1)}else E(1);if(w>B){f&&E(0);break}}d&&g(S+131072);for(var Y=(1<<T)-1,J=(1<<I)-1,K=w;;K=w){var Z=(V=C[_(e,w)&Y])>>>4;if((w+=15&V)>B){f&&E(0);break}if(V||E(2),Z<256)s[S++]=Z;else{if(256==Z){K=w,C=null;break}var $=Z-254;if(Z>264){var ee=i[U=Z-257];$=b(e,w,(1<<ee)-1)+c[U],w+=ee}var te=M[_(e,w)&J],ne=te>>>4;if(te||E(3),w+=15&te,X=h[ne],ne>3&&(ee=o[ne],X+=_(e,w)&(1<<ee)-1,w+=ee),w>B){f&&E(0);break}d&&g(S+131072);for(var re=S+$;S<re;S+=4)s[S]=s[S-X],s[S+1]=s[S+1-X],s[S+2]=s[S+2-X],s[S+3]=s[S+3-X];S=re}}l.l=C,l.p=K,l.b=S,C&&(v=1,l.m=T,l.d=M,l.n=I)}while(!v);return S==s.length?s:function(e,i,o){(null==i||i<0)&&(i=0),(null==o||o>e.length)&&(o=e.length);var a=new(e instanceof n?n:e instanceof r?r:t)(o-i);return a.set(e.subarray(i,o)),a}(s,0,S)},C=new t(0),M="undefined"!=typeof TextDecoder&&new TextDecoder;try{M.decode(C,{stream:!0})}catch(e){}return e.convert_streams=function(e){var t=new DataView(e),n=0;function r(){var e=t.getUint16(n);return n+=2,e}function i(){var e=t.getUint32(n);return n+=4,e}function o(e){v.setUint16(y,e),y+=2}function a(e){v.setUint32(y,e),y+=4}for(var s={signature:i(),flavor:i(),length:i(),numTables:r(),reserved:r(),totalSfntSize:i(),majorVersion:r(),minorVersion:r(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},l=0;Math.pow(2,l)<=s.numTables;)l++;l--;for(var c=16*Math.pow(2,l),u=16*s.numTables-c,h=12,d=[],f=0;f<s.numTables;f++)d.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),h+=16;var p,m=new Uint8Array(12+16*d.length+d.reduce((function(e,t){return e+t.origLength+4}),0)),g=m.buffer,v=new DataView(g),y=0;return a(s.flavor),o(s.numTables),o(c),o(l),o(u),d.forEach((function(e){a(e.tag),a(e.origChecksum),a(h),a(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)})),d.forEach((function(t){var n,r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var i=new Uint8Array(t.origLength);n=new Uint8Array(r,2),S(n,i)}else i=new Uint8Array(r);m.set(i,t.outOffset);var o=0;(h=t.outOffset+t.origLength)%4!=0&&(o=4-h%4),m.set(new Uint8Array(o).buffer,t.outOffset+t.origLength),p=h+o})),g.slice(0,p)},Object.defineProperty(e,"__esModule",{value:!0}),e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},i=1,o=2,a=4,s=8,l=16,c=32;let u;function h(e){if(!u){const e={R:o,L:i,D:a,C:l,U:c,T:s};u=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[i,o]=r.split("+");i=parseInt(i,36),o=o?parseInt(o,36):0,u.set(n+=i,e[t]);for(let a=o;a--;)u.set(++n,e[t])}))}}return u.get(e)||c}const d=1,f=2,p=3,m=4,g=[null,"isol","init","fina","medi"];function v(e){const t=new Uint8Array(e.length);let n=c,r=d,u=-1;for(let g=0;g<e.length;g++){const v=e.codePointAt(g);let y=0|h(v),A=d;y&s||(n&(i|a|l)?y&(o|a|l)?(A=p,r!==d&&r!==p||t[u]++):y&(i|c)&&(r!==f&&r!==m||t[u]--):n&(o|c)&&(r!==f&&r!==m||t[u]--),r=t[g]=A,n=y,u=g,v>65535&&g++)}return t}function y(t,n){const r=t.GDEF&&t.GDEF.glyphClassDef;return r?e.U._getGlyphClass(n,r):0}function A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;r++)if("number"===typeof t[r])return t[r]}function x(t){const r=Object.create(null),i=t["OS/2"],o=t.hhea,a=t.head.unitsPerEm,s=A(i&&i.sTypoAscender,o&&o.ascender,a),l={unitsPerEm:a,ascender:s,descender:A(i&&i.sTypoDescender,o&&o.descender,0),capHeight:A(i&&i.sCapHeight,s),xHeight:A(i&&i.sxHeight,s),lineGap:A(i&&i.sTypoLineGap,o&&o.lineGap),supportsCodePoint:n=>e.U.codeToGlyph(t,n)>0,forEachGlyph(i,o,a,s){let c=0;const u=1/l.unitsPerEm*o,h=function(t,n){const r=[];for(let o=0;o<n.length;o++){const i=n.codePointAt(o);i>65535&&o++,r.push(e.U.codeToGlyph(t,i))}const i=t.GSUB;if(i){const{lookupList:t,featureList:o}=i;let a;const s=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,l=[];o.forEach((i=>{if(s.test(i.tag))for(let o=0;o<i.tab.length;o++){if(l[i.tab[o]])continue;l[i.tab[o]]=!0;const s=t[i.tab[o]],c=/^(isol|init|fina|medi)$/.test(i.tag);c&&!a&&(a=v(n));for(let n=0;n<r.length;n++)a&&c&&g[a[n]]!==i.tag||e.U._applySubs(r,n,s,t)}}))}return r}(t,i);let d=0;const f=function(t,n){const r=new Int16Array(3*n.length);let i=0;for(;i<n.length;i++){const l=n[i];if(-1===l)continue;r[3*i+2]=t.hmtx.aWidth[l];const c=t.GPOS;if(c){const u=c.lookupList;for(let c=0;c<u.length;c++){const h=u[c];for(let c=0;c<h.tabs.length;c++){const u=h.tabs[c];if(1===h.ltype){if(-1!==e._lctf.coverageIndex(u.coverage,l)&&u.pos){s(u.pos,i);break}}else if(2===h.ltype){let t=null,r=o();if(-1!==r){const o=e._lctf.coverageIndex(u.coverage,n[r]);if(-1!==o){if(1===u.fmt){const e=u.pairsets[o];for(let n=0;n<e.length;n++)e[n].gid2===l&&(t=e[n])}else if(2===u.fmt){const i=e.U._getGlyphClass(n[r],u.classDef1),o=e.U._getGlyphClass(l,u.classDef2);t=u.matrix[i][o]}if(t){t.val1&&s(t.val1,r),t.val2&&s(t.val2,i);break}}}}else if(4===h.ltype){const t=e._lctf.coverageIndex(u.markCoverage,l);if(-1!==t){const s=o(a),l=-1===s?-1:e._lctf.coverageIndex(u.baseCoverage,n[s]);if(-1!==l){const e=u.markArray[t],n=u.baseArray[l][e.markClass];r[3*i]=n.x-e.x+r[3*s]-r[3*s+2],r[3*i+1]=n.y-e.y+r[3*s+1];break}}}else if(6===h.ltype){const a=e._lctf.coverageIndex(u.mark1Coverage,l);if(-1!==a){const s=o();if(-1!==s){const o=n[s];if(3===y(t,o)){const t=e._lctf.coverageIndex(u.mark2Coverage,o);if(-1!==t){const e=u.mark1Array[a],n=u.mark2Array[t][e.markClass];r[3*i]=n.x-e.x+r[3*s]-r[3*s+2],r[3*i+1]=n.y-e.y+r[3*s+1];break}}}}}}}}else if(t.kern&&!t.cff){const e=o();if(-1!==e){const i=t.kern.glyph1.indexOf(n[e]);if(-1!==i){const n=t.kern.rval[i].glyph2.indexOf(l);-1!==n&&(r[3*e+2]+=t.kern.rval[i].vals[n])}}}}return r;function o(e){for(let t=i-1;t>=0;t--)if(-1!==n[t]&&(!e||e(n[t])))return t;return-1}function a(e){return 1===y(t,e)}function s(e,t){for(let n=0;n<3;n++)r[3*t+n]+=e[n]||0}}(t,h);return h.forEach(((l,h)=>{if(-1!==l){let i=r[l];if(!i){const{cmds:o,crds:a}=e.U.glyphToPath(t,l);let s,c,u,h,d="",f=0;for(let e=0,t=o.length;e<t;e++){const t=n[o[e]];d+=o[e];for(let e=1;e<=t;e++)d+=(e>1?",":"")+a[f++]}if(a.length){s=c=1/0,u=h=-1/0;for(let e=0,t=a.length;e<t;e+=2){let t=a[e],n=a[e+1];t<s&&(s=t),n<c&&(c=n),t>u&&(u=t),n>h&&(h=n)}}else s=u=c=h=0;i=r[l]={index:l,advanceWidth:t.hmtx.aWidth[l],xMin:s,yMin:c,xMax:u,yMax:h,path:d}}s.call(null,i,c+f[3*h]*u,f[3*h+1]*u,d),c+=f[3*h+2]*u,a&&(c+=a*o)}d+=i.codePointAt(d)>65535?2:1})),c}};return l}return function(n){const r=new Uint8Array(n,0,4),i=e._bin.readASCII(r,0,4);if("wOFF"===i)n=t(n);else if("wOF2"===i)throw new Error("woff2 fonts not supported");return x(e.parse(n)[0])}}],init:(e,t,n)=>n(e(),t())});const jO=_O({name:"FontResolver",dependencies:[function(e,t){const n=Object.create(null),r=Object.create(null);function i(t,i){let o=n[t];o?i(o):r[t]?r[t].push(i):(r[t]=[i],function(t,n){const r=e=>{console.error(`Failure loading font ${t}`,e)};try{const i=new XMLHttpRequest;i.open("get",t,!0),i.responseType="arraybuffer",i.onload=function(){if(i.status>=400)r(new Error(i.statusText));else if(i.status>0)try{const r=e(i.response);r.src=t,n(r)}catch(NQ){r(NQ)}},i.onerror=r,i.send()}catch(i){r(i)}}(t,(e=>{e.src=t,n[t]=e,r[t].forEach((t=>t(e))),delete r[t]})))}return function(e,r){let{lang:o,fonts:a=[],style:s="normal",weight:l="normal",unicodeFontsURL:c}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const u=new Uint8Array(e.length),h=[];e.length||m();const d=new Map,f=[];if("italic"!==s&&(s="normal"),"number"!==typeof l&&(l="bold"===l?700:400),a&&!Array.isArray(a)&&(a=[a]),a=a.slice().filter((e=>!e.lang||e.lang.test(o))).reverse(),a.length){const t=1,r=2;let o=0;!function s(){for(let l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=e.length;l<c;l++){const p=e.codePointAt(l);if(o===t&&h[u[l-1]].supportsCodePoint(p)||/\s/.test(e[l]))u[l]=u[l-1],o===r&&(f[f.length-1][1]=l);else for(let e=u[l],c=a.length;e<=c;e++)if(e===c){(o===r?f[f.length-1]:f[f.length]=[l,l])[1]=l,o=r}else{u[l]=e;const{src:r,unicodeRange:c}=a[e];if(!c||g(p,c)){const e=n[r];if(!e)return void i(r,(()=>{s(l)}));if(e.supportsCodePoint(p)){let n=d.get(e);"number"!==typeof n&&(n=h.length,h.push(e),d.set(e,n)),u[l]=n,o=t;break}}}p>65535&&l+1<c&&(u[l+1]=u[l],l++,o===r&&(f[f.length-1][1]=l))}p()}()}else f.push([0,e.length-1]),p();function p(){if(f.length){const n=f.map((t=>e.substring(t[0],t[1]+1))).join("\n");t.getFontsForString(n,{lang:o||void 0,style:s,weight:l,dataUrl:c}).then((e=>{let{fontUrls:t,chars:n}=e;const r=h.length;let o=0;f.forEach((e=>{for(let t=0,i=e[1]-e[0];t<=i;t++)u[e[0]+t]=n[o++]+r;o++}));let a=0;t.forEach(((e,n)=>{i(e,(e=>{h[n+r]=e,++a===t.length&&m()}))}))}))}else m()}function m(){r({chars:u,fonts:h})}function g(e,t){for(let n=0;n<t.length;n++){const[r,i=r]=t[n];if(r<=e&&e<=i)return!0}return!1}}},NO,function(){return function(e){var t=function(){this.buckets=new Map};t.prototype.add=function(e){var t=e>>5;this.buckets.set(t,(this.buckets.get(t)||0)|1<<(31&e))},t.prototype.has=function(e){var t=this.buckets.get(e>>5);return void 0!==t&&0!=(t&1<<(31&e))},t.prototype.serialize=function(){var e=[];return this.buckets.forEach((function(t,n){e.push((+n).toString(36)+":"+t.toString(36))})),e.join(",")},t.prototype.deserialize=function(e){var t=this;this.buckets.clear(),e.split(",").forEach((function(e){var n=e.split(":");t.buckets.set(parseInt(n[0],36),parseInt(n[1],36))}))};var n=Math.pow(2,8),r=n-1,i=~r;function o(e){var t=function(e){return e&i}(e).toString(16),r=function(e){return(e&i)+n-1}(e).toString(16);return"codepoint-index/plane"+(e>>16)+"/"+t+"-"+r+".json"}function a(e,t){var n=e&r,i=t.codePointAt(n/6|0);return 0!=((i=(i||48)-48)&1<<n%6)}function s(e,t){!function(e,t){var n;(n=e,n.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map((function(e){return e.split("-").map((function(e){return parseInt(e.trim(),16)}))}))).forEach((function(e){var n=e[0],r=e[1];void 0===r&&(r=n),t(n,r)}))}(e,(function(e,n){for(var r=e;r<=n;r++)t(r)}))}var l={},c={},u=new WeakMap,h="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function d(e){var n=u.get(e);return n||(n=new t,s(e.ranges,(function(e){return n.add(e)})),u.set(e,n)),n}var f,p=new Map;function m(e,t,n){return e[t]?t:e[n]?n:function(e){for(var t in e)return t}(e)}function g(e,t){var n=t;if(!e.includes(n)){n=1/0;for(var r=0;r<e.length;r++)Math.abs(e[r]-t)<Math.abs(n-t)&&(n=e[r])}return n}function v(e){return f||(f=new Set,s("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",(function(e){f.add(e)}))),f.has(e)}return e.CodePointSet=t,e.clearCache=function(){l={},c={}},e.getFontsForString=function(e,t){void 0===t&&(t={});var n,r=t.lang;void 0===r&&(r=/\p{Script=Hangul}/u.test(n=e)?"ko":/\p{Script=Hiragana}|\p{Script=Katakana}/u.test(n)?"ja":"en");var i=t.category;void 0===i&&(i="sans-serif");var s=t.style;void 0===s&&(s="normal");var u=t.weight;void 0===u&&(u=400);var f=(t.dataUrl||h).replace(/\/$/g,""),y=new Map,A=new Uint8Array(e.length),x={},b={},_=new Array(e.length),w=new Map,E=!1;function S(e){var t=p.get(e);return t||(t=fetch(f+"/"+e).then((function(e){if(!e.ok)throw new Error(e.statusText);return e.json().then((function(e){if(!Array.isArray(e)||1!==e[0])throw new Error("Incorrect schema version; need 1, got "+e[0]);return e[1]}))})).catch((function(t){if(f!==h)return E||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+f+'", trying default CDN. '+t.message),E=!0),f=h,p.delete(e),S(e);throw t})),p.set(e,t)),t}for(var C=function(t){var n=e.codePointAt(t),r=o(n);_[t]=r,l[r]||w.has(r)||w.set(r,S(r).then((function(e){l[r]=e}))),n>65535&&(t++,M=t)},M=0;M<e.length;M++)C(M);return Promise.all(w.values()).then((function(){w.clear();for(var t=function(t){var i=e.codePointAt(t),o=null,s=l[_[t]],u=void 0;for(var h in s){var d=b[h];if(void 0===d&&(d=b[h]=new RegExp(h).test(r||"en")),d){for(var f in u=h,s[h])if(a(i,s[h][f])){o=f;break}break}}if(!o)e:for(var p in s)if(p!==u)for(var m in s[p])if(a(i,s[p][m])){o=m;break e}o||(console.debug("No font coverage for U+"+i.toString(16)),o="latin"),_[t]=o,c[o]||w.has(o)||w.set(o,S("font-meta/"+o+".json").then((function(e){c[o]=e}))),i>65535&&(t++,n=t)},n=0;n<e.length;n++)t(n);return Promise.all(w.values())})).then((function(){for(var t,n=null,r=0;r<e.length;r++){var o=e.codePointAt(r);if(n&&(v(o)||d(n).has(o)))A[r]=A[r-1];else{n=c[_[r]];var a=x[n.id];if(!a){var l=n.typeforms,h=m(l,i,"sans-serif"),p=m(l[h],s,"normal"),b=g(null===(t=l[h])||void 0===t?void 0:t[p],u);a=x[n.id]=f+"/font-files/"+n.id+"/"+h+"."+p+"."+b+".woff"}var w=y.get(a);null==w&&(w=y.size,y.set(a,w)),A[r]=w}o>65535&&(r++,A[r]=A[r-1])}return{fontUrls:Array.from(y.keys()),chars:A}}))},Object.defineProperty(e,"__esModule",{value:!0}),e}({})}],init:(e,t,n)=>e(t,n())});const GO=()=>(self.performance||Date).now(),QO=SO();let HO;const VO=[];let WO=0;function qO(){const e=GO();for(;VO.length&&GO()-e<5;)VO.shift()();WO=VO.length?setTimeout(qO,0):0}const XO=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Promise(((e,n)=>{VO.push((()=>{const r=GO();try{QO.webgl.generateIntoCanvas(...t),e({timing:GO()-r})}catch(i){n(i)}})),WO||(WO=setTimeout(qO,0))}))},YO=4,JO=2e3,KO={};let ZO=0;function $O(e,t,n,r,i,o,a,s,l,c){const u="TroikaTextSDFGenerator_JS_"+ZO++%YO;let h=KO[u];return h||(h=KO[u]={workerModule:_O({name:u,workerId:u,dependencies:[SO,GO],init(e,t){const n=e().javascript.generate;return function(){const e=t();return{textureData:n(...arguments),timing:t()-e}}},getTransferables:e=>[e.textureData.buffer]}),requests:0,idleTimer:null}),h.requests++,clearTimeout(h.idleTimer),h.workerModule(e,t,n,r,i,o).then((n=>{let{textureData:r,timing:i}=n;const o=GO(),d=new Uint8Array(4*r.length);for(let e=0;e<r.length;e++)d[4*e+c]=r[e];return QO.webglUtils.renderImageData(a,d,s,l,e,t,1<<3-c),i+=GO()-o,0===--h.requests&&(h.idleTimer=setTimeout((()=>{!function(e){xO[e]&&xO[e].forEach((function(e){e()})),AO[e]&&(AO[e].terminate(),delete AO[e])}(u)}),JO)),{timing:i}}))}const ek=QO.webglUtils.resizeWebGLCanvasWithoutClearing,tk={defaultFontURL:null,unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},nk=new La;let rk=!1;function ik(){return(self.performance||Date).now()}const ok=Object.create(null);function ak(e,t){rk=!0,e=lk({},e);const n=ik(),{defaultFontURL:r}=tk,i=[];if(r&&i.push({label:"default",src:uk(r)}),e.font&&i.push({label:"user",src:uk(e.font)}),e.font=i,e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||tk.sdfGlyphSize,e.unicodeFontsURL=e.unicodeFontsURL||tk.unicodeFontsURL,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!==typeof r&&(r=nk.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:o,sdfExponent:a}=tk,{sdfGlyphSize:s}=e,l=o/s*4;let c=ok[s];if(!c){const e=document.createElement("canvas");e.width=o,e.height=256*s/l,c=ok[s]={glyphCount:0,sdfGlyphSize:s,sdfCanvas:e,sdfTexture:new so(e,void 0,void 0,void 0,an,an),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,function(e){const t=e.sdfCanvas;t.addEventListener("webglcontextlost",(t=>{console.log("Context Lost",t),t.preventDefault(),e.contextLost=!0})),t.addEventListener("webglcontextrestored",(t=>{console.log("Context Restored",t),e.contextLost=!1;const n=[];e.glyphsByFont.forEach((t=>{t.forEach((t=>{n.push(sk(t,e,!0))}))})),Promise.all(n).then((()=>{hk(e),e.sdfTexture.needsUpdate=!0}))}))}(c)}const{sdfTexture:u,sdfCanvas:h}=c;fk(e).then((r=>{const{glyphIds:i,glyphFontIndices:d,fontData:f,glyphPositions:p,fontSize:m,timings:g}=r,v=[],y=new Float32Array(4*i.length);let A=0,x=0;const b=ik(),_=f.map((e=>{let t=c.glyphsByFont.get(e.src);return t||c.glyphsByFont.set(e.src,t=new Map),t}));i.forEach(((e,t)=>{const n=d[t],{src:o,unitsPerEm:a}=f[n];let l=_[n].get(e);if(!l){const{path:t,pathBounds:i}=r.glyphData[o][e],a=Math.max(i[2]-i[0],i[3]-i[1])/s*(tk.sdfMargin*s+.5),u=c.glyphCount++,h=[i[0]-a,i[1]-a,i[2]+a,i[3]+a];_[n].set(e,l={path:t,atlasIndex:u,sdfViewBox:h}),v.push(l)}const{sdfViewBox:u}=l,h=p[x++],g=p[x++],b=m/a;y[A++]=h+u[0]*b,y[A++]=g+u[1]*b,y[A++]=h+u[2]*b,y[A++]=g+u[3]*b,i[t]=l.atlasIndex})),g.quads=(g.quads||0)+(ik()-b);const w=ik();g.sdf={};const E=h.height,S=Math.ceil(c.glyphCount/l),C=Math.pow(2,Math.ceil(Math.log2(S*s)));C>E&&(console.info(`Increasing SDF texture size ${E}->${C}`),ek(h,o,C),u.dispose()),Promise.all(v.map((t=>sk(t,c,e.gpuAccelerateSDF).then((e=>{let{timing:n}=e;g.sdf[t.atlasIndex]=n}))))).then((()=>{v.length&&!c.contextLost&&(hk(c),u.needsUpdate=!0),g.sdfTotal=ik()-w,g.total=ik()-n,t(Object.freeze({parameters:e,sdfTexture:u,sdfGlyphSize:s,sdfExponent:a,glyphBounds:y,glyphAtlasIndices:i,glyphColors:r.glyphColors,caretPositions:r.caretPositions,chunkedBounds:r.chunkedBounds,ascender:r.ascender,descender:r.descender,lineHeight:r.lineHeight,capHeight:r.capHeight,xHeight:r.xHeight,topBaseline:r.topBaseline,blockBounds:r.blockBounds,visibleBounds:r.visibleBounds,timings:r.timings}))}))})),Promise.resolve().then((()=>{var e;c.contextLost||(e=h)._warm||(QO.webgl.isSupported(e),e._warm=!0)}))}function sk(e,t,n){let{path:r,atlasIndex:i,sdfViewBox:o}=e,{sdfGlyphSize:a,sdfCanvas:s,contextLost:l}=t;if(l)return Promise.resolve({timing:-1});const{textureWidth:c,sdfExponent:u}=tk,h=Math.max(o[2]-o[0],o[3]-o[1]),d=Math.floor(i/4);return function(e,t,n,r,i,o,a,s,l,c){return arguments.length>10&&void 0!==arguments[10]&&!arguments[10]?$O(e,t,n,r,i,o,a,s,l,c):XO(e,t,n,r,i,o,a,s,l,c).then(null,(u=>(HO||(console.warn("WebGL SDF generation failed, falling back to JS",u),HO=!0),$O(e,t,n,r,i,o,a,s,l,c))))}(a,a,r,o,h,u,s,d%(c/a)*a,Math.floor(d/(c/a))*a,i%4,n)}function lk(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}let ck;function uk(e){return ck||(ck="undefined"===typeof document?{}:document.createElement("a")),ck.href=e,ck.href}function hk(e){if("function"!==typeof createImageBitmap){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:t,sdfTexture:n}=e,{width:r,height:i}=t,o=e.sdfCanvas.getContext("webgl");let a=n.image.data;a&&a.length===r*i*4||(a=new Uint8Array(r*i*4),n.image={width:r,height:i,data:a},n.flipY=!1,n.isDataTexture=!0),o.readPixels(0,0,r,i,o.RGBA,o.UNSIGNED_BYTE,a)}}const dk=_O({name:"Typesetter",dependencies:[function(e,t){const n=1/0,r=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,i="[^\\S\\u00A0]",o=new RegExp(`${i}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a(a,h){let{text:d="",font:f,lang:p,sdfGlyphSize:m=64,fontSize:g=400,fontWeight:v=1,fontStyle:y="normal",letterSpacing:A=0,lineHeight:x="normal",maxWidth:b=n,direction:_,textAlign:w="left",textIndent:E=0,whiteSpace:S="normal",overflowWrap:C="normal",anchorX:M=0,anchorY:T=0,metricsOnly:I=!1,unicodeFontsURL:B,preResolvedFonts:P=null,includeCaretPositions:R=!1,chunkedBoundsSize:D=8192,colorRanges:O=null}=a;const k=c(),L={fontLoad:0,typesetting:0};d.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),d=d.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),g=+g,A=+A,b=+b,x=x||"normal",E=+E,function(t,n){let{text:r,lang:i,fonts:o,style:a,weight:s,preResolvedFonts:l,unicodeFontsURL:c}=t;const u=e=>{let t,r,{chars:i,fonts:o}=e;const a=[];for(let n=0;n<i.length;n++)i[n]!==r?(r=i[n],a.push(t={start:n,end:n,fontObj:o[i[n]]})):t.end=n;n(a)};l?u(l):e(r,u,{lang:i,fonts:o,style:a,weight:s,unicodeFontsURL:c})}({text:d,lang:p,style:y,weight:v,fonts:"string"===typeof f?[{src:f}]:f,unicodeFontsURL:B,preResolvedFonts:P},(e=>{L.fontLoad=c()-k;const a=isFinite(b);let f=null,p=null,m=null,v=null,y=null,B=null,P=null,F=null,z=0,U=0,N="nowrap"!==S;const j=new Map,G=c();let Q=E,H=0,V=new u;const W=[V];e.forEach((e=>{const{fontObj:t}=e,{ascender:n,descender:s,unitsPerEm:l,lineGap:c,capHeight:h,xHeight:f}=t;let p=j.get(t);if(!p){const e=g/l,r="normal"===x?(n-s+c)*e:x*g,i=(r-(n-s)*e)/2,o=Math.min(r,(n-s)*e),a=(n+s)/2*e+o/2;p={index:j.size,src:t.src,fontObj:t,fontSizeMult:e,unitsPerEm:l,ascender:n*e,descender:s*e,capHeight:h*e,xHeight:f*e,lineHeight:r,baseline:-i-n*e,caretTop:a,caretBottom:a-o},j.set(t,p)}const{fontSizeMult:m}=p,v=d.slice(e.start,e.end+1);let y,_;t.forEachGlyph(v,g,A,((t,n,s,l)=>{n+=H,l+=e.start,y=n,_=t;const c=d.charAt(l),h=t.advanceWidth*m,f=V.count;let v;if("isEmpty"in t||(t.isWhitespace=!!c&&new RegExp(i).test(c),t.canBreakAfter=!!c&&o.test(c),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||r.test(c)),t.isWhitespace||t.isEmpty||U++,N&&a&&!t.isWhitespace&&n+h+Q>b&&f){if(V.glyphAt(f-1).glyphObj.canBreakAfter)v=new u,Q=-n;else for(let e=f;e--;){if(0===e&&"break-word"===C){v=new u,Q=-n;break}if(V.glyphAt(e).glyphObj.canBreakAfter){v=V.splitAt(e+1);const t=v.glyphAt(0).x;Q-=t;for(let e=v.count;e--;)v.glyphAt(e).x-=t;break}}v&&(V.isSoftWrapped=!0,V=v,W.push(V),z=b)}let x=V.glyphAt(V.count);x.glyphObj=t,x.x=n+Q,x.y=s,x.width=h,x.charIndex=l,x.fontData=p,"\n"===c&&(V=new u,W.push(V),Q=-(n+h+A*g)+E)})),H=y+_.advanceWidth*m+A*g}));let q=0;W.forEach((e=>{let t=!0;for(let n=e.count;n--;){const r=e.glyphAt(n);t&&!r.glyphObj.isWhitespace&&(e.width=r.x+r.width,e.width>z&&(z=e.width),t=!1);let{lineHeight:i,capHeight:o,xHeight:a,baseline:s}=r.fontData;i>e.lineHeight&&(e.lineHeight=i);const l=s-e.baseline;l<0&&(e.baseline+=l,e.cap+=l,e.ex+=l),e.cap=Math.max(e.cap,e.baseline+o),e.ex=Math.max(e.ex,e.baseline+a)}e.baseline-=q,e.cap-=q,e.ex-=q,q+=e.lineHeight}));let X=0,Y=0;if(M&&("number"===typeof M?X=-M:"string"===typeof M&&(X=-z*("left"===M?0:"center"===M?.5:"right"===M?1:s(M)))),T&&("number"===typeof T?Y=-T:"string"===typeof T&&(Y="top"===T?0:"top-baseline"===T?-W[0].baseline:"top-cap"===T?-W[0].cap:"top-ex"===T?-W[0].ex:"middle"===T?q/2:"bottom"===T?q:"bottom-baseline"===T?-W[W.length-1].baseline:s(T)*q)),!I){const e=t.getEmbeddingLevels(d,_);f=new Uint16Array(U),p=new Uint8Array(U),m=new Float32Array(2*U),v={},P=[n,n,-n,-n],F=[],R&&(B=new Float32Array(4*d.length)),O&&(y=new Uint8Array(3*U));let r,i,o=0,a=-1,s=-1;if(W.forEach(((c,u)=>{let{count:h,width:g}=c;if(h>0){let u=0;for(let e=h;e--&&c.glyphAt(e).glyphObj.isWhitespace;)u++;let A=0,x=0;if("center"===w)A=(z-g)/2;else if("right"===w)A=z-g;else if("justify"===w&&c.isSoftWrapped){let e=0;for(let t=h-u;t--;)c.glyphAt(t).glyphObj.isWhitespace&&e++;x=(z-g)/e}if(x||A){let e=0;for(let t=0;t<h;t++){let n=c.glyphAt(t);const r=n.glyphObj;n.x+=A+e,0!==x&&r.isWhitespace&&t<h-u&&(e+=x,n.width+=x)}}const b=t.getReorderSegments(d,e,c.glyphAt(0).charIndex,c.glyphAt(c.count-1).charIndex);for(let e=0;e<b.length;e++){const[t,n]=b[e];let r=1/0,i=-1/0;for(let e=0;e<h;e++)if(c.glyphAt(e).charIndex>=t){let t=e,o=e;for(;o<h;o++){let e=c.glyphAt(o);if(e.charIndex>n)break;o<h-u&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<o;e++){const t=c.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let _;const E=e=>_=e;for(let g=0;g<h;g++){const u=c.glyphAt(g);_=u.glyphObj;const h=_.index,A=1&e.levels[u.charIndex];if(A){const e=t.getMirroredCharacter(d[u.charIndex]);e&&u.fontData.fontObj.forEachGlyph(e,0,0,E)}if(R){const{charIndex:e,fontData:t}=u,n=u.x+X,r=u.x+u.width+X;B[4*e]=A?r:n,B[4*e+1]=A?n:r,B[4*e+2]=c.baseline+t.caretBottom+Y,B[4*e+3]=c.baseline+t.caretTop+Y;const i=e-a;i>1&&l(B,a,i),a=e}if(O){const{charIndex:e}=u;for(;e>s;)s++,O.hasOwnProperty(s)&&(i=O[s])}if(!_.isWhitespace&&!_.isEmpty){const e=o++,{fontSizeMult:t,src:a,index:s}=u.fontData,l=v[a]||(v[a]={});l[h]||(l[h]={path:_.path,pathBounds:[_.xMin,_.yMin,_.xMax,_.yMax]});const d=u.x+X,g=u.y+c.baseline+Y;m[2*e]=d,m[2*e+1]=g;const A=d+_.xMin*t,x=g+_.yMin*t,b=d+_.xMax*t,w=g+_.yMax*t;A<P[0]&&(P[0]=A),x<P[1]&&(P[1]=x),b>P[2]&&(P[2]=b),w>P[3]&&(P[3]=w),e%D===0&&(r={start:e,end:e,rect:[n,n,-n,-n]},F.push(r)),r.end++;const E=r.rect;if(A<E[0]&&(E[0]=A),x<E[1]&&(E[1]=x),b>E[2]&&(E[2]=b),w>E[3]&&(E[3]=w),f[e]=h,p[e]=s,O){const t=3*e;y[t]=i>>16&255,y[t+1]=i>>8&255,y[t+2]=255&i}}}}})),B){const e=d.length-a;e>1&&l(B,a,e)}}const J=[];j.forEach((e=>{let{index:t,src:n,unitsPerEm:r,ascender:i,descender:o,lineHeight:a,capHeight:s,xHeight:l}=e;J[t]={src:n,unitsPerEm:r,ascender:i,descender:o,lineHeight:a,capHeight:s,xHeight:l}})),L.typesetting=c()-G,h({glyphIds:f,glyphFontIndices:p,glyphPositions:m,glyphData:v,fontData:J,caretPositions:B,glyphColors:y,chunkedBounds:F,fontSize:g,topBaseline:Y+W[0].baseline,blockBounds:[X,Y-q,X+z,Y],visibleBounds:P,timings:L})}))}function s(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function l(e,t,n){const r=e[4*t],i=e[4*t+1],o=e[4*t+2],a=e[4*t+3],s=(i-r)/n;for(let l=0;l<n;l++){const n=4*(t+l);e[n]=r+s*l,e[n+1]=r+s*(l+1),e[n+2]=o,e[n+3]=a}}function c(){return(self.performance||Date).now()}function u(){this.data=[]}const h=["glyphObj","x","y","width","charIndex","fontData"];return u.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/h.length)},glyphAt(e){let t=u.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new u;return t.data=this.data.splice(e*h.length),t}},u.flyweight=h.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*h.length+n]},set(e){this.data[this.index*h.length+n]=e}}),e)),{data:null,index:0}),{typeset:a,measure:function(e,t){a({...e,metricsOnly:!0},(e=>{const[n,r,i,o]=e.blockBounds;t({width:i-n,height:o-r})}))}}},jO,CO],init:(e,t,n)=>e(t,n())}),fk=_O({name:"Typesetter",dependencies:[dk],init:e=>function(t){return new Promise((n=>{e.typeset(t,n)}))},getTransferables(e){const t=[];for(let n in e)e[n]&&e[n].buffer&&t.push(e[n].buffer);return t}});const pk={};const mk="aTroikaGlyphIndex";class gk extends dm{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new zo,this.boundingBox=new xo}computeBoundingSphere(){}computeBoundingBox(){}setSide(e){const t=this.getIndex().count;this.setDrawRange(e===Je?t/2:0,e===Ke?t:t/2)}set detail(e){if(e!==this._detail){this._detail=e,("number"!==typeof e||e<1)&&(e=1);let t=function(e){let t=pk[e];if(!t){const n=new tl(1,1,e,e),r=n.clone(),i=n.attributes,o=r.attributes,a=new hs,s=i.uv.count;for(let e=0;e<s;e++)o.position.array[3*e]*=-1,o.normal.array[3*e+2]*=-1;["position","normal","uv"].forEach((e=>{a.setAttribute(e,new rs([...i[e].array,...o[e].array],i[e].itemSize))})),a.setIndex([...n.index.array,...r.index.array.map((e=>e+s))]),a.translate(.5,.5,0),t=pk[e]=a}return t}(e);["position","normal","uv"].forEach((e=>{this.attributes[e]=t.attributes[e].clone()})),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,n,r,i){vk(this,"aTroikaGlyphBounds",e,4),vk(this,mk,t,1),vk(this,"aTroikaGlyphColor",i,3),this._blockBounds=n,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:o,max:a,sin:s,cos:l}=Math,c=r/2,u=2*r,h=Math.abs(t),d=e[0]/h,f=e[2]/h,p=i((d+c)/u)!==i((f+c)/u)?-h:o(s(d)*h,s(f)*h),m=i((d-c)/u)!==i((f-c)/u)?h:a(s(d)*h,s(f)*h),g=i((d+r)/u)!==i((f+r)/u)?2*h:a(h-l(d)*h,h-l(f)*h);n.min.set(p,e[1],t<0?-g:0),n.max.set(m,e[3],t<0?0:g)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(mk).count,n=this._chunkedBounds;if(n)for(let r=n.length;r--;){t=n[r].end;let i=n[r].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}this.instanceCount=t}}function vk(e,t,n,r){const i=e.getAttribute(t);n?i&&i.array.length===n.length?(i.array.set(n),i.needsUpdate=!0):(e.setAttribute(t,new Ph(n,r)),delete e._maxInstanceCount,e.dispose()):i&&e.deleteAttribute(t)}const yk=new Na({color:16777215,side:Ke,transparent:!0}),Ak=8421504,xk=new qo,bk=new vo,_k=new vo,wk=[],Ek=new vo,Sk="+x+y";function Ck(e){return Array.isArray(e)?e[0]:e}let Mk=()=>{const e=new Is(new tl(1,1),yk);return Mk=()=>e,e},Tk=()=>{const e=new Is(new tl(1,1,32,1),yk);return Tk=()=>e,e};const Ik={type:"syncstart"},Bk={type:"synccomplete"},Pk=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],Rk=Pk.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class Dk extends Is{constructor(){super(new gk,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=Ak,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=Sk,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(Ik),ak({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(Bk),e&&e()}))))}onBeforeRender(e,t,n,r,i,o){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i),i._hadOwnSide=i.hasOwnProperty("side"),this.geometry.setSide(i._actualSide=i.side),i.side=Ye}onAfterRender(e,t,n,r,i,o){i._hadOwnSide?i.side=i._actualSide:delete i.side}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=yk.clone());if(e&&e.baseMaterial===t||(e=this._derivedMaterial=function(e){const t=kO(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new zi},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new lo(0,0,0,0)},uTroikaClipRect:{value:new lo(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new zi},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new La},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new Ui},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of exponential encoding in webgl-sdf-generator\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat fragDistance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(fragDistance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  fragDistance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter(e){let{vertexShader:t,fragmentShader:n}=e,r=/\buniform\s+vec3\s+diffuse\b/;return r.test(n)&&(n=n.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(MO,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:t,fragmentShader:n}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(t),t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let t=e._outlineMtl;return t||(t=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),t.isTextOutlineMaterial=!0,t.depthWrite=!1,t.map=null,e.addEventListener("dispose",(function n(){e.removeEventListener("dispose",n),t.dispose()}))),[t,e]}return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return Ck(this.material).getDepthMaterial()}get customDistanceMaterial(){return Ck(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,n=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:e,blockBounds:i}=r;n.uTroikaSDFTexture.value=e,n.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),n.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,n.uTroikaSDFExponent.value=r.sdfExponent,n.uTroikaTotalBounds.value.fromArray(i),n.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let o,a,s,l=0,c=0,u=0,h=0,d=0;if(t){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:r,outlineOpacity:i}=this;l=this._parsePercent(e)||0,c=Math.max(0,this._parsePercent(r)||0),o=i,h=this._parsePercent(t)||0,d=this._parsePercent(n)||0}else u=Math.max(0,this._parsePercent(this.strokeWidth)||0),u&&(s=this.strokeColor,n.uTroikaStrokeColor.value.set(null==s?Ak:s),a=this.strokeOpacity,null==a&&(a=1)),o=this.fillOpacity;n.uTroikaDistanceOffset.value=l,n.uTroikaPositionOffset.value.set(h,d),n.uTroikaBlurRadius.value=c,n.uTroikaStrokeWidth.value=u,n.uTroikaStrokeOpacity.value=a,n.uTroikaFillOpacity.value=null==o?1:o,n.uTroikaCurveRadius.value=this.curveRadius||0;let f=this.clipRect;if(f&&Array.isArray(f)&&4===f.length)n.uTroikaClipRect.value.fromArray(f);else{const e=100*(this.fontSize||.1);n.uTroikaClipRect.value.set(i[0]-e,i[1]-e,i[2]+e,i[3]+e)}this.geometry.applyClipRect(n.uTroikaClipRect.value)}n.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const i=t?this.outlineColor||0:this.color;if(null==i)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new La;i===t._input&&"object"!==typeof i||t.set(t._input=i)}let o=this.orientation||Sk;if(o!==e._orientation){let t=n.uTroikaOrient.value;o=o.replace(/[^-+xyz]/g,"");let r=o!==Sk&&o.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,e,n,i,o]=r;bk.set(0,0,0)[n]="-"===e?1:-1,_k.set(0,0,0)[o]="-"===i?-1:1,xk.lookAt(Ek,bk.cross(_k),_k),t.setFromMatrix4(xk)}else t.identity();e._orientation=o}}_parsePercent(e){if("string"===typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new zi;return bk.copy(e),this.localPositionToTextCoords(this.worldToLocal(bk),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,o=r?Tk():Mk(),a=o.geometry,{position:s,uv:l}=a.attributes;for(let e=0;e<l.count;e++){let t=i[0]+l.getX(e)*(i[2]-i[0]);const n=i[1]+l.getY(e)*(i[3]-i[1]);let o=0;r&&(o=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),s.setXYZ(e,t,n,o)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,o.matrixWorld=this.matrixWorld,o.material.side=this.material.side,wk.length=0,o.raycast(e,wk);for(let e=0;e<wk.length;e++)wk[e].object=this,t.push(wk[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,Rk.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}Pk.forEach((e=>{const t="_private_"+e;Object.defineProperty(Dk.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));new WeakMap;new WeakMap;const Ok=l.forwardRef(((e,t)=>{let{sdfGlyphSize:n=64,anchorX:r="center",anchorY:i="middle",font:o,fontSize:a=1,children:s,characters:c,onSync:u,...h}=e;const d=cy((e=>{let{invalidate:t}=e;return t})),[f]=l.useState((()=>new Dk)),[p,m]=l.useMemo((()=>{const e=[];let t="";return l.Children.forEach(s,(n=>{"string"===typeof n||"number"===typeof n?t+=n:e.push(n)})),[e,t]}),[s]);return nv((()=>new Promise((e=>function(e,t){let{font:n,characters:r,sdfGlyphSize:i}=e;ak({font:n,sdfGlyphSize:i,text:Array.isArray(r)?r.join("\n"):""+r},t)}({font:o,characters:c},e)))),["troika-text",o,c]),l.useLayoutEffect((()=>{f.sync((()=>{d(),u&&u(f)}))})),l.useEffect((()=>()=>f.dispose()),[f]),l.createElement("primitive",tC({object:f,ref:t,font:o,text:m,anchorX:r,anchorY:i,fontSize:a,sdfGlyphSize:n},h),p)}));class kk extends Gf{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{bevelEnabled:n=!1,bevelSize:r=8,bevelThickness:i=10,font:o,height:a=50,size:s=100,lineHeight:l=1,letterSpacing:c=0,...u}=t;if(void 0===o)super();else{super(o.generateShapes(e,s,{lineHeight:l,letterSpacing:c}),{...u,bevelEnabled:n,bevelSize:r,bevelThickness:i,depth:a})}this.type="TextGeometry"}}function Lk(e,t){if(t===Sr)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===Mr||t===Cr){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const r=n.count-2,i=[];if(n)if(t===Mr)for(let e=1;e<=r;e++)i.push(n.getX(0)),i.push(n.getX(e)),i.push(n.getX(e+1));else for(let e=0;e<r;e++)e%2===0?(i.push(n.getX(e)),i.push(n.getX(e+1)),i.push(n.getX(e+2))):(i.push(n.getX(e+2)),i.push(n.getX(e+1)),i.push(n.getX(e)));i.length/3!==r&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(i),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}function Fk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.PI/3;const n=Math.cos(t),r=100*(1+1e-10),i=[new vo,new vo,new vo],o=new vo,a=new vo,s=new vo,l=new vo;function c(e){return`${~~(e.x*r)},${~~(e.y*r)},${~~(e.z*r)}`}const u=e.index?e.toNonIndexed():e,h=u.attributes.position,d={};for(let m=0,g=h.count/3;m<g;m++){const e=3*m,t=i[0].fromBufferAttribute(h,e+0),n=i[1].fromBufferAttribute(h,e+1),r=i[2].fromBufferAttribute(h,e+2);o.subVectors(r,n),a.subVectors(t,n);const s=(new vo).crossVectors(o,a).normalize();for(let o=0;o<3;o++){const e=c(i[o]);e in d||(d[e]=[]),d[e].push(s)}}const f=new Float32Array(3*h.count),p=new Xa(f,3,!1);for(let m=0,g=h.count/3;m<g;m++){const e=3*m,t=i[0].fromBufferAttribute(h,e+0),r=i[1].fromBufferAttribute(h,e+1),u=i[2].fromBufferAttribute(h,e+2);o.subVectors(u,r),a.subVectors(t,r),s.crossVectors(o,a).normalize();for(let o=0;o<3;o++){const t=d[c(i[o])];l.set(0,0,0);for(let e=0,r=t.length;e<r;e++){const r=t[e];s.dot(r)>n&&l.add(r)}l.normalize(),p.setXYZ(e+o,l.x,l.y,l.z)}}return u.setAttribute("normal",p),u}var zk=Object.defineProperty,Uk=(e,t,n)=>(((e,t,n)=>{t in e?zk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class Nk extends kp{constructor(e){super(e)}load(e,t,n,r){const i=new zp(this.manager);i.setPath(this.path),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{if("string"!==typeof e)throw new Error("unsupported data type");const n=JSON.parse(e),r=this.parse(n);t&&t(r)}),n,r)}loadAsync(e,t){return super.loadAsync(e,t)}parse(e){return new jk(e)}}class jk{constructor(e){Uk(this,"data"),this.data=e}generateShapes(e){const t=[],n={letterSpacing:0,lineHeight:1,...arguments.length>2?arguments[2]:void 0},r=function(e,t,n,r){const i=Array.from(e),o=t/n.resolution,a=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*o,s=[];let l=0,c=0;for(let u=0;u<i.length;u++){const e=i[u];if("\n"===e)l=0,c-=a*r.lineHeight;else{const t=Gk(e,o,l,c,n);t&&(l+=t.offsetX+r.letterSpacing,s.push(t.path))}}return s}(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,this.data,n);for(let i=0,o=r.length;i<o;i++)Array.prototype.push.apply(t,r[i].toShapes(!1));return t}}function Gk(e,t,n,r,i){const o=i.glyphs[e]||i.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+i.familyName+".");const a=new Wg;let s,l,c,u,h,d,f,p;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let i=0,o=e.length;i<o;){switch(e[i++]){case"m":s=parseInt(e[i++])*t+n,l=parseInt(e[i++])*t+r,a.moveTo(s,l);break;case"l":s=parseInt(e[i++])*t+n,l=parseInt(e[i++])*t+r,a.lineTo(s,l);break;case"q":c=parseInt(e[i++])*t+n,u=parseInt(e[i++])*t+r,h=parseInt(e[i++])*t+n,d=parseInt(e[i++])*t+r,a.quadraticCurveTo(h,d,c,u);break;case"b":c=parseInt(e[i++])*t+n,u=parseInt(e[i++])*t+r,h=parseInt(e[i++])*t+n,d=parseInt(e[i++])*t+r,f=parseInt(e[i++])*t+n,p=parseInt(e[i++])*t+r,a.bezierCurveTo(h,d,f,p,c,u)}}}return{offsetX:o.ha*t,path:a}}Uk(jk,"isFont"),Uk(jk,"type");let Qk=null;async function Hk(e){const t=await async function(e){return"string"===typeof e?await(await fetch(e)).json():e}(e);return n=t,Qk||(Qk=new Nk),Qk.parse(n);var n}function Vk(e){return nv(Hk,[e])}Vk.preload=e=>rv(Hk,[e]),Vk.clear=e=>iv([e]);const Wk=["string","number"],qk=l.forwardRef(((e,t)=>{let{font:n,letterSpacing:r=0,lineHeight:i=1,size:o=1,height:a=.2,bevelThickness:s=.1,bevelSize:c=.01,bevelEnabled:u=!1,bevelOffset:h=0,bevelSegments:d=4,curveSegments:f=8,smooth:p,children:m,...g}=e;l.useMemo((()=>hv({RenamedTextGeometry:kk})),[]);const v=l.useRef(null),y=Vk(n),A=(0,l.useMemo)((()=>({font:y,size:o,height:a,bevelThickness:s,bevelSize:c,bevelEnabled:u,bevelSegments:d,bevelOffset:h,curveSegments:f,letterSpacing:r,lineHeight:i})),[y,o,a,s,c,u,d,h,f,r,i]),[x,...b]=(0,l.useMemo)((()=>(e=>{let t="";const n=[];return l.Children.forEach(e,(e=>{Wk.includes(typeof e)?t+=e+"":n.push(e)})),[t,...n]})(m)),[m]),_=l.useMemo((()=>[x,A]),[x,A]);return l.useLayoutEffect((()=>{p&&(v.current.geometry=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;t=Math.max(t,Number.EPSILON);const n={},r=e.getIndex(),i=e.getAttribute("position"),o=r?r.count:i.count;let a=0;const s=Object.keys(e.attributes),l={},c={},u=[],h=["getX","getY","getZ","getW"];for(let m=0,g=s.length;m<g;m++){const t=s[m];l[t]=[];const n=e.morphAttributes[t];n&&(c[t]=new Array(n.length).fill(0).map((()=>[])))}const d=Math.log10(1/t),f=Math.pow(10,d);for(let m=0;m<o;m++){const t=r?r.getX(m):m;let i="";for(let n=0,r=s.length;n<r;n++){const r=s[n],o=e.getAttribute(r),a=o.itemSize;for(let e=0;e<a;e++)i+=~~(o[h[e]](t)*f)+","}if(i in n)u.push(n[i]);else{for(let n=0,r=s.length;n<r;n++){const r=s[n],i=e.getAttribute(r),o=e.morphAttributes[r],a=i.itemSize,u=l[r],d=c[r];for(let e=0;e<a;e++){const n=h[e];if(u.push(i[n](t)),o)for(let e=0,r=o.length;e<r;e++)d[e].push(o[e][n](t))}}n[i]=a,u.push(a),a++}}const p=e.clone();for(let m=0,g=s.length;m<g;m++){const t=s[m],n=e.getAttribute(t),r=new n.array.constructor(l[t]),i=new Xa(r,n.itemSize,n.normalized);if(p.setAttribute(t,i),t in c)for(let o=0;o<c[t].length;o++){const n=e.morphAttributes[t][o],r=new n.array.constructor(c[t][o]),i=new Xa(r,n.itemSize,n.normalized);p.morphAttributes[t][o]=i}}return p.setIndex(u),p}(v.current.geometry,p),v.current.geometry.computeVertexNormals())}),[_,p]),l.useImperativeHandle(t,(()=>v.current),[]),l.createElement("mesh",tC({},g,{ref:v}),l.createElement("renamedTextGeometry",{args:_}),b)})),Xk={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")};var Yk=Object.defineProperty,Jk=(e,t,n)=>(((e,t,n)=>{t in e?Yk(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class Kk{constructor(){Jk(this,"enabled",!0),Jk(this,"needsSwap",!0),Jk(this,"clear",!1),Jk(this,"renderToScreen",!1)}setSize(e,t){}render(e,t,n,r,i){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}class Zk{constructor(e){Jk(this,"camera",new pl(-1,1,1,-1,0,1)),Jk(this,"geometry",new tl(2,2)),Jk(this,"mesh"),this.mesh=new Is(this.geometry,e)}get material(){return this.mesh.material}set material(e){this.mesh.material=e}dispose(){this.mesh.geometry.dispose()}render(e){e.render(this.mesh,this.camera)}}var $k=Object.defineProperty,eL=(e,t,n)=>(((e,t,n)=>{t in e?$k(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class tL extends Kk{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"tDiffuse";super(),eL(this,"textureID"),eL(this,"uniforms"),eL(this,"material"),eL(this,"fsQuad"),this.textureID=t,e instanceof Ls?(this.uniforms=e.uniforms,this.material=e):(this.uniforms=ks.clone(e.uniforms),this.material=new Ls({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new Zk(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}}var nL=Object.defineProperty,rL=(e,t,n)=>(((e,t,n)=>{t in e?nL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class iL extends Kk{constructor(e,t){super(),rL(this,"scene"),rL(this,"camera"),rL(this,"inverse"),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let o,a;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(o=0,a=1):(o=1,a=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,o,4294967295),i.buffers.stencil.setClear(a),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class oL extends Kk{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}var aL=Object.defineProperty,sL=(e,t,n)=>(((e,t,n)=>{t in e?aL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class lL{constructor(e,t){if(sL(this,"renderer"),sL(this,"_pixelRatio"),sL(this,"_width"),sL(this,"_height"),sL(this,"renderTarget1"),sL(this,"renderTarget2"),sL(this,"writeBuffer"),sL(this,"readBuffer"),sL(this,"renderToScreen"),sL(this,"passes",[]),sL(this,"copyPass"),sL(this,"clock"),this.renderer=e,void 0===t){const n={minFilter:an,magFilter:an,format:Sn},r=e.getSize(new zi);this._pixelRatio=e.getPixelRatio(),this._width=r.width,this._height=r.height,(t=new uo(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,void 0===Xk&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===tL&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new tL(Xk),this.copyPass.material.blending=Ze,this.clock=new Cm}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;const r=this.passes.length;for(let i=0;i<r;i++){const t=this.passes[i];if(!1!==t.enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(i),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),t.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==iL&&(t instanceof iL?n=!0:t instanceof oL&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new zi);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let i=0;i<this.passes.length;i++)this.passes[i].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}}var cL=Object.defineProperty,uL=(e,t,n)=>(((e,t,n)=>{t in e?cL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class hL extends Kk{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;super(),uL(this,"scene"),uL(this,"camera"),uL(this,"overrideMaterial"),uL(this,"clearColor"),uL(this,"clearAlpha"),uL(this,"clearDepth",!1),uL(this,"_oldClearColor",new La),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=r,this.clearAlpha=i,this.clear=!0,this.needsSwap=!1}render(e,t,n){let r,i=e.autoClear;e.autoClear=!1;let o=null;void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(e.getClearColor(this._oldClearColor),r=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(this._oldClearColor,r),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=i}}const dL={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 tex = texture2D( tDiffuse, vUv );","\tgl_FragColor = LinearTosRGB( tex );","}"].join("\n")},fL=()=>{try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(NQ){return!1}},pL=l.forwardRef(((e,t)=>{let{children:n,multisamping:r=8,renderIndex:i=1,disableRender:o,disableGamma:a,disableRenderPass:s,depthBuffer:c=!0,stencilBuffer:u=!1,anisotropy:h=1,encoding:d,type:f,...p}=e;l.useMemo((()=>hv({EffectComposer:lL,RenderPass:hL,ShaderPass:tL})),[]);const m=l.useRef(null);l.useImperativeHandle(t,(()=>m.current),[]);const{scene:g,camera:v,gl:y,size:A,viewport:x}=cy(),[b]=l.useState((()=>{const e=new uo(A.width,A.height,{type:f||yn,format:Sn,depthBuffer:c,stencilBuffer:u,anisotropy:h});return f===hn&&null!=d&&("colorSpace"in e?e.texture.colorSpace=d:e.texture.encoding=d),e.samples=r,e}));l.useEffect((()=>{var e,t;null==(e=m.current)||e.setSize(A.width,A.height),null==(t=m.current)||t.setPixelRatio(x.dpr)}),[y,A,x.dpr]),uy((()=>{var e;o||null==(e=m.current)||e.render()}),i);const _=[];return s||_.push(l.createElement("renderPass",{key:"renderpass",attach:`passes-${_.length}`,args:[g,v]})),a||_.push(l.createElement("shaderPass",{attach:`passes-${_.length}`,key:"gammapass",args:[dL]})),l.Children.forEach(n,(e=>{e&&_.push(l.cloneElement(e,{key:_.length,attach:`passes-${_.length}`}))})),l.createElement("effectComposer",tC({ref:m,args:[y,b]},p),_)}));let mL=function(e){return e.Linear="linear",e.Radial="radial",e}({});function gL(e){let{stops:t,colors:n,size:r=1024,width:i=16,type:o=mL.Linear,innerCircleRadius:a=0,outerCircleRadius:s="auto",...c}=e;const u=cy((e=>e.gl)),h=l.useMemo((()=>{const e=document.createElement("canvas"),l=e.getContext("2d");let c;if(e.width=i,e.height=r,o===mL.Linear)c=l.createLinearGradient(0,0,0,r);else{const t=e.width/2,n=e.height/2,r="auto"!==s?Math.abs(Number(s)):Math.sqrt(t**2+n**2);c=l.createRadialGradient(t,n,Math.abs(a),t,n,r)}const u=new La;let h=t.length;for(;h--;)c.addColorStop(t[h],u.set(n[h]).getStyle());return l.save(),l.fillStyle=c,l.fillRect(0,0,i,r),l.restore(),e}),[t]);return l.createElement("canvasTexture",tC({colorSpace:u.outputColorSpace,args:[h],attach:"map"},c))}function vL(e,t,n,r){const i=class extends Ls{constructor(){let i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=Object.entries(e);super({uniforms:o.reduce(((e,t)=>{let[n,r]=t;return{...e,...ks.clone({[n]:{value:r}})}}),{}),vertexShader:t,fragmentShader:n}),this.key="",o.forEach((e=>{let[t]=e;return Object.defineProperty(this,t,{get:()=>this.uniforms[t].value,set:e=>this.uniforms[t].value=e})})),Object.assign(this,i),r&&r(this)}};return i.key=Fi.generateUUID(),i}const yL=e=>e===Object(e)&&!Array.isArray(e)&&"function"!==typeof e;function AL(e,t){const n=cy((e=>e.gl)),r=py(Hp,yL(e)?Object.values(e):e);(0,l.useLayoutEffect)((()=>{null==t||t(r)}),[t]),(0,l.useEffect)((()=>{if("initTexture"in n){let e=[];Array.isArray(r)?e=r:r instanceof so?e=[r]:yL(r)&&(e=Object.values(r)),e.forEach((e=>{e instanceof so&&n.initTexture(e)}))}}),[n,r]);const i=(0,l.useMemo)((()=>{if(yL(e)){const t={};let n=0;for(const i in e)t[i]=r[n++];return t}return r}),[e,r]);return i}AL.preload=e=>py.preload(Hp,e),AL.clear=e=>py.clear(Hp,e);const xL=e=>{let{children:t,input:n,onLoad:r}=e;const i=AL(n,r);return l.createElement(l.Fragment,null,null==t?void 0:t(i))},bL=(()=>parseInt(ze.replace(/\D+/g,"")))(),_L=vL({color:new La("white"),scale:new zi(1,1),imageBounds:new zi(1,1),resolution:1024,map:null,zoom:1,radius:0,grayscale:0,opacity:1},"\n  varying vec2 vUv;\n  varying vec2 vPos;\n  void main() {\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n    vUv = uv;\n    vPos = position.xy;\n  }\n",`\n  // mostly from https://gist.github.com/statico/df64c5d167362ecf7b34fca0b1459a44\n  varying vec2 vUv;\n  varying vec2 vPos;\n  uniform vec2 scale;\n  uniform vec2 imageBounds;\n  uniform float resolution;\n  uniform vec3 color;\n  uniform sampler2D map;\n  uniform float radius;\n  uniform float zoom;\n  uniform float grayscale;\n  uniform float opacity;\n  const vec3 luma = vec3(.299, 0.587, 0.114);\n  vec4 toGrayscale(vec4 color, float intensity) {\n    return vec4(mix(color.rgb, vec3(dot(color.rgb, luma)), intensity), color.a);\n  }\n  vec2 aspect(vec2 size) {\n    return size / min(size.x, size.y);\n  }\n  \n  const float PI = 3.14159265;\n    \n  // from https://iquilezles.org/articles/distfunctions\n  float udRoundBox( vec2 p, vec2 b, float r ) {\n    return length(max(abs(p)-b+r,0.0))-r;\n  }\n\n  void main() {\n    vec2 s = aspect(scale);\n    vec2 i = aspect(imageBounds);\n    float rs = s.x / s.y;\n    float ri = i.x / i.y;\n    vec2 new = rs < ri ? vec2(i.x * s.y / i.y, s.y) : vec2(s.x, i.y * s.x / i.x);\n    vec2 offset = (rs < ri ? vec2((new.x - s.x) / 2.0, 0.0) : vec2(0.0, (new.y - s.y) / 2.0)) / new;\n    vec2 uv = vUv * s / new + offset;\n    vec2 zUv = (uv - vec2(0.5, 0.5)) / zoom + vec2(0.5, 0.5);\n\n    vec2 res = vec2(scale * resolution);\n    vec2 halfRes = 0.5 * res;\n    float b = udRoundBox(vUv.xy * res - halfRes, halfRes, resolution * radius);    \n\t  vec3 a = mix(vec3(1.0,0.0,0.0), vec3(0.0,0.0,0.0), smoothstep(0.0, 1.0, b));\n    gl_FragColor = toGrayscale(texture2D(map, zUv) * vec4(color, opacity * a), grayscale);\n    \n    #include <tonemapping_fragment>\n    #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n  }\n`),wL=l.forwardRef(((e,t)=>{let{children:n,color:r,segments:i=1,scale:o=1,zoom:a=1,grayscale:s=0,opacity:c=1,radius:u=0,texture:h,toneMapped:d,transparent:f,side:p,...m}=e;hv({ImageMaterial:_L});const g=l.useRef(null),v=cy((e=>e.size)),y=Array.isArray(o)?[o[0],o[1]]:[o,o],A=[h.image.width,h.image.height],x=Math.max(v.width,v.height);return l.useImperativeHandle(t,(()=>g.current),[]),l.useLayoutEffect((()=>{g.current.geometry.parameters&&g.current.material.scale.set(y[0]*g.current.geometry.parameters.width,y[1]*g.current.geometry.parameters.height)}),[]),l.createElement("mesh",tC({ref:g,scale:Array.isArray(o)?[...o,1]:o},m),l.createElement("planeGeometry",{args:[1,1,i,i]}),l.createElement("imageMaterial",{color:r,map:h,zoom:a,grayscale:s,opacity:c,scale:y,imageBounds:A,resolution:x,radius:u,toneMapped:d,transparent:f,side:p,key:_L.key}),n)})),EL=l.forwardRef(((e,t)=>{let{url:n,...r}=e;const i=AL(n);return l.createElement(wL,tC({},r,{texture:i,ref:t}))})),SL=l.forwardRef(((e,t)=>{let{url:n,...r}=e;return l.createElement(wL,tC({},r,{ref:t}))})),CL=l.forwardRef(((e,t)=>{if(e.url)return l.createElement(EL,tC({},e,{ref:t}));if(e.texture)return l.createElement(SL,tC({},e,{ref:t}));throw new Error("<Image /> requires a url or texture")})),ML=l.forwardRef(((e,t)=>{let{threshold:n=15,geometry:r,...i}=e;const o=l.useRef(null);l.useImperativeHandle(t,(()=>o.current),[]);const a=l.useMemo((()=>[0,0,0,1,0,0]),[]),s=l.useRef(),c=l.useRef();return l.useLayoutEffect((()=>{const e=o.current.parent,t=null!==r&&void 0!==r?r:null==e?void 0:e.geometry;if(!t)return;if(s.current===t&&c.current===n)return;s.current=t,c.current=n;const i=new df(t,n).attributes.position.array;o.current.geometry.setPositions(i),o.current.geometry.attributes.instanceStart.needsUpdate=!0,o.current.geometry.attributes.instanceEnd.needsUpdate=!0,o.current.computeLineDistances()})),l.createElement(lO,tC({segments:!0,points:a,ref:o,raycast:()=>null},i))})),TL=vL({screenspace:!1,color:new La("black"),opacity:1,thickness:.05,size:new zi},"#include <common>\n   #include <morphtarget_pars_vertex>\n   #include <skinning_pars_vertex>\n   uniform float thickness;\n   uniform bool screenspace;\n   uniform vec2 size;\n   void main() {\n     #if defined (USE_SKINNING)\n\t     #include <beginnormal_vertex>\n       #include <morphnormal_vertex>\n       #include <skinbase_vertex>\n       #include <skinnormal_vertex>\n       #include <defaultnormal_vertex>\n     #endif\n     #include <begin_vertex>\n\t   #include <morphtarget_vertex>\n\t   #include <skinning_vertex>\n     #include <project_vertex>\n     vec4 tNormal = vec4(normal, 0.0);\n     vec4 tPosition = vec4(transformed, 1.0);\n     #ifdef USE_INSTANCING\n       tNormal = instanceMatrix * tNormal;\n       tPosition = instanceMatrix * tPosition;\n     #endif\n     if (screenspace) {\n       vec3 newPosition = tPosition.xyz + tNormal.xyz * thickness;\n       gl_Position = projectionMatrix * modelViewMatrix * vec4(newPosition, 1.0); \n     } else {\n       vec4 clipPosition = projectionMatrix * modelViewMatrix * tPosition;\n       vec4 clipNormal = projectionMatrix * modelViewMatrix * tNormal;\n       vec2 offset = normalize(clipNormal.xy) * thickness / size * clipPosition.w * 2.0;\n       clipPosition.xy += offset;\n       gl_Position = clipPosition;\n     }\n   }",`uniform vec3 color;\n   uniform float opacity;\n   void main(){\n     gl_FragColor = vec4(color, opacity);\n     #include <tonemapping_fragment>\n     #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n   }`);function IL(e){let{color:t="black",opacity:n=1,transparent:r=!1,screenspace:i=!1,toneMapped:o=!0,polygonOffset:a=!1,polygonOffsetFactor:s=0,renderOrder:c=0,thickness:u=.05,angle:h=Math.PI,...d}=e;const f=l.useRef(),[p]=l.useState((()=>new TL({side:Je}))),{gl:m}=cy(),g=m.getDrawingBufferSize(new zi);l.useMemo((()=>hv({OutlinesMaterial:TL})),[]);const v=l.useRef(0),y=l.useRef();return l.useLayoutEffect((()=>{const e=f.current;if(!e)return;const t=e.parent;if(t&&t.geometry&&(v.current!==h||y.current!==t.geometry)){var n;v.current=h,y.current=t.geometry;let r=null==(n=e.children)?void 0:n[0];r&&(h&&r.geometry.dispose(),e.remove(r)),t.skeleton?(r=new Sh,r.material=p,r.bind(t.skeleton,t.bindMatrix),e.add(r)):t.isInstancedMesh?(r=new Uh(t.geometry,p,t.count),r.instanceMatrix=t.instanceMatrix,e.add(r)):(r=new Is,r.material=p,e.add(r)),r.geometry=h?Fk(t.geometry,h):t.geometry}})),l.useLayoutEffect((()=>{const e=f.current;if(!e)return;const l=e.children[0];l&&(l.renderOrder=c,Ay(l.material,{transparent:r,thickness:u,color:t,opacity:n,size:g,screenspace:i,toneMapped:o,polygonOffset:a,polygonOffsetFactor:s}))})),l.useEffect((()=>()=>{const e=f.current;if(!e)return;const t=e.children[0];t&&(h&&t.geometry.dispose(),e.remove(t))}),[]),l.createElement("group",tC({ref:f},d))}var BL=Object.defineProperty,PL=(e,t,n)=>(((e,t,n)=>{t in e?BL(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);function RL(e,t,n,r,i){let o;if(e=e.subarray||e.slice?e:e.buffer,n=n.subarray||n.slice?n:n.buffer,e=t?e.subarray?e.subarray(t,i&&t+i):e.slice(t,i&&t+i):e,n.set)n.set(e,r);else for(o=0;o<e.length;o++)n[o+r]=e[o];return n}class DL extends hs{constructor(){super(),PL(this,"type","MeshLine"),PL(this,"isMeshLine",!0),PL(this,"positions",[]),PL(this,"previous",[]),PL(this,"next",[]),PL(this,"side",[]),PL(this,"width",[]),PL(this,"indices_array",[]),PL(this,"uvs",[]),PL(this,"counters",[]),PL(this,"widthCallback",null),PL(this,"_attributes"),PL(this,"_points",[]),PL(this,"points"),PL(this,"matrixWorld",new qo),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,t){if(e=function(e){return e instanceof Float32Array?e:e instanceof hs?e.getAttribute("position").array:e.map((e=>{const t=Array.isArray(e);return e instanceof vo?[e.x,e.y,e.z]:e instanceof zi?[e.x,e.y,0]:t&&3===e.length?[e[0],e[1],e[2]]:t&&2===e.length?[e[0],e[1],0]:e})).flat()}(e),this._points=e,this.widthCallback=null!=t?t:null,this.positions=[],this.counters=[],e.length&&e[0]instanceof vo)for(let n=0;n<e.length;n++){const t=e[n],r=n/(e.length-1);this.positions.push(t.x,t.y,t.z),this.positions.push(t.x,t.y,t.z),this.counters.push(r),this.counters.push(r)}else for(let n=0;n<e.length;n+=3){const t=n/(e.length-1);this.positions.push(e[n],e[n+1],e[n+2]),this.positions.push(e[n],e[n+1],e[n+2]),this.counters.push(t),this.counters.push(t)}this.process()}compareV3(e,t){const n=6*e,r=6*t;return this.positions[n]===this.positions[r]&&this.positions[n+1]===this.positions[r+1]&&this.positions[n+2]===this.positions[r+2]}copyV3(e){const t=6*e;return[this.positions[t],this.positions[t+1],this.positions[t+2]]}process(){const e=this.positions.length/6;let t,n;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[],n=this.compareV3(0,e-1)?this.copyV3(e-2):this.copyV3(0),this.previous.push(n[0],n[1],n[2]),this.previous.push(n[0],n[1],n[2]);for(let r=0;r<e;r++){if(this.side.push(1),this.side.push(-1),t=this.widthCallback?this.widthCallback(r/(e-1)):1,this.width.push(t),this.width.push(t),this.uvs.push(r/(e-1),0),this.uvs.push(r/(e-1),1),r<e-1){n=this.copyV3(r),this.previous.push(n[0],n[1],n[2]),this.previous.push(n[0],n[1],n[2]);const e=2*r;this.indices_array.push(e,e+1,e+2),this.indices_array.push(e+2,e+1,e+3)}r>0&&(n=this.copyV3(r),this.next.push(n[0],n[1],n[2]),this.next.push(n[0],n[1],n[2]))}n=this.compareV3(e-1,0)?this.copyV3(1):this.copyV3(e-1),this.next.push(n[0],n[1],n[2]),this.next.push(n[0],n[1],n[2]),this._attributes&&this._attributes.position.count===this.counters.length?(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0):this._attributes={position:new Xa(new Float32Array(this.positions),3),previous:new Xa(new Float32Array(this.previous),3),next:new Xa(new Float32Array(this.next),3),side:new Xa(new Float32Array(this.side),1),width:new Xa(new Float32Array(this.width),1),uv:new Xa(new Float32Array(this.uvs),2),index:new Xa(new Uint16Array(this.indices_array),1),counters:new Xa(new Float32Array(this.counters),1)},this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance(e){let{x:t,y:n,z:r}=e;const i=this._attributes.position.array,o=this._attributes.previous.array,a=this._attributes.next.array,s=i.length;RL(i,0,o,0,s),RL(i,6,i,0,s-6),i[s-6]=t,i[s-5]=n,i[s-4]=r,i[s-3]=t,i[s-2]=n,i[s-1]=r,RL(i,6,a,0,s-6),a[s-6]=t,a[s-5]=n,a[s-4]=r,a[s-3]=t,a[s-2]=n,a[s-1]=r,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const OL=`\n  #include <fog_pars_fragment>\n  #include <logdepthbuf_pars_fragment>\n  #include <clipping_planes_pars_fragment>\n  \n  uniform sampler2D map;\n  uniform sampler2D alphaMap;\n  uniform float useGradient;\n  uniform float useMap;\n  uniform float useAlphaMap;\n  uniform float useDash;\n  uniform float dashArray;\n  uniform float dashOffset;\n  uniform float dashRatio;\n  uniform float visibility;\n  uniform float alphaTest;\n  uniform vec2 repeat;\n  uniform vec3 gradient[2];\n  \n  varying vec2 vUV;\n  varying vec4 vColor;\n  varying float vCounters;\n  \n  void main() {\n    #include <logdepthbuf_fragment>\n    vec4 diffuseColor = vColor;\n    if (useGradient == 1.) diffuseColor = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);\n    if (useMap == 1.) diffuseColor *= texture2D(map, vUV * repeat);\n    if (useAlphaMap == 1.) diffuseColor.a *= texture2D(alphaMap, vUV * repeat).a;\n    if (diffuseColor.a < alphaTest) discard;\n    if (useDash == 1.) diffuseColor.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));\n    diffuseColor.a *= step(vCounters, visibility);\n    #include <clipping_planes_fragment>\n    gl_FragColor = diffuseColor;     \n    #include <fog_fragment>\n    #include <tonemapping_fragment>\n    #include <${(()=>parseInt(ze.replace(/\D+/g,"")))()>=154?"colorspace_fragment":"encodings_fragment"}>\n  }\n`;class kL extends Ls{constructor(e){super({uniforms:{...rl.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new La(16777215)},gradient:{value:[new La(16711680),new La(65280)]},opacity:{value:1},resolution:{value:new zi(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new zi(1,1)}},vertexShader:"\n  #include <common>\n  #include <logdepthbuf_pars_vertex>\n  #include <fog_pars_vertex>\n  #include <clipping_planes_pars_vertex>\n\n  attribute vec3 previous;\n  attribute vec3 next;\n  attribute float side;\n  attribute float width;\n  attribute float counters;\n  \n  uniform vec2 resolution;\n  uniform float lineWidth;\n  uniform vec3 color;\n  uniform float opacity;\n  uniform float sizeAttenuation;\n  \n  varying vec2 vUV;\n  varying vec4 vColor;\n  varying float vCounters;\n  \n  vec2 fix(vec4 i, float aspect) {\n    vec2 res = i.xy / i.w;\n    res.x *= aspect;\n    return res;\n  }\n  \n  void main() {\n    float aspect = resolution.x / resolution.y;\n    vColor = vec4(color, opacity);\n    vUV = uv;\n    vCounters = counters;\n  \n    mat4 m = projectionMatrix * modelViewMatrix;\n    vec4 finalPosition = m * vec4(position, 1.0) * aspect;\n    vec4 prevPos = m * vec4(previous, 1.0);\n    vec4 nextPos = m * vec4(next, 1.0);\n  \n    vec2 currentP = fix(finalPosition, aspect);\n    vec2 prevP = fix(prevPos, aspect);\n    vec2 nextP = fix(nextPos, aspect);\n  \n    float w = lineWidth * width;\n  \n    vec2 dir;\n    if (nextP == currentP) dir = normalize(currentP - prevP);\n    else if (prevP == currentP) dir = normalize(nextP - currentP);\n    else {\n      vec2 dir1 = normalize(currentP - prevP);\n      vec2 dir2 = normalize(nextP - currentP);\n      dir = normalize(dir1 + dir2);\n  \n      vec2 perp = vec2(-dir1.y, dir1.x);\n      vec2 miter = vec2(-dir.y, dir.x);\n      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);\n    }\n  \n    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;\n    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);\n    normal.xy *= .5 * w;\n    //normal *= projectionMatrix;\n    if (sizeAttenuation == 0.) {\n      normal.xy *= finalPosition.w;\n      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;\n    }\n  \n    finalPosition.xy += normal.xy * side;\n    gl_Position = finalPosition;\n    #include <logdepthbuf_vertex>\n    #include <fog_vertex>\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    #include <clipping_planes_vertex>\n    #include <fog_vertex>\n  }\n",fragmentShader:OL}),PL(this,"lineWidth"),PL(this,"map"),PL(this,"useMap"),PL(this,"alphaMap"),PL(this,"useAlphaMap"),PL(this,"color"),PL(this,"gradient"),PL(this,"resolution"),PL(this,"sizeAttenuation"),PL(this,"dashArray"),PL(this,"dashOffset"),PL(this,"dashRatio"),PL(this,"useDash"),PL(this,"useGradient"),PL(this,"visibility"),PL(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(e){this.uniforms.lineWidth.value=e}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(e){this.uniforms.map.value=e}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(e){this.uniforms.useMap.value=e}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(e){this.uniforms.alphaMap.value=e}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(e){this.uniforms.useAlphaMap.value=e}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(e){this.uniforms.color.value=e}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(e){this.uniforms.gradient.value=e}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(e){this.uniforms.opacity.value=e}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(e){this.uniforms.resolution.value.copy(e)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(e){this.uniforms.sizeAttenuation.value=e}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(e){this.uniforms.dashArray.value=e,this.useDash=0!==e?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(e){this.uniforms.dashOffset.value=e}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(e){this.uniforms.dashRatio.value=e}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(e){this.uniforms.useDash.value=e}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(e){this.uniforms.useGradient.value=e}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(e){this.uniforms.visibility.value=e}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(e){this.uniforms.alphaTest.value=e}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(e){this.uniforms.repeat.value.copy(e)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const LL={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},FL=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return e.set(e.subarray(t)),e.fill(-1/0,-t),e};function zL(e,t){const{length:n,local:r,decay:i,interval:o,stride:a}={...LL,...t},s=l.useRef(),[c]=l.useState((()=>new vo));l.useLayoutEffect((()=>{e&&(s.current=Float32Array.from({length:10*n*3},((t,n)=>e.position.getComponent(n%3))))}),[n,e]);const u=l.useRef(new vo),h=l.useRef(0);return uy((()=>{if(e&&s.current){if(0===h.current){let t;r?t=e.position:(e.getWorldPosition(c),t=c);const n=1*i;for(let e=0;e<n;e++)t.distanceTo(u.current)<a||(FL(s.current,3),s.current.set(t.toArray(),s.current.length-3));u.current.copy(t)}h.current++,h.current=h.current%o}})),s}const UL=l.forwardRef(((e,t)=>{const{children:n}=e,{width:r,length:i,decay:o,local:a,stride:s,interval:c}={...LL,...e},{color:u="hotpink",attenuation:h,target:d}=e,f=cy((e=>e.size)),p=cy((e=>e.scene)),m=l.useRef(null),[g,v]=l.useState(null),y=zL(g,{length:i,decay:o,local:a,stride:s,interval:c});l.useEffect((()=>{const e=(null==d?void 0:d.current)||m.current.children.find((e=>e instanceof xa));e&&v(e)}),[y,d]);const A=l.useMemo((()=>new DL),[]),x=l.useMemo((()=>{var e;const t=new kL({lineWidth:.1*r,color:u,sizeAttenuation:1,resolution:new zi(f.width,f.height)});let i;if(n)if(Array.isArray(n))i=n.find((e=>{const t=e;return"string"===typeof t.type&&"meshLineMaterial"===t.type}));else{const e=n;"string"===typeof e.type&&"meshLineMaterial"===e.type&&(i=e)}return"object"===typeof(null==(e=i)?void 0:e.props)&&t.setValues(i.props),t}),[r,u,f,n]);return l.useEffect((()=>{x.uniforms.resolution.value.set(f.width,f.height)}),[f]),uy((()=>{y.current&&A.setPoints(y.current,h)})),l.createElement("group",null,Cy(l.createElement("mesh",{ref:t,geometry:A,material:x}),p),l.createElement("group",{ref:m},n))})),NL=new Pa,jL=new vo;class GL{constructor(e){let t=e.geometry;t.index&&(console.warn("THREE.MeshSurfaceSampler: Converting geometry to non-indexed BufferGeometry."),t=t.toNonIndexed()),this.geometry=t,this.randomFunction=Math.random,this.positionAttribute=this.geometry.getAttribute("position"),this.colorAttribute=this.geometry.getAttribute("color"),this.weightAttribute=null,this.distribution=null}setWeightAttribute(e){return this.weightAttribute=e?this.geometry.getAttribute(e):null,this}build(){const e=this.positionAttribute,t=this.weightAttribute,n=new Float32Array(e.count/3);for(let i=0;i<e.count;i+=3){let r=1;t&&(r=t.getX(i)+t.getX(i+1)+t.getX(i+2)),NL.a.fromBufferAttribute(e,i),NL.b.fromBufferAttribute(e,i+1),NL.c.fromBufferAttribute(e,i+2),r*=NL.getArea(),n[i/3]=r}this.distribution=new Float32Array(e.count/3);let r=0;for(let i=0;i<n.length;i++)r+=n[i],this.distribution[i]=r;return this}setRandomGenerator(e){return this.randomFunction=e,this}sample(e,t,n){const r=this.sampleFaceIndex();return this.sampleFace(r,e,t,n)}sampleFaceIndex(){const e=this.distribution[this.distribution.length-1];return this.binarySearch(this.randomFunction()*e)}binarySearch(e){const t=this.distribution;let n=0,r=t.length-1,i=-1;for(;n<=r;){const o=Math.ceil((n+r)/2);if(0===o||t[o-1]<=e&&t[o]>e){i=o;break}e<t[o]?r=o-1:n=o+1}return i}sampleFace(e,t,n,r){let i=this.randomFunction(),o=this.randomFunction();return i+o>1&&(i=1-i,o=1-o),NL.a.fromBufferAttribute(this.positionAttribute,3*e),NL.b.fromBufferAttribute(this.positionAttribute,3*e+1),NL.c.fromBufferAttribute(this.positionAttribute,3*e+2),t.set(0,0,0).addScaledVector(NL.a,i).addScaledVector(NL.b,o).addScaledVector(NL.c,1-(i+o)),void 0!==n&&NL.getNormal(n),void 0!==r&&void 0!==this.colorAttribute&&(NL.a.fromBufferAttribute(this.colorAttribute,3*e),NL.b.fromBufferAttribute(this.colorAttribute,3*e+1),NL.c.fromBufferAttribute(this.colorAttribute,3*e+2),jL.set(0,0,0).addScaledVector(NL.a,i).addScaledVector(NL.b,o).addScaledVector(NL.c,1-(i+o)),r.r=jL.x,r.g=jL.y,r.b=jL.z),this}}function QL(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;const[o,a]=l.useState((()=>{const e=Array.from({length:t},(()=>[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])).flat();return new Ph(Float32Array.from(e),16)}));return l.useLayoutEffect((()=>{if("undefined"===typeof e.current)return;const s=new GL(e.current);r&&s.setWeightAttribute(r),s.build();const l=new vo,c=new vo,u=new La,h=new xa;e.current.updateMatrixWorld(!0);for(let r=0;r<t;r++)s.sample(l,c,u),"function"===typeof n?n({dummy:h,sampledMesh:e.current,position:l,normal:c,color:u},r):h.position.copy(l),h.updateMatrix(),null!=i&&i.current&&i.current.setMatrixAt(r,h.matrix),h.matrix.toArray(o.array,16*r);null!=i&&i.current&&(i.current.instanceMatrix.needsUpdate=!0),o.needsUpdate=!0,a(new Ph(o.array,o.itemSize).copy(o))}),[e,i,r,t,n]),o}function HL(e){let{children:t,weight:n,transform:r,instances:i,mesh:o,count:a=16,...s}=e;const c=l.useRef(null),u=l.useRef(null),h=l.useRef(null);return l.useLayoutEffect((()=>{var e,t;u.current=null!==(e=null==i?void 0:i.current)&&void 0!==e?e:c.current.children.find((e=>e.hasOwnProperty("instanceMatrix"))),h.current=null!==(t=null==o?void 0:o.current)&&void 0!==t?t:c.current.children.find((e=>"Mesh"===e.type))}),[t,null==o?void 0:o.current,null==i?void 0:i.current]),QL(h,a,r,n,u),l.createElement("group",tC({ref:c},s),t)}const VL=e=>{let{compute:t,name:n,...r}=e;const[i]=l.useState((()=>new Xa(new Float32Array(0),1))),o=l.useRef(null);return l.useLayoutEffect((()=>{if(o.current){var e;const n=null!==(e=o.current.parent)&&void 0!==e?e:o.current.__r3f.parent,r=t(n);o.current.copy(r)}}),[t]),l.createElement("primitive",tC({ref:o,object:i,attach:`attributes-${n}`},r))};function WL(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new vo,i=new go,o=new vo,a=new qo,s=new qo,l=new qo;n.preserveMatrix=void 0===n.preserveMatrix||n.preserveMatrix,n.preservePosition=void 0===n.preservePosition||n.preservePosition,n.preserveHipPosition=void 0!==n.preserveHipPosition&&n.preserveHipPosition,n.useTargetMatrix=void 0!==n.useTargetMatrix&&n.useTargetMatrix,n.hip=void 0!==n.hip?n.hip:"hip",n.names=n.names||{};const c=t.isObject3D?t.skeleton.bones:XL(t),u=e.isObject3D?e.skeleton.bones:XL(e);let h,d,f,p,m;if(e.isObject3D?e.skeleton.pose():(n.useTargetMatrix=!0,n.preserveMatrix=!1),n.preservePosition){m=[];for(let e=0;e<u.length;e++)m.push(u[e].position.clone())}if(n.preserveMatrix){e.updateMatrixWorld(),e.matrixWorld.identity();for(let t=0;t<e.children.length;++t)e.children[t].updateMatrixWorld(!0)}if(n.offsets){h=[];for(let e=0;e<u.length;++e)d=u[e],f=n.names[d.name]||d.name,n.offsets[f]&&(d.matrix.multiply(n.offsets[f]),d.matrix.decompose(d.position,d.quaternion,d.scale),d.updateMatrixWorld()),h.push(d.matrixWorld.clone())}for(let g=0;g<u.length;++g){if(d=u[g],f=n.names[d.name]||d.name,p=qL(f,c),l.copy(d.matrixWorld),p){if(p.updateMatrixWorld(),n.useTargetMatrix?s.copy(p.matrixWorld):(s.copy(e.matrixWorld).invert(),s.multiply(p.matrixWorld)),o.setFromMatrixScale(s),s.scale(o.set(1/o.x,1/o.y,1/o.z)),l.makeRotationFromQuaternion(i.setFromRotationMatrix(s)),e.isObject3D){const t=u.indexOf(d),n=h?h[t]:a.copy(e.skeleton.boneInverses[t]).invert();l.multiply(n)}l.copyPosition(s)}d.parent&&d.parent.isBone?(d.matrix.copy(d.parent.matrixWorld).invert(),d.matrix.multiply(l)):d.matrix.copy(l),n.preserveHipPosition&&f===n.hip&&d.matrix.setPosition(r.set(0,d.position.y,0)),d.matrix.decompose(d.position,d.quaternion,d.scale),d.updateMatrixWorld()}if(n.preservePosition)for(let g=0;g<u.length;++g)d=u[g],f=n.names[d.name]||d.name,f!==n.hip&&d.position.copy(m[g]);n.preserveMatrix&&e.updateMatrixWorld(!0)}function qL(e,t){for(let n=0,r=XL(t);n<r.length;n++)if(e===r[n].name)return r[n]}function XL(e){return Array.isArray(e)?e:e.bones}function YL(e,t,n){n(e,t);for(let r=0;r<e.children.length;r++)YL(e.children[r],t.children[r],n)}const JL={retarget:WL,retargetClip:function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};r.useFirstFramePosition=void 0!==r.useFirstFramePosition&&r.useFirstFramePosition,r.fps=void 0!==r.fps?r.fps:30,r.names=r.names||[],t.isObject3D||(t=function(e){const t=new xg(e.bones[0]);return t.skeleton=e,t}(t));const i=Math.round(n.duration*(r.fps/1e3)*1e3),o=1/r.fps,a=[],s=new Km(t),l=XL(e.skeleton),c=[];let u,h,d,f,p;s.clipAction(n).play(),s.update(0),t.updateMatrixWorld();for(let m=0;m<i;++m){const n=m*o;WL(e,t,r);for(let e=0;e<l.length;++e)p=r.names[l[e].name]||l[e].name,d=qL(p,t.skeleton),d&&(h=l[e],f=c[e]=c[e]||{bone:h},r.hip===p&&(f.pos||(f.pos={times:new Float32Array(i),values:new Float32Array(3*i)}),r.useFirstFramePosition&&(0===m&&(u=h.position.clone()),h.position.sub(u)),f.pos.times[m]=n,h.position.toArray(f.pos.values,3*m)),f.quat||(f.quat={times:new Float32Array(i),values:new Float32Array(4*i)}),f.quat.times[m]=n,h.quaternion.toArray(f.quat.values,4*m));s.update(o),t.updateMatrixWorld()}for(let m=0;m<c.length;++m)f=c[m],f&&(f.pos&&a.push(new Ip(".bones["+f.bone.name+"].position",f.pos.times,f.pos.values)),a.push(new Mp(".bones["+f.bone.name+"].quaternion",f.quat.times,f.quat.values)));return s.uncacheAction(n),new Bp(n.name,-1,a)},clone:function(e){const t=new Map,n=new Map,r=e.clone();return YL(e,r,(function(e,r){t.set(r,e),n.set(e,r)})),r.traverse((function(e){if(!e.isSkinnedMesh)return;const r=e,i=t.get(e),o=i.skeleton.bones;r.skeleton=i.skeleton.clone(),r.bindMatrix.copy(i.bindMatrix),r.skeleton.bones=o.map((function(e){return n.get(e)})),r.bind(r.skeleton,r.bindMatrix)})),r}};const KL=l.forwardRef(((e,t)=>{let{isChild:n=!1,object:r,children:i,deep:o,castShadow:a,receiveShadow:s,inject:c,keys:u,...h}=e;const d={keys:u,deep:o,inject:c,castShadow:a,receiveShadow:s};if(r=l.useMemo((()=>{if(!1===n&&!Array.isArray(r)){let e=!1;if(r.traverse((t=>{t.isSkinnedMesh&&(e=!0)})),e)return JL.clone(r)}return r}),[r,n]),Array.isArray(r))return l.createElement("group",tC({},h,{ref:t}),r.map((e=>l.createElement(KL,tC({key:e.uuid,object:e},d)))),i);const{children:f,...p}=function(e,t){let{keys:n=["near","far","color","distance","decay","penumbra","angle","intensity","skeleton","visible","castShadow","receiveShadow","morphTargetDictionary","morphTargetInfluences","name","geometry","material","position","rotation","scale","up","userData","bindMode","bindMatrix","bindMatrixInverse","skeleton"],deep:r,inject:i,castShadow:o,receiveShadow:a}=t,s={};for(const l of n)s[l]=e[l];return r&&(s.geometry&&"materialsOnly"!==r&&(s.geometry=s.geometry.clone()),s.material&&"geometriesOnly"!==r&&(s.material=s.material.clone())),i&&(s="function"===typeof i?{...s,children:i(e)}:l.isValidElement(i)?{...s,children:i}:{...s,...i}),e instanceof Is&&(o&&(s.castShadow=!0),a&&(s.receiveShadow=!0)),s}(r,d),m=r.type[0].toLowerCase()+r.type.slice(1);return l.createElement(m,tC({},p,h,{ref:t}),r.children.map((e=>"Bone"===e.type?l.createElement("primitive",tC({key:e.uuid,object:e},d)):l.createElement(KL,tC({key:e.uuid,object:e},d,{isChild:!0})))),i,f)}));class ZL extends Is{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1e4;const o=new hs;super(o,t),this.isMarchingCubes=!0;const a=this,s=new Float32Array(36),l=new Float32Array(36),c=new Float32Array(36);function u(e,t,n){return e+(t-e)*n}function h(e,t,n,r,i,o,h,d,f,p){const m=(n-h)/(d-h),g=a.normal_cache;s[t+0]=r+m*a.delta,s[t+1]=i,s[t+2]=o,l[t+0]=u(g[e+0],g[e+3],m),l[t+1]=u(g[e+1],g[e+4],m),l[t+2]=u(g[e+2],g[e+5],m),c[t+0]=u(a.palette[3*f+0],a.palette[3*p+0],m),c[t+1]=u(a.palette[3*f+1],a.palette[3*p+1],m),c[t+2]=u(a.palette[3*f+2],a.palette[3*p+2],m)}function d(e,t,n,r,i,o,h,d,f,p){const m=(n-h)/(d-h),g=a.normal_cache;s[t+0]=r,s[t+1]=i+m*a.delta,s[t+2]=o;const v=e+3*a.yd;l[t+0]=u(g[e+0],g[v+0],m),l[t+1]=u(g[e+1],g[v+1],m),l[t+2]=u(g[e+2],g[v+2],m),c[t+0]=u(a.palette[3*f+0],a.palette[3*p+0],m),c[t+1]=u(a.palette[3*f+1],a.palette[3*p+1],m),c[t+2]=u(a.palette[3*f+2],a.palette[3*p+2],m)}function f(e,t,n,r,i,o,h,d,f,p){const m=(n-h)/(d-h),g=a.normal_cache;s[t+0]=r,s[t+1]=i,s[t+2]=o+m*a.delta;const v=e+3*a.zd;l[t+0]=u(g[e+0],g[v+0],m),l[t+1]=u(g[e+1],g[v+1],m),l[t+2]=u(g[e+2],g[v+2],m),c[t+0]=u(a.palette[3*f+0],a.palette[3*p+0],m),c[t+1]=u(a.palette[3*f+1],a.palette[3*p+1],m),c[t+2]=u(a.palette[3*f+2],a.palette[3*p+2],m)}function p(e){const t=3*e;0===a.normal_cache[t]&&(a.normal_cache[t+0]=a.field[e-1]-a.field[e+1],a.normal_cache[t+1]=a.field[e-a.yd]-a.field[e+a.yd],a.normal_cache[t+2]=a.field[e-a.zd]-a.field[e+a.zd])}function m(e,t,n,r,i){const o=r+1,u=r+a.yd,m=r+a.zd,v=o+a.yd,y=o+a.zd,A=r+a.yd+a.zd,x=o+a.yd+a.zd;let b=0;const _=a.field[r],w=a.field[o],E=a.field[u],S=a.field[v],C=a.field[m],M=a.field[y],T=a.field[A],I=a.field[x];_<i&&(b|=1),w<i&&(b|=2),E<i&&(b|=8),S<i&&(b|=4),C<i&&(b|=16),M<i&&(b|=32),T<i&&(b|=128),I<i&&(b|=64);const B=$L[b];if(0===B)return 0;const P=a.delta,R=e+P,D=t+P,O=n+P;1&B&&(p(r),p(o),h(3*r,0,i,e,t,n,_,w,r,o)),2&B&&(p(o),p(v),d(3*o,3,i,R,t,n,w,S,o,v)),4&B&&(p(u),p(v),h(3*u,6,i,e,D,n,E,S,u,v)),8&B&&(p(r),p(u),d(3*r,9,i,e,t,n,_,E,r,u)),16&B&&(p(m),p(y),h(3*m,12,i,e,t,O,C,M,m,y)),32&B&&(p(y),p(x),d(3*y,15,i,R,t,O,M,I,y,x)),64&B&&(p(A),p(x),h(3*A,18,i,e,D,O,T,I,A,x)),128&B&&(p(m),p(A),d(3*m,21,i,e,t,O,C,T,m,A)),256&B&&(p(r),p(m),f(3*r,24,i,e,t,n,_,C,r,m)),512&B&&(p(o),p(y),f(3*o,27,i,R,t,n,w,M,o,y)),1024&B&&(p(v),p(x),f(3*v,30,i,R,D,n,S,I,v,x)),2048&B&&(p(u),p(A),f(3*u,33,i,e,D,n,E,T,u,A)),b<<=4;let k,L,F,z=0,U=0;for(;-1!=eF[b+U];)k=b+U,L=k+1,F=k+2,g(s,l,c,3*eF[k],3*eF[L],3*eF[F]),U+=3,z++;return z}function g(e,t,n,r,i,o){const s=3*a.count;if(a.positionArray[s+0]=e[r],a.positionArray[s+1]=e[r+1],a.positionArray[s+2]=e[r+2],a.positionArray[s+3]=e[i],a.positionArray[s+4]=e[i+1],a.positionArray[s+5]=e[i+2],a.positionArray[s+6]=e[o],a.positionArray[s+7]=e[o+1],a.positionArray[s+8]=e[o+2],!0===a.material.flatShading){const e=(t[r+0]+t[i+0]+t[o+0])/3,n=(t[r+1]+t[i+1]+t[o+1])/3,l=(t[r+2]+t[i+2]+t[o+2])/3;a.normalArray[s+0]=e,a.normalArray[s+1]=n,a.normalArray[s+2]=l,a.normalArray[s+3]=e,a.normalArray[s+4]=n,a.normalArray[s+5]=l,a.normalArray[s+6]=e,a.normalArray[s+7]=n,a.normalArray[s+8]=l}else a.normalArray[s+0]=t[r+0],a.normalArray[s+1]=t[r+1],a.normalArray[s+2]=t[r+2],a.normalArray[s+3]=t[i+0],a.normalArray[s+4]=t[i+1],a.normalArray[s+5]=t[i+2],a.normalArray[s+6]=t[o+0],a.normalArray[s+7]=t[o+1],a.normalArray[s+8]=t[o+2];if(a.enableUvs){const t=2*a.count;a.uvArray[t+0]=e[r+0],a.uvArray[t+1]=e[r+2],a.uvArray[t+2]=e[i+0],a.uvArray[t+3]=e[i+2],a.uvArray[t+4]=e[o+0],a.uvArray[t+5]=e[o+2]}a.enableColors&&(a.colorArray[s+0]=n[r+0],a.colorArray[s+1]=n[r+1],a.colorArray[s+2]=n[r+2],a.colorArray[s+3]=n[i+0],a.colorArray[s+4]=n[i+1],a.colorArray[s+5]=n[i+2],a.colorArray[s+6]=n[o+0],a.colorArray[s+7]=n[o+1],a.colorArray[s+8]=n[o+2]),a.count+=3}this.enableUvs=n,this.enableColors=r,this.init=function(e){this.resolution=e,this.isolation=80,this.size=e,this.size2=this.size*this.size,this.size3=this.size2*this.size,this.halfsize=this.size/2,this.delta=2/this.size,this.yd=this.size,this.zd=this.size2,this.field=new Float32Array(this.size3),this.normal_cache=new Float32Array(3*this.size3),this.palette=new Float32Array(3*this.size3),this.count=0;const t=3*i;this.positionArray=new Float32Array(3*t);const n=new Xa(this.positionArray,3);n.setUsage(pi),o.setAttribute("position",n),this.normalArray=new Float32Array(3*t);const r=new Xa(this.normalArray,3);if(r.setUsage(pi),o.setAttribute("normal",r),this.enableUvs){this.uvArray=new Float32Array(2*t);const e=new Xa(this.uvArray,2);e.setUsage(pi),o.setAttribute("uv",e)}if(this.enableColors){this.colorArray=new Float32Array(3*t);const e=new Xa(this.colorArray,3);e.setUsage(pi),o.setAttribute("color",e)}o.boundingSphere=new zo(new vo,1)},this.addBall=function(e,t,n,r,i,o){const a=Math.sign(r);r=Math.abs(r);const s=!(void 0===o||null===o);let l=new La(e,t,n);if(s)try{l=o instanceof La?o:Array.isArray(o)?new La(Math.min(Math.abs(o[0]),1),Math.min(Math.abs(o[1]),1),Math.min(Math.abs(o[2]),1)):new La(o)}catch(B){l=new La(e,t,n)}const c=this.size*Math.sqrt(r/i),u=n*this.size,h=t*this.size,d=e*this.size;let f=Math.floor(u-c);f<1&&(f=1);let p=Math.floor(u+c);p>this.size-1&&(p=this.size-1);let m=Math.floor(h-c);m<1&&(m=1);let g=Math.floor(h+c);g>this.size-1&&(g=this.size-1);let v=Math.floor(d-c);v<1&&(v=1);let y,A,x,b,_,w,E,S,C,M,T,I=Math.floor(d+c);for(I>this.size-1&&(I=this.size-1),x=f;x<p;x++)for(_=this.size2*x,S=x/this.size-n,C=S*S,A=m;A<g;A++)for(b=_+this.size*A,E=A/this.size-t,M=E*E,y=v;y<I;y++)if(w=y/this.size-e,T=r/(1e-6+w*w+M+C)-i,T>0){this.field[b+y]+=T*a;const e=Math.sqrt((y-d)*(y-d)+(A-h)*(A-h)+(x-u)*(x-u))/c,t=1-e*e*e*(e*(6*e-15)+10);this.palette[3*(b+y)+0]+=l.r*t,this.palette[3*(b+y)+1]+=l.g*t,this.palette[3*(b+y)+2]+=l.b*t}},this.addPlaneX=function(e,t){const n=this.size,r=this.yd,i=this.zd,o=this.field;let a,s,l,c,u,h,d,f=n*Math.sqrt(e/t);for(f>n&&(f=n),a=0;a<f;a++)if(h=a/n,c=h*h,u=e/(1e-4+c)-t,u>0)for(s=0;s<n;s++)for(d=a+s*r,l=0;l<n;l++)o[i*l+d]+=u},this.addPlaneY=function(e,t){const n=this.size,r=this.yd,i=this.zd,o=this.field;let a,s,l,c,u,h,d,f,p=n*Math.sqrt(e/t);for(p>n&&(p=n),s=0;s<p;s++)if(h=s/n,c=h*h,u=e/(1e-4+c)-t,u>0)for(d=s*r,a=0;a<n;a++)for(f=d+a,l=0;l<n;l++)o[i*l+f]+=u},this.addPlaneZ=function(e,t){const n=this.size,r=this.yd,i=this.zd,o=this.field;let a,s,l,c,u,h,d,f,p=n*Math.sqrt(e/t);for(p>n&&(p=n),l=0;l<p;l++)if(h=l/n,c=h*h,u=e/(1e-4+c)-t,u>0)for(d=i*l,s=0;s<n;s++)for(f=d+s*r,a=0;a<n;a++)o[f+a]+=u},this.setCell=function(e,t,n,r){const i=this.size2*n+this.size*t+e;this.field[i]=r},this.getCell=function(e,t,n){const r=this.size2*n+this.size*t+e;return this.field[r]},this.blur=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=this.field,n=t.slice(),r=this.size,i=this.size2;for(let o=0;o<r;o++)for(let a=0;a<r;a++)for(let s=0;s<r;s++){const l=i*s+r*a+o;let c=n[l],u=1;for(let t=-1;t<=1;t+=2){const l=t+o;if(!(l<0||l>=r))for(let t=-1;t<=1;t+=2){const o=t+a;if(!(o<0||o>=r))for(let t=-1;t<=1;t+=2){const a=t+s;if(a<0||a>=r)continue;u++,c+=e*(n[i*a+r*o+l]-c)/u}}}t[l]=c}},this.reset=function(){for(let e=0;e<this.size3;e++)this.normal_cache[3*e]=0,this.field[e]=0,this.palette[3*e]=this.palette[3*e+1]=this.palette[3*e+2]=0},this.update=function(){this.count=0;const e=this.size-2;for(let t=1;t<e;t++){const n=this.size2*t,r=(t-this.halfsize)/this.halfsize;for(let t=1;t<e;t++){const i=n+this.size*t,o=(t-this.halfsize)/this.halfsize;for(let t=1;t<e;t++){m((t-this.halfsize)/this.halfsize,o,r,i+t,this.isolation)}}}this.geometry.setDrawRange(0,this.count),o.getAttribute("position").needsUpdate=!0,o.getAttribute("normal").needsUpdate=!0,this.enableUvs&&(o.getAttribute("uv").needsUpdate=!0),this.enableColors&&(o.getAttribute("color").needsUpdate=!0),this.count/3>i&&console.warn("THREE.MarchingCubes: Geometry buffers too small for rendering. Please create an instance with a higher poly count.")},this.init(e)}}const $L=new Int32Array([0,265,515,778,1030,1295,1541,1804,2060,2309,2575,2822,3082,3331,3593,3840,400,153,915,666,1430,1183,1941,1692,2460,2197,2975,2710,3482,3219,3993,3728,560,825,51,314,1590,1855,1077,1340,2620,2869,2111,2358,3642,3891,3129,3376,928,681,419,170,1958,1711,1445,1196,2988,2725,2479,2214,4010,3747,3497,3232,1120,1385,1635,1898,102,367,613,876,3180,3429,3695,3942,2154,2403,2665,2912,1520,1273,2035,1786,502,255,1013,764,3580,3317,4095,3830,2554,2291,3065,2800,1616,1881,1107,1370,598,863,85,348,3676,3925,3167,3414,2650,2899,2137,2384,1984,1737,1475,1226,966,719,453,204,4044,3781,3535,3270,3018,2755,2505,2240,2240,2505,2755,3018,3270,3535,3781,4044,204,453,719,966,1226,1475,1737,1984,2384,2137,2899,2650,3414,3167,3925,3676,348,85,863,598,1370,1107,1881,1616,2800,3065,2291,2554,3830,4095,3317,3580,764,1013,255,502,1786,2035,1273,1520,2912,2665,2403,2154,3942,3695,3429,3180,876,613,367,102,1898,1635,1385,1120,3232,3497,3747,4010,2214,2479,2725,2988,1196,1445,1711,1958,170,419,681,928,3376,3129,3891,3642,2358,2111,2869,2620,1340,1077,1855,1590,314,51,825,560,3728,3993,3219,3482,2710,2975,2197,2460,1692,1941,1183,1430,666,915,153,400,3840,3593,3331,3082,2822,2575,2309,2060,1804,1541,1295,1030,778,515,265,0]),eF=new Int32Array([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,9,8,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,2,10,0,2,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,8,3,2,10,8,10,9,8,-1,-1,-1,-1,-1,-1,-1,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,8,11,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,11,2,1,9,11,9,8,11,-1,-1,-1,-1,-1,-1,-1,3,10,1,11,10,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,10,1,0,8,10,8,11,10,-1,-1,-1,-1,-1,-1,-1,3,9,0,3,11,9,11,10,9,-1,-1,-1,-1,-1,-1,-1,9,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,7,3,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,1,9,4,7,1,7,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,8,4,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,4,7,3,0,4,1,2,10,-1,-1,-1,-1,-1,-1,-1,9,2,10,9,0,2,8,4,7,-1,-1,-1,-1,-1,-1,-1,2,10,9,2,9,7,2,7,3,7,9,4,-1,-1,-1,-1,8,4,7,3,11,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,4,7,11,2,4,2,0,4,-1,-1,-1,-1,-1,-1,-1,9,0,1,8,4,7,2,3,11,-1,-1,-1,-1,-1,-1,-1,4,7,11,9,4,11,9,11,2,9,2,1,-1,-1,-1,-1,3,10,1,3,11,10,7,8,4,-1,-1,-1,-1,-1,-1,-1,1,11,10,1,4,11,1,0,4,7,11,4,-1,-1,-1,-1,4,7,8,9,0,11,9,11,10,11,0,3,-1,-1,-1,-1,4,7,11,4,11,9,9,11,10,-1,-1,-1,-1,-1,-1,-1,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,5,4,1,5,0,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,5,4,8,3,5,3,1,5,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,10,4,9,5,-1,-1,-1,-1,-1,-1,-1,5,2,10,5,4,2,4,0,2,-1,-1,-1,-1,-1,-1,-1,2,10,5,3,2,5,3,5,4,3,4,8,-1,-1,-1,-1,9,5,4,2,3,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,11,2,0,8,11,4,9,5,-1,-1,-1,-1,-1,-1,-1,0,5,4,0,1,5,2,3,11,-1,-1,-1,-1,-1,-1,-1,2,1,5,2,5,8,2,8,11,4,8,5,-1,-1,-1,-1,10,3,11,10,1,3,9,5,4,-1,-1,-1,-1,-1,-1,-1,4,9,5,0,8,1,8,10,1,8,11,10,-1,-1,-1,-1,5,4,0,5,0,11,5,11,10,11,0,3,-1,-1,-1,-1,5,4,8,5,8,10,10,8,11,-1,-1,-1,-1,-1,-1,-1,9,7,8,5,7,9,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,3,0,9,5,3,5,7,3,-1,-1,-1,-1,-1,-1,-1,0,7,8,0,1,7,1,5,7,-1,-1,-1,-1,-1,-1,-1,1,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,7,8,9,5,7,10,1,2,-1,-1,-1,-1,-1,-1,-1,10,1,2,9,5,0,5,3,0,5,7,3,-1,-1,-1,-1,8,0,2,8,2,5,8,5,7,10,5,2,-1,-1,-1,-1,2,10,5,2,5,3,3,5,7,-1,-1,-1,-1,-1,-1,-1,7,9,5,7,8,9,3,11,2,-1,-1,-1,-1,-1,-1,-1,9,5,7,9,7,2,9,2,0,2,7,11,-1,-1,-1,-1,2,3,11,0,1,8,1,7,8,1,5,7,-1,-1,-1,-1,11,2,1,11,1,7,7,1,5,-1,-1,-1,-1,-1,-1,-1,9,5,8,8,5,7,10,1,3,10,3,11,-1,-1,-1,-1,5,7,0,5,0,9,7,11,0,1,0,10,11,10,0,-1,11,10,0,11,0,3,10,5,0,8,0,7,5,7,0,-1,11,10,5,7,11,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,0,1,5,10,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,8,3,1,9,8,5,10,6,-1,-1,-1,-1,-1,-1,-1,1,6,5,2,6,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,6,5,1,2,6,3,0,8,-1,-1,-1,-1,-1,-1,-1,9,6,5,9,0,6,0,2,6,-1,-1,-1,-1,-1,-1,-1,5,9,8,5,8,2,5,2,6,3,2,8,-1,-1,-1,-1,2,3,11,10,6,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,0,8,11,2,0,10,6,5,-1,-1,-1,-1,-1,-1,-1,0,1,9,2,3,11,5,10,6,-1,-1,-1,-1,-1,-1,-1,5,10,6,1,9,2,9,11,2,9,8,11,-1,-1,-1,-1,6,3,11,6,5,3,5,1,3,-1,-1,-1,-1,-1,-1,-1,0,8,11,0,11,5,0,5,1,5,11,6,-1,-1,-1,-1,3,11,6,0,3,6,0,6,5,0,5,9,-1,-1,-1,-1,6,5,9,6,9,11,11,9,8,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,3,0,4,7,3,6,5,10,-1,-1,-1,-1,-1,-1,-1,1,9,0,5,10,6,8,4,7,-1,-1,-1,-1,-1,-1,-1,10,6,5,1,9,7,1,7,3,7,9,4,-1,-1,-1,-1,6,1,2,6,5,1,4,7,8,-1,-1,-1,-1,-1,-1,-1,1,2,5,5,2,6,3,0,4,3,4,7,-1,-1,-1,-1,8,4,7,9,0,5,0,6,5,0,2,6,-1,-1,-1,-1,7,3,9,7,9,4,3,2,9,5,9,6,2,6,9,-1,3,11,2,7,8,4,10,6,5,-1,-1,-1,-1,-1,-1,-1,5,10,6,4,7,2,4,2,0,2,7,11,-1,-1,-1,-1,0,1,9,4,7,8,2,3,11,5,10,6,-1,-1,-1,-1,9,2,1,9,11,2,9,4,11,7,11,4,5,10,6,-1,8,4,7,3,11,5,3,5,1,5,11,6,-1,-1,-1,-1,5,1,11,5,11,6,1,0,11,7,11,4,0,4,11,-1,0,5,9,0,6,5,0,3,6,11,6,3,8,4,7,-1,6,5,9,6,9,11,4,7,9,7,11,9,-1,-1,-1,-1,10,4,9,6,4,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,10,6,4,9,10,0,8,3,-1,-1,-1,-1,-1,-1,-1,10,0,1,10,6,0,6,4,0,-1,-1,-1,-1,-1,-1,-1,8,3,1,8,1,6,8,6,4,6,1,10,-1,-1,-1,-1,1,4,9,1,2,4,2,6,4,-1,-1,-1,-1,-1,-1,-1,3,0,8,1,2,9,2,4,9,2,6,4,-1,-1,-1,-1,0,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,3,2,8,2,4,4,2,6,-1,-1,-1,-1,-1,-1,-1,10,4,9,10,6,4,11,2,3,-1,-1,-1,-1,-1,-1,-1,0,8,2,2,8,11,4,9,10,4,10,6,-1,-1,-1,-1,3,11,2,0,1,6,0,6,4,6,1,10,-1,-1,-1,-1,6,4,1,6,1,10,4,8,1,2,1,11,8,11,1,-1,9,6,4,9,3,6,9,1,3,11,6,3,-1,-1,-1,-1,8,11,1,8,1,0,11,6,1,9,1,4,6,4,1,-1,3,11,6,3,6,0,0,6,4,-1,-1,-1,-1,-1,-1,-1,6,4,8,11,6,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,10,6,7,8,10,8,9,10,-1,-1,-1,-1,-1,-1,-1,0,7,3,0,10,7,0,9,10,6,7,10,-1,-1,-1,-1,10,6,7,1,10,7,1,7,8,1,8,0,-1,-1,-1,-1,10,6,7,10,7,1,1,7,3,-1,-1,-1,-1,-1,-1,-1,1,2,6,1,6,8,1,8,9,8,6,7,-1,-1,-1,-1,2,6,9,2,9,1,6,7,9,0,9,3,7,3,9,-1,7,8,0,7,0,6,6,0,2,-1,-1,-1,-1,-1,-1,-1,7,3,2,6,7,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,11,10,6,8,10,8,9,8,6,7,-1,-1,-1,-1,2,0,7,2,7,11,0,9,7,6,7,10,9,10,7,-1,1,8,0,1,7,8,1,10,7,6,7,10,2,3,11,-1,11,2,1,11,1,7,10,6,1,6,7,1,-1,-1,-1,-1,8,9,6,8,6,7,9,1,6,11,6,3,1,3,6,-1,0,9,1,11,6,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,8,0,7,0,6,3,11,0,11,6,0,-1,-1,-1,-1,7,11,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,8,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,1,9,11,7,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,1,9,8,3,1,11,7,6,-1,-1,-1,-1,-1,-1,-1,10,1,2,6,11,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,8,6,11,7,-1,-1,-1,-1,-1,-1,-1,2,9,0,2,10,9,6,11,7,-1,-1,-1,-1,-1,-1,-1,6,11,7,2,10,3,10,8,3,10,9,8,-1,-1,-1,-1,7,2,3,6,2,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,7,0,8,7,6,0,6,2,0,-1,-1,-1,-1,-1,-1,-1,2,7,6,2,3,7,0,1,9,-1,-1,-1,-1,-1,-1,-1,1,6,2,1,8,6,1,9,8,8,7,6,-1,-1,-1,-1,10,7,6,10,1,7,1,3,7,-1,-1,-1,-1,-1,-1,-1,10,7,6,1,7,10,1,8,7,1,0,8,-1,-1,-1,-1,0,3,7,0,7,10,0,10,9,6,10,7,-1,-1,-1,-1,7,6,10,7,10,8,8,10,9,-1,-1,-1,-1,-1,-1,-1,6,8,4,11,8,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,6,11,3,0,6,0,4,6,-1,-1,-1,-1,-1,-1,-1,8,6,11,8,4,6,9,0,1,-1,-1,-1,-1,-1,-1,-1,9,4,6,9,6,3,9,3,1,11,3,6,-1,-1,-1,-1,6,8,4,6,11,8,2,10,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,3,0,11,0,6,11,0,4,6,-1,-1,-1,-1,4,11,8,4,6,11,0,2,9,2,10,9,-1,-1,-1,-1,10,9,3,10,3,2,9,4,3,11,3,6,4,6,3,-1,8,2,3,8,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,0,4,2,4,6,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,9,0,2,3,4,2,4,6,4,3,8,-1,-1,-1,-1,1,9,4,1,4,2,2,4,6,-1,-1,-1,-1,-1,-1,-1,8,1,3,8,6,1,8,4,6,6,10,1,-1,-1,-1,-1,10,1,0,10,0,6,6,0,4,-1,-1,-1,-1,-1,-1,-1,4,6,3,4,3,8,6,10,3,0,3,9,10,9,3,-1,10,9,4,6,10,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,5,7,6,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,5,11,7,6,-1,-1,-1,-1,-1,-1,-1,5,0,1,5,4,0,7,6,11,-1,-1,-1,-1,-1,-1,-1,11,7,6,8,3,4,3,5,4,3,1,5,-1,-1,-1,-1,9,5,4,10,1,2,7,6,11,-1,-1,-1,-1,-1,-1,-1,6,11,7,1,2,10,0,8,3,4,9,5,-1,-1,-1,-1,7,6,11,5,4,10,4,2,10,4,0,2,-1,-1,-1,-1,3,4,8,3,5,4,3,2,5,10,5,2,11,7,6,-1,7,2,3,7,6,2,5,4,9,-1,-1,-1,-1,-1,-1,-1,9,5,4,0,8,6,0,6,2,6,8,7,-1,-1,-1,-1,3,6,2,3,7,6,1,5,0,5,4,0,-1,-1,-1,-1,6,2,8,6,8,7,2,1,8,4,8,5,1,5,8,-1,9,5,4,10,1,6,1,7,6,1,3,7,-1,-1,-1,-1,1,6,10,1,7,6,1,0,7,8,7,0,9,5,4,-1,4,0,10,4,10,5,0,3,10,6,10,7,3,7,10,-1,7,6,10,7,10,8,5,4,10,4,8,10,-1,-1,-1,-1,6,9,5,6,11,9,11,8,9,-1,-1,-1,-1,-1,-1,-1,3,6,11,0,6,3,0,5,6,0,9,5,-1,-1,-1,-1,0,11,8,0,5,11,0,1,5,5,6,11,-1,-1,-1,-1,6,11,3,6,3,5,5,3,1,-1,-1,-1,-1,-1,-1,-1,1,2,10,9,5,11,9,11,8,11,5,6,-1,-1,-1,-1,0,11,3,0,6,11,0,9,6,5,6,9,1,2,10,-1,11,8,5,11,5,6,8,0,5,10,5,2,0,2,5,-1,6,11,3,6,3,5,2,10,3,10,5,3,-1,-1,-1,-1,5,8,9,5,2,8,5,6,2,3,8,2,-1,-1,-1,-1,9,5,6,9,6,0,0,6,2,-1,-1,-1,-1,-1,-1,-1,1,5,8,1,8,0,5,6,8,3,8,2,6,2,8,-1,1,5,6,2,1,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,6,1,6,10,3,8,6,5,6,9,8,9,6,-1,10,1,0,10,0,6,9,5,0,5,6,0,-1,-1,-1,-1,0,3,8,5,6,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,10,5,6,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,7,5,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,11,5,10,11,7,5,8,3,0,-1,-1,-1,-1,-1,-1,-1,5,11,7,5,10,11,1,9,0,-1,-1,-1,-1,-1,-1,-1,10,7,5,10,11,7,9,8,1,8,3,1,-1,-1,-1,-1,11,1,2,11,7,1,7,5,1,-1,-1,-1,-1,-1,-1,-1,0,8,3,1,2,7,1,7,5,7,2,11,-1,-1,-1,-1,9,7,5,9,2,7,9,0,2,2,11,7,-1,-1,-1,-1,7,5,2,7,2,11,5,9,2,3,2,8,9,8,2,-1,2,5,10,2,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,8,2,0,8,5,2,8,7,5,10,2,5,-1,-1,-1,-1,9,0,1,5,10,3,5,3,7,3,10,2,-1,-1,-1,-1,9,8,2,9,2,1,8,7,2,10,2,5,7,5,2,-1,1,3,5,3,7,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,8,7,0,7,1,1,7,5,-1,-1,-1,-1,-1,-1,-1,9,0,3,9,3,5,5,3,7,-1,-1,-1,-1,-1,-1,-1,9,8,7,5,9,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,5,8,4,5,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,5,0,4,5,11,0,5,10,11,11,3,0,-1,-1,-1,-1,0,1,9,8,4,10,8,10,11,10,4,5,-1,-1,-1,-1,10,11,4,10,4,5,11,3,4,9,4,1,3,1,4,-1,2,5,1,2,8,5,2,11,8,4,5,8,-1,-1,-1,-1,0,4,11,0,11,3,4,5,11,2,11,1,5,1,11,-1,0,2,5,0,5,9,2,11,5,4,5,8,11,8,5,-1,9,4,5,2,11,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,5,10,3,5,2,3,4,5,3,8,4,-1,-1,-1,-1,5,10,2,5,2,4,4,2,0,-1,-1,-1,-1,-1,-1,-1,3,10,2,3,5,10,3,8,5,4,5,8,0,1,9,-1,5,10,2,5,2,4,1,9,2,9,4,2,-1,-1,-1,-1,8,4,5,8,5,3,3,5,1,-1,-1,-1,-1,-1,-1,-1,0,4,5,1,0,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,8,4,5,8,5,3,9,0,5,0,3,5,-1,-1,-1,-1,9,4,5,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,11,7,4,9,11,9,10,11,-1,-1,-1,-1,-1,-1,-1,0,8,3,4,9,7,9,11,7,9,10,11,-1,-1,-1,-1,1,10,11,1,11,4,1,4,0,7,4,11,-1,-1,-1,-1,3,1,4,3,4,8,1,10,4,7,4,11,10,11,4,-1,4,11,7,9,11,4,9,2,11,9,1,2,-1,-1,-1,-1,9,7,4,9,11,7,9,1,11,2,11,1,0,8,3,-1,11,7,4,11,4,2,2,4,0,-1,-1,-1,-1,-1,-1,-1,11,7,4,11,4,2,8,3,4,3,2,4,-1,-1,-1,-1,2,9,10,2,7,9,2,3,7,7,4,9,-1,-1,-1,-1,9,10,7,9,7,4,10,2,7,8,7,0,2,0,7,-1,3,7,10,3,10,2,7,4,10,1,10,0,4,0,10,-1,1,10,2,8,7,4,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,7,1,3,-1,-1,-1,-1,-1,-1,-1,4,9,1,4,1,7,0,8,1,8,7,1,-1,-1,-1,-1,4,0,3,7,4,3,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,4,8,7,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,9,10,8,10,11,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,11,9,10,-1,-1,-1,-1,-1,-1,-1,0,1,10,0,10,8,8,10,11,-1,-1,-1,-1,-1,-1,-1,3,1,10,11,3,10,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,2,11,1,11,9,9,11,8,-1,-1,-1,-1,-1,-1,-1,3,0,9,3,9,11,1,2,9,2,11,9,-1,-1,-1,-1,0,2,11,8,0,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,3,2,11,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,10,8,9,-1,-1,-1,-1,-1,-1,-1,9,10,2,0,9,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,2,3,8,2,8,10,0,1,8,1,10,8,-1,-1,-1,-1,1,10,2,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,1,3,8,9,1,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,9,1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,0,3,8,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1]),tF=l.createContext(null),nF=l.forwardRef(((e,t)=>{let{resolution:n=28,maxPolyCount:r=1e4,enableUvs:i=!1,enableColors:o=!1,children:a,...s}=e;const c=l.useRef(null);l.useImperativeHandle(t,(()=>c.current),[]);const u=l.useMemo((()=>new ZL(n,null,i,o,r)),[n,r,i,o]),h=l.useMemo((()=>({getParent:()=>c})),[]);return uy((()=>{u.update(),u.reset()}),-1),l.createElement(l.Fragment,null,l.createElement("primitive",tC({object:u,ref:c},s),l.createElement(tF.Provider,{value:h},a)))})),rF=l.forwardRef(((e,t)=>{let{strength:n=.5,subtract:r=12,color:i,...o}=e;const{getParent:a}=l.useContext(tF),s=l.useMemo((()=>a()),[a]),c=l.useRef(null);l.useImperativeHandle(t,(()=>c.current),[]);const u=new vo;return uy((e=>{s.current&&c.current&&(c.current.getWorldPosition(u),s.current.addBall(.5+.5*u.x,.5+.5*u.y,.5+.5*u.z,n,r,i))})),l.createElement("group",tC({ref:c},o))})),iF=l.forwardRef(((e,t)=>{let{planeType:n="x",strength:r=.5,subtract:i=12,...o}=e;const{getParent:a}=l.useContext(tF),s=l.useMemo((()=>a()),[a]),c=l.useRef(null);l.useImperativeHandle(t,(()=>c.current),[]);const u=l.useMemo((()=>"x"===n?"addPlaneX":"y"===n?"addPlaneY":"addPlaneZ"),[n]);return uy((()=>{s.current&&c.current&&s.current[u](r,i)})),l.createElement("group",tC({ref:c},o))}));class oF extends hs{constructor(e,t,n,r){super();const i=[],o=[],a=[],s=new vo,l=new qo;l.makeRotationFromEuler(n),l.setPosition(t);const c=new qo;function u(t,n,r){n.applyMatrix4(e.matrixWorld),n.applyMatrix4(c),r.transformDirection(e.matrixWorld),t.push(new aF(n.clone(),r.clone()))}function h(e,t){const n=[],i=.5*Math.abs(r.dot(t));for(let r=0;r<e.length;r+=3){let o,a,s,l,c,u,h,f=0;switch(o=e[r+0].position.dot(t)-i>0,a=e[r+1].position.dot(t)-i>0,s=e[r+2].position.dot(t)-i>0,f=(o?1:0)+(a?1:0)+(s?1:0),f){case 0:n.push(e[r]),n.push(e[r+1]),n.push(e[r+2]);break;case 1:if(o&&(l=e[r+1],c=e[r+2],u=d(e[r],l,t,i),h=d(e[r],c,t,i)),a){l=e[r],c=e[r+2],u=d(e[r+1],l,t,i),h=d(e[r+1],c,t,i),n.push(u),n.push(c.clone()),n.push(l.clone()),n.push(c.clone()),n.push(u.clone()),n.push(h);break}s&&(l=e[r],c=e[r+1],u=d(e[r+2],l,t,i),h=d(e[r+2],c,t,i)),n.push(l.clone()),n.push(c.clone()),n.push(u),n.push(h),n.push(u.clone()),n.push(c.clone());break;case 2:o||(l=e[r].clone(),c=d(l,e[r+1],t,i),u=d(l,e[r+2],t,i),n.push(l),n.push(c),n.push(u)),a||(l=e[r+1].clone(),c=d(l,e[r+2],t,i),u=d(l,e[r],t,i),n.push(l),n.push(c),n.push(u)),s||(l=e[r+2].clone(),c=d(l,e[r],t,i),u=d(l,e[r+1],t,i),n.push(l),n.push(c),n.push(u))}}return n}function d(e,t,n,r){const i=e.position.dot(n)-r,o=i/(i-(t.position.dot(n)-r));return new aF(new vo(e.position.x+o*(t.position.x-e.position.x),e.position.y+o*(t.position.y-e.position.y),e.position.z+o*(t.position.z-e.position.z)),new vo(e.normal.x+o*(t.normal.x-e.normal.x),e.normal.y+o*(t.normal.y-e.normal.y),e.normal.z+o*(t.normal.z-e.normal.z)))}c.copy(l).invert(),function(){let t,n=[];const c=new vo,d=new vo;if(!0===e.geometry.isGeometry)return void console.error("THREE.DecalGeometry no longer supports THREE.Geometry. Use BufferGeometry instead.");const f=e.geometry,p=f.attributes.position,m=f.attributes.normal;if(null!==f.index){const e=f.index;for(t=0;t<e.count;t++)c.fromBufferAttribute(p,e.getX(t)),d.fromBufferAttribute(m,e.getX(t)),u(n,c,d)}else for(t=0;t<p.count;t++)c.fromBufferAttribute(p,t),d.fromBufferAttribute(m,t),u(n,c,d);for(n=h(n,s.set(1,0,0)),n=h(n,s.set(-1,0,0)),n=h(n,s.set(0,1,0)),n=h(n,s.set(0,-1,0)),n=h(n,s.set(0,0,1)),n=h(n,s.set(0,0,-1)),t=0;t<n.length;t++){const e=n[t];a.push(.5+e.position.x/r.x,.5+e.position.y/r.y),e.position.applyMatrix4(l),i.push(e.position.x,e.position.y,e.position.z),o.push(e.normal.x,e.normal.y,e.normal.z)}}(),this.setAttribute("position",new rs(i,3)),this.setAttribute("normal",new rs(o,3)),this.setAttribute("uv",new rs(a,2))}}class aF{constructor(e,t){this.position=e,this.normal=t}clone(){return new this.constructor(this.position.clone(),this.normal.clone())}}function sF(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[0,0,0];return function(e){return Array.isArray(e)}(e)?e:e instanceof vo||e instanceof ra?[e.x,e.y,e.z]:[e,e,e]}const lF=l.forwardRef((function(e,t){let{debug:n,depthTest:r=!1,polygonOffsetFactor:i=-10,map:o,mesh:a,children:s,position:c,rotation:u,scale:h,...d}=e;const f=l.useRef(null);l.useImperativeHandle(t,(()=>f.current));const p=l.useRef(null);return l.useLayoutEffect((()=>{const e=(null==a?void 0:a.current)||f.current.parent,t=f.current;if(!(e instanceof Is))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');const n={position:new vo,rotation:new ra,scale:new vo(1,1,1)};if(e){Ay(n,{position:c,scale:h});const r=e.matrixWorld.clone();if(e.matrixWorld.identity(),u&&"number"!==typeof u)Ay(n,{rotation:u});else{const t=new xa;t.position.copy(n.position),t.lookAt(e.position),"number"===typeof u&&t.rotateZ(u),Ay(n,{rotation:t.rotation})}return t.geometry=new oF(e,n.position,n.rotation,n.scale),p.current&&(Ay(p.current,n),p.current.traverse((e=>e.raycast=()=>null))),e.matrixWorld=r,()=>{t.geometry.dispose()}}}),[a,...sF(c),...sF(h),...sF(u)]),l.createElement("mesh",tC({ref:f,"material-transparent":!0,"material-polygonOffset":!0,"material-polygonOffsetFactor":i,"material-depthTest":r,"material-map":o},d),s,n&&l.createElement("mesh",{ref:p},l.createElement("boxGeometry",null),l.createElement("meshNormalMaterial",{wireframe:!0}),l.createElement("axesHelper",null)))}));class cF extends kp{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,n,r){const i=this,o=new zp(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,(function(n){try{t(i.parse(n))}catch(NQ){r?r(NQ):console.error(NQ),i.manager.itemError(e)}}),n,r)}parse(e){const t=this;function n(e,t,n,i,o,a,s,l){if(0==t||0==n)return void e.lineTo(l.x,l.y);i=i*Math.PI/180,t=Math.abs(t),n=Math.abs(n);const c=(s.x-l.x)/2,u=(s.y-l.y)/2,h=Math.cos(i)*c+Math.sin(i)*u,d=-Math.sin(i)*c+Math.cos(i)*u;let f=t*t,p=n*n;const m=h*h,g=d*d,v=m/f+g/p;if(v>1){const e=Math.sqrt(v);f=(t*=e)*t,p=(n*=e)*n}const y=f*g+p*m,A=(f*p-y)/y;let x=Math.sqrt(Math.max(0,A));o===a&&(x=-x);const b=x*t*d/n,_=-x*n*h/t,w=Math.cos(i)*b-Math.sin(i)*_+(s.x+l.x)/2,E=Math.sin(i)*b+Math.cos(i)*_+(s.y+l.y)/2,S=r(1,0,(h-b)/t,(d-_)/n),C=r((h-b)/t,(d-_)/n,(-h-b)/t,(-d-_)/n)%(2*Math.PI);e.currentPath.absellipse(w,E,t,n,S,S+C,0===a,i)}function r(e,t,n,r){const i=e*n+t*r,o=Math.sqrt(e*e+t*t)*Math.sqrt(n*n+r*r);let a=Math.acos(Math.max(-1,Math.min(1,i/o)));return e*r-t*n<0&&(a=-a),a}function i(e,t){t=Object.assign({},t);let n={};if(e.hasAttribute("class")){const t=e.getAttribute("class").split(/\s/).filter(Boolean).map((e=>e.trim()));for(let e=0;e<t.length;e++)n=Object.assign(n,m["."+t[e]])}function r(r,i,o){void 0===o&&(o=function(e){return e.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),e}),e.hasAttribute(r)&&(t[i]=o(e.getAttribute(r))),n[r]&&(t[i]=o(n[r])),e.style&&""!==e.style[r]&&(t[i]=o(e.style[r]))}function i(e){return Math.max(0,Math.min(1,c(e)))}function o(e){return Math.max(0,c(e))}return e.hasAttribute("id")&&(n=Object.assign(n,m["#"+e.getAttribute("id")])),r("fill","fill"),r("fill-opacity","fillOpacity",i),r("fill-rule","fillRule"),r("opacity","opacity",i),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",i),r("stroke-width","strokeWidth",o),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",o),r("visibility","visibility"),t}function o(e,t){return e-(t-e)}function a(e,t,n){if("string"!==typeof e)throw new TypeError("Invalid input: "+typeof e);const r={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let i=0,o=!0,a="",s="";const l=[];function c(e,t,n){const r=new SyntaxError('Unexpected character "'+e+'" at index '+t+".");throw r.partial=n,r}function u(){""!==a&&(""===s?l.push(Number(a)):l.push(Number(a)*Math.pow(10,Number(s)))),a="",s=""}let h;const d=e.length;for(let f=0;f<d;f++)if(h=e[f],Array.isArray(t)&&t.includes(l.length%n)&&r.FLAGS.test(h))i=1,a=h,u();else{if(0===i){if(r.WHITESPACE.test(h))continue;if(r.DIGIT.test(h)||r.SIGN.test(h)){i=1,a=h;continue}if(r.POINT.test(h)){i=2,a=h;continue}r.COMMA.test(h)&&(o&&c(h,f,l),o=!0)}if(1===i){if(r.DIGIT.test(h)){a+=h;continue}if(r.POINT.test(h)){a+=h,i=2;continue}if(r.EXP.test(h)){i=3;continue}r.SIGN.test(h)&&1===a.length&&r.SIGN.test(a[0])&&c(h,f,l)}if(2===i){if(r.DIGIT.test(h)){a+=h;continue}if(r.EXP.test(h)){i=3;continue}r.POINT.test(h)&&"."===a[a.length-1]&&c(h,f,l)}if(3===i){if(r.DIGIT.test(h)){s+=h;continue}if(r.SIGN.test(h)){if(""===s){s+=h;continue}1===s.length&&r.SIGN.test(s)&&c(h,f,l)}}r.WHITESPACE.test(h)?(u(),i=0,o=!1):r.COMMA.test(h)?(u(),i=0,o=!0):r.SIGN.test(h)?(u(),i=1,a=h):r.POINT.test(h)?(u(),i=2,a=h):c(h,f,l)}return u(),l}const s=["mm","cm","in","pt","pc","px"],l={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function c(e){let n,r="px";if("string"===typeof e||e instanceof String)for(let t=0,i=s.length;t<i;t++){const n=s[t];if(e.endsWith(n)){r=n,e=e.substring(0,e.length-n.length);break}}return"px"===r&&"px"!==t.defaultUnit?n=l.in[t.defaultUnit]/t.defaultDPI:(n=l[r][t.defaultUnit],n<0&&(n=l[r].in*t.defaultDPI)),n*parseFloat(e)}function u(e){const t=e.elements;return t[0]*t[4]-t[1]*t[3]<0}function h(e){const t=e.elements,n=t[0]*t[3]+t[1]*t[4];if(0===n)return!1;const r=d(e),i=f(e);return Math.abs(n/(r*i))>Number.EPSILON}function d(e){const t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function f(e){const t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}const p=[],m={},g=[],v=new Ui,y=new Ui,A=new Ui,x=new Ui,b=new zi,_=new vo,w=new Ui,E=(new DOMParser).parseFromString(e,"image/svg+xml");!function e(t,r){if(1!==t.nodeType)return;const s=function(e){if(!(e.hasAttribute("transform")||"use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))))return null;const t=function(e){const t=new Ui,n=v;if("use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))){const n=c(e.getAttribute("x")),r=c(e.getAttribute("y"));t.translate(n,r)}if(e.hasAttribute("transform")){const r=e.getAttribute("transform").split(")");for(let e=r.length-1;e>=0;e--){const i=r[e].trim();if(""===i)continue;const o=i.indexOf("("),s=i.length;if(o>0&&o<s){const e=i.slice(0,o),t=a(i.slice(o+1));switch(n.identity(),e){case"translate":if(t.length>=1){const e=t[0];let r=0;t.length>=2&&(r=t[1]),n.translate(e,r)}break;case"rotate":if(t.length>=1){let e=0,r=0,i=0;e=t[0]*Math.PI/180,t.length>=3&&(r=t[1],i=t[2]),y.makeTranslation(-r,-i),A.makeRotation(e),x.multiplyMatrices(A,y),y.makeTranslation(r,i),n.multiplyMatrices(y,x)}break;case"scale":if(t.length>=1){const e=t[0];let r=e;t.length>=2&&(r=t[1]),n.scale(e,r)}break;case"skewX":1===t.length&&n.set(1,Math.tan(t[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===t.length&&n.set(1,0,0,Math.tan(t[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===t.length&&n.set(t[0],t[2],t[4],t[1],t[3],t[5],0,0,1)}}t.premultiply(n)}}return t}(e);g.length>0&&t.premultiply(g[g.length-1]);return w.copy(t),g.push(t),t}(t);let l=!1,E=null;switch(t.nodeName){case"svg":case"g":r=i(t,r);break;case"style":!function(e){if(!e.sheet||!e.sheet.cssRules||!e.sheet.cssRules.length)return;for(let t=0;t<e.sheet.cssRules.length;t++){const n=e.sheet.cssRules[t];if(1!==n.type)continue;const r=n.selectorText.split(/,/gm).filter(Boolean).map((e=>e.trim()));for(let e=0;e<r.length;e++){const t=Object.fromEntries(Object.entries(n.style).filter((e=>{let[,t]=e;return""!==t})));m[r[e]]=Object.assign(m[r[e]]||{},t)}}}(t);break;case"path":r=i(t,r),t.hasAttribute("d")&&(E=function(e){const t=new Wg,r=new zi,i=new zi,s=new zi;let l=!0,c=!1;const u=e.getAttribute("d");if(""===u||"none"===u)return null;const h=u.match(/[a-df-z][^a-df-z]*/gi);for(let d=0,f=h.length;d<f;d++){const e=h[d],u=e.charAt(0),f=e.slice(1).trim();let p;switch(!0===l&&(c=!0,l=!1),u){case"M":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x=p[e+0],r.y=p[e+1],i.x=r.x,i.y=r.y,0===e?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y),0===e&&s.copy(r);break;case"H":p=a(f);for(let e=0,n=p.length;e<n;e++)r.x=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===c&&s.copy(r);break;case"V":p=a(f);for(let e=0,n=p.length;e<n;e++)r.y=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===c&&s.copy(r);break;case"L":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x=p[e+0],r.y=p[e+1],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===c&&s.copy(r);break;case"C":p=a(f);for(let e=0,n=p.length;e<n;e+=6)t.bezierCurveTo(p[e+0],p[e+1],p[e+2],p[e+3],p[e+4],p[e+5]),i.x=p[e+2],i.y=p[e+3],r.x=p[e+4],r.y=p[e+5],0===e&&!0===c&&s.copy(r);break;case"S":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),p[e+0],p[e+1],p[e+2],p[e+3]),i.x=p[e+0],i.y=p[e+1],r.x=p[e+2],r.y=p[e+3],0===e&&!0===c&&s.copy(r);break;case"Q":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.quadraticCurveTo(p[e+0],p[e+1],p[e+2],p[e+3]),i.x=p[e+0],i.y=p[e+1],r.x=p[e+2],r.y=p[e+3],0===e&&!0===c&&s.copy(r);break;case"T":p=a(f);for(let e=0,n=p.length;e<n;e+=2){const n=o(r.x,i.x),a=o(r.y,i.y);t.quadraticCurveTo(n,a,p[e+0],p[e+1]),i.x=n,i.y=a,r.x=p[e+0],r.y=p[e+1],0===e&&!0===c&&s.copy(r)}break;case"A":p=a(f,[3,4],7);for(let e=0,o=p.length;e<o;e+=7){if(p[e+5]==r.x&&p[e+6]==r.y)continue;const o=r.clone();r.x=p[e+5],r.y=p[e+6],i.x=r.x,i.y=r.y,n(t,p[e],p[e+1],p[e+2],p[e+3],p[e+4],o,r),0===e&&!0===c&&s.copy(r)}break;case"m":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x+=p[e+0],r.y+=p[e+1],i.x=r.x,i.y=r.y,0===e?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y),0===e&&s.copy(r);break;case"h":p=a(f);for(let e=0,n=p.length;e<n;e++)r.x+=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===c&&s.copy(r);break;case"v":p=a(f);for(let e=0,n=p.length;e<n;e++)r.y+=p[e],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===c&&s.copy(r);break;case"l":p=a(f);for(let e=0,n=p.length;e<n;e+=2)r.x+=p[e+0],r.y+=p[e+1],i.x=r.x,i.y=r.y,t.lineTo(r.x,r.y),0===e&&!0===c&&s.copy(r);break;case"c":p=a(f);for(let e=0,n=p.length;e<n;e+=6)t.bezierCurveTo(r.x+p[e+0],r.y+p[e+1],r.x+p[e+2],r.y+p[e+3],r.x+p[e+4],r.y+p[e+5]),i.x=r.x+p[e+2],i.y=r.y+p[e+3],r.x+=p[e+4],r.y+=p[e+5],0===e&&!0===c&&s.copy(r);break;case"s":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.bezierCurveTo(o(r.x,i.x),o(r.y,i.y),r.x+p[e+0],r.y+p[e+1],r.x+p[e+2],r.y+p[e+3]),i.x=r.x+p[e+0],i.y=r.y+p[e+1],r.x+=p[e+2],r.y+=p[e+3],0===e&&!0===c&&s.copy(r);break;case"q":p=a(f);for(let e=0,n=p.length;e<n;e+=4)t.quadraticCurveTo(r.x+p[e+0],r.y+p[e+1],r.x+p[e+2],r.y+p[e+3]),i.x=r.x+p[e+0],i.y=r.y+p[e+1],r.x+=p[e+2],r.y+=p[e+3],0===e&&!0===c&&s.copy(r);break;case"t":p=a(f);for(let e=0,n=p.length;e<n;e+=2){const n=o(r.x,i.x),a=o(r.y,i.y);t.quadraticCurveTo(n,a,r.x+p[e+0],r.y+p[e+1]),i.x=n,i.y=a,r.x=r.x+p[e+0],r.y=r.y+p[e+1],0===e&&!0===c&&s.copy(r)}break;case"a":p=a(f,[3,4],7);for(let e=0,o=p.length;e<o;e+=7){if(0==p[e+5]&&0==p[e+6])continue;const o=r.clone();r.x+=p[e+5],r.y+=p[e+6],i.x=r.x,i.y=r.y,n(t,p[e],p[e+1],p[e+2],p[e+3],p[e+4],o,r),0===e&&!0===c&&s.copy(r)}break;case"Z":case"z":t.currentPath.autoClose=!0,t.currentPath.curves.length>0&&(r.copy(s),t.currentPath.currentPoint.copy(r),l=!0);break;default:console.warn(e)}c=!1}return t}(t));break;case"rect":r=i(t,r),E=function(e){const t=c(e.getAttribute("x")||0),n=c(e.getAttribute("y")||0),r=c(e.getAttribute("rx")||e.getAttribute("ry")||0),i=c(e.getAttribute("ry")||e.getAttribute("rx")||0),o=c(e.getAttribute("width")),a=c(e.getAttribute("height")),s=.448084975506,l=new Wg;l.moveTo(t+r,n),l.lineTo(t+o-r,n),(0!==r||0!==i)&&l.bezierCurveTo(t+o-r*s,n,t+o,n+i*s,t+o,n+i);l.lineTo(t+o,n+a-i),(0!==r||0!==i)&&l.bezierCurveTo(t+o,n+a-i*s,t+o-r*s,n+a,t+o-r,n+a);l.lineTo(t+r,n+a),(0!==r||0!==i)&&l.bezierCurveTo(t+r*s,n+a,t,n+a-i*s,t,n+a-i);l.lineTo(t,n+i),(0!==r||0!==i)&&l.bezierCurveTo(t,n+i*s,t+r*s,n,t+r,n);return l}(t);break;case"polygon":r=i(t,r),E=function(e){function t(e,t,n){const o=c(t),a=c(n);0===i?r.moveTo(o,a):r.lineTo(o,a),i++}const n=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new Wg;let i=0;return e.getAttribute("points").replace(n,t),r.currentPath.autoClose=!0,r}(t);break;case"polyline":r=i(t,r),E=function(e){function t(e,t,n){const o=c(t),a=c(n);0===i?r.moveTo(o,a):r.lineTo(o,a),i++}const n=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,r=new Wg;let i=0;return e.getAttribute("points").replace(n,t),r.currentPath.autoClose=!1,r}(t);break;case"circle":r=i(t,r),E=function(e){const t=c(e.getAttribute("cx")||0),n=c(e.getAttribute("cy")||0),r=c(e.getAttribute("r")||0),i=new $d;i.absarc(t,n,r,0,2*Math.PI);const o=new Wg;return o.subPaths.push(i),o}(t);break;case"ellipse":r=i(t,r),E=function(e){const t=c(e.getAttribute("cx")||0),n=c(e.getAttribute("cy")||0),r=c(e.getAttribute("rx")||0),i=c(e.getAttribute("ry")||0),o=new $d;o.absellipse(t,n,r,i,0,2*Math.PI);const a=new Wg;return a.subPaths.push(o),a}(t);break;case"line":r=i(t,r),E=function(e){const t=c(e.getAttribute("x1")||0),n=c(e.getAttribute("y1")||0),r=c(e.getAttribute("x2")||0),i=c(e.getAttribute("y2")||0),o=new Wg;return o.moveTo(t,n),o.lineTo(r,i),o.currentPath.autoClose=!1,o}(t);break;case"defs":l=!0;break;case"use":r=i(t,r);const s=(t.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),u=t.viewportElement.getElementById(s);u?e(u,r):console.warn("SVGLoader: 'use node' references non-existent node id: "+s)}E&&(void 0!==r.fill&&"none"!==r.fill&&E.color.setStyle(r.fill,"srgb"),function(e,t){function n(e){_.set(e.x,e.y,1).applyMatrix3(t),e.set(_.x,_.y)}function r(e){const n=e.xRadius,r=e.yRadius,i=Math.cos(e.aRotation),o=Math.sin(e.aRotation),a=new vo(n*i,n*o,0),s=new vo(-r*o,r*i,0),l=a.applyMatrix3(t),c=s.applyMatrix3(t),h=v.set(l.x,c.x,0,l.y,c.y,0,0,0,1),d=y.copy(h).invert(),f=A.copy(d).transpose().multiply(d).elements,p=function(e,t,n){let r,i,o,a,s;const l=e+n,c=e-n,u=Math.sqrt(c*c+4*t*t);l>0?(r=.5*(l+u),s=1/r,i=e*s*n-t*s*t):l<0?i=.5*(l-u):(r=.5*u,i=-.5*u);o=c>0?c+u:c-u;Math.abs(o)>2*Math.abs(t)?(s=-2*t/o,a=1/Math.sqrt(1+s*s),o=s*a):0===Math.abs(t)?(o=1,a=0):(s=-.5*o/t,o=1/Math.sqrt(1+s*s),a=s*o);c>0&&(s=o,o=-a,a=s);return{rt1:r,rt2:i,cs:o,sn:a}}(f[0],f[1],f[4]),m=Math.sqrt(p.rt1),g=Math.sqrt(p.rt2);e.xRadius=1/m,e.yRadius=1/g,e.aRotation=Math.atan2(p.sn,p.cs);if(!((e.aEndAngle-e.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const n=y.set(m,0,0,0,g,0,0,0,1),r=A.set(p.cs,p.sn,0,-p.sn,p.cs,0,0,0,1),i=n.multiply(r).multiply(h),o=e=>{const{x:t,y:n}=new vo(Math.cos(e),Math.sin(e),0).applyMatrix3(i);return Math.atan2(n,t)};e.aStartAngle=o(e.aStartAngle),e.aEndAngle=o(e.aEndAngle),u(t)&&(e.aClockwise=!e.aClockwise)}}function i(e){const n=d(t),r=f(t);e.xRadius*=n,e.yRadius*=r;const i=n>Number.EPSILON?Math.atan2(t.elements[1],t.elements[0]):Math.atan2(-t.elements[3],t.elements[4]);e.aRotation+=i,u(t)&&(e.aStartAngle*=-1,e.aEndAngle*=-1,e.aClockwise=!e.aClockwise)}const o=e.subPaths;for(let a=0,s=o.length;a<s;a++){const e=o[a].curves;for(let o=0;o<e.length;o++){const a=e[o];a.isLineCurve?(n(a.v1),n(a.v2)):a.isCubicBezierCurve?(n(a.v0),n(a.v1),n(a.v2),n(a.v3)):a.isQuadraticBezierCurve?(n(a.v0),n(a.v1),n(a.v2)):a.isEllipseCurve&&(b.set(a.aX,a.aY),n(b),a.aX=b.x,a.aY=b.y,h(t)?r(a):i(a))}}}(E,w),p.push(E),E.userData={node:t,style:r});const S=t.childNodes;for(let n=0;n<S.length;n++){const t=S[n];l&&"style"!==t.nodeName&&"defs"!==t.nodeName||e(t,r)}s&&(g.pop(),g.length>0?w.copy(g[g.length-1]):w.identity())}(E.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:p,xml:E.documentElement}}static createShapes(e){const t=999999999,n=0,r=1,i=2,o=3,a=4,s=5,l=6,c={loc:n,t:0};function u(e,t,r,o){const a=e.x,s=t.x,l=r.x,u=o.x,d=e.y,f=t.y,p=r.y,m=o.y,g=(u-l)*(d-p)-(m-p)*(a-l),v=(m-p)*(s-a)-(u-l)*(f-d),y=g/v,A=((s-a)*(d-p)-(f-d)*(a-l))/v;if(0===v&&0!==g||y<=0||y>=1||A<0||A>1)return null;if(0===g&&0===v){for(let l=0;l<2;l++){if(h(0===l?r:o,e,t),c.loc==n){const e=0===l?r:o;return{x:e.x,y:e.y,t:c.t}}if(c.loc==i){return{x:+(a+c.t*(s-a)).toPrecision(10),y:+(d+c.t*(f-d)).toPrecision(10),t:c.t}}}return null}for(let i=0;i<2;i++)if(h(0===i?r:o,e,t),c.loc==n){const e=0===i?r:o;return{x:e.x,y:e.y,t:c.t}}return{x:+(a+y*(s-a)).toPrecision(10),y:+(d+y*(f-d)).toPrecision(10),t:y}}function h(e,t,u){const h=u.x-t.x,d=u.y-t.y,f=e.x-t.x,p=e.y-t.y,m=h*p-f*d;if(e.x===t.x&&e.y===t.y)return c.loc=n,void(c.t=0);if(e.x===u.x&&e.y===u.y)return c.loc=r,void(c.t=1);if(m<-Number.EPSILON)return void(c.loc=o);if(m>Number.EPSILON)return void(c.loc=a);if(h*f<0||d*p<0)return void(c.loc=s);if(Math.sqrt(h*h+d*d)<Math.sqrt(f*f+p*p))return void(c.loc=l);let g;g=0!==h?f/h:p/d,c.loc=i,c.t=g}function d(e,t,n){const r=new zi;t.getCenter(r);const i=[];return n.forEach((t=>{if(t.boundingBox.containsPoint(r)){const n=function(e,t){const n=[],r=[];for(let i=1;i<e.length;i++){const o=e[i-1],a=e[i];for(let e=1;e<t.length;e++){const i=u(o,a,t[e-1],t[e]);null!==i&&void 0===n.find((e=>e.t<=i.t+Number.EPSILON&&e.t>=i.t-Number.EPSILON))&&(n.push(i),r.push(new zi(i.x,i.y)))}}return r}(e,t.points);n.forEach((e=>{i.push({identifier:t.identifier,isCW:t.isCW,point:e})}))}})),i.sort(((e,t)=>e.point.x-t.point.x)),i}let f=t,p=-999999999,m=e.subPaths.map((e=>{const n=e.getPoints();let r=-999999999,i=t,o=-999999999,a=t;for(let t=0;t<n.length;t++){const e=n[t];e.y>r&&(r=e.y),e.y<i&&(i=e.y),e.x>o&&(o=e.x),e.x<a&&(a=e.x)}return p<=o&&(p=o+1),f>=a&&(f=a-1),{curves:e.curves,points:n,isCW:Uf.isClockWise(n),identifier:-1,boundingBox:new hg(new zi(a,i),new zi(o,r))}}));m=m.filter((e=>e.points.length>1));for(let y=0;y<m.length;y++)m[y].identifier=y;const g=m.map((t=>function(e,t,n,r,i){null!==i&&void 0!==i&&""!==i||(i="nonzero");const o=new zi;e.boundingBox.getCenter(o);const a=d([new zi(n,o.y),new zi(r,o.y)],e.boundingBox,t);a.sort(((e,t)=>e.point.x-t.point.x));const s=[],l=[];a.forEach((t=>{t.identifier===e.identifier?s.push(t):l.push(t)}));const c=s[0].point.x,u=[];let h=0;for(;h<l.length&&l[h].point.x<c;)u.length>0&&u[u.length-1]===l[h].identifier?u.pop():u.push(l[h].identifier),h++;if(u.push(e.identifier),"evenodd"===i){const t=u.length%2===0,n=u[u.length-2];return{identifier:e.identifier,isHole:t,for:n}}if("nonzero"===i){let n=!0,r=null,i=null;for(let e=0;e<u.length;e++){const o=u[e];n?(i=t[o].isCW,n=!1,r=o):i!==t[o].isCW&&(i=t[o].isCW,n=!0)}return{identifier:e.identifier,isHole:n,for:r}}console.warn('fill-rule: "'+i+'" is currently not implemented.')}(t,m,f,p,e.userData?e.userData.style.fillRule:void 0))),v=[];return m.forEach((e=>{if(!g[e.identifier].isHole){const t=new ff;t.curves=e.curves;g.filter((t=>t.isHole&&t.for===e.identifier)).forEach((e=>{const n=m[e.identifier],r=new $d;r.curves=n.curves,t.holes.push(r)})),v.push(t)}})),v}static getStrokeStyle(e,t,n,r,i){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:i=void 0!==i?i:4}}static pointsToStroke(e,t,n,r){const i=[],o=[],a=[];if(0===cF.pointsToStrokeWithBuffers(e,t,n,r,i,o,a))return null;const s=new hs;return s.setAttribute("position",new rs(i,3)),s.setAttribute("normal",new rs(o,3)),s.setAttribute("uv",new rs(a,2)),s}static pointsToStrokeWithBuffers(e,t,n,r,i,o,a,s){const l=new zi,c=new zi,u=new zi,h=new zi,d=new zi,f=new zi,p=new zi,m=new zi,g=new zi,v=new zi,y=new zi,A=new zi,x=new zi,b=new zi,_=new zi,w=new zi,E=new zi;n=void 0!==n?n:12,r=void 0!==r?r:.001,s=void 0!==s?s:0,e=function(e){let t=!1;for(let i=1,o=e.length-1;i<o;i++)if(e[i].distanceTo(e[i+1])<r){t=!0;break}if(!t)return e;const n=[];n.push(e[0]);for(let i=1,o=e.length-1;i<o;i++)e[i].distanceTo(e[i+1])>=r&&n.push(e[i]);return n.push(e[e.length-1]),n}(e);const S=e.length;if(S<2)return 0;const C=e[0].equals(e[S-1]);let M,T,I=e[0];const B=t.strokeWidth/2,P=1/(S-1);let R,D,O,k,L=0,F=!1,z=0,U=3*s,N=2*s;j(e[0],e[1],l).multiplyScalar(B),m.copy(e[0]).sub(l),g.copy(e[0]).add(l),v.copy(m),y.copy(g);for(let X=1;X<S;X++){M=e[X],T=X===S-1?C?e[1]:void 0:e[X+1];const n=l;if(j(I,M,n),u.copy(n).multiplyScalar(B),A.copy(M).sub(u),x.copy(M).add(u),R=L+P,D=!1,void 0!==T){j(M,T,c),u.copy(c).multiplyScalar(B),b.copy(M).sub(u),_.copy(M).add(u),O=!0,u.subVectors(T,I),n.dot(u)<0&&(O=!1),1===X&&(F=O),u.subVectors(T,M),u.normalize();const e=Math.abs(n.dot(u));if(e>Number.EPSILON){const n=B/e;u.multiplyScalar(-n),h.subVectors(M,I),d.copy(h).setLength(n).add(u),w.copy(d).negate();const r=d.length(),i=h.length();h.divideScalar(i),f.subVectors(T,M);const o=f.length();switch(f.divideScalar(o),h.dot(w)<i&&f.dot(w)<o&&(D=!0),E.copy(d).add(M),w.add(M),k=!1,D?O?(_.copy(w),x.copy(w)):(b.copy(w),A.copy(w)):H(),t.strokeLineJoin){case"bevel":V(O,D,R);break;case"round":W(O,D),O?Q(M,A,b,R,0):Q(M,_,x,R,1);break;default:const e=B*t.strokeMiterLimit/r;if(e<1){if("miter-clip"!==t.strokeLineJoin){V(O,D,R);break}W(O,D),O?(f.subVectors(E,A).multiplyScalar(e).add(A),p.subVectors(E,b).multiplyScalar(e).add(b),G(A,R,0),G(f,R,0),G(M,R,.5),G(M,R,.5),G(f,R,0),G(p,R,0),G(M,R,.5),G(p,R,0),G(b,R,0)):(f.subVectors(E,x).multiplyScalar(e).add(x),p.subVectors(E,_).multiplyScalar(e).add(_),G(x,R,1),G(f,R,1),G(M,R,.5),G(M,R,.5),G(f,R,1),G(p,R,1),G(M,R,.5),G(p,R,1),G(_,R,1))}else D?(O?(G(g,L,1),G(m,L,0),G(E,R,0),G(g,L,1),G(E,R,0),G(w,R,1)):(G(g,L,1),G(m,L,0),G(E,R,1),G(m,L,0),G(w,R,0),G(E,R,1)),O?b.copy(E):_.copy(E)):O?(G(A,R,0),G(E,R,0),G(M,R,.5),G(M,R,.5),G(E,R,0),G(b,R,0)):(G(x,R,1),G(E,R,1),G(M,R,.5),G(M,R,.5),G(E,R,1),G(_,R,1)),k=!0}}else H()}else H();C||X!==S-1||q(e[0],v,y,O,!0,L),L=R,I=M,m.copy(b),g.copy(_)}if(C){if(D&&i){let e=E,t=w;F!==O&&(e=w,t=E),O?(k||F)&&(t.toArray(i,0),t.toArray(i,9),k&&e.toArray(i,3)):!k&&F||(t.toArray(i,3),t.toArray(i,9),k&&e.toArray(i,0))}}else q(M,A,x,O,!1,R);return z;function j(e,t,n){return n.subVectors(t,e),n.set(-n.y,n.x).normalize()}function G(e,t,n){i&&(i[U]=e.x,i[U+1]=e.y,i[U+2]=0,o&&(o[U]=0,o[U+1]=0,o[U+2]=1),U+=3,a&&(a[N]=t,a[N+1]=n,N+=2)),z+=3}function Q(e,t,r,i,o){l.copy(t).sub(e).normalize(),c.copy(r).sub(e).normalize();let a=Math.PI;const s=l.dot(c);Math.abs(s)<1&&(a=Math.abs(Math.acos(s))),a/=n,u.copy(t);for(let l=0,c=n-1;l<c;l++)h.copy(u).rotateAround(e,a),G(u,i,o),G(h,i,o),G(e,i,.5),u.copy(h);G(h,i,o),G(r,i,o),G(e,i,.5)}function H(){G(g,L,1),G(m,L,0),G(A,R,0),G(g,L,1),G(A,R,0),G(x,R,1)}function V(e,t,n){t?e?(G(g,L,1),G(m,L,0),G(A,R,0),G(g,L,1),G(A,R,0),G(w,R,1),G(A,n,0),G(b,n,0),G(w,n,.5)):(G(g,L,1),G(m,L,0),G(x,R,1),G(m,L,0),G(w,R,0),G(x,R,1),G(x,n,1),G(w,n,0),G(_,n,1)):e?(G(A,n,0),G(b,n,0),G(M,n,.5)):(G(x,n,1),G(_,n,0),G(M,n,.5))}function W(e,t){t&&(e?(G(g,L,1),G(m,L,0),G(A,R,0),G(g,L,1),G(A,R,0),G(w,R,1),G(A,L,0),G(M,R,.5),G(w,R,1),G(M,R,.5),G(b,L,0),G(w,R,1)):(G(g,L,1),G(m,L,0),G(x,R,1),G(m,L,0),G(w,R,0),G(x,R,1),G(x,L,1),G(w,R,0),G(M,R,.5),G(M,R,.5),G(w,R,0),G(_,L,1)))}function q(e,n,r,o,s,d){switch(t.strokeLineCap){case"round":s?Q(e,r,n,d,.5):Q(e,n,r,d,.5);break;case"square":if(s)l.subVectors(n,e),c.set(l.y,-l.x),u.addVectors(l,c).add(e),h.subVectors(c,l).add(e),o?(u.toArray(i,3),h.toArray(i,0),h.toArray(i,9)):(u.toArray(i,3),1===a[7]?h.toArray(i,9):u.toArray(i,9),h.toArray(i,0));else{l.subVectors(r,e),c.set(l.y,-l.x),u.addVectors(l,c).add(e),h.subVectors(c,l).add(e);const t=i.length;o?(u.toArray(i,t-3),h.toArray(i,t-6),h.toArray(i,t-12)):(h.toArray(i,t-6),u.toArray(i,t-3),h.toArray(i,t-12))}}}}}const uF=(0,l.forwardRef)((function(e,t){let{src:n,skipFill:r,skipStrokes:i,fillMaterial:o,strokeMaterial:a,fillMeshProps:s,strokeMeshProps:c,...u}=e;const h=py(cF,n.startsWith("<svg")?`data:image/svg+xml;utf8,${n}`:n),d=(0,l.useMemo)((()=>i?[]:h.paths.map((e=>{var t;return void 0===(null==(t=e.userData)?void 0:t.style.stroke)||"none"===e.userData.style.stroke?null:e.subPaths.map((t=>cF.pointsToStroke(t.getPoints(),e.userData.style)))}))),[h,i]);(0,l.useEffect)((()=>()=>d.forEach((e=>e&&e.map((e=>e.dispose()))))),[d]);let f=0;return l.createElement("object3D",tC({ref:t},u),l.createElement("object3D",{scale:[1,-1,1]},h.paths.map(((e,t)=>{var n,u;return l.createElement(l.Fragment,{key:t},!r&&void 0!==(null==(n=e.userData)?void 0:n.style.fill)&&"none"!==e.userData.style.fill&&cF.createShapes(e).map(((t,n)=>l.createElement("mesh",tC({key:n},s,{renderOrder:f++}),l.createElement("shapeGeometry",{args:[t]}),l.createElement("meshBasicMaterial",tC({color:e.userData.style.fill,opacity:e.userData.style.fillOpacity,transparent:!0,side:Ke,depthWrite:!1},o))))),!i&&void 0!==(null==(u=e.userData)?void 0:u.style.stroke)&&"none"!==e.userData.style.stroke&&e.subPaths.map(((n,r)=>l.createElement("mesh",tC({key:r,geometry:d[t][r]},c,{renderOrder:f++}),l.createElement("meshBasicMaterial",tC({color:e.userData.style.stroke,opacity:e.userData.style.strokeOpacity,transparent:!0,side:Ke,depthWrite:!1},a))))))}))))})),hF=new WeakMap;class dF extends kp{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,r){const i=new zp(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{const n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)}),n,r)}decodeDracoFile(e,t,n,r){const i={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,i).then(t)}decodeGeometry(e,t){for(const s in t.attributeTypes){const e=t.attributeTypes[s];void 0!==e.BYTES_PER_ELEMENT&&(t.attributeTypes[s]=e.name)}const n=JSON.stringify(t);if(hF.has(e)){const t=hF.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const i=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(i,o).then((n=>(r=n,new Promise(((n,o)=>{r._callbacks[i]={resolve:n,reject:o},r.postMessage({type:"decode",id:i,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{r&&i&&this._releaseTask(r,i)})),hF.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new hs;e.index&&t.setIndex(new Xa(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const r=e.attributes[n],i=r.name,o=r.array,a=r.itemSize;t.setAttribute(i,new Xa(o,a))}return t}_loadLibrary(e,t){const n=new zp(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!==typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=fF.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}function fF(){let e,t;function n(e,t,n,r,i,o){const a=o.num_components(),s=n.num_points()*a,l=s*i.BYTES_PER_ELEMENT,c=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),u=e._malloc(l);t.GetAttributeDataArrayForAllPoints(n,o,c,l,u);const h=new i(e.HEAPF32.buffer,u,s).slice();return e._free(u),{name:r,array:h,itemSize:a}}onmessage=function(r){const i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const r=i.buffer,o=i.taskConfig;t.then((e=>{const t=e.draco,a=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(r),r.byteLength);try{const e=function(e,t,r,i){const o=i.attributeIDs,a=i.attributeTypes;let s,l;const c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)s=new e.Mesh,l=t.DecodeBufferToMesh(r,s);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");s=new e.PointCloud,l=t.DecodeBufferToPointCloud(r,s)}if(!l.ok()||0===s.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+l.error_msg());const u={index:null,attributes:[]};for(const h in o){const r=self[a[h]];let l,c;if(i.useUniqueIDs)c=o[h],l=t.GetAttributeByUniqueId(s,c);else{if(c=t.GetAttributeId(s,e[o[h]]),-1===c)continue;l=t.GetAttribute(s,c)}u.attributes.push(n(e,t,s,h,r,l))}c===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){const r=n.num_faces(),i=3*r,o=4*i,a=e._malloc(o);t.GetTrianglesUInt32Array(n,o,a);const s=new Uint32Array(e.HEAPF32.buffer,a,i).slice();return e._free(a),{array:s,itemSize:1}}(e,t,s));return e.destroy(s),u}(t,a,s,o),r=e.attributes.map((e=>e.array.buffer));e.index&&r.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},r)}catch(Wy){console.error(Wy),self.postMessage({type:"error",id:i.id,error:Wy.message})}finally{t.destroy(s),t.destroy(a)}}))}}}let pF;const mF=()=>{if(pF)return pF;const e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if("object"!==typeof WebAssembly)return{supported:!1};let n,r="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB";WebAssembly.validate(e)&&(r="B9h9z9tFBBBFiI9gBB9gLaaaaaFa9gEaaaB9gFaFaEMcBBFBFFGGGEILF9wFFFLEFBFKNFaFCx/aFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBG8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBIy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBKi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBOn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBNI9z9iqlBVc+N9IcIBTEM9+FLa8jUUUUBCTlRBCBRFEXCBRGCBREEXABCNJAGJAECUaAFAGrCFZHIy86BBAEAIJREAGCFJHGCN9HQBMAFCx+YUUBJAE86BBAFCEWCxkUUBJAB8pEN83EBAFCFJHFCUG9HQBMMk8lLbaE97F9+FaL978jUUUUBCU/KBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAG/8cBBCUoBAG9uC/wgBZHKCUGAKCUG9JyRNAECFJRKCBRVGXEXAVAF9PQFANAFAVlAVANJAF9JyRcGXGXAG9FQBAcCbJHIC9wZHMCE9sRSAMCFWRQAICIrCEJCGrRfCBRbEXAKRTCBRtGXEXGXAOATlAf9PQBCBRKSLMALCU/CBJAtAM9sJRmATAfJRKCBREGXAMCoB9JQBAOAKlC/gB9JQBCBRIEXAmAIJREGXGXGXGXGXATAICKrJ2BBHYCEZfIBFGEBMAECBDtDMIBSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIBAKCTJRKMGXGXGXGXGXAYCGrCEZfIBFGEBMAECBDtDMITSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMITAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMITAKCTJRKMGXGXGXGXGXAYCIrCEZfIBFGEBMAECBDtDMIASEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIAAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAEAKDBBBDMIAAKCTJRKMGXGXGXGXGXAYCKrfIBFGEBMAECBDtDMI8wSEMAEAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCIJAeDeBJAYCx+YUUBJ2BBJRKSGMAEAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHYCEWCxkUUBJDBEBAYCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHYCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMI8wAKCNJAeDeBJAYCx+YUUBJ2BBJRKSFMAEAKDBBBDMI8wAKCTJRKMAICoBJREAICUFJAM9LQFAERIAOAKlC/fB9LQBMMGXAEAM9PQBAECErRIEXGXAOAKlCi9PQBCBRKSOMAmAEJRYGXGXGXGXGXATAECKrJ2BBAICKZrCEZfIBFGEBMAYCBDtDMIBSEMAYAKDBBIAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnHPCGD+MFAPDQBTFtGmEYIPLdKeOnC0+G+MiDtD9OHdCEDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCIJAeDeBJAiCx+YUUBJ2BBJRKSGMAYAKDBBNAKDBBBHPCID+MFAPDQBTFtGmEYIPLdKeOnC+P+e+8/4BDtD9OHdCbDbD8jHPAPDQBFGENVcMILKOSQfbHeD8dBh+BsxoxoUwN0AeD8dFhxoUwkwk+gUa0sHnhTkAnsHnhNkAnsHn7CgFZHiCEWCxkUUBJDBEBAiCx+YUUBJDBBBHeAeDQBBBBBBBBBBBBBBBBAnhAk7CgFZHiCEWCxkUUBJDBEBD9uDQBFGEILKOTtmYPdenDfAdAPD9SDMIBAKCNJAeDeBJAiCx+YUUBJ2BBJRKSFMAYAKDBBBDMIBAKCTJRKMAICGJRIAECTJHEAM9JQBMMGXAK9FQBAKRTAtCFJHtCI6QGSFMMCBRKSEMGXAM9FQBALCUGJAbJREALAbJDBGBReCBRYEXAEALCU/CBJAYJHIDBIBHdCFD9tAdCFDbHPD9OD9hD9RHdAIAMJDBIBH8ZCFD9tA8ZAPD9OD9hD9RH8ZDQBTFtGmEYIPLdKeOnHpAIAQJDBIBHyCFD9tAyAPD9OD9hD9RHyAIASJDBIBH8cCFD9tA8cAPD9OD9hD9RH8cDQBTFtGmEYIPLdKeOnH8dDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGEAeD9uHeDyBjGBAEAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeApA8dDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNiV8ZcpMyS8cQ8df8eb8fHdAyA8cDQNiV8ZcpMyS8cQ8df8eb8fH8ZDQBFTtGEmYILPdKOenHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJHIAeAdA8ZDQNVi8ZcMpySQ8c8dfb8e8fHPAPDQBFGEBFGEBFGEBFGED9uHeDyBjGBAIAGJHIAeAPAPDQILKOILKOILKOILKOD9uHeDyBjGBAIAGJHIAeAPAPDQNVcMNVcMNVcMNVcMD9uHeDyBjGBAIAGJHIAeAPAPDQSQfbSQfbSQfbSQfbD9uHeDyBjGBAIAGJREAYCTJHYAM9JQBMMAbCIJHbAG9JQBMMABAVAG9sJALCUGJAcAG9s/8cBBALALCUGJAcCaJAG9sJAG/8cBBMAcCBAKyAVJRVAKQBMC9+RKSFMCBC99AOAKlAGCAAGCA9Ly6yRKMALCU/KBJ8kUUUUBAKMNBT+BUUUBM+KmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUF/8MBALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM/dLEK97FaF97GXGXAGCI9HQBAF9FQFCBRGEXABABDBBBHECiD+rFCiD+sFD/6FHIAECND+rFCiD+sFD/6FAID/gFAECTD+rFCiD+sFD/6FHLD/gFD/kFD/lFHKCBDtD+2FHOAICUUUU94DtHND9OD9RD/kFHI9DBB/+hDYAIAID/mFAKAKD/mFALAOALAND9OD9RD/kFHIAID/mFD/kFD/kFD/jFD/nFHLD/mF9DBBX9LDYHOD/kFCgFDtD9OAECUUU94DtD9OD9QAIALD/mFAOD/kFCND+rFCU/+EDtD9OD9QAKALD/mFAOD/kFCTD+rFCUU/8ODtD9OD9QDMBBABCTJRBAGCIJHGAF9JQBSGMMAF9FQBCBRGEXABCTJHVAVDBBBHECBDtHOCUU98D8cFCUU98D8cEHND9OABDBBBHKAEDQILKOSQfbPden8c8d8e8fCggFDtD9OD/6FAKAEDQBFGENVcMTtmYi8ZpyHECTD+sFD/6FHID/gFAECTD+rFCTD+sFD/6FHLD/gFD/kFD/lFHE9DB/+g6DYALAEAOD+2FHOALCUUUU94DtHcD9OD9RD/kFHLALD/mFAEAED/mFAIAOAIAcD9OD9RD/kFHEAED/mFD/kFD/kFD/jFD/nFHID/mF9DBBX9LDYHOD/kFCTD+rFALAID/mFAOD/kFCggEDtD9OD9QHLAEAID/mFAOD/kFCaDbCBDnGCBDnECBDnKCBDnOCBDncCBDnMCBDnfCBDnbD9OHEDQNVi8ZcMpySQ8c8dfb8e8fD9QDMBBABAKAND9OALAEDQBFTtGEmYILPdKOenD9QDMBBABCAJRBAGCIJHGAF9JQBMMM/hEIGaF97FaL978jUUUUBCTlREGXAF9FQBCBRIEXAEABDBBBHLABCTJHKDBBBHODQILKOSQfbPden8c8d8e8fHNCTD+sFHVCID+rFDMIBAB9DBBU8/DY9D/zI818/DYAVCEDtD9QD/6FD/nFHVALAODQBFGENVcMTtmYi8ZpyHLCTD+rFCTD+sFD/6FD/mFHOAOD/mFAVALCTD+sFD/6FD/mFHcAcD/mFAVANCTD+rFCTD+sFD/6FD/mFHNAND/mFD/kFD/kFD/lFCBDtD+4FD/jF9DB/+g6DYHVD/mF9DBBX9LDYHLD/kFCggEDtHMD9OAcAVD/mFALD/kFCTD+rFD9QHcANAVD/mFALD/kFCTD+rFAOAVD/mFALD/kFAMD9OD9QHVDQBFTtGEmYILPdKOenHLD8dBAEDBIBDyB+t+J83EBABCNJALD8dFAEDBIBDyF+t+J83EBAKAcAVDQNVi8ZcMpySQ8c8dfb8e8fHVD8dBAEDBIBDyG+t+J83EBABCiJAVD8dFAEDBIBDyE+t+J83EBABCAJRBAICIJHIAF9JQBMMM9jFF97GXAGCGrAF9sHG9FQBCBRFEXABABDBBBHECND+rFCND+sFD/6FAECiD+sFCnD+rFCUUU/8EDtD+uFD/mFDMBBABCTJRBAFCIJHFAG9JQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEMMMFBCUNMIT9tBB");const i=WebAssembly.instantiate(function(e){const n=new Uint8Array(e.length);for(let t=0;t<e.length;++t){const r=e.charCodeAt(t);n[t]=r>96?r-71:r>64?r-65:r>47?r+4:r>46?63:62}let r=0;for(let i=0;i<e.length;++i)n[r++]=n[i]<60?t[n[i]]:64*(n[i]-60)+n[++i];return n.buffer.slice(0,r)}(r),{}).then((e=>{n=e.instance,n.exports.__wasm_call_ctors()}));function o(e,t,r,i,o,a){const s=n.exports.sbrk,l=r+3&-4,c=s(l*i),u=s(o.length),h=new Uint8Array(n.exports.memory.buffer);h.set(o,u);const d=e(c,r,i,u,o.length);if(0===d&&a&&a(c,l,i),t.set(h.subarray(c,c+r*i)),s(c-s(0)),0!==d)throw new Error(`Malformed buffer data: ${d}`)}const a={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},s={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return pF={ready:i,supported:!0,decodeVertexBuffer(e,t,r,i,s){o(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[a[s]])},decodeIndexBuffer(e,t,r,i){o(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence(e,t,r,i){o(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer(e,t,r,i,l,c){o(n.exports[s[l]],e,t,r,i,n.exports[a[c]])}},pF};function gF(e){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(NQ){return t}}const vF="srgb",yF="srgb-linear";class AF extends kp{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new SF(e)})),this.register((function(e){return new CF(e)})),this.register((function(e){return new kF(e)})),this.register((function(e){return new LF(e)})),this.register((function(e){return new FF(e)})),this.register((function(e){return new TF(e)})),this.register((function(e){return new IF(e)})),this.register((function(e){return new BF(e)})),this.register((function(e){return new PF(e)})),this.register((function(e){return new EF(e)})),this.register((function(e){return new RF(e)})),this.register((function(e){return new MF(e)})),this.register((function(e){return new OF(e)})),this.register((function(e){return new DF(e)})),this.register((function(e){return new _F(e)})),this.register((function(e){return new zF(e)})),this.register((function(e){return new UF(e)}))}load(e,t,n,r){const i=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=hm.extractUrlBase(e);o=hm.resolveURL(t,this.path)}else o=hm.extractUrlBase(e);this.manager.itemStart(e);const a=function(t){r?r(t):console.error(t),i.manager.itemError(e),i.manager.itemEnd(e)},s=new zp(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{i.parse(n,o,(function(n){t(n),i.manager.itemEnd(e)}),a)}catch(NQ){a(NQ)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const o={},a={};if("string"===typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(gF(new Uint8Array(e.slice(0,4)))===NF){try{o[bF.KHR_BINARY_GLTF]=new QF(e)}catch(Wy){return void(r&&r(Wy))}i=JSON.parse(o[bF.KHR_BINARY_GLTF].content)}else i=JSON.parse(gF(new Uint8Array(e)))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const s=new pz(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});s.fileLoader.setRequestHeader(this.requestHeader);for(let l=0;l<this.pluginCallbacks.length;l++){const e=this.pluginCallbacks[l](s);e.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),a[e.name]=e,o[e.name]=!0}if(i.extensionsUsed)for(let l=0;l<i.extensionsUsed.length;++l){const e=i.extensionsUsed[l],t=i.extensionsRequired||[];switch(e){case bF.KHR_MATERIALS_UNLIT:o[e]=new wF;break;case bF.KHR_DRACO_MESH_COMPRESSION:o[e]=new HF(i,this.dracoLoader);break;case bF.KHR_TEXTURE_TRANSFORM:o[e]=new VF;break;case bF.KHR_MESH_QUANTIZATION:o[e]=new WF;break;default:t.indexOf(e)>=0&&void 0===a[e]&&console.warn('THREE.GLTFLoader: Unknown extension "'+e+'".')}}s.setExtensions(o),s.setPlugins(a),s.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function xF(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const bF={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class _F{constructor(e){this.parser=e,this.name=bF.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let r=t.cache.get(n);if(r)return r;const i=t.json,o=((i.extensions&&i.extensions[this.name]||{}).lights||[])[e];let a;const s=new La(16777215);void 0!==o.color&&s.setRGB(o.color[0],o.color[1],o.color[2],yF);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new om(s),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new rm(s),a.distance=l;break;case"spot":a=new Zp(s),a.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,lz(a,o),void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),r=Promise.resolve(a),t.cache.add(n,r),r}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class wF{constructor(){this.name=bF.KHR_MATERIALS_UNLIT}getMaterialType(){return Na}extendParams(e,t,n){const r=[];e.color=new La(1,1,1),e.opacity=1;const i=t.pbrMetallicRoughness;if(i){if(Array.isArray(i.baseColorFactor)){const t=i.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],yF),e.opacity=t[3]}void 0!==i.baseColorTexture&&r.push(n.assignTexture(e,"map",i.baseColorTexture,vF))}return Promise.all(r)}}class EF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class SF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&i.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&i.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(i.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new zi(e,e)}return Promise.all(i)}}class CF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class MF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.iridescenceFactor&&(t.iridescence=o.iridescenceFactor),void 0!==o.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",o.iridescenceTexture)),void 0!==o.iridescenceIor&&(t.iridescenceIOR=o.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==o.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=o.iridescenceThicknessMinimum),void 0!==o.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=o.iridescenceThicknessMaximum),void 0!==o.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",o.iridescenceThicknessTexture)),Promise.all(i)}}class TF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[];t.sheenColor=new La(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=r.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],yF)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&i.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,vF)),void 0!==o.sheenRoughnessTexture&&i.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(i)}}class IF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)}}class BF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&i.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new La).setRGB(a[0],a[1],a[2],yF),Promise.all(i)}}class PF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class RF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&i.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new La).setRGB(a[0],a[1],a[2],yF),void 0!==o.specularColorTexture&&i.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,vF)),Promise.all(i)}}class DF{constructor(e){this.parser=e,this.name=bF.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return t.bumpScale=void 0!==o.bumpFactor?o.bumpFactor:1,void 0!==o.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",o.bumpTexture)),Promise.all(i)}}class OF{constructor(e){this.parser=e,this.name=bF.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?op:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],o=r.extensions[this.name];return void 0!==o.anisotropyStrength&&(t.anisotropy=o.anisotropyStrength),void 0!==o.anisotropyRotation&&(t.anisotropyRotation=o.anisotropyRotation),void 0!==o.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",o.anisotropyTexture)),Promise.all(i)}}class kF{constructor(e){this.parser=e,this.name=bF.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],o=t.options.ktx2Loader;if(!o){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,o)}}class LF{constructor(e){this.parser=e,this.name=bF.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class FF{constructor(e){this.parser=e,this.name=bF.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const o=i.extensions[t],a=r.images[o.source];let s=n.textureLoader;if(a.uri){const e=n.options.manager.getHandler(a.uri);null!==e&&(s=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,o.source,s);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class zF{constructor(e){this.name=bF.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,o=e.count,a=e.byteStride,s=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(o,a,s,e.mode,e.filter).then((function(e){return e.buffer})):i.ready.then((function(){const t=new ArrayBuffer(o*a);return i.decodeGltfBuffer(new Uint8Array(t),o,a,s,e.mode,e.filter),t}))}))}return null}}class UF{constructor(e){this.name=bF.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const r=t.meshes[n.mesh];for(const s of r.primitives)if(s.mode!==JF.TRIANGLES&&s.mode!==JF.TRIANGLE_STRIP&&s.mode!==JF.TRIANGLE_FAN&&void 0!==s.mode)return null;const i=n.extensions[this.name].attributes,o=[],a={};for(const s in i)o.push(this.parser.getDependency("accessor",i[s]).then((e=>(a[s]=e,a[s]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],r=e[0].count,i=[];for(const o of n){const e=new qo,t=new vo,n=new go,s=new vo(1,1,1),l=new Uh(o.geometry,o.material,r);for(let i=0;i<r;i++)a.TRANSLATION&&t.fromBufferAttribute(a.TRANSLATION,i),a.ROTATION&&n.fromBufferAttribute(a.ROTATION,i),a.SCALE&&s.fromBufferAttribute(a.SCALE,i),l.setMatrixAt(i,e.compose(t,n,s));for(const r in a)if("_COLOR_0"===r){const e=a[r];l.instanceColor=new Ph(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==r&&"ROTATION"!==r&&"SCALE"!==r&&o.geometry.setAttribute(r,a[r]);xa.prototype.copy.call(l,o),this.parser.assignFinalMaterial(l),i.push(l)}return t.isGroup?(t.clear(),t.add(...i),t):i[0]})))}}const NF="glTF",jF=1313821514,GF=5130562;class QF{constructor(e){this.name=bF.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12);if(this.header={magic:gF(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==NF)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const n=this.header.length-12,r=new DataView(e,12);let i=0;for(;i<n;){const t=r.getUint32(i,!0);i+=4;const n=r.getUint32(i,!0);if(i+=4,n===jF){const n=new Uint8Array(e,12+i,t);this.content=gF(n)}else if(n===GF){const n=12+i;this.body=e.slice(n,n+t)}i+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class HF{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=bF.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,r=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(const c in o){const e=tz[c]||c.toLowerCase();a[e]=o[c]}for(const c in e.attributes){const t=tz[c]||c.toLowerCase();if(void 0!==o[c]){const r=n.accessors[e.attributes[c]],i=KF[r.componentType];l[t]=i.name,s[t]=!0===r.normalized}}return t.getDependency("bufferView",i).then((function(e){return new Promise((function(t,n){r.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=s[t];void 0!==r&&(n.normalized=r)}t(e)}),a,l,yF,n)}))}))}}class VF{constructor(){this.name=bF.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class WF{constructor(){this.name=bF.KHR_MESH_QUANTIZATION}}class qF extends yp{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let o=0;o!==r;o++)t[o]=n[i+o];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,c=r-t,u=(n-t)/c,h=u*u,d=h*u,f=e*l,p=f-l,m=-2*d+3*h,g=d-h,v=1-m,y=g-h+u;for(let A=0;A!==a;A++){const e=o[p+A+a],t=o[p+A+s]*c,n=o[f+A+a],r=o[f+A]*c;i[A]=v*e+y*t+m*n+g*r}return i}}const XF=new go;class YF extends qF{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return XF.fromArray(i).normalize().toArray(i),i}}const JF={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},KF={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},ZF={9728:en,9729:an,9984:tn,9985:sn,9986:rn,9987:cn},$F={33071:Zt,33648:$t,10497:Kt},ez={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},tz={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...jD>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},nz={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rz={CUBICSPLINE:void 0,LINEAR:yr,STEP:vr},iz="OPAQUE",oz="MASK",az="BLEND";function sz(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function lz(e,t){void 0!==t.extras&&("object"===typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function cz(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function uz(e){let t;const n=e.extensions&&e.extensions[bF.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+hz(n.attributes):e.indices+":"+hz(e.attributes)+":"+e.mode,void 0!==e.targets)for(let r=0,i=e.targets.length;r<i;r++)t+=":"+hz(e.targets[r]);return t}function hz(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function dz(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const fz=new qo;class pz{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new xF,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,r=!1,i=-1;"undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),r=navigator.userAgent.indexOf("Firefox")>-1,i=r?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"===typeof createImageBitmap||n||r&&i<98?this.textureLoader=new Hp(this.options.manager):this.textureLoader=new ym(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new zp(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return sz(i,o,r),lz(o,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(o)}))).then((function(){for(const e of o.scenes)e.updateMatrixWorld();e(o)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let r=0,i=t.length;r<i;r++){const n=t[r].joints;for(let t=0,r=n.length;t<r;t++)e[n[t]].isBone=!0}for(let r=0,i=e.length;r<i;r++){const t=e[r];void 0!==t.mesh&&(this._addNodeRef(this.meshCache,t.mesh),void 0!==t.skin&&(n[t.mesh].isSkinnedMesh=!0)),void 0!==t.camera&&this._addNodeRef(this.cameraCache,t.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[r,o]of e.children.entries())i(o,t.children[r])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[bF.KHR_BINARY_GLTF].body);const r=this.options;return new Promise((function(e,i){n.load(hm.resolveURL(t.uri,r.path),e,void 0,(function(){i(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse){const e=ez[r.type],t=KF[r.componentType],n=!0===r.normalized,i=new t(r.count*e);return Promise.resolve(new Xa(i,e,n))}const i=[];return void 0!==r.bufferView?i.push(this.getDependency("bufferView",r.bufferView)):i.push(null),void 0!==r.sparse&&(i.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),i.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(i).then((function(e){const i=e[0],o=ez[r.type],a=KF[r.componentType],s=a.BYTES_PER_ELEMENT,l=s*o,c=r.byteOffset||0,u=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,h=!0===r.normalized;let d,f;if(u&&u!==l){const e=Math.floor(c/u),n="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+e+":"+r.count;let l=t.cache.get(n);l||(d=new a(i,e*u,r.count*u/s),l=new Xu(d,u/s),t.cache.add(n,l)),f=new Ju(l,o,c%u/s,h)}else d=null===i?new a(r.count*o):new a(i,c,r.count*o),f=new Xa(d,o,h);if(void 0!==r.sparse){const t=ez.SCALAR,n=KF[r.sparse.indices.componentType],s=r.sparse.indices.byteOffset||0,l=r.sparse.values.byteOffset||0,c=new n(e[1],s,r.sparse.count*t),u=new a(e[2],l,r.sparse.count*o);null!==i&&(f=new Xa(f.array.slice(),f.itemSize,f.normalized));for(let e=0,r=c.length;e<r;e++){const t=c[e];if(f.setX(t,u[e*o]),o>=2&&f.setY(t,u[e*o+1]),o>=3&&f.setZ(t,u[e*o+2]),o>=4&&f.setW(t,u[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let o=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(o=e)}return this.loadTextureImage(e,r,o)}loadTextureImage(e,t,n){const r=this,i=this.json,o=i.textures[e],a=i.images[t],s=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[s])return this.textureCache[s];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"===typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(i.samplers||{})[o.sampler]||{};return t.magFilter=ZF[n.magFilter]||an,t.minFilter=ZF[n.minFilter]||cn,t.wrapS=$F[n.wrapS]||Kt,t.wrapT=$F[n.wrapT]||Kt,r.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[s]=l,l}loadImageSource(e,t){const n=this,r=this.json,i=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=r.images[e],a=self.URL||self.webkitURL;let s=o.uri||"",l=!1;if(void 0!==o.bufferView)s=n.getDependency("bufferView",o.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:o.mimeType});return s=a.createObjectURL(t),s}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const c=Promise.resolve(s).then((function(e){return new Promise((function(n,r){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new so(e);t.needsUpdate=!0,n(t)}),t.load(hm.resolveURL(e,i.path),o,void 0,r)}))})).then((function(e){var t;return!0===l&&a.revokeObjectURL(s),lz(e,o),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",s),e}));return this.sourceCache[e]=c,c}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(o){if(!o)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((o=o.clone()).channel=n.texCoord),i.extensions[bF.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[bF.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(o);o=i.extensions[bF.KHR_TEXTURE_TRANSFORM].extendTexture(o,e),i.associations.set(o,t)}}return void 0!==r&&("number"===typeof r&&(r=3001===r?vF:yF),"colorSpace"in o?o.colorSpace=r:o.encoding=r===vF?3001:3e3),e[t]=o,o}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const r=void 0===t.attributes.tangent,i=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new Ad,Ua.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new od,Ua.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(r||i||o){let e="ClonedMaterial:"+n.uuid+":";r&&(e+="derivative-tangents:"),i&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),i&&(t.vertexColors=!0),o&&(t.flatShading=!0),r&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return ip}loadMaterial(e){const t=this,n=this.json,r=this.extensions,i=n.materials[e];let o;const a={},s=[];if((i.extensions||{})[bF.KHR_MATERIALS_UNLIT]){const e=r[bF.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),s.push(e.extendParams(a,i,t))}else{const n=i.pbrMetallicRoughness||{};if(a.color=new La(1,1,1),a.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;a.color.setRGB(e[0],e[1],e[2],yF),a.opacity=e[3]}void 0!==n.baseColorTexture&&s.push(t.assignTexture(a,"map",n.baseColorTexture,vF)),a.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,a.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(s.push(t.assignTexture(a,"metalnessMap",n.metallicRoughnessTexture)),s.push(t.assignTexture(a,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),s.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,a)}))))}!0===i.doubleSided&&(a.side=Ke);const l=i.alphaMode||iz;if(l===az?(a.transparent=!0,a.depthWrite=!1):(a.transparent=!1,l===oz&&(a.alphaTest=void 0!==i.alphaCutoff?i.alphaCutoff:.5)),void 0!==i.normalTexture&&o!==Na&&(s.push(t.assignTexture(a,"normalMap",i.normalTexture)),a.normalScale=new zi(1,1),void 0!==i.normalTexture.scale)){const e=i.normalTexture.scale;a.normalScale.set(e,e)}if(void 0!==i.occlusionTexture&&o!==Na&&(s.push(t.assignTexture(a,"aoMap",i.occlusionTexture)),void 0!==i.occlusionTexture.strength&&(a.aoMapIntensity=i.occlusionTexture.strength)),void 0!==i.emissiveFactor&&o!==Na){const e=i.emissiveFactor;a.emissive=(new La).setRGB(e[0],e[1],e[2],yF)}return void 0!==i.emissiveTexture&&o!==Na&&s.push(t.assignTexture(a,"emissiveMap",i.emissiveTexture,vF)),Promise.all(s).then((function(){const n=new o(a);return i.name&&(n.name=i.name),lz(n,i),t.associations.set(n,{materials:e}),i.extensions&&sz(r,n,i),n}))}createUniqueName(e){const t=qm.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,r=this.primitiveCache;function i(e){return n[bF.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return mz(n,e,t)}))}const o=[];for(let a=0,s=e.length;a<s;a++){const n=e[a],s=uz(n),l=r[s];if(l)o.push(l.promise);else{let e;e=n.extensions&&n.extensions[bF.KHR_DRACO_MESH_COMPRESSION]?i(n):mz(new hs,n,t),r[s]={primitive:n,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,r=this.extensions,i=n.meshes[e],o=i.primitives,a=[];for(let l=0,c=o.length;l<c;l++){const e=void 0===o[l].material?(void 0===(s=this.cache).DefaultMaterial&&(s.DefaultMaterial=new ip({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Ye})),s.DefaultMaterial):this.getDependency("material",o[l].material);a.push(e)}var s;return a.push(t.loadGeometries(o)),Promise.all(a).then((function(n){const a=n.slice(0,n.length-1),s=n[n.length-1],l=[];for(let u=0,h=s.length;u<h;u++){const n=s[u],c=o[u];let h;const d=a[u];if(c.mode===JF.TRIANGLES||c.mode===JF.TRIANGLE_STRIP||c.mode===JF.TRIANGLE_FAN||void 0===c.mode)h=!0===i.isSkinnedMesh?new Sh(n,d):new Is(n,d),!0===h.isSkinnedMesh&&h.normalizeSkinWeights(),c.mode===JF.TRIANGLE_STRIP?h.geometry=Lk(h.geometry,Cr):c.mode===JF.TRIANGLE_FAN&&(h.geometry=Lk(h.geometry,Mr));else if(c.mode===JF.LINES)h=new vd(n,d);else if(c.mode===JF.LINE_STRIP)h=new fd(n,d);else if(c.mode===JF.LINE_LOOP)h=new yd(n,d);else{if(c.mode!==JF.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+c.mode);h=new Ed(n,d)}Object.keys(h.geometry.morphAttributes).length>0&&cz(h,i),h.name=t.createUniqueName(i.name||"mesh_"+e),lz(h,i),c.extensions&&sz(r,h,c),t.assignFinalMaterial(h),l.push(h)}for(let r=0,i=l.length;r<i;r++)t.associations.set(l[r],{meshes:e,primitives:r});if(1===l.length)return i.extensions&&sz(r,l[0],i),l[0];const c=new ku;i.extensions&&sz(r,c,i),t.associations.set(c,{meshes:e});for(let e=0,t=l.length;e<t;e++)c.add(l[e]);return c}))}loadCamera(e){let t;const n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new js(Fi.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new pl(-r.xmag,r.xmag,r.ymag,-r.ymag,r.znear,r.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),lz(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let r=0,i=t.joints.length;r<i;r++)n.push(this._loadNodeShallow(t.joints[r]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),r=e,i=[],o=[];for(let a=0,s=r.length;a<s;a++){const e=r[a];if(e){i.push(e);const t=new qo;null!==n&&t.fromArray(n.array,16*a),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}return new Bh(i,o)}))}loadAnimation(e){const t=this.json,n=this,r=t.animations[e],i=r.name?r.name:"animation_"+e,o=[],a=[],s=[],l=[],c=[];for(let u=0,h=r.channels.length;u<h;u++){const e=r.channels[u],t=r.samplers[e.sampler],n=e.target,i=n.node,h=void 0!==r.parameters?r.parameters[t.input]:t.input,d=void 0!==r.parameters?r.parameters[t.output]:t.output;void 0!==n.node&&(o.push(this.getDependency("node",i)),a.push(this.getDependency("accessor",h)),s.push(this.getDependency("accessor",d)),l.push(t),c.push(n))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(s),Promise.all(l),Promise.all(c)]).then((function(e){const t=e[0],r=e[1],o=e[2],a=e[3],s=e[4],l=[];for(let i=0,c=t.length;i<c;i++){const e=t[i],c=r[i],u=o[i],h=a[i],d=s[i];if(void 0===e)continue;e.updateMatrix&&e.updateMatrix();const f=n._createAnimationTracks(e,c,u,h,d);if(f)for(let t=0;t<f.length;t++)l.push(f[t])}return new Bp(i,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],o=n.children||[];for(let s=0,l=o.length;s<l;s++)i.push(t.getDependency("node",o[s]));const a=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),a]).then((function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,fz)}));for(let i=0,o=n.length;i<o;i++)t.add(n[i]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,r=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const i=t.nodes[e],o=i.name?r.createUniqueName(i.name):"",a=[],s=r._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return s&&a.push(s),void 0!==i.camera&&a.push(r.getDependency("camera",i.camera).then((function(e){return r._getNodeRef(r.cameraCache,i.camera,e)}))),r._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){let a;if(a=!0===i.isBone?new Ch:t.length>1?new ku:1===t.length?t[0]:new xa,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(i.name&&(a.userData.name=i.name,a.name=o),lz(a,i),i.extensions&&sz(n,a,i),void 0!==i.matrix){const e=new qo;e.fromArray(i.matrix),a.applyMatrix4(e)}else void 0!==i.translation&&a.position.fromArray(i.translation),void 0!==i.rotation&&a.quaternion.fromArray(i.rotation),void 0!==i.scale&&a.scale.fromArray(i.scale);return r.associations.has(a)||r.associations.set(a,{}),r.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],r=this,i=new ku;n.name&&(i.name=r.createUniqueName(n.name)),lz(i,n),n.extensions&&sz(t,i,n);const o=n.nodes||[],a=[];for(let s=0,l=o.length;s<l;s++)a.push(r.getDependency("node",o[s]));return Promise.all(a).then((function(e){for(let t=0,n=e.length;t<n;t++)i.add(e[t]);return r.associations=(e=>{const t=new Map;for(const[n,i]of r.associations)(n instanceof Ua||n instanceof so)&&t.set(n,i);return e.traverse((e=>{const n=r.associations.get(e);null!=n&&t.set(e,n)})),t})(i),i}))}_createAnimationTracks(e,t,n,r,i){const o=[],a=e.name?e.name:e.uuid,s=[];let l;switch(nz[i.path]===nz.weights?e.traverse((function(e){e.morphTargetInfluences&&s.push(e.name?e.name:e.uuid)})):s.push(a),nz[i.path]){case nz.weights:l=Sp;break;case nz.rotation:l=Mp;break;case nz.position:case nz.scale:l=Ip;break;default:if(1===n.itemSize)l=Sp;else l=Ip}const c=void 0!==r.interpolation?rz[r.interpolation]:yr,u=this._getArrayFromAccessor(n);for(let h=0,d=s.length;h<d;h++){const e=new l(s[h]+"."+nz[i.path],t.array,u,c);"CUBICSPLINE"===r.interpolation&&this._createCubicSplineTrackInterpolant(e),o.push(e)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=dz(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof Mp?YF:qF)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function mz(e,t,n){const r=t.attributes,i=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const a in r){const t=tz[a]||a.toLowerCase();t in e.attributes||i.push(o(r[a],t))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));i.push(r)}return lz(e,t),function(e,t,n){const r=t.attributes,i=new xo;if(void 0===r.POSITION)return;{const e=n.json.accessors[r.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(i.set(new vo(t[0],t[1],t[2]),new vo(o[0],o[1],o[2])),e.normalized){const t=dz(KF[e.componentType]);i.min.multiplyScalar(t),i.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new vo,t=new vo;for(let r=0,i=o.length;r<i;r++){const i=o[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],o=r.min,a=r.max;if(void 0!==o&&void 0!==a){if(t.setX(Math.max(Math.abs(o[0]),Math.abs(a[0]))),t.setY(Math.max(Math.abs(o[1]),Math.abs(a[1]))),t.setZ(Math.max(Math.abs(o[2]),Math.abs(a[2]))),r.normalized){const e=dz(KF[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}i.expandByVector(e)}e.boundingBox=i;const a=new zo;i.getCenter(a.center),a.radius=i.min.distanceTo(i.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(i).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,o=!1;for(let c=0,u=t.length;c<u;c++){const e=t[c];if(void 0!==e.POSITION&&(r=!0),void 0!==e.NORMAL&&(i=!0),void 0!==e.COLOR_0&&(o=!0),r&&i&&o)break}if(!r&&!i&&!o)return Promise.resolve(e);const a=[],s=[],l=[];for(let c=0,u=t.length;c<u;c++){const u=t[c];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;a.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;s.push(t)}if(o){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;l.push(t)}}return Promise.all([Promise.all(a),Promise.all(s),Promise.all(l)]).then((function(t){const n=t[0],a=t[1],s=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=a),o&&(e.morphAttributes.color=s),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}let gz=null,vz="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function yz(e,t,n){return r=>{n&&n(r),e&&(gz||(gz=new dF),gz.setDecoderPath("string"===typeof e?e:vz),r.setDRACOLoader(gz)),t&&r.setMeshoptDecoder("function"===typeof mF?mF():mF)}}function Az(e){return py(AF,e,yz(!(arguments.length>1&&void 0!==arguments[1])||arguments[1],!(arguments.length>2&&void 0!==arguments[2])||arguments[2],arguments.length>3?arguments[3]:void 0))}Az.preload=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3?arguments[3]:void 0;return py.preload(AF,e,yz(t,n,r))},Az.clear=e=>py.clear(AF,e),Az.setDecoderPath=e=>{vz=e};const xz=l.forwardRef(((e,t)=>{let{src:n,useDraco:r,useMeshOpt:i,extendLoader:o,...a}=e;const{scene:s}=Az(n,r,i,o);return l.createElement(KL,tC({ref:t},a,{object:s}))}));class bz{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:" .:-=+*#%@",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=n.resolution||.15,i=n.scale||1,o=n.color||!1,a=n.alpha||!1,s=n.block||!1,l=n.invert||!1,c=n.strResolution||"low";let u,h;const d=document.createElement("div");d.style.cursor="default";const f=document.createElement("table");let p,m,g;d.appendChild(f),this.setSize=function(t,n){u=t,h=n,e.setSize(t,n),function(){p=Math.floor(u*r),m=Math.floor(h*r),b.width=p,b.height=m,g=e.domElement,g.style.backgroundColor&&(f.rows[0].cells[0].style.backgroundColor=g.style.backgroundColor,f.rows[0].cells[0].style.color=g.style.color);f.cellSpacing=0,f.cellPadding=0;const t=f.style;t.whiteSpace="pre",t.margin="0px",t.padding="0px",t.letterSpacing=C+"px",t.fontFamily=A,t.fontSize=E+"px",t.lineHeight=S+"px",t.textAlign="left",t.textDecoration="none"}()},this.render=function(t,n){e.render(t,n),function(e){_.clearRect(0,0,p,m),_.drawImage(x,0,0,p,m);const t=_.getImageData(0,0,p,m).data;let n="";for(let r=0;r<m;r+=2){for(let e=0;e<p;e++){const i=4*(r*p+e),c=t[i],u=t[i+1],h=t[i+2],d=t[i+3];let f,m;m=(.3*c+.59*u+.11*h)/255,0==d&&(m=1),f=Math.floor((1-m)*(w.length-1)),l&&(f=w.length-f-1);let g=w[f];void 0!==g&&" "!=g||(g="&nbsp;"),n+=o?"<span style='color:rgb("+c+","+u+","+h+");"+(s?"background-color:rgb("+c+","+u+","+h+");":"")+(a?"opacity:"+d/255+";":"")+"'>"+g+"</span>":g}n+="<br/>"}e.innerHTML=`<tr><td style="display:block;width:${u}px;height:${h}px;overflow:hidden">${n}</td></tr>`}(f)},this.domElement=d;const v=" .,:;i1tfLCG08@".split(""),y=" CGO08@".split(""),A="courier new, monospace",x=e.domElement,b=document.createElement("canvas");if(!b.getContext)return;const _=b.getContext("2d");if(!_.getImageData)return;let w=o?y:v;t&&(w=t);const E=2/r*i,S=2/r*i;let C=0;if("low"==c)switch(i){case 1:C=-1;break;case 2:case 3:C=-2.1;break;case 4:C=-3.1;break;case 5:C=-4.15}if("medium"==c)switch(i){case 1:C=0;break;case 2:C=-1;break;case 3:C=-1.04;break;case 4:case 5:C=-2.1}if("high"==c)switch(i){case 1:case 2:C=0;break;case 3:case 4:case 5:C=-1}}}function _z(e){let{renderIndex:t=1,bgColor:n="black",fgColor:r="white",characters:i=" .:-+*=%@#",invert:o=!0,color:a=!1,resolution:s=.15}=e;const{size:c,gl:u,scene:h,camera:d}=cy(),f=l.useMemo((()=>{const e=new bz(u,i,{invert:o,color:a,resolution:s});return e.domElement.style.position="absolute",e.domElement.style.top="0px",e.domElement.style.left="0px",e.domElement.style.pointerEvents="none",e}),[i,o,a,s]);return l.useLayoutEffect((()=>{f.domElement.style.color=r,f.domElement.style.backgroundColor=n}),[r,n]),l.useEffect((()=>(u.domElement.style.opacity="0",u.domElement.parentNode.appendChild(f.domElement),()=>{u.domElement.style.opacity="1",u.domElement.parentNode.removeChild(f.domElement)})),[f]),l.useEffect((()=>{f.setSize(c.width,c.height)}),[f,c]),uy((e=>{f.render(h,d)}),t),l.createElement(l.Fragment,null)}const wz=vL({alphaTest:0,viewport:new zi(1980,1080),focal:1e3,centerAndScaleTexture:null,covAndColorTexture:null},"\n    precision highp sampler2D;\n    precision highp usampler2D;\n    out vec4 vColor;\n    out vec3 vPosition;\n    uniform vec2 resolution;\n    uniform vec2 viewport;\n    uniform float focal;\n    attribute uint splatIndex;\n    uniform sampler2D centerAndScaleTexture;\n    uniform usampler2D covAndColorTexture;    \n\n    vec2 unpackInt16(in uint value) {\n      int v = int(value);\n      int v0 = v >> 16;\n      int v1 = (v & 0xFFFF);\n      if((v & 0x8000) != 0)\n        v1 |= 0xFFFF0000;\n      return vec2(float(v1), float(v0));\n    }\n\n    void main () {\n      ivec2 texSize = textureSize(centerAndScaleTexture, 0);\n      ivec2 texPos = ivec2(splatIndex%uint(texSize.x), splatIndex/uint(texSize.x));\n      vec4 centerAndScaleData = texelFetch(centerAndScaleTexture, texPos, 0);\n      vec4 center = vec4(centerAndScaleData.xyz, 1);\n      vec4 camspace = modelViewMatrix * center;\n      vec4 pos2d = projectionMatrix * camspace;\n\n      float bounds = 1.2 * pos2d.w;\n      if (pos2d.z < -pos2d.w || pos2d.x < -bounds || pos2d.x > bounds\n        || pos2d.y < -bounds || pos2d.y > bounds) {\n        gl_Position = vec4(0.0, 0.0, 2.0, 1.0);\n        return;\n      }\n\n      uvec4 covAndColorData = texelFetch(covAndColorTexture, texPos, 0);\n      vec2 cov3D_M11_M12 = unpackInt16(covAndColorData.x) * centerAndScaleData.w;\n      vec2 cov3D_M13_M22 = unpackInt16(covAndColorData.y) * centerAndScaleData.w;\n      vec2 cov3D_M23_M33 = unpackInt16(covAndColorData.z) * centerAndScaleData.w;\n      mat3 Vrk = mat3(\n        cov3D_M11_M12.x, cov3D_M11_M12.y, cov3D_M13_M22.x,\n        cov3D_M11_M12.y, cov3D_M13_M22.y, cov3D_M23_M33.x,\n        cov3D_M13_M22.x, cov3D_M23_M33.x, cov3D_M23_M33.y\n      );\n\n      mat3 J = mat3(\n        focal / camspace.z, 0., -(focal * camspace.x) / (camspace.z * camspace.z),\n        0., focal / camspace.z, -(focal * camspace.y) / (camspace.z * camspace.z),\n        0., 0., 0.\n      );\n\n      mat3 W = transpose(mat3(modelViewMatrix));\n      mat3 T = W * J;\n      mat3 cov = transpose(T) * Vrk * T;\n      vec2 vCenter = vec2(pos2d) / pos2d.w;\n      float diagonal1 = cov[0][0] + 0.3;\n      float offDiagonal = cov[0][1];\n      float diagonal2 = cov[1][1] + 0.3;\n      float mid = 0.5 * (diagonal1 + diagonal2);\n      float radius = length(vec2((diagonal1 - diagonal2) / 2.0, offDiagonal));\n      float lambda1 = mid + radius;\n      float lambda2 = max(mid - radius, 0.1);\n      vec2 diagonalVector = normalize(vec2(offDiagonal, lambda1 - diagonal1));\n      vec2 v1 = min(sqrt(2.0 * lambda1), 1024.0) * diagonalVector;\n      vec2 v2 = min(sqrt(2.0 * lambda2), 1024.0) * vec2(diagonalVector.y, -diagonalVector.x);\n      uint colorUint = covAndColorData.w;\n      vColor = vec4(\n        float(colorUint & uint(0xFF)) / 255.0,\n        float((colorUint >> uint(8)) & uint(0xFF)) / 255.0,\n        float((colorUint >> uint(16)) & uint(0xFF)) / 255.0,\n        float(colorUint >> uint(24)) / 255.0\n      );\n      vPosition = position;\n\n      gl_Position = vec4(\n        vCenter \n          + position.x * v2 / viewport * 2.0 \n          + position.y * v1 / viewport * 2.0, pos2d.z / pos2d.w, 1.0);\n    }\n    ",`\n    #include <alphatest_pars_fragment>\n    #include <alphahash_pars_fragment>\n    in vec4 vColor;\n    in vec3 vPosition;\n    void main () {\n      float A = -dot(vPosition.xy, vPosition.xy);\n      if (A < -4.0) discard;\n      float B = exp(A) * vColor.a;\n      vec4 diffuseColor = vec4(vColor.rgb, B);\n      #include <alphatest_fragment>\n      #include <alphahash_fragment>\n      gl_FragColor = diffuseColor;\n      #include <tonemapping_fragment>\n      #include <${parseInt(ze.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n    }\n  `);function Ez(e){let t=null,n=0;e.onmessage=r=>{if("push"==r.data.method){0===n&&(t=new Float32Array(r.data.length));const e=new Float32Array(r.data.matrices);t.set(e,n),n+=e.length}else if("sort"==r.data.method&&null!==t){const n=function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const r=t.length/16;let i=-1/0,o=1/0;const a=new Float32Array(r),s=new Int32Array(a.buffer),l=new Int32Array(r);let c=0;for(let p=0;p<r;p++){const r=e[0]*t[16*p+12]+e[1]*t[16*p+13]+e[2]*t[16*p+14]+e[3];(n||r<0&&t[16*p+15]>-1e-4*r)&&(a[c]=r,l[c]=p,c++,r>i&&(i=r),r<o&&(o=r))}const u=65535/(i-o),h=new Uint32Array(65536);for(let t=0;t<c;t++)s[t]=(a[t]-o)*u|0,h[s[t]]++;const d=new Uint32Array(65536);for(let t=1;t<65536;t++)d[t]=d[t-1]+h[t-1];const f=new Uint32Array(c);for(let t=0;t<c;t++)f[d[s[t]]++]=l[t];return f}(new Float32Array(r.data.view),r.data.hashed);e.postMessage({indices:n,key:r.data.key},[n.buffer])}}}class Sz extends kp{constructor(){super(...arguments),this.gl=null,this.chunkSize=25e3}load(e,t,n,r){const i={gl:this.gl,url:this.manager.resolveURL(e),worker:new Worker(URL.createObjectURL(new Blob(["(",Ez.toString(),")(self)"],{type:"application/javascript"}))),manager:this.manager,update:(e,t,n)=>function(e,t,n,r){if(e.updateMatrixWorld(),t.gl.getCurrentViewport(n.viewport),n.material.viewport.x=n.viewport.z,n.material.viewport.y=n.viewport.w,n.material.focal=n.viewport.w/2*Math.abs(e.projectionMatrix.elements[5]),n.ready){if(r&&n.sorted)return;n.ready=!1;const e=new Float32Array([n.modelViewMatrix.elements[2],-n.modelViewMatrix.elements[6],n.modelViewMatrix.elements[10],n.modelViewMatrix.elements[14]]);t.worker.postMessage({method:"sort",src:t.url,key:n.uuid,view:e.buffer,hashed:r},[e.buffer]),r&&t.loaded&&(n.sorted=!0)}}(t,i,e,n),connect:e=>function(e,t){e.loading||async function(e){e.loading=!0;let t=0,n=0;const r=[];let i=0;const o=0!==e.totalDownloadBytes;for(;;)try{const{value:a,done:s}=await e.stream.read();if(s)break;if(t+=a.length,void 0!=e.totalDownloadBytes){const n=t/e.totalDownloadBytes*100;if(e.onProgress&&n-i>1){const r=new ProgressEvent("progress",{lengthComputable:o,loaded:t,total:e.totalDownloadBytes});e.onProgress(r),i=n}}r.push(a);const l=t-n;if(void 0!=e.totalDownloadBytes&&l>e.rowLength*e.chunkSize){let t=Math.floor(l/e.rowLength);const i=new Uint8Array(l);let a=0;for(const e of r)i.set(e,a),a+=e.length;if(r.length=0,l>t*e.rowLength){const n=new Uint8Array(l-t*e.rowLength);n.set(i.subarray(l-n.length,l),0),r.push(n)}const s=new Uint8Array(t*e.rowLength);s.set(i.subarray(0,s.byteLength),0);const c=Cz(e,s.buffer,t);if(e.worker.postMessage({method:"push",src:e.url,length:16*e.numVertices,matrices:c.buffer},[c.buffer]),n+=t*e.rowLength,e.onProgress){const t=new ProgressEvent("progress",{lengthComputable:o,loaded:e.totalDownloadBytes,total:e.totalDownloadBytes});e.onProgress(t)}}}catch(Wy){console.error(Wy);break}if(t-n>0){let t=new Uint8Array(r.reduce(((e,t)=>e+t.length),0)),n=0;for(const e of r)t.set(e,n),n+=e.length;let i=Math.floor(t.byteLength/e.rowLength);const o=Cz(e,t.buffer,i);e.worker.postMessage({method:"push",src:e.url,length:16*i,matrices:o.buffer},[o.buffer])}e.loaded=!0,e.manager.itemEnd(e.url)}(e);t.ready=!1,t.pm=new qo,t.vm1=new qo,t.vm2=new qo,t.viewport=new lo;let n=new Uint32Array(e.bufferTextureWidth*e.bufferTextureHeight);const r=new Ph(n,1,!1);r.setUsage(pi);const i=t.geometry=new dm,o=new Float32Array(18),a=new Xa(o,3);function s(e){if(t&&e.data.key===t.uuid){let n=new Uint32Array(e.data.indices);i.attributes.splatIndex.set(n),i.attributes.splatIndex.needsUpdate=!0,i.instanceCount=n.length,t.ready=!0}}async function l(){for(;;){const t=e.gl.properties.get(e.centerAndScaleTexture),n=e.gl.properties.get(e.covAndColorTexture);if(null!=t&&t.__webglTexture&&null!=n&&n.__webglTexture&&e.loadedVertexCount>0)break;await new Promise((e=>setTimeout(e,10)))}t.ready=!0}return i.setAttribute("position",a),a.setXYZ(2,-2,2,0),a.setXYZ(1,2,2,0),a.setXYZ(0,-2,-2,0),a.setXYZ(5,-2,-2,0),a.setXYZ(4,2,2,0),a.setXYZ(3,2,-2,0),a.needsUpdate=!0,i.setAttribute("splatIndex",r),i.instanceCount=1,e.worker.addEventListener("message",s),l(),()=>e.worker.removeEventListener("message",s)}(i,e),loading:!1,loaded:!1,loadedVertexCount:0,chunkSize:this.chunkSize,totalDownloadBytes:0,numVertices:0,rowLength:32,maxVertexes:0,bufferTextureWidth:0,bufferTextureHeight:0,stream:null,centerAndScaleData:null,covAndColorData:null,covAndColorTexture:null,centerAndScaleTexture:null,onProgress:n};(async function(e){e.manager.itemStart(e.url);const t=await fetch(e.url);if(null===t.body)throw"Failed to fetch file";let n=t.headers.get("Content-Length");const r=n?parseInt(n):void 0;if(void 0==r)throw"Failed to get content length";e.stream=t.body.getReader(),e.totalDownloadBytes=r,e.numVertices=Math.floor(e.totalDownloadBytes/e.rowLength);const i=e.gl.getContext();let o=i.getParameter(i.MAX_TEXTURE_SIZE);e.maxVertexes=o*o,e.numVertices>e.maxVertexes&&(e.numVertices=e.maxVertexes);return e.bufferTextureWidth=o,e.bufferTextureHeight=Math.floor((e.numVertices-1)/o)+1,e.centerAndScaleData=new Float32Array(e.bufferTextureWidth*e.bufferTextureHeight*4),e.covAndColorData=new Uint32Array(e.bufferTextureWidth*e.bufferTextureHeight*4),e.centerAndScaleTexture=new Mh(e.centerAndScaleData,e.bufferTextureWidth,e.bufferTextureHeight,Sn,vn),e.centerAndScaleTexture.needsUpdate=!0,e.covAndColorTexture=new Mh(e.covAndColorData,e.bufferTextureWidth,e.bufferTextureHeight,kn,gn),e.covAndColorTexture.internalFormat="RGBA32UI",e.covAndColorTexture.needsUpdate=!0,e})(i).then(t).catch((e=>{null==r||r(e),i.manager.itemError(i.url)}))}}function Cz(e,t,n){const r=e.gl.getContext();if(e.loadedVertexCount+n>e.maxVertexes&&(n=e.maxVertexes-e.loadedVertexCount),n<=0)throw"Failed to parse file";const i=new Uint8Array(t),o=new Float32Array(t),a=new Float32Array(16*n),s=new Uint8Array(e.covAndColorData.buffer),l=new Int16Array(e.covAndColorData.buffer);for(let c=0;c<n;c++){const t=new go(-(i[32*c+28+1]-128)/128,(i[32*c+28+2]-128)/128,(i[32*c+28+3]-128)/128,-(i[32*c+28+0]-128)/128);t.invert();const n=new vo(o[8*c+0],o[8*c+1],-o[8*c+2]),r=new vo(o[8*c+3+0],o[8*c+3+1],o[8*c+3+2]),u=new qo;u.makeRotationFromQuaternion(t),u.transpose(),u.scale(r);const h=u.clone();u.transpose(),u.premultiply(h),u.setPosition(n);const d=[0,1,2,5,6,10];let f=0;for(let e=0;e<d.length;e++)Math.abs(u.elements[d[e]])>f&&(f=Math.abs(u.elements[d[e]]));let p=4*e.loadedVertexCount+4*c;e.centerAndScaleData[p+0]=n.x,e.centerAndScaleData[p+1]=-n.y,e.centerAndScaleData[p+2]=n.z,e.centerAndScaleData[p+3]=f/32767,p=8*e.loadedVertexCount+4*c*2;for(let e=0;e<d.length;e++)l[p+e]=32767*u.elements[d[e]]/f;p=16*e.loadedVertexCount+4*(4*c+3);const m=new La(i[32*c+24+0]/255,i[32*c+24+1]/255,i[32*c+24+2]/255);m.convertSRGBToLinear(),s[p+0]=255*m.r,s[p+1]=255*m.g,s[p+2]=255*m.b,s[p+3]=i[32*c+24+3],u.elements[15]=Math.max(r.x,r.y,r.z)*i[32*c+24+3]/255;for(let e=0;e<16;e++)a[16*c+e]=u.elements[e]}for(;n>0;){let t=0,i=0;const o=e.loadedVertexCount%e.bufferTextureWidth,a=Math.floor(e.loadedVertexCount/e.bufferTextureWidth);e.loadedVertexCount%e.bufferTextureWidth!=0?(t=Math.min(e.bufferTextureWidth,o+n)-o,i=1):Math.floor(n/e.bufferTextureWidth)>0?(t=e.bufferTextureWidth,i=Math.floor(n/e.bufferTextureWidth)):(t=n%e.bufferTextureWidth,i=1);const s=e.gl.properties.get(e.centerAndScaleTexture);r.bindTexture(r.TEXTURE_2D,s.__webglTexture),r.texSubImage2D(r.TEXTURE_2D,0,o,a,t,i,r.RGBA,r.FLOAT,e.centerAndScaleData,4*e.loadedVertexCount);const l=e.gl.properties.get(e.covAndColorTexture);r.bindTexture(r.TEXTURE_2D,l.__webglTexture),r.texSubImage2D(r.TEXTURE_2D,0,o,a,t,i,r.RGBA_INTEGER,r.UNSIGNED_INT,e.covAndColorData,4*e.loadedVertexCount),e.gl.resetState(),e.loadedVertexCount+=t*i,n-=t*i}return a}function Mz(e){let{src:t,toneMapped:n=!1,alphaTest:r=0,alphaHash:i=!1,chunkSize:o=25e3,...a}=e;hv({SplatMaterial:wz});const s=l.useRef(null),c=cy((e=>e.gl)),u=cy((e=>e.camera)),h=py(Sz,t,(e=>{e.gl=c,e.chunkSize=o}));return l.useLayoutEffect((()=>h.connect(s.current)),[t]),uy((()=>h.update(s.current,u,i))),l.createElement("mesh",tC({ref:s,frustumCulled:!1},a),l.createElement("splatMaterial",{key:`${t}/${r}/${i}${wz.key}`,transparent:!i,depthTest:!0,alphaTest:i?0:r,centerAndScaleTexture:h.centerAndScaleTexture,covAndColorTexture:h.covAndColorTexture,depthWrite:!!i||r>0,blending:i?$e:rt,blendSrcAlpha:ut,alphaHash:!!i,toneMapped:n}))}function Tz(e,t,n){const r=cy((e=>e.size)),i=cy((e=>e.viewport)),o="number"===typeof e?e:r.width*i.dpr,a="number"===typeof t?t:r.height*i.dpr,s=("number"===typeof e?n:e)||{},{samples:c=0,depth:u,...h}=s,d=l.useMemo((()=>{const e=new uo(o,a,{minFilter:an,magFilter:an,type:yn,...h});return u&&(e.depthTexture=new Ul(o,a,vn)),e.samples=c,e}),[]);return l.useLayoutEffect((()=>{d.setSize(o,a),c&&(d.samples=c)}),[c,d,o,a]),l.useEffect((()=>()=>d.dispose()),[]),d}const Iz=e=>{let{children:t,width:n,height:r,...i}=e;const o=Tz(n,r,i);return l.createElement(l.Fragment,null,null==t?void 0:t(o))},Bz=l.forwardRef(((e,t)=>{let{envMap:n,resolution:r=256,frames:i=1/0,children:o,makeDefault:a,...s}=e;const c=cy((e=>{let{set:t}=e;return t})),u=cy((e=>{let{camera:t}=e;return t})),h=cy((e=>{let{size:t}=e;return t})),d=l.useRef(null);l.useImperativeHandle(t,(()=>d.current),[]);const f=l.useRef(null),p=Tz(r);l.useLayoutEffect((()=>{s.manual||d.current.updateProjectionMatrix()}),[h,s]),l.useLayoutEffect((()=>{d.current.updateProjectionMatrix()})),l.useLayoutEffect((()=>{if(a){const e=u;return c((()=>({camera:d.current}))),()=>c((()=>({camera:e})))}}),[d,a,c]);let m=0,g=null;const v="function"===typeof o;return uy((e=>{v&&(i===1/0||m<i)&&(f.current.visible=!1,e.gl.setRenderTarget(p),g=e.scene.background,n&&(e.scene.background=n),e.gl.render(e.scene,d.current),e.scene.background=g,e.gl.setRenderTarget(null),f.current.visible=!0,m++)})),l.createElement(l.Fragment,null,l.createElement("orthographicCamera",tC({left:h.width/-2,right:h.width/2,top:h.height/2,bottom:h.height/-2,ref:d},s),!v&&o),l.createElement("group",{ref:f},v&&o(p.texture)))})),Pz=l.forwardRef(((e,t)=>{let{envMap:n,resolution:r=256,frames:i=1/0,makeDefault:o,children:a,...s}=e;const c=cy((e=>{let{set:t}=e;return t})),u=cy((e=>{let{camera:t}=e;return t})),h=cy((e=>{let{size:t}=e;return t})),d=l.useRef(null);l.useImperativeHandle(t,(()=>d.current),[]);const f=l.useRef(null),p=Tz(r);l.useLayoutEffect((()=>{s.manual||(d.current.aspect=h.width/h.height)}),[h,s]),l.useLayoutEffect((()=>{d.current.updateProjectionMatrix()}));let m=0,g=null;const v="function"===typeof a;return uy((e=>{v&&(i===1/0||m<i)&&(f.current.visible=!1,e.gl.setRenderTarget(p),g=e.scene.background,n&&(e.scene.background=n),e.gl.render(e.scene,d.current),e.scene.background=g,e.gl.setRenderTarget(null),f.current.visible=!0,m++)})),l.useLayoutEffect((()=>{if(o){const e=u;return c((()=>({camera:d.current}))),()=>c((()=>({camera:e})))}}),[d,o,c]),l.createElement(l.Fragment,null,l.createElement("perspectiveCamera",tC({ref:d},s),!v&&a),l.createElement("group",{ref:f},v&&a(p.texture)))}));function Rz(){let{resolution:e=256,near:t=.1,far:n=1e3,envMap:r,fog:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const o=cy((e=>{let{gl:t}=e;return t})),a=cy((e=>{let{scene:t}=e;return t})),s=(0,l.useMemo)((()=>{const t=new Vs(e);return t.texture.type=yn,t}),[e]);(0,l.useEffect)((()=>()=>{s.dispose()}),[s]);const c=(0,l.useMemo)((()=>new Qs(t,n,s)),[t,n,s]);let u,h;const d=l.useCallback((()=>{u=a.fog,h=a.background,a.background=r||h,a.fog=i||u,c.update(o,a),a.fog=u,a.background=h}),[o,a,c]);return{fbo:s,camera:c,update:d}}function Dz(e){let{children:t,frames:n=1/0,resolution:r,near:i,far:o,envMap:a,fog:s,...c}=e;const u=l.useRef(null),{fbo:h,camera:d,update:f}=Rz({resolution:r,near:i,far:o,envMap:a,fog:s});let p=0;return uy((()=>{u.current&&(n===1/0||p<n)&&(u.current.visible=!1,f(),u.current.visible=!0,p++)})),l.createElement("group",c,l.createElement("primitive",{object:d}),l.createElement("group",{ref:u},null==t?void 0:t(h.texture)))}var Oz=Object.defineProperty,kz=(e,t,n)=>(((e,t,n)=>{t in e?Oz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class Lz extends Ci{constructor(e){super(),kz(this,"object"),kz(this,"changeEvent",{type:"change"}),kz(this,"EPS",1e-6),kz(this,"enabled",!0),kz(this,"deviceOrientation",{alpha:0,beta:0,gamma:0}),kz(this,"screenOrientation",0),kz(this,"alphaOffset",0),kz(this,"onDeviceOrientationChangeEvent",(e=>{this.deviceOrientation=e})),kz(this,"onScreenOrientationChangeEvent",(()=>{this.screenOrientation=window.orientation||0})),kz(this,"zee",new vo(0,0,1)),kz(this,"euler",new ra),kz(this,"q0",new go),kz(this,"q1",new go(-Math.sqrt(.5),0,0,Math.sqrt(.5))),kz(this,"setObjectQuaternion",((e,t,n,r,i)=>{this.euler.set(n,t,-r,"YXZ"),e.setFromEuler(this.euler),e.multiply(this.q1),e.multiply(this.q0.setFromAxisAngle(this.zee,-i))})),kz(this,"connect",(()=>{this.onScreenOrientationChangeEvent(),void 0!==window.DeviceOrientationEvent&&"function"===typeof window.DeviceOrientationEvent.requestPermission?window.DeviceOrientationEvent.requestPermission().then((e=>{"granted"==e&&(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent))})).catch((e=>{console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:",e)})):(window.addEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.addEventListener("deviceorientation",this.onDeviceOrientationChangeEvent)),this.enabled=!0})),kz(this,"disconnect",(()=>{window.removeEventListener("orientationchange",this.onScreenOrientationChangeEvent),window.removeEventListener("deviceorientation",this.onDeviceOrientationChangeEvent),this.enabled=!1})),kz(this,"lastQuaternion",new go),kz(this,"update",(()=>{if(!1===this.enabled)return;const e=this.deviceOrientation;if(e){const t=e.alpha?Fi.degToRad(e.alpha)+this.alphaOffset:0,n=e.beta?Fi.degToRad(e.beta):0,r=e.gamma?Fi.degToRad(e.gamma):0,i=this.screenOrientation?Fi.degToRad(this.screenOrientation):0;this.setObjectQuaternion(this.object.quaternion,t,n,r,i),8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS&&(this.lastQuaternion.copy(this.object.quaternion),this.dispatchEvent(this.changeEvent))}})),kz(this,"dispose",(()=>this.disconnect())),this.object=e,this.object.rotation.reorder("YXZ"),this.connect()}}const Fz=l.forwardRef(((e,t)=>{const{camera:n,onChange:r,makeDefault:i,...o}=e,a=cy((e=>e.camera)),s=cy((e=>e.invalidate)),c=cy((e=>e.get)),u=cy((e=>e.set)),h=n||a,d=l.useMemo((()=>new Lz(h)),[h]);return l.useEffect((()=>{const e=e=>{s(),r&&r(e)};return null==d||null==d.addEventListener||d.addEventListener("change",e),()=>null==d||null==d.removeEventListener?void 0:d.removeEventListener("change",e)}),[r,d,s]),uy((()=>null==d?void 0:d.update()),-1),l.useEffect((()=>{const e=d;return null==e||e.connect(),()=>null==e?void 0:e.dispose()}),[d]),l.useEffect((()=>{if(i){const e=c().controls;return u({controls:d}),()=>u({controls:e})}}),[i,d]),d?l.createElement("primitive",tC({ref:t,object:d},o)):null}));var zz=Object.defineProperty,Uz=(e,t,n)=>(((e,t,n)=>{t in e?zz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);function Nz(e){e.preventDefault()}class jz extends Ci{constructor(e,t){super(),Uz(this,"object"),Uz(this,"domElement",null),Uz(this,"movementSpeed",1),Uz(this,"rollSpeed",.005),Uz(this,"dragToLook",!1),Uz(this,"autoForward",!1),Uz(this,"changeEvent",{type:"change"}),Uz(this,"EPS",1e-6),Uz(this,"tmpQuaternion",new go),Uz(this,"mouseStatus",0),Uz(this,"movementSpeedMultiplier",1),Uz(this,"moveState",{up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0}),Uz(this,"moveVector",new vo(0,0,0)),Uz(this,"rotationVector",new vo(0,0,0)),Uz(this,"keydown",(e=>{if(!e.altKey){switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=.1;break;case"KeyW":this.moveState.forward=1;break;case"KeyS":this.moveState.back=1;break;case"KeyA":this.moveState.left=1;break;case"KeyD":this.moveState.right=1;break;case"KeyR":this.moveState.up=1;break;case"KeyF":this.moveState.down=1;break;case"ArrowUp":this.moveState.pitchUp=1;break;case"ArrowDown":this.moveState.pitchDown=1;break;case"ArrowLeft":this.moveState.yawLeft=1;break;case"ArrowRight":this.moveState.yawRight=1;break;case"KeyQ":this.moveState.rollLeft=1;break;case"KeyE":this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}})),Uz(this,"keyup",(e=>{switch(e.code){case"ShiftLeft":case"ShiftRight":this.movementSpeedMultiplier=1;break;case"KeyW":this.moveState.forward=0;break;case"KeyS":this.moveState.back=0;break;case"KeyA":this.moveState.left=0;break;case"KeyD":this.moveState.right=0;break;case"KeyR":this.moveState.up=0;break;case"KeyF":this.moveState.down=0;break;case"ArrowUp":this.moveState.pitchUp=0;break;case"ArrowDown":this.moveState.pitchDown=0;break;case"ArrowLeft":this.moveState.yawLeft=0;break;case"ArrowRight":this.moveState.yawRight=0;break;case"KeyQ":this.moveState.rollLeft=0;break;case"KeyE":this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()})),Uz(this,"pointerdown",(e=>{if(this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}})),Uz(this,"pointermove",(e=>{if(!this.dragToLook||this.mouseStatus>0){const t=this.getContainerDimensions(),n=t.size[0]/2,r=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-n)/n,this.moveState.pitchDown=(e.pageY-t.offset[1]-r)/r,this.updateRotationVector()}})),Uz(this,"pointerup",(e=>{if(this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()})),Uz(this,"lastQuaternion",new go),Uz(this,"lastPosition",new vo),Uz(this,"update",(e=>{const t=e*this.movementSpeed,n=e*this.rollSpeed;this.object.translateX(this.moveVector.x*t),this.object.translateY(this.moveVector.y*t),this.object.translateZ(this.moveVector.z*t),this.tmpQuaternion.set(this.rotationVector.x*n,this.rotationVector.y*n,this.rotationVector.z*n,1).normalize(),this.object.quaternion.multiply(this.tmpQuaternion),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||8*(1-this.lastQuaternion.dot(this.object.quaternion))>this.EPS)&&(this.dispatchEvent(this.changeEvent),this.lastQuaternion.copy(this.object.quaternion),this.lastPosition.copy(this.object.position))})),Uz(this,"updateMovementVector",(()=>{const e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back})),Uz(this,"updateRotationVector",(()=>{this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft})),Uz(this,"getContainerDimensions",(()=>this.domElement==document||this.domElement instanceof Document?{size:[window.innerWidth,window.innerHeight],offset:[0,0]}:{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]})),Uz(this,"connect",(e=>{this.domElement=e,e instanceof Document||e.setAttribute("tabindex",-1),this.domElement.addEventListener("contextmenu",Nz),this.domElement.addEventListener("pointermove",this.pointermove),this.domElement.addEventListener("pointerdown",this.pointerdown),this.domElement.addEventListener("pointerup",this.pointerup),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup)})),Uz(this,"dispose",(()=>{this.domElement.removeEventListener("contextmenu",Nz),this.domElement.removeEventListener("pointermove",this.pointermove),this.domElement.removeEventListener("pointerdown",this.pointerdown),this.domElement.removeEventListener("pointerup",this.pointerup),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup)})),this.object=e,void 0!==t&&this.connect(t),this.updateMovementVector(),this.updateRotationVector()}}const Gz=l.forwardRef(((e,t)=>{let{domElement:n,...r}=e;const{onChange:i,makeDefault:o,...a}=r,s=cy((e=>e.invalidate)),c=cy((e=>e.camera)),u=cy((e=>e.gl)),h=cy((e=>e.events)),d=cy((e=>e.get)),f=cy((e=>e.set)),p=n||h.connected||u.domElement,m=l.useMemo((()=>new jz(c)),[c]);return l.useEffect((()=>(m.connect(p),()=>{m.dispose()})),[p,m,s]),l.useEffect((()=>{const e=e=>{s(),i&&i(e)};return null==m.addEventListener||m.addEventListener("change",e),()=>null==m.removeEventListener?void 0:m.removeEventListener("change",e)}),[i,s]),l.useEffect((()=>{if(o){const e=d().controls;return f({controls:m}),()=>f({controls:e})}}),[o,m]),uy(((e,t)=>m.update(t))),l.createElement("primitive",tC({ref:t,object:m,args:[c,p]},a))}));var Qz=Object.defineProperty,Hz=(e,t,n)=>(((e,t,n)=>{t in e?Qz(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const Vz=new Wo,Wz=new Ys,qz=Math.cos(Math.PI/180*70),Xz=(e,t)=>(e%t+t)%t;class Yz extends Ci{constructor(e,t){super(),Hz(this,"object"),Hz(this,"domElement"),Hz(this,"enabled",!0),Hz(this,"target",new vo),Hz(this,"minDistance",0),Hz(this,"maxDistance",1/0),Hz(this,"minZoom",0),Hz(this,"maxZoom",1/0),Hz(this,"minPolarAngle",0),Hz(this,"maxPolarAngle",Math.PI),Hz(this,"minAzimuthAngle",-1/0),Hz(this,"maxAzimuthAngle",1/0),Hz(this,"enableDamping",!1),Hz(this,"dampingFactor",.05),Hz(this,"enableZoom",!0),Hz(this,"zoomSpeed",1),Hz(this,"enableRotate",!0),Hz(this,"rotateSpeed",1),Hz(this,"enablePan",!0),Hz(this,"panSpeed",1),Hz(this,"screenSpacePanning",!0),Hz(this,"keyPanSpeed",7),Hz(this,"zoomToCursor",!1),Hz(this,"autoRotate",!1),Hz(this,"autoRotateSpeed",2),Hz(this,"reverseOrbit",!1),Hz(this,"reverseHorizontalOrbit",!1),Hz(this,"reverseVerticalOrbit",!1),Hz(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Hz(this,"mouseButtons",{LEFT:Ue.ROTATE,MIDDLE:Ue.DOLLY,RIGHT:Ue.PAN}),Hz(this,"touches",{ONE:Ne.ROTATE,TWO:Ne.DOLLY_PAN}),Hz(this,"target0"),Hz(this,"position0"),Hz(this,"zoom0"),Hz(this,"_domElementKeyEvents",null),Hz(this,"getPolarAngle"),Hz(this,"getAzimuthalAngle"),Hz(this,"setPolarAngle"),Hz(this,"setAzimuthalAngle"),Hz(this,"getDistance"),Hz(this,"listenToKeyEvents"),Hz(this,"stopListenToKeyEvents"),Hz(this,"saveState"),Hz(this,"reset"),Hz(this,"update"),Hz(this,"connect"),Hz(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=e=>{let t=Xz(e,2*Math.PI),r=c.phi;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.phi=t-r,n.update()},this.setAzimuthalAngle=e=>{let t=Xz(e,2*Math.PI),r=c.theta;r<0&&(r+=2*Math.PI),t<0&&(t+=2*Math.PI);let i=Math.abs(t-r);2*Math.PI-i<i&&(t<r?t+=2*Math.PI:r+=2*Math.PI),u.theta=t-r,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=e=>{e.addEventListener("keydown",Y),this._domElementKeyEvents=e},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",Y),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),s=a.NONE},this.update=(()=>{const t=new vo,i=new vo(0,1,0),o=(new go).setFromUnitVectors(e.up,i),f=o.clone().invert(),p=new vo,m=new go,g=2*Math.PI;return function(){const v=n.object.position;o.setFromUnitVectors(e.up,i),f.copy(o).invert(),t.copy(v).sub(n.target),t.applyQuaternion(o),c.setFromVector3(t),n.autoRotate&&s===a.NONE&&T(2*Math.PI/60/60*n.autoRotateSpeed),n.enableDamping?(c.theta+=u.theta*n.dampingFactor,c.phi+=u.phi*n.dampingFactor):(c.theta+=u.theta,c.phi+=u.phi);let y=n.minAzimuthAngle,A=n.maxAzimuthAngle;isFinite(y)&&isFinite(A)&&(y<-Math.PI?y+=g:y>Math.PI&&(y-=g),A<-Math.PI?A+=g:A>Math.PI&&(A-=g),c.theta=y<=A?Math.max(y,Math.min(A,c.theta)):c.theta>(y+A)/2?Math.max(y,c.theta):Math.min(A,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(d,n.dampingFactor):n.target.add(d),n.zoomToCursor&&E||n.object.isOrthographicCamera?c.radius=L(c.radius):c.radius=L(c.radius*h),t.setFromSpherical(c),t.applyQuaternion(f),v.copy(n.target).add(t),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),!0===n.enableDamping?(u.theta*=1-n.dampingFactor,u.phi*=1-n.dampingFactor,d.multiplyScalar(1-n.dampingFactor)):(u.set(0,0,0),d.set(0,0,0));let x=!1;if(n.zoomToCursor&&E){let r=null;if(n.object instanceof js&&n.object.isPerspectiveCamera){const e=t.length();r=L(e*h);const i=e-r;n.object.position.addScaledVector(_,i),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const e=new vo(w.x,w.y,0);e.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix(),x=!0;const i=new vo(w.x,w.y,0);i.unproject(n.object),n.object.position.sub(i).add(e),n.object.updateMatrixWorld(),r=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==r&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(r).add(n.object.position):(Vz.origin.copy(n.object.position),Vz.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Vz.direction))<qz?e.lookAt(n.target):(Wz.setFromNormalAndCoplanarPoint(n.object.up,n.target),Vz.intersectPlane(Wz,n.target))))}else n.object instanceof pl&&n.object.isOrthographicCamera&&(x=1!==h,x&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/h)),n.object.updateProjectionMatrix()));return h=1,E=!1,!!(x||p.distanceToSquared(n.object.position)>l||8*(1-m.dot(n.object.quaternion))>l)&&(n.dispatchEvent(r),p.copy(n.object.position),m.copy(n.object.quaternion),x=!1,!0)}})(),this.connect=e=>{n.domElement=e,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",J),n.domElement.addEventListener("pointerdown",V),n.domElement.addEventListener("pointercancel",q),n.domElement.addEventListener("wheel",X)},this.dispose=()=>{var e,t,r,i,o,a;n.domElement&&(n.domElement.style.touchAction="auto"),null==(e=n.domElement)||e.removeEventListener("contextmenu",J),null==(t=n.domElement)||t.removeEventListener("pointerdown",V),null==(r=n.domElement)||r.removeEventListener("pointercancel",q),null==(i=n.domElement)||i.removeEventListener("wheel",X),null==(o=n.domElement)||o.ownerDocument.removeEventListener("pointermove",W),null==(a=n.domElement)||a.ownerDocument.removeEventListener("pointerup",q),null!==n._domElementKeyEvents&&n._domElementKeyEvents.removeEventListener("keydown",Y)};const n=this,r={type:"change"},i={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let s=a.NONE;const l=1e-6,c=new sg,u=new sg;let h=1;const d=new vo,f=new zi,p=new zi,m=new zi,g=new zi,v=new zi,y=new zi,A=new zi,x=new zi,b=new zi,_=new vo,w=new zi;let E=!1;const S=[],C={};function M(){return Math.pow(.95,n.zoomSpeed)}function T(e){n.reverseOrbit||n.reverseHorizontalOrbit?u.theta+=e:u.theta-=e}function I(e){n.reverseOrbit||n.reverseVerticalOrbit?u.phi+=e:u.phi-=e}const B=(()=>{const e=new vo;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),d.add(e)}})(),P=(()=>{const e=new vo;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),d.add(e)}})(),R=(()=>{const e=new vo;return function(t,r){const i=n.domElement;if(i&&n.object instanceof js&&n.object.isPerspectiveCamera){const o=n.object.position;e.copy(o).sub(n.target);let a=e.length();a*=Math.tan(n.object.fov/2*Math.PI/180),B(2*t*a/i.clientHeight,n.object.matrix),P(2*r*a/i.clientHeight,n.object.matrix)}else i&&n.object instanceof pl&&n.object.isOrthographicCamera?(B(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),P(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function D(e){n.object instanceof js&&n.object.isPerspectiveCamera||n.object instanceof pl&&n.object.isOrthographicCamera?h/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function O(e){n.object instanceof js&&n.object.isPerspectiveCamera||n.object instanceof pl&&n.object.isOrthographicCamera?h*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){if(!n.zoomToCursor||!n.domElement)return;E=!0;const t=n.domElement.getBoundingClientRect(),r=e.clientX-t.left,i=e.clientY-t.top,o=t.width,a=t.height;w.x=r/o*2-1,w.y=-i/a*2+1,_.set(w.x,w.y,1).unproject(n.object).sub(n.object.position).normalize()}function L(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function F(e){f.set(e.clientX,e.clientY)}function z(e){g.set(e.clientX,e.clientY)}function U(){if(1==S.length)f.set(S[0].pageX,S[0].pageY);else{const e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);f.set(e,t)}}function N(){if(1==S.length)g.set(S[0].pageX,S[0].pageY);else{const e=.5*(S[0].pageX+S[1].pageX),t=.5*(S[0].pageY+S[1].pageY);g.set(e,t)}}function j(){const e=S[0].pageX-S[1].pageX,t=S[0].pageY-S[1].pageY,n=Math.sqrt(e*e+t*t);A.set(0,n)}function G(e){if(1==S.length)p.set(e.pageX,e.pageY);else{const t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);p.set(n,r)}m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(T(2*Math.PI*m.x/t.clientHeight),I(2*Math.PI*m.y/t.clientHeight)),f.copy(p)}function Q(e){if(1==S.length)v.set(e.pageX,e.pageY);else{const t=Z(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);v.set(n,r)}y.subVectors(v,g).multiplyScalar(n.panSpeed),R(y.x,y.y),g.copy(v)}function H(e){const t=Z(e),r=e.pageX-t.x,i=e.pageY-t.y,o=Math.sqrt(r*r+i*i);x.set(0,o),b.set(0,Math.pow(x.y/A.y,n.zoomSpeed)),D(b.y),A.copy(x)}function V(e){var t,r;!1!==n.enabled&&(0===S.length&&(null==(t=n.domElement)||t.ownerDocument.addEventListener("pointermove",W),null==(r=n.domElement)||r.ownerDocument.addEventListener("pointerup",q)),function(e){S.push(e)}(e),"touch"===e.pointerType?function(e){switch(K(e),S.length){case 1:switch(n.touches.ONE){case Ne.ROTATE:if(!1===n.enableRotate)return;U(),s=a.TOUCH_ROTATE;break;case Ne.PAN:if(!1===n.enablePan)return;N(),s=a.TOUCH_PAN;break;default:s=a.NONE}break;case 2:switch(n.touches.TWO){case Ne.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;n.enableZoom&&j(),n.enablePan&&N(),s=a.TOUCH_DOLLY_PAN;break;case Ne.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;n.enableZoom&&j(),n.enableRotate&&U(),s=a.TOUCH_DOLLY_ROTATE;break;default:s=a.NONE}break;default:s=a.NONE}s!==a.NONE&&n.dispatchEvent(i)}(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case Ue.DOLLY:if(!1===n.enableZoom)return;!function(e){k(e),A.set(e.clientX,e.clientY)}(e),s=a.DOLLY;break;case Ue.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;z(e),s=a.PAN}else{if(!1===n.enableRotate)return;F(e),s=a.ROTATE}break;case Ue.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;F(e),s=a.ROTATE}else{if(!1===n.enablePan)return;z(e),s=a.PAN}break;default:s=a.NONE}s!==a.NONE&&n.dispatchEvent(i)}(e))}function W(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(K(e),s){case a.TOUCH_ROTATE:if(!1===n.enableRotate)return;G(e),n.update();break;case a.TOUCH_PAN:if(!1===n.enablePan)return;Q(e),n.update();break;case a.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&H(e),n.enablePan&&Q(e)}(e),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&H(e),n.enableRotate&&G(e)}(e),n.update();break;default:s=a.NONE}}(e):function(e){if(!1===n.enabled)return;switch(s){case a.ROTATE:if(!1===n.enableRotate)return;!function(e){p.set(e.clientX,e.clientY),m.subVectors(p,f).multiplyScalar(n.rotateSpeed);const t=n.domElement;t&&(T(2*Math.PI*m.x/t.clientHeight),I(2*Math.PI*m.y/t.clientHeight)),f.copy(p),n.update()}(e);break;case a.DOLLY:if(!1===n.enableZoom)return;!function(e){x.set(e.clientX,e.clientY),b.subVectors(x,A),b.y>0?D(M()):b.y<0&&O(M()),A.copy(x),n.update()}(e);break;case a.PAN:if(!1===n.enablePan)return;!function(e){v.set(e.clientX,e.clientY),y.subVectors(v,g).multiplyScalar(n.panSpeed),R(y.x,y.y),g.copy(v),n.update()}(e)}}(e))}function q(e){var t,r,i;!function(e){delete C[e.pointerId];for(let t=0;t<S.length;t++)if(S[t].pointerId==e.pointerId)return void S.splice(t,1)}(e),0===S.length&&(null==(t=n.domElement)||t.releasePointerCapture(e.pointerId),null==(r=n.domElement)||r.ownerDocument.removeEventListener("pointermove",W),null==(i=n.domElement)||i.ownerDocument.removeEventListener("pointerup",q)),n.dispatchEvent(o),s=a.NONE}function X(e){!1===n.enabled||!1===n.enableZoom||s!==a.NONE&&s!==a.ROTATE||(e.preventDefault(),n.dispatchEvent(i),function(e){k(e),e.deltaY<0?O(M()):e.deltaY>0&&D(M()),n.update()}(e),n.dispatchEvent(o))}function Y(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:R(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:R(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:R(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:R(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function J(e){!1!==n.enabled&&e.preventDefault()}function K(e){let t=C[e.pointerId];void 0===t&&(t=new zi,C[e.pointerId]=t),t.set(e.pageX,e.pageY)}function Z(e){const t=e.pointerId===S[0].pointerId?S[1]:S[0];return C[t.pointerId]}void 0!==t&&this.connect(t),this.update()}}class Jz extends Yz{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=Ue.PAN,this.mouseButtons.RIGHT=Ue.ROTATE,this.touches.ONE=Ne.PAN,this.touches.TWO=Ne.DOLLY_ROTATE}}const Kz=l.forwardRef((function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{enableDamping:!0},t=arguments.length>1?arguments[1]:void 0;const{domElement:n,camera:r,makeDefault:i,onChange:o,onStart:a,onEnd:s,...c}=e,u=cy((e=>e.invalidate)),h=cy((e=>e.camera)),d=cy((e=>e.gl)),f=cy((e=>e.events)),p=cy((e=>e.set)),m=cy((e=>e.get)),g=n||f.connected||d.domElement,v=r||h,y=l.useMemo((()=>new Jz(v)),[v]);return l.useEffect((()=>{y.connect(g);const e=e=>{u(),o&&o(e)};return y.addEventListener("change",e),a&&y.addEventListener("start",a),s&&y.addEventListener("end",s),()=>{y.dispose(),y.removeEventListener("change",e),a&&y.removeEventListener("start",a),s&&y.removeEventListener("end",s)}}),[o,a,s,y,u,g]),l.useEffect((()=>{if(i){const e=m().controls;return p({controls:y}),()=>p({controls:e})}}),[i,y]),uy((()=>y.update()),-1),l.createElement("primitive",tC({ref:t,object:y,enableDamping:!0},c))})),Zz=l.forwardRef(((e,t)=>{let{makeDefault:n,camera:r,regress:i,domElement:o,enableDamping:a=!0,keyEvents:s=!1,onChange:c,onStart:u,onEnd:h,...d}=e;const f=cy((e=>e.invalidate)),p=cy((e=>e.camera)),m=cy((e=>e.gl)),g=cy((e=>e.events)),v=cy((e=>e.setEvents)),y=cy((e=>e.set)),A=cy((e=>e.get)),x=cy((e=>e.performance)),b=r||p,_=o||g.connected||m.domElement,w=l.useMemo((()=>new Yz(b)),[b]);return uy((()=>{w.enabled&&w.update()}),-1),l.useEffect((()=>(s&&w.connect(!0===s?_:s),w.connect(_),()=>{w.dispose()})),[s,_,i,w,f]),l.useEffect((()=>{const e=e=>{f(),i&&x.regress(),c&&c(e)},t=e=>{u&&u(e)},n=e=>{h&&h(e)};return w.addEventListener("change",e),w.addEventListener("start",t),w.addEventListener("end",n),()=>{w.removeEventListener("start",t),w.removeEventListener("end",n),w.removeEventListener("change",e)}}),[c,u,h,w,f,v]),l.useEffect((()=>{if(n){const e=A().controls;return y({controls:w}),()=>y({controls:e})}}),[n,w]),l.createElement("primitive",tC({ref:t,object:w,enableDamping:a},d))}));var $z=Object.defineProperty,eU=(e,t,n)=>(((e,t,n)=>{t in e?$z(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class tU extends Ci{constructor(e,t){super(),eU(this,"enabled",!0),eU(this,"screen",{left:0,top:0,width:0,height:0}),eU(this,"rotateSpeed",1),eU(this,"zoomSpeed",1.2),eU(this,"panSpeed",.3),eU(this,"noRotate",!1),eU(this,"noZoom",!1),eU(this,"noPan",!1),eU(this,"staticMoving",!1),eU(this,"dynamicDampingFactor",.2),eU(this,"minDistance",0),eU(this,"maxDistance",1/0),eU(this,"keys",["KeyA","KeyS","KeyD"]),eU(this,"mouseButtons",{LEFT:Ue.ROTATE,MIDDLE:Ue.DOLLY,RIGHT:Ue.PAN}),eU(this,"object"),eU(this,"domElement"),eU(this,"cursorZoom",!1),eU(this,"target",new vo),eU(this,"mousePosition",new zi),eU(this,"STATE",{NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4}),eU(this,"EPS",1e-6),eU(this,"lastZoom",1),eU(this,"lastPosition",new vo),eU(this,"cursorVector",new vo),eU(this,"targetVector",new vo),eU(this,"_state",this.STATE.NONE),eU(this,"_keyState",this.STATE.NONE),eU(this,"_eye",new vo),eU(this,"_movePrev",new zi),eU(this,"_moveCurr",new zi),eU(this,"_lastAxis",new vo),eU(this,"_lastAngle",0),eU(this,"_zoomStart",new zi),eU(this,"_zoomEnd",new zi),eU(this,"_touchZoomDistanceStart",0),eU(this,"_touchZoomDistanceEnd",0),eU(this,"_panStart",new zi),eU(this,"_panEnd",new zi),eU(this,"target0"),eU(this,"position0"),eU(this,"up0"),eU(this,"zoom0"),eU(this,"changeEvent",{type:"change"}),eU(this,"startEvent",{type:"start"}),eU(this,"endEvent",{type:"end"}),eU(this,"onScreenVector",new zi),eU(this,"getMouseOnScreen",((e,t)=>(this.onScreenVector.set((e-this.screen.left)/this.screen.width,(t-this.screen.top)/this.screen.height),this.onScreenVector))),eU(this,"onCircleVector",new zi),eU(this,"getMouseOnCircle",((e,t)=>(this.onCircleVector.set((e-.5*this.screen.width-this.screen.left)/(.5*this.screen.width),(this.screen.height+2*(this.screen.top-t))/this.screen.width),this.onCircleVector))),eU(this,"axis",new vo),eU(this,"quaternion",new go),eU(this,"eyeDirection",new vo),eU(this,"objectUpDirection",new vo),eU(this,"objectSidewaysDirection",new vo),eU(this,"moveDirection",new vo),eU(this,"angle",0),eU(this,"rotateCamera",(()=>{this.moveDirection.set(this._moveCurr.x-this._movePrev.x,this._moveCurr.y-this._movePrev.y,0),this.angle=this.moveDirection.length(),this.angle?(this._eye.copy(this.object.position).sub(this.target),this.eyeDirection.copy(this._eye).normalize(),this.objectUpDirection.copy(this.object.up).normalize(),this.objectSidewaysDirection.crossVectors(this.objectUpDirection,this.eyeDirection).normalize(),this.objectUpDirection.setLength(this._moveCurr.y-this._movePrev.y),this.objectSidewaysDirection.setLength(this._moveCurr.x-this._movePrev.x),this.moveDirection.copy(this.objectUpDirection.add(this.objectSidewaysDirection)),this.axis.crossVectors(this.moveDirection,this._eye).normalize(),this.angle*=this.rotateSpeed,this.quaternion.setFromAxisAngle(this.axis,this.angle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion),this._lastAxis.copy(this.axis),this._lastAngle=this.angle):!this.staticMoving&&this._lastAngle&&(this._lastAngle*=Math.sqrt(1-this.dynamicDampingFactor),this._eye.copy(this.object.position).sub(this.target),this.quaternion.setFromAxisAngle(this._lastAxis,this._lastAngle),this._eye.applyQuaternion(this.quaternion),this.object.up.applyQuaternion(this.quaternion)),this._movePrev.copy(this._moveCurr)})),eU(this,"zoomCamera",(()=>{let e;if(this._state===this.STATE.TOUCH_ZOOM_PAN)e=this._touchZoomDistanceStart/this._touchZoomDistanceEnd,this._touchZoomDistanceStart=this._touchZoomDistanceEnd,this.object.isPerspectiveCamera?this._eye.multiplyScalar(e):this.object.isOrthographicCamera?(this.object.zoom/=e,this.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type");else{if(e=1+(this._zoomEnd.y-this._zoomStart.y)*this.zoomSpeed,Math.abs(e-1)>this.EPS&&e>0&&(this.object.isPerspectiveCamera?(e>1&&this._eye.length()>=this.maxDistance-this.EPS&&(e=1),this._eye.multiplyScalar(e)):this.object.isOrthographicCamera?(e>1&&this.object.zoom<this.maxDistance*this.maxDistance&&(e=1),this.object.zoom/=e):console.warn("THREE.TrackballControls: Unsupported camera type")),this.staticMoving?this._zoomStart.copy(this._zoomEnd):this._zoomStart.y+=(this._zoomEnd.y-this._zoomStart.y)*this.dynamicDampingFactor,this.cursorZoom){this.targetVector.copy(this.target).project(this.object);let t=this.cursorVector.set(this.mousePosition.x,this.mousePosition.y,this.targetVector.z).unproject(this.object);this.target.lerpVectors(t,this.target,e)}this.object.isOrthographicCamera&&this.object.updateProjectionMatrix()}})),eU(this,"mouseChange",new zi),eU(this,"objectUp",new vo),eU(this,"pan",new vo),eU(this,"panCamera",(()=>{if(this.domElement&&(this.mouseChange.copy(this._panEnd).sub(this._panStart),this.mouseChange.lengthSq()>this.EPS)){if(this.object.isOrthographicCamera){const e=this.object,t=(e.right-e.left)/this.object.zoom,n=(e.top-e.bottom)/this.object.zoom;this.mouseChange.x*=t,this.mouseChange.y*=n}else this.mouseChange.multiplyScalar(this._eye.length()*this.panSpeed);this.pan.copy(this._eye).cross(this.object.up).setLength(this.mouseChange.x),this.pan.add(this.objectUp.copy(this.object.up).setLength(this.mouseChange.y)),this.object.position.add(this.pan),this.target.add(this.pan),this.staticMoving?this._panStart.copy(this._panEnd):this._panStart.add(this.mouseChange.subVectors(this._panEnd,this._panStart).multiplyScalar(this.dynamicDampingFactor))}})),eU(this,"checkDistances",(()=>{this.noZoom&&this.noPan||(this._eye.lengthSq()>this.maxDistance*this.maxDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.maxDistance)),this._zoomStart.copy(this._zoomEnd)),this._eye.lengthSq()<this.minDistance*this.minDistance&&(this.object.position.addVectors(this.target,this._eye.setLength(this.minDistance)),this._zoomStart.copy(this._zoomEnd)))})),eU(this,"handleResize",(()=>{if(!this.domElement)return;const e=this.domElement.getBoundingClientRect(),t=this.domElement.ownerDocument.documentElement;this.screen.left=e.left+window.pageXOffset-t.clientLeft,this.screen.top=e.top+window.pageYOffset-t.clientTop,this.screen.width=e.width,this.screen.height=e.height})),eU(this,"update",(()=>{this._eye.subVectors(this.object.position,this.target),this.noRotate||this.rotateCamera(),this.noZoom||this.zoomCamera(),this.noPan||this.panCamera(),this.object.position.addVectors(this.target,this._eye),this.object.isPerspectiveCamera?(this.checkDistances(),this.object.lookAt(this.target),this.lastPosition.distanceToSquared(this.object.position)>this.EPS&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position))):this.object.isOrthographicCamera?(this.object.lookAt(this.target),(this.lastPosition.distanceToSquared(this.object.position)>this.EPS||this.lastZoom!==this.object.zoom)&&(this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")})),eU(this,"reset",(()=>{this._state=this.STATE.NONE,this._keyState=this.STATE.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.up.copy(this.up0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this._eye.subVectors(this.object.position,this.target),this.object.lookAt(this.target),this.dispatchEvent(this.changeEvent),this.lastPosition.copy(this.object.position),this.lastZoom=this.object.zoom})),eU(this,"keydown",(e=>{!1!==this.enabled&&(window.removeEventListener("keydown",this.keydown),this._keyState===this.STATE.NONE&&(e.code!==this.keys[this.STATE.ROTATE]||this.noRotate?e.code!==this.keys[this.STATE.ZOOM]||this.noZoom?e.code!==this.keys[this.STATE.PAN]||this.noPan||(this._keyState=this.STATE.PAN):this._keyState=this.STATE.ZOOM:this._keyState=this.STATE.ROTATE))})),eU(this,"onPointerDown",(e=>{if(!1!==this.enabled)switch(e.pointerType){case"mouse":case"pen":this.onMouseDown(e)}})),eU(this,"onPointerMove",(e=>{if(!1!==this.enabled)switch(e.pointerType){case"mouse":case"pen":this.onMouseMove(e)}})),eU(this,"onPointerUp",(e=>{if(!1!==this.enabled)switch(e.pointerType){case"mouse":case"pen":this.onMouseUp()}})),eU(this,"keyup",(()=>{!1!==this.enabled&&(this._keyState=this.STATE.NONE,window.addEventListener("keydown",this.keydown))})),eU(this,"onMouseDown",(e=>{if(!this.domElement)return;if(this._state===this.STATE.NONE)switch(e.button){case this.mouseButtons.LEFT:this._state=this.STATE.ROTATE;break;case this.mouseButtons.MIDDLE:this._state=this.STATE.ZOOM;break;case this.mouseButtons.RIGHT:this._state=this.STATE.PAN}const t=this._keyState!==this.STATE.NONE?this._keyState:this._state;t!==this.STATE.ROTATE||this.noRotate?t!==this.STATE.ZOOM||this.noZoom?t!==this.STATE.PAN||this.noPan||(this._panStart.copy(this.getMouseOnScreen(e.pageX,e.pageY)),this._panEnd.copy(this._panStart)):(this._zoomStart.copy(this.getMouseOnScreen(e.pageX,e.pageY)),this._zoomEnd.copy(this._zoomStart)):(this._moveCurr.copy(this.getMouseOnCircle(e.pageX,e.pageY)),this._movePrev.copy(this._moveCurr)),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.startEvent)})),eU(this,"onMouseMove",(e=>{if(!1===this.enabled)return;const t=this._keyState!==this.STATE.NONE?this._keyState:this._state;t!==this.STATE.ROTATE||this.noRotate?t!==this.STATE.ZOOM||this.noZoom?t!==this.STATE.PAN||this.noPan||this._panEnd.copy(this.getMouseOnScreen(e.pageX,e.pageY)):this._zoomEnd.copy(this.getMouseOnScreen(e.pageX,e.pageY)):(this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(e.pageX,e.pageY)))})),eU(this,"onMouseUp",(()=>{this.domElement&&!1!==this.enabled&&(this._state=this.STATE.NONE,this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),this.dispatchEvent(this.endEvent))})),eU(this,"mousewheel",(e=>{if(!1!==this.enabled&&!0!==this.noZoom){switch(e.preventDefault(),e.deltaMode){case 2:this._zoomStart.y-=.025*e.deltaY;break;case 1:this._zoomStart.y-=.01*e.deltaY;break;default:this._zoomStart.y-=25e-5*e.deltaY}this.mousePosition.x=e.offsetX/this.screen.width*2-1,this.mousePosition.y=-e.offsetY/this.screen.height*2+1,this.dispatchEvent(this.startEvent),this.dispatchEvent(this.endEvent)}})),eU(this,"touchstart",(e=>{if(!1!==this.enabled){if(e.preventDefault(),1===e.touches.length)this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(e.touches[0].pageX,e.touches[0].pageY)),this._movePrev.copy(this._moveCurr);else{this._state=this.STATE.TOUCH_ZOOM_PAN;const t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;this._touchZoomDistanceEnd=this._touchZoomDistanceStart=Math.sqrt(t*t+n*n);const r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;this._panStart.copy(this.getMouseOnScreen(r,i)),this._panEnd.copy(this._panStart)}this.dispatchEvent(this.startEvent)}})),eU(this,"touchmove",(e=>{if(!1!==this.enabled)if(e.preventDefault(),1===e.touches.length)this._movePrev.copy(this._moveCurr),this._moveCurr.copy(this.getMouseOnCircle(e.touches[0].pageX,e.touches[0].pageY));else{const t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;this._touchZoomDistanceEnd=Math.sqrt(t*t+n*n);const r=(e.touches[0].pageX+e.touches[1].pageX)/2,i=(e.touches[0].pageY+e.touches[1].pageY)/2;this._panEnd.copy(this.getMouseOnScreen(r,i))}})),eU(this,"touchend",(e=>{if(!1!==this.enabled){switch(e.touches.length){case 0:this._state=this.STATE.NONE;break;case 1:this._state=this.STATE.TOUCH_ROTATE,this._moveCurr.copy(this.getMouseOnCircle(e.touches[0].pageX,e.touches[0].pageY)),this._movePrev.copy(this._moveCurr)}this.dispatchEvent(this.endEvent)}})),eU(this,"contextmenu",(e=>{!1!==this.enabled&&e.preventDefault()})),eU(this,"connect",(e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=e,this.domElement.addEventListener("contextmenu",this.contextmenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("wheel",this.mousewheel),this.domElement.addEventListener("touchstart",this.touchstart),this.domElement.addEventListener("touchend",this.touchend),this.domElement.addEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp),window.addEventListener("keydown",this.keydown),window.addEventListener("keyup",this.keyup),this.handleResize()})),eU(this,"dispose",(()=>{this.domElement&&(this.domElement.removeEventListener("contextmenu",this.contextmenu),this.domElement.removeEventListener("pointerdown",this.onPointerDown),this.domElement.removeEventListener("wheel",this.mousewheel),this.domElement.removeEventListener("touchstart",this.touchstart),this.domElement.removeEventListener("touchend",this.touchend),this.domElement.removeEventListener("touchmove",this.touchmove),this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.domElement.ownerDocument.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("keydown",this.keydown),window.removeEventListener("keyup",this.keyup))})),this.object=e,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom,void 0!==t&&this.connect(t),this.update()}}const nU=l.forwardRef(((e,t)=>{let{makeDefault:n,camera:r,domElement:i,regress:o,onChange:a,onStart:s,onEnd:c,...u}=e;const{invalidate:h,camera:d,gl:f,events:p,set:m,get:g,performance:v,viewport:y}=cy(),A=r||d,x=i||p.connected||f.domElement,b=l.useMemo((()=>new tU(A)),[A]);return uy((()=>{b.enabled&&b.update()}),-1),l.useEffect((()=>(b.connect(x),()=>{b.dispose()})),[x,o,b,h]),l.useEffect((()=>{const e=e=>{h(),o&&v.regress(),a&&a(e)};return b.addEventListener("change",e),s&&b.addEventListener("start",s),c&&b.addEventListener("end",c),()=>{s&&b.removeEventListener("start",s),c&&b.removeEventListener("end",c),b.removeEventListener("change",e)}}),[a,s,c,b,h]),l.useEffect((()=>{b.handleResize()}),[y]),l.useEffect((()=>{if(n){const e=g().controls;return m({controls:b}),()=>m({controls:e})}}),[n,b]),l.createElement("primitive",tC({ref:t,object:b},u))}));var rU=Object.defineProperty,iU=(e,t,n)=>(((e,t,n)=>{t in e?rU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const oU={IDLE:Symbol(),ROTATE:Symbol(),PAN:Symbol(),SCALE:Symbol(),FOV:Symbol(),FOCUS:Symbol(),ZROTATE:Symbol(),TOUCH_MULTI:Symbol(),ANIMATION_FOCUS:Symbol(),ANIMATION_ROTATE:Symbol()},aU={NONE:Symbol(),ONE_FINGER:Symbol(),ONE_FINGER_SWITCHED:Symbol(),TWO_FINGER:Symbol(),MULT_FINGER:Symbol(),CURSOR:Symbol()},sU={x:0,y:0},lU={camera:new qo,gizmos:new qo},cU={type:"change"},uU={type:"start"},hU={type:"end"};class dU extends Ci{constructor(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(),t=this,iU(this,"camera"),iU(this,"domElement"),iU(this,"scene"),iU(this,"mouseActions"),iU(this,"_mouseOp"),iU(this,"_v2_1"),iU(this,"_v3_1"),iU(this,"_v3_2"),iU(this,"_m4_1"),iU(this,"_m4_2"),iU(this,"_quat"),iU(this,"_translationMatrix"),iU(this,"_rotationMatrix"),iU(this,"_scaleMatrix"),iU(this,"_rotationAxis"),iU(this,"_cameraMatrixState"),iU(this,"_cameraProjectionState"),iU(this,"_fovState"),iU(this,"_upState"),iU(this,"_zoomState"),iU(this,"_nearPos"),iU(this,"_farPos"),iU(this,"_gizmoMatrixState"),iU(this,"_up0"),iU(this,"_zoom0"),iU(this,"_fov0"),iU(this,"_initialNear"),iU(this,"_nearPos0"),iU(this,"_initialFar"),iU(this,"_farPos0"),iU(this,"_cameraMatrixState0"),iU(this,"_gizmoMatrixState0"),iU(this,"_button"),iU(this,"_touchStart"),iU(this,"_touchCurrent"),iU(this,"_input"),iU(this,"_switchSensibility"),iU(this,"_startFingerDistance"),iU(this,"_currentFingerDistance"),iU(this,"_startFingerRotation"),iU(this,"_currentFingerRotation"),iU(this,"_devPxRatio"),iU(this,"_downValid"),iU(this,"_nclicks"),iU(this,"_downEvents"),iU(this,"_clickStart"),iU(this,"_maxDownTime"),iU(this,"_maxInterval"),iU(this,"_posThreshold"),iU(this,"_movementThreshold"),iU(this,"_currentCursorPosition"),iU(this,"_startCursorPosition"),iU(this,"_grid"),iU(this,"_gridPosition"),iU(this,"_gizmos"),iU(this,"_curvePts"),iU(this,"_timeStart"),iU(this,"_animationId"),iU(this,"focusAnimationTime"),iU(this,"_timePrev"),iU(this,"_timeCurrent"),iU(this,"_anglePrev"),iU(this,"_angleCurrent"),iU(this,"_cursorPosPrev"),iU(this,"_cursorPosCurr"),iU(this,"_wPrev"),iU(this,"_wCurr"),iU(this,"adjustNearFar"),iU(this,"scaleFactor"),iU(this,"dampingFactor"),iU(this,"wMax"),iU(this,"enableAnimations"),iU(this,"enableGrid"),iU(this,"cursorZoom"),iU(this,"minFov"),iU(this,"maxFov"),iU(this,"enabled"),iU(this,"enablePan"),iU(this,"enableRotate"),iU(this,"enableZoom"),iU(this,"minDistance"),iU(this,"maxDistance"),iU(this,"minZoom"),iU(this,"maxZoom"),iU(this,"target"),iU(this,"_currentTarget"),iU(this,"_tbRadius"),iU(this,"_state"),iU(this,"onWindowResize",(()=>{const e=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3;if(this.camera){const e=this.calculateTbRadius(this.camera);void 0!==e&&(this._tbRadius=e)}const t=this._tbRadius/e,n=new Dd(0,0,t,t).getPoints(this._curvePts),r=(new hs).setFromPoints(n);for(const i in this._gizmos.children){this._gizmos.children[i].geometry=r}this.dispatchEvent(cU)})),iU(this,"onContextMenu",(e=>{if(this.enabled)for(let t=0;t<this.mouseActions.length;t++)if(2==this.mouseActions[t].mouse){e.preventDefault();break}})),iU(this,"onPointerCancel",(()=>{this._touchStart.splice(0,this._touchStart.length),this._touchCurrent.splice(0,this._touchCurrent.length),this._input=aU.NONE})),iU(this,"onPointerDown",(e=>{if(0==e.button&&e.isPrimary?(this._downValid=!0,this._downEvents.push(e)):this._downValid=!1,"touch"==e.pointerType&&this._input!=aU.CURSOR)switch(this._touchStart.push(e),this._touchCurrent.push(e),this._input){case aU.NONE:this._input=aU.ONE_FINGER,this.onSinglePanStart(e,"ROTATE"),window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp);break;case aU.ONE_FINGER:case aU.ONE_FINGER_SWITCHED:this._input=aU.TWO_FINGER,this.onRotateStart(),this.onPinchStart(),this.onDoublePanStart();break;case aU.TWO_FINGER:this._input=aU.MULT_FINGER,this.onTriplePanStart()}else if("touch"!=e.pointerType&&this._input==aU.NONE){let t=null;e.ctrlKey||e.metaKey?t="CTRL":e.shiftKey&&(t="SHIFT"),this._mouseOp=this.getOpFromAction(e.button,t),this._mouseOp&&(window.addEventListener("pointermove",this.onPointerMove),window.addEventListener("pointerup",this.onPointerUp),this._input=aU.CURSOR,this._button=e.button,this.onSinglePanStart(e,this._mouseOp))}})),iU(this,"onPointerMove",(e=>{if("touch"==e.pointerType&&this._input!=aU.CURSOR)switch(this._input){case aU.ONE_FINGER:this.updateTouchEvent(e),this.onSinglePanMove(e,oU.ROTATE);break;case aU.ONE_FINGER_SWITCHED:if(this.calculatePointersDistance(this._touchCurrent[0],e)*this._devPxRatio>=this._switchSensibility){this._input=aU.ONE_FINGER,this.updateTouchEvent(e),this.onSinglePanStart(e,"ROTATE");break}break;case aU.TWO_FINGER:this.updateTouchEvent(e),this.onRotateMove(),this.onPinchMove(),this.onDoublePanMove();break;case aU.MULT_FINGER:this.updateTouchEvent(e),this.onTriplePanMove()}else if("touch"!=e.pointerType&&this._input==aU.CURSOR){let t=null;e.ctrlKey||e.metaKey?t="CTRL":e.shiftKey&&(t="SHIFT");const n=this.getOpStateFromAction(this._button,t);n&&this.onSinglePanMove(e,n)}if(this._downValid){this.calculatePointersDistance(this._downEvents[this._downEvents.length-1],e)*this._devPxRatio>this._movementThreshold&&(this._downValid=!1)}})),iU(this,"onPointerUp",(e=>{if("touch"==e.pointerType&&this._input!=aU.CURSOR){const t=this._touchCurrent.length;for(let n=0;n<t;n++)if(this._touchCurrent[n].pointerId==e.pointerId){this._touchCurrent.splice(n,1),this._touchStart.splice(n,1);break}switch(this._input){case aU.ONE_FINGER:case aU.ONE_FINGER_SWITCHED:window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=aU.NONE,this.onSinglePanEnd();break;case aU.TWO_FINGER:this.onDoublePanEnd(),this.onPinchEnd(),this.onRotateEnd(),this._input=aU.ONE_FINGER_SWITCHED;break;case aU.MULT_FINGER:0==this._touchCurrent.length&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=aU.NONE,this.onTriplePanEnd())}}else"touch"!=e.pointerType&&this._input==aU.CURSOR&&(window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),this._input=aU.NONE,this.onSinglePanEnd(),this._button=-1);if(e.isPrimary)if(this._downValid){if(e.timeStamp-this._downEvents[this._downEvents.length-1].timeStamp<=this._maxDownTime)if(0==this._nclicks)this._nclicks=1,this._clickStart=performance.now();else{const t=e.timeStamp-this._clickStart,n=this.calculatePointersDistance(this._downEvents[1],this._downEvents[0])*this._devPxRatio;t<=this._maxInterval&&n<=this._posThreshold?(this._nclicks=0,this._downEvents.splice(0,this._downEvents.length),this.onDoubleTap(e)):(this._nclicks=1,this._downEvents.shift(),this._clickStart=performance.now())}else this._downValid=!1,this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)}else this._nclicks=0,this._downEvents.splice(0,this._downEvents.length)})),iU(this,"onWheel",(e=>{var t,n;if(this.enabled&&this.enableZoom&&this.domElement){let r=null;e.ctrlKey||e.metaKey?r="CTRL":e.shiftKey&&(r="SHIFT");const i=this.getOpFromAction("WHEEL",r);if(i){e.preventDefault(),this.dispatchEvent(uU);const r=125;let o=e.deltaY/r,a=1;switch(o>0?a=1/this.scaleFactor:o<0&&(a=this.scaleFactor),i){case"ZOOM":if(this.updateTbState(oU.SCALE,!0),o>0?a=1/Math.pow(this.scaleFactor,o):o<0&&(a=Math.pow(this.scaleFactor,-o)),this.cursorZoom&&this.enablePan){let r;this.camera instanceof pl&&(r=null==(t=this.unprojectOnTbPlane(this.camera,e.clientX,e.clientY,this.domElement))?void 0:t.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position)),this.camera instanceof js&&(r=null==(n=this.unprojectOnTbPlane(this.camera,e.clientX,e.clientY,this.domElement))?void 0:n.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)),void 0!==r&&this.applyTransformMatrix(this.applyScale(a,r))}else this.applyTransformMatrix(this.applyScale(a,this._gizmos.position));this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(oU.IDLE,!1),this.dispatchEvent(cU),this.dispatchEvent(hU);break;case"FOV":if(this.camera instanceof js){this.updateTbState(oU.FOV,!0),0!=e.deltaX&&(o=e.deltaX/r,a=1,o>0?a=1/Math.pow(this.scaleFactor,o):o<0&&(a=Math.pow(this.scaleFactor,-o))),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const t=this._v3_1.distanceTo(this._gizmos.position);let n=t/a;n=Fi.clamp(n,this.minDistance,this.maxDistance);const i=t*Math.tan(Fi.DEG2RAD*this.camera.fov*.5);let s=Fi.RAD2DEG*(2*Math.atan(i/n));s>this.maxFov?s=this.maxFov:s<this.minFov&&(s=this.minFov);a=t/(i/Math.tan(Fi.DEG2RAD*(s/2))),this.setFov(s),this.applyTransformMatrix(this.applyScale(a,this._gizmos.position,!1))}this._grid&&(this.disposeGrid(),this.drawGrid()),this.updateTbState(oU.IDLE,!1),this.dispatchEvent(cU),this.dispatchEvent(hU)}}}})),iU(this,"onSinglePanStart",((e,t)=>{if(this.enabled&&this.domElement)switch(this.dispatchEvent(uU),this.setCenter(e.clientX,e.clientY),t){case"PAN":if(!this.enablePan)return;if(-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(cU)),this.camera){this.updateTbState(oU.PAN,!0);const e=this.unprojectOnTbPlane(this.camera,sU.x,sU.y,this.domElement);void 0!==e&&this._startCursorPosition.copy(e),this.enableGrid&&(this.drawGrid(),this.dispatchEvent(cU))}break;case"ROTATE":if(!this.enableRotate)return;if(-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1),this.camera){this.updateTbState(oU.ROTATE,!0);const e=this.unprojectOnTbSurface(this.camera,sU.x,sU.y,this.domElement,this._tbRadius);void 0!==e&&this._startCursorPosition.copy(e),this.activateGizmos(!0),this.enableAnimations&&(this._timePrev=this._timeCurrent=performance.now(),this._angleCurrent=this._anglePrev=0,this._cursorPosPrev.copy(this._startCursorPosition),this._cursorPosCurr.copy(this._cursorPosPrev),this._wCurr=0,this._wPrev=this._wCurr)}this.dispatchEvent(cU);break;case"FOV":if(!this.enableZoom)return;this.camera instanceof js&&(-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(cU)),this.updateTbState(oU.FOV,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(sU.x,sU.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition));break;case"ZOOM":if(!this.enableZoom)return;-1!=this._animationId&&(cancelAnimationFrame(this._animationId),this._animationId=-1,this._timeStart=-1,this.activateGizmos(!1),this.dispatchEvent(cU)),this.updateTbState(oU.SCALE,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(sU.x,sU.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition)}})),iU(this,"onSinglePanMove",((e,t)=>{if(this.enabled&&this.domElement){const n=t!=this._state;switch(this.setCenter(e.clientX,e.clientY),t){case oU.PAN:if(this.enablePan&&this.camera)if(n){this.dispatchEvent(hU),this.dispatchEvent(uU),this.updateTbState(t,!0);const e=this.unprojectOnTbPlane(this.camera,sU.x,sU.y,this.domElement);void 0!==e&&this._startCursorPosition.copy(e),this.enableGrid&&this.drawGrid(),this.activateGizmos(!1)}else{const e=this.unprojectOnTbPlane(this.camera,sU.x,sU.y,this.domElement);void 0!==e&&this._currentCursorPosition.copy(e),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition))}break;case oU.ROTATE:if(this.enableRotate&&this.camera)if(n){this.dispatchEvent(hU),this.dispatchEvent(uU),this.updateTbState(t,!0);const e=this.unprojectOnTbSurface(this.camera,sU.x,sU.y,this.domElement,this._tbRadius);void 0!==e&&this._startCursorPosition.copy(e),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!0)}else{const e=this.unprojectOnTbSurface(this.camera,sU.x,sU.y,this.domElement,this._tbRadius);void 0!==e&&this._currentCursorPosition.copy(e);const t=this._startCursorPosition.distanceTo(this._currentCursorPosition),n=this._startCursorPosition.angleTo(this._currentCursorPosition),r=Math.max(t/this._tbRadius,n);this.applyTransformMatrix(this.rotate(this.calculateRotationAxis(this._startCursorPosition,this._currentCursorPosition),r)),this.enableAnimations&&(this._timePrev=this._timeCurrent,this._timeCurrent=performance.now(),this._anglePrev=this._angleCurrent,this._angleCurrent=r,this._cursorPosPrev.copy(this._cursorPosCurr),this._cursorPosCurr.copy(this._currentCursorPosition),this._wPrev=this._wCurr,this._wCurr=this.calculateAngularSpeed(this._anglePrev,this._angleCurrent,this._timePrev,this._timeCurrent))}break;case oU.SCALE:if(this.enableZoom)if(n)this.dispatchEvent(hU),this.dispatchEvent(uU),this.updateTbState(t,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(sU.x,sU.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{const e=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(sU.x,sU.y,this.domElement).y);const t=this._currentCursorPosition.y-this._startCursorPosition.y;let n=1;t<0?n=1/Math.pow(this.scaleFactor,-t*e):t>0&&(n=Math.pow(this.scaleFactor,t*e)),this.applyTransformMatrix(this.applyScale(n,this._gizmos.position))}break;case oU.FOV:if(this.enableZoom&&this.camera instanceof js)if(n)this.dispatchEvent(hU),this.dispatchEvent(uU),this.updateTbState(t,!0),this._startCursorPosition.setY(.5*this.getCursorNDC(sU.x,sU.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1);else{const e=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(sU.x,sU.y,this.domElement).y);const t=this._currentCursorPosition.y-this._startCursorPosition.y;let n=1;t<0?n=1/Math.pow(this.scaleFactor,-t*e):t>0&&(n=Math.pow(this.scaleFactor,t*e)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const r=this._v3_1.distanceTo(this._gizmos.position);let i=r/n;i=Fi.clamp(i,this.minDistance,this.maxDistance);const o=r*Math.tan(Fi.DEG2RAD*this._fovState*.5);let a=Fi.RAD2DEG*(2*Math.atan(o/i));a=Fi.clamp(a,this.minFov,this.maxFov);const s=o/Math.tan(Fi.DEG2RAD*(a/2));n=r/s,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(a),this.applyTransformMatrix(this.applyScale(n,this._v3_2,!1));const l=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(s/r);this._m4_1.makeTranslation(l.x,l.y,l.z)}}this.dispatchEvent(cU)}})),iU(this,"onSinglePanEnd",(()=>{if(this._state==oU.ROTATE){if(!this.enableRotate)return;if(this.enableAnimations){if(performance.now()-this._timeCurrent<120){const e=Math.abs((this._wPrev+this._wCurr)/2),t=this;this._animationId=window.requestAnimationFrame((function(n){t.updateTbState(oU.ANIMATION_ROTATE,!0);const r=t.calculateRotationAxis(t._cursorPosPrev,t._cursorPosCurr);t.onRotationAnim(n,r,Math.min(e,t.wMax))}))}else this.updateTbState(oU.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(cU)}else this.updateTbState(oU.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(cU)}else this._state!=oU.PAN&&this._state!=oU.IDLE||(this.updateTbState(oU.IDLE,!1),this.enableGrid&&this.disposeGrid(),this.activateGizmos(!1),this.dispatchEvent(cU));this.dispatchEvent(hU)})),iU(this,"onDoubleTap",(e=>{if(this.enabled&&this.enablePan&&this.scene&&this.camera&&this.domElement){this.dispatchEvent(uU),this.setCenter(e.clientX,e.clientY);const t=this.unprojectOnObj(this.getCursorNDC(sU.x,sU.y,this.domElement),this.camera);if(t&&this.enableAnimations){const e=this;-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),this._timeStart=-1,this._animationId=window.requestAnimationFrame((function(n){e.updateTbState(oU.ANIMATION_FOCUS,!0),e.onFocusAnim(n,t,e._cameraMatrixState,e._gizmoMatrixState)}))}else t&&!this.enableAnimations&&(this.updateTbState(oU.FOCUS,!0),this.focus(t,this.scaleFactor),this.updateTbState(oU.IDLE,!1),this.dispatchEvent(cU))}this.dispatchEvent(hU)})),iU(this,"onDoublePanStart",(()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.dispatchEvent(uU),this.updateTbState(oU.PAN,!0),this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const e=this.unprojectOnTbPlane(this.camera,sU.x,sU.y,this.domElement,!0);void 0!==e&&this._startCursorPosition.copy(e),this._currentCursorPosition.copy(this._startCursorPosition),this.activateGizmos(!1)}})),iU(this,"onDoublePanMove",(()=>{if(this.enabled&&this.enablePan&&this.camera&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=oU.PAN&&(this.updateTbState(oU.PAN,!0),this._startCursorPosition.copy(this._currentCursorPosition));const e=this.unprojectOnTbPlane(this.camera,sU.x,sU.y,this.domElement,!0);void 0!==e&&this._currentCursorPosition.copy(e),this.applyTransformMatrix(this.pan(this._startCursorPosition,this._currentCursorPosition,!0)),this.dispatchEvent(cU)}})),iU(this,"onDoublePanEnd",(()=>{this.updateTbState(oU.IDLE,!1),this.dispatchEvent(hU)})),iU(this,"onRotateStart",(()=>{var e;this.enabled&&this.enableRotate&&(this.dispatchEvent(uU),this.updateTbState(oU.ZROTATE,!0),this._startFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this._currentFingerRotation=this._startFingerRotation,null==(e=this.camera)||e.getWorldDirection(this._rotationAxis),this.enablePan||this.enableZoom||this.activateGizmos(!0))})),iU(this,"onRotateMove",(()=>{var e;if(this.enabled&&this.enableRotate&&this.camera&&this.domElement){let t;this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2),this._state!=oU.ZROTATE&&(this.updateTbState(oU.ZROTATE,!0),this._startFingerRotation=this._currentFingerRotation),this._currentFingerRotation=this.getAngle(this._touchCurrent[1],this._touchCurrent[0])+this.getAngle(this._touchStart[1],this._touchStart[0]),this.enablePan?this.camera&&(this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),t=null==(e=this.unprojectOnTbPlane(this.camera,sU.x,sU.y,this.domElement))?void 0:e.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._v3_2)):t=(new vo).setFromMatrixPosition(this._gizmoMatrixState);const n=Fi.DEG2RAD*(this._startFingerRotation-this._currentFingerRotation);void 0!==t&&this.applyTransformMatrix(this.zRotate(t,n)),this.dispatchEvent(cU)}})),iU(this,"onRotateEnd",(()=>{this.updateTbState(oU.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(hU)})),iU(this,"onPinchStart",(()=>{this.enabled&&this.enableZoom&&(this.dispatchEvent(uU),this.updateTbState(oU.SCALE,!0),this._startFingerDistance=this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),this._currentFingerDistance=this._startFingerDistance,this.activateGizmos(!1))})),iU(this,"onPinchMove",(()=>{var e,t;if(this.enabled&&this.enableZoom&&this.domElement){this.setCenter((this._touchCurrent[0].clientX+this._touchCurrent[1].clientX)/2,(this._touchCurrent[0].clientY+this._touchCurrent[1].clientY)/2);const n=12;this._state!=oU.SCALE&&(this._startFingerDistance=this._currentFingerDistance,this.updateTbState(oU.SCALE,!0)),this._currentFingerDistance=Math.max(this.calculatePointersDistance(this._touchCurrent[0],this._touchCurrent[1]),n*this._devPxRatio);const r=this._currentFingerDistance/this._startFingerDistance;let i;this.enablePan?this.camera instanceof pl?i=null==(e=this.unprojectOnTbPlane(this.camera,sU.x,sU.y,this.domElement))?void 0:e.applyQuaternion(this.camera.quaternion).multiplyScalar(1/this.camera.zoom).add(this._gizmos.position):this.camera instanceof js&&(i=null==(t=this.unprojectOnTbPlane(this.camera,sU.x,sU.y,this.domElement))?void 0:t.applyQuaternion(this.camera.quaternion).add(this._gizmos.position)):i=this._gizmos.position,void 0!==i&&this.applyTransformMatrix(this.applyScale(r,i)),this.dispatchEvent(cU)}})),iU(this,"onPinchEnd",(()=>{this.updateTbState(oU.IDLE,!1),this.dispatchEvent(hU)})),iU(this,"onTriplePanStart",(()=>{if(this.enabled&&this.enableZoom&&this.domElement){this.dispatchEvent(uU),this.updateTbState(oU.SCALE,!0);let e=0,t=0;const n=this._touchCurrent.length;for(let r=0;r<n;r++)e+=this._touchCurrent[r].clientX,t+=this._touchCurrent[r].clientY;this.setCenter(e/n,t/n),this._startCursorPosition.setY(.5*this.getCursorNDC(sU.x,sU.y,this.domElement).y),this._currentCursorPosition.copy(this._startCursorPosition)}})),iU(this,"onTriplePanMove",(()=>{if(this.enabled&&this.enableZoom&&this.camera&&this.domElement){let e=0,t=0;const n=this._touchCurrent.length;for(let d=0;d<n;d++)e+=this._touchCurrent[d].clientX,t+=this._touchCurrent[d].clientY;this.setCenter(e/n,t/n);const r=8;this._currentCursorPosition.setY(.5*this.getCursorNDC(sU.x,sU.y,this.domElement).y);const i=this._currentCursorPosition.y-this._startCursorPosition.y;let o=1;i<0?o=1/Math.pow(this.scaleFactor,-i*r):i>0&&(o=Math.pow(this.scaleFactor,i*r)),this._v3_1.setFromMatrixPosition(this._cameraMatrixState);const a=this._v3_1.distanceTo(this._gizmos.position);let s=a/o;s=Fi.clamp(s,this.minDistance,this.maxDistance);const l=a*Math.tan(Fi.DEG2RAD*this._fovState*.5);let c=Fi.RAD2DEG*(2*Math.atan(l/s));c=Fi.clamp(c,this.minFov,this.maxFov);const u=l/Math.tan(Fi.DEG2RAD*(c/2));o=a/u,this._v3_2.setFromMatrixPosition(this._gizmoMatrixState),this.setFov(c),this.applyTransformMatrix(this.applyScale(o,this._v3_2,!1));const h=this._gizmos.position.clone().sub(this.camera.position).normalize().multiplyScalar(u/a);this._m4_1.makeTranslation(h.x,h.y,h.z),this.dispatchEvent(cU)}})),iU(this,"onTriplePanEnd",(()=>{this.updateTbState(oU.IDLE,!1),this.dispatchEvent(hU)})),iU(this,"setCenter",((e,t)=>{sU.x=e,sU.y=t})),iU(this,"initializeMouseActions",(()=>{this.setMouseAction("PAN",0,"CTRL"),this.setMouseAction("PAN",2),this.setMouseAction("ROTATE",0),this.setMouseAction("ZOOM","WHEEL"),this.setMouseAction("ZOOM",1),this.setMouseAction("FOV","WHEEL","SHIFT"),this.setMouseAction("FOV",1,"SHIFT")})),iU(this,"setMouseAction",(function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;let i;if(!["PAN","ROTATE","ZOOM","FOV"].includes(e)||![0,1,2,"WHEEL"].includes(n)||!["CTRL","SHIFT",null].includes(r))return!1;if("WHEEL"==n&&"ZOOM"!=e&&"FOV"!=e)return!1;switch(e){case"PAN":i=oU.PAN;break;case"ROTATE":i=oU.ROTATE;break;case"ZOOM":i=oU.SCALE;break;case"FOV":i=oU.FOV}const o={operation:e,mouse:n,key:r,state:i};for(let a=0;a<t.mouseActions.length;a++)if(t.mouseActions[a].mouse==o.mouse&&t.mouseActions[a].key==o.key)return t.mouseActions.splice(a,1,o),!0;return t.mouseActions.push(o),!0})),iU(this,"getOpFromAction",((e,t)=>{let n;for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==e&&n.key==t)return n.operation;if(t)for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==e&&null==n.key)return n.operation;return null})),iU(this,"getOpStateFromAction",((e,t)=>{let n;for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==e&&n.key==t)return n.state;if(t)for(let r=0;r<this.mouseActions.length;r++)if(n=this.mouseActions[r],n.mouse==e&&null==n.key)return n.state;return null})),iU(this,"getAngle",((e,t)=>180*Math.atan2(t.clientY-e.clientY,t.clientX-e.clientX)/Math.PI)),iU(this,"updateTouchEvent",(e=>{for(let t=0;t<this._touchCurrent.length;t++)if(this._touchCurrent[t].pointerId==e.pointerId){this._touchCurrent.splice(t,1,e);break}})),iU(this,"calculateAngularSpeed",((e,t,n,r)=>{const i=(r-n)/1e3;return 0==i?0:(t-e)/i})),iU(this,"calculatePointersDistance",((e,t)=>Math.sqrt(Math.pow(t.clientX-e.clientX,2)+Math.pow(t.clientY-e.clientY,2)))),iU(this,"calculateRotationAxis",((e,t)=>(this._rotationMatrix.extractRotation(this._cameraMatrixState),this._quat.setFromRotationMatrix(this._rotationMatrix),this._rotationAxis.crossVectors(e,t).applyQuaternion(this._quat),this._rotationAxis.normalize().clone()))),iU(this,"calculateTbRadius",(e=>{const t=e.position.distanceTo(this._gizmos.position);if(e instanceof js){const n=Fi.DEG2RAD*e.fov*.5,r=Math.atan(e.aspect*Math.tan(n));return Math.tan(Math.min(n,r))*t*.67}if(e instanceof pl)return.67*Math.min(e.top,e.right)})),iU(this,"focus",(function(e,n){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(t.camera){const i=e.clone();i.sub(t._gizmos.position).multiplyScalar(r),t._translationMatrix.makeTranslation(i.x,i.y,i.z);const o=t._gizmoMatrixState.clone();t._gizmoMatrixState.premultiply(t._translationMatrix),t._gizmoMatrixState.decompose(t._gizmos.position,t._gizmos.quaternion,t._gizmos.scale);const a=t._cameraMatrixState.clone();t._cameraMatrixState.premultiply(t._translationMatrix),t._cameraMatrixState.decompose(t.camera.position,t.camera.quaternion,t.camera.scale),t.enableZoom&&t.applyTransformMatrix(t.applyScale(n,t._gizmos.position)),t._gizmoMatrixState.copy(o),t._cameraMatrixState.copy(a)}})),iU(this,"drawGrid",(()=>{if(this.scene){const e=8947848,t=3;let n,r,i,o;if(this.camera instanceof pl){const e=this.camera.right-this.camera.left,a=this.camera.bottom-this.camera.top;i=Math.max(e,a),o=i/20,n=i/this.camera.zoom*t,r=n/o*this.camera.zoom}else if(this.camera instanceof js){const e=this.camera.position.distanceTo(this._gizmos.position),a=Fi.DEG2RAD*this.camera.fov*.5,s=Math.atan(this.camera.aspect*Math.tan(a));i=Math.tan(Math.max(a,s))*e*2,o=i/20,n=i*t,r=n/o}null==this._grid&&this.camera&&(this._grid=new Mg(n,r,e,e),this._grid.position.copy(this._gizmos.position),this._gridPosition.copy(this._grid.position),this._grid.quaternion.copy(this.camera.quaternion),this._grid.rotateX(.5*Math.PI),this.scene.add(this._grid))}})),iU(this,"connect",(e=>{e===document&&console.error('THREE.ArcballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=e,this.domElement.style.touchAction="none",this.domElement.addEventListener("contextmenu",this.onContextMenu),this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointercancel",this.onPointerCancel),this.domElement.addEventListener("wheel",this.onWheel)})),iU(this,"dispose",(()=>{var e,t,n,r,i;-1!=this._animationId&&window.cancelAnimationFrame(this._animationId),null==(e=this.domElement)||e.removeEventListener("pointerdown",this.onPointerDown),null==(t=this.domElement)||t.removeEventListener("pointercancel",this.onPointerCancel),null==(n=this.domElement)||n.removeEventListener("wheel",this.onWheel),null==(r=this.domElement)||r.removeEventListener("contextmenu",this.onContextMenu),window.removeEventListener("pointermove",this.onPointerMove),window.removeEventListener("pointerup",this.onPointerUp),window.removeEventListener("resize",this.onWindowResize),null==(i=this.scene)||i.remove(this._gizmos),this.disposeGrid()})),iU(this,"disposeGrid",(()=>{this._grid&&this.scene&&(this.scene.remove(this._grid),this._grid=null)})),iU(this,"easeOutCubic",(e=>1-Math.pow(1-e,3))),iU(this,"activateGizmos",(e=>{for(const t of this._gizmos.children)t.material.setValues({opacity:e?1:.6})})),iU(this,"getCursorNDC",((e,t,n)=>{const r=n.getBoundingClientRect();return this._v2_1.setX((e-r.left)/r.width*2-1),this._v2_1.setY((r.bottom-t)/r.height*2-1),this._v2_1.clone()})),iU(this,"getCursorPosition",((e,t,n)=>(this._v2_1.copy(this.getCursorNDC(e,t,n)),this.camera instanceof pl&&(this._v2_1.x*=.5*(this.camera.right-this.camera.left),this._v2_1.y*=.5*(this.camera.top-this.camera.bottom)),this._v2_1.clone()))),iU(this,"setCamera",(e=>{if(e){e.lookAt(this.target),e.updateMatrix(),e instanceof js&&(this._fov0=e.fov,this._fovState=e.fov),this._cameraMatrixState0.copy(e.matrix),this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraProjectionState.copy(e.projectionMatrix),this._zoom0=e.zoom,this._zoomState=this._zoom0,this._initialNear=e.near,this._nearPos0=e.position.distanceTo(this.target)-e.near,this._nearPos=this._initialNear,this._initialFar=e.far,this._farPos0=e.position.distanceTo(this.target)-e.far,this._farPos=this._initialFar,this._up0.copy(e.up),this._upState.copy(e.up),this.camera=e,this.camera.updateProjectionMatrix();const t=this.calculateTbRadius(e);void 0!==t&&(this._tbRadius=t),this.makeGizmos(this.target,this._tbRadius)}})),iU(this,"makeGizmos",((e,t)=>{const n=new Dd(0,0,t,t).getPoints(this._curvePts),r=(new hs).setFromPoints(n),i=new od({color:16744576,fog:!1,transparent:!0,opacity:.6}),o=new od({color:8454016,fog:!1,transparent:!0,opacity:.6}),a=new od({color:8421631,fog:!1,transparent:!0,opacity:.6}),s=new fd(r,i),l=new fd(r,o),c=new fd(r,a),u=.5*Math.PI;if(s.rotation.x=u,l.rotation.y=u,this._gizmoMatrixState0.identity().setPosition(e),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this.camera&&1!=this.camera.zoom){const t=1/this.camera.zoom;this._scaleMatrix.makeScale(t,t,t),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._gizmoMatrixState.premultiply(this._translationMatrix).premultiply(this._scaleMatrix),this._translationMatrix.makeTranslation(e.x,e.y,e.z),this._gizmoMatrixState.premultiply(this._translationMatrix)}this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.clear(),this._gizmos.add(s),this._gizmos.add(l),this._gizmos.add(c)})),iU(this,"onFocusAnim",((e,t,n,r)=>{if(-1==this._timeStart&&(this._timeStart=e),this._state==oU.ANIMATION_FOCUS){const i=(e-this._timeStart)/this.focusAnimationTime;if(this._gizmoMatrixState.copy(r),i>=1)this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(t,this.scaleFactor),this._timeStart=-1,this.updateTbState(oU.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(cU);else{const e=this.easeOutCubic(i),o=1-e+this.scaleFactor*e;this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.focus(t,o,e),this.dispatchEvent(cU);const a=this;this._animationId=window.requestAnimationFrame((function(e){a.onFocusAnim(e,t,n,r.clone())}))}}else this._animationId=-1,this._timeStart=-1})),iU(this,"onRotationAnim",((e,t,n)=>{if(-1==this._timeStart&&(this._anglePrev=0,this._angleCurrent=0,this._timeStart=e),this._state==oU.ANIMATION_ROTATE){const r=(e-this._timeStart)/1e3;if(n+-this.dampingFactor*r>0){this._angleCurrent=.5*-this.dampingFactor*Math.pow(r,2)+n*r+0,this.applyTransformMatrix(this.rotate(t,this._angleCurrent)),this.dispatchEvent(cU);const e=this;this._animationId=window.requestAnimationFrame((function(r){e.onRotationAnim(r,t,n)}))}else this._animationId=-1,this._timeStart=-1,this.updateTbState(oU.IDLE,!1),this.activateGizmos(!1),this.dispatchEvent(cU)}else this._animationId=-1,this._timeStart=-1,this._state!=oU.ROTATE&&(this.activateGizmos(!1),this.dispatchEvent(cU))})),iU(this,"pan",(function(e,n){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t.camera){const i=e.clone().sub(n);if(t.camera instanceof pl&&i.multiplyScalar(1/t.camera.zoom),t.camera instanceof js&&r){t._v3_1.setFromMatrixPosition(t._cameraMatrixState0),t._v3_2.setFromMatrixPosition(t._gizmoMatrixState0);const e=t._v3_1.distanceTo(t._v3_2)/t.camera.position.distanceTo(t._gizmos.position);i.multiplyScalar(1/e)}t._v3_1.set(i.x,i.y,0).applyQuaternion(t.camera.quaternion),t._m4_1.makeTranslation(t._v3_1.x,t._v3_1.y,t._v3_1.z),t.setTransformationMatrices(t._m4_1,t._m4_1)}return lU})),iU(this,"reset",(()=>{if(this.camera){this.camera.zoom=this._zoom0,this.camera instanceof js&&(this.camera.fov=this._fov0),this.camera.near=this._nearPos,this.camera.far=this._farPos,this._cameraMatrixState.copy(this._cameraMatrixState0),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(this._up0),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmoMatrixState.copy(this._gizmoMatrixState0),this._gizmoMatrixState0.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix();const e=this.calculateTbRadius(this.camera);void 0!==e&&(this._tbRadius=e),this.makeGizmos(this._gizmos.position,this._tbRadius),this.camera.lookAt(this._gizmos.position),this.updateTbState(oU.IDLE,!1),this.dispatchEvent(cU)}})),iU(this,"rotate",((e,t)=>{const n=this._gizmos.position;return this._translationMatrix.makeTranslation(-n.x,-n.y,-n.z),this._rotationMatrix.makeRotationAxis(e,-t),this._m4_1.makeTranslation(n.x,n.y,n.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this.setTransformationMatrices(this._m4_1),lU})),iU(this,"copyState",(()=>{if(this.camera){const e=JSON.stringify(this.camera instanceof pl?{arcballState:{cameraFar:this.camera.far,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}}:{arcballState:{cameraFar:this.camera.far,cameraFov:this.camera.fov,cameraMatrix:this.camera.matrix,cameraNear:this.camera.near,cameraUp:this.camera.up,cameraZoom:this.camera.zoom,gizmoMatrix:this._gizmos.matrix}});navigator.clipboard.writeText(e)}})),iU(this,"pasteState",(()=>{const e=this;navigator.clipboard.readText().then((function(t){e.setStateFromJSON(t)}))})),iU(this,"saveState",(()=>{this.camera&&(this._cameraMatrixState0.copy(this.camera.matrix),this._gizmoMatrixState0.copy(this._gizmos.matrix),this._nearPos=this.camera.near,this._farPos=this.camera.far,this._zoom0=this.camera.zoom,this._up0.copy(this.camera.up),this.camera instanceof js&&(this._fov0=this.camera.fov))})),iU(this,"applyScale",(function(e,n){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!t.camera)return;const i=n.clone();let o=1/e;if(t.camera instanceof pl){t.camera.zoom=t._zoomState,t.camera.zoom*=e,t.camera.zoom>t.maxZoom?(t.camera.zoom=t.maxZoom,o=t._zoomState/t.maxZoom):t.camera.zoom<t.minZoom&&(t.camera.zoom=t.minZoom,o=t._zoomState/t.minZoom),t.camera.updateProjectionMatrix(),t._v3_1.setFromMatrixPosition(t._gizmoMatrixState),t._scaleMatrix.makeScale(o,o,o),t._translationMatrix.makeTranslation(-t._v3_1.x,-t._v3_1.y,-t._v3_1.z),t._m4_2.makeTranslation(t._v3_1.x,t._v3_1.y,t._v3_1.z).multiply(t._scaleMatrix),t._m4_2.multiply(t._translationMatrix),i.sub(t._v3_1);const n=i.clone().multiplyScalar(o);return i.sub(n),t._m4_1.makeTranslation(i.x,i.y,i.z),t._m4_2.premultiply(t._m4_1),t.setTransformationMatrices(t._m4_1,t._m4_2),lU}if(t.camera instanceof js){t._v3_1.setFromMatrixPosition(t._cameraMatrixState),t._v3_2.setFromMatrixPosition(t._gizmoMatrixState);let e=t._v3_1.distanceTo(i),n=e-e*o;const a=e-n;a<t.minDistance?(o=t.minDistance/e,n=e-e*o):a>t.maxDistance&&(o=t.maxDistance/e,n=e-e*o);let s=i.clone().sub(t._v3_1).normalize().multiplyScalar(n);if(t._m4_1.makeTranslation(s.x,s.y,s.z),r){const r=t._v3_2;e=r.distanceTo(i),n=e-e*o,s=i.clone().sub(t._v3_2).normalize().multiplyScalar(n),t._translationMatrix.makeTranslation(r.x,r.y,r.z),t._scaleMatrix.makeScale(o,o,o),t._m4_2.makeTranslation(s.x,s.y,s.z).multiply(t._translationMatrix),t._m4_2.multiply(t._scaleMatrix),t._translationMatrix.makeTranslation(-r.x,-r.y,-r.z),t._m4_2.multiply(t._translationMatrix),t.setTransformationMatrices(t._m4_1,t._m4_2)}else t.setTransformationMatrices(t._m4_1);return lU}})),iU(this,"setFov",(e=>{this.camera instanceof js&&(this.camera.fov=Fi.clamp(e,this.minFov,this.maxFov),this.camera.updateProjectionMatrix())})),iU(this,"setTarget",((e,t,n)=>{if(this.camera){this.target.set(e,t,n),this._gizmos.position.set(e,t,n);const r=this.calculateTbRadius(this.camera);void 0!==r&&(this._tbRadius=r),this.makeGizmos(this.target,this._tbRadius),this.camera.lookAt(this.target)}})),iU(this,"zRotate",((e,t)=>(this._rotationMatrix.makeRotationAxis(this._rotationAxis,t),this._translationMatrix.makeTranslation(-e.x,-e.y,-e.z),this._m4_1.makeTranslation(e.x,e.y,e.z),this._m4_1.multiply(this._rotationMatrix),this._m4_1.multiply(this._translationMatrix),this._v3_1.setFromMatrixPosition(this._gizmoMatrixState).sub(e),this._v3_2.copy(this._v3_1).applyAxisAngle(this._rotationAxis,t),this._v3_2.sub(this._v3_1),this._m4_2.makeTranslation(this._v3_2.x,this._v3_2.y,this._v3_2.z),this.setTransformationMatrices(this._m4_1,this._m4_2),lU))),iU(this,"unprojectOnObj",((e,t)=>{if(!this.scene)return null;const n=new ig;n.near=t.near,n.far=t.far,n.setFromCamera(e,t);const r=n.intersectObjects(this.scene.children,!0);for(let i=0;i<r.length;i++)if(r[i].object.uuid!=this._gizmos.uuid&&r[i].face)return r[i].point.clone();return null})),iU(this,"unprojectOnTbSurface",((e,t,n,r,i)=>{if(e instanceof pl){this._v2_1.copy(this.getCursorPosition(t,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,0);const e=Math.pow(this._v2_1.x,2),i=Math.pow(this._v2_1.y,2),o=Math.pow(this._tbRadius,2);return e+i<=.5*o?this._v3_1.setZ(Math.sqrt(o-(e+i))):this._v3_1.setZ(.5*o/Math.sqrt(e+i)),this._v3_1}if(e instanceof js){this._v2_1.copy(this.getCursorNDC(t,n,r)),this._v3_1.set(this._v2_1.x,this._v2_1.y,-1),this._v3_1.applyMatrix4(e.projectionMatrixInverse);const o=this._v3_1.clone().normalize(),a=e.position.distanceTo(this._gizmos.position),s=Math.pow(i,2),l=this._v3_1.z,c=Math.sqrt(Math.pow(this._v3_1.x,2)+Math.pow(this._v3_1.y,2));if(0==c)return o.set(this._v3_1.x,this._v3_1.y,i),o;const u=l/c,h=a;let d=Math.pow(u,2)+1,f=2*u*h,p=Math.pow(h,2)-s,m=Math.pow(f,2)-4*d*p;if(m>=0){this._v2_1.setX((-f-Math.sqrt(m))/(2*d)),this._v2_1.setY(u*this._v2_1.x+h);if(Fi.RAD2DEG*this._v2_1.angle()>=45){const e=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return o.multiplyScalar(e),o.z+=a,o}}d=u,f=h,p=.5*-s,m=Math.pow(f,2)-4*d*p,this._v2_1.setX((-f-Math.sqrt(m))/(2*d)),this._v2_1.setY(u*this._v2_1.x+h);const g=Math.sqrt(Math.pow(this._v2_1.x,2)+Math.pow(a-this._v2_1.y,2));return o.multiplyScalar(g),o.z+=a,o}})),iU(this,"unprojectOnTbPlane",(function(e,n,r,i){let o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(e instanceof pl)return t._v2_1.copy(t.getCursorPosition(n,r,i)),t._v3_1.set(t._v2_1.x,t._v2_1.y,0),t._v3_1.clone();if(e instanceof js){t._v2_1.copy(t.getCursorNDC(n,r,i)),t._v3_1.set(t._v2_1.x,t._v2_1.y,-1),t._v3_1.applyMatrix4(e.projectionMatrixInverse);const a=t._v3_1.clone().normalize(),s=t._v3_1.z,l=Math.sqrt(Math.pow(t._v3_1.x,2)+Math.pow(t._v3_1.y,2));let c;if(c=o?t._v3_1.setFromMatrixPosition(t._cameraMatrixState0).distanceTo(t._v3_2.setFromMatrixPosition(t._gizmoMatrixState0)):e.position.distanceTo(t._gizmos.position),0==l)return a.set(0,0,0),a;const u=c,h=-u/(s/l),d=Math.sqrt(Math.pow(u,2)+Math.pow(h,2));return a.multiplyScalar(d),a.z=0,a}})),iU(this,"updateMatrixState",(()=>{this.camera&&(this._cameraMatrixState.copy(this.camera.matrix),this._gizmoMatrixState.copy(this._gizmos.matrix),this.camera instanceof pl&&(this._cameraProjectionState.copy(this.camera.projectionMatrix),this.camera.updateProjectionMatrix(),this._zoomState=this.camera.zoom),this.camera instanceof js&&(this._fovState=this.camera.fov))})),iU(this,"updateTbState",((e,t)=>{this._state=e,t&&this.updateMatrixState()})),iU(this,"update",(()=>{const e=1e-6;if(!this.target.equals(this._currentTarget)&&this.camera){this._gizmos.position.set(this.target.x,this.target.y,this.target.z);const e=this.calculateTbRadius(this.camera);void 0!==e&&(this._tbRadius=e),this.makeGizmos(this.target,this._tbRadius),this._currentTarget.copy(this.target)}if(this.camera){if(this.camera instanceof pl&&(this.camera.zoom>this.maxZoom||this.camera.zoom<this.minZoom)){const e=Fi.clamp(this.camera.zoom,this.minZoom,this.maxZoom);this.applyTransformMatrix(this.applyScale(e/this.camera.zoom,this._gizmos.position,!0))}if(this.camera instanceof js){const t=this.camera.position.distanceTo(this._gizmos.position);if(t>this.maxDistance+e||t<this.minDistance-e){const e=Fi.clamp(t,this.minDistance,this.maxDistance);this.applyTransformMatrix(this.applyScale(e/t,this._gizmos.position)),this.updateMatrixState()}(this.camera.fov<this.minFov||this.camera.fov>this.maxFov)&&(this.camera.fov=Fi.clamp(this.camera.fov,this.minFov,this.maxFov),this.camera.updateProjectionMatrix());const n=this._tbRadius,r=this.calculateTbRadius(this.camera);if(void 0!==r&&(this._tbRadius=r),n<this._tbRadius-e||n>this._tbRadius+e){const e=(this._gizmos.scale.x+this._gizmos.scale.y+this._gizmos.scale.z)/3,t=this._tbRadius/e,n=new Dd(0,0,t,t).getPoints(this._curvePts),r=(new hs).setFromPoints(n);for(const i in this._gizmos.children){this._gizmos.children[i].geometry=r}}}this.camera.lookAt(this._gizmos.position)}})),iU(this,"setStateFromJSON",(e=>{const t=JSON.parse(e);if(t.arcballState&&this.camera){this._cameraMatrixState.fromArray(t.arcballState.cameraMatrix.elements),this._cameraMatrixState.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.up.copy(t.arcballState.cameraUp),this.camera.near=t.arcballState.cameraNear,this.camera.far=t.arcballState.cameraFar,this.camera.zoom=t.arcballState.cameraZoom,this.camera instanceof js&&(this.camera.fov=t.arcballState.cameraFov),this._gizmoMatrixState.fromArray(t.arcballState.gizmoMatrix.elements),this._gizmoMatrixState.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this.camera.updateMatrix(),this.camera.updateProjectionMatrix(),this._gizmos.updateMatrix();const e=this.calculateTbRadius(this.camera);void 0!==e&&(this._tbRadius=e);const n=(new qo).copy(this._gizmoMatrixState0);this.makeGizmos(this._gizmos.position,this._tbRadius),this._gizmoMatrixState0.copy(n),this.camera.lookAt(this._gizmos.position),this.updateTbState(oU.IDLE,!1),this.dispatchEvent(cU)}})),this.camera=null,this.domElement=n,this.scene=r,this.mouseActions=[],this._mouseOp=null,this._v2_1=new zi,this._v3_1=new vo,this._v3_2=new vo,this._m4_1=new qo,this._m4_2=new qo,this._quat=new go,this._translationMatrix=new qo,this._rotationMatrix=new qo,this._scaleMatrix=new qo,this._rotationAxis=new vo,this._cameraMatrixState=new qo,this._cameraProjectionState=new qo,this._fovState=1,this._upState=new vo,this._zoomState=1,this._nearPos=0,this._farPos=0,this._gizmoMatrixState=new qo,this._up0=new vo,this._zoom0=1,this._fov0=0,this._initialNear=0,this._nearPos0=0,this._initialFar=0,this._farPos0=0,this._cameraMatrixState0=new qo,this._gizmoMatrixState0=new qo,this._button=-1,this._touchStart=[],this._touchCurrent=[],this._input=aU.NONE,this._switchSensibility=32,this._startFingerDistance=0,this._currentFingerDistance=0,this._startFingerRotation=0,this._currentFingerRotation=0,this._devPxRatio=0,this._downValid=!0,this._nclicks=0,this._downEvents=[],this._clickStart=0,this._maxDownTime=250,this._maxInterval=300,this._posThreshold=24,this._movementThreshold=24,this._currentCursorPosition=new vo,this._startCursorPosition=new vo,this._grid=null,this._gridPosition=new vo,this._gizmos=new ku,this._curvePts=128,this._timeStart=-1,this._animationId=-1,this.focusAnimationTime=500,this._timePrev=0,this._timeCurrent=0,this._anglePrev=0,this._angleCurrent=0,this._cursorPosPrev=new vo,this._cursorPosCurr=new vo,this._wPrev=0,this._wCurr=0,this.adjustNearFar=!1,this.scaleFactor=1.1,this.dampingFactor=25,this.wMax=20,this.enableAnimations=!0,this.enableGrid=!1,this.cursorZoom=!1,this.minFov=5,this.maxFov=90,this.enabled=!0,this.enablePan=!0,this.enableRotate=!0,this.enableZoom=!0,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.target=new vo(0,0,0),this._currentTarget=new vo(0,0,0),this._tbRadius=1,this._state=oU.IDLE,this.setCamera(e),this.scene&&this.scene.add(this._gizmos),this._devPxRatio=window.devicePixelRatio,this.initializeMouseActions(),this.domElement&&this.connect(this.domElement),window.addEventListener("resize",this.onWindowResize)}applyTransformMatrix(e){if((null==e?void 0:e.camera)&&this.camera&&(this._m4_1.copy(this._cameraMatrixState).premultiply(e.camera),this._m4_1.decompose(this.camera.position,this.camera.quaternion,this.camera.scale),this.camera.updateMatrix(),this._state!=oU.ROTATE&&this._state!=oU.ZROTATE&&this._state!=oU.ANIMATION_ROTATE||this.camera.up.copy(this._upState).applyQuaternion(this.camera.quaternion)),(null==e?void 0:e.gizmos)&&(this._m4_1.copy(this._gizmoMatrixState).premultiply(e.gizmos),this._m4_1.decompose(this._gizmos.position,this._gizmos.quaternion,this._gizmos.scale),this._gizmos.updateMatrix()),(this._state==oU.SCALE||this._state==oU.FOCUS||this._state==oU.ANIMATION_FOCUS)&&this.camera){const e=this.calculateTbRadius(this.camera);if(void 0!==e&&(this._tbRadius=e),this.adjustNearFar){const e=this.camera.position.distanceTo(this._gizmos.position),t=new xo;t.setFromObject(this._gizmos);const n=new zo;t.getBoundingSphere(n);const r=Math.max(this._nearPos0,n.radius+n.center.length()),i=e-this._initialNear,o=Math.min(r,i);this.camera.near=e-o;const a=Math.min(this._farPos0,-n.radius+n.center.length()),s=e-this._initialFar,l=Math.min(a,s);this.camera.far=e-l,this.camera.updateProjectionMatrix()}else{let e=!1;this.camera.near!=this._initialNear&&(this.camera.near=this._initialNear,e=!0),this.camera.far!=this._initialFar&&(this.camera.far=this._initialFar,e=!0),e&&this.camera.updateProjectionMatrix()}}}setGizmosVisible(e){this._gizmos.visible=e,this.dispatchEvent(cU)}setTransformationMatrices(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e?lU.camera?lU.camera.copy(e):lU.camera=e.clone():lU.camera=null,t?lU.gizmos?lU.gizmos.copy(t):lU.gizmos=t.clone():lU.gizmos=null}}const fU=(0,l.forwardRef)(((e,t)=>{let{camera:n,makeDefault:r,regress:i,domElement:o,onChange:a,onStart:s,onEnd:c,...u}=e;const h=cy((e=>e.invalidate)),d=cy((e=>e.camera)),f=cy((e=>e.gl)),p=cy((e=>e.events)),m=cy((e=>e.set)),g=cy((e=>e.get)),v=cy((e=>e.performance)),y=n||d,A=o||p.connected||f.domElement,x=(0,l.useMemo)((()=>new dU(y)),[y]);return uy((()=>{x.enabled&&x.update()}),-1),(0,l.useEffect)((()=>(x.connect(A),()=>{x.dispose()})),[A,i,x,h]),(0,l.useEffect)((()=>{const e=e=>{h(),i&&v.regress(),a&&a(e)};return x.addEventListener("change",e),s&&x.addEventListener("start",s),c&&x.addEventListener("end",c),()=>{x.removeEventListener("change",e),s&&x.removeEventListener("start",s),c&&x.removeEventListener("end",c)}}),[a,s,c]),(0,l.useEffect)((()=>{if(r){const e=g().controls;return m({controls:x}),()=>m({controls:e})}}),[r,x]),l.createElement("primitive",tC({ref:t,object:x},u))}));var pU=Object.defineProperty,mU=(e,t,n)=>(((e,t,n)=>{t in e?pU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class gU extends xa{constructor(e,t){super(),mU(this,"isTransformControls",!0),mU(this,"visible",!1),mU(this,"domElement"),mU(this,"raycaster",new ig),mU(this,"gizmo"),mU(this,"plane"),mU(this,"tempVector",new vo),mU(this,"tempVector2",new vo),mU(this,"tempQuaternion",new go),mU(this,"unit",{X:new vo(1,0,0),Y:new vo(0,1,0),Z:new vo(0,0,1)}),mU(this,"pointStart",new vo),mU(this,"pointEnd",new vo),mU(this,"offset",new vo),mU(this,"rotationAxis",new vo),mU(this,"startNorm",new vo),mU(this,"endNorm",new vo),mU(this,"rotationAngle",0),mU(this,"cameraPosition",new vo),mU(this,"cameraQuaternion",new go),mU(this,"cameraScale",new vo),mU(this,"parentPosition",new vo),mU(this,"parentQuaternion",new go),mU(this,"parentQuaternionInv",new go),mU(this,"parentScale",new vo),mU(this,"worldPositionStart",new vo),mU(this,"worldQuaternionStart",new go),mU(this,"worldScaleStart",new vo),mU(this,"worldPosition",new vo),mU(this,"worldQuaternion",new go),mU(this,"worldQuaternionInv",new go),mU(this,"worldScale",new vo),mU(this,"eye",new vo),mU(this,"positionStart",new vo),mU(this,"quaternionStart",new go),mU(this,"scaleStart",new vo),mU(this,"camera"),mU(this,"object"),mU(this,"enabled",!0),mU(this,"axis",null),mU(this,"mode","translate"),mU(this,"translationSnap",null),mU(this,"rotationSnap",null),mU(this,"scaleSnap",null),mU(this,"space","world"),mU(this,"size",1),mU(this,"dragging",!1),mU(this,"showX",!0),mU(this,"showY",!0),mU(this,"showZ",!0),mU(this,"changeEvent",{type:"change"}),mU(this,"mouseDownEvent",{type:"mouseDown",mode:this.mode}),mU(this,"mouseUpEvent",{type:"mouseUp",mode:this.mode}),mU(this,"objectChangeEvent",{type:"objectChange"}),mU(this,"intersectObjectWithRay",((e,t,n)=>{const r=t.intersectObject(e,!0);for(let i=0;i<r.length;i++)if(r[i].object.visible||n)return r[i];return!1})),mU(this,"attach",(e=>(this.object=e,this.visible=!0,this))),mU(this,"detach",(()=>(this.object=void 0,this.visible=!1,this.axis=null,this))),mU(this,"reset",(()=>this.enabled?(this.dragging&&void 0!==this.object&&(this.object.position.copy(this.positionStart),this.object.quaternion.copy(this.quaternionStart),this.object.scale.copy(this.scaleStart),this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent),this.pointStart.copy(this.pointEnd)),this):this)),mU(this,"updateMatrixWorld",(()=>{void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this.parentPosition,this.parentQuaternion,this.parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this.worldScale),this.parentQuaternionInv.copy(this.parentQuaternion).invert(),this.worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this.cameraScale),this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld()})),mU(this,"pointerHover",(e=>{if(void 0===this.object||!0===this.dragging)return;this.raycaster.setFromCamera(e,this.camera);const t=this.intersectObjectWithRay(this.gizmo.picker[this.mode],this.raycaster);this.axis=t?t.object.name:null})),mU(this,"pointerDown",(e=>{if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){this.raycaster.setFromCamera(e,this.camera);const t=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(t){let e=this.space;if("scale"===this.mode?e="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(e="world"),"local"===e&&"rotate"===this.mode){const e=this.rotationSnap;"X"===this.axis&&e&&(this.object.rotation.x=Math.round(this.object.rotation.x/e)*e),"Y"===this.axis&&e&&(this.object.rotation.y=Math.round(this.object.rotation.y/e)*e),"Z"===this.axis&&e&&(this.object.rotation.z=Math.round(this.object.rotation.z/e)*e)}this.object.updateMatrixWorld(),this.object.parent&&this.object.parent.updateMatrixWorld(),this.positionStart.copy(this.object.position),this.quaternionStart.copy(this.object.quaternion),this.scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this.worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)}this.dragging=!0,this.mouseDownEvent.mode=this.mode,this.dispatchEvent(this.mouseDownEvent)}})),mU(this,"pointerMove",(e=>{const t=this.axis,n=this.mode,r=this.object;let i=this.space;if("scale"===n?i="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(i="world"),void 0===r||null===t||!1===this.dragging||-1!==e.button)return;this.raycaster.setFromCamera(e,this.camera);const o=this.intersectObjectWithRay(this.plane,this.raycaster,!0);if(o){if(this.pointEnd.copy(o.point).sub(this.worldPositionStart),"translate"===n)this.offset.copy(this.pointEnd).sub(this.pointStart),"local"===i&&"XYZ"!==t&&this.offset.applyQuaternion(this.worldQuaternionInv),-1===t.indexOf("X")&&(this.offset.x=0),-1===t.indexOf("Y")&&(this.offset.y=0),-1===t.indexOf("Z")&&(this.offset.z=0),"local"===i&&"XYZ"!==t?this.offset.applyQuaternion(this.quaternionStart).divide(this.parentScale):this.offset.applyQuaternion(this.parentQuaternionInv).divide(this.parentScale),r.position.copy(this.offset).add(this.positionStart),this.translationSnap&&("local"===i&&(r.position.applyQuaternion(this.tempQuaternion.copy(this.quaternionStart).invert()),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this.quaternionStart)),"world"===i&&(r.parent&&r.position.add(this.tempVector.setFromMatrixPosition(r.parent.matrixWorld)),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(this.tempVector.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){let e=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(e*=-1),this.tempVector2.set(e,e,e)}else this.tempVector.copy(this.pointStart),this.tempVector2.copy(this.pointEnd),this.tempVector.applyQuaternion(this.worldQuaternionInv),this.tempVector2.applyQuaternion(this.worldQuaternionInv),this.tempVector2.divide(this.tempVector),-1===t.search("X")&&(this.tempVector2.x=1),-1===t.search("Y")&&(this.tempVector2.y=1),-1===t.search("Z")&&(this.tempVector2.z=1);r.scale.copy(this.scaleStart).multiply(this.tempVector2),this.scaleSnap&&this.object&&(-1!==t.search("X")&&(this.object.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this.offset.copy(this.pointEnd).sub(this.pointStart);const e=20/this.worldPosition.distanceTo(this.tempVector.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this.startNorm.copy(this.pointStart).normalize(),this.endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this.endNorm.cross(this.startNorm).dot(this.eye)<0?1:-1):"XYZE"===t?(this.rotationAxis.copy(this.offset).cross(this.eye).normalize(),this.rotationAngle=this.offset.dot(this.tempVector.copy(this.rotationAxis).cross(this.eye))*e):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(this.unit[t]),this.tempVector.copy(this.unit[t]),"local"===i&&this.tempVector.applyQuaternion(this.worldQuaternion),this.rotationAngle=this.offset.dot(this.tempVector.cross(this.eye).normalize())*e),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===i&&"E"!==t&&"XYZE"!==t?(r.quaternion.copy(this.quaternionStart),r.quaternion.multiply(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this.parentQuaternionInv),r.quaternion.copy(this.tempQuaternion.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this.quaternionStart).normalize())}this.dispatchEvent(this.changeEvent),this.dispatchEvent(this.objectChangeEvent)}})),mU(this,"pointerUp",(e=>{0===e.button&&(this.dragging&&null!==this.axis&&(this.mouseUpEvent.mode=this.mode,this.dispatchEvent(this.mouseUpEvent)),this.dragging=!1,this.axis=null)})),mU(this,"getPointer",(e=>{var t;if(this.domElement&&(null==(t=this.domElement.ownerDocument)?void 0:t.pointerLockElement))return{x:0,y:0,button:e.button};{const t=e.changedTouches?e.changedTouches[0]:e,n=this.domElement.getBoundingClientRect();return{x:(t.clientX-n.left)/n.width*2-1,y:-(t.clientY-n.top)/n.height*2+1,button:e.button}}})),mU(this,"onPointerHover",(e=>{if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this.getPointer(e))}})),mU(this,"onPointerDown",(e=>{this.enabled&&this.domElement&&(this.domElement.style.touchAction="none",this.domElement.ownerDocument.addEventListener("pointermove",this.onPointerMove),this.pointerHover(this.getPointer(e)),this.pointerDown(this.getPointer(e)))})),mU(this,"onPointerMove",(e=>{this.enabled&&this.pointerMove(this.getPointer(e))})),mU(this,"onPointerUp",(e=>{this.enabled&&this.domElement&&(this.domElement.style.touchAction="",this.domElement.ownerDocument.removeEventListener("pointermove",this.onPointerMove),this.pointerUp(this.getPointer(e)))})),mU(this,"getMode",(()=>this.mode)),mU(this,"setMode",(e=>{this.mode=e})),mU(this,"setTranslationSnap",(e=>{this.translationSnap=e})),mU(this,"setRotationSnap",(e=>{this.rotationSnap=e})),mU(this,"setScaleSnap",(e=>{this.scaleSnap=e})),mU(this,"setSize",(e=>{this.size=e})),mU(this,"setSpace",(e=>{this.space=e})),mU(this,"update",(()=>{console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")})),mU(this,"connect",(e=>{e===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.domElement=e,this.domElement.addEventListener("pointerdown",this.onPointerDown),this.domElement.addEventListener("pointermove",this.onPointerHover),this.domElement.ownerDocument.addEventListener("pointerup",this.onPointerUp)})),mU(this,"dispose",(()=>{var e,t,n,r,i,o;null==(e=this.domElement)||e.removeEventListener("pointerdown",this.onPointerDown),null==(t=this.domElement)||t.removeEventListener("pointermove",this.onPointerHover),null==(r=null==(n=this.domElement)?void 0:n.ownerDocument)||r.removeEventListener("pointermove",this.onPointerMove),null==(o=null==(i=this.domElement)?void 0:i.ownerDocument)||o.removeEventListener("pointerup",this.onPointerUp),this.traverse((e=>{const t=e;t.geometry&&t.geometry.dispose(),t.material&&t.material.dispose()}))})),this.domElement=t,this.camera=e,this.gizmo=new vU,this.add(this.gizmo),this.plane=new yU,this.add(this.plane);const n=(e,t)=>{let n=t;Object.defineProperty(this,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,this.plane[e]=t,this.gizmo[e]=t,this.dispatchEvent({type:e+"-changed",value:t}),this.dispatchEvent(this.changeEvent))}}),this[e]=t,this.plane[e]=t,this.gizmo[e]=t};n("camera",this.camera),n("object",this.object),n("enabled",this.enabled),n("axis",this.axis),n("mode",this.mode),n("translationSnap",this.translationSnap),n("rotationSnap",this.rotationSnap),n("scaleSnap",this.scaleSnap),n("space",this.space),n("size",this.size),n("dragging",this.dragging),n("showX",this.showX),n("showY",this.showY),n("showZ",this.showZ),n("worldPosition",this.worldPosition),n("worldPositionStart",this.worldPositionStart),n("worldQuaternion",this.worldQuaternion),n("worldQuaternionStart",this.worldQuaternionStart),n("cameraPosition",this.cameraPosition),n("cameraQuaternion",this.cameraQuaternion),n("pointStart",this.pointStart),n("pointEnd",this.pointEnd),n("rotationAxis",this.rotationAxis),n("rotationAngle",this.rotationAngle),n("eye",this.eye),void 0!==t&&this.connect(t)}}class vU extends xa{constructor(){super(),mU(this,"isTransformControlsGizmo",!0),mU(this,"type","TransformControlsGizmo"),mU(this,"tempVector",new vo(0,0,0)),mU(this,"tempEuler",new ra),mU(this,"alignVector",new vo(0,1,0)),mU(this,"zeroVector",new vo(0,0,0)),mU(this,"lookAtMatrix",new qo),mU(this,"tempQuaternion",new go),mU(this,"tempQuaternion2",new go),mU(this,"identityQuaternion",new go),mU(this,"unitX",new vo(1,0,0)),mU(this,"unitY",new vo(0,1,0)),mU(this,"unitZ",new vo(0,0,1)),mU(this,"gizmo"),mU(this,"picker"),mU(this,"helper"),mU(this,"rotationAxis",new vo),mU(this,"cameraPosition",new vo),mU(this,"worldPositionStart",new vo),mU(this,"worldQuaternionStart",new go),mU(this,"worldPosition",new vo),mU(this,"worldQuaternion",new go),mU(this,"eye",new vo),mU(this,"camera",null),mU(this,"enabled",!0),mU(this,"axis",null),mU(this,"mode","translate"),mU(this,"space","world"),mU(this,"size",1),mU(this,"dragging",!1),mU(this,"showX",!0),mU(this,"showY",!0),mU(this,"showZ",!0),mU(this,"updateMatrixWorld",(()=>{let e=this.space;"scale"===this.mode&&(e="local");const t="local"===e?this.worldQuaternion:this.identityQuaternion;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let r=0;r<n.length;r++){const e=n[r];let i;if(e.visible=!0,e.rotation.set(0,0,0),e.position.copy(this.worldPosition),i=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),e.scale.set(1,1,1).multiplyScalar(i*this.size/7),"helper"!==e.tag){if(e.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){const n=.99,r=.2,i=0;"X"!==e.name&&"XYZX"!==e.name||Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(t).dot(this.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Y"!==e.name&&"XYZY"!==e.name||Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(t).dot(this.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"Z"!==e.name&&"XYZZ"!==e.name||Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(t).dot(this.eye))>n&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XY"===e.name&&Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(t).dot(this.eye))<r&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"YZ"===e.name&&Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(t).dot(this.eye))<r&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),"XZ"===e.name&&Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(t).dot(this.eye))<r&&(e.scale.set(1e-10,1e-10,1e-10),e.visible=!1),-1!==e.name.search("X")&&(this.alignVector.copy(this.unitX).applyQuaternion(t).dot(this.eye)<i?"fwd"===e.tag?e.visible=!1:e.scale.x*=-1:"bwd"===e.tag&&(e.visible=!1)),-1!==e.name.search("Y")&&(this.alignVector.copy(this.unitY).applyQuaternion(t).dot(this.eye)<i?"fwd"===e.tag?e.visible=!1:e.scale.y*=-1:"bwd"===e.tag&&(e.visible=!1)),-1!==e.name.search("Z")&&(this.alignVector.copy(this.unitZ).applyQuaternion(t).dot(this.eye)<i?"fwd"===e.tag?e.visible=!1:e.scale.z*=-1:"bwd"===e.tag&&(e.visible=!1))}else"rotate"===this.mode&&(this.tempQuaternion2.copy(t),this.alignVector.copy(this.eye).applyQuaternion(this.tempQuaternion.copy(t).invert()),-1!==e.name.search("E")&&e.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.eye,this.zeroVector,this.unitY)),"X"===e.name&&(this.tempQuaternion.setFromAxisAngle(this.unitX,Math.atan2(-this.alignVector.y,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),e.quaternion.copy(this.tempQuaternion)),"Y"===e.name&&(this.tempQuaternion.setFromAxisAngle(this.unitY,Math.atan2(this.alignVector.x,this.alignVector.z)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),e.quaternion.copy(this.tempQuaternion)),"Z"===e.name&&(this.tempQuaternion.setFromAxisAngle(this.unitZ,Math.atan2(this.alignVector.y,this.alignVector.x)),this.tempQuaternion.multiplyQuaternions(this.tempQuaternion2,this.tempQuaternion),e.quaternion.copy(this.tempQuaternion)));e.visible=e.visible&&(-1===e.name.indexOf("X")||this.showX),e.visible=e.visible&&(-1===e.name.indexOf("Y")||this.showY),e.visible=e.visible&&(-1===e.name.indexOf("Z")||this.showZ),e.visible=e.visible&&(-1===e.name.indexOf("E")||this.showX&&this.showY&&this.showZ),e.material.tempOpacity=e.material.tempOpacity||e.material.opacity,e.material.tempColor=e.material.tempColor||e.material.color.clone(),e.material.color.copy(e.material.tempColor),e.material.opacity=e.material.tempOpacity,this.enabled?this.axis&&(e.name===this.axis||this.axis.split("").some((function(t){return e.name===t}))?(e.material.opacity=1,e.material.color.lerp(new La(1,1,1),.5)):(e.material.opacity*=.25,e.material.color.lerp(new La(1,1,1),.5))):(e.material.opacity*=.5,e.material.color.lerp(new La(1,1,1),.5))}else e.visible=!1,"AXIS"===e.name?(e.position.copy(this.worldPositionStart),e.visible=!!this.axis,"X"===this.axis&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,0)),e.quaternion.copy(t).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitX).applyQuaternion(t).dot(this.eye))>.9&&(e.visible=!1)),"Y"===this.axis&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,0,Math.PI/2)),e.quaternion.copy(t).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitY).applyQuaternion(t).dot(this.eye))>.9&&(e.visible=!1)),"Z"===this.axis&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),e.quaternion.copy(t).multiply(this.tempQuaternion),Math.abs(this.alignVector.copy(this.unitZ).applyQuaternion(t).dot(this.eye))>.9&&(e.visible=!1)),"XYZE"===this.axis&&(this.tempQuaternion.setFromEuler(this.tempEuler.set(0,Math.PI/2,0)),this.alignVector.copy(this.rotationAxis),e.quaternion.setFromRotationMatrix(this.lookAtMatrix.lookAt(this.zeroVector,this.alignVector,this.unitY)),e.quaternion.multiply(this.tempQuaternion),e.visible=this.dragging),"E"===this.axis&&(e.visible=!1)):"START"===e.name?(e.position.copy(this.worldPositionStart),e.visible=this.dragging):"END"===e.name?(e.position.copy(this.worldPosition),e.visible=this.dragging):"DELTA"===e.name?(e.position.copy(this.worldPositionStart),e.quaternion.copy(this.worldQuaternionStart),this.tempVector.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),this.tempVector.applyQuaternion(this.worldQuaternionStart.clone().invert()),e.scale.copy(this.tempVector),e.visible=this.dragging):(e.quaternion.copy(t),this.dragging?e.position.copy(this.worldPositionStart):e.position.copy(this.worldPosition),this.axis&&(e.visible=-1!==this.axis.search(e.name)))}super.updateMatrixWorld()}));const e=new Na({depthTest:!1,depthWrite:!1,transparent:!0,side:Ke,fog:!1,toneMapped:!1}),t=new od({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),n=e.clone();n.opacity=.15;const r=e.clone();r.opacity=.33;const i=e.clone();i.color.set(16711680);const o=e.clone();o.color.set(65280);const a=e.clone();a.color.set(255);const s=e.clone();s.opacity=.25;const l=s.clone();l.color.set(16776960);const c=s.clone();c.color.set(65535);const u=s.clone();u.color.set(16711935);e.clone().color.set(16776960);const h=t.clone();h.color.set(16711680);const d=t.clone();d.color.set(65280);const f=t.clone();f.color.set(255);const p=t.clone();p.color.set(65535);const m=t.clone();m.color.set(16711935);const g=t.clone();g.color.set(16776960);const v=t.clone();v.color.set(7895160);const y=g.clone();y.opacity=.25;const A=new rf(0,.05,.2,12,1,!1),x=new Ps(.125,.125,.125),b=new hs;b.setAttribute("position",new rs([0,0,0,1,0,0],3));const _=(e,t)=>{const n=new hs,r=[];for(let i=0;i<=64*t;++i)r.push(0,Math.cos(i/32*Math.PI)*e,Math.sin(i/32*Math.PI)*e);return n.setAttribute("position",new rs(r,3)),n},w={X:[[new Is(A,i),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new Is(A,i),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new fd(b,h)]],Y:[[new Is(A,o),[0,1,0],null,null,"fwd"],[new Is(A,o),[0,1,0],[Math.PI,0,0],null,"bwd"],[new fd(b,d),null,[0,0,Math.PI/2]]],Z:[[new Is(A,a),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new Is(A,a),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new fd(b,f),null,[0,-Math.PI/2,0]]],XYZ:[[new Is(new Vf(.1,0),s.clone()),[0,0,0],[0,0,0]]],XY:[[new Is(new tl(.295,.295),l.clone()),[.15,.15,0]],[new fd(b,g),[.18,.3,0],null,[.125,1,1]],[new fd(b,g),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new Is(new tl(.295,.295),c.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new fd(b,p),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new fd(b,p),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new Is(new tl(.295,.295),u.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new fd(b,m),[.18,0,.3],null,[.125,1,1]],[new fd(b,m),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},E={X:[[new Is(new rf(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new Is(new rf(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new Is(new rf(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new Is(new Vf(.2,0),n)]],XY:[[new Is(new tl(.4,.4),n),[.2,.2,0]]],YZ:[[new Is(new tl(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new Is(new tl(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},S={START:[[new Is(new Vf(.01,2),r),null,null,null,"helper"]],END:[[new Is(new Vf(.01,2),r),null,null,null,"helper"]],DELTA:[[new fd((()=>{const e=new hs;return e.setAttribute("position",new rs([0,0,0,1,1,1],3)),e})(),r),null,null,null,"helper"]],X:[[new fd(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new fd(b,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new fd(b,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},C={X:[[new fd(_(1,.5),h)],[new Is(new Vf(.04,0),i),[0,0,.99],null,[1,3,1]]],Y:[[new fd(_(1,.5),d),null,[0,0,-Math.PI/2]],[new Is(new Vf(.04,0),o),[0,0,.99],null,[3,1,1]]],Z:[[new fd(_(1,.5),f),null,[0,Math.PI/2,0]],[new Is(new Vf(.04,0),a),[.99,0,0],null,[1,3,1]]],E:[[new fd(_(1.25,1),y),null,[0,Math.PI/2,0]],[new Is(new rf(.03,0,.15,4,1,!1),y),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new Is(new rf(.03,0,.15,4,1,!1),y),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new Is(new rf(.03,0,.15,4,1,!1),y),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new Is(new rf(.03,0,.15,4,1,!1),y),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new fd(_(1,1),v),null,[0,Math.PI/2,0]]]},M={AXIS:[[new fd(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},T={X:[[new Is(new Jf(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new Is(new Jf(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new Is(new Jf(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new Is(new Jf(1.25,.1,2,24),n)]],XYZE:[[new Is(new Xf(.7,10,8),n)]]},I={X:[[new Is(x,i),[.8,0,0],[0,0,-Math.PI/2]],[new fd(b,h),null,null,[.8,1,1]]],Y:[[new Is(x,o),[0,.8,0]],[new fd(b,d),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new Is(x,a),[0,0,.8],[Math.PI/2,0,0]],[new fd(b,f),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new Is(x,l),[.85,.85,0],null,[2,2,.2]],[new fd(b,g),[.855,.98,0],null,[.125,1,1]],[new fd(b,g),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new Is(x,c),[0,.85,.85],null,[.2,2,2]],[new fd(b,p),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new fd(b,p),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new Is(x,u),[.85,0,.85],null,[2,.2,2]],[new fd(b,m),[.855,0,.98],null,[.125,1,1]],[new fd(b,m),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new Is(new Ps(.125,.125,.125),s.clone()),[1.1,0,0]]],XYZY:[[new Is(new Ps(.125,.125,.125),s.clone()),[0,1.1,0]]],XYZZ:[[new Is(new Ps(.125,.125,.125),s.clone()),[0,0,1.1]]]},B={X:[[new Is(new rf(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new Is(new rf(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new Is(new rf(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new Is(x,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new Is(x,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new Is(x,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new Is(new Ps(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new Is(new Ps(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new Is(new Ps(.2,.2,.2),n),[0,0,1.1]]]},P={X:[[new fd(b,r.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new fd(b,r.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new fd(b,r.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},R=e=>{const t=new xa;for(let n in e)for(let r=e[n].length;r--;){const i=e[n][r][0].clone(),o=e[n][r][1],a=e[n][r][2],s=e[n][r][3],l=e[n][r][4];i.name=n,i.tag=l,o&&i.position.set(o[0],o[1],o[2]),a&&i.rotation.set(a[0],a[1],a[2]),s&&i.scale.set(s[0],s[1],s[2]),i.updateMatrix();const c=i.geometry.clone();c.applyMatrix4(i.matrix),i.geometry=c,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t};this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=R(w)),this.add(this.gizmo.rotate=R(C)),this.add(this.gizmo.scale=R(I)),this.add(this.picker.translate=R(E)),this.add(this.picker.rotate=R(T)),this.add(this.picker.scale=R(B)),this.add(this.helper.translate=R(S)),this.add(this.helper.rotate=R(M)),this.add(this.helper.scale=R(P)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}}class yU extends Is{constructor(){super(new tl(1e5,1e5,2,2),new Na({visible:!1,wireframe:!0,side:Ke,transparent:!0,opacity:.1,toneMapped:!1})),mU(this,"isTransformControlsPlane",!0),mU(this,"type","TransformControlsPlane"),mU(this,"unitX",new vo(1,0,0)),mU(this,"unitY",new vo(0,1,0)),mU(this,"unitZ",new vo(0,0,1)),mU(this,"tempVector",new vo),mU(this,"dirVector",new vo),mU(this,"alignVector",new vo),mU(this,"tempMatrix",new qo),mU(this,"identityQuaternion",new go),mU(this,"cameraQuaternion",new go),mU(this,"worldPosition",new vo),mU(this,"worldQuaternion",new go),mU(this,"eye",new vo),mU(this,"axis",null),mU(this,"mode","translate"),mU(this,"space","world"),mU(this,"updateMatrixWorld",(()=>{let e=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(e="local"),this.unitX.set(1,0,0).applyQuaternion("local"===e?this.worldQuaternion:this.identityQuaternion),this.unitY.set(0,1,0).applyQuaternion("local"===e?this.worldQuaternion:this.identityQuaternion),this.unitZ.set(0,0,1).applyQuaternion("local"===e?this.worldQuaternion:this.identityQuaternion),this.alignVector.copy(this.unitY),this.mode){case"translate":case"scale":switch(this.axis){case"X":this.alignVector.copy(this.eye).cross(this.unitX),this.dirVector.copy(this.unitX).cross(this.alignVector);break;case"Y":this.alignVector.copy(this.eye).cross(this.unitY),this.dirVector.copy(this.unitY).cross(this.alignVector);break;case"Z":this.alignVector.copy(this.eye).cross(this.unitZ),this.dirVector.copy(this.unitZ).cross(this.alignVector);break;case"XY":this.dirVector.copy(this.unitZ);break;case"YZ":this.dirVector.copy(this.unitX);break;case"XZ":this.alignVector.copy(this.unitZ),this.dirVector.copy(this.unitY);break;case"XYZ":case"E":this.dirVector.set(0,0,0)}break;default:this.dirVector.set(0,0,0)}0===this.dirVector.length()?this.quaternion.copy(this.cameraQuaternion):(this.tempMatrix.lookAt(this.tempVector.set(0,0,0),this.dirVector,this.alignVector),this.quaternion.setFromRotationMatrix(this.tempMatrix)),super.updateMatrixWorld()}))}}const AU=l.forwardRef(((e,t)=>{let{children:n,domElement:r,onChange:i,onMouseDown:o,onMouseUp:a,onObjectChange:s,object:c,makeDefault:u,camera:h,enabled:d,axis:f,mode:p,translationSnap:m,rotationSnap:g,scaleSnap:v,space:y,size:A,showX:x,showY:b,showZ:_,...w}=e;const E=cy((e=>e.controls)),S=cy((e=>e.gl)),C=cy((e=>e.events)),M=cy((e=>e.camera)),T=cy((e=>e.invalidate)),I=cy((e=>e.get)),B=cy((e=>e.set)),P=h||M,R=r||C.connected||S.domElement,D=l.useMemo((()=>new gU(P,R)),[P,R]),O=l.useRef(null);l.useLayoutEffect((()=>(c?D.attach(c instanceof xa?c:c.current):O.current instanceof xa&&D.attach(O.current),()=>{D.detach()})),[c,n,D]),l.useEffect((()=>{if(E){const e=e=>E.enabled=!e.value;return D.addEventListener("dragging-changed",e),()=>D.removeEventListener("dragging-changed",e)}}),[D,E]);const k=l.useRef(),L=l.useRef(),F=l.useRef(),z=l.useRef();return l.useLayoutEffect((()=>{k.current=i}),[i]),l.useLayoutEffect((()=>{L.current=o}),[o]),l.useLayoutEffect((()=>{F.current=a}),[a]),l.useLayoutEffect((()=>{z.current=s}),[s]),l.useEffect((()=>{const e=e=>{T(),null==k.current||k.current(e)},t=e=>null==L.current?void 0:L.current(e),n=e=>null==F.current?void 0:F.current(e),r=e=>null==z.current?void 0:z.current(e);return D.addEventListener("change",e),D.addEventListener("mouseDown",t),D.addEventListener("mouseUp",n),D.addEventListener("objectChange",r),()=>{D.removeEventListener("change",e),D.removeEventListener("mouseDown",t),D.removeEventListener("mouseUp",n),D.removeEventListener("objectChange",r)}}),[T,D]),l.useEffect((()=>{if(u){const e=I().controls;return B({controls:D}),()=>B({controls:e})}}),[u,D]),l.createElement(l.Fragment,null,l.createElement("primitive",{ref:t,object:D,enabled:d,axis:f,mode:p,translationSnap:m,rotationSnap:g,scaleSnap:v,space:y,size:A,showX:x,showY:b,showZ:_}),l.createElement("group",tC({ref:O},w),n))}));var xU=Object.defineProperty,bU=(e,t,n)=>(((e,t,n)=>{t in e?xU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const _U=new ra(0,0,0,"YXZ"),wU=new vo,EU={type:"change"},SU={type:"lock"},CU={type:"unlock"},MU=Math.PI/2;class TU extends Ci{constructor(e,t){super(),bU(this,"camera"),bU(this,"domElement"),bU(this,"isLocked"),bU(this,"minPolarAngle"),bU(this,"maxPolarAngle"),bU(this,"pointerSpeed"),bU(this,"onMouseMove",(e=>{if(!this.domElement||!1===this.isLocked)return;const t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0;_U.setFromQuaternion(this.camera.quaternion),_U.y-=.002*t*this.pointerSpeed,_U.x-=.002*n*this.pointerSpeed,_U.x=Math.max(MU-this.maxPolarAngle,Math.min(MU-this.minPolarAngle,_U.x)),this.camera.quaternion.setFromEuler(_U),this.dispatchEvent(EU)})),bU(this,"onPointerlockChange",(()=>{this.domElement&&(this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(SU),this.isLocked=!0):(this.dispatchEvent(CU),this.isLocked=!1))})),bU(this,"onPointerlockError",(()=>{console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")})),bU(this,"connect",(e=>{this.domElement=e||this.domElement,this.domElement&&(this.domElement.ownerDocument.addEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this.onPointerlockError))})),bU(this,"disconnect",(()=>{this.domElement&&(this.domElement.ownerDocument.removeEventListener("mousemove",this.onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this.onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this.onPointerlockError))})),bU(this,"dispose",(()=>{this.disconnect()})),bU(this,"getObject",(()=>this.camera)),bU(this,"direction",new vo(0,0,-1)),bU(this,"getDirection",(e=>e.copy(this.direction).applyQuaternion(this.camera.quaternion))),bU(this,"moveForward",(e=>{wU.setFromMatrixColumn(this.camera.matrix,0),wU.crossVectors(this.camera.up,wU),this.camera.position.addScaledVector(wU,e)})),bU(this,"moveRight",(e=>{wU.setFromMatrixColumn(this.camera.matrix,0),this.camera.position.addScaledVector(wU,e)})),bU(this,"lock",(()=>{this.domElement&&this.domElement.requestPointerLock()})),bU(this,"unlock",(()=>{this.domElement&&this.domElement.ownerDocument.exitPointerLock()})),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,t&&this.connect(t)}}const IU=l.forwardRef(((e,t)=>{let{domElement:n,selector:r,onChange:i,onLock:o,onUnlock:a,enabled:s=!0,makeDefault:c,...u}=e;const{camera:h,...d}=u,f=cy((e=>e.setEvents)),p=cy((e=>e.gl)),m=cy((e=>e.camera)),g=cy((e=>e.invalidate)),v=cy((e=>e.events)),y=cy((e=>e.get)),A=cy((e=>e.set)),x=h||m,b=n||v.connected||p.domElement,_=l.useMemo((()=>new TU(x)),[x]);return l.useEffect((()=>{if(s){_.connect(b);const e=y().events.compute;return f({compute(e,t){const n=t.size.width/2,r=t.size.height/2;t.pointer.set(n/t.size.width*2-1,-r/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),()=>{_.disconnect(),f({compute:e})}}}),[s,_]),l.useEffect((()=>{const e=e=>{g(),i&&i(e)};_.addEventListener("change",e),o&&_.addEventListener("lock",o),a&&_.addEventListener("unlock",a);const t=()=>_.lock(),n=r?Array.from(document.querySelectorAll(r)):[document];return n.forEach((e=>e&&e.addEventListener("click",t))),()=>{_.removeEventListener("change",e),o&&_.removeEventListener("lock",o),a&&_.removeEventListener("unlock",a),n.forEach((e=>e?e.removeEventListener("click",t):void 0))}}),[i,o,a,r,_,g]),l.useEffect((()=>{if(c){const e=y().controls;return A({controls:_}),()=>A({controls:e})}}),[c,_]),l.createElement("primitive",tC({ref:t,object:_},d))}));var BU=Object.defineProperty,PU=(e,t,n)=>(((e,t,n)=>{t in e?BU(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const RU=new vo;class DU extends Ci{constructor(e,t){super(),PU(this,"object"),PU(this,"domElement"),PU(this,"enabled",!0),PU(this,"movementSpeed",1),PU(this,"lookSpeed",.005),PU(this,"lookVertical",!0),PU(this,"autoForward",!1),PU(this,"activeLook",!0),PU(this,"heightSpeed",!1),PU(this,"heightCoef",1),PU(this,"heightMin",0),PU(this,"heightMax",1),PU(this,"constrainVertical",!1),PU(this,"verticalMin",0),PU(this,"verticalMax",Math.PI),PU(this,"mouseDragOn",!1),PU(this,"autoSpeedFactor",0),PU(this,"mouseX",0),PU(this,"mouseY",0),PU(this,"moveForward",!1),PU(this,"moveBackward",!1),PU(this,"moveLeft",!1),PU(this,"moveRight",!1),PU(this,"moveUp",!1),PU(this,"moveDown",!1),PU(this,"viewHalfX",0),PU(this,"viewHalfY",0),PU(this,"lat",0),PU(this,"lon",0),PU(this,"lookDirection",new vo),PU(this,"spherical",new sg),PU(this,"target",new vo),PU(this,"connect",(e=>{e.setAttribute("tabindex","-1"),e.style.touchAction="none",e.addEventListener("contextmenu",this.contextmenu),e.addEventListener("mousemove",this.onMouseMove),e.addEventListener("mousedown",this.onMouseDown),e.addEventListener("mouseup",this.onMouseUp),this.domElement=e,window.addEventListener("keydown",this.onKeyDown),window.addEventListener("keyup",this.onKeyUp),this.handleResize()})),PU(this,"dispose",(()=>{var e,t,n,r;null==(e=this.domElement)||e.removeEventListener("contextmenu",this.contextmenu),null==(t=this.domElement)||t.removeEventListener("mousedown",this.onMouseDown),null==(n=this.domElement)||n.removeEventListener("mousemove",this.onMouseMove),null==(r=this.domElement)||r.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("keydown",this.onKeyDown),window.removeEventListener("keyup",this.onKeyUp)})),PU(this,"handleResize",(()=>{this.domElement&&(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)})),PU(this,"onMouseDown",(e=>{var t;if(null==(t=this.domElement)||t.focus(),this.activeLook)switch(e.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0}this.mouseDragOn=!0})),PU(this,"onMouseUp",(e=>{if(this.activeLook)switch(e.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1}this.mouseDragOn=!1})),PU(this,"onMouseMove",(e=>{this.domElement&&(this.mouseX=e.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=e.pageY-this.domElement.offsetTop-this.viewHalfY)})),PU(this,"onKeyDown",(e=>{switch(e.code){case"ArrowUp":case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0;break;case"KeyR":this.moveUp=!0;break;case"KeyF":this.moveDown=!0}})),PU(this,"onKeyUp",(e=>{switch(e.code){case"ArrowUp":case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1;break;case"KeyR":this.moveUp=!1;break;case"KeyF":this.moveDown=!1}})),PU(this,"lookAt",((e,t,n)=>(e instanceof vo?this.target.copy(e):t&&n&&this.target.set(e,t,n),this.object.lookAt(this.target),this.setOrientation(),this))),PU(this,"update",(e=>{if(!this.enabled)return;if(this.heightSpeed){const t=Fi.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=e*(t*this.heightCoef)}else this.autoSpeedFactor=0;const t=e*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(t+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(t),this.moveLeft&&this.object.translateX(-t),this.moveRight&&this.object.translateX(t),this.moveUp&&this.object.translateY(t),this.moveDown&&this.object.translateY(-t);let n=e*this.lookSpeed;this.activeLook||(n=0);let r=1;this.constrainVertical&&(r=Math.PI/(this.verticalMax-this.verticalMin)),this.lon-=this.mouseX*n,this.lookVertical&&(this.lat-=this.mouseY*n*r),this.lat=Math.max(-85,Math.min(85,this.lat));let i=Fi.degToRad(90-this.lat);const o=Fi.degToRad(this.lon);this.constrainVertical&&(i=Fi.mapLinear(i,0,Math.PI,this.verticalMin,this.verticalMax));const a=this.object.position;RU.setFromSphericalCoords(1,i,o).add(a),this.object.lookAt(RU)})),PU(this,"contextmenu",(e=>e.preventDefault())),PU(this,"setOrientation",(()=>{this.lookDirection.set(0,0,-1).applyQuaternion(this.object.quaternion),this.spherical.setFromVector3(this.lookDirection),this.lat=90-Fi.radToDeg(this.spherical.phi),this.lon=Fi.radToDeg(this.spherical.theta)})),this.object=e,this.domElement=t,this.setOrientation(),t&&this.connect(t)}}const OU=l.forwardRef(((e,t)=>{let{domElement:n,makeDefault:r,...i}=e;const o=cy((e=>e.camera)),a=cy((e=>e.gl)),s=cy((e=>e.events)),c=cy((e=>e.get)),u=cy((e=>e.set)),h=n||s.connected||a.domElement,[d]=l.useState((()=>new DU(o,h)));return l.useEffect((()=>{if(r){const e=c().controls;return u({controls:d}),()=>u({controls:e})}}),[r,d]),uy(((e,t)=>{d.update(t)}),-1),d?l.createElement("primitive",tC({ref:t,object:d},i)):null})),kU=1,LU=2,FU=4,zU=Object.freeze({NONE:0,ROTATE:1,TRUCK:2,OFFSET:4,DOLLY:8,ZOOM:16,TOUCH_ROTATE:32,TOUCH_TRUCK:64,TOUCH_OFFSET:128,TOUCH_DOLLY:256,TOUCH_ZOOM:512,TOUCH_DOLLY_TRUCK:1024,TOUCH_DOLLY_OFFSET:2048,TOUCH_DOLLY_ROTATE:4096,TOUCH_ZOOM_TRUCK:8192,TOUCH_ZOOM_OFFSET:16384,TOUCH_ZOOM_ROTATE:32768}),UU=0,NU=1,jU=-1;function GU(e){return e.isPerspectiveCamera}function QU(e){return e.isOrthographicCamera}const HU=2*Math.PI,VU=Math.PI/2,WU=1e-5,qU=Math.PI/180;function XU(e,t,n){return Math.max(t,Math.min(n,e))}function YU(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:WU;return Math.abs(e)<t}function JU(e,t){return YU(e-t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:WU)}function KU(e,t){return Math.round(e/t)*t}function ZU(e){return isFinite(e)?e:e<0?-Number.MAX_VALUE:Number.MAX_VALUE}function $U(e){return Math.abs(e)<Number.MAX_VALUE?e:e*(1/0)}function eN(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=arguments.length>5?arguments[5]:void 0;const a=2/(r=Math.max(1e-4,r)),s=a*o,l=1/(1+s+.48*s*s+.235*s*s*s);let c=e-t;const u=t,h=i*r;c=XU(c,-h,h),t=e-c;const d=(n.value+a*c)*o;n.value=(n.value-a*d)*l;let f=t+(c+d)*l;return u-e>0===f>u&&(f=u,n.value=(f-u)/o),f}function tN(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0,o=arguments.length>5?arguments[5]:void 0,a=arguments.length>6?arguments[6]:void 0;const s=2/(r=Math.max(1e-4,r)),l=s*o,c=1/(1+l+.48*l*l+.235*l*l*l);let u=t.x,h=t.y,d=t.z,f=e.x-u,p=e.y-h,m=e.z-d;const g=u,v=h,y=d,A=i*r,x=f*f+p*p+m*m;if(x>A*A){const e=Math.sqrt(x);f=f/e*A,p=p/e*A,m=m/e*A}u=e.x-f,h=e.y-p,d=e.z-m;const b=(n.x+s*f)*o,_=(n.y+s*p)*o,w=(n.z+s*m)*o;n.x=(n.x-s*b)*c,n.y=(n.y-s*_)*c,n.z=(n.z-s*w)*c,a.x=u+(f+b)*c,a.y=h+(p+_)*c,a.z=d+(m+w)*c;const E=g-e.x,S=v-e.y,C=y-e.z;return E*(a.x-g)+S*(a.y-v)+C*(a.z-y)>0&&(a.x=g,a.y=v,a.z=y,n.x=(a.x-g)/o,n.y=(a.y-v)/o,n.z=(a.z-y)/o),a}function nN(e,t){t.set(0,0),e.forEach((e=>{t.x+=e.clientX,t.y+=e.clientY})),t.x/=e.length,t.y/=e.length}function rN(e,t){return!!QU(e)&&(console.warn(`${t} is not supported in OrthographicCamera`),!0)}class iN{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}removeAllEventListeners(e){e?Array.isArray(this._listeners[e])&&(this._listeners[e].length=0):this._listeners={}}dispatchEvent(e){const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}}}var oN;const aN=1/8,sN=/Mac/.test(null===(oN=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===oN?void 0:oN.platform);let lN,cN,uN,hN,dN,fN,pN,mN,gN,vN,yN,AN,xN,bN,_N,wN,EN,SN,CN,MN,TN,IN,BN;class PN extends iN{static install(e){lN=e.THREE,cN=Object.freeze(new lN.Vector3(0,0,0)),uN=Object.freeze(new lN.Vector3(0,1,0)),hN=Object.freeze(new lN.Vector3(0,0,1)),dN=new lN.Vector2,fN=new lN.Vector3,pN=new lN.Vector3,mN=new lN.Vector3,gN=new lN.Vector3,vN=new lN.Vector3,yN=new lN.Vector3,AN=new lN.Vector3,xN=new lN.Vector3,bN=new lN.Vector3,_N=new lN.Spherical,wN=new lN.Spherical,EN=new lN.Box3,SN=new lN.Box3,CN=new lN.Sphere,MN=new lN.Quaternion,TN=new lN.Quaternion,IN=new lN.Matrix4,BN=new lN.Raycaster}static get ACTION(){return zU}constructor(e,t){super(),this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.minDistance=Number.EPSILON,this.maxDistance=1/0,this.infinityDolly=!1,this.minZoom=.01,this.maxZoom=1/0,this.smoothTime=.25,this.draggingSmoothTime=.125,this.maxSpeed=1/0,this.azimuthRotateSpeed=1,this.polarRotateSpeed=1,this.dollySpeed=1,this.dollyDragInverted=!1,this.truckSpeed=2,this.dollyToCursor=!1,this.dragToOffset=!1,this.verticalDragToForward=!1,this.boundaryFriction=0,this.restThreshold=.01,this.colliderMeshes=[],this.cancel=()=>{},this._enabled=!0,this._state=zU.NONE,this._viewport=null,this._changedDolly=0,this._changedZoom=0,this._hasRested=!0,this._boundaryEnclosesCamera=!1,this._needsUpdate=!0,this._updatedLastTime=!1,this._elementRect=new DOMRect,this._isDragging=!1,this._dragNeedsUpdate=!0,this._activePointers=[],this._lockedPointer=null,this._interactiveArea=new DOMRect(0,0,1,1),this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._isUserControllingOffset=!1,this._isUserControllingZoom=!1,this._lastDollyDirection=UU,this._thetaVelocity={value:0},this._phiVelocity={value:0},this._radiusVelocity={value:0},this._targetVelocity=new lN.Vector3,this._focalOffsetVelocity=new lN.Vector3,this._zoomVelocity={value:0},this._truckInternal=(e,t,n)=>{let r,i;if(GU(this._camera)){const n=fN.copy(this._camera.position).sub(this._target),o=this._camera.getEffectiveFOV()*qU,a=n.length()*Math.tan(.5*o);r=this.truckSpeed*e*a/this._elementRect.height,i=this.truckSpeed*t*a/this._elementRect.height}else{if(!QU(this._camera))return;{const n=this._camera;r=e*(n.right-n.left)/n.zoom/this._elementRect.width,i=t*(n.top-n.bottom)/n.zoom/this._elementRect.height}}this.verticalDragToForward?(n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y,this._focalOffsetEnd.z,!0):this.truck(r,0,!0),this.forward(-i,!0)):n?this.setFocalOffset(this._focalOffsetEnd.x+r,this._focalOffsetEnd.y+i,this._focalOffsetEnd.z,!0):this.truck(r,i,!0)},this._rotateInternal=(e,t)=>{const n=HU*this.azimuthRotateSpeed*e/this._elementRect.height,r=HU*this.polarRotateSpeed*t/this._elementRect.height;this.rotate(n,r,!0)},this._dollyInternal=(e,t,n)=>{const r=Math.pow(.95,-e*this.dollySpeed),i=this._sphericalEnd.radius,o=this._sphericalEnd.radius*r,a=XU(o,this.minDistance,this.maxDistance),s=a-o;this.infinityDolly&&this.dollyToCursor?this._dollyToNoClamp(o,!0):this.infinityDolly&&!this.dollyToCursor?(this.dollyInFixed(s,!0),this._dollyToNoClamp(a,!0)):this._dollyToNoClamp(a,!0),this.dollyToCursor&&(this._changedDolly+=(this.infinityDolly?o:a)-i,this._dollyControlCoord.set(t,n)),this._lastDollyDirection=Math.sign(-e)},this._zoomInternal=(e,t,n)=>{const r=Math.pow(.95,e*this.dollySpeed),i=this._zoom,o=this._zoom*r;this.zoomTo(o,!0),this.dollyToCursor&&(this._changedZoom+=o-i,this._dollyControlCoord.set(t,n))},"undefined"===typeof lN&&console.error("camera-controls: `THREE` is undefined. You must first run `CameraControls.install( { THREE: THREE } )`. Check the docs for further information."),this._camera=e,this._yAxisUpSpace=(new lN.Quaternion).setFromUnitVectors(this._camera.up,uN),this._yAxisUpSpaceInverse=this._yAxisUpSpace.clone().invert(),this._state=zU.NONE,this._target=new lN.Vector3,this._targetEnd=this._target.clone(),this._focalOffset=new lN.Vector3,this._focalOffsetEnd=this._focalOffset.clone(),this._spherical=(new lN.Spherical).setFromVector3(fN.copy(this._camera.position).applyQuaternion(this._yAxisUpSpace)),this._sphericalEnd=this._spherical.clone(),this._lastDistance=this._spherical.radius,this._zoom=this._camera.zoom,this._zoomEnd=this._zoom,this._lastZoom=this._zoom,this._nearPlaneCorners=[new lN.Vector3,new lN.Vector3,new lN.Vector3,new lN.Vector3],this._updateNearPlaneCorners(),this._boundary=new lN.Box3(new lN.Vector3(-1/0,-1/0,-1/0),new lN.Vector3(1/0,1/0,1/0)),this._cameraUp0=this._camera.up.clone(),this._target0=this._target.clone(),this._position0=this._camera.position.clone(),this._zoom0=this._zoom,this._focalOffset0=this._focalOffset.clone(),this._dollyControlCoord=new lN.Vector2,this.mouseButtons={left:zU.ROTATE,middle:zU.DOLLY,right:zU.TRUCK,wheel:GU(this._camera)?zU.DOLLY:QU(this._camera)?zU.ZOOM:zU.NONE},this.touches={one:zU.TOUCH_ROTATE,two:GU(this._camera)?zU.TOUCH_DOLLY_TRUCK:QU(this._camera)?zU.TOUCH_ZOOM_TRUCK:zU.NONE,three:zU.TOUCH_TRUCK};const n=new lN.Vector2,r=new lN.Vector2,i=new lN.Vector2,o=e=>{if(!this._enabled||!this._domElement)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}const t="mouse"!==e.pointerType?null:(e.buttons&kU)===kU?kU:(e.buttons&FU)===FU?FU:(e.buttons&LU)===LU?LU:null;if(null!==t){const e=this._findPointerByMouseButton(t);e&&this._disposePointer(e)}if((e.buttons&kU)===kU&&this._lockedPointer)return;const n={pointerId:e.pointerId,clientX:e.clientX,clientY:e.clientY,deltaX:0,deltaY:0,mouseButton:t};this._activePointers.push(n),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",s),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",s),this._isDragging=!0,h(e)},a=e=>{e.cancelable&&e.preventDefault();const t=e.pointerId,n=this._lockedPointer||this._findPointerById(t);if(n){if(n.clientX=e.clientX,n.clientY=e.clientY,n.deltaX=e.movementX,n.deltaY=e.movementY,this._state=0,"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else(!this._isDragging&&this._lockedPointer||this._isDragging&&(e.buttons&kU)===kU)&&(this._state=this._state|this.mouseButtons.left),this._isDragging&&(e.buttons&FU)===FU&&(this._state=this._state|this.mouseButtons.middle),this._isDragging&&(e.buttons&LU)===LU&&(this._state=this._state|this.mouseButtons.right);d()}},s=e=>{const t=this._findPointerById(e.pointerId);if(!t||t!==this._lockedPointer){if(t&&this._disposePointer(t),"touch"===e.pointerType)switch(this._activePointers.length){case 0:this._state=zU.NONE;break;case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._state=zU.NONE;f()}};let l=-1;const c=e=>{if(!this._domElement)return;if(!this._enabled||this.mouseButtons.wheel===zU.NONE)return;if(0!==this._interactiveArea.left||0!==this._interactiveArea.top||1!==this._interactiveArea.width||1!==this._interactiveArea.height){const t=this._domElement.getBoundingClientRect(),n=e.clientX/t.width,r=e.clientY/t.height;if(n<this._interactiveArea.left||n>this._interactiveArea.right||r<this._interactiveArea.top||r>this._interactiveArea.bottom)return}if(e.preventDefault(),this.dollyToCursor||this.mouseButtons.wheel===zU.ROTATE||this.mouseButtons.wheel===zU.TRUCK){const e=performance.now();l-e<1e3&&this._getClientRect(this._elementRect),l=e}const t=sN?-1:-3,n=1===e.deltaMode?e.deltaY/t:e.deltaY/(10*t),r=this.dollyToCursor?(e.clientX-this._elementRect.x)/this._elementRect.width*2-1:0,i=this.dollyToCursor?(e.clientY-this._elementRect.y)/this._elementRect.height*-2+1:0;switch(this.mouseButtons.wheel){case zU.ROTATE:this._rotateInternal(e.deltaX,e.deltaY),this._isUserControllingRotate=!0;break;case zU.TRUCK:this._truckInternal(e.deltaX,e.deltaY,!1),this._isUserControllingTruck=!0;break;case zU.OFFSET:this._truckInternal(e.deltaX,e.deltaY,!0),this._isUserControllingOffset=!0;break;case zU.DOLLY:this._dollyInternal(-n,r,i),this._isUserControllingDolly=!0;break;case zU.ZOOM:this._zoomInternal(-n,r,i),this._isUserControllingZoom=!0}this.dispatchEvent({type:"control"})},u=e=>{if(this._domElement&&this._enabled){if(this.mouseButtons.right===PN.ACTION.NONE){const t=e instanceof PointerEvent?e.pointerId:0,n=this._findPointerById(t);return n&&this._disposePointer(n),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),void this._domElement.ownerDocument.removeEventListener("pointerup",s)}e.preventDefault()}},h=e=>{if(!this._enabled)return;nN(this._activePointers,dN),this._getClientRect(this._elementRect),n.copy(dN),r.copy(dN);if(this._activePointers.length>=2){const e=dN.x-this._activePointers[1].clientX,t=dN.y-this._activePointers[1].clientY,n=Math.sqrt(e*e+t*t);i.set(0,n);const o=.5*(this._activePointers[0].clientX+this._activePointers[1].clientX),a=.5*(this._activePointers[0].clientY+this._activePointers[1].clientY);r.set(o,a)}if(this._state=0,e)if("pointerType"in e&&"touch"===e.pointerType)switch(this._activePointers.length){case 1:this._state=this.touches.one;break;case 2:this._state=this.touches.two;break;case 3:this._state=this.touches.three}else this._lockedPointer||(e.buttons&kU)!==kU||(this._state=this._state|this.mouseButtons.left),(e.buttons&FU)===FU&&(this._state=this._state|this.mouseButtons.middle),(e.buttons&LU)===LU&&(this._state=this._state|this.mouseButtons.right);else this._lockedPointer&&(this._state=this._state|this.mouseButtons.left);(this._state&zU.ROTATE)!==zU.ROTATE&&(this._state&zU.TOUCH_ROTATE)!==zU.TOUCH_ROTATE&&(this._state&zU.TOUCH_DOLLY_ROTATE)!==zU.TOUCH_DOLLY_ROTATE&&(this._state&zU.TOUCH_ZOOM_ROTATE)!==zU.TOUCH_ZOOM_ROTATE||(this._sphericalEnd.theta=this._spherical.theta,this._sphericalEnd.phi=this._spherical.phi,this._thetaVelocity.value=0,this._phiVelocity.value=0),(this._state&zU.TRUCK)!==zU.TRUCK&&(this._state&zU.TOUCH_TRUCK)!==zU.TOUCH_TRUCK&&(this._state&zU.TOUCH_DOLLY_TRUCK)!==zU.TOUCH_DOLLY_TRUCK&&(this._state&zU.TOUCH_ZOOM_TRUCK)!==zU.TOUCH_ZOOM_TRUCK||(this._targetEnd.copy(this._target),this._targetVelocity.set(0,0,0)),(this._state&zU.DOLLY)!==zU.DOLLY&&(this._state&zU.TOUCH_DOLLY)!==zU.TOUCH_DOLLY&&(this._state&zU.TOUCH_DOLLY_TRUCK)!==zU.TOUCH_DOLLY_TRUCK&&(this._state&zU.TOUCH_DOLLY_OFFSET)!==zU.TOUCH_DOLLY_OFFSET&&(this._state&zU.TOUCH_DOLLY_ROTATE)!==zU.TOUCH_DOLLY_ROTATE||(this._sphericalEnd.radius=this._spherical.radius,this._radiusVelocity.value=0),(this._state&zU.ZOOM)!==zU.ZOOM&&(this._state&zU.TOUCH_ZOOM)!==zU.TOUCH_ZOOM&&(this._state&zU.TOUCH_ZOOM_TRUCK)!==zU.TOUCH_ZOOM_TRUCK&&(this._state&zU.TOUCH_ZOOM_OFFSET)!==zU.TOUCH_ZOOM_OFFSET&&(this._state&zU.TOUCH_ZOOM_ROTATE)!==zU.TOUCH_ZOOM_ROTATE||(this._zoomEnd=this._zoom,this._zoomVelocity.value=0),(this._state&zU.OFFSET)!==zU.OFFSET&&(this._state&zU.TOUCH_OFFSET)!==zU.TOUCH_OFFSET&&(this._state&zU.TOUCH_DOLLY_OFFSET)!==zU.TOUCH_DOLLY_OFFSET&&(this._state&zU.TOUCH_ZOOM_OFFSET)!==zU.TOUCH_ZOOM_OFFSET||(this._focalOffsetEnd.copy(this._focalOffset),this._focalOffsetVelocity.set(0,0,0)),this.dispatchEvent({type:"controlstart"})},d=()=>{if(!this._enabled||!this._dragNeedsUpdate)return;this._dragNeedsUpdate=!1,nN(this._activePointers,dN);const e=this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement?this._lockedPointer||this._activePointers[0]:null,t=e?-e.deltaX:r.x-dN.x,o=e?-e.deltaY:r.y-dN.y;if(r.copy(dN),(this._state&zU.ROTATE)!==zU.ROTATE&&(this._state&zU.TOUCH_ROTATE)!==zU.TOUCH_ROTATE&&(this._state&zU.TOUCH_DOLLY_ROTATE)!==zU.TOUCH_DOLLY_ROTATE&&(this._state&zU.TOUCH_ZOOM_ROTATE)!==zU.TOUCH_ZOOM_ROTATE||(this._rotateInternal(t,o),this._isUserControllingRotate=!0),(this._state&zU.DOLLY)===zU.DOLLY||(this._state&zU.ZOOM)===zU.ZOOM){const e=this.dollyToCursor?(n.x-this._elementRect.x)/this._elementRect.width*2-1:0,t=this.dollyToCursor?(n.y-this._elementRect.y)/this._elementRect.height*-2+1:0,r=this.dollyDragInverted?-1:1;(this._state&zU.DOLLY)===zU.DOLLY?(this._dollyInternal(r*o*aN,e,t),this._isUserControllingDolly=!0):(this._zoomInternal(r*o*aN,e,t),this._isUserControllingZoom=!0)}if((this._state&zU.TOUCH_DOLLY)===zU.TOUCH_DOLLY||(this._state&zU.TOUCH_ZOOM)===zU.TOUCH_ZOOM||(this._state&zU.TOUCH_DOLLY_TRUCK)===zU.TOUCH_DOLLY_TRUCK||(this._state&zU.TOUCH_ZOOM_TRUCK)===zU.TOUCH_ZOOM_TRUCK||(this._state&zU.TOUCH_DOLLY_OFFSET)===zU.TOUCH_DOLLY_OFFSET||(this._state&zU.TOUCH_ZOOM_OFFSET)===zU.TOUCH_ZOOM_OFFSET||(this._state&zU.TOUCH_DOLLY_ROTATE)===zU.TOUCH_DOLLY_ROTATE||(this._state&zU.TOUCH_ZOOM_ROTATE)===zU.TOUCH_ZOOM_ROTATE){const e=dN.x-this._activePointers[1].clientX,t=dN.y-this._activePointers[1].clientY,n=Math.sqrt(e*e+t*t),o=i.y-n;i.set(0,n);const a=this.dollyToCursor?(r.x-this._elementRect.x)/this._elementRect.width*2-1:0,s=this.dollyToCursor?(r.y-this._elementRect.y)/this._elementRect.height*-2+1:0;(this._state&zU.TOUCH_DOLLY)===zU.TOUCH_DOLLY||(this._state&zU.TOUCH_DOLLY_ROTATE)===zU.TOUCH_DOLLY_ROTATE||(this._state&zU.TOUCH_DOLLY_TRUCK)===zU.TOUCH_DOLLY_TRUCK||(this._state&zU.TOUCH_DOLLY_OFFSET)===zU.TOUCH_DOLLY_OFFSET?(this._dollyInternal(o*aN,a,s),this._isUserControllingDolly=!0):(this._zoomInternal(o*aN,a,s),this._isUserControllingZoom=!0)}(this._state&zU.TRUCK)!==zU.TRUCK&&(this._state&zU.TOUCH_TRUCK)!==zU.TOUCH_TRUCK&&(this._state&zU.TOUCH_DOLLY_TRUCK)!==zU.TOUCH_DOLLY_TRUCK&&(this._state&zU.TOUCH_ZOOM_TRUCK)!==zU.TOUCH_ZOOM_TRUCK||(this._truckInternal(t,o,!1),this._isUserControllingTruck=!0),(this._state&zU.OFFSET)!==zU.OFFSET&&(this._state&zU.TOUCH_OFFSET)!==zU.TOUCH_OFFSET&&(this._state&zU.TOUCH_DOLLY_OFFSET)!==zU.TOUCH_DOLLY_OFFSET&&(this._state&zU.TOUCH_ZOOM_OFFSET)!==zU.TOUCH_ZOOM_OFFSET||(this._truckInternal(t,o,!0),this._isUserControllingOffset=!0),this.dispatchEvent({type:"control"})},f=()=>{nN(this._activePointers,dN),r.copy(dN),this._dragNeedsUpdate=!1,(0===this._activePointers.length||1===this._activePointers.length&&this._activePointers[0]===this._lockedPointer)&&(this._isDragging=!1),0===this._activePointers.length&&this._domElement&&(this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",s),this.dispatchEvent({type:"controlend"}))};this.lockPointer=()=>{this._enabled&&this._domElement&&(this.cancel(),this._lockedPointer={pointerId:-1,clientX:0,clientY:0,deltaX:0,deltaY:0,mouseButton:null},this._activePointers.push(this._lockedPointer),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",s),this._domElement.requestPointerLock(),this._domElement.ownerDocument.addEventListener("pointerlockchange",p),this._domElement.ownerDocument.addEventListener("pointerlockerror",m),this._domElement.ownerDocument.addEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.addEventListener("pointerup",s),h())},this.unlockPointer=()=>{var e,t,n;null!==this._lockedPointer&&(this._disposePointer(this._lockedPointer),this._lockedPointer=null),null===(e=this._domElement)||void 0===e||e.ownerDocument.exitPointerLock(),null===(t=this._domElement)||void 0===t||t.ownerDocument.removeEventListener("pointerlockchange",p),null===(n=this._domElement)||void 0===n||n.ownerDocument.removeEventListener("pointerlockerror",m),this.cancel()};const p=()=>{this._domElement&&this._domElement.ownerDocument.pointerLockElement===this._domElement||this.unlockPointer()},m=()=>{this.unlockPointer()};this._addAllEventListeners=e=>{this._domElement=e,this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none",this._domElement.addEventListener("pointerdown",o),this._domElement.addEventListener("pointercancel",s),this._domElement.addEventListener("wheel",c,{passive:!1}),this._domElement.addEventListener("contextmenu",u)},this._removeAllEventListeners=()=>{this._domElement&&(this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect="",this._domElement.removeEventListener("pointerdown",o),this._domElement.removeEventListener("pointercancel",s),this._domElement.removeEventListener("wheel",c,{passive:!1}),this._domElement.removeEventListener("contextmenu",u),this._domElement.ownerDocument.removeEventListener("pointermove",a,{passive:!1}),this._domElement.ownerDocument.removeEventListener("pointerup",s),this._domElement.ownerDocument.removeEventListener("pointerlockchange",p),this._domElement.ownerDocument.removeEventListener("pointerlockerror",m))},this.cancel=()=>{this._state!==zU.NONE&&(this._state=zU.NONE,this._activePointers.length=0,f())},t&&this.connect(t),this.update(0)}get camera(){return this._camera}set camera(e){this._camera=e,this.updateCameraUp(),this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._domElement&&(e?(this._domElement.style.touchAction="none",this._domElement.style.userSelect="none",this._domElement.style.webkitUserSelect="none"):(this.cancel(),this._domElement.style.touchAction="",this._domElement.style.userSelect="",this._domElement.style.webkitUserSelect=""))}get active(){return!this._hasRested}get currentAction(){return this._state}get distance(){return this._spherical.radius}set distance(e){this._spherical.radius===e&&this._sphericalEnd.radius===e||(this._spherical.radius=e,this._sphericalEnd.radius=e,this._needsUpdate=!0)}get azimuthAngle(){return this._spherical.theta}set azimuthAngle(e){this._spherical.theta===e&&this._sphericalEnd.theta===e||(this._spherical.theta=e,this._sphericalEnd.theta=e,this._needsUpdate=!0)}get polarAngle(){return this._spherical.phi}set polarAngle(e){this._spherical.phi===e&&this._sphericalEnd.phi===e||(this._spherical.phi=e,this._sphericalEnd.phi=e,this._needsUpdate=!0)}get boundaryEnclosesCamera(){return this._boundaryEnclosesCamera}set boundaryEnclosesCamera(e){this._boundaryEnclosesCamera=e,this._needsUpdate=!0}set interactiveArea(e){this._interactiveArea.width=XU(e.width,0,1),this._interactiveArea.height=XU(e.height,0,1),this._interactiveArea.x=XU(e.x,0,1-this._interactiveArea.width),this._interactiveArea.y=XU(e.y,0,1-this._interactiveArea.height)}addEventListener(e,t){super.addEventListener(e,t)}removeEventListener(e,t){super.removeEventListener(e,t)}rotate(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.rotateTo(this._sphericalEnd.theta+e,this._sphericalEnd.phi+t,n)}rotateAzimuthTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(e,this._sphericalEnd.phi,t)}rotatePolarTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.rotateTo(this._sphericalEnd.theta,e,t)}rotateTo(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._isUserControllingRotate=!1;const r=XU(e,this.minAzimuthAngle,this.maxAzimuthAngle),i=XU(t,this.minPolarAngle,this.maxPolarAngle);this._sphericalEnd.theta=r,this._sphericalEnd.phi=i,this._sphericalEnd.makeSafe(),this._needsUpdate=!0,n||(this._spherical.theta=this._sphericalEnd.theta,this._spherical.phi=this._sphericalEnd.phi);const o=!n||JU(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&JU(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold);return this._createOnRestPromise(o)}dolly(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.dollyTo(this._sphericalEnd.radius-e,t)}dollyTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._isUserControllingDolly=!1,this._lastDollyDirection=UU,this._changedDolly=0,this._dollyToNoClamp(XU(e,this.minDistance,this.maxDistance),t)}_dollyToNoClamp(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=this._sphericalEnd.radius;if(this.colliderMeshes.length>=1){const t=this._collisionTest(),r=JU(t,this._spherical.radius);if(!(n>e)&&r)return Promise.resolve();this._sphericalEnd.radius=Math.min(e,t)}else this._sphericalEnd.radius=e;this._needsUpdate=!0,t||(this._spherical.radius=this._sphericalEnd.radius);const r=!t||JU(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(r)}dollyInFixed(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._targetEnd.add(this._getCameraDirection(gN).multiplyScalar(e)),t||this._target.copy(this._targetEnd);const n=!t||JU(this._target.x,this._targetEnd.x,this.restThreshold)&&JU(this._target.y,this._targetEnd.y,this.restThreshold)&&JU(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(n)}zoom(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.zoomTo(this._zoomEnd+e,t)}zoomTo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._isUserControllingZoom=!1,this._zoomEnd=XU(e,this.minZoom,this.maxZoom),this._needsUpdate=!0,t||(this._zoom=this._zoomEnd);const n=!t||JU(this._zoom,this._zoomEnd,this.restThreshold);return this._changedZoom=0,this._createOnRestPromise(n)}pan(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return console.warn("`pan` has been renamed to `truck`"),this.truck(e,t,n)}truck(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._camera.updateMatrix(),vN.setFromMatrixColumn(this._camera.matrix,0),yN.setFromMatrixColumn(this._camera.matrix,1),vN.multiplyScalar(e),yN.multiplyScalar(-t);const r=fN.copy(vN).add(yN),i=pN.copy(this._targetEnd).add(r);return this.moveTo(i.x,i.y,i.z,n)}forward(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];fN.setFromMatrixColumn(this._camera.matrix,0),fN.crossVectors(this._camera.up,fN),fN.multiplyScalar(e);const n=pN.copy(this._targetEnd).add(fN);return this.moveTo(n.x,n.y,n.z,t)}elevate(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return fN.copy(this._camera.up).multiplyScalar(e),this.moveTo(this._targetEnd.x+fN.x,this._targetEnd.y+fN.y,this._targetEnd.z+fN.z,t)}moveTo(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._isUserControllingTruck=!1;const i=fN.set(e,t,n).sub(this._targetEnd);this._encloseToBoundary(this._targetEnd,i,this.boundaryFriction),this._needsUpdate=!0,r||this._target.copy(this._targetEnd);const o=!r||JU(this._target.x,this._targetEnd.x,this.restThreshold)&&JU(this._target.y,this._targetEnd.y,this.restThreshold)&&JU(this._target.z,this._targetEnd.z,this.restThreshold);return this._createOnRestPromise(o)}lookInDirectionOf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=fN.set(e,t,n).sub(this._targetEnd).normalize().multiplyScalar(-this._sphericalEnd.radius).add(this._targetEnd);return this.setPosition(i.x,i.y,i.z,r)}fitToBox(e,t){let{cover:n=!1,paddingLeft:r=0,paddingRight:i=0,paddingBottom:o=0,paddingTop:a=0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=[],l=e.isBox3?EN.copy(e):EN.setFromObject(e);l.isEmpty()&&(console.warn("camera-controls: fitTo() cannot be used with an empty box. Aborting"),Promise.resolve());const c=KU(this._sphericalEnd.theta,VU),u=KU(this._sphericalEnd.phi,VU);s.push(this.rotateTo(c,u,t));const h=fN.setFromSpherical(this._sphericalEnd).normalize(),d=MN.setFromUnitVectors(h,hN),f=JU(Math.abs(h.y),1);f&&d.multiply(TN.setFromAxisAngle(uN,c)),d.multiply(this._yAxisUpSpaceInverse);const p=SN.makeEmpty();pN.copy(l.min).applyQuaternion(d),p.expandByPoint(pN),pN.copy(l.min).setX(l.max.x).applyQuaternion(d),p.expandByPoint(pN),pN.copy(l.min).setY(l.max.y).applyQuaternion(d),p.expandByPoint(pN),pN.copy(l.max).setZ(l.min.z).applyQuaternion(d),p.expandByPoint(pN),pN.copy(l.min).setZ(l.max.z).applyQuaternion(d),p.expandByPoint(pN),pN.copy(l.max).setY(l.min.y).applyQuaternion(d),p.expandByPoint(pN),pN.copy(l.max).setX(l.min.x).applyQuaternion(d),p.expandByPoint(pN),pN.copy(l.max).applyQuaternion(d),p.expandByPoint(pN),p.min.x-=r,p.min.y-=o,p.max.x+=i,p.max.y+=a,d.setFromUnitVectors(hN,h),f&&d.premultiply(TN.invert()),d.premultiply(this._yAxisUpSpace);const m=p.getSize(fN),g=p.getCenter(pN).applyQuaternion(d);if(GU(this._camera)){const e=this.getDistanceToFitBox(m.x,m.y,m.z,n);s.push(this.moveTo(g.x,g.y,g.z,t)),s.push(this.dollyTo(e,t)),s.push(this.setFocalOffset(0,0,0,t))}else if(QU(this._camera)){const e=this._camera,r=e.right-e.left,i=e.top-e.bottom,o=n?Math.max(r/m.x,i/m.y):Math.min(r/m.x,i/m.y);s.push(this.moveTo(g.x,g.y,g.z,t)),s.push(this.zoomTo(o,t)),s.push(this.setFocalOffset(0,0,0,t))}return Promise.all(s)}fitToSphere(e,t){const n=[],r="isObject3D"in e?PN.createBoundingSphere(e,CN):CN.copy(e);if(n.push(this.moveTo(r.center.x,r.center.y,r.center.z,t)),GU(this._camera)){const e=this.getDistanceToFitSphere(r.radius);n.push(this.dollyTo(e,t))}else if(QU(this._camera)){const e=this._camera.right-this._camera.left,i=this._camera.top-this._camera.bottom,o=2*r.radius,a=Math.min(e/o,i/o);n.push(this.zoomTo(a,t))}return n.push(this.setFocalOffset(0,0,0,t)),Promise.all(n)}setLookAt(e,t,n,r,i,o){let a=arguments.length>6&&void 0!==arguments[6]&&arguments[6];this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=UU,this._changedDolly=0;const s=pN.set(r,i,o),l=fN.set(e,t,n);this._targetEnd.copy(s),this._sphericalEnd.setFromVector3(l.sub(s).applyQuaternion(this._yAxisUpSpace)),this.normalizeRotations(),this._needsUpdate=!0,a||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const c=!a||JU(this._target.x,this._targetEnd.x,this.restThreshold)&&JU(this._target.y,this._targetEnd.y,this.restThreshold)&&JU(this._target.z,this._targetEnd.z,this.restThreshold)&&JU(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&JU(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&JU(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(c)}lerpLookAt(e,t,n,r,i,o,a,s,l,c,u,h,d){let f=arguments.length>13&&void 0!==arguments[13]&&arguments[13];this._isUserControllingRotate=!1,this._isUserControllingDolly=!1,this._isUserControllingTruck=!1,this._lastDollyDirection=UU,this._changedDolly=0;const p=fN.set(r,i,o),m=pN.set(e,t,n);_N.setFromVector3(m.sub(p).applyQuaternion(this._yAxisUpSpace));const g=mN.set(c,u,h),v=pN.set(a,s,l);wN.setFromVector3(v.sub(g).applyQuaternion(this._yAxisUpSpace)),this._targetEnd.copy(p.lerp(g,d));const y=wN.theta-_N.theta,A=wN.phi-_N.phi,x=wN.radius-_N.radius;this._sphericalEnd.set(_N.radius+x*d,_N.phi+A*d,_N.theta+y*d),this.normalizeRotations(),this._needsUpdate=!0,f||(this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd));const b=!f||JU(this._target.x,this._targetEnd.x,this.restThreshold)&&JU(this._target.y,this._targetEnd.y,this.restThreshold)&&JU(this._target.z,this._targetEnd.z,this.restThreshold)&&JU(this._spherical.theta,this._sphericalEnd.theta,this.restThreshold)&&JU(this._spherical.phi,this._sphericalEnd.phi,this.restThreshold)&&JU(this._spherical.radius,this._sphericalEnd.radius,this.restThreshold);return this._createOnRestPromise(b)}setPosition(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this.setLookAt(e,t,n,this._targetEnd.x,this._targetEnd.y,this._targetEnd.z,r)}setTarget(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=this.getPosition(fN),o=this.setLookAt(i.x,i.y,i.z,e,t,n,r);return this._sphericalEnd.phi=XU(this._sphericalEnd.phi,this.minPolarAngle,this.maxPolarAngle),o}setFocalOffset(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._isUserControllingOffset=!1,this._focalOffsetEnd.set(e,t,n),this._needsUpdate=!0,r||this._focalOffset.copy(this._focalOffsetEnd);const i=!r||JU(this._focalOffset.x,this._focalOffsetEnd.x,this.restThreshold)&&JU(this._focalOffset.y,this._focalOffsetEnd.y,this.restThreshold)&&JU(this._focalOffset.z,this._focalOffsetEnd.z,this.restThreshold);return this._createOnRestPromise(i)}setOrbitPoint(e,t,n){this._camera.updateMatrixWorld(),vN.setFromMatrixColumn(this._camera.matrixWorldInverse,0),yN.setFromMatrixColumn(this._camera.matrixWorldInverse,1),AN.setFromMatrixColumn(this._camera.matrixWorldInverse,2);const r=fN.set(e,t,n),i=r.distanceTo(this._camera.position),o=r.sub(this._camera.position);vN.multiplyScalar(o.x),yN.multiplyScalar(o.y),AN.multiplyScalar(o.z),fN.copy(vN).add(yN).add(AN),fN.z=fN.z+i,this.dollyTo(i,!1),this.setFocalOffset(-fN.x,fN.y,-fN.z,!1),this.moveTo(e,t,n,!1)}setBoundary(e){if(!e)return this._boundary.min.set(-1/0,-1/0,-1/0),this._boundary.max.set(1/0,1/0,1/0),void(this._needsUpdate=!0);this._boundary.copy(e),this._boundary.clampPoint(this._targetEnd,this._targetEnd),this._needsUpdate=!0}setViewport(e,t,n,r){null!==e?(this._viewport=this._viewport||new lN.Vector4,"number"===typeof e?this._viewport.set(e,t,n,r):this._viewport.copy(e)):this._viewport=null}getDistanceToFitBox(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(rN(this._camera,"getDistanceToFitBox"))return this._spherical.radius;const i=e/t,o=this._camera.getEffectiveFOV()*qU,a=this._camera.aspect;return.5*((r?i>a:i<a)?t:e/a)/Math.tan(.5*o)+.5*n}getDistanceToFitSphere(e){if(rN(this._camera,"getDistanceToFitSphere"))return this._spherical.radius;const t=this._camera.getEffectiveFOV()*qU,n=2*Math.atan(Math.tan(.5*t)*this._camera.aspect),r=1<this._camera.aspect?t:n;return e/Math.sin(.5*r)}getTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(e&&e.isVector3?e:new lN.Vector3).copy(t?this._targetEnd:this._target)}getPosition(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(e&&e.isVector3?e:new lN.Vector3).setFromSpherical(t?this._sphericalEnd:this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(t?this._targetEnd:this._target)}getSpherical(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(e||new lN.Spherical).copy(t?this._sphericalEnd:this._spherical)}getFocalOffset(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return(e&&e.isVector3?e:new lN.Vector3).copy(t?this._focalOffsetEnd:this._focalOffset)}normalizeRotations(){this._sphericalEnd.theta=this._sphericalEnd.theta%HU,this._sphericalEnd.theta<0&&(this._sphericalEnd.theta+=HU),this._spherical.theta+=HU*Math.round((this._sphericalEnd.theta-this._spherical.theta)/HU)}stop(){this._focalOffset.copy(this._focalOffsetEnd),this._target.copy(this._targetEnd),this._spherical.copy(this._sphericalEnd),this._zoom=this._zoomEnd}reset(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!JU(this._camera.up.x,this._cameraUp0.x)||!JU(this._camera.up.y,this._cameraUp0.y)||!JU(this._camera.up.z,this._cameraUp0.z)){this._camera.up.copy(this._cameraUp0);const e=this.getPosition(fN);this.updateCameraUp(),this.setPosition(e.x,e.y,e.z)}const t=[this.setLookAt(this._position0.x,this._position0.y,this._position0.z,this._target0.x,this._target0.y,this._target0.z,e),this.setFocalOffset(this._focalOffset0.x,this._focalOffset0.y,this._focalOffset0.z,e),this.zoomTo(this._zoom0,e)];return Promise.all(t)}saveState(){this._cameraUp0.copy(this._camera.up),this.getTarget(this._target0),this.getPosition(this._position0),this._zoom0=this._zoom,this._focalOffset0.copy(this._focalOffset)}updateCameraUp(){this._yAxisUpSpace.setFromUnitVectors(this._camera.up,uN),this._yAxisUpSpaceInverse.copy(this._yAxisUpSpace).invert()}applyCameraUp(){const e=fN.subVectors(this._target,this._camera.position).normalize(),t=pN.crossVectors(e,this._camera.up);this._camera.up.crossVectors(t,e).normalize(),this._camera.updateMatrixWorld();const n=this.getPosition(fN);this.updateCameraUp(),this.setPosition(n.x,n.y,n.z)}update(e){const t=this._sphericalEnd.theta-this._spherical.theta,n=this._sphericalEnd.phi-this._spherical.phi,r=this._sphericalEnd.radius-this._spherical.radius,i=xN.subVectors(this._targetEnd,this._target),o=bN.subVectors(this._focalOffsetEnd,this._focalOffset),a=this._zoomEnd-this._zoom;if(YU(t))this._thetaVelocity.value=0,this._spherical.theta=this._sphericalEnd.theta;else{const t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.theta=eN(this._spherical.theta,this._sphericalEnd.theta,this._thetaVelocity,t,1/0,e),this._needsUpdate=!0}if(YU(n))this._phiVelocity.value=0,this._spherical.phi=this._sphericalEnd.phi;else{const t=this._isUserControllingRotate?this.draggingSmoothTime:this.smoothTime;this._spherical.phi=eN(this._spherical.phi,this._sphericalEnd.phi,this._phiVelocity,t,1/0,e),this._needsUpdate=!0}if(YU(r))this._radiusVelocity.value=0,this._spherical.radius=this._sphericalEnd.radius;else{const t=this._isUserControllingDolly?this.draggingSmoothTime:this.smoothTime;this._spherical.radius=eN(this._spherical.radius,this._sphericalEnd.radius,this._radiusVelocity,t,this.maxSpeed,e),this._needsUpdate=!0}if(YU(i.x)&&YU(i.y)&&YU(i.z))this._targetVelocity.set(0,0,0),this._target.copy(this._targetEnd);else{const t=this._isUserControllingTruck?this.draggingSmoothTime:this.smoothTime;tN(this._target,this._targetEnd,this._targetVelocity,t,this.maxSpeed,e,this._target),this._needsUpdate=!0}if(YU(o.x)&&YU(o.y)&&YU(o.z))this._focalOffsetVelocity.set(0,0,0),this._focalOffset.copy(this._focalOffsetEnd);else{const t=this._isUserControllingOffset?this.draggingSmoothTime:this.smoothTime;tN(this._focalOffset,this._focalOffsetEnd,this._focalOffsetVelocity,t,this.maxSpeed,e,this._focalOffset),this._needsUpdate=!0}if(YU(a))this._zoomVelocity.value=0,this._zoom=this._zoomEnd;else{const t=this._isUserControllingZoom?this.draggingSmoothTime:this.smoothTime;this._zoom=eN(this._zoom,this._zoomEnd,this._zoomVelocity,t,1/0,e)}if(this.dollyToCursor)if(GU(this._camera)&&0!==this._changedDolly){const e=this._spherical.radius-this._lastDistance,t=this._camera,n=this._getCameraDirection(gN),r=fN.copy(n).cross(t.up).normalize();0===r.lengthSq()&&(r.x=1);const i=pN.crossVectors(r,n),o=this._sphericalEnd.radius*Math.tan(t.getEffectiveFOV()*qU*.5),a=(this._sphericalEnd.radius-e-this._sphericalEnd.radius)/this._sphericalEnd.radius,s=mN.copy(this._targetEnd).add(r.multiplyScalar(this._dollyControlCoord.x*o*t.aspect)).add(i.multiplyScalar(this._dollyControlCoord.y*o)),l=fN.copy(this._targetEnd).lerp(s,a),c=this._lastDollyDirection===NU&&this._spherical.radius<=this.minDistance,u=this._lastDollyDirection===jU&&this.maxDistance<=this._spherical.radius;if(this.infinityDolly&&(c||u)){this._sphericalEnd.radius-=e,this._spherical.radius-=e;const t=pN.copy(n).multiplyScalar(-e);l.add(t)}this._boundary.clampPoint(l,l);const h=pN.subVectors(l,this._targetEnd);this._targetEnd.copy(l),this._target.add(h),this._changedDolly-=e,YU(this._changedDolly)&&(this._changedDolly=0)}else if(QU(this._camera)&&0!==this._changedZoom){const e=this._zoom-this._lastZoom,t=this._camera,n=fN.set(this._dollyControlCoord.x,this._dollyControlCoord.y,(t.near+t.far)/(t.near-t.far)).unproject(t),r=pN.set(0,0,-1).applyQuaternion(t.quaternion),i=mN.copy(n).add(r.multiplyScalar(-n.dot(t.up))),o=-(this._zoom-e-this._zoom)/this._zoom,a=this._getCameraDirection(gN),s=this._targetEnd.dot(a),l=fN.copy(this._targetEnd).lerp(i,o),c=l.dot(a),u=a.multiplyScalar(c-s);l.sub(u),this._boundary.clampPoint(l,l);const h=pN.subVectors(l,this._targetEnd);this._targetEnd.copy(l),this._target.add(h),this._changedZoom-=e,YU(this._changedZoom)&&(this._changedZoom=0)}this._camera.zoom!==this._zoom&&(this._camera.zoom=this._zoom,this._camera.updateProjectionMatrix(),this._updateNearPlaneCorners(),this._needsUpdate=!0),this._dragNeedsUpdate=!0;const s=this._collisionTest();this._spherical.radius=Math.min(this._spherical.radius,s),this._spherical.makeSafe(),this._camera.position.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse).add(this._target),this._camera.lookAt(this._target);(!YU(this._focalOffset.x)||!YU(this._focalOffset.y)||!YU(this._focalOffset.z))&&(this._camera.updateMatrixWorld(),vN.setFromMatrixColumn(this._camera.matrix,0),yN.setFromMatrixColumn(this._camera.matrix,1),AN.setFromMatrixColumn(this._camera.matrix,2),vN.multiplyScalar(this._focalOffset.x),yN.multiplyScalar(-this._focalOffset.y),AN.multiplyScalar(this._focalOffset.z),fN.copy(vN).add(yN).add(AN),this._camera.position.add(fN)),this._boundaryEnclosesCamera&&this._encloseToBoundary(this._camera.position.copy(this._target),fN.setFromSpherical(this._spherical).applyQuaternion(this._yAxisUpSpaceInverse),1);const l=this._needsUpdate;return l&&!this._updatedLastTime?(this._hasRested=!1,this.dispatchEvent({type:"wake"}),this.dispatchEvent({type:"update"})):l?(this.dispatchEvent({type:"update"}),YU(t,this.restThreshold)&&YU(n,this.restThreshold)&&YU(r,this.restThreshold)&&YU(i.x,this.restThreshold)&&YU(i.y,this.restThreshold)&&YU(i.z,this.restThreshold)&&YU(o.x,this.restThreshold)&&YU(o.y,this.restThreshold)&&YU(o.z,this.restThreshold)&&YU(a,this.restThreshold)&&!this._hasRested&&(this._hasRested=!0,this.dispatchEvent({type:"rest"}))):!l&&this._updatedLastTime&&this.dispatchEvent({type:"sleep"}),this._lastDistance=this._spherical.radius,this._lastZoom=this._zoom,this._updatedLastTime=l,this._needsUpdate=!1,l}toJSON(){return JSON.stringify({enabled:this._enabled,minDistance:this.minDistance,maxDistance:ZU(this.maxDistance),minZoom:this.minZoom,maxZoom:ZU(this.maxZoom),minPolarAngle:this.minPolarAngle,maxPolarAngle:ZU(this.maxPolarAngle),minAzimuthAngle:ZU(this.minAzimuthAngle),maxAzimuthAngle:ZU(this.maxAzimuthAngle),smoothTime:this.smoothTime,draggingSmoothTime:this.draggingSmoothTime,dollySpeed:this.dollySpeed,truckSpeed:this.truckSpeed,dollyToCursor:this.dollyToCursor,verticalDragToForward:this.verticalDragToForward,target:this._targetEnd.toArray(),position:fN.setFromSpherical(this._sphericalEnd).add(this._targetEnd).toArray(),zoom:this._zoomEnd,focalOffset:this._focalOffsetEnd.toArray(),target0:this._target0.toArray(),position0:this._position0.toArray(),zoom0:this._zoom0,focalOffset0:this._focalOffset0.toArray()})}fromJSON(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=JSON.parse(e);this.enabled=n.enabled,this.minDistance=n.minDistance,this.maxDistance=$U(n.maxDistance),this.minZoom=n.minZoom,this.maxZoom=$U(n.maxZoom),this.minPolarAngle=n.minPolarAngle,this.maxPolarAngle=$U(n.maxPolarAngle),this.minAzimuthAngle=$U(n.minAzimuthAngle),this.maxAzimuthAngle=$U(n.maxAzimuthAngle),this.smoothTime=n.smoothTime,this.draggingSmoothTime=n.draggingSmoothTime,this.dollySpeed=n.dollySpeed,this.truckSpeed=n.truckSpeed,this.dollyToCursor=n.dollyToCursor,this.verticalDragToForward=n.verticalDragToForward,this._target0.fromArray(n.target0),this._position0.fromArray(n.position0),this._zoom0=n.zoom0,this._focalOffset0.fromArray(n.focalOffset0),this.moveTo(n.target[0],n.target[1],n.target[2],t),_N.setFromVector3(fN.fromArray(n.position).sub(this._targetEnd).applyQuaternion(this._yAxisUpSpace)),this.rotateTo(_N.theta,_N.phi,t),this.dollyTo(_N.radius,t),this.zoomTo(n.zoom,t),this.setFocalOffset(n.focalOffset[0],n.focalOffset[1],n.focalOffset[2],t),this._needsUpdate=!0}connect(e){this._domElement?console.warn("camera-controls is already connected."):(e.setAttribute("data-camera-controls-version","2.9.0"),this._addAllEventListeners(e),this._getClientRect(this._elementRect))}disconnect(){this.cancel(),this._removeAllEventListeners(),this._domElement&&(this._domElement.removeAttribute("data-camera-controls-version"),this._domElement=void 0)}dispose(){this.removeAllEventListeners(),this.disconnect()}_getTargetDirection(e){return e.setFromSpherical(this._spherical).divideScalar(this._spherical.radius).applyQuaternion(this._yAxisUpSpaceInverse)}_getCameraDirection(e){return this._getTargetDirection(e).negate()}_findPointerById(e){return this._activePointers.find((t=>t.pointerId===e))}_findPointerByMouseButton(e){return this._activePointers.find((t=>t.mouseButton===e))}_disposePointer(e){this._activePointers.splice(this._activePointers.indexOf(e),1)}_encloseToBoundary(e,t,n){const r=t.lengthSq();if(0===r)return e;const i=pN.copy(t).add(e),o=this._boundary.clampPoint(i,mN).sub(i),a=o.lengthSq();if(0===a)return e.add(t);if(a===r)return e;if(0===n)return e.add(t).add(o);{const r=1+n*a/t.dot(o);return e.add(pN.copy(t).multiplyScalar(r)).add(o.multiplyScalar(1-n))}}_updateNearPlaneCorners(){if(GU(this._camera)){const e=this._camera,t=e.near,n=e.getEffectiveFOV()*qU,r=Math.tan(.5*n)*t,i=r*e.aspect;this._nearPlaneCorners[0].set(-i,-r,0),this._nearPlaneCorners[1].set(i,-r,0),this._nearPlaneCorners[2].set(i,r,0),this._nearPlaneCorners[3].set(-i,r,0)}else if(QU(this._camera)){const e=this._camera,t=1/e.zoom,n=e.left*t,r=e.right*t,i=e.top*t,o=e.bottom*t;this._nearPlaneCorners[0].set(n,i,0),this._nearPlaneCorners[1].set(r,i,0),this._nearPlaneCorners[2].set(r,o,0),this._nearPlaneCorners[3].set(n,o,0)}}_collisionTest(){let e=1/0;if(!(this.colliderMeshes.length>=1))return e;if(rN(this._camera,"_collisionTest"))return e;const t=this._getTargetDirection(gN);IN.lookAt(cN,t,this._camera.up);for(let n=0;n<4;n++){const r=pN.copy(this._nearPlaneCorners[n]);r.applyMatrix4(IN);const i=mN.addVectors(this._target,r);BN.set(i,t),BN.far=this._spherical.radius+1;const o=BN.intersectObjects(this.colliderMeshes);0!==o.length&&o[0].distance<e&&(e=o[0].distance)}return e}_getClientRect(e){if(!this._domElement)return;const t=this._domElement.getBoundingClientRect();return e.x=t.left,e.y=t.top,this._viewport?(e.x+=this._viewport.x,e.y+=t.height-this._viewport.w-this._viewport.y,e.width=this._viewport.z,e.height=this._viewport.w):(e.width=t.width,e.height=t.height),e}_createOnRestPromise(e){return e?Promise.resolve():(this._hasRested=!1,this.dispatchEvent({type:"transitionstart"}),new Promise((e=>{const t=()=>{this.removeEventListener("rest",t),e()};this.addEventListener("rest",t)})))}_addAllEventListeners(e){}_removeAllEventListeners(){}get dampingFactor(){return console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead."),0}set dampingFactor(e){console.warn(".dampingFactor has been deprecated. use smoothTime (in seconds) instead.")}get draggingDampingFactor(){return console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead."),0}set draggingDampingFactor(e){console.warn(".draggingDampingFactor has been deprecated. use draggingSmoothTime (in seconds) instead.")}static createBoundingSphere(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new lN.Sphere,n=t.center;EN.makeEmpty(),e.traverseVisible((e=>{e.isMesh&&EN.expandByObject(e)})),EN.getCenter(n);let r=0;return e.traverseVisible((e=>{if(!e.isMesh)return;const t=e,i=t.geometry.clone();i.applyMatrix4(t.matrixWorld);const o=i.attributes.position;for(let a=0,s=o.count;a<s;a++)fN.fromBufferAttribute(o,a),r=Math.max(r,n.distanceToSquared(fN))})),t.radius=Math.sqrt(r),t}}const RN=(0,l.forwardRef)(((e,t)=>{(0,l.useMemo)((()=>{const e={Box3:xo,MathUtils:{clamp:Fi.clamp},Matrix4:qo,Quaternion:go,Raycaster:ig,Sphere:zo,Spherical:sg,Vector2:zi,Vector3:vo,Vector4:lo};PN.install({THREE:e}),hv({CameraControlsImpl:PN})}),[]);const{camera:n,domElement:r,makeDefault:i,onStart:o,onEnd:a,onChange:s,regress:c,...u}=e,h=cy((e=>e.camera)),d=cy((e=>e.gl)),f=cy((e=>e.invalidate)),p=cy((e=>e.events)),m=cy((e=>e.setEvents)),g=cy((e=>e.set)),v=cy((e=>e.get)),y=cy((e=>e.performance)),A=n||h,x=r||p.connected||d.domElement,b=(0,l.useMemo)((()=>new PN(A)),[A]);return uy(((e,t)=>{b.enabled&&b.update(t)}),-1),(0,l.useEffect)((()=>(b.connect(x),()=>{b.disconnect()})),[x,b]),(0,l.useEffect)((()=>{const e=e=>{f(),c&&y.regress(),s&&s(e)},t=e=>{o&&o(e)},n=e=>{a&&a(e)};return b.addEventListener("update",e),b.addEventListener("controlstart",t),b.addEventListener("controlend",n),b.addEventListener("control",e),b.addEventListener("transitionstart",e),b.addEventListener("wake",e),()=>{b.removeEventListener("update",e),b.removeEventListener("controlstart",t),b.removeEventListener("controlend",n),b.removeEventListener("control",e),b.removeEventListener("transitionstart",e),b.removeEventListener("wake",e)}}),[b,o,a,f,m,c,s]),(0,l.useEffect)((()=>{if(i){const e=v().controls;return g({controls:b}),()=>g({controls:e})}}),[i,b]),l.createElement("primitive",tC({ref:t,object:b},u))})),DN=l.createContext(null);function ON(){return l.useContext(DN)}function kN(e){let{points:t=50}=e;const{path:n}=ON(),[r,i]=l.useState([]),[o]=l.useState((()=>new Na({color:"black"}))),[a]=l.useState((()=>new Xf(.025,16,16))),s=l.useRef([]);return l.useEffect((()=>{n.curves!==s.current&&(i(n.getPoints(t)),s.current=n.curves)})),l.createElement(l.Fragment,null,r.map(((e,t)=>l.createElement("mesh",{key:t,material:o,geometry:a,position:[e.x,e.y,e.z]}))))}const LN=l.forwardRef(((e,t)=>{let{children:n,curves:r=[],object:i,debug:o=!1,smooth:a=!1,focus:s,offset:c,eps:u=1e-5,damping:h=.1,focusDamping:d=.1,maxSpeed:f=1/0,...p}=e;const{camera:m}=cy(),g=l.useRef(),[v]=l.useState((()=>new Zd)),y=l.useRef(null!==c&&void 0!==c?c:0),A=l.useMemo((()=>({focus:s,object:(null==i?void 0:i.current)instanceof xa?i:{current:m},path:v,current:y.current,offset:y.current,point:new vo,tangent:new vo,next:new vo})),[s,i]);l.useLayoutEffect((()=>{var e;v.curves=[];const t=r.length>0?r:null==(e=g.current)?void 0:e.__r3f.objects;for(var n=0;n<t.length;n++)v.add(t[n]);if(a){const e=v.getPoints("number"===typeof a?a:1),t=new Nd(e);v.curves=[t]}v.updateArcLengths()})),l.useImperativeHandle(t,(()=>g.current),[]),l.useLayoutEffect((()=>{y.current=dT.repeat(y.current,1)}),[c]);let x=0;const[b]=l.useState((()=>new vo));return uy(((e,t)=>{if(x=A.offset,_I.damp(y,"current",void 0!==c?c:A.current,h,t,f,void 0,u),A.offset=dT.repeat(y.current,1),v.getCurveLengths().length>0){v.getPointAt(A.offset,A.point),v.getTangentAt(A.offset,A.tangent).normalize(),v.getPointAt(dT.repeat(y.current-(x-A.offset),1),A.next);const e=(null==i?void 0:i.current)instanceof xa?i.current:m;e.position.copy(A.point),s&&_I.dampLookAt(e,(e=>(null==e?void 0:e.current)instanceof xa)(s)?s.current.getWorldPosition(b):s,d,t,f,void 0,u)}})),l.createElement("group",tC({ref:g},p),l.createElement(DN.Provider,{value:A},n,o&&l.createElement(kN,null)))}));function FN(e){let{defaultScene:t,defaultCamera:n,renderPriority:r=1}=e;const{gl:i,scene:o,camera:a}=cy();let s;return uy((()=>{s=i.autoClear,1===r&&(i.autoClear=!0,i.render(t,n)),i.autoClear=!1,i.clearDepth(),i.render(o,a),i.autoClear=s}),r),l.createElement("group",{onPointerOver:()=>null})}function zN(e){let{children:t,renderPriority:n=1}=e;const{scene:r,camera:i}=cy(),[o]=l.useState((()=>new qu));return l.createElement(l.Fragment,null,Cy(l.createElement(l.Fragment,null,t,l.createElement(FN,{defaultScene:r,defaultCamera:i,renderPriority:n})),o,{events:{priority:n+1}}))}const UN=l.createContext({}),NN=()=>l.useContext(UN),jN=2*Math.PI,GN=new xa,QN=new qo,[HN,VN]=[new go,new go],WN=new vo,qN=new vo,XN=e=>"getTarget"in e,YN=e=>{let{alignment:t="bottom-right",margin:n=[80,80],renderPriority:r=1,onUpdate:i,onTarget:o,children:a}=e;const s=cy((e=>e.size)),c=cy((e=>e.camera)),u=cy((e=>e.controls)),h=cy((e=>e.invalidate)),d=l.useRef(null),f=l.useRef(null),p=l.useRef(!1),m=l.useRef(0),g=l.useRef(new vo(0,0,0)),v=l.useRef(new vo(0,0,0));l.useEffect((()=>{v.current.copy(c.up)}),[c]);const y=l.useCallback((e=>{p.current=!0,(u||o)&&(g.current=(null==o?void 0:o())||(XN(u)?u.getTarget(g.current):null==u?void 0:u.target)),m.current=c.position.distanceTo(WN),HN.copy(c.quaternion),qN.copy(e).multiplyScalar(m.current).add(WN),GN.lookAt(qN),VN.copy(GN.quaternion),h()}),[u,c,o,h]);uy(((e,t)=>{if(f.current&&d.current){var n;if(p.current)if(HN.angleTo(VN)<.01)p.current=!1,"minPolarAngle"in u&&c.up.copy(v.current);else{const e=t*jN;HN.rotateTowards(VN,e),c.position.set(0,0,1).applyQuaternion(HN).multiplyScalar(m.current).add(g.current),c.up.set(0,1,0).applyQuaternion(HN).normalize(),c.quaternion.copy(HN),XN(u)&&u.setPosition(c.position.x,c.position.y,c.position.z),i?i():u&&u.update(t),h()}QN.copy(c.matrix).invert(),null==(n=d.current)||n.quaternion.setFromRotationMatrix(QN)}}));const A=l.useMemo((()=>({tweenCamera:y})),[y]),[x,b]=n,_=t.endsWith("-center")?0:t.endsWith("-left")?-s.width/2+x:s.width/2-x,w=t.startsWith("center-")?0:t.startsWith("top-")?s.height/2-b:-s.height/2+b;return l.createElement(zN,{renderPriority:r},l.createElement(UN.Provider,{value:A},l.createElement(Bz,{makeDefault:!0,ref:f,position:[0,0,200]}),l.createElement("group",{ref:d,position:[_,w,0]},a)))},JN={bg:"#f0f0f0",hover:"#999",text:"black",stroke:"black"},KN=["Right","Left","Top","Bottom","Front","Back"],ZN=e=>new vo(...e).multiplyScalar(.38),$N=[[1,1,1],[1,1,-1],[1,-1,1],[1,-1,-1],[-1,1,1],[-1,1,-1],[-1,-1,1],[-1,-1,-1]].map(ZN),ej=[.25,.25,.25],tj=[[1,1,0],[1,0,1],[1,0,-1],[1,-1,0],[0,1,1],[0,1,-1],[0,-1,1],[0,-1,-1],[-1,1,0],[-1,0,1],[-1,0,-1],[-1,-1,0]].map(ZN),nj=tj.map((e=>e.toArray().map((e=>0==e?.5:.25)))),rj=e=>{let{hover:t,index:n,font:r="20px Inter var, Arial, sans-serif",faces:i=KN,color:o=JN.bg,hoverColor:a=JN.hover,textColor:s=JN.text,strokeColor:c=JN.stroke,opacity:u=1}=e;const h=cy((e=>e.gl)),d=l.useMemo((()=>{const e=document.createElement("canvas");e.width=128,e.height=128;const t=e.getContext("2d");return t.fillStyle=o,t.fillRect(0,0,e.width,e.height),t.strokeStyle=c,t.strokeRect(0,0,e.width,e.height),t.font=r,t.textAlign="center",t.fillStyle=s,t.fillText(i[n].toUpperCase(),64,76),new Pd(e)}),[n,i,r,o,s,c]);return l.createElement("meshBasicMaterial",{map:d,"map-anisotropy":h.capabilities.getMaxAnisotropy()||1,attach:`material-${n}`,color:t?a:"white",transparent:!0,opacity:u})},ij=e=>{const{tweenCamera:t}=NN(),[n,r]=l.useState(null);return l.createElement("mesh",{onPointerOut:e=>{e.stopPropagation(),r(null)},onPointerMove:e=>{e.stopPropagation(),r(Math.floor(e.faceIndex/2))},onClick:e.onClick||(e=>{e.stopPropagation(),t(e.face.normal)})},[...Array(6)].map(((t,r)=>l.createElement(rj,tC({key:r,index:r,hover:n===r},e)))),l.createElement("boxGeometry",null))},oj=e=>{let{onClick:t,dimensions:n,position:r,hoverColor:i=JN.hover}=e;const{tweenCamera:o}=NN(),[a,s]=l.useState(!1);return l.createElement("mesh",{scale:1.01,position:r,onPointerOver:e=>{e.stopPropagation(),s(!0)},onPointerOut:e=>{e.stopPropagation(),s(!1)},onClick:t||(e=>{e.stopPropagation(),o(r)})},l.createElement("meshBasicMaterial",{color:a?i:"white",transparent:!0,opacity:.6,visible:a}),l.createElement("boxGeometry",{args:n}))},aj=e=>l.createElement("group",{scale:[60,60,60]},l.createElement(ij,e),tj.map(((t,n)=>l.createElement(oj,tC({key:n,position:t,dimensions:nj[n]},e)))),$N.map(((t,n)=>l.createElement(oj,tC({key:n,position:t,dimensions:ej},e)))));function sj(e){let{scale:t=[.8,.05,.05],color:n,rotation:r}=e;return l.createElement("group",{rotation:r},l.createElement("mesh",{position:[.4,0,0]},l.createElement("boxGeometry",{args:t}),l.createElement("meshBasicMaterial",{color:n,toneMapped:!1})))}function lj(e){let{onClick:t,font:n,disabled:r,arcStyle:i,label:o,labelColor:a,axisHeadScale:s=1,...c}=e;const u=cy((e=>e.gl)),h=l.useMemo((()=>{const e=document.createElement("canvas");e.width=64,e.height=64;const t=e.getContext("2d");return t.beginPath(),t.arc(32,32,16,0,2*Math.PI),t.closePath(),t.fillStyle=i,t.fill(),o&&(t.font=n,t.textAlign="center",t.fillStyle=a,t.fillText(o,32,41)),new Pd(e)}),[i,o,a,n]),[d,f]=l.useState(!1),p=(o?1:.75)*(d?1.2:1)*s;return l.createElement("sprite",tC({scale:p,onPointerOver:r?void 0:e=>{e.stopPropagation(),f(!0)},onPointerOut:r?void 0:t||(e=>{e.stopPropagation(),f(!1)})},c),l.createElement("spriteMaterial",{map:h,"map-anisotropy":u.capabilities.getMaxAnisotropy()||1,alphaTest:.3,opacity:o?1:.75,toneMapped:!1}))}const cj=e=>{let{hideNegativeAxes:t,hideAxisHeads:n,disabled:r,font:i="18px Inter var, Arial, sans-serif",axisColors:o=["#ff2060","#20df80","#2080ff"],axisHeadScale:a=1,axisScale:s,labels:c=["X","Y","Z"],labelColor:u="#000",onClick:h,...d}=e;const[f,p,m]=o,{tweenCamera:g}=NN(),v={font:i,disabled:r,labelColor:u,onClick:h,axisHeadScale:a,onPointerDown:r?void 0:e=>{g(e.object.position),e.stopPropagation()}};return l.createElement("group",tC({scale:40},d),l.createElement(sj,{color:f,rotation:[0,0,0],scale:s}),l.createElement(sj,{color:p,rotation:[0,0,Math.PI/2],scale:s}),l.createElement(sj,{color:m,rotation:[0,-Math.PI/2,0],scale:s}),!n&&l.createElement(l.Fragment,null,l.createElement(lj,tC({arcStyle:f,position:[1,0,0],label:c[0]},v)),l.createElement(lj,tC({arcStyle:p,position:[0,1,0],label:c[1]},v)),l.createElement(lj,tC({arcStyle:m,position:[0,0,1],label:c[2]},v)),!t&&l.createElement(l.Fragment,null,l.createElement(lj,tC({arcStyle:f,position:[-1,0,0]},v)),l.createElement(lj,tC({arcStyle:p,position:[0,-1,0]},v)),l.createElement(lj,tC({arcStyle:m,position:[0,0,-1]},v)))))},uj=vL({cellSize:.5,sectionSize:1,fadeDistance:100,fadeStrength:1,fadeFrom:1,cellThickness:.5,sectionThickness:1,cellColor:new La,sectionColor:new La,infiniteGrid:!1,followCamera:!1,worldCamProjPosition:new vo,worldPlanePosition:new vo},"\n    varying vec3 localPosition;\n    varying vec4 worldPosition;\n\n    uniform vec3 worldCamProjPosition;\n    uniform vec3 worldPlanePosition;\n    uniform float fadeDistance;\n    uniform bool infiniteGrid;\n    uniform bool followCamera;\n\n    void main() {\n      localPosition = position.xzy;\n      if (infiniteGrid) localPosition *= 1.0 + fadeDistance;\n      \n      worldPosition = modelMatrix * vec4(localPosition, 1.0);\n      if (followCamera) {\n        worldPosition.xyz += (worldCamProjPosition - worldPlanePosition);\n        localPosition = (inverse(modelMatrix) * worldPosition).xyz;\n      }\n\n      gl_Position = projectionMatrix * viewMatrix * worldPosition;\n    }\n  ",`\n    varying vec3 localPosition;\n    varying vec4 worldPosition;\n\n    uniform vec3 worldCamProjPosition;\n    uniform float cellSize;\n    uniform float sectionSize;\n    uniform vec3 cellColor;\n    uniform vec3 sectionColor;\n    uniform float fadeDistance;\n    uniform float fadeStrength;\n    uniform float fadeFrom;\n    uniform float cellThickness;\n    uniform float sectionThickness;\n\n    float getGrid(float size, float thickness) {\n      vec2 r = localPosition.xz / size;\n      vec2 grid = abs(fract(r - 0.5) - 0.5) / fwidth(r);\n      float line = min(grid.x, grid.y) + 1.0 - thickness;\n      return 1.0 - min(line, 1.0);\n    }\n\n    void main() {\n      float g1 = getGrid(cellSize, cellThickness);\n      float g2 = getGrid(sectionSize, sectionThickness);\n\n      vec3 from = worldCamProjPosition*vec3(fadeFrom);\n      float dist = distance(from, worldPosition.xyz);\n      float d = 1.0 - min(dist / fadeDistance, 1.0);\n      vec3 color = mix(cellColor, sectionColor, min(1.0, sectionThickness * g2));\n\n      gl_FragColor = vec4(color, (g1 + g2) * pow(d, fadeStrength));\n      gl_FragColor.a = mix(0.75 * gl_FragColor.a, gl_FragColor.a, g2);\n      if (gl_FragColor.a <= 0.0) discard;\n\n      #include <tonemapping_fragment>\n      #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n    }\n  `),hj=l.forwardRef(((e,t)=>{let{args:n,cellColor:r="#000000",sectionColor:i="#2080ff",cellSize:o=.5,sectionSize:a=1,followCamera:s=!1,infiniteGrid:c=!1,fadeDistance:u=100,fadeStrength:h=1,fadeFrom:d=1,cellThickness:f=.5,sectionThickness:p=1,side:m=Je,...g}=e;hv({GridMaterial:uj});const v=l.useRef(null);l.useImperativeHandle(t,(()=>v.current),[]);const y=new Ys,A=new vo(0,1,0),x=new vo(0,0,0);uy((e=>{y.setFromNormalAndCoplanarPoint(A,x).applyMatrix4(v.current.matrixWorld);const t=v.current.material,n=t.uniforms.worldCamProjPosition,r=t.uniforms.worldPlanePosition;y.projectPoint(e.camera.position,n.value),r.value.set(0,0,0).applyMatrix4(v.current.matrixWorld)}));const b={cellSize:o,sectionSize:a,cellColor:r,sectionColor:i,cellThickness:f,sectionThickness:p},_={fadeDistance:u,fadeStrength:h,fadeFrom:d,infiniteGrid:c,followCamera:s};return l.createElement("mesh",tC({ref:v,frustumCulled:!1},g),l.createElement("gridMaterial",tC({transparent:!0,"extensions-derivatives":!0,side:m},b,_)),l.createElement("planeGeometry",{args:n}))}));function dj(e,t){let{path:n}=t;const[r]=py(Gp,[e],(e=>e.setPath(n)));return r}function fj(e){let{children:t,files:n,...r}=e;const i=dj(n,{...r});return l.createElement(l.Fragment,null,null==t?void 0:t(i))}dj.preload=(e,t)=>{let{path:n}=t;return py.preload(Gp,[e],(e=>e.setPath(n)))};var pj=Uint8Array,mj=Uint16Array,gj=Uint32Array,vj=new pj([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),yj=new pj([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Aj=new pj([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),xj=function(e,t){for(var n=new mj(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new gj(n[30]);for(r=1;r<30;++r)for(var o=n[r];o<n[r+1];++o)i[o]=o-n[r]<<5|r;return[n,i]},bj=xj(vj,2),_j=bj[0],wj=bj[1];_j[28]=258,wj[258]=28;for(var Ej=xj(yj,0),Sj=Ej[0],Cj=(Ej[1],new mj(32768)),Mj=0;Mj<32768;++Mj){var Tj=(43690&Mj)>>>1|(21845&Mj)<<1;Tj=(61680&(Tj=(52428&Tj)>>>2|(13107&Tj)<<2))>>>4|(3855&Tj)<<4,Cj[Mj]=((65280&Tj)>>>8|(255&Tj)<<8)>>>1}var Ij=function(e,t,n){for(var r=e.length,i=0,o=new mj(t);i<r;++i)++o[e[i]-1];var a,s=new mj(t);for(i=0;i<t;++i)s[i]=s[i-1]+o[i-1]<<1;if(n){a=new mj(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var c=i<<4|e[i],u=t-e[i],h=s[e[i]-1]++<<u,d=h|(1<<u)-1;h<=d;++h)a[Cj[h]>>>l]=c}else for(a=new mj(r),i=0;i<r;++i)e[i]&&(a[i]=Cj[s[e[i]-1]++]>>>15-e[i]);return a},Bj=new pj(288);for(Mj=0;Mj<144;++Mj)Bj[Mj]=8;for(Mj=144;Mj<256;++Mj)Bj[Mj]=9;for(Mj=256;Mj<280;++Mj)Bj[Mj]=7;for(Mj=280;Mj<288;++Mj)Bj[Mj]=8;var Pj=new pj(32);for(Mj=0;Mj<32;++Mj)Pj[Mj]=5;var Rj=Ij(Bj,9,1),Dj=Ij(Pj,5,1),Oj=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},kj=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},Lj=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},Fj=function(e){return(e/8|0)+(7&e&&1)},zj=function(e,t,n){(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length);var r=new(e instanceof mj?mj:e instanceof gj?gj:pj)(n-t);return r.set(e.subarray(t,n)),r},Uj=function(e,t,n){var r=e.length;if(!r||n&&!n.l&&r<5)return t||new pj(0);var i=!t||n,o=!n||n.i;n||(n={}),t||(t=new pj(3*r));var a=function(e){var n=t.length;if(e>n){var r=new pj(Math.max(2*n,e));r.set(t),t=r}},s=n.f||0,l=n.p||0,c=n.b||0,u=n.l,h=n.d,d=n.m,f=n.n,p=8*r;do{if(!u){n.f=s=kj(e,l,1);var m=kj(e,l+1,3);if(l+=3,!m){var g=e[(M=Fj(l)+4)-4]|e[M-3]<<8,v=M+g;if(v>r){if(o)throw"unexpected EOF";break}i&&a(c+g),t.set(e.subarray(M,v),c),n.b=c+=g,n.p=l=8*v;continue}if(1==m)u=Rj,h=Dj,d=9,f=5;else{if(2!=m)throw"invalid block type";var y=kj(e,l,31)+257,A=kj(e,l+10,15)+4,x=y+kj(e,l+5,31)+1;l+=14;for(var b=new pj(x),_=new pj(19),w=0;w<A;++w)_[Aj[w]]=kj(e,l+3*w,7);l+=3*A;var E=Oj(_),S=(1<<E)-1,C=Ij(_,E,1);for(w=0;w<x;){var M,T=C[kj(e,l,S)];if(l+=15&T,(M=T>>>4)<16)b[w++]=M;else{var I=0,B=0;for(16==M?(B=3+kj(e,l,3),l+=2,I=b[w-1]):17==M?(B=3+kj(e,l,7),l+=3):18==M&&(B=11+kj(e,l,127),l+=7);B--;)b[w++]=I}}var P=b.subarray(0,y),R=b.subarray(y);d=Oj(P),f=Oj(R),u=Ij(P,d,1),h=Ij(R,f,1)}if(l>p){if(o)throw"unexpected EOF";break}}i&&a(c+131072);for(var D=(1<<d)-1,O=(1<<f)-1,k=l;;k=l){var L=(I=u[Lj(e,l)&D])>>>4;if((l+=15&I)>p){if(o)throw"unexpected EOF";break}if(!I)throw"invalid length/literal";if(L<256)t[c++]=L;else{if(256==L){k=l,u=null;break}var F=L-254;if(L>264){var z=vj[w=L-257];F=kj(e,l,(1<<z)-1)+_j[w],l+=z}var U=h[Lj(e,l)&O],N=U>>>4;if(!U)throw"invalid distance";l+=15&U;R=Sj[N];if(N>3){z=yj[N];R+=Lj(e,l)&(1<<z)-1,l+=z}if(l>p){if(o)throw"unexpected EOF";break}i&&a(c+131072);for(var j=c+F;c<j;c+=4)t[c]=t[c-R],t[c+1]=t[c+1-R],t[c+2]=t[c+2-R],t[c+3]=t[c+3-R];c=j}}n.l=u,n.p=k,n.b=c,u&&(s=1,n.m=d,n.d=h,n.n=f)}while(!s);return c==t.length?t:zj(t,0,c)},Nj=new pj(0),jj=function(e){if(8!=(15&e[0])||e[0]>>>4>7||(e[0]<<8|e[1])%31)throw"invalid zlib data";if(32&e[1])throw"invalid zlib data: preset dictionaries not supported"};function Gj(e,t){return Uj((jj(e),e.subarray(2,-4)),t)}var Qj="undefined"!=typeof TextDecoder&&new TextDecoder;try{Qj.decode(Nj,{stream:!0}),1}catch(NQ){}function Hj(e,t,n){const r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;let i=e,o=r,a=Math.floor((i+o)/2);for(;t<n[a]||t>=n[a+1];)t<n[a]?o=a:i=a,a=Math.floor((i+o)/2);return a}function Vj(e,t,n,r){const i=[],o=[],a=[];i[0]=1;for(let s=1;s<=n;++s){o[s]=t-r[e+1-s],a[s]=r[e+s]-t;let n=0;for(let e=0;e<s;++e){const t=a[e+1],r=o[s-e],l=i[e]/(t+r);i[e]=n+t*l,n=r*l}i[s]=n}return i}function Wj(e,t){let n=1;for(let i=2;i<=e;++i)n*=i;let r=1;for(let i=2;i<=t;++i)r*=i;for(let i=2;i<=e-t;++i)r*=i;return n/r}function qj(e,t,n,r,i){const o=function(e,t,n,r,i){const o=i<e?i:e,a=[],s=Hj(e,r,t),l=function(e,t,n,r,i){const o=[];for(let h=0;h<=n;++h)o[h]=0;const a=[];for(let h=0;h<=r;++h)a[h]=o.slice(0);const s=[];for(let h=0;h<=n;++h)s[h]=o.slice(0);s[0][0]=1;const l=o.slice(0),c=o.slice(0);for(let h=1;h<=n;++h){l[h]=t-i[e+1-h],c[h]=i[e+h]-t;let n=0;for(let e=0;e<h;++e){const t=c[e+1],r=l[h-e];s[h][e]=t+r;const i=s[e][h-1]/s[h][e];s[e][h]=n+t*i,n=r*i}s[h][h]=n}for(let h=0;h<=n;++h)a[0][h]=s[h][n];for(let h=0;h<=n;++h){let e=0,t=1;const i=[];for(let r=0;r<=n;++r)i[r]=o.slice(0);i[0][0]=1;for(let o=1;o<=r;++o){let r=0;const l=h-o,c=n-o;h>=o&&(i[t][0]=i[e][0]/s[c+1][l],r=i[t][0]*s[l][c]);const u=h-1<=c?o-1:n-h;for(let n=l>=-1?1:-l;n<=u;++n)i[t][n]=(i[e][n]-i[e][n-1])/s[c+1][l+n],r+=i[t][n]*s[l+n][c];h<=c&&(i[t][o]=-i[e][o-1]/s[c+1][h],r+=i[t][o]*s[h][c]),a[o][h]=r;const d=e;e=t,t=d}}let u=n;for(let h=1;h<=r;++h){for(let e=0;e<=n;++e)a[h][e]*=u;u*=n-h}return a}(s,r,e,o,t),c=[];for(let u=0;u<n.length;++u){const e=n[u].clone(),t=e.w;e.x*=t,e.y*=t,e.z*=t,c[u]=e}for(let u=0;u<=o;++u){const t=c[s-e].clone().multiplyScalar(l[u][0]);for(let n=1;n<=e;++n)t.add(c[s-e+n].clone().multiplyScalar(l[u][n]));a[u]=t}for(let u=o+1;u<=i+1;++u)a[u]=new lo(0,0,0);return a}(e,t,n,r,i);return function(e){const t=e.length,n=[],r=[];for(let o=0;o<t;++o){const t=e[o];n[o]=new vo(t.x,t.y,t.z),r[o]=t.w}const i=[];for(let o=0;o<t;++o){const e=n[o].clone();for(let t=1;t<=o;++t)e.sub(i[o-t].clone().multiplyScalar(Wj(o,t)*r[t]));i[o]=e.divideScalar(r[0])}return i}(o)}class Xj extends Rd{constructor(e,t,n,r,i){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=r||0,this.endKnot=i||this.knots.length-1;for(let o=0;o<n.length;++o){const e=n[o];this.controlPoints[o]=new lo(e.x,e.y,e.z,e.w)}}getPoint(e,t){const n=t||new vo,r=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),i=function(e,t,n,r){const i=Hj(e,r,t),o=Vj(i,r,e,t),a=new lo(0,0,0,0);for(let s=0;s<=e;++s){const t=n[i-e+s],r=o[s],l=t.w*r;a.x+=t.x*l,a.y+=t.y*l,a.z+=t.z*l,a.w+=t.w*r}return a}(this.degree,this.knots,this.controlPoints,r);return 1!=i.w&&i.divideScalar(i.w),n.set(i.x,i.y,i.z)}getTangent(e,t){const n=t||new vo,r=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),i=qj(this.degree,this.knots,this.controlPoints,r,1);return n.copy(i[1]).normalize(),n}}let Yj,Jj,Kj;class Zj extends kp{constructor(e){super(e)}load(e,t,n,r){const i=this,o=""===i.path?hm.extractUrlBase(e):i.path,a=new zp(this.manager);a.setPath(i.path),a.setResponseType("arraybuffer"),a.setRequestHeader(i.requestHeader),a.setWithCredentials(i.withCredentials),a.load(e,(function(n){try{t(i.parse(n,o))}catch(NQ){r?r(NQ):console.error(NQ),i.manager.itemError(e)}}),n,r)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===mG(e,0,t.length)}(e))Yj=(new rG).parse(e);else{const t=mG(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(t){const r=e[t-1];return e=e.slice(n+t),n++,r}for(let i=0;i<t.length;++i){if(r(1)===t[i])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if(aG(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+aG(t));Yj=(new nG).parse(t)}const n=new Hp(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new $j(n,this.manager).parse(Yj)}}class $j{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){Jj=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),i=(new eG).parse(r);return this.parseScene(r,i,n),Kj}parseConnections(){const e=new Map;if("Connections"in Yj){Yj.Connections.connections.forEach((function(t){const n=t[0],r=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const o={ID:r,relationship:i};e.get(n).parents.push(o),e.has(r)||e.set(r,{parents:[],children:[]});const a={ID:n,relationship:i};e.get(r).children.push(a)}))}return e}parseImages(){const e={},t={};if("Video"in Yj.Objects){const n=Yj.Objects.Video;for(const r in n){const i=n[r];if(e[parseInt(r)]=i.RelativeFilename||i.Filename,"Content"in i){const e=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,o="string"===typeof i.Content&&""!==i.Content;if(e||o){const e=this.parseImage(n[r]);t[i.RelativeFilename||i.Filename]=e}}}}for(const n in e){const r=e[n];void 0!==t[r]?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let i;switch(r){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),i="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"===typeof t)return"data:"+i+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:i}))}}parseTextures(e){const t=new Map;if("Texture"in Yj.Objects){const n=Yj.Objects.Texture;for(const r in n){const i=this.parseTexture(n[r],e);t.set(parseInt(r),i)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const r=e.WrapModeU,i=e.WrapModeV,o=void 0!==r?r.value:0,a=void 0!==i?i.value:0;if(n.wrapS=0===o?Kt:Zt,n.wrapT=0===a?Kt:Zt,"Scaling"in e){const t=e.Scaling.value;n.repeat.x=t[0],n.repeat.y=t[1]}return n}loadTexture(e,t){let n;const r=this.textureLoader.path,i=Jj.get(e.id).children;let o;void 0!==i&&i.length>0&&void 0!==t[i[0].ID]&&(n=t[i[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const a=e.FileName.slice(-3).toLowerCase();if("tga"===a){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new so):(t.setPath(this.textureLoader.path),o=t.load(n))}else"psd"===a?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new so):o=this.textureLoader.load(n);return this.textureLoader.setPath(r),o}parseMaterials(e){const t=new Map;if("Material"in Yj.Objects){const n=Yj.Objects.Material;for(const r in n){const i=this.parseMaterial(n[r],e);null!==i&&t.set(parseInt(r),i)}}return t}parseMaterial(e,t){const n=e.id,r=e.attrName;let i=e.ShadingModel;if("object"===typeof i&&(i=i.value),!Jj.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(i.toLowerCase()){case"phong":a=new ap;break;case"lambert":a=new cp;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',i),a=new ap}return a.setValues(o),a.name=r,a}parseParameters(e,t,n){const r={};e.BumpFactor&&(r.bumpScale=e.BumpFactor.value),e.Diffuse?r.color=(new La).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(r.color=(new La).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(r.displacementScale=e.DisplacementFactor.value),e.Emissive?r.emissive=(new La).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(r.emissive=(new La).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(r.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(r.opacity=parseFloat(e.Opacity.value)),r.opacity<1&&(r.transparent=!0),e.ReflectionFactor&&(r.reflectivity=e.ReflectionFactor.value),e.Shininess&&(r.shininess=e.Shininess.value),e.Specular?r.specular=(new La).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(r.specular=(new La).fromArray(e.SpecularColor.value));const i=this;return Jj.get(n).children.forEach((function(e){const n=e.relationship;switch(n){case"Bump":r.bumpMap=i.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":r.aoMap=i.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":r.map=i.getTexture(t,e.ID),void 0!==r.map&&("colorSpace"in r.map?r.map.colorSpace="srgb":r.map.encoding=3001);break;case"DisplacementColor":r.displacementMap=i.getTexture(t,e.ID);break;case"EmissiveColor":r.emissiveMap=i.getTexture(t,e.ID),void 0!==r.emissiveMap&&("colorSpace"in r.emissiveMap?r.emissiveMap.colorSpace="srgb":r.emissiveMap.encoding=3001);break;case"NormalMap":case"Maya|TEX_normal_map":r.normalMap=i.getTexture(t,e.ID);break;case"ReflectionColor":r.envMap=i.getTexture(t,e.ID),void 0!==r.envMap&&(r.envMap.mapping=Xt,"colorSpace"in r.envMap?r.envMap.colorSpace="srgb":r.envMap.encoding=3001);break;case"SpecularColor":r.specularMap=i.getTexture(t,e.ID),void 0!==r.specularMap&&("colorSpace"in r.specularMap?r.specularMap.colorSpace="srgb":r.specularMap.encoding=3001);break;case"TransparentColor":case"TransparencyFactor":r.alphaMap=i.getTexture(t,e.ID),r.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),r}getTexture(e,t){return"LayeredTexture"in Yj.Objects&&t in Yj.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=Jj.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in Yj.Objects){const n=Yj.Objects.Deformer;for(const r in n){const i=n[r],o=Jj.get(parseInt(r));if("Skin"===i.attrType){const t=this.parseSkeleton(o,n);t.ID=r,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=o.parents[0].ID,e[r]=t}else if("BlendShape"===i.attrType){const e={id:r};e.rawTargets=this.parseMorphTargets(o,n),e.id=r,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach((function(e){const r=t[e.ID];if("Cluster"!==r.attrType)return;const i={ID:e.ID,indices:[],weights:[],transformLink:(new qo).fromArray(r.TransformLink.a)};"Indexes"in r&&(i.indices=r.Indexes.a,i.weights=r.Weights.a),n.push(i)})),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const i=e.children[r],o=t[i.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;a.geoID=Jj.get(parseInt(i.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(a)}return n}parseScene(e,t,n){Kj=new ku;const r=this.parseModels(e.skeletons,t,n),i=Yj.Objects.Model,o=this;r.forEach((function(e){const t=i[e.ID];o.setLookAtProperties(e,t);Jj.get(e.ID).parents.forEach((function(t){const n=r.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&Kj.add(e)})),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),Kj.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=dG(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const a=(new tG).parse();1===Kj.children.length&&Kj.children[0].isGroup&&(Kj.children[0].animations=a,Kj=Kj.children[0]),Kj.animations=a}parseModels(e,t,n){const r=new Map,i=Yj.Objects.Model;for(const o in i){const a=parseInt(o),s=i[o],l=Jj.get(a);let c=this.buildSkeleton(l,e,a,s.attrName);if(!c){switch(s.attrType){case"Camera":c=this.createCamera(l);break;case"Light":c=this.createLight(l);break;case"Mesh":c=this.createMesh(l,t,n);break;case"NurbsCurve":c=this.createCurve(l,t);break;case"LimbNode":case"Root":c=new Ch;break;default:c=new ku}c.name=s.attrName?qm.sanitizeNodeName(s.attrName):"",c.ID=a}this.getTransformData(c,s),r.set(a,c)}return r}buildSkeleton(e,t,n,r){let i=null;return e.parents.forEach((function(e){for(const o in t){const a=t[o];a.rawBones.forEach((function(t,o){if(t.ID===e.ID){const e=i;i=new Ch,i.matrixWorld.copy(t.transformLink),i.name=r?qm.sanitizeNodeName(r):"",i.ID=n,a.bones[o]=i,null!==e&&i.add(e)}}))}})),i}createCamera(e){let t,n;if(e.children.forEach((function(e){const t=Yj.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new xa;else{let e=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(e=1);let r=1;void 0!==n.NearPlane&&(r=n.NearPlane.value/1e3);let i=1e3;void 0!==n.FarPlane&&(i=n.FarPlane.value/1e3);let o=window.innerWidth,a=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(o=n.AspectWidth.value,a=n.AspectHeight.value);const s=o/a;let l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);const c=n.FocalLength?n.FocalLength.value:null;switch(e){case 0:t=new js(l,s,r,i),null!==c&&t.setFocalLength(c);break;case 1:t=new pl(-o/2,o/2,a/2,-a/2,r,i);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new xa}}return t}createLight(e){let t,n;if(e.children.forEach((function(e){const t=Yj.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new xa;else{let e;e=void 0===n.LightType?0:n.LightType.value;let r=16777215;void 0!==n.Color&&(r=(new La).fromArray(n.Color.value));let i=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(i=0);let o=0;void 0!==n.FarAttenuationEnd&&(o=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const a=1;switch(e){case 0:t=new rm(r,i,o,a);break;case 1:t=new om(r,i);break;case 2:let e=Math.PI/3;void 0!==n.InnerAngle&&(e=Fi.degToRad(n.InnerAngle.value));let s=0;void 0!==n.OuterAngle&&(s=Fi.degToRad(n.OuterAngle.value),s=Math.max(s,1)),t=new Zp(r,i,o,e,s,a);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new rm(r,i)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let r,i=null,o=null;const a=[];return e.children.forEach((function(e){t.has(e.ID)&&(i=t.get(e.ID)),n.has(e.ID)&&a.push(n.get(e.ID))})),a.length>1?o=a:a.length>0?o=a[0]:(o=new ap({color:13421772}),a.push(o)),"color"in i.attributes&&a.forEach((function(e){e.vertexColors=!0})),i.FBX_Deformer?(r=new Sh(i,o),r.normalizeSkinWeights()):r=new Is(i,o),r}createCurve(e,t){const n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),r=new od({color:3342591,linewidth:1});return new fd(n,r)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?fG(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){if("LookAtProperty"in t){Jj.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const n=Yj.Objects.Model[t.ID];if("Lcl_Translation"in n){const t=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),Kj.add(e.target)):e.lookAt((new vo).fromArray(t))}}}))}}bindSkeleton(e,t,n){const r=this.parsePoseNodes();for(const i in e){const o=e[i];Jj.get(parseInt(o.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;Jj.get(t).parents.forEach((function(e){if(n.has(e.ID)){n.get(e.ID).bind(new Bh(o.bones),r[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in Yj.Objects){const t=Yj.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){const r=t[n].PoseNode;Array.isArray(r)?r.forEach((function(t){e[t.Node]=(new qo).fromArray(t.Matrix.a)})):e[r.Node]=(new qo).fromArray(r.Matrix.a)}}return e}createAmbientLight(){if("GlobalSettings"in Yj&&"AmbientColor"in Yj.GlobalSettings){const e=Yj.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],r=e[2];if(0!==t||0!==n||0!==r){const e=new La(t,n,r);Kj.add(new am(e,1))}}}}class eG{parse(e){const t=new Map;if("Geometry"in Yj.Objects){const n=Yj.Objects.Geometry;for(const r in n){const i=Jj.get(parseInt(r)),o=this.parseGeometry(i,n[r],e);t.set(parseInt(r),o)}}return t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,i=[],o=e.parents.map((function(e){return Yj.Objects.Model[e.ID]}));if(0===o.length)return;const a=e.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&i.push(n.morphTargets[e.ID])}));const s=o[0],l={};"RotationOrder"in s&&(l.eulerOrder=fG(s.RotationOrder.value)),"InheritType"in s&&(l.inheritType=parseInt(s.InheritType.value)),"GeometricTranslation"in s&&(l.translation=s.GeometricTranslation.value),"GeometricRotation"in s&&(l.rotation=s.GeometricRotation.value),"GeometricScaling"in s&&(l.scale=s.GeometricScaling.value);const c=dG(l);return this.genGeometry(t,a,i,c)}genGeometry(e,t,n,r){const i=new hs;e.attrName&&(i.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),s=new rs(a.vertex,3);if(s.applyMatrix4(r),i.setAttribute("position",s),a.colors.length>0&&i.setAttribute("color",new rs(a.colors,3)),t&&(i.setAttribute("skinIndex",new $a(a.weightsIndices,4)),i.setAttribute("skinWeight",new rs(a.vertexWeights,4)),i.FBX_Deformer=t),a.normal.length>0){const e=(new Ui).getNormalMatrix(r),t=new rs(a.normal,3);t.applyNormalMatrix(e),i.setAttribute("normal",t)}if(a.uvs.forEach((function(e,t){"uv2"===GD&&t++;const n=0===t?"uv":`uv${t}`;i.setAttribute(n,new rs(a.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){let e=a.materialIndex[0],t=0;if(a.materialIndex.forEach((function(n,r){n!==e&&(i.addGroup(t,r-t,e),e=n,t=r)})),i.groups.length>0){const t=i.groups[i.groups.length-1],n=t.start+t.count;n!==a.materialIndex.length&&i.addGroup(n,a.materialIndex.length-n,e)}0===i.groups.length&&i.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(i,e,n,r),i}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,i=!1,o=[],a=[],s=[],l=[],c=[],u=[];const h=this;return e.vertexIndices.forEach((function(d,f){let p,m=!1;d<0&&(d=~d,m=!0);let g=[],v=[];if(o.push(3*d,3*d+1,3*d+2),e.color){const t=cG(f,n,d,e.color);s.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){v.push(e.weight),g.push(e.id)})),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);const e=[0,0,0,0],t=[0,0,0,0];v.forEach((function(n,r){let i=n,o=g[r];t.forEach((function(t,n,r){if(i>t){r[n]=i,i=t;const a=e[n];e[n]=o,o=a}}))})),g=e,v=t}for(;v.length<4;)v.push(0),g.push(0);for(let e=0;e<4;++e)c.push(v[e]),u.push(g[e])}if(e.normal){const t=cG(f,n,d,e.normal);a.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(p=cG(f,n,d,e.material)[0]),e.uv&&e.uv.forEach((function(e,t){const r=cG(f,n,d,e);void 0===l[t]&&(l[t]=[]),l[t].push(r[0]),l[t].push(r[1])})),r++,m&&(h.genFace(t,e,o,p,a,s,l,c,u,r),n++,r=0,o=[],a=[],s=[],l=[],c=[],u=[])})),t}genFace(e,t,n,r,i,o,a,s,l,c){for(let u=2;u<c;u++)e.vertex.push(t.vertexPositions[n[0]]),e.vertex.push(t.vertexPositions[n[1]]),e.vertex.push(t.vertexPositions[n[2]]),e.vertex.push(t.vertexPositions[n[3*(u-1)]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+1]]),e.vertex.push(t.vertexPositions[n[3*(u-1)+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(u-1)]),e.vertexWeights.push(s[4*(u-1)+1]),e.vertexWeights.push(s[4*(u-1)+2]),e.vertexWeights.push(s[4*(u-1)+3]),e.vertexWeights.push(s[4*u]),e.vertexWeights.push(s[4*u+1]),e.vertexWeights.push(s[4*u+2]),e.vertexWeights.push(s[4*u+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(u-1)]),e.weightsIndices.push(l[4*(u-1)+1]),e.weightsIndices.push(l[4*(u-1)+2]),e.weightsIndices.push(l[4*(u-1)+3]),e.weightsIndices.push(l[4*u]),e.weightsIndices.push(l[4*u+1]),e.weightsIndices.push(l[4*u+2]),e.weightsIndices.push(l[4*u+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(u-1)]),e.colors.push(o[3*(u-1)+1]),e.colors.push(o[3*(u-1)+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(r),e.materialIndex.push(r),e.materialIndex.push(r)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(u-1)]),e.normal.push(i[3*(u-1)+1]),e.normal.push(i[3*(u-1)+2]),e.normal.push(i[3*u]),e.normal.push(i[3*u+1]),e.normal.push(i[3*u+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][0]),e.uvs[n].push(a[n][1]),e.uvs[n].push(a[n][2*(u-1)]),e.uvs[n].push(a[n][2*(u-1)+1]),e.uvs[n].push(a[n][2*u]),e.uvs[n].push(a[n][2*u+1])}))}addMorphTargets(e,t,n,r){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const i=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const o=Yj.Objects.Geometry[n.geoID];void 0!==o&&i.genMorphGeometry(e,t,o,r,n.name)}))}))}genMorphGeometry(e,t,n,r,i){const o=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],a=void 0!==n.Vertices?n.Vertices.a:[],s=void 0!==n.Indexes?n.Indexes.a:[],l=3*e.attributes.position.count,c=new Float32Array(l);for(let f=0;f<s.length;f++){const e=3*s[f];c[e]=a[3*f],c[e+1]=a[3*f+1],c[e+2]=a[3*f+2]}const u={vertexIndices:o,vertexPositions:c},h=this.genBuffers(u),d=new rs(h.vertex,3);d.name=i||n.attrName,d.applyMatrix4(r),e.morphAttributes.position.push(d)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Colors.a;let i=[];return"IndexToDirect"===n&&(i=e.ColorIndex.a),{dataSize:4,buffer:r,indices:i,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,i=[];for(let o=0;o<r.length;++o)i.push(o);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}}parseNurbsGeometry(e){if(void 0===Xj)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new hs;const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new hs;const n=t-1,r=e.KnotVector.a,i=[],o=e.Points.a;for(let c=0,u=o.length;c<u;c+=4)i.push((new lo).fromArray(o,c));let a,s;if("Closed"===e.Form)i.push(i[0]);else if("Periodic"===e.Form){a=n,s=r.length-1-a;for(let e=0;e<n;++e)i.push(i[e])}const l=new Xj(n,r,i,a,s).getPoints(12*i.length);return(new hs).setFromPoints(l)}}class tG{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const r=t[n],i=this.addClip(r);e.push(i)}return e}parseClips(){if(void 0===Yj.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=Yj.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const e={id:r.id,attr:r.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=Yj.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(sG),values:t[n].KeyValueFloat.a},i=Jj.get(r.id);if(void 0!==i){const t=i.parents[0].ID,n=i.parents[0].relationship;n.match(/X/)?e.get(t).curves.x=r:n.match(/Y/)?e.get(t).curves.y=r:n.match(/Z/)?e.get(t).curves.z=r:n.match(/d|DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=r)}}}parseAnimationLayers(e){const t=Yj.Objects.AnimationLayer,n=new Map;for(const r in t){const t=[],i=Jj.get(parseInt(r));if(void 0!==i){i.children.forEach((function(n,r){if(e.has(n.ID)){const i=e.get(n.ID);if(void 0!==i.curves.x||void 0!==i.curves.y||void 0!==i.curves.z){if(void 0===t[r]){const e=Jj.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const i=Yj.Objects.Model[e.toString()];if(void 0===i)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",n);const o={modelName:i.attrName?qm.sanitizeNodeName(i.attrName):"",ID:i.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};Kj.traverse((function(e){e.ID===i.id&&(o.transform=e.matrix,e.userData.transformData&&(o.eulerOrder=e.userData.transformData.eulerOrder))})),o.transform||(o.transform=new qo),"PreRotation"in i&&(o.preRotation=i.PreRotation.value),"PostRotation"in i&&(o.postRotation=i.PostRotation.value),t[r]=o}}t[r]&&(t[r][i.attr]=i)}else if(void 0!==i.curves.morph){if(void 0===t[r]){const e=Jj.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,i=Jj.get(e).parents[0].ID,o=Jj.get(i).parents[0].ID,a=Jj.get(o).parents[0].ID,s=Yj.Objects.Model[a],l={modelName:s.attrName?qm.sanitizeNodeName(s.attrName):"",morphName:Yj.Objects.Deformer[e].attrName};t[r]=l}t[r][i.attr]=i}}})),n.set(parseInt(r),t)}}return n}parseAnimStacks(e){const t=Yj.Objects.AnimationStack,n={};for(const r in t){const i=Jj.get(parseInt(r)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const o=e.get(i[0].ID);n[r]={name:t[r].attrName,layer:o}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new Bp(e.name,-1,t)}generateTracks(e){const t=[];let n=new vo,r=new go,i=new vo;if(e.transform&&e.transform.decompose(n,r,i),n=n.toArray(),r=(new ra).setFromQuaternion(r,e.eulerOrder).toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==r&&t.push(r)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const n=this.generateRotationTrack(e.modelName,e.R.curves,r,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==n&&t.push(n)}if(void 0!==e.DeformPercent){const n=this.generateMorphTrack(e);void 0!==n&&t.push(n)}return t}generateVectorTrack(e,t,n,r){const i=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(i,t,n);return new Ip(e+"."+r,i,o)}generateRotationTrack(e,t,n,r,i,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(Fi.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(Fi.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(Fi.degToRad));const a=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(a,t,n);void 0!==r&&((r=r.map(Fi.degToRad)).push(o),r=(new ra).fromArray(r),r=(new go).setFromEuler(r)),void 0!==i&&((i=i.map(Fi.degToRad)).push(o),i=(new ra).fromArray(i),i=(new go).setFromEuler(i).invert());const l=new go,c=new ra,u=[];for(let h=0;h<s.length;h+=3)c.set(s[h],s[h+1],s[h+2],o),l.setFromEuler(c),void 0!==r&&l.premultiply(r),void 0!==i&&l.multiply(i),l.toArray(u,h/3*4);return new Mp(e+".quaternion",a,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),r=Kj.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new Sp(e.modelName+".morphTargetInfluences["+r+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,n=t[0];for(let r=1;r<t.length;r++){const i=t[r];i!==n&&(t[e]=i,n=i,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,n){const r=n,i=[];let o=-1,a=-1,s=-1;return e.forEach((function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){const e=t.x.values[o];i.push(e),r[0]=e}else i.push(r[0]);if(-1!==a){const e=t.y.values[a];i.push(e),r[1]=e}else i.push(r[1]);if(-1!==s){const e=t.z.values[s];i.push(e),r[2]=e}else i.push(r[2])})),i}interpolateRotations(e){for(let t=1;t<e.values.length;t++){const n=e.values[t-1],r=e.values[t]-n,i=Math.abs(r);if(i>=180){const o=i/180,a=r/o;let s=n+a;const l=e.times[t-1],c=(e.times[t]-l)/o;let u=l+c;const h=[],d=[];for(;u<e.times[t];)h.push(u),u+=c,d.push(s),s+=a;e.times=gG(e.times,t,h),e.values=gG(e.values,t,d)}}}}class nG{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new oG,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){const i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(i||o)return;const a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,n[++r]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},o=this.parseNodeAttr(r),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in a?("PoseNode"===n?a.PoseNode.push(i):void 0!==a[n].id&&(a[n]={},a[n][a[n].id]=a[n]),""!==o.id&&(a[n][o.id]=i)):"number"===typeof o.id?(a[n]={},a[n][o.id]=i):"Properties70"!==n&&(a[n]="PoseNode"===n?[i]:i),"number"===typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());const o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===r){const e=i.split(",").slice(1),t=parseInt(e[0]),n=parseInt(e[1]);let a=i.split(",").slice(3);a=a.map((function(e){return e.trim().replace(/^"/,"")})),r="connections",i=[t,n],function(e,t){for(let n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i,a),void 0===o[r]&&(o[r]=[])}"Node"===r&&(o.id=i),r in o&&Array.isArray(o[r])?o[r].push(i):"a"!==r?o[r]=i:o.a=i,this.setCurrentProp(o,r),"a"===r&&","!==i.slice(-1)&&(o.a=pG(i))}else this.parseNodeSpecialProperty(e,r,i)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=pG(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],o=r[1],a=r[2],s=r[3];let l=r[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=pG(l)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:l},this.setCurrentProp(this.getPrevNode(),i)}}class rG{parse(e){const t=new iG(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new oG;for(;!this.endOfContent(t);){const e=this.parseNode(t,n);null!==e&&r.add(e.name,e)}return r}endOfContent(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const o=e.getUint8(),a=e.getString(o);if(0===r)return null;const s=[];for(let h=0;h<i;h++)s.push(this.parseProperty(e));const l=s.length>0?s[0]:"",c=s.length>1?s[1]:"",u=s.length>2?s[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){const r=this.parseNode(e,t);null!==r&&this.parseSubNode(a,n,r)}return n.propertyList=s,"number"===typeof l&&(n.id=l),""!==c&&(n.attrName=c),""!==u&&(n.attrType=u),""!==a&&(n.name=a),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const e=n.propertyList[0];Array.isArray(e)?(t[n.name]=n,n.a=e):t[n.name]=e}else if("Connections"===e&&"C"===n.name){const e=[];n.propertyList.forEach((function(t,n){0!==n&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){let e=n.propertyList[0],r=n.propertyList[1];const i=n.propertyList[2],o=n.propertyList[3];let a;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),a="Color"===r||"ColorRGB"===r||"Vector"===r||"Vector3D"===r||0===r.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[e]={type:r,type2:i,flag:o,value:a}}else void 0===t[n.name]?"number"===typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),i=e.getUint32(),o=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const a=Gj(new Uint8Array(e.getArrayBuffer(o))),s=new iG(a.buffer);switch(t){case"b":case"c":return s.getBooleanArray(r);case"d":return s.getFloat64Array(r);case"f":return s.getFloat32Array(r);case"i":return s.getInt32Array(r);case"l":return s.getInt64Array(r)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class iG{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return 1===(1&this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){let t=[];for(let r=0;r<e;r++)t[r]=this.getUint8();const n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),gF(new Uint8Array(t))}}class oG{add(e,t){this[e]=t}}function aG(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function sG(e){return e/46186158e3}const lG=[];function cG(e,t,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);const o=i*r.dataSize,a=o+r.dataSize;return function(e,t,n,r){for(let i=n,o=0;i<r;i++,o++)e[o]=t[i];return e}(lG,r.buffer,o,a)}const uG=new ra,hG=new vo;function dG(e){const t=new qo,n=new qo,r=new qo,i=new qo,o=new qo,a=new qo,s=new qo,l=new qo,c=new qo,u=new qo,h=new qo,d=new qo,f=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(hG.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(Fi.degToRad);t.push(e.eulerOrder),n.makeRotationFromEuler(uG.fromArray(t))}if(e.rotation){const t=e.rotation.map(Fi.degToRad);t.push(e.eulerOrder),r.makeRotationFromEuler(uG.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(Fi.degToRad);t.push(e.eulerOrder),i.makeRotationFromEuler(uG.fromArray(t)),i.invert()}e.scale&&o.scale(hG.fromArray(e.scale)),e.scalingOffset&&s.setPosition(hG.fromArray(e.scalingOffset)),e.scalingPivot&&a.setPosition(hG.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(hG.fromArray(e.rotationOffset)),e.rotationPivot&&c.setPosition(hG.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(h.copy(e.parentMatrix),u.copy(e.parentMatrixWorld));const p=n.clone().multiply(r).multiply(i),m=new qo;m.extractRotation(u);const g=new qo;g.copyPosition(u);const v=g.clone().invert().multiply(u),y=m.clone().invert().multiply(v),A=o,x=new qo;if(0===f)x.copy(m).multiply(p).multiply(y).multiply(A);else if(1===f)x.copy(m).multiply(y).multiply(p).multiply(A);else{const e=(new qo).scale((new vo).setFromMatrixScale(h)).clone().invert(),t=y.clone().multiply(e);x.copy(m).multiply(p).multiply(t).multiply(A)}const b=c.clone().invert(),_=a.clone().invert();let w=t.clone().multiply(l).multiply(c).multiply(n).multiply(r).multiply(i).multiply(b).multiply(s).multiply(a).multiply(o).multiply(_);const E=(new qo).copyPosition(w),S=u.clone().multiply(E);return d.copyPosition(S),w=d.clone().multiply(x),w.premultiply(u.invert()),w}function fG(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function pG(e){return e.split(",").map((function(e){return parseFloat(e)}))}function mG(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),gF(new Uint8Array(e,t,n))}function gG(e,t,n){return e.slice(0,t).concat(n).concat(e.slice(t))}function vG(e){return py(Zj,e)}function yG(e){let{path:t,...n}=e;const r=vG(t).children[0];return l.createElement(KL,tC({},n,{object:r}))}vG.preload=e=>py.preload(Zj,e),vG.clear=e=>py.clear(Zj,e);class AG{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const n=this.workersResolve[e];if(n&&n(t),this.queue.length){const{resolve:t,msg:n,transfer:r}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(n,r)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise((n=>{const r=this._getIdleWorker();-1!==r?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(e,t)):this.queue.push({resolve:n,msg:e,transfer:t})}))}dispose(){this.workers.forEach((e=>e.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const xG=2,bG=0,_G=1,wG=10,EG=9,SG=15,CG=16,MG=22,TG=37,IG=43,BG=76,PG=83,RG=97,DG=100,OG=103,kG=109,LG=165,FG=166;class zG{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:_G,transferFunction:xG,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class UG{constructor(e,t,n,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t){void 0===t&&(t=0);const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}const NG=[171,75,84,88,32,50,48,187,13,10,26,10];function jG(e){return"undefined"!==typeof TextDecoder?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}let GG,QG,HG;const VG={env:{emscripten_notify_memory_growth:function(e){HG=new Uint8Array(QG.exports.memory.buffer)}}};class WG{init(){return GG||(GG="undefined"!==typeof fetch?fetch("data:application/wasm;base64,"+qG).then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,VG))).then(this._init):WebAssembly.instantiate(Buffer.from(qG,"base64"),VG).then(this._init),GG)}_init(e){QG=e.instance,VG.env.emscripten_notify_memory_growth(0)}decode(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(!QG)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,r=QG.exports.malloc(n);HG.set(e,r),t=t||Number(QG.exports.ZSTD_findDecompressedSize(r,n));const i=QG.exports.malloc(t),o=QG.exports.ZSTD_decompress(i,t,r,n),a=HG.slice(i,i+o);return QG.exports.free(r),QG.exports.free(i),a}}const qG="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ";class XG extends Td{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,Wt),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class YG extends Td{constructor(e,t,n,r,i,o){super(e,t,n,i,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Zt}}class JG extends so{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=en,this.minFilter=en,this.wrapR=Zt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}var KG=Object.defineProperty,ZG=(e,t,n)=>(((e,t,n)=>{t in e?KG(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const $G=3e3,eQ=3001,tQ="",nQ="display-p3",rQ="display-p3-linear",iQ="srgb-linear",oQ="srgb",aQ=new WeakMap;let sQ,lQ=0;const cQ=class extends kp{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new AG,this.workerSourceURL="",this.workerConfig=null,"undefined"!==typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}detectSupport(e){return this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},e.capabilities.isWebGL2&&(this.workerConfig.etc1Supported=!1),this}init(){if(!this.transcoderPending){const e=new zp(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),n=new zp(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const r=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,r]).then((e=>{let[t,n]=e;const r=cQ.BasisWorker.toString(),i=["/* constants */","let _EngineFormat = "+JSON.stringify(cQ.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(cQ.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(cQ.BasisFormat),"/* basis_transcoder.js */",t,"/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i])),this.transcoderBinary=n,this.workerPool.setWorkerCreator((()=>{const e=new Worker(this.workerSourceURL),t=this.transcoderBinary.slice(0);return e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:t},[t]),e}))})),lQ>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),lQ++}return this.transcoderPending}load(e,t,n,r){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const i=new zp(this.manager);i.setResponseType("arraybuffer"),i.setWithCredentials(this.withCredentials),i.load(e,(e=>{if(aQ.has(e)){return aQ.get(e).promise.then(t).catch(r)}this._createTexture(e).then((e=>t?t(e):null)).catch(r)}),n,r)}_createTextureFrom(e,t){const{faces:n,width:r,height:i,format:o,type:a,error:s,dfdFlags:l}=e;if("error"===a)return Promise.reject(s);let c;if(6===t.faceCount)c=new XG(n,o,hn);else{const e=n[0].mipmaps;c=t.layerCount>1?new YG(e,r,i,t.layerCount,o,hn):new Td(e,r,i,o,hn)}c.minFilter=1===n[0].mipmaps.length?an:cn,c.magFilter=an,c.generateMipmaps=!1,c.needsUpdate=!0;const u=pQ(t);return"colorSpace"in c?c.colorSpace=u:c.encoding=u===oQ?3001:3e3,c.premultiplyAlpha=!!(1&l),c}async _createTexture(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=function(e){const t=new Uint8Array(e.buffer,e.byteOffset,NG.length);if(t[0]!==NG[0]||t[1]!==NG[1]||t[2]!==NG[2]||t[3]!==NG[3]||t[4]!==NG[4]||t[5]!==NG[5]||t[6]!==NG[6]||t[7]!==NG[7]||t[8]!==NG[8]||t[9]!==NG[9]||t[10]!==NG[10]||t[11]!==NG[11])throw new Error("Missing KTX 2.0 identifier.");const n=new zG,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new UG(e,NG.length,r,!0);n.vkFormat=i._nextUint32(),n.typeSize=i._nextUint32(),n.pixelWidth=i._nextUint32(),n.pixelHeight=i._nextUint32(),n.pixelDepth=i._nextUint32(),n.layerCount=i._nextUint32(),n.faceCount=i._nextUint32();const o=i._nextUint32();n.supercompressionScheme=i._nextUint32();const a=i._nextUint32(),s=i._nextUint32(),l=i._nextUint32(),c=i._nextUint32(),u=i._nextUint64(),h=i._nextUint64(),d=new UG(e,NG.length+r,3*o*8,!0);for(let D=0;D<o;D++)n.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const f=new UG(e,a,s,!0),p={vendorId:f._skip(4)._nextUint16(),descriptorType:f._nextUint16(),versionNumber:f._nextUint16(),descriptorBlockSize:f._nextUint16(),colorModel:f._nextUint8(),colorPrimaries:f._nextUint8(),transferFunction:f._nextUint8(),flags:f._nextUint8(),texelBlockDimension:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],bytesPlane:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],samples:[]},m=(p.descriptorBlockSize/4-6)/4;for(let D=0;D<m;D++){const e={bitOffset:f._nextUint16(),bitLength:f._nextUint8(),channelType:f._nextUint8(),samplePosition:[f._nextUint8(),f._nextUint8(),f._nextUint8(),f._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&e.channelType?(e.sampleLower=f._nextInt32(),e.sampleUpper=f._nextInt32()):(e.sampleLower=f._nextUint32(),e.sampleUpper=f._nextUint32()),p.samples[D]=e}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(p);const g=new UG(e,l,c,!0);for(;g._offset<c;){const e=g._nextUint32(),t=g._scan(e),r=jG(t);if(n.keyValue[r]=g._nextUint8Array(e-t.byteLength-1),r.match(/^ktx/i)){const e=jG(n.keyValue[r]);n.keyValue[r]=e.substring(0,e.lastIndexOf("\0"))}const i=e%4?4-e%4:0;g._skip(i)}if(h<=0)return n;const v=new UG(e,u,h,!0),y=v._nextUint16(),A=v._nextUint16(),x=v._nextUint32(),b=v._nextUint32(),_=v._nextUint32(),w=v._nextUint32(),E=[];for(let D=0;D<o;D++)E.push({imageFlags:v._nextUint32(),rgbSliceByteOffset:v._nextUint32(),rgbSliceByteLength:v._nextUint32(),alphaSliceByteOffset:v._nextUint32(),alphaSliceByteLength:v._nextUint32()});const S=u+v._offset,C=S+x,M=C+b,T=M+_,I=new Uint8Array(e.buffer,e.byteOffset+S,x),B=new Uint8Array(e.buffer,e.byteOffset+C,b),P=new Uint8Array(e.buffer,e.byteOffset+M,_),R=new Uint8Array(e.buffer,e.byteOffset+T,w);return n.globalData={endpointCount:y,selectorCount:A,imageDescs:E,endpointsData:I,selectorsData:B,tablesData:P,extendedData:R},n}(new Uint8Array(e));if(0!==n.vkFormat)return async function(e){const{vkFormat:t}=e;if(void 0===dQ[t])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let n;2===e.supercompressionScheme&&(sQ||(sQ=new Promise((async e=>{const t=new WG;await t.init(),e(t)}))),n=await sQ);const r=[];for(let a=0;a<e.levels.length;a++){const i=Math.max(1,e.pixelWidth>>a),o=Math.max(1,e.pixelHeight>>a),s=e.pixelDepth?Math.max(1,e.pixelDepth>>a):0,l=e.levels[a];let c,u;if(0===e.supercompressionScheme)c=l.levelData;else{if(2!==e.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");c=n.decode(l.levelData,l.uncompressedByteLength)}u=fQ[t]===vn?new Float32Array(c.buffer,c.byteOffset,c.byteLength/Float32Array.BYTES_PER_ELEMENT):fQ[t]===yn?new Uint16Array(c.buffer,c.byteOffset,c.byteLength/Uint16Array.BYTES_PER_ELEMENT):c,r.push({data:u,width:i,height:o,depth:s})}let i;if(hQ.has(dQ[t]))i=0===e.pixelDepth?new Mh(r[0].data,e.pixelWidth,e.pixelHeight):new JG(r[0].data,e.pixelWidth,e.pixelHeight,e.pixelDepth);else{if(e.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");i=new Td(r,e.pixelWidth,e.pixelHeight)}i.mipmaps=r,i.type=fQ[t],i.format=dQ[t],i.needsUpdate=!0;const o=pQ(e);"colorSpace"in i?i.colorSpace=o:i.encoding=o===oQ?eQ:$G;return Promise.resolve(i)}(n);const r=t,i=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:r},[e]))).then((e=>this._createTextureFrom(e.data,n)));return aQ.set(e,{promise:i}),i}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),lQ--,this}};let uQ=cQ;ZG(uQ,"BasisFormat",{ETC1S:0,UASTC_4x4:1}),ZG(uQ,"TranscoderFormat",{ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16}),ZG(uQ,"EngineFormat",{RGBAFormat:Sn,RGBA_ASTC_4x4_Format:qn,RGBA_BPTC_Format:sr,RGBA_ETC2_EAC_Format:Wn,RGBA_PVRTC_4BPPV1_Format:Gn,RGBA_S3TC_DXT5_Format:Un,RGB_ETC1_Format:Hn,RGB_ETC2_Format:Vn,RGB_PVRTC_4BPPV1_Format:Nn,RGB_S3TC_DXT1_Format:Ln}),ZG(uQ,"BasisWorker",(function(){let e,t,n;const r=_EngineFormat,i=_TranscoderFormat,o=_BasisFormat;self.addEventListener("message",(function(a){const h=a.data;switch(h.type){case"init":e=h.config,d=h.transcoderBinary,t=new Promise((e=>{n={wasmBinary:d,onRuntimeInitialized:e},BASIS(n)})).then((()=>{n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((()=>{try{const{faces:t,buffers:a,width:d,height:f,hasAlpha:p,format:m,dfdFlags:g}=function(t){const a=new n.KTX2File(new Uint8Array(t));function h(){a.close(),a.delete()}if(!a.isValid())throw h(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const d=a.isUASTC()?o.UASTC_4x4:o.ETC1S,f=a.getWidth(),p=a.getHeight(),m=a.getLayers()||1,g=a.getLevels(),v=a.getFaces(),y=a.getHasAlpha(),A=a.getDFDFlags(),{transcoderFormat:x,engineFormat:b}=function(t,n,a,u){let h,d;const f=t===o.ETC1S?s:l;for(let r=0;r<f.length;r++){const i=f[r];if(e[i.if]&&(i.basisFormat.includes(t)&&!(u&&i.transcoderFormat.length<2)&&(!i.needsPowerOfTwo||c(n)&&c(a))))return h=i.transcoderFormat[u?1:0],d=i.engineFormat[u?1:0],{transcoderFormat:h,engineFormat:d}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),h=i.RGBA32,d=r.RGBAFormat,{transcoderFormat:h,engineFormat:d}}(d,f,p,y);if(!f||!p||!g)throw h(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!a.startTranscoding())throw h(),new Error("THREE.KTX2Loader: .startTranscoding failed");const _=[],w=[];for(let e=0;e<v;e++){const t=[];for(let n=0;n<g;n++){const r=[];let i,o;for(let t=0;t<m;t++){const s=a.getImageLevelInfo(n,t,e);0!==e||0!==n||0!==t||s.origWidth%4===0&&s.origHeight%4===0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),g>1?(i=s.origWidth,o=s.origHeight):(i=s.width,o=s.height);const l=new Uint8Array(a.getImageTranscodedSizeInBytes(n,t,0,x));if(!a.transcodeImage(l,n,t,e,x,0,-1,-1))throw h(),new Error("THREE.KTX2Loader: .transcodeImage failed.");r.push(l)}const s=u(r);t.push({data:s,width:i,height:o}),w.push(s.buffer)}_.push({mipmaps:t,width:f,height:p,format:b})}return h(),{faces:_,buffers:w,width:f,height:p,hasAlpha:y,format:b,dfdFlags:A}}(h.buffer);self.postMessage({type:"transcode",id:h.id,faces:t,width:d,height:f,hasAlpha:p,format:m,dfdFlags:g},a)}catch(Wy){console.error(Wy),self.postMessage({type:"error",id:h.id,error:Wy.message})}}))}var d}));const a=[{if:"astcSupported",basisFormat:[o.UASTC_4x4],transcoderFormat:[i.ASTC_4x4,i.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.BC7_M5,i.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.BC1,i.BC3],engineFormat:[r.RGB_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.ETC1,i.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.ETC1],engineFormat:[r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[o.ETC1S,o.UASTC_4x4],transcoderFormat:[i.PVRTC1_4_RGB,i.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],s=a.sort((function(e,t){return e.priorityETC1S-t.priorityETC1S})),l=a.sort((function(e,t){return e.priorityUASTC-t.priorityUASTC}));function c(e){return e<=2||0===(e&e-1)&&0!==e}function u(e){if(1===e.length)return e[0];let t=0;for(let i=0;i<e.length;i++){t+=e[i].byteLength}const n=new Uint8Array(t);let r=0;for(let i=0;i<e.length;i++){const t=e[i];n.set(t,r),r+=t.byteLength}return n}}));const hQ=new Set([Sn,Rn,Bn]),dQ={[kG]:Sn,[RG]:Sn,[TG]:Sn,[IG]:Sn,[OG]:Rn,[PG]:Rn,[CG]:Rn,[MG]:Rn,[DG]:Bn,[BG]:Bn,[SG]:Bn,[EG]:Bn,[FG]:Kn,[LG]:Kn},fQ={[kG]:vn,[RG]:yn,[TG]:hn,[IG]:hn,[OG]:vn,[PG]:yn,[CG]:hn,[MG]:hn,[DG]:vn,[BG]:yn,[SG]:hn,[EG]:hn,[FG]:hn,[LG]:hn};function pQ(e){const t=e.dataFormatDescriptor[0];return t.colorPrimaries===_G?t.transferFunction===xG?oQ:iQ:t.colorPrimaries===wG?t.transferFunction===xG?nQ:rQ:(t.colorPrimaries===bG||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),tQ)}const mQ="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master";function gQ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`${mQ}/basis/`;const n=cy((e=>e.gl)),r=py(uQ,yL(e)?Object.values(e):e,(e=>{e.detectSupport(n),e.setTranscoderPath(t)}));if((0,l.useEffect)((()=>{(Array.isArray(r)?r:[r]).forEach(n.initTexture)}),[n,r]),yL(e)){const t=Object.keys(e),n={};return t.forEach((e=>Object.assign(n,{[e]:r[t.indexOf(e)]}))),n}return r}gQ.preload=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:`${mQ}/basis/`;return py.preload(uQ,e,(e=>{e.setTranscoderPath(t)}))},gQ.clear=e=>py.clear(uQ,e);const vQ=e=>{let{children:t,input:n,basisPath:r}=e;const i=gQ(n,r);return l.createElement(l.Fragment,null,null==t?void 0:t(i))};var yQ,AQ;const xQ="undefined"!==typeof window&&"function"===typeof(null==(yQ=window.document)?void 0:yQ.createElement)&&"string"===typeof(null==(AQ=window.navigator)?void 0:AQ.userAgent);let bQ=null;function _Q(e){let{unsuspend:t="loadedmetadata",start:r=!0,crossOrigin:i="anonymous",muted:o=!0,loop:a=!0,hls:s={},...c}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const u=new URL("string"===typeof e?e:"",window.location.href),h=(0,l.useRef)(null),d=(0,l.useRef)(null),f=cy((e=>e.gl)),p=nv((()=>new Promise((async r=>{const l=Object.assign(document.createElement("video"),{src:"string"===typeof e&&e||void 0,srcObject:e instanceof MediaStream&&e||void 0,crossOrigin:i,loop:a,muted:o,...c});if(d.current=l,"string"===typeof e){const t=h.current=await async function(e,t){var r;return xQ&&e.pathname.endsWith(".m3u8")&&(null!==(r=bQ)&&void 0!==r||(bQ=await n.e(210).then(n.t.bind(n,4210,23))),bQ.default.isSupported())?new bQ.default({...t}):null}(u,s);t?(t.attachMedia(l),t.on("hlsMediaAttached",(()=>{t.loadSource(e)}))):l.src=e}else e instanceof MediaStream&&(l.srcObject=e);const p=new Cd(l);"colorSpace"in p?p.colorSpace=f.outputColorSpace:p.encoding=f.outputEncoding,l.addEventListener(t,(()=>r(p)))}))),[e]);return(0,l.useEffect)((()=>(r&&p.image.play(),()=>{h.current&&(h.current.destroy(),h.current=null)})),[p,r]),p}const wQ=e=>{let{children:t,src:n,...r}=e;const i=_Q(n,r);return l.createElement(l.Fragment,null,null==t?void 0:t(i))},EQ=e=>{if(Array.isArray(e))return e[0];if("object"===typeof e&&null!==e){return e[Object.keys(e)[0]][0]}return{w:0,h:0}},SQ=e=>{for(let t=3;t<e.length;t+=4)if(0!==e[t])return!1;return!0},CQ=(e,t,n,r)=>{const i=t*(r.aspect>e/t?r.width/e:r.height/t),o=e*(r.aspect>e/t?r.width/e:r.height/t)*n,a=i*n;let s=Math.min(1,o),l=Math.min(1,a);return o>1&&(s=1,l=a/o*1),new vo(s,l,1)};function MQ(e,t,n,r,i){const o=cy((e=>e.viewport)),a=l.useRef(null),s=l.useRef(0),[c,u]=(0,l.useState)(null),[h,d]=l.useState(new so),f=new Hp,[p,m]=(0,l.useState)(null);function g(t){(t||e)&&new Promise((n=>{f.load(null!==t&&void 0!==t?t:e,n)})).then((e=>{y(null,e)}))}function v(e,t,n){const r=fetch(e).then((e=>e.json())),i=new Promise((e=>{f.load(t,e)}));Promise.all([r,i]).then((e=>{n(e[0],e[1])}))}l.useLayoutEffect((()=>(t&&e?v(t,e,y):e&&g(),()=>{e&&py.clear(Hp,e)})),[]);const y=(e,t)=>{let n=new vo(1,1,1);if(null===e){if(t&&r){const e=t.image.width,i=t.image.height;s.current=r;const{rows:l,columns:c,frameWidth:u,frameHeight:h,emptyFrames:d}=A(t,r);a.current={frames:[],meta:{version:"1.0",size:{w:e,h:i},rows:l,columns:c,frameWidth:u,frameHeight:h,scale:"1"}};for(let t=0;t<l;t++)for(let e=0;e<c;e++){(null!==d&&void 0!==d?d:[]).some((n=>n.row===t&&n.col===e))||a.current.frames.push({frame:{x:e*u,y:t*h,w:u,h:h},rotated:!1,trimmed:!1,spriteSourceSize:{x:0,y:0,w:u,h:h},sourceSize:{w:u,h:h}})}n=CQ(u,h,.1,o)}a.current.frames=b(a.current.frames)}else if(t){a.current=e,a.current.frames=x(),s.current=Array.isArray(e.frames)?e.frames.length:Object.keys(e.frames).length;const{w:t,h:r}=EQ(e.frames).sourceSize;n=CQ(t,r,.1,o)}u(a.current),"encoding"in t?t.encoding=3001:t.colorSpace=kr,d(t),m({spriteTexture:t,spriteData:a.current,aspect:n})},A=(e,t)=>{if(e.image){const n=document.createElement("canvas"),r=n.getContext("2d");n.width=e.image.width,n.height=e.image.height,r.drawImage(e.image,0,0);const i=e.image.width,o=e.image.height,a=Math.round(Math.sqrt(t*(i/o))),s=Math.round(t/a),l=i/a,c=o/s,u=[];for(let e=0;e<s;e++)for(let n=0;n<a;n++){if(e*a+n>=t){u.push({row:e,col:n});continue}const i=r.getImageData(n*l,e*c,l,c).data;SQ(i)&&u.push({row:e,col:n})}return{rows:s,columns:a,frameWidth:l,frameHeight:c,emptyFrames:u}}return{rows:0,columns:0,frameWidth:0,frameHeight:0,emptyFrames:[]}},x=()=>{const e={},t=a.current,r=n;if(r&&Array.isArray(t.frames)){for(let n=0;n<r.length;n++){e[r[n]]=[];for(const i of t.frames){const t=i.frame,o=t.x,a=t.y,s=t.w,l=t.h,c=i.sourceSize.w,u=i.sourceSize.h;"string"===typeof i.filename&&-1!==i.filename.toLowerCase().indexOf(r[n].toLowerCase())&&e[r[n]].push({x:o,y:a,w:s,h:l,frame:t,sourceSize:{w:c,h:u}})}}for(const t in e)e[t].frame=b(e[t]);return e}if(r&&"object"===typeof t.frames){for(let n=0;n<r.length;n++){e[r[n]]=[];for(const i in t.frames){const o=t.frames[i],a=o.frame,s=a.x,l=a.y,c=a.w,u=a.h,h=o.sourceSize.w,d=o.sourceSize.h;"string"===typeof i&&-1!==i.toLowerCase().indexOf(r[n].toLowerCase())&&e[r[n]].push({x:s,y:l,w:c,h:u,frame:a,sourceSize:{w:h,h:d}})}}for(const t in e)e[t].frame=b(e[t]);return e}{let e=[];for(const n in t.frames)e.push(t.frames[n]);return e=b(e),e}},b=e=>{let t=null;for(const i of e){const{w:e,h:n}=i.frame,r=e*n;(!t||r>t.area)&&(t={...i.frame,area:r})}for(const i of e){var n;const{w:e,h:o}=i.frame,a=e*o;var r;if(a===(null==(n=t)?void 0:n.area))i.scaleRatio=1;else i.scaleRatio=Math.sqrt(a/(null==(r=t)?void 0:r.area))}return e};return l.useLayoutEffect((()=>{null==i||i(h,c)}),[h,c]),{spriteObj:p,loadJsonAndTexture:function(e,t){t&&e?v(t,e,y):g(e)}}}function TQ(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];const o=l.useRef(),a=cy((e=>e.scene));return l.useLayoutEffect((()=>{let n;if(e&&null!=e&&e.current&&t&&(o.current=n=new t(e.current,...r)),n)return n.traverse((e=>e.raycast=()=>null)),a.add(n),()=>{o.current=void 0,a.remove(n),null==n.dispose||n.dispose()}}),[a,t,e,...r]),uy((()=>{var e;null==(e=o.current)||null==e.update||e.update()})),o}MQ.preload=e=>py.preload(Hp,e),MQ.clear=e=>py.clear(Hp,e);const IQ=e=>{let{type:t,args:n=[]}=e;const r=l.useRef(null),i=l.useRef(null);return l.useLayoutEffect((()=>{i.current=r.current.parent})),TQ(i,t,...n),l.createElement("object3D",{ref:r})};var BQ=n(722),PQ=n.n(BQ);function RQ(e,t){"function"===typeof e?e(t):null!=e&&(e.current=t)}function DQ(e){let{showPanel:t=0,className:n,parent:r}=e;const i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0;const[r,i]=l.useState();return l.useLayoutEffect((()=>{const t=e();return i(t),RQ(n,t),()=>RQ(n,null)}),t),r}((()=>new(PQ())),[]);return l.useEffect((()=>{if(i){const e=r&&r.current||document.body;i.showPanel(t),null==e||e.appendChild(i.dom);const o=(null!==n&&void 0!==n?n:"").split(" ").filter((e=>e));o.length&&i.dom.classList.add(...o);const a=$v((()=>i.begin())),s=ey((()=>i.end()));return()=>{o.length&&i.dom.classList.remove(...o),null==e||e.removeChild(i.dom),a(),s()}}}),[r,i,n,t]),null}const OQ=class e{constructor(){let{logsPerSecond:t=20,samplesLog:n=100,samplesGraph:r=10,precision:i=2,minimal:o=!1,horizontal:a=!0,mode:s=0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.totalCpuDuration=0,this.totalGpuDuration=0,this.totalGpuDurationCompute=0,this.totalFps=0,this.activeQuery=null,this.gpuQueries=[],this.renderCount=0,this.mode=s,this.horizontal=a,this.dom=document.createElement("div"),this.dom.style.cssText="position:fixed;top:0;left:0;opacity:0.9;z-index:10000;",o&&(this.dom.style.cssText+="cursor:pointer"),this.gl=null,this.query=null,this.isRunningCPUProfiling=!1,this.minimal=o,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.prevCpuTime=this.beginTime,this.frames=0,this.renderCount=0,this.threeRendererPatched=!1,this.averageCpu={logs:[],graph:[]},this.averageGpu={logs:[],graph:[]},this.averageGpuCompute={logs:[],graph:[]},this.queryCreated=!1,this.fpsPanel=this.addPanel(new e.Panel("FPS","#0ff","#002"),0),this.msPanel=this.addPanel(new e.Panel("CPU","#0f0","#020"),1),this.gpuPanel=null,this.gpuPanelCompute=null,this.samplesLog=n,this.samplesGraph=r,this.precision=i,this.logsPerSecond=t,this.minimal?(this.dom.addEventListener("click",(e=>{e.preventDefault(),this.showPanel(++this.mode%this.dom.children.length)}),!1),this.mode=s,this.showPanel(this.mode)):window.addEventListener("resize",(()=>{this.resizePanel(this.fpsPanel,0),this.resizePanel(this.msPanel,1),this.gpuPanel&&this.resizePanel(this.gpuPanel,2),this.gpuPanelCompute&&this.resizePanel(this.gpuPanelCompute,3)}))}patchThreeRenderer(e){const t=e.render,n=this;e.render=function(e,r){n.begin(),t.call(this,e,r),n.end()},this.threeRendererPatched=!0}resizePanel(e,t){e.canvas.style.position="absolute",this.minimal?e.canvas.style.display="none":(e.canvas.style.display="block",this.horizontal?(e.canvas.style.top="0px",e.canvas.style.left=t*e.WIDTH/e.PR+"px"):(e.canvas.style.left="0px",e.canvas.style.top=t*e.HEIGHT/e.PR+"px"))}addPanel(e,t){return e.canvas&&(this.dom.appendChild(e.canvas),this.resizePanel(e,t)),e}showPanel(e){for(let t=0;t<this.dom.children.length;t++){this.dom.children[t].style.display=t===e?"block":"none"}this.mode=e}async init(t){if(t){if(t.isWebGLRenderer&&!this.threeRendererPatched){const e=t;this.patchThreeRenderer(e),this.gl=e.getContext()}else!this.gl&&t instanceof WebGL2RenderingContext&&(this.gl=t);if(t.isWebGPURenderer)return t.backend.trackTimestamp=!0,void(await t.hasFeatureAsync("timestamp-query")&&(this.gpuPanel=this.addPanel(new e.Panel("GPU","#ff0","#220"),2),this.gpuPanelCompute=this.addPanel(new e.Panel("CPT","#e1e1e1","#212121"),3),this.info=t.info));if(!this.gl&&t instanceof HTMLCanvasElement||t instanceof OffscreenCanvas){if(this.gl=t.getContext("webgl2"),!this.gl)return void console.error("Stats: Unable to obtain WebGL2 context.")}else if(!this.gl)return void console.error("Stats: Invalid input type. Expected WebGL2RenderingContext, HTMLCanvasElement, or OffscreenCanvas.");this.ext=this.gl.getExtension("EXT_disjoint_timer_query_webgl2"),this.ext&&(this.gpuPanel=this.addPanel(new e.Panel("GPU","#ff0","#220"),2))}else console.error('Stats: The "canvas" parameter is undefined.')}begin(){this.isRunningCPUProfiling||this.beginProfiling("cpu-started"),this.gl&&this.ext&&this.gl&&this.ext&&(this.activeQuery&&this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.activeQuery=this.gl.createQuery(),null!==this.activeQuery&&this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,this.activeQuery))}end(){this.renderCount++,this.gl&&this.ext&&this.activeQuery&&(this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.gpuQueries.push({query:this.activeQuery}),this.activeQuery=null)}processGpuQueries(){this.gl&&this.ext&&(this.totalGpuDuration=0,this.gpuQueries.forEach(((e,t)=>{if(this.gl){const n=this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT_AVAILABLE),r=this.gl.getParameter(this.ext.GPU_DISJOINT_EXT);if(n&&!r){const n=1e-6*this.gl.getQueryParameter(e.query,this.gl.QUERY_RESULT);this.totalGpuDuration+=n,this.gl.deleteQuery(e.query),this.gpuQueries.splice(t,1)}}})))}update(){void 0===this.info?this.processGpuQueries():(this.totalGpuDuration=this.info.render.timestamp,this.totalGpuDurationCompute=this.info.compute.timestamp,this.addToAverage(this.totalGpuDurationCompute,this.averageGpuCompute)),this.endProfiling("cpu-started","cpu-finished","cpu-duration"),this.addToAverage(this.totalCpuDuration,this.averageCpu),this.addToAverage(this.totalGpuDuration,this.averageGpu),this.renderCount=0,0===this.totalCpuDuration&&this.beginProfiling("cpu-started"),this.totalCpuDuration=0,this.totalFps=0,this.beginTime=this.endInternal()}endInternal(){this.frames++;const e=(performance||Date).now();if(e>=this.prevCpuTime+1e3/this.logsPerSecond&&(this.updatePanel(this.msPanel,this.averageCpu),this.updatePanel(this.gpuPanel,this.averageGpu),this.gpuPanelCompute&&this.updatePanel(this.gpuPanelCompute,this.averageGpuCompute),this.prevCpuTime=e),e>=this.prevTime+1e3){const t=1e3*this.frames/(e-this.prevTime);this.fpsPanel.update(t,t,100,100,0),this.prevTime=e,this.frames=0}return e}addToAverage(e,t){t.logs.push(e),t.logs.length>this.samplesLog&&t.logs.shift(),t.graph.push(e),t.graph.length>this.samplesGraph&&t.graph.shift()}beginProfiling(e){window.performance&&(window.performance.mark(e),this.isRunningCPUProfiling=!0)}endProfiling(e,t,n){if(window.performance&&t&&this.isRunningCPUProfiling){window.performance.mark(t);const r=performance.measure(n,e,t);this.totalCpuDuration+=r.duration,this.isRunningCPUProfiling=!1}}updatePanel(e,t){if(t.logs.length>0){let n=0,r=.01;for(let e=0;e<t.logs.length;e++)n+=t.logs[e],t.logs[e]>r&&(r=t.logs[e]);let i=0,o=.01;for(let e=0;e<t.graph.length;e++)i+=t.graph[e],t.graph[e]>o&&(o=t.graph[e]);e&&e.update(n/Math.min(t.logs.length,this.samplesLog),i/Math.min(t.graph.length,this.samplesGraph),r,o,this.precision)}}get domElement(){return this.dom}get container(){return console.warn("Stats: Deprecated! this.container as been replaced to this.dom "),this.dom}};OQ.Panel=class{constructor(e,t,n){this.name=e,this.fg=t,this.bg=n,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=90*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=84*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=90*this.PR,this.canvas.height=48*this.PR,this.canvas.style.width="90px",this.canvas.style.position="absolute",this.canvas.style.height="48px",this.canvas.style.cssText="width:90px;height:48px",this.context=this.canvas.getContext("2d"),this.context&&(this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=this.bg,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=this.fg,this.context.fillText(this.name,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT))}update(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=1/0,a=0;this.context&&(o=Math.min(o,e),a=Math.max(n,e),r=Math.max(r,t),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(e.toFixed(i)+" "+this.name+" ("+o.toFixed(i)+"-"+parseFloat(a.toFixed(i))+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,(1-t/r)*this.GRAPH_HEIGHT))}};let kQ=OQ;function LQ(e){let{className:t,parent:n,...r}=e;const i=cy((e=>e.gl)),o=l.useMemo((()=>{const e=new kQ({...r});return e.init(i),e}),[i]);return l.useEffect((()=>{if(o){const e=n&&n.current||document.body;null==e||e.appendChild(o.dom);const r=(null!==t&&void 0!==t?t:"").split(" ").filter((e=>e));r.length&&o.dom.classList.add(...r);const i=ey((()=>o.update()));return()=>{r.length&&o.dom.classList.remove(...r),null==e||e.removeChild(o.dom),i()}}}),[n,o,t]),null}function FQ(){let{size:e=256,frames:t=1/0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=cy((e=>e.viewport.dpr)),{width:r,height:i}=cy((e=>e.size)),o=e||r*n,a=e||i*n,s=l.useMemo((()=>{const e=new Ul(o,a);return e.format=Tn,e.type=pn,{depthTexture:e}}),[o,a]);let c=0;const u=Tz(o,a,s);return uy((e=>{(t===1/0||c<t)&&(e.gl.setRenderTarget(u),e.gl.render(e.scene,e.camera),e.gl.setRenderTarget(null),c++)})),u.depthTexture}function zQ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const r=cy((e=>e.viewport)),i=t*(r.aspect>e/t?r.width/e:r.height/t);return[e*(r.aspect>e/t?r.width/e:r.height/t)*n,i*n,1]}function UQ(e,t){const n=cy((e=>e.pointer)),[r]=l.useState((()=>{const r=new ig;return t&&Ay(r,t,{}),function(t,i){r.setFromCamera(n,e instanceof Fs?e:e.current);const o=this.constructor.prototype.raycast.bind(this);o&&o(r,i)}}));return r}function NQ(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((r=r.apply(e,t||[])).next())}))}"function"==typeof SuppressedError&&SuppressedError;const jQ=["geforce 320m","geforce 8600","geforce 8600m gt","geforce 8800 gs","geforce 8800 gt","geforce 9400","geforce 9400m g","geforce 9400m","geforce 9600m gt","geforce 9600m","geforce fx go5200","geforce gt 120","geforce gt 130","geforce gt 330m","geforce gtx 285","google swiftshader","intel g41","intel g45","intel gma 4500mhd","intel gma x3100","intel hd 3000","intel q45","legacy","mali-2","mali-3","mali-4","quadro fx 1500","quadro fx 4","quadro fx 5","radeon hd 2400","radeon hd 2600","radeon hd 4670","radeon hd 4850","radeon hd 4870","radeon hd 5670","radeon hd 5750","radeon hd 6290","radeon hd 6300","radeon hd 6310","radeon hd 6320","radeon hd 6490m","radeon hd 6630m","radeon hd 6750m","radeon hd 6770m","radeon hd 6970m","sgx 543","sgx543"];function GQ(e){return e.toLowerCase().replace(/.*angle ?\((.+)\)(?: on vulkan [0-9.]+)?$/i,"$1").replace(/\s(\d{1,2}gb|direct3d.+$)|\(r\)| \([^)]+\)$/g,"").replace(/(?:vulkan|opengl) \d+\.\d+(?:\.\d+)?(?: \((.*)\))?/,"$1")}const QQ="undefined"==typeof window,HQ=(()=>{if(QQ)return;const{userAgent:e,platform:t,maxTouchPoints:n}=window.navigator,r=/(iphone|ipod|ipad)/i.test(e),i="iPad"===t||"MacIntel"===t&&n>0&&!window.MSStream;return{isIpad:i,isMobile:/android/i.test(e)||r||i,isSafari12:/Version\/12.+Safari/.test(e),isFirefox:/Firefox/.test(e)}})();class VQ extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}const WQ=[],qQ=[];function XQ(e,t){if(e===t)return 0;const n=e;e.length>t.length&&(e=t,t=n);let r=e.length,i=t.length;for(;r>0&&e.charCodeAt(~-r)===t.charCodeAt(~-i);)r--,i--;let o,a=0;for(;a<r&&e.charCodeAt(a)===t.charCodeAt(a);)a++;if(r-=a,i-=a,0===r)return i;let s,l,c=0,u=0,h=0;for(;u<r;)qQ[u]=e.charCodeAt(a+u),WQ[u]=++u;for(;h<i;)for(o=t.charCodeAt(a+h),s=h++,c=h,u=0;u<r;u++)l=o===qQ[u]?s:s+1,s=WQ[u],c=WQ[u]=s>c?l>c?c+1:l:l>s?s+1:l;return c}function YQ(e){return null!=e}const JQ=function(){let{mobileTiers:e=[0,15,30,60],desktopTiers:t=[0,15,30,60],override:n={},glContext:r,failIfMajorPerformanceCaveat:i=!1,benchmarksURL:o="https://unpkg.com/detect-gpu@5.0.47/dist/benchmarks"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return NQ(void 0,void 0,void 0,(function*(){const a={};if(QQ)return{tier:0,type:"SSR"};const{isIpad:s=!!(null==HQ?void 0:HQ.isIpad),isMobile:l=!!(null==HQ?void 0:HQ.isMobile),screenSize:c=window.screen,loadBenchmarks:u=e=>NQ(void 0,void 0,void 0,(function*(){const t=yield fetch(`${o}/${e}`).then((e=>e.json()));if(parseInt(t.shift().split(".")[0],10)<4)throw new VQ("Detect GPU benchmark data is out of date. Please update to version 4x");return t}))}=n;let{renderer:h}=n;const d=(e,t,n,r,i)=>({device:i,fps:r,gpu:n,isMobile:l,tier:e,type:t});let f,p="";if(h)h=GQ(h),f=[h];else{const e=r||function(e){const t={alpha:!1,antialias:!1,depth:!1,failIfMajorPerformanceCaveat:arguments.length>1&&void 0!==arguments[1]&&arguments[1],powerPreference:"high-performance",stencil:!1};e&&delete t.powerPreference;const n=window.document.createElement("canvas"),r=n.getContext("webgl",t)||n.getContext("experimental-webgl",t);return null!=r?r:void 0}(null==HQ?void 0:HQ.isSafari12,i);if(!e)return d(0,"WEBGL_UNSUPPORTED");const t=(null==HQ?void 0:HQ.isFirefox)?null:e.getExtension("WEBGL_debug_renderer_info");if(h=t?e.getParameter(t.UNMASKED_RENDERER_WEBGL):e.getParameter(e.RENDERER),!h)return d(1,"FALLBACK");p=h,h=GQ(h),f=function(e,t,n){return"apple gpu"===t?function(e,t,n){if(!n)return[t];const r=function(e){const t=e.createShader(35633),n=e.createShader(35632),r=e.createProgram();if(!(n&&t&&r))return;e.shaderSource(t,"\n    precision highp float;\n    attribute vec3 aPosition;\n    varying float vvv;\n    void main() {\n      vvv = 0.31622776601683794;\n      gl_Position = vec4(aPosition, 1.0);\n    }\n  "),e.shaderSource(n,"\n    precision highp float;\n    varying float vvv;\n    void main() {\n      vec4 enc = vec4(1.0, 255.0, 65025.0, 16581375.0) * vvv;\n      enc = fract(enc);\n      enc -= enc.yzww * vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0, 0.0);\n      gl_FragColor = enc;\n    }\n  "),e.compileShader(t),e.compileShader(n),e.attachShader(r,t),e.attachShader(r,n),e.linkProgram(r),e.detachShader(r,t),e.detachShader(r,n),e.deleteShader(t),e.deleteShader(n),e.useProgram(r);const i=e.createBuffer();e.bindBuffer(34962,i),e.bufferData(34962,new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),35044);const o=e.getAttribLocation(r,"aPosition");e.vertexAttribPointer(o,3,5126,!1,0,0),e.enableVertexAttribArray(o),e.clearColor(1,1,1,1),e.clear(16384),e.viewport(0,0,1,1),e.drawArrays(4,0,3);const a=new Uint8Array(4);return e.readPixels(0,0,1,1,6408,5121,a),e.deleteProgram(r),e.deleteBuffer(i),a.join("")}(e),i="801621810",o="8016218135",a="80162181161",s=(null==HQ?void 0:HQ.isIpad)?[["a7",a,12],["a8",o,15],["a8x",o,15],["a9",o,15],["a9x",o,15],["a10",o,15],["a10x",o,15],["a12",i,15],["a12x",i,15],["a12z",i,15],["a14",i,15],["a15",i,15],["m1",i,15],["m2",i,15]]:[["a7",a,12],["a8",o,12],["a9",o,15],["a10",o,15],["a11",i,15],["a12",i,15],["a13",i,15],["a14",i,15],["a15",i,15],["a16",i,15],["a17",i,15]];let l;return"80162181255"===r?l=s.filter((e=>{let[,,t]=e;return t>=14})):(l=s.filter((e=>{let[,t]=e;return t===r})),l.length||(l=s)),l.map((e=>{let[t]=e;return`apple ${t} gpu`}))}(e,t,n):[t]}(e,h,l)}const m=(yield Promise.all(f.map((function(e){var t;return NQ(this,void 0,void 0,(function*(){const n=(e=>{const t=l?["adreno","apple","mali-t","mali","nvidia","powervr","samsung"]:["intel","apple","amd","radeon","nvidia","geforce","adreno"];for(const n of t)if(e.includes(n))return n})(e);if(!n)return;const r=`${l?"m":"d"}-${n}${s?"-ipad":""}.json`,i=a[r]=null!==(t=a[r])&&void 0!==t?t:u(r);let o;try{o=yield i}catch(n){if(n instanceof VQ)throw n;return}const h=function(e){var t;const n=(e=e.replace(/\([^)]+\)/,"")).match(/\d+/)||e.match(/(\W|^)([A-Za-z]{1,3})(\W|$)/g);return null!==(t=null==n?void 0:n.join("").replace(/\W|amd/g,""))&&void 0!==t?t:""}(e);let d=o.filter((e=>{let[,t]=e;return t===h}));d.length||(d=o.filter((t=>{let[n]=t;return n.includes(e)})));const f=d.length;if(0===f)return;const p=e.split(/[.,()\[\]/\s]/g).sort().filter(((e,t,n)=>0===t||e!==n[t-1])).join(" ");let m,[g,,,,v]=f>1?d.map((e=>[e,XQ(p,e[2])])).sort(((e,t)=>{let[,n]=e,[,r]=t;return n-r}))[0][0]:d[0],y=Number.MAX_VALUE;const{devicePixelRatio:A}=window,x=c.width*A*c.height*A;for(const e of v){const[t,n]=e,r=t*n,i=Math.abs(x-r);i<y&&(y=i,m=e)}if(!m)return;const[,,b,_]=m;return[y,b,g,_]}))})))).filter(YQ).sort(((e,t)=>{let[n=Number.MAX_VALUE,r]=e,[i=Number.MAX_VALUE,o]=t;return n===i?r-o:n-i}));if(!m.length){const e=jQ.find((e=>h.includes(e)));return e?d(0,"BLOCKLISTED",e):d(1,"FALLBACK",`${h} (${p})`)}const[,g,v,y]=m[0];if(-1===g)return d(0,"BLOCKLISTED",v,g,y);const A=l?e:t;let x=0;for(let e=0;e<A.length;e++)g>=A[e]&&(x=e);return d(x,"BENCHMARK",v,g,y)}))},KQ=e=>nv((()=>JQ(e)),["useDetectGPU"]);function ZQ(e){let{children:t,...n}=e;const r=KQ(n);return l.createElement(l.Fragment,null,null==t?void 0:t(r))}const $Q=0,eH=1,tH=2,nH=2,rH=1.25,iH=1,oH=32,aH=65535,sH=Math.pow(2,-24),lH=Symbol("SKIP_GENERATION");function cH(e,t,n){return null===e?null:(e.point.applyMatrix4(t.matrixWorld),e.distance=e.point.distanceTo(n.ray.origin),e.object=t,e)}function uH(e){return e.index?e.index.count:e.attributes.position.count}function hH(e){return uH(e)/3}function dH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:ArrayBuffer;return e>65535?new Uint32Array(new t(4*e)):new Uint16Array(new t(2*e))}function fH(e,t){const n=hH(e),r=t||e.drawRange,i=r.start/3,o=(r.start+r.count)/3,a=Math.max(0,i),s=Math.min(n,o)-a;return[{offset:Math.floor(a),count:Math.floor(s)}]}function pH(e,t){if(!e.groups||!e.groups.length)return fH(e,t);const n=[],r=new Set,i=t||e.drawRange,o=i.start/3,a=(i.start+i.count)/3;for(const l of e.groups){const e=l.start/3,t=(l.start+l.count)/3;r.add(Math.max(o,e)),r.add(Math.min(a,t))}const s=Array.from(r.values()).sort(((e,t)=>e-t));for(let l=0;l<s.length-1;l++){const e=s[l],t=s[l+1];n.push({offset:Math.floor(e),count:Math.floor(t-e)})}return n}function mH(e,t,n,r,i){let o=1/0,a=1/0,s=1/0,l=-1/0,c=-1/0,u=-1/0,h=1/0,d=1/0,f=1/0,p=-1/0,m=-1/0,g=-1/0;for(let v=6*t,y=6*(t+n);v<y;v+=6){const t=e[v+0],n=e[v+1],r=t-n,i=t+n;r<o&&(o=r),i>l&&(l=i),t<h&&(h=t),t>p&&(p=t);const y=e[v+2],A=e[v+3],x=y-A,b=y+A;x<a&&(a=x),b>c&&(c=b),y<d&&(d=y),y>m&&(m=y);const _=e[v+4],w=e[v+5],E=_-w,S=_+w;E<s&&(s=E),S>u&&(u=S),_<f&&(f=_),_>g&&(g=_)}r[0]=o,r[1]=a,r[2]=s,r[3]=l,r[4]=c,r[5]=u,i[0]=h,i[1]=d,i[2]=f,i[3]=p,i[4]=m,i[5]=g}function gH(e,t,n){return n.min.x=t[e],n.min.y=t[e+1],n.min.z=t[e+2],n.max.x=t[e+3],n.max.y=t[e+4],n.max.z=t[e+5],n}function vH(e){let t=-1,n=-1/0;for(let r=0;r<3;r++){const i=e[r+3]-e[r];i>n&&(n=i,t=r)}return t}function yH(e,t){t.set(e)}function AH(e,t,n){let r,i;for(let o=0;o<3;o++){const a=o+3;r=e[o],i=t[o],n[o]=r<i?r:i,r=e[a],i=t[a],n[a]=r>i?r:i}}function xH(e,t,n){for(let r=0;r<3;r++){const i=t[e+2*r],o=t[e+2*r+1],a=i-o,s=i+o;a<n[r]&&(n[r]=a),s>n[r+3]&&(n[r+3]=s)}}function bH(e){const t=e[3]-e[0],n=e[4]-e[1],r=e[5]-e[2];return 2*(t*n+n*r+r*t)}const _H=32,wH=(e,t)=>e.candidate-t.candidate,EH=new Array(_H).fill().map((()=>({count:0,bounds:new Float32Array(6),rightCacheBounds:new Float32Array(6),leftCacheBounds:new Float32Array(6),candidate:0}))),SH=new Float32Array(6);class CH{constructor(){this.boundingData=new Float32Array(6)}}function MH(e,t,n,r,i,o){let a=r,s=r+i-1;const l=o.pos,c=2*o.axis;for(;;){for(;a<=s&&n[6*a+c]<l;)a++;for(;a<=s&&n[6*s+c]>=l;)s--;if(!(a<s))return a;for(let e=0;e<3;e++){let n=t[3*a+e];t[3*a+e]=t[3*s+e],t[3*s+e]=n}for(let e=0;e<6;e++){let t=n[6*a+e];n[6*a+e]=n[6*s+e],n[6*s+e]=t}a++,s--}}function TH(e,t,n,r,i,o){let a=r,s=r+i-1;const l=o.pos,c=2*o.axis;for(;;){for(;a<=s&&n[6*a+c]<l;)a++;for(;a<=s&&n[6*s+c]>=l;)s--;if(!(a<s))return a;{let t=e[a];e[a]=e[s],e[s]=t;for(let e=0;e<6;e++){let t=n[6*a+e];n[6*a+e]=n[6*s+e],n[6*s+e]=t}a++,s--}}}function IH(e,t){return 65535===t[e+15]}function BH(e,t){return t[e+6]}function PH(e,t){return t[e+14]}function RH(e){return e+8}function DH(e,t){return t[e+6]}function OH(e,t){return t[e+7]}let kH,LH,FH,zH;const UH=Math.pow(2,32);function NH(e){return"count"in e?1:1+NH(e.left)+NH(e.right)}function jH(e,t,n){return kH=new Float32Array(n),LH=new Uint32Array(n),FH=new Uint16Array(n),zH=new Uint8Array(n),GH(e,t)}function GH(e,t){const n=e/4,r=e/2,i="count"in t,o=t.boundingData;for(let a=0;a<6;a++)kH[n+a]=o[a];if(i){if(t.buffer){const r=t.buffer;zH.set(new Uint8Array(r),e);for(let t=e,i=e+r.byteLength;t<i;t+=oH){IH(t/2,FH)||(LH[t/4+6]+=n)}return e+r.byteLength}{const i=t.offset,o=t.count;return LH[n+6]=i,FH[r+14]=o,FH[r+15]=aH,e+oH}}{const r=t.left,i=t.right,o=t.splitAxis;let a;if(a=GH(e+oH,r),a/4>UH)throw new Error("MeshBVH: Cannot store child pointer greater than 32 bits.");return LH[n+6]=a/4,a=GH(a,i),LH[n+7]=o,a}}function QH(e,t,n,r,i){const{maxDepth:o,verbose:a,maxLeafTris:s,strategy:l,onProgress:c,indirect:u}=i,h=e._indirectBuffer,d=e.geometry,f=d.index?d.index.array:null,p=u?TH:MH,m=hH(d),g=new Float32Array(6);let v=!1;const y=new CH;return mH(t,n,r,y.boundingData,g),function e(n,r,i){let c=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;!v&&u>=o&&(v=!0,a&&(console.warn(`MeshBVH: Max depth of ${o} reached when generating BVH. Consider increasing maxDepth.`),console.warn(d)));if(i<=s||u>=o)return A(r+i),n.offset=r,n.count=i,n;const m=function(e,t,n,r,i,o){let a=-1,s=0;if(o===$Q)a=vH(t),-1!==a&&(s=(t[a]+t[a+3])/2);else if(o===eH)a=vH(e),-1!==a&&(s=function(e,t,n,r){let i=0;for(let o=t,a=t+n;o<a;o++)i+=e[6*o+2*r];return i/n}(n,r,i,a));else if(o===tH){const o=bH(e);let l=rH*i;const c=6*r,u=6*(r+i);for(let e=0;e<3;e++){const r=t[e],h=(t[e+3]-r)/_H;if(i<_H/4){const t=[...EH];t.length=i;let r=0;for(let i=c;i<u;i+=6,r++){const o=t[r];o.candidate=n[i+2*e],o.count=0;const{bounds:a,leftCacheBounds:s,rightCacheBounds:l}=o;for(let e=0;e<3;e++)l[e]=1/0,l[e+3]=-1/0,s[e]=1/0,s[e+3]=-1/0,a[e]=1/0,a[e+3]=-1/0;xH(i,n,a)}t.sort(wH);let h=i;for(let e=0;e<h;e++){const n=t[e];for(;e+1<h&&t[e+1].candidate===n.candidate;)t.splice(e+1,1),h--}for(let i=c;i<u;i+=6){const r=n[i+2*e];for(let e=0;e<h;e++){const o=t[e];r>=o.candidate?xH(i,n,o.rightCacheBounds):(xH(i,n,o.leftCacheBounds),o.count++)}}for(let n=0;n<h;n++){const r=t[n],c=r.count,u=i-r.count,h=r.leftCacheBounds,d=r.rightCacheBounds;let f=0;0!==c&&(f=bH(h)/o);let p=0;0!==u&&(p=bH(d)/o);const m=iH+rH*(f*c+p*u);m<l&&(a=e,l=m,s=r.candidate)}}else{for(let e=0;e<_H;e++){const t=EH[e];t.count=0,t.candidate=r+h+e*h;const n=t.bounds;for(let e=0;e<3;e++)n[e]=1/0,n[e+3]=-1/0}for(let i=c;i<u;i+=6){let t=~~((n[i+2*e]-r)/h);t>=_H&&(t=_H-1);const o=EH[t];o.count++,xH(i,n,o.bounds)}const t=EH[_H-1];yH(t.bounds,t.rightCacheBounds);for(let e=_H-2;e>=0;e--){const t=EH[e],n=EH[e+1];AH(t.bounds,n.rightCacheBounds,t.rightCacheBounds)}let d=0;for(let n=0;n<_H-1;n++){const t=EH[n],r=t.count,c=t.bounds,u=EH[n+1].rightCacheBounds;0!==r&&(0===d?yH(c,SH):AH(c,SH,SH)),d+=r;let h=0,f=0;0!==d&&(h=bH(SH)/o);const p=i-d;0!==p&&(f=bH(u)/o);const m=iH+rH*(h*d+f*p);m<l&&(a=e,l=m,s=t.candidate)}}}}else console.warn(`MeshBVH: Invalid build strategy value ${o} used.`);return{axis:a,pos:s}}(n.boundingData,c,t,r,i,l);if(-1===m.axis)return A(r+i),n.offset=r,n.count=i,n;const y=p(h,f,t,r,i,m);if(y===r||y===r+i)A(r+i),n.offset=r,n.count=i;else{n.splitAxis=m.axis;const o=new CH,a=r,s=y-r;n.left=o,mH(t,a,s,o.boundingData,g),e(o,a,s,g,u+1);const l=new CH,c=y,h=i-s;n.right=l,mH(t,c,h,l.boundingData,g),e(l,c,h,g,u+1)}return n}(y,n,r,g),y;function A(e){c&&c(e/m)}}function HH(e,t){const n=e.geometry;t.indirect&&(e._indirectBuffer=function(e,t){const n=(e.index?e.index.count:e.attributes.position.count)/3,r=n>65536,i=r?4:2,o=t?new SharedArrayBuffer(n*i):new ArrayBuffer(n*i),a=r?new Uint32Array(o):new Uint16Array(o);for(let s=0,l=a.length;s<l;s++)a[s]=s;return a}(n,t.useSharedArrayBuffer),function(e,t){const n=hH(e),r=pH(e,t).sort(((e,t)=>e.offset-t.offset)),i=r[r.length-1];i.count=Math.min(n-i.offset,i.count);let o=0;return r.forEach((e=>{let{count:t}=e;return o+=t})),n!==o}(n,t.range)&&!t.verbose&&console.warn('MeshBVH: Provided geometry contains groups or a range that do not fully span the vertex contents while using the "indirect" option. BVH may incorrectly report intersections on unrendered portions of the geometry.')),e._indirectBuffer||function(e,t){if(!e.index){const n=e.attributes.position.count,r=dH(n,t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer);e.setIndex(new Xa(r,1));for(let e=0;e<n;e++)r[e]=e}}(n,t);const r=t.useSharedArrayBuffer?SharedArrayBuffer:ArrayBuffer,i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i=e.attributes.position,o=e.index?e.index.array:null,a=hH(e),s=i.normalized;let l;null===t?(l=new Float32Array(6*a*4),n=0,r=a):(l=t,n=n||0,r=r||a);const c=i.array,u=i.offset||0;let h=3;i.isInterleavedBufferAttribute&&(h=i.data.stride);const d=["getX","getY","getZ"];for(let f=n;f<n+r;f++){const e=3*f,t=6*f;let n=e+0,r=e+1,a=e+2;o&&(n=o[n],r=o[r],a=o[a]),s||(n=n*h+u,r=r*h+u,a=a*h+u);for(let o=0;o<3;o++){let e,u,h;s?(e=i[d[o]](n),u=i[d[o]](r),h=i[d[o]](a)):(e=c[n+o],u=c[r+o],h=c[a+o]);let f=e;u<f&&(f=u),h<f&&(f=h);let p=e;u>p&&(p=u),h>p&&(p=h);const m=(p-f)/2,g=2*o;l[t+g+0]=f+m,l[t+g+1]=m+(Math.abs(f)+m)*sH}}return l}(n),o=t.indirect?fH(n,t.range):pH(n,t.range);e._roots=o.map((n=>{const o=QH(e,i,n.offset,n.count,t),a=NH(o),s=new r(oH*a);return jH(0,o,s),s}))}class VH{constructor(){this.min=1/0,this.max=-1/0}setFromPointsField(e,t){let n=1/0,r=-1/0;for(let i=0,o=e.length;i<o;i++){const o=e[i][t];n=o<n?o:n,r=o>r?o:r}this.min=n,this.max=r}setFromPoints(e,t){let n=1/0,r=-1/0;for(let i=0,o=t.length;i<o;i++){const o=t[i],a=e.dot(o);n=a<n?a:n,r=a>r?a:r}this.min=n,this.max=r}isSeparated(e){return this.min>e.max||e.min>this.max}}VH.prototype.setFromBox=function(){const e=new vo;return function(t,n){const r=n.min,i=n.max;let o=1/0,a=-1/0;for(let s=0;s<=1;s++)for(let n=0;n<=1;n++)for(let l=0;l<=1;l++){e.x=r.x*s+i.x*(1-s),e.y=r.y*n+i.y*(1-n),e.z=r.z*l+i.z*(1-l);const c=t.dot(e);o=Math.min(c,o),a=Math.max(c,a)}this.min=o,this.max=a}}();!function(){const e=new VH}();const WH=function(){const e=new vo,t=new vo,n=new vo;return function(r,i,o){const a=r.start,s=e,l=i.start,c=t;n.subVectors(a,l),e.subVectors(r.end,r.start),t.subVectors(i.end,i.start);const u=n.dot(c),h=c.dot(s),d=c.dot(c),f=n.dot(s),p=s.dot(s)*d-h*h;let m,g;m=0!==p?(u*h-f*d)/p:0,g=(u+m*h)/d,o.x=m,o.y=g}}(),qH=function(){const e=new zi,t=new vo,n=new vo;return function(r,i,o,a){WH(r,i,e);let s=e.x,l=e.y;if(s>=0&&s<=1&&l>=0&&l<=1)return r.at(s,o),void i.at(l,a);if(s>=0&&s<=1)return l<0?i.at(0,a):i.at(1,a),void r.closestPointToPoint(a,!0,o);if(l>=0&&l<=1)return s<0?r.at(0,o):r.at(1,o),void i.closestPointToPoint(o,!0,a);{let e,c;e=s<0?r.start:r.end,c=l<0?i.start:i.end;const u=t,h=n;return r.closestPointToPoint(c,!0,t),i.closestPointToPoint(e,!0,n),u.distanceToSquared(c)<=h.distanceToSquared(e)?(o.copy(u),void a.copy(c)):(o.copy(e),void a.copy(h))}}}(),XH=function(){const e=new vo,t=new vo,n=new Ys,r=new pg;return function(i,o){const{radius:a,center:s}=i,{a:l,b:c,c:u}=o;r.start=l,r.end=c;if(r.closestPointToPoint(s,!0,e).distanceTo(s)<=a)return!0;r.start=l,r.end=u;if(r.closestPointToPoint(s,!0,e).distanceTo(s)<=a)return!0;r.start=c,r.end=u;if(r.closestPointToPoint(s,!0,e).distanceTo(s)<=a)return!0;const h=o.getPlane(n);if(Math.abs(h.distanceToPoint(s))<=a){const e=h.projectPoint(s,t);if(o.containsPoint(e))return!0}return!1}}();function YH(e){return Math.abs(e)<1e-15}class JH extends Pa{constructor(){super(...arguments),this.isExtendedTriangle=!0,this.satAxes=new Array(4).fill().map((()=>new vo)),this.satBounds=new Array(4).fill().map((()=>new VH)),this.points=[this.a,this.b,this.c],this.sphere=new zo,this.plane=new Ys,this.needsUpdate=!0}intersectsSphere(e){return XH(e,this)}update(){const e=this.a,t=this.b,n=this.c,r=this.points,i=this.satAxes,o=this.satBounds,a=i[0],s=o[0];this.getNormal(a),s.setFromPoints(a,r);const l=i[1],c=o[1];l.subVectors(e,t),c.setFromPoints(l,r);const u=i[2],h=o[2];u.subVectors(t,n),h.setFromPoints(u,r);const d=i[3],f=o[3];d.subVectors(n,e),f.setFromPoints(d,r),this.sphere.setFromPoints(this.points),this.plane.setFromNormalAndCoplanarPoint(a,e),this.needsUpdate=!1}}JH.prototype.closestPointToSegment=function(){const e=new vo,t=new vo,n=new pg;return function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const{start:a,end:s}=r,l=this.points;let c,u=1/0;for(let h=0;h<3;h++){const a=(h+1)%3;n.start.copy(l[h]),n.end.copy(l[a]),qH(n,r,e,t),c=e.distanceToSquared(t),c<u&&(u=c,i&&i.copy(e),o&&o.copy(t))}return this.closestPointToPoint(a,e),c=a.distanceToSquared(e),c<u&&(u=c,i&&i.copy(e),o&&o.copy(a)),this.closestPointToPoint(s,e),c=s.distanceToSquared(e),c<u&&(u=c,i&&i.copy(e),o&&o.copy(s)),Math.sqrt(u)}}(),JH.prototype.intersectsTriangle=function(){const e=new JH,t=new Array(3),n=new Array(3),r=new VH,i=new VH,o=new vo,a=new vo,s=new vo,l=new vo,c=new vo,u=new pg,h=new pg,d=new pg,f=new vo;function p(e,t,n){const r=e.points;let i=0,o=-1;for(let s=0;s<3;s++){const{start:e,end:l}=u;e.copy(r[s]),l.copy(r[(s+1)%3]),u.delta(a);const c=YH(t.distanceToPoint(e));if(YH(t.normal.dot(a))&&c){n.copy(u),i=2;break}const h=t.intersectLine(u,f);if(!h&&c&&f.copy(e),(h||c)&&!YH(f.distanceTo(l))){if(i<=1){(1===i?n.start:n.end).copy(f),c&&(o=i)}else if(i>=2){(1===o?n.start:n.end).copy(f),i=2;break}if(i++,2===i&&-1===o)break}}return i}return function(a){let u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,f=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.needsUpdate&&this.update(),a.isExtendedTriangle?a.needsUpdate&&a.update():(e.copy(a),e.update(),a=e);const m=this.plane,g=a.plane;if(Math.abs(m.normal.dot(g.normal))>1-1e-10){const e=this.satBounds,s=this.satAxes;n[0]=a.a,n[1]=a.b,n[2]=a.c;for(let t=0;t<4;t++){const i=e[t],o=s[t];if(r.setFromPoints(o,n),i.isSeparated(r))return!1}const l=a.satBounds,c=a.satAxes;t[0]=this.a,t[1]=this.b,t[2]=this.c;for(let n=0;n<4;n++){const e=l[n],i=c[n];if(r.setFromPoints(i,t),e.isSeparated(r))return!1}for(let a=0;a<4;a++){const e=s[a];for(let a=0;a<4;a++){const s=c[a];if(o.crossVectors(e,s),r.setFromPoints(o,t),i.setFromPoints(o,n),r.isSeparated(i))return!1}}return u&&(f||console.warn("ExtendedTriangle.intersectsTriangle: Triangles are coplanar which does not support an output edge. Setting edge to 0, 0, 0."),u.start.set(0,0,0),u.end.set(0,0,0)),!0}{const e=p(this,g,h);if(1===e&&a.containsPoint(h.end))return u&&(u.start.copy(h.end),u.end.copy(h.end)),!0;if(2!==e)return!1;const t=p(a,m,d);if(1===t&&this.containsPoint(d.end))return u&&(u.start.copy(d.end),u.end.copy(d.end)),!0;if(2!==t)return!1;if(h.delta(s),d.delta(l),s.dot(l)<0){let e=d.start;d.start=d.end,d.end=e}const n=h.start.dot(s),r=h.end.dot(s),i=d.start.dot(s),o=d.end.dot(s);return(n===o||i===r||r<i!==n<o)&&(u&&(c.subVectors(h.start,d.start),c.dot(s)>0?u.start.copy(h.start):u.start.copy(d.start),c.subVectors(h.end,d.end),c.dot(s)<0?u.end.copy(h.end):u.end.copy(d.end)),!0)}}}(),JH.prototype.distanceToPoint=function(){const e=new vo;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),JH.prototype.distanceToTriangle=function(){const e=new vo,t=new vo,n=["a","b","c"],r=new pg,i=new pg;return function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const l=a||s?r:null;if(this.intersectsTriangle(o,l))return(a||s)&&(a&&l.getCenter(a),s&&l.getCenter(s)),0;let c=1/0;for(let t=0;t<3;t++){let r;const i=n[t],l=o[i];this.closestPointToPoint(l,e),r=l.distanceToSquared(e),r<c&&(c=r,a&&a.copy(e),s&&s.copy(l));const u=this[i];o.closestPointToPoint(u,e),r=u.distanceToSquared(e),r<c&&(c=r,a&&a.copy(u),s&&s.copy(e))}for(let u=0;u<3;u++){const l=n[u],h=n[(u+1)%3];r.set(this[l],this[h]);for(let u=0;u<3;u++){const l=n[u],h=n[(u+1)%3];i.set(o[l],o[h]),qH(r,i,e,t);const d=e.distanceToSquared(t);d<c&&(c=d,a&&a.copy(e),s&&s.copy(t))}}return Math.sqrt(c)}}();class KH{constructor(e,t,n){this.isOrientedBox=!0,this.min=new vo,this.max=new vo,this.matrix=new qo,this.invMatrix=new qo,this.points=new Array(8).fill().map((()=>new vo)),this.satAxes=new Array(3).fill().map((()=>new vo)),this.satBounds=new Array(3).fill().map((()=>new VH)),this.alignedSatBounds=new Array(3).fill().map((()=>new VH)),this.needsUpdate=!1,e&&this.min.copy(e),t&&this.max.copy(t),n&&this.matrix.copy(n)}set(e,t,n){this.min.copy(e),this.max.copy(t),this.matrix.copy(n),this.needsUpdate=!0}copy(e){this.min.copy(e.min),this.max.copy(e.max),this.matrix.copy(e.matrix),this.needsUpdate=!0}}KH.prototype.update=function(){const e=this.matrix,t=this.min,n=this.max,r=this.points;for(let l=0;l<=1;l++)for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){const a=r[1*l|2*i|4*o];a.x=l?n.x:t.x,a.y=i?n.y:t.y,a.z=o?n.z:t.z,a.applyMatrix4(e)}const i=this.satBounds,o=this.satAxes,a=r[0];for(let l=0;l<3;l++){const e=o[l],t=i[l],n=r[1<<l];e.subVectors(a,n),t.setFromPoints(e,r)}const s=this.alignedSatBounds;s[0].setFromPointsField(r,"x"),s[1].setFromPointsField(r,"y"),s[2].setFromPointsField(r,"z"),this.invMatrix.copy(this.matrix).invert(),this.needsUpdate=!1},KH.prototype.intersectsBox=function(){const e=new VH;return function(t){this.needsUpdate&&this.update();const n=t.min,r=t.max,i=this.satBounds,o=this.satAxes,a=this.alignedSatBounds;if(e.min=n.x,e.max=r.x,a[0].isSeparated(e))return!1;if(e.min=n.y,e.max=r.y,a[1].isSeparated(e))return!1;if(e.min=n.z,e.max=r.z,a[2].isSeparated(e))return!1;for(let s=0;s<3;s++){const n=o[s],r=i[s];if(e.setFromBox(n,t),r.isSeparated(e))return!1}return!0}}(),KH.prototype.intersectsTriangle=function(){const e=new JH,t=new Array(3),n=new VH,r=new VH,i=new vo;return function(o){this.needsUpdate&&this.update(),o.isExtendedTriangle?o.needsUpdate&&o.update():(e.copy(o),e.update(),o=e);const a=this.satBounds,s=this.satAxes;t[0]=o.a,t[1]=o.b,t[2]=o.c;for(let e=0;e<3;e++){const r=a[e],i=s[e];if(n.setFromPoints(i,t),r.isSeparated(n))return!1}const l=o.satBounds,c=o.satAxes,u=this.points;for(let e=0;e<3;e++){const t=l[e],r=c[e];if(n.setFromPoints(r,u),t.isSeparated(n))return!1}for(let e=0;e<3;e++){const o=s[e];for(let e=0;e<4;e++){const a=c[e];if(i.crossVectors(o,a),n.setFromPoints(i,t),r.setFromPoints(i,u),n.isSeparated(r))return!1}}return!0}}(),KH.prototype.closestPointToPoint=function(e,t){return this.needsUpdate&&this.update(),t.copy(e).applyMatrix4(this.invMatrix).clamp(this.min,this.max).applyMatrix4(this.matrix),t},KH.prototype.distanceToPoint=function(){const e=new vo;return function(t){return this.closestPointToPoint(t,e),t.distanceTo(e)}}(),KH.prototype.distanceToBox=function(){const e=["x","y","z"],t=new Array(12).fill().map((()=>new pg)),n=new Array(12).fill().map((()=>new pg)),r=new vo,i=new vo;return function(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(this.needsUpdate&&this.update(),this.intersectsBox(o))return(s||l)&&(o.getCenter(i),this.closestPointToPoint(i,r),o.closestPointToPoint(r,i),s&&s.copy(r),l&&l.copy(i)),0;const c=a*a,u=o.min,h=o.max,d=this.points;let f=1/0;for(let e=0;e<8;e++){const t=d[e];i.copy(t).clamp(u,h);const n=t.distanceToSquared(i);if(n<f&&(f=n,s&&s.copy(t),l&&l.copy(i),n<c))return Math.sqrt(n)}let p=0;for(let r=0;r<3;r++)for(let i=0;i<=1;i++)for(let o=0;o<=1;o++){const a=(r+1)%3,s=(r+2)%3,l=1<<r|i<<a|o<<s,c=d[i<<a|o<<s],f=d[l];t[p].set(c,f);const m=e[r],g=e[a],v=e[s],y=n[p],A=y.start,x=y.end;A[m]=u[m],A[g]=i?u[g]:h[g],A[v]=o?u[v]:h[g],x[m]=h[m],x[g]=i?u[g]:h[g],x[v]=o?u[v]:h[g],p++}for(let e=0;e<=1;e++)for(let t=0;t<=1;t++)for(let n=0;n<=1;n++){i.x=e?h.x:u.x,i.y=t?h.y:u.y,i.z=n?h.z:u.z,this.closestPointToPoint(i,r);const o=i.distanceToSquared(r);if(o<f&&(f=o,s&&s.copy(r),l&&l.copy(i),o<c))return Math.sqrt(o)}for(let e=0;e<12;e++){const o=t[e];for(let e=0;e<12;e++){const t=n[e];qH(o,t,r,i);const a=r.distanceToSquared(i);if(a<f&&(f=a,s&&s.copy(r),l&&l.copy(i),a<c))return Math.sqrt(a)}}return Math.sqrt(f)}}();class ZH{constructor(e){this._getNewPrimitive=e,this._primitives=[]}getPrimitive(){const e=this._primitives;return 0===e.length?this._getNewPrimitive():e.pop()}releasePrimitive(e){this._primitives.push(e)}}class $H extends ZH{constructor(){super((()=>new JH))}}const eV=new $H;const tV=new class{constructor(){this.float32Array=null,this.uint16Array=null,this.uint32Array=null;const e=[];let t=null;this.setBuffer=n=>{t&&e.push(t),t=n,this.float32Array=new Float32Array(n),this.uint16Array=new Uint16Array(n),this.uint32Array=new Uint32Array(n)},this.clearBuffer=()=>{t=null,this.float32Array=null,this.uint16Array=null,this.uint32Array=null,0!==e.length&&this.setBuffer(e.pop())}}};let nV,rV;const iV=[],oV=new ZH((()=>new xo));function aV(e,t,n,r,i,o){nV=oV.getPrimitive(),rV=oV.getPrimitive(),iV.push(nV,rV),tV.setBuffer(e._roots[t]);const a=sV(0,e.geometry,n,r,i,o);tV.clearBuffer(),oV.releasePrimitive(nV),oV.releasePrimitive(rV),iV.pop(),iV.pop();const s=iV.length;return s>0&&(rV=iV[s-1],nV=iV[s-2]),a}function sV(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;const{float32Array:s,uint16Array:l,uint32Array:c}=tV;let u=2*e;if(IH(u,l)){const h=BH(e,c),d=PH(u,l);return gH(e,s,nV),r(h,d,!1,a,o+e,nV)}{const f=RH(e),p=DH(e,c);let m,g,v,y,A=f,x=p;if(i&&(v=nV,y=rV,gH(A,s,v),gH(x,s,y),m=i(v),g=i(y),g<m)){A=p,x=f;const M=m;m=g,g=M,v=y}v||(v=nV,gH(A,s,v));const b=n(v,IH(2*A,l),m,a+1,o+A);let _;if(b===nH){const T=S(A);_=r(T,C(A)-T,!0,a+1,o+A,v)}else _=b&&sV(A,t,n,r,i,o,a+1);if(_)return!0;y=rV,gH(x,s,y);const w=n(y,IH(2*x,l),g,a+1,o+x);let E;if(w===nH){const I=S(x);E=r(I,C(x)-I,!0,a+1,o+x,y)}else E=w&&sV(x,t,n,r,i,o,a+1);return!!E;function S(e){const{uint16Array:t,uint32Array:n}=tV;let r=2*e;for(;!IH(r,t);)r=2*(e=RH(e));return BH(e,n)}function C(e){const{uint16Array:t,uint32Array:n}=tV;let r=2*e;for(;!IH(r,t);)r=2*(e=DH(e,n));return BH(e,n)+PH(r,t)}}}const lV=new vo,cV=new vo;const uV=new vo,hV=new vo,dV=new vo,fV=new zi,pV=new zi,mV=new zi,gV=new vo,vV=new vo,yV=new vo,AV=new vo;function xV(e,t,n,r,i,o,a,s,l,c,u){uV.fromBufferAttribute(t,o),hV.fromBufferAttribute(t,a),dV.fromBufferAttribute(t,s);const h=function(e,t,n,r,i,o,a,s){let l;if(l=o===Je?e.intersectTriangle(r,n,t,!0,i):e.intersectTriangle(t,n,r,o!==Ke,i),null===l)return null;const c=e.origin.distanceTo(i);return c<a||c>s?null:{distance:c,point:i.clone()}}(e,uV,hV,dV,AV,l,c,u);if(h){r&&(fV.fromBufferAttribute(r,o),pV.fromBufferAttribute(r,a),mV.fromBufferAttribute(r,s),h.uv=Pa.getInterpolation(AV,uV,hV,dV,fV,pV,mV,new zi)),i&&(fV.fromBufferAttribute(i,o),pV.fromBufferAttribute(i,a),mV.fromBufferAttribute(i,s),h.uv1=Pa.getInterpolation(AV,uV,hV,dV,fV,pV,mV,new zi)),n&&(gV.fromBufferAttribute(n,o),vV.fromBufferAttribute(n,a),yV.fromBufferAttribute(n,s),h.normal=Pa.getInterpolation(AV,uV,hV,dV,gV,vV,yV,new vo),h.normal.dot(e.direction)>0&&h.normal.multiplyScalar(-1));const t={a:o,b:a,c:s,normal:new vo,materialIndex:0};Pa.getNormal(uV,hV,dV,t.normal),h.face=t,h.faceIndex=o}return h}function bV(e,t,n,r,i,o,a){const s=3*r;let l=s+0,c=s+1,u=s+2;const h=e.index;e.index&&(l=h.getX(l),c=h.getX(c),u=h.getX(u));const{position:d,normal:f,uv:p,uv1:m}=e.attributes,g=xV(n,d,f,p,m,l,c,u,t,o,a);return g?(g.faceIndex=r,i&&i.push(g),g):null}function _V(e,t,n,r){const i=e.a,o=e.b,a=e.c;let s=t,l=t+1,c=t+2;n&&(s=n.getX(s),l=n.getX(l),c=n.getX(c)),i.x=r.getX(s),i.y=r.getY(s),i.z=r.getZ(s),o.x=r.getX(l),o.y=r.getY(l),o.z=r.getZ(l),a.x=r.getX(c),a.y=r.getY(c),a.z=r.getZ(c)}function wV(e,t,n,r,i,o,a){const{geometry:s}=n,{index:l}=s,c=s.attributes.position;for(let u=e,h=t+e;u<h;u++){let e;if(e=u,_V(a,3*e,l,c),a.needsUpdate=!0,r(a,e,i,o))return!0}return!1}function EV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&Array.isArray(t)&&(t=new Set(t));const n=e.geometry,r=n.index?n.index.array:null,i=n.attributes.position;let o,a,s,l,c=0;const u=e._roots;for(let d=0,f=u.length;d<f;d++)o=u[d],a=new Uint32Array(o),s=new Uint16Array(o),l=new Float32Array(o),h(0,c),c+=o.byteLength;function h(e,n){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const c=2*e;if(s[c+15]===aH){const t=a[e+6];let n=1/0,o=1/0,u=1/0,h=-1/0,d=-1/0,f=-1/0;for(let e=3*t,a=3*(t+s[c+14]);e<a;e++){let t=r[e];const a=i.getX(t),s=i.getY(t),l=i.getZ(t);a<n&&(n=a),a>h&&(h=a),s<o&&(o=s),s>d&&(d=s),l<u&&(u=l),l>f&&(f=l)}return(l[e+0]!==n||l[e+1]!==o||l[e+2]!==u||l[e+3]!==h||l[e+4]!==d||l[e+5]!==f)&&(l[e+0]=n,l[e+1]=o,l[e+2]=u,l[e+3]=h,l[e+4]=d,l[e+5]=f,!0)}{const r=e+8,i=a[e+6],s=r+n,c=i+n;let u=o,d=!1,f=!1;t?u||(d=t.has(s),f=t.has(c),u=!d&&!f):(d=!0,f=!0);const p=u||f;let m=!1;(u||d)&&(m=h(r,n,u));let g=!1;p&&(g=h(i,n,u));const v=m||g;if(v)for(let t=0;t<3;t++){const n=r+t,o=i+t,a=l[n],s=l[n+3],c=l[o],u=l[o+3];l[e+t]=a<c?a:c,l[e+t+3]=s>u?s:u}return v}}}function SV(e,t,n,r,i){let o,a,s,l,c,u;const h=1/n.direction.x,d=1/n.direction.y,f=1/n.direction.z,p=n.origin.x,m=n.origin.y,g=n.origin.z;let v=t[e],y=t[e+3],A=t[e+1],x=t[e+3+1],b=t[e+2],_=t[e+3+2];return h>=0?(o=(v-p)*h,a=(y-p)*h):(o=(y-p)*h,a=(v-p)*h),d>=0?(s=(A-m)*d,l=(x-m)*d):(s=(x-m)*d,l=(A-m)*d),!(o>l||s>a)&&((s>o||isNaN(o))&&(o=s),(l<a||isNaN(a))&&(a=l),f>=0?(c=(b-g)*f,u=(_-g)*f):(c=(_-g)*f,u=(b-g)*f),!(o>u||c>a)&&((c>o||o!==o)&&(o=c),(u<a||a!==a)&&(a=u),o<=i&&a>=r))}function CV(e,t,n,r,i,o,a){tV.setBuffer(e._roots[t]),MV(0,e,n,r,i,o,a),tV.clearBuffer()}function MV(e,t,n,r,i,o,a){const{float32Array:s,uint16Array:l,uint32Array:c}=tV,u=2*e;if(IH(u,l)){!function(e,t,n,r,i,o,a,s){const{geometry:l,_indirectBuffer:c}=e;for(let u=r,h=r+i;u<h;u++)bV(l,t,n,u,o,a,s)}(t,n,r,BH(e,c),PH(u,l),i,o,a)}else{const l=RH(e);SV(l,s,r,o,a)&&MV(l,t,n,r,i,o,a);const u=DH(e,c);SV(u,s,r,o,a)&&MV(u,t,n,r,i,o,a)}}const TV=["x","y","z"];function IV(e,t,n,r,i,o){tV.setBuffer(e._roots[t]);const a=BV(0,e,n,r,i,o);return tV.clearBuffer(),a}function BV(e,t,n,r,i,o){const{float32Array:a,uint16Array:s,uint32Array:l}=tV;let c=2*e;if(IH(c,s)){return function(e,t,n,r,i,o,a){const{geometry:s,_indirectBuffer:l}=e;let c=1/0,u=null;for(let h=r,d=r+i;h<d;h++){let e;e=bV(s,t,n,h,null,o,a),e&&e.distance<c&&(u=e,c=e.distance)}return u}(t,n,r,BH(e,l),PH(c,s),i,o)}{const s=OH(e,l),c=TV[s],u=r.direction[c]>=0;let h,d;u?(h=RH(e),d=DH(e,l)):(h=DH(e,l),d=RH(e));const f=SV(h,a,r,i,o)?BV(h,t,n,r,i,o):null;if(f){const e=f.point[c];if(u?e<=a[d+s]:e>=a[d+s+3])return f}const p=SV(d,a,r,i,o)?BV(d,t,n,r,i,o):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}const PV=new xo,RV=new JH,DV=new JH,OV=new qo,kV=new KH,LV=new KH;function FV(e,t,n,r){tV.setBuffer(e._roots[t]);const i=zV(0,e,n,r);return tV.clearBuffer(),i}function zV(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const{float32Array:o,uint16Array:a,uint32Array:s}=tV;let l=2*e;null===i&&(n.boundingBox||n.computeBoundingBox(),kV.set(n.boundingBox.min,n.boundingBox.max,r),i=kV);if(!IH(l,a)){const a=e+8,l=s[e+6];gH(a,o,PV);if(i.intersectsBox(PV)&&zV(a,t,n,r,i))return!0;gH(l,o,PV);return!!(i.intersectsBox(PV)&&zV(l,t,n,r,i))}{const i=t.geometry,c=i.index,u=i.attributes.position,h=n.index,d=n.attributes.position,f=BH(e,s),p=PH(l,a);if(OV.copy(r).invert(),n.boundsTree){gH(e,o,LV),LV.matrix.copy(OV),LV.needsUpdate=!0;const t=n.boundsTree.shapecast({intersectsBounds:e=>LV.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let t=3*f,n=3*(p+f);t<n;t+=3)if(_V(DV,t,c,u),DV.needsUpdate=!0,e.intersectsTriangle(DV))return!0;return!1}});return t}for(let e=3*f,t=3*(p+f);e<t;e+=3){_V(RV,e,c,u),RV.a.applyMatrix4(OV),RV.b.applyMatrix4(OV),RV.c.applyMatrix4(OV),RV.needsUpdate=!0;for(let e=0,t=h.count;e<t;e+=3)if(_V(DV,e,h,d),DV.needsUpdate=!0,RV.intersectsTriangle(DV))return!0}}}const UV=new qo,NV=new KH,jV=new KH,GV=new vo,QV=new vo,HV=new vo,VV=new vo;function WV(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;t.boundingBox||t.computeBoundingBox(),NV.set(t.boundingBox.min,t.boundingBox.max,n),NV.needsUpdate=!0;const s=e.geometry,l=s.attributes.position,c=s.index,u=t.attributes.position,h=t.index,d=eV.getPrimitive(),f=eV.getPrimitive();let p=GV,m=QV,g=null,v=null;i&&(g=HV,v=VV);let y=1/0,A=null,x=null;return UV.copy(n).invert(),jV.matrix.copy(UV),e.shapecast({boundsTraverseOrder:e=>NV.distanceToBox(e),intersectsBounds:(e,t,n)=>n<y&&n<a&&(t&&(jV.min.copy(e.min),jV.max.copy(e.max),jV.needsUpdate=!0),!0),intersectsRange:(e,r)=>{if(t.boundsTree){return t.boundsTree.shapecast({boundsTraverseOrder:e=>jV.distanceToBox(e),intersectsBounds:(e,t,n)=>n<y&&n<a,intersectsRange:(t,i)=>{for(let a=t,s=t+i;a<s;a++){_V(f,3*a,h,u),f.a.applyMatrix4(n),f.b.applyMatrix4(n),f.c.applyMatrix4(n),f.needsUpdate=!0;for(let t=e,n=e+r;t<n;t++){_V(d,3*t,c,l),d.needsUpdate=!0;const e=d.distanceToTriangle(f,p,g);if(e<y&&(m.copy(p),v&&v.copy(g),y=e,A=t,x=a),e<o)return!0}}}})}for(let i=0,a=hH(t);i<a;i++){_V(f,3*i,h,u),f.a.applyMatrix4(n),f.b.applyMatrix4(n),f.c.applyMatrix4(n),f.needsUpdate=!0;for(let t=e,n=e+r;t<n;t++){_V(d,3*t,c,l),d.needsUpdate=!0;const e=d.distanceToTriangle(f,p,g);if(e<y&&(m.copy(p),v&&v.copy(g),y=e,A=t,x=i),e<o)return!0}}}}),eV.releasePrimitive(d),eV.releasePrimitive(f),y===1/0?null:(r.point?r.point.copy(m):r.point=m.clone(),r.distance=y,r.faceIndex=A,i&&(i.point?i.point.copy(v):i.point=v.clone(),i.point.applyMatrix4(UV),m.applyMatrix4(UV),i.distance=m.sub(i.point).length(),i.faceIndex=x),r)}function qV(e,t,n,r,i,o,a){const{geometry:s}=n,{index:l}=s,c=s.attributes.position;for(let u=e,h=t+e;u<h;u++){let e;if(e=n.resolveTriangleIndex(u),_V(a,3*e,l,c),a.needsUpdate=!0,r(a,e,i,o))return!0}return!1}function XV(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t&&Array.isArray(t)&&(t=new Set(t));const n=e.geometry,r=n.index?n.index.array:null,i=n.attributes.position;let o,a,s,l,c=0;const u=e._roots;for(let d=0,f=u.length;d<f;d++)o=u[d],a=new Uint32Array(o),s=new Uint16Array(o),l=new Float32Array(o),h(0,c),c+=o.byteLength;function h(n,o){let c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const u=2*n;if(s[u+15]===aH){const t=a[n+6];let o=1/0,c=1/0,h=1/0,d=-1/0,f=-1/0,p=-1/0;for(let n=t,a=t+s[u+14];n<a;n++){const t=3*e.resolveTriangleIndex(n);for(let e=0;e<3;e++){let n=t+e;n=r?r[n]:n;const a=i.getX(n),s=i.getY(n),l=i.getZ(n);a<o&&(o=a),a>d&&(d=a),s<c&&(c=s),s>f&&(f=s),l<h&&(h=l),l>p&&(p=l)}}return(l[n+0]!==o||l[n+1]!==c||l[n+2]!==h||l[n+3]!==d||l[n+4]!==f||l[n+5]!==p)&&(l[n+0]=o,l[n+1]=c,l[n+2]=h,l[n+3]=d,l[n+4]=f,l[n+5]=p,!0)}{const e=n+8,r=a[n+6],i=e+o,s=r+o;let u=c,d=!1,f=!1;t?u||(d=t.has(i),f=t.has(s),u=!d&&!f):(d=!0,f=!0);const p=u||f;let m=!1;(u||d)&&(m=h(e,o,u));let g=!1;p&&(g=h(r,o,u));const v=m||g;if(v)for(let t=0;t<3;t++){const i=e+t,o=r+t,a=l[i],s=l[i+3],c=l[o],u=l[o+3];l[n+t]=a<c?a:c,l[n+t+3]=s>u?s:u}return v}}}function YV(e,t,n,r,i,o,a){tV.setBuffer(e._roots[t]),JV(0,e,n,r,i,o,a),tV.clearBuffer()}function JV(e,t,n,r,i,o,a){const{float32Array:s,uint16Array:l,uint32Array:c}=tV,u=2*e;if(IH(u,l)){!function(e,t,n,r,i,o,a,s){const{geometry:l,_indirectBuffer:c}=e;for(let u=r,h=r+i;u<h;u++)bV(l,t,n,c?c[u]:u,o,a,s)}(t,n,r,BH(e,c),PH(u,l),i,o,a)}else{const l=RH(e);SV(l,s,r,o,a)&&JV(l,t,n,r,i,o,a);const u=DH(e,c);SV(u,s,r,o,a)&&JV(u,t,n,r,i,o,a)}}const KV=["x","y","z"];function ZV(e,t,n,r,i,o){tV.setBuffer(e._roots[t]);const a=$V(0,e,n,r,i,o);return tV.clearBuffer(),a}function $V(e,t,n,r,i,o){const{float32Array:a,uint16Array:s,uint32Array:l}=tV;let c=2*e;if(IH(c,s)){return function(e,t,n,r,i,o,a){const{geometry:s,_indirectBuffer:l}=e;let c=1/0,u=null;for(let h=r,d=r+i;h<d;h++){let e;e=bV(s,t,n,l?l[h]:h,null,o,a),e&&e.distance<c&&(u=e,c=e.distance)}return u}(t,n,r,BH(e,l),PH(c,s),i,o)}{const s=OH(e,l),c=KV[s],u=r.direction[c]>=0;let h,d;u?(h=RH(e),d=DH(e,l)):(h=DH(e,l),d=RH(e));const f=SV(h,a,r,i,o)?$V(h,t,n,r,i,o):null;if(f){const e=f.point[c];if(u?e<=a[d+s]:e>=a[d+s+3])return f}const p=SV(d,a,r,i,o)?$V(d,t,n,r,i,o):null;return f&&p?f.distance<=p.distance?f:p:f||p||null}}const eW=new xo,tW=new JH,nW=new JH,rW=new qo,iW=new KH,oW=new KH;function aW(e,t,n,r){tV.setBuffer(e._roots[t]);const i=sW(0,e,n,r);return tV.clearBuffer(),i}function sW(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;const{float32Array:o,uint16Array:a,uint32Array:s}=tV;let l=2*e;null===i&&(n.boundingBox||n.computeBoundingBox(),iW.set(n.boundingBox.min,n.boundingBox.max,r),i=iW);if(!IH(l,a)){const a=e+8,l=s[e+6];gH(a,o,eW);if(i.intersectsBox(eW)&&sW(a,t,n,r,i))return!0;gH(l,o,eW);return!!(i.intersectsBox(eW)&&sW(l,t,n,r,i))}{const i=t.geometry,c=i.index,u=i.attributes.position,h=n.index,d=n.attributes.position,f=BH(e,s),p=PH(l,a);if(rW.copy(r).invert(),n.boundsTree){gH(e,o,oW),oW.matrix.copy(rW),oW.needsUpdate=!0;const i=n.boundsTree.shapecast({intersectsBounds:e=>oW.intersectsBox(e),intersectsTriangle:e=>{e.a.applyMatrix4(r),e.b.applyMatrix4(r),e.c.applyMatrix4(r),e.needsUpdate=!0;for(let n=f,r=p+f;n<r;n++)if(_V(nW,3*t.resolveTriangleIndex(n),c,u),nW.needsUpdate=!0,e.intersectsTriangle(nW))return!0;return!1}});return i}for(let e=f,n=p+f;e<n;e++){const n=t.resolveTriangleIndex(e);_V(tW,3*n,c,u),tW.a.applyMatrix4(rW),tW.b.applyMatrix4(rW),tW.c.applyMatrix4(rW),tW.needsUpdate=!0;for(let e=0,t=h.count;e<t;e+=3)if(_V(nW,e,h,d),nW.needsUpdate=!0,tW.intersectsTriangle(nW))return!0}}}const lW=new qo,cW=new KH,uW=new KH,hW=new vo,dW=new vo,fW=new vo,pW=new vo;function mW(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1/0;t.boundingBox||t.computeBoundingBox(),cW.set(t.boundingBox.min,t.boundingBox.max,n),cW.needsUpdate=!0;const s=e.geometry,l=s.attributes.position,c=s.index,u=t.attributes.position,h=t.index,d=eV.getPrimitive(),f=eV.getPrimitive();let p=hW,m=dW,g=null,v=null;i&&(g=fW,v=pW);let y=1/0,A=null,x=null;return lW.copy(n).invert(),uW.matrix.copy(lW),e.shapecast({boundsTraverseOrder:e=>cW.distanceToBox(e),intersectsBounds:(e,t,n)=>n<y&&n<a&&(t&&(uW.min.copy(e.min),uW.max.copy(e.max),uW.needsUpdate=!0),!0),intersectsRange:(r,i)=>{if(t.boundsTree){const s=t.boundsTree;return s.shapecast({boundsTraverseOrder:e=>uW.distanceToBox(e),intersectsBounds:(e,t,n)=>n<y&&n<a,intersectsRange:(t,a)=>{for(let b=t,_=t+a;b<_;b++){const t=s.resolveTriangleIndex(b);_V(f,3*t,h,u),f.a.applyMatrix4(n),f.b.applyMatrix4(n),f.c.applyMatrix4(n),f.needsUpdate=!0;for(let n=r,a=r+i;n<a;n++){const t=e.resolveTriangleIndex(n);_V(d,3*t,c,l),d.needsUpdate=!0;const r=d.distanceToTriangle(f,p,g);if(r<y&&(m.copy(p),v&&v.copy(g),y=r,A=n,x=b),r<o)return!0}}}})}for(let a=0,s=hH(t);a<s;a++){_V(f,3*a,h,u),f.a.applyMatrix4(n),f.b.applyMatrix4(n),f.c.applyMatrix4(n),f.needsUpdate=!0;for(let t=r,n=r+i;t<n;t++){const n=e.resolveTriangleIndex(t);_V(d,3*n,c,l),d.needsUpdate=!0;const r=d.distanceToTriangle(f,p,g);if(r<y&&(m.copy(p),v&&v.copy(g),y=r,A=t,x=a),r<o)return!0}}}}),eV.releasePrimitive(d),eV.releasePrimitive(f),y===1/0?null:(r.point?r.point.copy(m):r.point=m.clone(),r.distance=y,r.faceIndex=A,i&&(i.point?i.point.copy(v):i.point=v.clone(),i.point.applyMatrix4(lW),m.applyMatrix4(lW),i.distance=m.sub(i.point).length(),i.faceIndex=x),r)}const gW=new tV.constructor,vW=new tV.constructor,yW=new ZH((()=>new xo)),AW=new xo,xW=new xo,bW=new xo,_W=new xo;let wW=!1;function EW(e,t,n,r,i){let o,a,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,c=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,u=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,d=arguments.length>10&&void 0!==arguments[10]&&arguments[10];d?(o=vW,a=gW):(o=gW,a=vW);const f=o.float32Array,p=o.uint32Array,m=o.uint16Array,g=a.float32Array,v=a.uint32Array,y=a.uint16Array,A=2*t,x=IH(2*e,m),b=IH(A,y);let _=!1;if(b&&x)_=d?i(BH(t,v),PH(2*t,y),BH(e,p),PH(2*e,m),u,l+t,c,s+e):i(BH(e,p),PH(2*e,m),BH(t,v),PH(2*t,y),c,s+e,u,l+t);else if(b){const o=yW.getPrimitive();gH(t,g,o),o.applyMatrix4(n);const a=RH(e),h=DH(e,p);gH(a,f,AW),gH(h,f,xW);const m=o.intersectsBox(AW),v=o.intersectsBox(xW);_=m&&EW(t,a,r,n,i,l,s,u,c+1,o,!d)||v&&EW(t,h,r,n,i,l,s,u,c+1,o,!d),yW.releasePrimitive(o)}else{const o=RH(t),a=DH(t,v);gH(o,g,bW),gH(a,g,_W);const m=h.intersectsBox(bW),y=h.intersectsBox(_W);if(m&&y)_=EW(e,o,n,r,i,s,l,c,u+1,h,d)||EW(e,a,n,r,i,s,l,c,u+1,h,d);else if(m)if(x)_=EW(e,o,n,r,i,s,l,c,u+1,h,d);else{const t=yW.getPrimitive();t.copy(bW).applyMatrix4(n);const a=RH(e),h=DH(e,p);gH(a,f,AW),gH(h,f,xW);const m=t.intersectsBox(AW),g=t.intersectsBox(xW);_=m&&EW(o,a,r,n,i,l,s,u,c+1,t,!d)||g&&EW(o,h,r,n,i,l,s,u,c+1,t,!d),yW.releasePrimitive(t)}else if(y)if(x)_=EW(e,a,n,r,i,s,l,c,u+1,h,d);else{const t=yW.getPrimitive();t.copy(_W).applyMatrix4(n);const o=RH(e),h=DH(e,p);gH(o,f,AW),gH(h,f,xW);const m=t.intersectsBox(AW),g=t.intersectsBox(xW);_=m&&EW(a,o,r,n,i,l,s,u,c+1,t,!d)||g&&EW(a,h,r,n,i,l,s,u,c+1,t,!d),yW.releasePrimitive(t)}}return _}const SW=new KH,CW=new xo,MW={strategy:$Q,maxDepth:40,maxLeafTris:10,useSharedArrayBuffer:!1,setBoundingBox:!0,onProgress:null,indirect:!1,verbose:!0,range:null};class TW{static serialize(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t={cloneBuffers:!0,...t};const n=e.geometry,r=e._roots,i=e._indirectBuffer,o=n.getIndex();let a;return a=t.cloneBuffers?{roots:r.map((e=>e.slice())),index:o?o.array.slice():null,indirectBuffer:i?i.slice():null}:{roots:r,index:o?o.array:null,indirectBuffer:i},a}static deserialize(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};n={setIndex:!0,indirect:Boolean(e.indirectBuffer),...n};const{index:r,roots:i,indirectBuffer:o}=e,a=new TW(t,{...n,[lH]:!0});if(a._roots=i,a._indirectBuffer=o||null,n.setIndex){const n=t.getIndex();if(null===n){const n=new Xa(e.index,1,!1);t.setIndex(n)}else n.array!==r&&(n.array.set(r),n.needsUpdate=!0)}return a}get indirect(){return!!this._indirectBuffer}constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.isBufferGeometry)throw new Error("MeshBVH: Only BufferGeometries are supported.");if(e.index&&e.index.isInterleavedBufferAttribute)throw new Error("MeshBVH: InterleavedBufferAttribute is not supported for the index attribute.");if(t=Object.assign({...MW,[lH]:!1},t),t.useSharedArrayBuffer&&"undefined"===typeof SharedArrayBuffer)throw new Error("MeshBVH: SharedArrayBuffer is not available.");this.geometry=e,this._roots=null,this._indirectBuffer=null,t[lH]||(HH(this,t),!e.boundingBox&&t.setBoundingBox&&(e.boundingBox=this.getBoundingBox(new xo))),this.resolveTriangleIndex=t.indirect?e=>this._indirectBuffer[e]:e=>e}refit(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(this.indirect?XV:EV)(this,e)}traverse(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const n=this._roots[t],r=new Uint32Array(n),i=new Uint16Array(n);!function t(o){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const s=2*o,l=i[s+15]===aH;if(l){const t=r[o+6],c=i[s+14];e(a,l,new Float32Array(n,4*o,6),t,c)}else{const i=o+oH/4,s=r[o+6],c=r[o+7];e(a,l,new Float32Array(n,4*o,6),c)||(t(i,a+1),t(s,a+1))}}(0)}raycast(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const i=this._roots,o=this.geometry,a=[],s=t.isMaterial,l=Array.isArray(t),c=o.groups,u=s?t.side:t,h=this.indirect?YV:CV;for(let d=0,f=i.length;d<f;d++){const i=l?t[c[d].materialIndex].side:u,o=a.length;if(h(this,d,i,e,a,n,r),l){const e=c[d].materialIndex;for(let t=o,n=a.length;t<n;t++)a[t].face.materialIndex=e}}return a}raycastFirst(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ye,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0;const i=this._roots,o=this.geometry,a=t.isMaterial,s=Array.isArray(t);let l=null;const c=o.groups,u=a?t.side:t,h=this.indirect?ZV:IV;for(let d=0,f=i.length;d<f;d++){const i=h(this,d,s?t[c[d].materialIndex].side:u,e,n,r);null!=i&&(null==l||i.distance<l.distance)&&(l=i,s&&(i.face.materialIndex=c[d].materialIndex))}return l}intersectsGeometry(e,t){let n=!1;const r=this._roots,i=this.indirect?aW:FV;for(let o=0,a=r.length;o<a&&(n=i(this,o,e,t),!n);o++);return n}shapecast(e){const t=eV.getPrimitive(),n=this.indirect?qV:wV;let{boundsTraverseOrder:r,intersectsBounds:i,intersectsRange:o,intersectsTriangle:a}=e;if(o&&a){const e=o;o=(r,i,o,s,l)=>!!e(r,i,o,s,l)||n(r,i,this,a,o,s,t)}else o||(o=a?(e,r,i,o)=>n(e,r,this,a,i,o,t):(e,t,n)=>n);let s=!1,l=0;const c=this._roots;for(let u=0,h=c.length;u<h;u++){const e=c[u];if(s=aV(this,u,i,o,r,l),s)break;l+=e.byteLength}return eV.releasePrimitive(t),s}bvhcast(e,t,n){let{intersectsRanges:r,intersectsTriangles:i}=n;const o=eV.getPrimitive(),a=this.geometry.index,s=this.geometry.attributes.position,l=this.indirect?e=>{const t=this.resolveTriangleIndex(e);_V(o,3*t,a,s)}:e=>{_V(o,3*e,a,s)},c=eV.getPrimitive(),u=e.geometry.index,h=e.geometry.attributes.position,d=e.indirect?t=>{const n=e.resolveTriangleIndex(t);_V(c,3*n,u,h)}:e=>{_V(c,3*e,u,h)};if(i){const e=(e,n,r,a,s,u,h,f)=>{for(let p=r,m=r+a;p<m;p++){d(p),c.a.applyMatrix4(t),c.b.applyMatrix4(t),c.c.applyMatrix4(t),c.needsUpdate=!0;for(let t=e,r=e+n;t<r;t++)if(l(t),o.needsUpdate=!0,i(o,c,t,p,s,u,h,f))return!0}return!1};if(r){const t=r;r=function(n,r,i,o,a,s,l,c){return!!t(n,r,i,o,a,s,l,c)||e(n,r,i,o,a,s,l,c)}}else r=e}return function(e,t,n,r){if(wW)throw new Error("MeshBVH: Recursive calls to bvhcast not supported.");wW=!0;const i=e._roots,o=t._roots;let a,s=0,l=0;const c=(new qo).copy(n).invert();for(let u=0,h=i.length;u<h;u++){gW.setBuffer(i[u]),l=0;const e=yW.getPrimitive();gH(0,gW.float32Array,e),e.applyMatrix4(c);for(let t=0,i=o.length;t<i&&(vW.setBuffer(o[t]),a=EW(0,0,n,c,r,s,l,0,0,e),vW.clearBuffer(),l+=o[t].length,!a);t++);if(yW.releasePrimitive(e),gW.clearBuffer(),s+=i[u].length,a)break}return wW=!1,a}(this,e,t,r)}intersectsBox(e,t){return SW.set(e.min,e.max,t),SW.needsUpdate=!0,this.shapecast({intersectsBounds:e=>SW.intersectsBox(e),intersectsTriangle:e=>SW.intersectsTriangle(e)})}intersectsSphere(e){return this.shapecast({intersectsBounds:t=>e.intersectsBox(t),intersectsTriangle:t=>t.intersectsSphere(e)})}closestPointToGeometry(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1/0;return(this.indirect?mW:WV)(this,e,t,n,r,i,o)}closestPointToPoint(e){return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1/0;const o=r*r,a=i*i;let s=1/0,l=null;if(e.shapecast({boundsTraverseOrder:e=>(lV.copy(t).clamp(e.min,e.max),lV.distanceToSquared(t)),intersectsBounds:(e,t,n)=>n<s&&n<a,intersectsTriangle:(e,n)=>{e.closestPointToPoint(t,lV);const r=t.distanceToSquared(lV);return r<s&&(cV.copy(lV),s=r,l=n),r<o}}),s===1/0)return null;const c=Math.sqrt(s);return n.point?n.point.copy(cV):n.point=cV.clone(),n.distance=c,n.faceIndex=l,n}(this,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0)}getBoundingBox(e){e.makeEmpty();return this._roots.forEach((t=>{gH(0,new Float32Array(t),CW),e.union(CW)})),e}}parseInt(ze);const IW=new Wo,BW=new vo,PW=new qo,RW=Is.prototype.raycast,DW=id.prototype.raycast,OW=new vo,kW=new Is,LW=[];function FW(e,t){this.isBatchedMesh?zW.call(this,e,t):UW.call(this,e,t)}function zW(e,t){if(this.boundsTrees){const n=this.boundsTrees,r=this._drawInfo,i=this._drawRanges,o=this.matrixWorld;kW.material=this.material,kW.geometry=this.geometry;const a=kW.geometry.boundsTree,s=kW.geometry.drawRange;null===kW.geometry.boundingSphere&&(kW.geometry.boundingSphere=new zo);for(let l=0,c=r.length;l<c;l++){if(!this.getVisibleAt(l))continue;const a=r[l].geometryIndex;if(kW.geometry.boundsTree=n[a],this.getMatrixAt(l,kW.matrixWorld).premultiply(o),!kW.geometry.boundsTree){this.getBoundingBoxAt(a,kW.geometry.boundingBox),this.getBoundingSphereAt(a,kW.geometry.boundingSphere);const e=i[a];kW.geometry.setDrawRange(e.start,e.count)}kW.raycast(e,LW);for(let e=0,n=LW.length;e<n;e++){const n=LW[e];n.object=this,n.batchId=l,t.push(n)}LW.length=0}kW.geometry.boundsTree=a,kW.geometry.drawRange=s,kW.material=null,kW.geometry=null}else DW.call(this,e,t)}function UW(e,t){if(this.geometry.boundsTree){if(void 0===this.material)return;PW.copy(this.matrixWorld).invert(),IW.copy(e.ray).applyMatrix4(PW),OW.setFromMatrixScale(this.matrixWorld),BW.copy(IW.direction).multiply(OW);const n=BW.length(),r=e.near/n,i=e.far/n,o=this.geometry.boundsTree;if(!0===e.firstHitOnly){const n=cH(o.raycastFirst(IW,this.material,r,i),this,e);n&&t.push(n)}else{const n=o.raycast(IW,this.material,r,i);for(let r=0,i=n.length;r<i;r++){const i=cH(n[r],this,e);i&&t.push(i)}}}else RW.call(this,e,t)}function NW(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.boundsTree=new TW(this,e),this.boundsTree}function jW(){this.boundsTree=null}const GW=e=>e.isMesh;function QW(e,t){t={strategy:tH,verbose:!1,setBoundingBox:!0,maxDepth:40,maxLeafTris:10,indirect:!1,...t},l.useEffect((()=>{if(e.current){e.current.raycast=FW;const n=e.current.geometry;return n.computeBoundsTree=NW,n.disposeBoundsTree=jW,n.computeBoundsTree(t),()=>{n.boundsTree&&n.disposeBoundsTree()}}}),[e,JSON.stringify(t)])}const HW=l.forwardRef(((e,t)=>{let{enabled:n=!0,firstHitOnly:r=!1,children:i,strategy:o=tH,verbose:a=!1,setBoundingBox:s=!0,maxDepth:c=40,maxLeafTris:u=10,indirect:h=!1,...d}=e;const f=l.useRef(null),p=cy((e=>e.raycaster));return l.useImperativeHandle(t,(()=>f.current),[]),l.useEffect((()=>{if(n){const e={strategy:o,verbose:a,setBoundingBox:s,maxDepth:c,maxLeafTris:u,indirect:h},t=f.current;return p.firstHitOnly=r,t.traverse((t=>{GW(t)&&!t.geometry.boundsTree&&t.raycast===Is.prototype.raycast&&(t.raycast=FW,t.geometry.computeBoundsTree=NW,t.geometry.disposeBoundsTree=jW,t.geometry.computeBoundsTree(e))})),()=>{delete p.firstHitOnly,t.traverse((e=>{GW(e)&&e.geometry.boundsTree&&(e.geometry.disposeBoundsTree(),e.raycast=Is.prototype.raycast)}))}}}),[]),l.createElement("group",tC({ref:f},d),i)}));function VW(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];const r=l.useRef([]);return r.current=t.map((e=>l.useContext(e))),l.useMemo((()=>e=>{let{children:n}=e;return t.reduceRight(((e,t,n)=>l.createElement(t.Provider,{value:r.current[n],children:e})),n)}),[])}function WW(e,t){const n=l.useRef(),[r]=l.useState((()=>t?t instanceof xa?{current:t}:t:n)),[i]=l.useState((()=>new Km(void 0)));l.useLayoutEffect((()=>{t&&(r.current=t instanceof xa?t:t.current),i._root=r.current}));const o=l.useRef({}),a=l.useMemo((()=>{const t={};return e.forEach((e=>Object.defineProperty(t,e.name,{enumerable:!0,get(){if(r.current)return o.current[e.name]||(o.current[e.name]=i.clipAction(e,r.current))},configurable:!0}))),{ref:r,clips:e,actions:t,names:e.map((e=>e.name)),mixer:i}}),[e]);return uy(((e,t)=>i.update(t))),l.useEffect((()=>{const e=r.current;return()=>{o.current={},i.stopAllAction(),Object.values(a.actions).forEach((t=>{e&&i.uncacheAction(t,e)}))}}),[e]),a}function qW(e){const t=l.useRef(null),n=l.useRef(!1),r=l.useRef(!1),i=l.useRef(e);return l.useLayoutEffect((()=>{i.current=e}),[e]),l.useEffect((()=>{const e=t.current;if(e){const t=$v((()=>(n.current=!1,!0))),o=e.onBeforeRender;e.onBeforeRender=()=>n.current=!0;const a=ey((()=>(n.current!==r.current&&(null==i.current||i.current(r.current=n.current)),!0)));return()=>{e.onBeforeRender=o,t(),a()}}}),[]),t}const XW="\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n  vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n  #ifdef BOX_PROJECTED_ENV_MAP\n    vWorldPosition = worldPosition.xyz;\n  #endif\n#endif\n",YW="\n#ifdef BOX_PROJECTED_ENV_MAP\n  uniform vec3 envMapSize;\n  uniform vec3 envMapPosition;\n  varying vec3 vWorldPosition;\n    \n  vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {\n    vec3 nDir = normalize( v );\n    vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;\n    vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;\n    vec3 rbminmax;\n    rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;\n    rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;\n    rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;\n    float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );\n    vec3 boxIntersection = vWorldPosition + nDir * correction;    \n    return boxIntersection - cubePos;\n  }\n#endif\n",JW="\n#ifdef BOX_PROJECTED_ENV_MAP\n  worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );\n#endif\n",KW="\n#ifdef BOX_PROJECTED_ENV_MAP\n  reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );\n#endif\n";function ZW(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new vo,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new vo;const[n]=l.useState((()=>({position:new vo,size:new vo})));Ay(n,{position:e,size:t});const r=l.useRef(null),i=l.useMemo((()=>({ref:r,onBeforeCompile:e=>function(e,t,n){e.defines.BOX_PROJECTED_ENV_MAP=!0,e.uniforms.envMapPosition={value:t},e.uniforms.envMapSize={value:n},e.vertexShader=`\n  varying vec3 vWorldPosition;\n  ${e.vertexShader.replace("#include <worldpos_vertex>",XW)}`,e.fragmentShader=`\n    ${YW}\n    ${e.fragmentShader.replace("#include <envmap_physical_pars_fragment>",nl.envmap_physical_pars_fragment).replace("vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );",`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n         ${JW}\n         `).replace("reflectVec = inverseTransformDirection( reflectVec, viewMatrix );",`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n         ${KW}\n        `)}`}(e,n.position,n.size),customProgramCacheKey:()=>JSON.stringify(n.position.toArray())+JSON.stringify(n.size.toArray())})),[...n.position.toArray(),...n.size.toArray()]);return l.useLayoutEffect((()=>{r.current.needsUpdate=!0}),[n]),i}const $W=new xo,eq=new vo,tq=e=>{let{anchor:t,...n}=e;const r=l.useRef(null),i=l.useRef(null);return l.useEffect((()=>{var e;null!=(e=r.current)&&null!=(e=e.parent)&&e.parent&&(i.current=r.current.parent,r.current.parent.parent.add(r.current))}),[]),uy((()=>{i.current&&($W.setFromObject(i.current),$W.getSize(eq),r.current.position.set(i.current.position.x+eq.x*(Array.isArray(t)?t[0]:t.x)/2,i.current.position.y+eq.y*(Array.isArray(t)?t[1]:t.y)/2,i.current.position.z+eq.z*(Array.isArray(t)?t[2]:t.z)/2))})),l.createElement("group",tC({ref:r},n))};const nq=e=>Math.sqrt(1-Math.pow(e-1,2));class rq{constructor(){let{size:e=256,maxAge:t=750,radius:n=.3,intensity:r=.2,interpolate:i=0,smoothing:o=0,minForce:a=.3,blend:s="screen",ease:l=nq}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.size=e,this.maxAge=t,this.radius=n,this.intensity=r,this.ease=l,this.interpolate=i,this.smoothing=o,this.minForce=a,this.blend=s,this.trail=[],this.force=0,this.initTexture()}initTexture(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=this.size;const e=this.canvas.getContext("2d");if(null===e)throw new Error("2D not available");this.ctx=e,this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height),this.texture=new so(this.canvas),this.canvas.id="touchTexture",this.canvas.style.width=this.canvas.style.height=`${this.canvas.width}px`}update(e){this.clear(),this.trail.forEach(((t,n)=>{t.age+=1e3*e,t.age>this.maxAge&&this.trail.splice(n,1)})),this.trail.length||(this.force=0),this.trail.forEach((e=>{this.drawTouch(e)})),this.texture.needsUpdate=!0}clear(){this.ctx.globalCompositeOperation="source-over",this.ctx.fillStyle="black",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height)}addTouch(e){const t=this.trail[this.trail.length-1];if(t){const n=t.x-e.x,r=t.y-e.y,i=n*n+r*r,o=Math.max(this.minForce,Math.min(1e4*i,1));if(this.force=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9;return t*n+e*(1-n)}(o,this.force,this.smoothing),this.interpolate){const e=Math.ceil(i/Math.pow(.5*this.radius/this.interpolate,2));if(e>1)for(let i=1;i<e;i++)this.trail.push({x:t.x-n/e*i,y:t.y-r/e*i,age:0,force:o})}}this.trail.push({x:e.x,y:e.y,age:0,force:this.force})}drawTouch(e){const t={x:e.x*this.size,y:(1-e.y)*this.size};let n=1;n=e.age<.3*this.maxAge?this.ease(e.age/(.3*this.maxAge)):this.ease(1-(e.age-.3*this.maxAge)/(.7*this.maxAge)),n*=e.force,this.ctx.globalCompositeOperation=this.blend;const r=this.size*this.radius*n,i=this.ctx.createRadialGradient(t.x,t.y,Math.max(0,.25*r),t.x,t.y,Math.max(0,r));i.addColorStop(0,`rgba(255, 255, 255, ${this.intensity})`),i.addColorStop(1,"rgba(0, 0, 0, 0.0)"),this.ctx.beginPath(),this.ctx.fillStyle=i,this.ctx.arc(t.x,t.y,Math.max(0,r),0,2*Math.PI),this.ctx.fill()}}function iq(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{size:t,maxAge:n,radius:r,intensity:i,interpolate:o,smoothing:a,minForce:s,blend:c,ease:u}=e,h=(0,l.useMemo)((()=>new rq(e)),[t,n,r,i,o,a,s,c,u]);uy(((e,t)=>{h.update(t)}));const d=(0,l.useCallback)((e=>h.addTouch(e.uv)),[h]);return[h.texture,d]}const oq=e=>{let{children:t,...n}=e;const r=iq(n);return l.createElement(l.Fragment,null,null==t?void 0:t(r))},aq=l.forwardRef((function(e,t){let{children:n,disable:r,disableX:i,disableY:o,disableZ:a,left:s,right:c,top:u,bottom:h,front:d,back:f,onCentered:p,precise:m=!0,cacheKey:g=0,...v}=e;const y=l.useRef(null),A=l.useRef(null),x=l.useRef(null);return l.useLayoutEffect((()=>{A.current.matrixWorld.identity();const e=(new xo).setFromObject(x.current,m),t=new vo,n=new zo,l=e.max.x-e.min.x,g=e.max.y-e.min.y,v=e.max.z-e.min.z;e.getCenter(t),e.getBoundingSphere(n);const b=u?g/2:h?-g/2:0,_=s?-l/2:c?l/2:0,w=d?v/2:f?-v/2:0;A.current.position.set(r||i?0:-t.x+_,r||o?0:-t.y+b,r||a?0:-t.z+w),"undefined"!==typeof p&&p({parent:y.current.parent,container:y.current,width:l,height:g,depth:v,boundingBox:e,boundingSphere:n,center:t,verticalAlignment:b,horizontalAlignment:_,depthAlignment:w})}),[g,p,u,s,d,r,i,o,a,m,c,h,f]),l.useImperativeHandle(t,(()=>y.current),[]),l.createElement("group",tC({ref:y},v),l.createElement("group",{ref:A},l.createElement("group",{ref:x},n)))})),sq=l.forwardRef(((e,t)=>{let{font:n,color:r="#cbcbcb",bevelSize:i=.04,debug:o=!1,children:a,...s}=e;const[c,u]=l.useState(0),h=l.useCallback((function(){return u(c+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1))}),[c]),d=l.useCallback((function(){return u(c-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:1))}),[c]),f=l.useMemo((()=>({incr:h,decr:d})),[h,d]);return l.useImperativeHandle(t,(()=>f),[f]),l.createElement("group",s,l.createElement(l.Suspense,{fallback:null},l.createElement(aq,{top:!0,cacheKey:JSON.stringify({counter:c,font:n})},l.createElement(qk,{bevelEnabled:!0,bevelSize:i,font:n},o?l.createElement("meshNormalMaterial",{wireframe:!0}):l.createElement("meshStandardMaterial",{color:r}),c))),a)}));var lq=n(5173),cq=n.n(lq);function uq(e){return hq(e.children,e.components)}function hq(e,t,n){if(n=n||[],!t[0])return e(n);function r(r){return hq(e,t.slice(1),n.concat([r]))}return"function"===typeof t[0]?t[0]({results:n,render:r}):(0,l.cloneElement)(t[0],{children:r})}uq.propTypes={children:cq().func.isRequired,components:cq().arrayOf(cq().oneOfType([cq().element,cq().func])).isRequired};const dq=(e,t)=>{"updateRanges"in e?e.updateRanges[0]=t:e.updateRange=t},fq=3e3,pq=3001;const mq=new qo,gq=new qo,vq=[],yq=new Is;class Aq extends ku{constructor(){super(),this.color=new La("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return null==(e=this.instance.current)?void 0:e.geometry}raycast(e,t){const n=this.instance.current;if(!n)return;if(!n.geometry||!n.material)return;yq.geometry=n.geometry;const r=n.matrixWorld,i=n.userData.instances.indexOf(this.instanceKey);if(!(-1===i||i>n.count)){n.getMatrixAt(i,mq),gq.multiplyMatrices(r,mq),yq.matrixWorld=gq,n.material instanceof Ua?yq.material.side=n.material.side:yq.material.side=n.material[0].side,yq.raycast(e,vq);for(let e=0,n=vq.length;e<n;e++){const n=vq[e];n.instanceId=i,n.object=this,t.push(n)}vq.length=0}}}const xq=l.createContext(null),bq=new qo,_q=new qo,wq=new qo,Eq=new vo,Sq=new go,Cq=new vo,Mq=l.forwardRef(((e,t)=>{let{context:n,children:r,...i}=e;l.useMemo((()=>hv({PositionMesh:Aq})),[]);const o=l.useRef();l.useImperativeHandle(t,(()=>o.current),[]);const{subscribe:a,getParent:s}=l.useContext(n||xq);return l.useLayoutEffect((()=>a(o)),[]),l.createElement("positionMesh",tC({instance:s(),instanceKey:o,ref:o},i),r)})),Tq=l.forwardRef(((e,t)=>{let{context:n,children:r,range:i,limit:o=1e3,frames:a=1/0,...s}=e;const[{localContext:c,instance:u}]=l.useState((()=>{const e=l.createContext(null);return{localContext:e,instance:l.forwardRef(((t,n)=>l.createElement(Mq,tC({context:e},t,{ref:n}))))}})),h=l.useRef(null);l.useImperativeHandle(t,(()=>h.current),[]);const[d,f]=l.useState([]),[[p,m]]=l.useState((()=>{const e=new Float32Array(16*o);for(let t=0;t<o;t++)wq.identity().toArray(e,16*t);return[e,new Float32Array([...new Array(3*o)].map((()=>1)))]}));l.useEffect((()=>{h.current.instanceMatrix.needsUpdate=!0}));let g=0,v=0;const y=l.useRef([]);l.useLayoutEffect((()=>{y.current=Object.entries(h.current.geometry.attributes).filter((e=>{let[t,n]=e;return n.isInstancedBufferAttribute}))})),uy((()=>{if(a===1/0||g<a){h.current.updateMatrix(),h.current.updateMatrixWorld(),bq.copy(h.current.matrixWorld).invert(),v=Math.min(o,void 0!==i?i:o,d.length),h.current.count=v,dq(h.current.instanceMatrix,{offset:0,count:16*v}),dq(h.current.instanceColor,{offset:0,count:3*v});for(let e=0;e<d.length;e++){const t=d[e].current;t.matrixWorld.decompose(Eq,Sq,Cq),_q.compose(Eq,Sq,Cq).premultiply(bq),_q.toArray(p,16*e),h.current.instanceMatrix.needsUpdate=!0,t.color.toArray(m,3*e),h.current.instanceColor.needsUpdate=!0}g++}}));const A=l.useMemo((()=>({getParent:()=>h,subscribe:e=>(f((t=>[...t,e])),()=>f((t=>t.filter((t=>t.current!==e.current)))))})),[]);return l.createElement("instancedMesh",tC({userData:{instances:d,limit:o,frames:a},matrixAutoUpdate:!1,ref:h,args:[null,null,0],raycast:()=>null},s),l.createElement("instancedBufferAttribute",{attach:"instanceMatrix",count:p.length/16,array:p,itemSize:16,usage:pi}),l.createElement("instancedBufferAttribute",{attach:"instanceColor",count:m.length/3,array:m,itemSize:3,usage:pi}),function(e){return"function"===typeof e}(r)?l.createElement(c.Provider,{value:A},r(u)):n?l.createElement(n.Provider,{value:A},r):l.createElement(xq.Provider,{value:A},r))})),Iq=l.forwardRef((function(e,t){let{meshes:n,children:r,...i}=e;const o=Array.isArray(n);if(!o)for(const a of Object.keys(n))n[a].isMesh||delete n[a];return l.createElement("group",{ref:t},l.createElement(uq,{components:(o?n:Object.values(n)).map((e=>{let{geometry:t,material:n}=e;return l.createElement(Tq,tC({key:t.uuid,geometry:t,material:n},i))}))},(e=>o?r(...e):r(Object.keys(n).filter((e=>n[e].isMesh)).reduce(((t,n,r)=>({...t,[n]:e[r]})),{})))))}));function Bq(){const e=l.createContext(null);return[l.forwardRef(((t,n)=>l.createElement(Tq,tC({ref:n,context:e},t)))),l.forwardRef(((t,n)=>l.createElement(Mq,tC({ref:n,context:e},t))))]}const Pq=l.forwardRef(((e,t)=>{let{name:n,defaultValue:r,normalized:i,usage:o=pi}=e;const a=l.useRef(null);l.useImperativeHandle(t,(()=>a.current),[]),l.useLayoutEffect((()=>{const e=a.current.__r3f.parent;e.geometry.attributes[n]=a.current;const t=Array.isArray(r)?r:[r],i=Array.from({length:e.userData.limit},(()=>t)).flat();return a.current.array=new Float32Array(i),a.current.itemSize=t.length,a.current.count=i.length/a.current.itemSize,()=>{delete e.geometry.attributes[n]}}),[n]);let s=0;return uy((()=>{const e=a.current.__r3f.parent;if(e.userData.frames===1/0||s<e.userData.frames){for(let t=0;t<e.userData.instances.length;t++){const r=e.userData.instances[t].current[n];void 0!==r&&(a.current.set(Array.isArray(r)?r:"function"===typeof r.toArray?r.toArray():[r],t*a.current.itemSize),a.current.needsUpdate=!0)}s++}})),l.createElement("instancedBufferAttribute",{ref:a,usage:o,normalized:i})})),Rq=l.createContext(null);function Dq(){return l.useContext(Rq)}const Oq=l.forwardRef(((e,t)=>{let{startFrame:n,endFrame:r,fps:i,frameName:o,textureDataURL:a,textureImageURL:s,loop:c,numberOfFrames:u,autoPlay:h,animationNames:d,onStart:f,onEnd:p,onLoopEnd:m,onFrame:g,play:v,pause:y,flipX:A,alphaTest:x,children:b,asSprite:_,offset:w,playBackwards:E,resetOnEnd:S,maxItems:C,instanceItems:M,spriteDataset:T,...I}=e;var B;const P=l.useRef(),R=l.useRef(null),D=l.useRef(),O=l.useRef(),k=l.useRef(window.performance.now()),L=l.useRef(n||0),F=l.useRef(o||""),z=1e3/(i||30),[U,N]=l.useState(new so),j=l.useRef(0),[G,Q]=l.useState([1,1,1]),H=A?-1:1,[V,W]=l.useState(null===_||void 0===_||_),q=l.useRef(y),X=l.useRef(w),Y=l.useRef(!1),J=l.useRef([]),{spriteObj:K,loadJsonAndTexture:Z}=MQ(null,null,d,u);function $(){}const ee=l.useMemo((()=>({current:X.current,offset:X.current,imageUrl:s,reset:$,hasEnded:!1,ref:t})),[s,T]);l.useImperativeHandle(t,(()=>P.current),[]),l.useLayoutEffect((()=>{X.current=w}),[w]);const te=(e,t)=>{const n=t/e;return O.current&&O.current.scale.set(1,n,1),[1,n,1]};l.useEffect((()=>{var e;T?ne(null==T||null==(e=T.spriteTexture)?void 0:e.clone(),T.spriteData):Z(s,a)}),[T]),l.useEffect((()=>{var e;K&&ne(null==K||null==(e=K.spriteTexture)?void 0:e.clone(),null==K?void 0:K.spriteData)}),[K]),l.useEffect((()=>{W(null===_||void 0===_||_)}),[_]),l.useEffect((()=>{ee.hasEnded=!1,R.current&&!0===E?L.current=R.current.frames.length-1:L.current=0}),[E]),l.useLayoutEffect((()=>{re()}),[U,A]),l.useEffect((()=>{h&&(q.current=!1)}),[h]),l.useLayoutEffect((()=>{if(F.current!==o&&o&&(L.current=0,F.current=o,ee.hasEnded=!1,R.current)){const{w:e,h:t}=oe(R.current.frames).sourceSize,n=te(e,t);Q(n)}}),[o]);const ne=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null===t){if(u){const n=e.image.width,r=e.image.height;j.current=u,E&&(L.current=u-1),R.current={frames:[],meta:{version:"1.0",size:{w:n,h:r},scale:"1"}},R.current.frames=t}}else{R.current=t,j.current=R.current.frames.length,E&&(L.current=j.current-1);const{w:n,h:r}=oe(R.current.frames).sourceSize,i=te(n,r);Q(i),D.current&&(D.current.map=e)}if(M)for(var n=0;n<M.length;n++){const e=Object.keys(R.current.frames),t=e[Math.floor(Math.random()*e.length)];J.current.push({key:n,frames:R.current.frames,selectedFrame:t,offset:{x:0,y:0}})}N(e)},re=()=>{if(!R.current)return;const{meta:{size:e},frames:t}=R.current,{w:n,h:r}=Array.isArray(t)?t[0].sourceSize:o&&t[o]?t[o][0].sourceSize:{w:0,h:0};D.current.map.wrapS=D.current.map.wrapT=Kt,D.current.map.center.set(0,0),D.current.map.repeat.set(1*H/(e.w/n),1/(e.h/r));const i=1/((e.h-1)/r);D.current.map.offset.x=0,D.current.map.offset.y=1-i,f&&f({currentFrameName:o,currentFrame:L.current})},ie=(e,t,n,r)=>{var i=void 0===w?ee.current:w;const o=L.current;let a=0,s=0;te(e,t);const l=Math.round((n.w-1)/e),c=Math.round((n.h-1)/t);if(!r[o])return;const{frame:{x:u,y:h},sourceSize:{w:d,h:f}}=r[o],p=1/l,m=1/c;if(a=H>0?p*(u/d):p*(u/d)-D.current.map.repeat.x,s=Math.abs(1-m)-m*(h/f),D.current.map.offset.x=a,D.current.map.offset.y=s,void 0!==i&&null!==i){let e=Math.floor(i*r.length);e=Math.max(0,Math.min(e,r.length-1)),isNaN(e)&&(e=0),L.current=e}else E?L.current-=1:L.current+=1};uy(((e,t)=>{var i,a;null!=(i=R.current)&&i.frames&&null!=(a=D.current)&&a.map&&(q.current||ee.hasEnded||!h&&!v||((()=>{const e=window.performance.now(),t=e-k.current,{meta:{size:i},frames:a}=R.current,{w:s,h:l}=oe(a).sourceSize,u=Array.isArray(a)?a:o?a[o]:[],h=r||u.length-1;var d=void 0===w?ee.current:w,g=E?L.current<0:L.current>h,v=E?L.current===h:0===L.current,y=E?L.current<0:L.current>=h;if(g){if(L.current=c&&null!==n&&void 0!==n?n:0,E&&(L.current=h),c?null==m||m({currentFrameName:o,currentFrame:L.current}):(null==p||p({currentFrameName:o,currentFrame:L.current}),ee.hasEnded=!S,S&&(q.current=!0)),!c)return}else v&&(null==f||f({currentFrameName:o,currentFrame:L.current}));void 0!==d&&y?!1===Y.current&&(null==p||p({currentFrameName:o,currentFrame:L.current}),Y.current=!0):Y.current=!1,t<=z||(k.current=e-t%z,ie(s,l,i,u))})(),g&&g({currentFrameName:F.current,currentFrame:L.current})))}));const oe=e=>{if(Array.isArray(e))return e[0];if("object"===typeof e&&null!==e){const t=Object.keys(e);return o?e[o][0]:e[t[0]][0]}return{w:0,h:0}};return l.createElement("group",tC({},I,{ref:P,scale:function(e,t){let n=[];"number"===typeof t?n=[t,t,t]:Array.isArray(t)?n=t:t instanceof vo&&(n=[t.x,t.y,t.z]);const r=e.map(((e,t)=>e*n[t]));return r}(null!==G&&void 0!==G?G:[1,1,1],null!==(B=I.scale)&&void 0!==B?B:1)}),l.createElement(Rq.Provider,{value:ee},l.createElement(l.Suspense,{fallback:null},V&&l.createElement("sprite",{ref:O,scale:1},l.createElement("spriteMaterial",{premultipliedAlpha:!1,toneMapped:!1,ref:D,map:U,transparent:!0,alphaTest:null!==x&&void 0!==x?x:0})),!V&&l.createElement(Tq,{limit:null!==C&&void 0!==C?C:1},l.createElement("planeGeometry",{args:[1,1]}),l.createElement("meshBasicMaterial",{premultipliedAlpha:!1,toneMapped:!1,side:Ke,ref:D,map:U,transparent:!0,alphaTest:null!==x&&void 0!==x?x:0}),(null!==M&&void 0!==M?M:[0]).map(((e,t)=>l.createElement(Mq,{key:t,ref:1===(null==M?void 0:M.length)?O:null,position:e,scale:1}))))),b))}));var kq=Object.defineProperty,Lq=(e,t,n)=>(((e,t,n)=>{t in e?kq(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const Fq=1024,zq=(e,t,n,r,i,o)=>{const a=e.image,{data:s}=a,l=4096*o;s[4*t+l+0]=n,s[4*t+l+1]=r,s[4*t+l+2]=i,s[4*t+l+3]=1};class Uq{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;Lq(this,"curveArray"),Lq(this,"curveLengthArray"),Lq(this,"object3D"),Lq(this,"splineTexure"),Lq(this,"uniforms");const n=e.clone(),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=new Float32Array(4096*e*4),n=new Mh(t,Fq,4*e,Sn,vn);return n.wrapS=Kt,n.wrapT=Kt,n.magFilter=en,n.needsUpdate=!0,n}(t),i={spineTexture:{value:r},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}};n.traverse((e=>{(e instanceof Is||e instanceof Uh)&&(e.material=e.material.clone(),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e.__ok||(e.__ok=!0,e.onBeforeCompile=e=>{if(e.__modified)return;e.__modified=!0,Object.assign(e.uniforms,t);const r=`\n\t\tuniform sampler2D spineTexture;\n\t\tuniform float pathOffset;\n\t\tuniform float pathSegment;\n\t\tuniform float spineOffset;\n\t\tuniform float spineLength;\n\t\tuniform int flow;\n\n\t\tfloat textureLayers = ${4*n}.;\n\t\tfloat textureStacks = 1.;\n\n\t\t${e.vertexShader}\n\t\t`.replace("#include <beginnormal_vertex>","").replace("#include <defaultnormal_vertex>","").replace("#include <begin_vertex>","").replace(/void\s*main\s*\(\)\s*\{/,"\n        void main() {\n        #include <beginnormal_vertex>\n\n        vec4 worldPos = modelMatrix * vec4(position, 1.);\n\n        bool bend = flow > 0;\n        float xWeight = bend ? 0. : 1.;\n\n        #ifdef USE_INSTANCING\n        float pathOffsetFromInstanceMatrix = instanceMatrix[3][2];\n        float spineLengthFromInstanceMatrix = instanceMatrix[3][0];\n        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;\n        float mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;\n        #else\n        float spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;\n        float mt = (spinePortion * pathSegment + pathOffset)*textureStacks;\n        #endif\n\n        mt = mod(mt, textureStacks);\n        float rowOffset = floor(mt);\n\n        #ifdef USE_INSTANCING\n        rowOffset += instanceMatrix[3][1] * 4.;\n        #endif\n\n        vec3 spinePos = texture2D(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;\n        vec3 a =        texture2D(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;\n        vec3 b =        texture2D(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;\n        vec3 c =        texture2D(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;\n        mat3 basis = mat3(a, b, c);\n\n        vec3 transformed = basis\n          * vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)\n          + spinePos;\n\n        vec3 transformedNormal = normalMatrix * (basis * objectNormal);\n\t\t\t").replace("#include <project_vertex>","vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;");e.vertexShader=r})}(e.material,i,t))})),this.curveArray=new Array(t),this.curveLengthArray=new Array(t),this.object3D=n,this.splineTexure=r,this.uniforms=i}updateCurve(e,t){if(e>=this.curveArray.length)throw Error("Index out of range for Flow");const n=t.getLength();this.uniforms.spineLength.value=n,this.curveLengthArray[e]=n,this.curveArray[e]=t,function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=Math.floor(1024);t.arcLengthDivisions=r/2,t.updateArcLengths();const i=t.getSpacedPoints(r),o=t.computeFrenetFrames(r,!0);for(let a=0;a<r;a++){const t=Math.floor(a/Fq),r=a%Fq;let s=i[a];zq(e,r,s.x,s.y,s.z,0+t+4*n),s=o.tangents[a],zq(e,r,s.x,s.y,s.z,1+t+4*n),s=o.normals[a],zq(e,r,s.x,s.y,s.z,2+t+4*n),s=o.binormals[a],zq(e,r,s.x,s.y,s.z,3+t+4*n)}e.needsUpdate=!0}(this.splineTexure,t,e)}moveAlongCurve(e){this.uniforms.pathOffset.value+=e}}new qo;const Nq=l.forwardRef(((e,t)=>{let{children:n,curve:r}=e;const[i]=l.useState((()=>new qu)),[o,a]=l.useState(),s=l.useRef();return l.useEffect((()=>{s.current=new Uq(i.children[0]),a(s.current.object3D)}),[n]),l.useEffect((()=>{var e;r&&(null==(e=s.current)||e.updateCurve(0,r))}),[r]),l.useImperativeHandle(t,(()=>({moveAlongCurve:e=>{var t;null==(t=s.current)||t.moveAlongCurve(e)}}))),l.createElement(l.Fragment,null,Cy(n,i),o&&l.createElement("primitive",{object:o}))}));class jq extends op{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.setValues(e),this._time={value:0},this._distort={value:.4},this._radius={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.radius=this._radius,e.uniforms.distort=this._distort,e.vertexShader=`\n      uniform float time;\n      uniform float radius;\n      uniform float distort;\n      #define GLSLIFY 1\nvec3 mod289(vec3 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 mod289(vec4 x){return x-floor(x*(1.0/289.0))*289.0;}vec4 permute(vec4 x){return mod289(((x*34.0)+1.0)*x);}vec4 taylorInvSqrt(vec4 r){return 1.79284291400159-0.85373472095314*r;}float snoise(vec3 v){const vec2 C=vec2(1.0/6.0,1.0/3.0);const vec4 D=vec4(0.0,0.5,1.0,2.0);vec3 i=floor(v+dot(v,C.yyy));vec3 x0=v-i+dot(i,C.xxx);vec3 g=step(x0.yzx,x0.xyz);vec3 l=1.0-g;vec3 i1=min(g.xyz,l.zxy);vec3 i2=max(g.xyz,l.zxy);vec3 x1=x0-i1+C.xxx;vec3 x2=x0-i2+C.yyy;vec3 x3=x0-D.yyy;i=mod289(i);vec4 p=permute(permute(permute(i.z+vec4(0.0,i1.z,i2.z,1.0))+i.y+vec4(0.0,i1.y,i2.y,1.0))+i.x+vec4(0.0,i1.x,i2.x,1.0));float n_=0.142857142857;vec3 ns=n_*D.wyz-D.xzx;vec4 j=p-49.0*floor(p*ns.z*ns.z);vec4 x_=floor(j*ns.z);vec4 y_=floor(j-7.0*x_);vec4 x=x_*ns.x+ns.yyyy;vec4 y=y_*ns.x+ns.yyyy;vec4 h=1.0-abs(x)-abs(y);vec4 b0=vec4(x.xy,y.xy);vec4 b1=vec4(x.zw,y.zw);vec4 s0=floor(b0)*2.0+1.0;vec4 s1=floor(b1)*2.0+1.0;vec4 sh=-step(h,vec4(0.0));vec4 a0=b0.xzyw+s0.xzyw*sh.xxyy;vec4 a1=b1.xzyw+s1.xzyw*sh.zzww;vec3 p0=vec3(a0.xy,h.x);vec3 p1=vec3(a0.zw,h.y);vec3 p2=vec3(a1.xy,h.z);vec3 p3=vec3(a1.zw,h.w);vec4 norm=taylorInvSqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;vec4 m=max(0.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.0);m=m*m;return 42.0*dot(m*m,vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));}\n      ${e.vertexShader}\n    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","\n        float updateTime = time / 50.0;\n        float noise = snoise(vec3(position / 2.0 + updateTime * 5.0));\n        vec3 transformed = vec3(position * (noise * pow(distort, 2.0) + radius));\n        ")}get time(){return this._time.value}set time(e){this._time.value=e}get distort(){return this._distort.value}set distort(e){this._distort.value=e}get radius(){return this._radius.value}set radius(e){this._radius.value=e}}const Gq=l.forwardRef(((e,t)=>{let{speed:n=1,...r}=e;const[i]=l.useState((()=>new jq));return uy((e=>i&&(i.time=e.clock.getElapsedTime()*n))),l.createElement("primitive",tC({object:i,ref:t,attach:"material"},r))}));class Qq extends ip{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this.setValues(e),this._time={value:0},this._factor={value:1}}onBeforeCompile(e){e.uniforms.time=this._time,e.uniforms.factor=this._factor,e.vertexShader=`\n      uniform float time;\n      uniform float factor;\n      ${e.vertexShader}\n    `,e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","float theta = sin( time + position.y ) / 2.0 * factor;\n        float c = cos( theta );\n        float s = sin( theta );\n        mat3 m = mat3( c, 0, s, 0, 1, 0, -s, 0, c );\n        vec3 transformed = vec3( position ) * m;\n        vNormal = vNormal * m;")}get time(){return this._time.value}set time(e){this._time.value=e}get factor(){return this._factor.value}set factor(e){this._factor.value=e}}const Hq=l.forwardRef(((e,t)=>{let{speed:n=1,...r}=e;const[i]=l.useState((()=>new Qq));return uy((e=>i&&(i.time=e.clock.getElapsedTime()*n))),l.createElement("primitive",tC({object:i,ref:t,attach:"material"},r))}));class Vq extends Ls{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new zi;super({uniforms:{inputBuffer:new Zm(null),depthBuffer:new Zm(null),resolution:new Zm(new zi),texelSize:new Zm(new zi),halfTexelSize:new Zm(new zi),kernel:new Zm(0),scale:new Zm(1),cameraNear:new Zm(0),cameraFar:new Zm(1),minDepthThreshold:new Zm(0),maxDepthThreshold:new Zm(1),depthScale:new Zm(0),depthToBlurRatioBias:new Zm(.25)},fragmentShader:`#include <common>\n        #include <dithering_pars_fragment>      \n        uniform sampler2D inputBuffer;\n        uniform sampler2D depthBuffer;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          float depthFactor = 0.0;\n          \n          #ifdef USE_DEPTH\n            vec4 depth = texture2D(depthBuffer, vUv);\n            depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n            depthFactor *= depthScale;\n            depthFactor = max(0.0, min(1.0, depthFactor + 0.25));\n          #endif\n          \n          vec4 sum = texture2D(inputBuffer, mix(vUv0, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv1, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv2, vUv, depthFactor));\n          sum += texture2D(inputBuffer, mix(vUv3, vUv, depthFactor));\n          gl_FragColor = sum * 0.25 ;\n\n          #include <dithering_fragment>\n          #include <tonemapping_fragment>\n          #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n        }`,vertexShader:"uniform vec2 texelSize;\n        uniform vec2 halfTexelSize;\n        uniform float kernel;\n        uniform float scale;\n        varying vec2 vUv;\n        varying vec2 vUv0;\n        varying vec2 vUv1;\n        varying vec2 vUv2;\n        varying vec2 vUv3;\n\n        void main() {\n          vec2 uv = position.xy * 0.5 + 0.5;\n          vUv = uv;\n\n          vec2 dUv = (texelSize * vec2(kernel) + halfTexelSize) * scale;\n          vUv0 = vec2(uv.x - dUv.x, uv.y + dUv.y);\n          vUv1 = vec2(uv.x + dUv.x, uv.y + dUv.y);\n          vUv2 = vec2(uv.x + dUv.x, uv.y - dUv.y);\n          vUv3 = vec2(uv.x - dUv.x, uv.y - dUv.y);\n\n          gl_Position = vec4(position.xy, 1.0, 1.0);\n        }",blending:Ze,depthWrite:!1,depthTest:!1}),this.toneMapped=!1,this.setTexelSize(e.x,e.y),this.kernel=new Float32Array([0,1,2,2,3])}setTexelSize(e,t){this.uniforms.texelSize.value.set(e,t),this.uniforms.halfTexelSize.value.set(e,t).multiplyScalar(.5)}setResolution(e){this.uniforms.resolution.value.copy(e)}}class Wq{constructor(e){let{gl:t,resolution:n,width:r=500,height:i=500,minDepthThreshold:o=0,maxDepthThreshold:a=1,depthScale:s=0,depthToBlurRatioBias:l=.25}=e;this.renderToScreen=!1,this.renderTargetA=new uo(n,n,{minFilter:an,magFilter:an,stencilBuffer:!1,depthBuffer:!1,type:yn}),this.renderTargetB=this.renderTargetA.clone(),this.convolutionMaterial=new Vq,this.convolutionMaterial.setTexelSize(1/r,1/i),this.convolutionMaterial.setResolution(new zi(r,i)),this.scene=new qu,this.camera=new Fs,this.convolutionMaterial.uniforms.minDepthThreshold.value=o,this.convolutionMaterial.uniforms.maxDepthThreshold.value=a,this.convolutionMaterial.uniforms.depthScale.value=s,this.convolutionMaterial.uniforms.depthToBlurRatioBias.value=l,this.convolutionMaterial.defines.USE_DEPTH=s>0;const c=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),u=new Float32Array([0,0,2,0,0,2]),h=new hs;h.setAttribute("position",new Xa(c,3)),h.setAttribute("uv",new Xa(u,2)),this.screen=new Is(h,this.convolutionMaterial),this.screen.frustumCulled=!1,this.scene.add(this.screen)}render(e,t,n){const r=this.scene,i=this.camera,o=this.renderTargetA,a=this.renderTargetB;let s=this.convolutionMaterial,l=s.uniforms;l.depthBuffer.value=t.depthTexture;const c=s.kernel;let u,h,d,f=t;for(h=0,d=c.length-1;h<d;++h)u=0===(1&h)?o:a,l.kernel.value=c[h],l.inputBuffer.value=f.texture,e.setRenderTarget(u),e.render(r,i),f=u;l.kernel.value=c[h],l.inputBuffer.value=f.texture,e.setRenderTarget(this.renderToScreen?null:n),e.render(r,i)}}class qq extends ip{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};super(e),this._tDepth={value:null},this._distortionMap={value:null},this._tDiffuse={value:null},this._tDiffuseBlur={value:null},this._textureMatrix={value:null},this._hasBlur={value:!1},this._mirror={value:0},this._mixBlur={value:0},this._blurStrength={value:.5},this._minDepthThreshold={value:.9},this._maxDepthThreshold={value:1},this._depthScale={value:0},this._depthToBlurRatioBias={value:.25},this._distortion={value:1},this._mixContrast={value:1},this.setValues(e)}onBeforeCompile(e){var t;null!=(t=e.defines)&&t.USE_UV||(e.defines.USE_UV=""),e.uniforms.hasBlur=this._hasBlur,e.uniforms.tDiffuse=this._tDiffuse,e.uniforms.tDepth=this._tDepth,e.uniforms.distortionMap=this._distortionMap,e.uniforms.tDiffuseBlur=this._tDiffuseBlur,e.uniforms.textureMatrix=this._textureMatrix,e.uniforms.mirror=this._mirror,e.uniforms.mixBlur=this._mixBlur,e.uniforms.mixStrength=this._blurStrength,e.uniforms.minDepthThreshold=this._minDepthThreshold,e.uniforms.maxDepthThreshold=this._maxDepthThreshold,e.uniforms.depthScale=this._depthScale,e.uniforms.depthToBlurRatioBias=this._depthToBlurRatioBias,e.uniforms.distortion=this._distortion,e.uniforms.mixContrast=this._mixContrast,e.vertexShader=`\n        uniform mat4 textureMatrix;\n        varying vec4 my_vUv;\n      ${e.vertexShader}`,e.vertexShader=e.vertexShader.replace("#include <project_vertex>","#include <project_vertex>\n        my_vUv = textureMatrix * vec4( position, 1.0 );\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );"),e.fragmentShader=`\n        uniform sampler2D tDiffuse;\n        uniform sampler2D tDiffuseBlur;\n        uniform sampler2D tDepth;\n        uniform sampler2D distortionMap;\n        uniform float distortion;\n        uniform float cameraNear;\n\t\t\t  uniform float cameraFar;\n        uniform bool hasBlur;\n        uniform float mixBlur;\n        uniform float mirror;\n        uniform float mixStrength;\n        uniform float minDepthThreshold;\n        uniform float maxDepthThreshold;\n        uniform float mixContrast;\n        uniform float depthScale;\n        uniform float depthToBlurRatioBias;\n        varying vec4 my_vUv;\n        ${e.fragmentShader}`,e.fragmentShader=e.fragmentShader.replace("#include <emissivemap_fragment>","#include <emissivemap_fragment>\n\n      float distortionFactor = 0.0;\n      #ifdef USE_DISTORTION\n        distortionFactor = texture2D(distortionMap, vUv).r * distortion;\n      #endif\n\n      vec4 new_vUv = my_vUv;\n      new_vUv.x += distortionFactor;\n      new_vUv.y += distortionFactor;\n\n      vec4 base = texture2DProj(tDiffuse, new_vUv);\n      vec4 blur = texture2DProj(tDiffuseBlur, new_vUv);\n\n      vec4 merge = base;\n\n      #ifdef USE_NORMALMAP\n        vec2 normal_uv = vec2(0.0);\n        vec4 normalColor = texture2D(normalMap, vUv * normalScale);\n        vec3 my_normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );\n        vec3 coord = new_vUv.xyz / new_vUv.w;\n        normal_uv = coord.xy + coord.z * my_normal.xz * 0.05;\n        vec4 base_normal = texture2D(tDiffuse, normal_uv);\n        vec4 blur_normal = texture2D(tDiffuseBlur, normal_uv);\n        merge = base_normal;\n        blur = blur_normal;\n      #endif\n\n      float depthFactor = 0.0001;\n      float blurFactor = 0.0;\n\n      #ifdef USE_DEPTH\n        vec4 depth = texture2DProj(tDepth, new_vUv);\n        depthFactor = smoothstep(minDepthThreshold, maxDepthThreshold, 1.0-(depth.r * depth.a));\n        depthFactor *= depthScale;\n        depthFactor = max(0.0001, min(1.0, depthFactor));\n\n        #ifdef USE_BLUR\n          blur = blur * min(1.0, depthFactor + depthToBlurRatioBias);\n          merge = merge * min(1.0, depthFactor + 0.5);\n        #else\n          merge = merge * depthFactor;\n        #endif\n\n      #endif\n\n      float reflectorRoughnessFactor = roughness;\n      #ifdef USE_ROUGHNESSMAP\n        vec4 reflectorTexelRoughness = texture2D( roughnessMap, vUv );\n        reflectorRoughnessFactor *= reflectorTexelRoughness.g;\n      #endif\n\n      #ifdef USE_BLUR\n        blurFactor = min(1.0, mixBlur * reflectorRoughnessFactor);\n        merge = mix(merge, blur, blurFactor);\n      #endif\n\n      vec4 newMerge = vec4(0.0, 0.0, 0.0, 1.0);\n      newMerge.r = (merge.r - 0.5) * mixContrast + 0.5;\n      newMerge.g = (merge.g - 0.5) * mixContrast + 0.5;\n      newMerge.b = (merge.b - 0.5) * mixContrast + 0.5;\n\n      diffuseColor.rgb = diffuseColor.rgb * ((1.0 - min(1.0, mirror)) + newMerge.rgb * mixStrength);\n      ")}get tDiffuse(){return this._tDiffuse.value}set tDiffuse(e){this._tDiffuse.value=e}get tDepth(){return this._tDepth.value}set tDepth(e){this._tDepth.value=e}get distortionMap(){return this._distortionMap.value}set distortionMap(e){this._distortionMap.value=e}get tDiffuseBlur(){return this._tDiffuseBlur.value}set tDiffuseBlur(e){this._tDiffuseBlur.value=e}get textureMatrix(){return this._textureMatrix.value}set textureMatrix(e){this._textureMatrix.value=e}get hasBlur(){return this._hasBlur.value}set hasBlur(e){this._hasBlur.value=e}get mirror(){return this._mirror.value}set mirror(e){this._mirror.value=e}get mixBlur(){return this._mixBlur.value}set mixBlur(e){this._mixBlur.value=e}get mixStrength(){return this._blurStrength.value}set mixStrength(e){this._blurStrength.value=e}get minDepthThreshold(){return this._minDepthThreshold.value}set minDepthThreshold(e){this._minDepthThreshold.value=e}get maxDepthThreshold(){return this._maxDepthThreshold.value}set maxDepthThreshold(e){this._maxDepthThreshold.value=e}get depthScale(){return this._depthScale.value}set depthScale(e){this._depthScale.value=e}get depthToBlurRatioBias(){return this._depthToBlurRatioBias.value}set depthToBlurRatioBias(e){this._depthToBlurRatioBias.value=e}get distortion(){return this._distortion.value}set distortion(e){this._distortion.value=e}get mixContrast(){return this._mixContrast.value}set mixContrast(e){this._mixContrast.value=e}}const Xq=l.forwardRef(((e,t)=>{let{mixBlur:n=0,mixStrength:r=1,resolution:i=256,blur:o=[0,0],minDepthThreshold:a=.9,maxDepthThreshold:s=1,depthScale:c=0,depthToBlurRatioBias:u=.25,mirror:h=0,distortion:d=1,mixContrast:f=1,distortionMap:p,reflectorOffset:m=0,...g}=e;hv({MeshReflectorMaterialImpl:qq});const v=cy((e=>{let{gl:t}=e;return t})),y=cy((e=>{let{camera:t}=e;return t})),A=cy((e=>{let{scene:t}=e;return t}));o=Array.isArray(o)?o:[o,o];const x=o[0]+o[1]>0,b=l.useRef(null);l.useImperativeHandle(t,(()=>b.current),[]);const[_]=l.useState((()=>new Ys)),[w]=l.useState((()=>new vo)),[E]=l.useState((()=>new vo)),[S]=l.useState((()=>new vo)),[C]=l.useState((()=>new qo)),[M]=l.useState((()=>new vo(0,0,-1))),[T]=l.useState((()=>new lo)),[I]=l.useState((()=>new vo)),[B]=l.useState((()=>new vo)),[P]=l.useState((()=>new lo)),[R]=l.useState((()=>new qo)),[D]=l.useState((()=>new js)),O=l.useCallback((()=>{var e;const t=b.current.parent||(null==(e=b.current)?void 0:e.__r3f.parent);if(!t)return;if(E.setFromMatrixPosition(t.matrixWorld),S.setFromMatrixPosition(y.matrixWorld),C.extractRotation(t.matrixWorld),w.set(0,0,1),w.applyMatrix4(C),E.addScaledVector(w,m),I.subVectors(E,S),I.dot(w)>0)return;I.reflect(w).negate(),I.add(E),C.extractRotation(y.matrixWorld),M.set(0,0,-1),M.applyMatrix4(C),M.add(S),B.subVectors(E,M),B.reflect(w).negate(),B.add(E),D.position.copy(I),D.up.set(0,1,0),D.up.applyMatrix4(C),D.up.reflect(w),D.lookAt(B),D.far=y.far,D.updateMatrixWorld(),D.projectionMatrix.copy(y.projectionMatrix),R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(D.projectionMatrix),R.multiply(D.matrixWorldInverse),R.multiply(t.matrixWorld),_.setFromNormalAndCoplanarPoint(w,E),_.applyMatrix4(D.matrixWorldInverse),T.set(_.normal.x,_.normal.y,_.normal.z,_.constant);const n=D.projectionMatrix;P.x=(Math.sign(T.x)+n.elements[8])/n.elements[0],P.y=(Math.sign(T.y)+n.elements[9])/n.elements[5],P.z=-1,P.w=(1+n.elements[10])/n.elements[14],T.multiplyScalar(2/T.dot(P)),n.elements[2]=T.x,n.elements[6]=T.y,n.elements[10]=T.z+1,n.elements[14]=T.w}),[y,m]),[k,L,F,z]=l.useMemo((()=>{const e={minFilter:an,magFilter:an,type:yn},t=new uo(i,i,e);t.depthBuffer=!0,t.depthTexture=new Ul(i,i),t.depthTexture.format=Tn,t.depthTexture.type=pn;const l=new uo(i,i,e);return[t,l,new Wq({gl:v,resolution:i,width:o[0],height:o[1],minDepthThreshold:a,maxDepthThreshold:s,depthScale:c,depthToBlurRatioBias:u}),{mirror:h,textureMatrix:R,mixBlur:n,tDiffuse:t.texture,tDepth:t.depthTexture,tDiffuseBlur:l.texture,hasBlur:x,mixStrength:r,minDepthThreshold:a,maxDepthThreshold:s,depthScale:c,depthToBlurRatioBias:u,distortion:d,distortionMap:p,mixContrast:f,"defines-USE_BLUR":x?"":void 0,"defines-USE_DEPTH":c>0?"":void 0,"defines-USE_DISTORTION":p?"":void 0}]}),[v,o,R,i,h,x,n,r,a,s,c,u,d,p,f]);return uy((()=>{var e;const t=b.current.parent||(null==(e=b.current)?void 0:e.__r3f.parent);if(!t)return;t.visible=!1;const n=v.xr.enabled,r=v.shadowMap.autoUpdate;O(),v.xr.enabled=!1,v.shadowMap.autoUpdate=!1,v.setRenderTarget(k),v.state.buffers.depth.setMask(!0),v.autoClear||v.clear(),v.render(A,D),x&&F.render(v,k,L),v.xr.enabled=n,v.shadowMap.autoUpdate=r,t.visible=!0,v.setRenderTarget(null)})),l.createElement("meshReflectorMaterialImpl",tC({attach:"material",key:"key"+z["defines-USE_BLUR"]+z["defines-USE_DEPTH"]+z["defines-USE_DISTORTION"],ref:b},z,g))}));function Yq(e){switch(e){case 1:return Pn;case 2:return Dn;case 3:case 4:return kn}}class Jq extends Mh{constructor(){super(),this.minFilter=en,this.magFilter=en,this.generateMipmaps=!1,this.overrideItemSize=null,this._forcedType=null}updateFrom(e){const t=this.overrideItemSize,n=e.itemSize,r=e.count;if(null!==t){if(n*r%t!==0)throw new Error("VertexAttributeTexture: overrideItemSize must divide evenly into buffer length.");e.itemSize=t,e.count=r*n/t}const i=e.itemSize,o=e.count,a=e.normalized,s=e.array.constructor,l=s.BYTES_PER_ELEMENT;let c,u,h,d,f=this._forcedType,p=i;if(null===f)switch(s){case Float32Array:f=vn;break;case Uint8Array:case Uint16Array:case Uint32Array:f=gn;break;case Int8Array:case Int16Array:case Int32Array:f=mn}let m=function(e){switch(e){case 1:return"R";case 2:return"RG";case 3:case 4:return"RGBA"}throw new Error}(i);switch(f){case vn:h=1,u=function(e){switch(e){case 1:return Bn;case 2:return Rn;case 3:case 4:return Sn}}(i),a&&1===l?(d=s,m+="8",s===Uint8Array?c=hn:(c=dn,m+="_SNORM")):(d=Float32Array,m+="32F",c=vn);break;case mn:m+=8*l+"I",h=a?Math.pow(2,8*s.BYTES_PER_ELEMENT-1):1,u=Yq(i),1===l?(d=Int8Array,c=dn):2===l?(d=Int16Array,c=fn):(d=Int32Array,c=mn);break;case gn:m+=8*l+"UI",h=a?Math.pow(2,8*s.BYTES_PER_ELEMENT-1):1,u=Yq(i),1===l?(d=Uint8Array,c=hn):2===l?(d=Uint16Array,c=pn):(d=Uint32Array,c=gn)}3!==p||u!==Sn&&u!==kn||(p=4);const g=Math.ceil(Math.sqrt(o))||1,v=new d(p*g*g),y=e.normalized;e.normalized=!1;for(let A=0;A<o;A++){const t=p*A;v[t]=e.getX(A)/h,i>=2&&(v[t+1]=e.getY(A)/h),i>=3&&(v[t+2]=e.getZ(A)/h,4===p&&(v[t+3]=1)),i>=4&&(v[t+3]=e.getW(A)/h)}e.normalized=y,this.internalFormat=m,this.format=u,this.type=c,this.image.width=g,this.image.height=g,this.image.data=v,this.needsUpdate=!0,this.dispose(),e.itemSize=n,e.count=r}}class Kq extends Jq{constructor(){super(),this._forcedType=gn}}class Zq extends Jq{constructor(){super(),this._forcedType=vn}}class $q{constructor(){this.index=new Kq,this.position=new Zq,this.bvhBounds=new Mh,this.bvhContents=new Mh,this._cachedIndexAttr=null,this.index.overrideItemSize=3}updateFrom(e){const{geometry:t}=e;if(function(e,t,n){const r=e._roots;if(1!==r.length)throw new Error("MeshBVHUniformStruct: Multi-root BVHs not supported.");const i=r[0],o=new Uint16Array(i),a=new Uint32Array(i),s=new Float32Array(i),l=i.byteLength/oH,c=2*Math.ceil(Math.sqrt(l/2)),u=new Float32Array(4*c*c),h=Math.ceil(Math.sqrt(l)),d=new Uint32Array(2*h*h);for(let f=0;f<l;f++){const e=f*oH/4,t=2*e,n=e;for(let r=0;r<3;r++)u[8*f+0+r]=s[n+0+r],u[8*f+4+r]=s[n+3+r];if(IH(t,o)){const n=PH(t,o),r=BH(e,a),i=4294901760|n;d[2*f+0]=i,d[2*f+1]=r}else{const t=4*DH(e,a)/oH,n=OH(e,a);d[2*f+0]=n,d[2*f+1]=t}}t.image.data=u,t.image.width=c,t.image.height=c,t.format=Sn,t.type=vn,t.internalFormat="RGBA32F",t.minFilter=en,t.magFilter=en,t.generateMipmaps=!1,t.needsUpdate=!0,t.dispose(),n.image.data=d,n.image.width=h,n.image.height=h,n.format=Dn,n.type=gn,n.internalFormat="RG32UI",n.minFilter=en,n.magFilter=en,n.generateMipmaps=!1,n.needsUpdate=!0,n.dispose()}(e,this.bvhBounds,this.bvhContents),this.position.updateFrom(t.attributes.position),e.indirect){const n=e._indirectBuffer;if(null===this._cachedIndexAttr||this._cachedIndexAttr.count!==n.length)if(t.index)this._cachedIndexAttr=t.index.clone();else{const e=dH(uH(t));this._cachedIndexAttr=new Xa(e,1,!1)}!function(e,t,n){const r=n.array,i=e.index?e.index.array:null;for(let o=0,a=t.length;o<a;o++){const e=3*o,n=3*t[o];for(let t=0;t<3;t++)r[e+t]=i?i[n+t]:n+t}}(t,n,this._cachedIndexAttr),this.index.updateFrom(this._cachedIndexAttr)}else this.index.updateFrom(t.index)}dispose(){const{index:e,position:t,bvhBounds:n,bvhContents:r}=this;e&&e.dispose(),t&&t.dispose(),n&&n.dispose(),r&&r.dispose()}}const eX=vL({envMap:null,bounces:3,ior:2.4,correctMips:!0,aberrationStrength:.01,fresnel:0,bvh:new $q,color:new La("white"),opacity:1,resolution:new zi,viewMatrixInverse:new qo,projectionMatrixInverse:new qo},"\n  uniform mat4 viewMatrixInverse;\n\n  varying vec3 vWorldPosition;\n  varying vec3 vNormal;\n  varying mat4 vModelMatrixInverse;\n\n  #include <color_pars_vertex>\n\n  void main() {\n    #include <color_vertex>\n\n    vec4 transformedNormal = vec4(normal, 0.0);\n    vec4 transformedPosition = vec4(position, 1.0);\n    #ifdef USE_INSTANCING\n      transformedNormal = instanceMatrix * transformedNormal;\n      transformedPosition = instanceMatrix * transformedPosition;\n    #endif\n\n    #ifdef USE_INSTANCING\n      vModelMatrixInverse = inverse(modelMatrix * instanceMatrix);\n    #else\n      vModelMatrixInverse = inverse(modelMatrix);\n    #endif\n\n    vWorldPosition = (modelMatrix * transformedPosition).xyz;\n    vNormal = normalize((viewMatrixInverse * vec4(normalMatrix * transformedNormal.xyz, 0.0)).xyz);\n    gl_Position = projectionMatrix * viewMatrix * modelMatrix * transformedPosition;\n  }",`\n  #define ENVMAP_TYPE_CUBE_UV\n  precision highp isampler2D;\n  precision highp usampler2D;\n  varying vec3 vWorldPosition;\n  varying vec3 vNormal;\n  varying mat4 vModelMatrixInverse;\n\n  #include <color_pars_fragment>\n\n  #ifdef ENVMAP_TYPE_CUBEM\n    uniform samplerCube envMap;\n  #else\n    uniform sampler2D envMap;\n  #endif\n\n  uniform float bounces;\n  \nstruct BVH {\n\n\tusampler2D index;\n\tsampler2D position;\n\n\tsampler2D bvhBounds;\n\tusampler2D bvhContents;\n\n};\n\n  \n\t\n\n// A stack of uint32 indices can can store the indices for\n// a perfectly balanced tree with a depth up to 31. Lower stack\n// depth gets higher performance.\n//\n// However not all trees are balanced. Best value to set this to\n// is the trees max depth.\n#ifndef BVH_STACK_DEPTH\n#define BVH_STACK_DEPTH 60\n#endif\n\n#ifndef INFINITY\n#define INFINITY 1e20\n#endif\n\n// Utilities\nuvec4 uTexelFetch1D( usampler2D tex, uint index ) {\n\n\tuint width = uint( textureSize( tex, 0 ).x );\n\tuvec2 uv;\n\tuv.x = index % width;\n\tuv.y = index / width;\n\n\treturn texelFetch( tex, ivec2( uv ), 0 );\n\n}\n\nivec4 iTexelFetch1D( isampler2D tex, uint index ) {\n\n\tuint width = uint( textureSize( tex, 0 ).x );\n\tuvec2 uv;\n\tuv.x = index % width;\n\tuv.y = index / width;\n\n\treturn texelFetch( tex, ivec2( uv ), 0 );\n\n}\n\nvec4 texelFetch1D( sampler2D tex, uint index ) {\n\n\tuint width = uint( textureSize( tex, 0 ).x );\n\tuvec2 uv;\n\tuv.x = index % width;\n\tuv.y = index / width;\n\n\treturn texelFetch( tex, ivec2( uv ), 0 );\n\n}\n\nvec4 textureSampleBarycoord( sampler2D tex, vec3 barycoord, uvec3 faceIndices ) {\n\n\treturn\n\t\tbarycoord.x * texelFetch1D( tex, faceIndices.x ) +\n\t\tbarycoord.y * texelFetch1D( tex, faceIndices.y ) +\n\t\tbarycoord.z * texelFetch1D( tex, faceIndices.z );\n\n}\n\nvoid ndcToCameraRay(\n\tvec2 coord, mat4 cameraWorld, mat4 invProjectionMatrix,\n\tout vec3 rayOrigin, out vec3 rayDirection\n) {\n\n\t// get camera look direction and near plane for camera clipping\n\tvec4 lookDirection = cameraWorld * vec4( 0.0, 0.0, - 1.0, 0.0 );\n\tvec4 nearVector = invProjectionMatrix * vec4( 0.0, 0.0, - 1.0, 1.0 );\n\tfloat near = abs( nearVector.z / nearVector.w );\n\n\t// get the camera direction and position from camera matrices\n\tvec4 origin = cameraWorld * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec4 direction = invProjectionMatrix * vec4( coord, 0.5, 1.0 );\n\tdirection /= direction.w;\n\tdirection = cameraWorld * direction - origin;\n\n\t// slide the origin along the ray until it sits at the near clip plane position\n\torigin.xyz += direction.xyz * near / dot( direction, lookDirection );\n\n\trayOrigin = origin.xyz;\n\trayDirection = direction.xyz;\n\n}\n\n\t\n\n#ifndef TRI_INTERSECT_EPSILON\n#define TRI_INTERSECT_EPSILON 1e-5\n#endif\n\n// Raycasting\nbool intersectsBounds( vec3 rayOrigin, vec3 rayDirection, vec3 boundsMin, vec3 boundsMax, out float dist ) {\n\n\t// https://www.reddit.com/r/opengl/comments/8ntzz5/fast_glsl_ray_box_intersection/\n\t// https://tavianator.com/2011/ray_box.html\n\tvec3 invDir = 1.0 / rayDirection;\n\n\t// find intersection distances for each plane\n\tvec3 tMinPlane = invDir * ( boundsMin - rayOrigin );\n\tvec3 tMaxPlane = invDir * ( boundsMax - rayOrigin );\n\n\t// get the min and max distances from each intersection\n\tvec3 tMinHit = min( tMaxPlane, tMinPlane );\n\tvec3 tMaxHit = max( tMaxPlane, tMinPlane );\n\n\t// get the furthest hit distance\n\tvec2 t = max( tMinHit.xx, tMinHit.yz );\n\tfloat t0 = max( t.x, t.y );\n\n\t// get the minimum hit distance\n\tt = min( tMaxHit.xx, tMaxHit.yz );\n\tfloat t1 = min( t.x, t.y );\n\n\t// set distance to 0.0 if the ray starts inside the box\n\tdist = max( t0, 0.0 );\n\n\treturn t1 >= dist;\n\n}\n\nbool intersectsTriangle(\n\tvec3 rayOrigin, vec3 rayDirection, vec3 a, vec3 b, vec3 c,\n\tout vec3 barycoord, out vec3 norm, out float dist, out float side\n) {\n\n\t// https://stackoverflow.com/questions/42740765/intersection-between-line-and-triangle-in-3d\n\tvec3 edge1 = b - a;\n\tvec3 edge2 = c - a;\n\tnorm = cross( edge1, edge2 );\n\n\tfloat det = - dot( rayDirection, norm );\n\tfloat invdet = 1.0 / det;\n\n\tvec3 AO = rayOrigin - a;\n\tvec3 DAO = cross( AO, rayDirection );\n\n\tvec4 uvt;\n\tuvt.x = dot( edge2, DAO ) * invdet;\n\tuvt.y = - dot( edge1, DAO ) * invdet;\n\tuvt.z = dot( AO, norm ) * invdet;\n\tuvt.w = 1.0 - uvt.x - uvt.y;\n\n\t// set the hit information\n\tbarycoord = uvt.wxy; // arranged in A, B, C order\n\tdist = uvt.z;\n\tside = sign( det );\n\tnorm = side * normalize( norm );\n\n\t// add an epsilon to avoid misses between triangles\n\tuvt += vec4( TRI_INTERSECT_EPSILON );\n\n\treturn all( greaterThanEqual( uvt, vec4( 0.0 ) ) );\n\n}\n\nbool intersectTriangles(\n\t// geometry info and triangle range\n\tsampler2D positionAttr, usampler2D indexAttr, uint offset, uint count,\n\n\t// ray\n\tvec3 rayOrigin, vec3 rayDirection,\n\n\t// outputs\n\tinout float minDistance, inout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,\n\tinout float side, inout float dist\n) {\n\n\tbool found = false;\n\tvec3 localBarycoord, localNormal;\n\tfloat localDist, localSide;\n\tfor ( uint i = offset, l = offset + count; i < l; i ++ ) {\n\n\t\tuvec3 indices = uTexelFetch1D( indexAttr, i ).xyz;\n\t\tvec3 a = texelFetch1D( positionAttr, indices.x ).rgb;\n\t\tvec3 b = texelFetch1D( positionAttr, indices.y ).rgb;\n\t\tvec3 c = texelFetch1D( positionAttr, indices.z ).rgb;\n\n\t\tif (\n\t\t\tintersectsTriangle( rayOrigin, rayDirection, a, b, c, localBarycoord, localNormal, localDist, localSide )\n\t\t\t&& localDist < minDistance\n\t\t) {\n\n\t\t\tfound = true;\n\t\t\tminDistance = localDist;\n\n\t\t\tfaceIndices = uvec4( indices.xyz, i );\n\t\t\tfaceNormal = localNormal;\n\n\t\t\tside = localSide;\n\t\t\tbarycoord = localBarycoord;\n\t\t\tdist = localDist;\n\n\t\t}\n\n\t}\n\n\treturn found;\n\n}\n\nbool intersectsBVHNodeBounds( vec3 rayOrigin, vec3 rayDirection, sampler2D bvhBounds, uint currNodeIndex, out float dist ) {\n\n\tuint cni2 = currNodeIndex * 2u;\n\tvec3 boundsMin = texelFetch1D( bvhBounds, cni2 ).xyz;\n\tvec3 boundsMax = texelFetch1D( bvhBounds, cni2 + 1u ).xyz;\n\treturn intersectsBounds( rayOrigin, rayDirection, boundsMin, boundsMax, dist );\n\n}\n\n// use a macro to hide the fact that we need to expand the struct into separate fields\n#define\tbvhIntersectFirstHit(\t\tbvh,\t\trayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist\t)\t_bvhIntersectFirstHit(\t\tbvh.position, bvh.index, bvh.bvhBounds, bvh.bvhContents,\t\trayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist\t)\n\nbool _bvhIntersectFirstHit(\n\t// bvh info\n\tsampler2D bvh_position, usampler2D bvh_index, sampler2D bvh_bvhBounds, usampler2D bvh_bvhContents,\n\n\t// ray\n\tvec3 rayOrigin, vec3 rayDirection,\n\n\t// output variables split into separate variables due to output precision\n\tinout uvec4 faceIndices, inout vec3 faceNormal, inout vec3 barycoord,\n\tinout float side, inout float dist\n) {\n\n\t// stack needs to be twice as long as the deepest tree we expect because\n\t// we push both the left and right child onto the stack every traversal\n\tint ptr = 0;\n\tuint stack[ BVH_STACK_DEPTH ];\n\tstack[ 0 ] = 0u;\n\n\tfloat triangleDistance = INFINITY;\n\tbool found = false;\n\twhile ( ptr > - 1 && ptr < BVH_STACK_DEPTH ) {\n\n\t\tuint currNodeIndex = stack[ ptr ];\n\t\tptr --;\n\n\t\t// check if we intersect the current bounds\n\t\tfloat boundsHitDistance;\n\t\tif (\n\t\t\t! intersectsBVHNodeBounds( rayOrigin, rayDirection, bvh_bvhBounds, currNodeIndex, boundsHitDistance )\n\t\t\t|| boundsHitDistance > triangleDistance\n\t\t) {\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tuvec2 boundsInfo = uTexelFetch1D( bvh_bvhContents, currNodeIndex ).xy;\n\t\tbool isLeaf = bool( boundsInfo.x & 0xffff0000u );\n\n\t\tif ( isLeaf ) {\n\n\t\t\tuint count = boundsInfo.x & 0x0000ffffu;\n\t\t\tuint offset = boundsInfo.y;\n\n\t\t\tfound = intersectTriangles(\n\t\t\t\tbvh_position, bvh_index, offset, count,\n\t\t\t\trayOrigin, rayDirection, triangleDistance,\n\t\t\t\tfaceIndices, faceNormal, barycoord, side, dist\n\t\t\t) || found;\n\n\t\t} else {\n\n\t\t\tuint leftIndex = currNodeIndex + 1u;\n\t\t\tuint splitAxis = boundsInfo.x & 0x0000ffffu;\n\t\t\tuint rightIndex = boundsInfo.y;\n\n\t\t\tbool leftToRight = rayDirection[ splitAxis ] >= 0.0;\n\t\t\tuint c1 = leftToRight ? leftIndex : rightIndex;\n\t\t\tuint c2 = leftToRight ? rightIndex : leftIndex;\n\n\t\t\t// set c2 in the stack so we traverse it later. We need to keep track of a pointer in\n\t\t\t// the stack while we traverse. The second pointer added is the one that will be\n\t\t\t// traversed first\n\t\t\tptr ++;\n\t\t\tstack[ ptr ] = c2;\n\n\t\t\tptr ++;\n\t\t\tstack[ ptr ] = c1;\n\n\t\t}\n\n\t}\n\n\treturn found;\n\n}\n\n\n  uniform BVH bvh;\n  uniform float ior;\n  uniform bool correctMips;\n  uniform vec2 resolution;\n  uniform float fresnel;\n  uniform mat4 modelMatrix;\n  uniform mat4 projectionMatrixInverse;\n  uniform mat4 viewMatrixInverse;\n  uniform float aberrationStrength;\n  uniform vec3 color;\n  uniform float opacity;\n\n  float fresnelFunc(vec3 viewDirection, vec3 worldNormal) {\n    return pow( 1.0 + dot( viewDirection, worldNormal), 10.0 );\n  }\n\n  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 normal, float ior, mat4 modelMatrixInverse) {\n    vec3 rayOrigin = ro;\n    vec3 rayDirection = rd;\n    rayDirection = refract(rayDirection, normal, 1.0 / ior);\n    rayOrigin = vWorldPosition + rayDirection * 0.001;\n    rayOrigin = (modelMatrixInverse * vec4(rayOrigin, 1.0)).xyz;\n    rayDirection = normalize((modelMatrixInverse * vec4(rayDirection, 0.0)).xyz);\n    for(float i = 0.0; i < bounces; i++) {\n      uvec4 faceIndices = uvec4( 0u );\n      vec3 faceNormal = vec3( 0.0, 0.0, 1.0 );\n      vec3 barycoord = vec3( 0.0 );\n      float side = 1.0;\n      float dist = 0.0;\n      bvhIntersectFirstHit( bvh, rayOrigin, rayDirection, faceIndices, faceNormal, barycoord, side, dist );\n      vec3 hitPos = rayOrigin + rayDirection * max(dist - 0.001, 0.0);\n      vec3 tempDir = refract(rayDirection, faceNormal, ior);\n      if (length(tempDir) != 0.0) {\n        rayDirection = tempDir;\n        break;\n      }\n      rayDirection = reflect(rayDirection, faceNormal);\n      rayOrigin = hitPos + rayDirection * 0.01;\n    }\n    rayDirection = normalize((modelMatrix * vec4(rayDirection, 0.0)).xyz);\n    return rayDirection;\n  }\n\n  #include <common>\n  #include <cube_uv_reflection_fragment>\n\n  #ifdef ENVMAP_TYPE_CUBEM\n    vec4 textureGradient(samplerCube envMap, vec3 rayDirection, vec3 directionCamPerfect) {\n      return textureGrad(envMap, rayDirection, dFdx(correctMips ? directionCamPerfect: rayDirection), dFdy(correctMips ? directionCamPerfect: rayDirection));\n    }\n  #else\n    vec4 textureGradient(sampler2D envMap, vec3 rayDirection, vec3 directionCamPerfect) {\n      vec2 uvv = equirectUv( rayDirection );\n      vec2 smoothUv = equirectUv( directionCamPerfect );\n      return textureGrad(envMap, uvv, dFdx(correctMips ? smoothUv : uvv), dFdy(correctMips ? smoothUv : uvv));\n    }\n  #endif\n\n  void main() {\n    vec2 uv = gl_FragCoord.xy / resolution;\n    vec3 directionCamPerfect = (projectionMatrixInverse * vec4(uv * 2.0 - 1.0, 0.0, 1.0)).xyz;\n    directionCamPerfect = (viewMatrixInverse * vec4(directionCamPerfect, 0.0)).xyz;\n    directionCamPerfect = normalize(directionCamPerfect);\n    vec3 normal = vNormal;\n    vec3 rayOrigin = cameraPosition;\n    vec3 rayDirection = normalize(vWorldPosition - cameraPosition);\n\n    vec4 diffuseColor = vec4(color, opacity);\n    #include <color_fragment>\n\n    #ifdef CHROMATIC_ABERRATIONS\n      vec3 rayDirectionG = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);\n      #ifdef FAST_CHROMA\n        vec3 rayDirectionR = normalize(rayDirectionG + 1.0 * vec3(aberrationStrength / 2.0));\n        vec3 rayDirectionB = normalize(rayDirectionG - 1.0 * vec3(aberrationStrength / 2.0));\n      #else\n        vec3 rayDirectionR = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 - aberrationStrength), 1.0), vModelMatrixInverse);\n        vec3 rayDirectionB = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior * (1.0 + aberrationStrength), 1.0), vModelMatrixInverse);\n      #endif\n      float finalColorR = textureGradient(envMap, rayDirectionR, directionCamPerfect).r;\n      float finalColorG = textureGradient(envMap, rayDirectionG, directionCamPerfect).g;\n      float finalColorB = textureGradient(envMap, rayDirectionB, directionCamPerfect).b;\n      diffuseColor.rgb *= vec3(finalColorR, finalColorG, finalColorB);\n    #else\n      rayDirection = totalInternalReflection(rayOrigin, rayDirection, normal, max(ior, 1.0), vModelMatrixInverse);\n      diffuseColor.rgb *= textureGradient(envMap, rayDirection, directionCamPerfect).rgb;\n    #endif\n\n    vec3 viewDirection = normalize(vWorldPosition - cameraPosition);\n    float nFresnel = fresnelFunc(viewDirection, normal) * fresnel;\n    gl_FragColor = vec4(mix(diffuseColor.rgb, vec3(1.0), nFresnel), diffuseColor.a);\n\n    #include <tonemapping_fragment>\n    #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n  }`),tX=e=>e&&e.isCubeTexture;function nX(e){let{aberrationStrength:t=0,fastChroma:n=!0,envMap:r,...i}=e;hv({MeshRefractionMaterial:eX});const o=(0,l.useRef)(),{size:a}=cy(),s=(0,l.useMemo)((()=>{var e,i;const o={},a=tX(r),s=(null!==(e=a?null==(i=r.image[0])?void 0:i.width:r.image.width)&&void 0!==e?e:1024)/4,l=Math.floor(Math.log2(s)),c=Math.pow(2,l),u=3*Math.max(c,112),h=4*c;return a&&(o.ENVMAP_TYPE_CUBEM=""),o.CUBEUV_TEXEL_WIDTH=""+1/u,o.CUBEUV_TEXEL_HEIGHT=""+1/h,o.CUBEUV_MAX_MIP=`${l}.0`,t>0&&(o.CHROMATIC_ABERRATIONS=""),n&&(o.FAST_CHROMA=""),o}),[t,n]);return(0,l.useLayoutEffect)((()=>{var e;const t=null==(e=o.current)||null==(e=e.__r3f)||null==(e=e.parent)?void 0:e.geometry;t&&(o.current.bvh=new $q,o.current.bvh.updateFrom(new TW(t.clone().toNonIndexed(),{strategy:tH})))}),[]),uy((e=>{let{camera:t}=e;o.current.viewMatrixInverse=t.matrixWorld,o.current.projectionMatrixInverse=t.projectionMatrixInverse})),l.createElement("meshRefractionMaterial",tC({key:JSON.stringify(s),defines:s,ref:o,resolution:[a.width,a.height],aberrationStrength:t,envMap:r},i))}const rX=vL({},"void main() { }","void main() { gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0); discard;  }");class iX extends op{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super(),this.uniforms={chromaticAberration:{value:.05},transmission:{value:0},_transmission:{value:1},transmissionMap:{value:null},roughness:{value:0},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:1/0},attenuationColor:{value:new La("white")},anisotropicBlur:{value:.1},time:{value:0},distortion:{value:0},distortionScale:{value:.5},temporalDistortion:{value:0},buffer:{value:null}},this.onBeforeCompile=n=>{n.uniforms={...n.uniforms,...this.uniforms},this.anisotropy>0&&(n.defines.USE_ANISOTROPY=""),t?n.defines.USE_SAMPLER="":n.defines.USE_TRANSMISSION="",n.fragmentShader="\n      uniform float chromaticAberration;         \n      uniform float anisotropicBlur;      \n      uniform float time;\n      uniform float distortion;\n      uniform float distortionScale;\n      uniform float temporalDistortion;\n      uniform sampler2D buffer;\n\n      vec3 random3(vec3 c) {\n        float j = 4096.0*sin(dot(c,vec3(17.0, 59.4, 15.0)));\n        vec3 r;\n        r.z = fract(512.0*j);\n        j *= .125;\n        r.x = fract(512.0*j);\n        j *= .125;\n        r.y = fract(512.0*j);\n        return r-0.5;\n      }\n\n      uint hash( uint x ) {\n        x += ( x << 10u );\n        x ^= ( x >>  6u );\n        x += ( x <<  3u );\n        x ^= ( x >> 11u );\n        x += ( x << 15u );\n        return x;\n      }\n\n      // Compound versions of the hashing algorithm I whipped together.\n      uint hash( uvec2 v ) { return hash( v.x ^ hash(v.y)                         ); }\n      uint hash( uvec3 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z)             ); }\n      uint hash( uvec4 v ) { return hash( v.x ^ hash(v.y) ^ hash(v.z) ^ hash(v.w) ); }\n\n      // Construct a float with half-open range [0:1] using low 23 bits.\n      // All zeroes yields 0.0, all ones yields the next smallest representable value below 1.0.\n      float floatConstruct( uint m ) {\n        const uint ieeeMantissa = 0x007FFFFFu; // binary32 mantissa bitmask\n        const uint ieeeOne      = 0x3F800000u; // 1.0 in IEEE binary32\n        m &= ieeeMantissa;                     // Keep only mantissa bits (fractional part)\n        m |= ieeeOne;                          // Add fractional part to 1.0\n        float  f = uintBitsToFloat( m );       // Range [1:2]\n        return f - 1.0;                        // Range [0:1]\n      }\n\n      // Pseudo-random value in half-open range [0:1].\n      float randomBase( float x ) { return floatConstruct(hash(floatBitsToUint(x))); }\n      float randomBase( vec2  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float randomBase( vec3  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float randomBase( vec4  v ) { return floatConstruct(hash(floatBitsToUint(v))); }\n      float rand(float seed) {\n        float result = randomBase(vec3(gl_FragCoord.xy, seed));\n        return result;\n      }\n\n      const float F3 =  0.3333333;\n      const float G3 =  0.1666667;\n\n      float snoise(vec3 p) {\n        vec3 s = floor(p + dot(p, vec3(F3)));\n        vec3 x = p - s + dot(s, vec3(G3));\n        vec3 e = step(vec3(0.0), x - x.yzx);\n        vec3 i1 = e*(1.0 - e.zxy);\n        vec3 i2 = 1.0 - e.zxy*(1.0 - e);\n        vec3 x1 = x - i1 + G3;\n        vec3 x2 = x - i2 + 2.0*G3;\n        vec3 x3 = x - 1.0 + 3.0*G3;\n        vec4 w, d;\n        w.x = dot(x, x);\n        w.y = dot(x1, x1);\n        w.z = dot(x2, x2);\n        w.w = dot(x3, x3);\n        w = max(0.6 - w, 0.0);\n        d.x = dot(random3(s), x);\n        d.y = dot(random3(s + i1), x1);\n        d.z = dot(random3(s + i2), x2);\n        d.w = dot(random3(s + 1.0), x3);\n        w *= w;\n        w *= w;\n        d *= w;\n        return dot(d, vec4(52.0));\n      }\n\n      float snoiseFractal(vec3 m) {\n        return 0.5333333* snoise(m)\n              +0.2666667* snoise(2.0*m)\n              +0.1333333* snoise(4.0*m)\n              +0.0666667* snoise(8.0*m);\n      }\n"+n.fragmentShader,n.fragmentShader=n.fragmentShader.replace("#include <transmission_pars_fragment>","\n        #ifdef USE_TRANSMISSION\n          // Transmission code is based on glTF-Sampler-Viewer\n          // https://github.com/KhronosGroup/glTF-Sample-Viewer\n          uniform float _transmission;\n          uniform float thickness;\n          uniform float attenuationDistance;\n          uniform vec3 attenuationColor;\n          #ifdef USE_TRANSMISSIONMAP\n            uniform sampler2D transmissionMap;\n          #endif\n          #ifdef USE_THICKNESSMAP\n            uniform sampler2D thicknessMap;\n          #endif\n          uniform vec2 transmissionSamplerSize;\n          uniform sampler2D transmissionSamplerMap;\n          uniform mat4 modelMatrix;\n          uniform mat4 projectionMatrix;\n          varying vec3 vWorldPosition;\n          vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n            // Direction of refracted light.\n            vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n            // Compute rotation-independant scaling of the model matrix.\n            vec3 modelScale;\n            modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n            modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n            modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n            // The thickness is specified in local space.\n            return normalize( refractionVector ) * thickness * modelScale;\n          }\n          float applyIorToRoughness( const in float roughness, const in float ior ) {\n            // Scale roughness with IOR so that an IOR of 1.0 results in no microfacet refraction and\n            // an IOR of 1.5 results in the default amount of microfacet refraction.\n            return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n          }\n          vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n            float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );            \n            #ifdef USE_SAMPLER\n              #ifdef texture2DLodEXT\n                return texture2DLodEXT(transmissionSamplerMap, fragCoord.xy, framebufferLod);\n              #else\n                return texture2D(transmissionSamplerMap, fragCoord.xy, framebufferLod);\n              #endif\n            #else\n              return texture2D(buffer, fragCoord.xy);\n            #endif\n          }\n          vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n            if ( isinf( attenuationDistance ) ) {\n              // Attenuation distance is +\u221e, i.e. the transmitted color is not attenuated at all.\n              return radiance;\n            } else {\n              // Compute light attenuation using Beer's law.\n              vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n              vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance ); // Beer's law\n              return transmittance * radiance;\n            }\n          }\n          vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n            const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n            const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,\n            const in vec3 attenuationColor, const in float attenuationDistance ) {\n            vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n            vec3 refractedRayExit = position + transmissionRay;\n            // Project refracted vector on the framebuffer, while mapping to normalized device coordinates.\n            vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n            vec2 refractionCoords = ndcPos.xy / ndcPos.w;\n            refractionCoords += 1.0;\n            refractionCoords /= 2.0;\n            // Sample framebuffer to get pixel the refracted ray hits.\n            vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n            vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );\n            // Get the specular component.\n            vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n            return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );\n          }\n        #endif\n"),n.fragmentShader=n.fragmentShader.replace("#include <transmission_fragment>",`  \n        // Improve the refraction to use the world pos\n        material.transmission = _transmission;\n        material.transmissionAlpha = 1.0;\n        material.thickness = thickness;\n        material.attenuationDistance = attenuationDistance;\n        material.attenuationColor = attenuationColor;\n        #ifdef USE_TRANSMISSIONMAP\n          material.transmission *= texture2D( transmissionMap, vUv ).r;\n        #endif\n        #ifdef USE_THICKNESSMAP\n          material.thickness *= texture2D( thicknessMap, vUv ).g;\n        #endif\n        \n        vec3 pos = vWorldPosition;\n        float runningSeed = 0.0;\n        vec3 v = normalize( cameraPosition - pos );\n        vec3 n = inverseTransformDirection( normal, viewMatrix );\n        vec3 transmission = vec3(0.0);\n        float transmissionR, transmissionB, transmissionG;\n        float randomCoords = rand(runningSeed++);\n        float thickness_smear = thickness * max(pow(roughnessFactor, 0.33), anisotropicBlur);\n        vec3 distortionNormal = vec3(0.0);\n        vec3 temporalOffset = vec3(time, -time, -time) * temporalDistortion;\n        if (distortion > 0.0) {\n          distortionNormal = distortion * vec3(snoiseFractal(vec3((pos * distortionScale + temporalOffset))), snoiseFractal(vec3(pos.zxy * distortionScale - temporalOffset)), snoiseFractal(vec3(pos.yxz * distortionScale + temporalOffset)));\n        }\n        for (float i = 0.0; i < ${e}.0; i ++) {\n          vec3 sampleNorm = normalize(n + roughnessFactor * roughnessFactor * 2.0 * normalize(vec3(rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5, rand(runningSeed++) - 0.5)) * pow(rand(runningSeed++), 0.33) + distortionNormal);\n          transmissionR = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness  + thickness_smear * (i + randomCoords) / float(${e}),\n            material.attenuationColor, material.attenuationDistance\n          ).r;\n          transmissionG = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior  * (1.0 + chromaticAberration * (i + randomCoords) / float(${e})) , material.thickness + thickness_smear * (i + randomCoords) / float(${e}),\n            material.attenuationColor, material.attenuationDistance\n          ).g;\n          transmissionB = getIBLVolumeRefraction(\n            sampleNorm, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n            pos, modelMatrix, viewMatrix, projectionMatrix, material.ior * (1.0 + 2.0 * chromaticAberration * (i + randomCoords) / float(${e})), material.thickness + thickness_smear * (i + randomCoords) / float(${e}),\n            material.attenuationColor, material.attenuationDistance\n          ).b;\n          transmission.r += transmissionR;\n          transmission.g += transmissionG;\n          transmission.b += transmissionB;\n        }\n        transmission /= ${e}.0;\n        totalDiffuse = mix( totalDiffuse, transmission.rgb, material.transmission );\n`)},Object.keys(this.uniforms).forEach((e=>Object.defineProperty(this,e,{get:()=>this.uniforms[e].value,set:t=>this.uniforms[e].value=t})))}}const oX=l.forwardRef(((e,t)=>{let{buffer:n,transmissionSampler:r=!1,backside:i=!1,side:o=Ye,transmission:a=1,thickness:s=0,backsideThickness:c=0,backsideEnvMapIntensity:u=1,samples:h=10,resolution:d,backsideResolution:f,background:p,anisotropy:m,anisotropicBlur:g,...v}=e;hv({MeshTransmissionMaterial:iX});const y=l.useRef(null),[A]=l.useState((()=>new rX)),x=Tz(f||d),b=Tz(d);let _,w,E,S;return uy((e=>{y.current.time=e.clock.getElapsedTime(),y.current.buffer!==b.texture||r||(S=y.current.__r3f.parent,S&&(E=e.gl.toneMapping,_=e.scene.background,w=y.current.envMapIntensity,e.gl.toneMapping=kt,p&&(e.scene.background=p),S.material=A,i&&(e.gl.setRenderTarget(x),e.gl.render(e.scene,e.camera),S.material=y.current,S.material.buffer=x.texture,S.material.thickness=c,S.material.side=Je,S.material.envMapIntensity=u),e.gl.setRenderTarget(b),e.gl.render(e.scene,e.camera),S.material=y.current,S.material.thickness=s,S.material.side=o,S.material.buffer=b.texture,S.material.envMapIntensity=w,e.scene.background=_,e.gl.setRenderTarget(null),e.gl.toneMapping=E))})),l.useImperativeHandle(t,(()=>y.current),[]),l.createElement("meshTransmissionMaterial",tC({args:[h,r],ref:y},v,{buffer:n||b.texture,_transmission:a,anisotropicBlur:null!==g&&void 0!==g?g:m,transmission:r?a:0,thickness:s,side:o}))})),aX=l.forwardRef(((e,t)=>(hv({DiscardMaterialImpl:rX}),l.createElement("discardMaterialImpl",tC({ref:t},e))))),sX=bL>=154?"opaque_fragment":"output_fragment";class lX extends Ad{constructor(e){super(e),this.onBeforeCompile=(e,t)=>{const{isWebGL2:n}=t.capabilities;e.fragmentShader=e.fragmentShader.replace(`#include <${sX}>`,`\n        ${n?`#include <${sX}>`:`#extension GL_OES_standard_derivatives : enable\n#include <${sX}>`}\n      vec2 cxy = 2.0 * gl_PointCoord - 1.0;\n      float r = dot(cxy, cxy);\n      float delta = fwidth(r);     \n      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);\n      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );\n      #include <tonemapping_fragment>\n      #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n      `)}}}const cX=l.forwardRef(((e,t)=>{const[n]=l.useState((()=>new lX(null)));return l.createElement("primitive",tC({},e,{object:n,ref:t,attach:"material"}))})),uX=function(){let{focus:e=0,size:t=25,samples:n=10}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return`\n#define PENUMBRA_FILTER_SIZE float(${t})\n#define RGB_NOISE_FUNCTION(uv) (randRGB(uv))\nvec3 randRGB(vec2 uv) {\n  return vec3(\n    fract(sin(dot(uv, vec2(12.75613, 38.12123))) * 13234.76575),\n    fract(sin(dot(uv, vec2(19.45531, 58.46547))) * 43678.23431),\n    fract(sin(dot(uv, vec2(23.67817, 78.23121))) * 93567.23423)\n  );\n}\n\nvec3 lowPassRandRGB(vec2 uv) {\n  // 3x3 convolution (average)\n  // can be implemented as separable with an extra buffer for a total of 6 samples instead of 9\n  vec3 result = vec3(0);\n  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, -1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0,  0.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(-1.0, +1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, -1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0,  0.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2( 0.0, +1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, -1.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0,  0.0));\n  result += RGB_NOISE_FUNCTION(uv + vec2(+1.0, +1.0));\n  result *= 0.111111111; // 1.0 / 9.0\n  return result;\n}\nvec3 highPassRandRGB(vec2 uv) {\n  // by subtracting the low-pass signal from the original signal, we're being left with the high-pass signal\n  // hp(x) = x - lp(x)\n  return RGB_NOISE_FUNCTION(uv) - lowPassRandRGB(uv) + 0.5;\n}\n\n\nvec2 vogelDiskSample(int sampleIndex, int sampleCount, float angle) {\n  const float goldenAngle = 2.399963f; // radians\n  float r = sqrt(float(sampleIndex) + 0.5f) / sqrt(float(sampleCount));\n  float theta = float(sampleIndex) * goldenAngle + angle;\n  float sine = sin(theta);\n  float cosine = cos(theta);\n  return vec2(cosine, sine) * r;\n}\nfloat penumbraSize( const in float zReceiver, const in float zBlocker ) { // Parallel plane estimation\n  return (zReceiver - zBlocker) / zBlocker;\n}\nfloat findBlocker(sampler2D shadowMap, vec2 uv, float compare, float angle) {\n  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n  float blockerDepthSum = float(${e});\n  float blockers = 0.0;\n\n  int j = 0;\n  vec2 offset = vec2(0.);\n  float depth = 0.;\n\n  #pragma unroll_loop_start\n  for(int i = 0; i < ${n}; i ++) {\n    offset = (vogelDiskSample(j, ${n}, angle) * texelSize) * 2.0 * PENUMBRA_FILTER_SIZE;\n    depth = unpackRGBAToDepth( texture2D( shadowMap, uv + offset));\n    if (depth < compare) {\n      blockerDepthSum += depth;\n      blockers++;\n    }\n    j++;\n  }\n  #pragma unroll_loop_end\n\n  if (blockers > 0.0) {\n    return blockerDepthSum / blockers;\n  }\n  return -1.0;\n}\n\n        \nfloat vogelFilter(sampler2D shadowMap, vec2 uv, float zReceiver, float filterRadius, float angle) {\n  float texelSize = 1.0 / float(textureSize(shadowMap, 0).x);\n  float shadow = 0.0f;\n  int j = 0;\n  vec2 vogelSample = vec2(0.0);\n  vec2 offset = vec2(0.0);\n  #pragma unroll_loop_start\n  for (int i = 0; i < ${n}; i++) {\n    vogelSample = vogelDiskSample(j, ${n}, angle) * texelSize;\n    offset = vogelSample * (1.0 + filterRadius * float(${t}));\n    shadow += step( zReceiver, unpackRGBAToDepth( texture2D( shadowMap, uv + offset ) ) );\n    j++;\n  }\n  #pragma unroll_loop_end\n  return shadow * 1.0 / ${n}.0;\n}\n\nfloat PCSS (sampler2D shadowMap, vec4 coords) {\n  vec2 uv = coords.xy;\n  float zReceiver = coords.z; // Assumed to be eye-space z in this code\n  float angle = highPassRandRGB(gl_FragCoord.xy).r * PI2;\n  float avgBlockerDepth = findBlocker(shadowMap, uv, zReceiver, angle);\n  if (avgBlockerDepth == -1.0) {\n    return 1.0;\n  }\n  float penumbraRatio = penumbraSize(zReceiver, avgBlockerDepth);\n  return vogelFilter(shadowMap, uv, zReceiver, 1.25 * penumbraRatio, angle);\n}`};function hX(e,t,n){t.traverse((t=>{t.material&&(e.properties.remove(t.material),null==t.material.dispose||t.material.dispose())})),e.info.programs.length=0,e.compile(t,n)}function dX(e){let{focus:t=0,samples:n=10,size:r=25}=e;const i=cy((e=>e.gl)),o=cy((e=>e.scene)),a=cy((e=>e.camera));return l.useEffect((()=>{const e=nl.shadowmap_pars_fragment;return nl.shadowmap_pars_fragment=nl.shadowmap_pars_fragment.replace("#ifdef USE_SHADOWMAP","#ifdef USE_SHADOWMAP\n"+uX({size:r,samples:n,focus:t})).replace("#if defined( SHADOWMAP_TYPE_PCF )","\nreturn PCSS(shadowMap, shadowCoord);\n#if defined( SHADOWMAP_TYPE_PCF )"),hX(i,o,a),()=>{nl.shadowmap_pars_fragment=e,hX(i,o,a)}}),[t,r,n]),null}function fX(e,t){const n=e+"Geometry";return l.forwardRef(((e,r)=>{let{args:i,children:o,...a}=e;const s=l.useRef(null);return l.useImperativeHandle(r,(()=>s.current)),l.useLayoutEffect((()=>{null==t||t(s.current)})),l.createElement("mesh",tC({ref:s},a),l.createElement(n,{attach:"geometry",args:i}),o)}))}const pX=fX("box"),mX=fX("circle"),gX=fX("cone"),vX=fX("cylinder"),yX=fX("sphere"),AX=fX("plane"),xX=fX("tube"),bX=fX("torus"),_X=fX("torusKnot"),wX=fX("tetrahedron"),EX=fX("ring"),SX=fX("polyhedron"),CX=fX("icosahedron"),MX=fX("octahedron"),TX=fX("dodecahedron"),IX=fX("extrude"),BX=fX("lathe"),PX=fX("capsule"),RX=fX("shape",(e=>{let{geometry:t}=e;const n=t.attributes.position,r=(new xo).setFromBufferAttribute(n),i=new vo;r.getSize(i);const o=[];let a=0,s=0,l=0,c=0;for(let u=0;u<n.count;u++)a=n.getX(u),s=n.getY(u),l=(a-r.min.x)/i.x,c=(s-r.min.y)/i.y,o.push(l,c);t.setAttribute("uv",new rs(o,2))})),DX=1e-5;const OX=l.forwardRef((function(e,t){let{args:[n=1,r=1,i=1]=[],radius:o=.05,steps:a=1,smoothness:s=4,bevelSegments:c=4,creaseAngle:u=.4,children:h,...d}=e;const f=l.useMemo((()=>function(e,t,n){const r=new ff,i=n-DX;return r.absarc(DX,DX,DX,-Math.PI/2,-Math.PI,!0),r.absarc(DX,t-2*i,DX,Math.PI,Math.PI/2,!0),r.absarc(e-2*i,t-2*i,DX,Math.PI/2,0,!0),r.absarc(e-2*i,DX,DX,0,-Math.PI/2,!0),r}(n,r,o)),[n,r,o]),p=l.useMemo((()=>({depth:i-2*o,bevelEnabled:!0,bevelSegments:2*c,steps:a,bevelSize:o-DX,bevelThickness:o,curveSegments:s})),[i,o,s]),m=l.useRef(null);return l.useLayoutEffect((()=>{m.current&&(m.current.center(),Fk(m.current,u))}),[f,p]),l.createElement("mesh",tC({ref:t},d),l.createElement("extrudeGeometry",{ref:m,args:[f,p]}),h)}));function kX(){const e=new hs,t=new Float32Array([-1,-1,3,-1,-1,3]);return e.boundingSphere=new zo,e.boundingSphere.set(new vo,1/0),e.setAttribute("position",new Xa(t,2)),e}const LX=l.forwardRef((function(e,t){let{children:n,...r}=e;const i=l.useMemo(kX,[]);return l.createElement("mesh",tC({ref:t,geometry:i,frustumCulled:!1},r),n)})),FX=l.forwardRef(((e,t)=>{let{children:n,width:r,height:i,depth:o,box3:a,precise:s=!0,...c}=e;const u=l.useRef(null),h=l.useRef(null),d=l.useRef(null);return l.useLayoutEffect((()=>{h.current.matrixWorld.identity();let e=a||(new xo).setFromObject(d.current,s);const t=e.max.x-e.min.x,n=e.max.y-e.min.y,l=e.max.z-e.min.z;let c=Math.max(t,n,l);r&&(c=t),i&&(c=n),o&&(c=l),h.current.scale.setScalar(1/c)}),[r,i,o,a,s]),l.useImperativeHandle(t,(()=>u.current),[]),l.createElement("group",tC({ref:u},c),l.createElement("group",{ref:h},l.createElement("group",{ref:d},n)))}));var zX=function(e){return e[e.NONE=0]="NONE",e[e.START=1]="START",e[e.ACTIVE=2]="ACTIVE",e}(zX||{});const UX=e=>e&&e.isOrthographicCamera,NX=e=>e&&e.isBox3,jX=e=>1-Math.exp(-5*e)+.007*e,GX=l.createContext(null);function QX(e){let{children:t,maxDuration:n=1,margin:r=1.2,observe:i,fit:o,clip:a,interpolateFunc:s=jX,onFit:c}=e;const u=l.useRef(null),{camera:h,size:d,invalidate:f}=cy(),p=cy((e=>e.controls)),m=l.useRef(c);m.current=c;const g=l.useRef({camPos:new vo,camRot:new go,camZoom:1}),v=l.useRef({camPos:void 0,camRot:void 0,camZoom:void 0,camUp:void 0,target:void 0}),y=l.useRef(zX.NONE),A=l.useRef(0),[x]=l.useState((()=>new xo)),b=l.useMemo((()=>{function e(){const e=x.getSize(new vo),t=x.getCenter(new vo),n=Math.max(e.x,e.y,e.z),i=UX(h)?4*n:n/(2*Math.atan(Math.PI*h.fov/360)),o=UX(h)?4*n:i/h.aspect,a=r*Math.max(i,o);return{box:x,size:e,center:t,distance:a}}return{getSize:e,refresh(e){if(NX(e))x.copy(e);else{const t=e||u.current;if(!t)return this;t.updateWorldMatrix(!0,!0),x.setFromObject(t)}if(x.isEmpty()){const e=h.position.length()||10;x.setFromCenterAndSize(new vo,new vo(e,e,e))}return g.current.camPos.copy(h.position),g.current.camRot.copy(h.quaternion),UX(h)&&(g.current.camZoom=h.zoom),v.current.camPos=void 0,v.current.camRot=void 0,v.current.camZoom=void 0,v.current.camUp=void 0,v.current.target=void 0,this},reset(){const{center:t,distance:n}=e(),r=h.position.clone().sub(t).normalize();v.current.camPos=t.clone().addScaledVector(r,n),v.current.target=t.clone();const i=(new qo).lookAt(v.current.camPos,v.current.target,h.up);return v.current.camRot=(new go).setFromRotationMatrix(i),y.current=zX.START,A.current=0,this},moveTo(e){return v.current.camPos=Array.isArray(e)?new vo(...e):e.clone(),y.current=zX.START,A.current=0,this},lookAt(e){let{target:t,up:n}=e;v.current.target=Array.isArray(t)?new vo(...t):t.clone(),v.current.camUp=n?Array.isArray(n)?new vo(...n):n.clone():h.up.clone();const r=(new qo).lookAt(v.current.camPos||h.position,v.current.target,v.current.camUp);return v.current.camRot=(new go).setFromRotationMatrix(r),y.current=zX.START,A.current=0,this},to(e){let{position:t,target:n}=e;return this.moveTo(t).lookAt({target:n})},fit(){if(!UX(h))return this.reset();let e=0,t=0;const n=[new vo(x.min.x,x.min.y,x.min.z),new vo(x.min.x,x.max.y,x.min.z),new vo(x.min.x,x.min.y,x.max.z),new vo(x.min.x,x.max.y,x.max.z),new vo(x.max.x,x.max.y,x.max.z),new vo(x.max.x,x.max.y,x.min.z),new vo(x.max.x,x.min.y,x.max.z),new vo(x.max.x,x.min.y,x.min.z)],i=v.current.camPos||h.position,o=v.current.target||(null==p?void 0:p.target),a=v.current.camUp||h.up,s=o?(new qo).lookAt(i,o,a).setPosition(i).invert():h.matrixWorldInverse;for(const r of n)r.applyMatrix4(s),e=Math.max(e,Math.abs(r.y)),t=Math.max(t,Math.abs(r.x));e*=2,t*=2;const l=(h.top-h.bottom)/e,c=(h.right-h.left)/t;return v.current.camZoom=Math.min(l,c)/r,y.current=zX.START,A.current=0,m.current&&m.current(this.getSize()),this},clip(){const{distance:t}=e();return h.near=t/100,h.far=100*t,h.updateProjectionMatrix(),p&&(p.maxDistance=10*t,p.update()),f(),this}}}),[x,h,p,r,f]);l.useLayoutEffect((()=>{if(p){const e=()=>{if(p&&v.current.target&&y.current!==zX.NONE){const e=(new vo).setFromMatrixColumn(h.matrix,2),t=g.current.camPos.distanceTo(p.target),n=(v.current.camPos||g.current.camPos).distanceTo(v.current.target),r=(1-A.current)*t+A.current*n;p.target.copy(h.position).addScaledVector(e,-r),p.update()}y.current=zX.NONE};return p.addEventListener("start",e),()=>p.removeEventListener("start",e)}}),[p]);const _=l.useRef(0);return l.useLayoutEffect((()=>{(i||0===_.current++)&&(b.refresh(),o&&b.reset().fit(),a&&b.clip())}),[d,a,o,i,h,p]),uy(((e,t)=>{if(y.current===zX.START)y.current=zX.ACTIVE,f();else if(y.current===zX.ACTIVE){if(A.current+=t/n,A.current>=1)v.current.camPos&&h.position.copy(v.current.camPos),v.current.camRot&&h.quaternion.copy(v.current.camRot),v.current.camUp&&h.up.copy(v.current.camUp),v.current.camZoom&&UX(h)&&(h.zoom=v.current.camZoom),h.updateMatrixWorld(),h.updateProjectionMatrix(),p&&v.current.target&&(p.target.copy(v.current.target),p.update()),y.current=zX.NONE;else{const e=s(A.current);v.current.camPos&&h.position.lerpVectors(g.current.camPos,v.current.camPos,e),v.current.camRot&&h.quaternion.slerpQuaternions(g.current.camRot,v.current.camRot,e),v.current.camUp&&h.up.set(0,1,0).applyQuaternion(h.quaternion),v.current.camZoom&&UX(h)&&(h.zoom=(1-e)*g.current.camZoom+e*v.current.camZoom),h.updateMatrixWorld(),h.updateProjectionMatrix()}f()}})),l.createElement("group",{ref:u},l.createElement(GX.Provider,{value:b},t))}function HX(){return l.useContext(GX)}var VX=Object.defineProperty,WX=(e,t,n)=>(((e,t,n)=>{t in e?VX(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);class qX{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Math;WX(this,"grad3",[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]]),WX(this,"grad4",[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]]),WX(this,"p",[]),WX(this,"perm",[]),WX(this,"simplex",[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]),WX(this,"dot",((e,t,n)=>e[0]*t+e[1]*n)),WX(this,"dot3",((e,t,n,r)=>e[0]*t+e[1]*n+e[2]*r)),WX(this,"dot4",((e,t,n,r,i)=>e[0]*t+e[1]*n+e[2]*r+e[3]*i)),WX(this,"noise",((e,t)=>{let n,r,i;const o=(e+t)*(.5*(Math.sqrt(3)-1)),a=Math.floor(e+o),s=Math.floor(t+o),l=(3-Math.sqrt(3))/6,c=(a+s)*l,u=e-(a-c),h=t-(s-c);let d=0,f=1;u>h&&(d=1,f=0);const p=u-d+l,m=h-f+l,g=u-1+2*l,v=h-1+2*l,y=255&a,A=255&s,x=this.perm[y+this.perm[A]]%12,b=this.perm[y+d+this.perm[A+f]]%12,_=this.perm[y+1+this.perm[A+1]]%12;let w=.5-u*u-h*h;w<0?n=0:(w*=w,n=w*w*this.dot(this.grad3[x],u,h));let E=.5-p*p-m*m;E<0?r=0:(E*=E,r=E*E*this.dot(this.grad3[b],p,m));let S=.5-g*g-v*v;return S<0?i=0:(S*=S,i=S*S*this.dot(this.grad3[_],g,v)),70*(n+r+i)})),WX(this,"noise3d",((e,t,n)=>{let r,i,o,a;const s=(e+t+n)*(1/3),l=Math.floor(e+s),c=Math.floor(t+s),u=Math.floor(n+s),h=1/6,d=(l+c+u)*h,f=e-(l-d),p=t-(c-d),m=n-(u-d);let g,v,y,A,x,b;f>=p?p>=m?(g=1,v=0,y=0,A=1,x=1,b=0):f>=m?(g=1,v=0,y=0,A=1,x=0,b=1):(g=0,v=0,y=1,A=1,x=0,b=1):p<m?(g=0,v=0,y=1,A=0,x=1,b=1):f<m?(g=0,v=1,y=0,A=0,x=1,b=1):(g=0,v=1,y=0,A=1,x=1,b=0);const _=f-g+h,w=p-v+h,E=m-y+h,S=f-A+2*h,C=p-x+2*h,M=m-b+2*h,T=f-1+.5,I=p-1+.5,B=m-1+.5,P=255&l,R=255&c,D=255&u,O=this.perm[P+this.perm[R+this.perm[D]]]%12,k=this.perm[P+g+this.perm[R+v+this.perm[D+y]]]%12,L=this.perm[P+A+this.perm[R+x+this.perm[D+b]]]%12,F=this.perm[P+1+this.perm[R+1+this.perm[D+1]]]%12;let z=.6-f*f-p*p-m*m;z<0?r=0:(z*=z,r=z*z*this.dot3(this.grad3[O],f,p,m));let U=.6-_*_-w*w-E*E;U<0?i=0:(U*=U,i=U*U*this.dot3(this.grad3[k],_,w,E));let N=.6-S*S-C*C-M*M;N<0?o=0:(N*=N,o=N*N*this.dot3(this.grad3[L],S,C,M));let j=.6-T*T-I*I-B*B;return j<0?a=0:(j*=j,a=j*j*this.dot3(this.grad3[F],T,I,B)),32*(r+i+o+a)})),WX(this,"noise4d",((e,t,n,r)=>{const i=this.grad4,o=this.simplex,a=this.perm,s=(Math.sqrt(5)-1)/4,l=(5-Math.sqrt(5))/20;let c,u,h,d,f;const p=(e+t+n+r)*s,m=Math.floor(e+p),g=Math.floor(t+p),v=Math.floor(n+p),y=Math.floor(r+p),A=(m+g+v+y)*l,x=e-(m-A),b=t-(g-A),_=n-(v-A),w=r-(y-A),E=(x>b?32:0)+(x>_?16:0)+(b>_?8:0)+(x>w?4:0)+(b>w?2:0)+(_>w?1:0);let S,C,M,T,I,B,P,R,D,O,k,L;S=o[E][0]>=3?1:0,C=o[E][1]>=3?1:0,M=o[E][2]>=3?1:0,T=o[E][3]>=3?1:0,I=o[E][0]>=2?1:0,B=o[E][1]>=2?1:0,P=o[E][2]>=2?1:0,R=o[E][3]>=2?1:0,D=o[E][0]>=1?1:0,O=o[E][1]>=1?1:0,k=o[E][2]>=1?1:0,L=o[E][3]>=1?1:0;const F=x-S+l,z=b-C+l,U=_-M+l,N=w-T+l,j=x-I+2*l,G=b-B+2*l,Q=_-P+2*l,H=w-R+2*l,V=x-D+3*l,W=b-O+3*l,q=_-k+3*l,X=w-L+3*l,Y=x-1+4*l,J=b-1+4*l,K=_-1+4*l,Z=w-1+4*l,$=255&m,ee=255&g,te=255&v,ne=255&y,re=a[$+a[ee+a[te+a[ne]]]]%32,ie=a[$+S+a[ee+C+a[te+M+a[ne+T]]]]%32,oe=a[$+I+a[ee+B+a[te+P+a[ne+R]]]]%32,ae=a[$+D+a[ee+O+a[te+k+a[ne+L]]]]%32,se=a[$+1+a[ee+1+a[te+1+a[ne+1]]]]%32;let le=.6-x*x-b*b-_*_-w*w;le<0?c=0:(le*=le,c=le*le*this.dot4(i[re],x,b,_,w));let ce=.6-F*F-z*z-U*U-N*N;ce<0?u=0:(ce*=ce,u=ce*ce*this.dot4(i[ie],F,z,U,N));let ue=.6-j*j-G*G-Q*Q-H*H;ue<0?h=0:(ue*=ue,h=ue*ue*this.dot4(i[oe],j,G,Q,H));let he=.6-V*V-W*W-q*q-X*X;he<0?d=0:(he*=he,d=he*he*this.dot4(i[ae],V,W,q,X));let de=.6-Y*Y-J*J-K*K-Z*Z;return de<0?f=0:(de*=de,f=de*de*this.dot4(i[se],Y,J,K,Z)),27*(c+u+h+d+f)}));for(let t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());for(let t=0;t<512;t++)this.perm[t]=this.p[255&t]}}const XX=l.forwardRef(((e,t)=>{let{intensity:n=1,decay:r,decayRate:i=.65,maxYaw:o=.1,maxPitch:a=.1,maxRoll:s=.1,yawFrequency:c=.1,pitchFrequency:u=.1,rollFrequency:h=.1}=e;const d=cy((e=>e.camera)),f=cy((e=>e.controls)),p=l.useRef(n),m=l.useRef(d.rotation.clone()),[g]=l.useState((()=>new qX)),[v]=l.useState((()=>new qX)),[y]=l.useState((()=>new qX)),A=()=>{(p.current<0||p.current>1)&&(p.current=p.current<0?0:1)};return l.useImperativeHandle(t,(()=>({getIntensity:()=>p.current,setIntensity:e=>{p.current=e,A()}})),[]),l.useEffect((()=>{if(f){const e=()=>{m.current=d.rotation.clone()};return f.addEventListener("change",e),e(),()=>{f.removeEventListener("change",e)}}}),[d,f]),uy(((e,t)=>{const n=Math.pow(p.current,2),l=o*n*g.noise(e.clock.elapsedTime*c,1),f=a*n*v.noise(e.clock.elapsedTime*u,1),x=s*n*y.noise(e.clock.elapsedTime*h,1);d.rotation.set(m.current.x+f,m.current.y+l,m.current.z+x),r&&p.current>0&&(p.current-=i*t,A())})),null})),YX=l.forwardRef(((e,t)=>{let{children:n,enabled:r=!0,speed:i=1,rotationIntensity:o=1,floatIntensity:a=1,floatingRange:s=[-.1,.1],autoInvalidate:c=!1,...u}=e;const h=l.useRef(null);l.useImperativeHandle(t,(()=>h.current),[]);const d=l.useRef(1e4*Math.random());return uy((e=>{var t,n;if(!r||0===i)return;c&&e.invalidate();const l=d.current+e.clock.getElapsedTime();h.current.rotation.x=Math.cos(l/4*i)/8*o,h.current.rotation.y=Math.sin(l/4*i)/8*o,h.current.rotation.z=Math.sin(l/4*i)/20*o;let u=Math.sin(l/4*i)/10;u=Fi.mapLinear(u,-.1,.1,null!==(t=null==s?void 0:s[0])&&void 0!==t?t:-.1,null!==(n=null==s?void 0:s[1])&&void 0!==n?n:.1),h.current.position.y=u*a,h.current.updateMatrix()})),l.createElement("group",u,l.createElement("group",{ref:h,matrixAutoUpdate:!1},n))}));class JX extends Is{constructor(e,t){var n,r;const i=(o=e)&&o.isCubeTexture;var o;const a=(null!=(r=i?null==(n=e.image[0])?void 0:n.width:e.image.width)?r:1024)/4,s=Math.floor(Math.log2(a)),l=Math.pow(2,s),c=[i?"#define ENVMAP_TYPE_CUBE":"","#define CUBEUV_TEXEL_WIDTH "+1/(3*Math.max(l,112)),"#define CUBEUV_TEXEL_HEIGHT "+1/(4*l),`#define CUBEUV_MAX_MIP ${s}.0`].join("\n")+`\n        #define ENVMAP_TYPE_CUBE_UV\n        varying vec3 vWorldPosition;\n        uniform float radius;\n        uniform float height;\n        uniform float angle;\n        #ifdef ENVMAP_TYPE_CUBE\n            uniform samplerCube map;\n        #else\n            uniform sampler2D map;\n        #endif\n        // From: https://www.shadertoy.com/view/4tsBD7\n        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) \n        {\n            float d = dot ( rd, n );\n            \n            if( d > 0.0 ) { return 1e6; }\n            \n            vec3  o = ro - c;\n            float t = - dot( n, o ) / d;\n            vec3  q = o + rd * t;\n            \n            return ( dot( q, q ) < r * r ) ? t : 1e6;\n        }\n        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm\n        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) \n        {\n            vec3 oc = ro - ce;\n            float b = dot( oc, rd );\n            float c = dot( oc, oc ) - ra * ra;\n            float h = b * b - c;\n            \n            if( h < 0.0 ) { return -1.0; }\n            \n            h = sqrt( h );\n            \n            return - b + h;\n        }\n        vec3 project() \n        {\n            vec3 p = normalize( vWorldPosition );\n            vec3 camPos = cameraPosition;\n            camPos.y -= height;\n            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );\n            if( intersection > 0.0 ) {\n                \n                vec3 h = vec3( 0.0, - height, 0.0 );\n                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );\n                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;\n            } else {\n                p = vec3( 0.0, 1.0, 0.0 );\n            }\n            return p;\n        }\n        #include <common>\n        #include <cube_uv_reflection_fragment>\n        void main() \n        {\n            vec3 projectedWorldPosition = project();\n            \n            #ifdef ENVMAP_TYPE_CUBE\n                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;\n            #else\n                vec3 direction = normalize( projectedWorldPosition );\n                vec2 uv = equirectUv( direction );\n                vec3 outcolor = texture2D( map, uv ).rgb;\n            #endif\n            gl_FragColor = vec4( outcolor, 1.0 );\n            #include <tonemapping_fragment>\n            #include <${parseInt(ze.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>\n        }\n        `,u={map:{value:e},height:{value:(null==t?void 0:t.height)||15},radius:{value:(null==t?void 0:t.radius)||100}};super(new Hf(1,16),new Ls({uniforms:u,fragmentShader:c,vertexShader:"\n        varying vec3 vWorldPosition;\n        void main() \n        {\n            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );\n            vWorldPosition = worldPosition.xyz;\n            \n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",side:Ke}))}set radius(e){this.material.uniforms.radius.value=e}get radius(){return this.material.uniforms.radius.value}set height(e){this.material.uniforms.height.value=e}get height(){return this.material.uniforms.height.value}}class KX extends Qp{constructor(e){super(e),this.type=yn}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},n=function(e,t,n){t=t||1024;let r=e.pos,i=-1,o=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=s.indexOf("\n"))&&o<t&&r<e.byteLength;)a+=s,o+=s.length,r+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=o+i+1),a+s.slice(0,i))},r=function(e,t,n,r){const i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*o,n[r+1]=e[t+1]*o,n[r+2]=e[t+2]*o,n[r+3]=1},i=function(e,t,n,r){const i=e[t+3],o=Math.pow(2,i-128)/255;n[r+0]=Va.toHalfFloat(Math.min(e[t+0]*o,65504)),n[r+1]=Va.toHalfFloat(Math.min(e[t+1]*o,65504)),n[r+2]=Va.toHalfFloat(Math.min(e[t+2]*o,65504)),n[r+3]=Va.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const a=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,a=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,s={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let l,c;for((e.pos>=e.byteLength||!(l=n(e)))&&t(1,"no header found"),(c=l.match(/^#\?(\S+)/))||t(3,"bad initial token"),s.valid|=1,s.programtype=c[1],s.string+=l+"\n";l=n(e),!1!==l;)if(s.string+=l+"\n","#"!==l.charAt(0)){if((c=l.match(r))&&(s.gamma=parseFloat(c[1])),(c=l.match(i))&&(s.exposure=parseFloat(c[1])),(c=l.match(o))&&(s.valid|=2,s.format=c[1]),(c=l.match(a))&&(s.valid|=4,s.height=parseInt(c[1],10),s.width=parseInt(c[2],10)),2&s.valid&&4&s.valid)break}else s.comments+=l+"\n";return 2&s.valid||t(3,"missing format specifier"),4&s.valid||t(3,"missing image size specifier"),s}(o),s=a.width,l=a.height,c=function(e,n,r){const i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);i!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const o=new Uint8Array(4*n*r);o.length||t(4,"unable to allocate buffer space");let a=0,s=0;const l=4*i,c=new Uint8Array(4),u=new Uint8Array(l);let h=r;for(;h>0&&s<e.byteLength;){s+4>e.byteLength&&t(1),c[0]=e[s++],c[1]=e[s++],c[2]=e[s++],c[3]=e[s++],2==c[0]&&2==c[1]&&(c[2]<<8|c[3])==i||t(3,"bad rgbe scanline format");let n,r=0;for(;r<l&&s<e.byteLength;){n=e[s++];const i=n>128;if(i&&(n-=128),(0===n||r+n>l)&&t(3,"bad scanline data"),i){const t=e[s++];for(let e=0;e<n;e++)u[r++]=t}else u.set(e.subarray(s,s+n),r),r+=n,s+=n}const d=i;for(let e=0;e<d;e++){let t=0;o[a]=u[e+t],t+=i,o[a+1]=u[e+t],t+=i,o[a+2]=u[e+t],t+=i,o[a+3]=u[e+t],a+=4}h--}return o}(o.subarray(o.pos),s,l);let u,h,d;switch(this.type){case vn:d=c.length/4;const e=new Float32Array(4*d);for(let n=0;n<d;n++)r(c,4*n,e,4*n);u=e,h=vn;break;case yn:d=c.length/4;const t=new Uint16Array(4*d);for(let n=0;n<d;n++)i(c,4*n,t,4*n);u=t,h=yn;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:s,height:l,data:u,header:a.string,gamma:a.gamma,exposure:a.exposure,type:h}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){switch(e.type){case vn:case yn:"colorSpace"in e?e.colorSpace="srgb-linear":e.encoding=3e3,e.minFilter=an,e.magFilter=an,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,r)}}const ZX="colorSpace"in new so;class $X extends Qp{constructor(e){super(e),this.type=yn}parse(e){const t=65536,n=14,r=65537,i=16384,o=Math.pow(2.7182818,2.2);const a={l:0,c:0,lc:0};function s(e,t,n,r,i){for(;n<e;)t=t<<8|j(r,i),n+=8;n-=e,a.l=t>>n&(1<<e)-1,a.c=t,a.lc=n}const l=new Array(59);function c(e,t,n,i,o,c,u){for(var h=n,d=0,f=0;o<=c;o++){if(h.value-n.value>i)return!1;s(6,d,f,e,h);var p=a.l;if(d=a.c,f=a.lc,u[o]=p,63==p){if(h.value-n.value>i)throw"Something wrong with hufUnpackEncTable";s(8,d,f,e,h);var m=a.l+6;if(d=a.c,f=a.lc,o+m>c+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)u[o++]=0;o--}else if(p>=59){if(o+(m=p-59+2)>c+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)u[o++]=0;o--}}!function(e){for(var t=0;t<=58;++t)l[t]=0;for(t=0;t<r;++t)l[e[t]]+=1;var n=0;for(t=58;t>0;--t){var i=n+l[t]>>1;l[t]=n,n=i}for(t=0;t<r;++t){var o=e[t];o>0&&(e[t]=o|l[o]++<<6)}}(u)}function u(e){return 63&e}function h(e){return e>>6}const d={c:0,lc:0};function f(e,t,n,r){e=e<<8|j(n,r),t+=8,d.c=e,d.lc=t}const p={c:0,lc:0};function m(e,t,n,r,i,o,a,s,l,c){if(e==t){r<8&&(f(n,r,i,a),n=d.c,r=d.lc);var u=n>>(r-=8);u=new Uint8Array([u])[0];if(l.value+u>c)return!1;for(var h=s[l.value-1];u-- >0;)s[l.value++]=h}else{if(!(l.value<c))return!1;s[l.value++]=e}p.c=n,p.lc=r}function g(e){return 65535&e}function v(e){var t=g(e);return t>32767?t-65536:t}const y={a:0,b:0};function A(e,t){var n=v(e),r=v(t),i=n+(1&r)+(r>>1),o=i,a=i-r;y.a=o,y.b=a}function x(e,t){var n=g(e),r=g(t),i=n-(r>>1)&65535,o=r+i-32768&65535;y.a=o,y.b=i}function b(e,t,n,r,i,o,a){for(var s,l=a<16384,c=n>i?i:n,u=1;u<=c;)u<<=1;for(s=u>>=1,u>>=1;u>=1;){for(var h,d,f,p,m=0,g=m+o*(i-s),v=o*u,b=o*s,_=r*u,w=r*s;m<=g;m+=b){for(var E=m,S=m+r*(n-s);E<=S;E+=w){var C=E+_,M=(T=E+v)+_;l?(A(e[E+t],e[T+t]),h=y.a,f=y.b,A(e[C+t],e[M+t]),d=y.a,p=y.b,A(h,d),e[E+t]=y.a,e[C+t]=y.b,A(f,p),e[T+t]=y.a,e[M+t]=y.b):(x(e[E+t],e[T+t]),h=y.a,f=y.b,x(e[C+t],e[M+t]),d=y.a,p=y.b,x(h,d),e[E+t]=y.a,e[C+t]=y.b,x(f,p),e[T+t]=y.a,e[M+t]=y.b)}if(n&u){var T=E+v;l?A(e[E+t],e[T+t]):x(e[E+t],e[T+t]),h=y.a,e[T+t]=y.b,e[E+t]=h}}if(i&u)for(E=m,S=m+r*(n-s);E<=S;E+=w){C=E+_;l?A(e[E+t],e[C+t]):x(e[E+t],e[C+t]),h=y.a,e[C+t]=y.b,e[E+t]=h}s=u,u>>=1}return m}function _(e,t,o,a,s,l){var g=o.value,v=N(t,o),y=N(t,o);o.value+=4;var A=N(t,o);if(o.value+=4,v<0||v>=r||y<0||y>=r)throw"Something wrong with HUF_ENCSIZE";var x=new Array(r),b=new Array(i);if(function(e){for(var t=0;t<i;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(b),c(e,0,o,a-(o.value-g),v,y,x),A>8*(a-(o.value-g)))throw"Something wrong with hufUncompress";!function(e,t,r,i){for(;t<=r;t++){var o=h(e[t]),a=u(e[t]);if(o>>a)throw"Invalid table entry";if(a>n){if((d=i[o>>a-n]).len)throw"Invalid table entry";if(d.lit++,d.p){var s=d.p;d.p=new Array(d.lit);for(var l=0;l<d.lit-1;++l)d.p[l]=s[l]}else d.p=new Array(1);d.p[d.lit-1]=t}else if(a){var c=0;for(l=1<<n-a;l>0;l--){var d;if((d=i[(o<<n-a)+c]).len||d.p)throw"Invalid table entry";d.len=a,d.lit=t,c++}}}}(x,v,y,b),function(e,t,r,i,o,a,s,l,c,g){for(var v=0,y=0,A=l,x=Math.trunc(o.value+(a+7)/8);o.value<x;)for(f(v,y,r,o),v=d.c,y=d.lc;y>=n;)if((E=t[v>>y-n&16383]).len)y-=E.len,m(E.lit,s,v,y,r,0,o,c,g,A),v=p.c,y=p.lc;else{if(!E.p)throw"hufDecode issues";var b;for(b=0;b<E.lit;b++){for(var _=u(e[E.p[b]]);y<_&&o.value<x;)f(v,y,r,o),v=d.c,y=d.lc;if(y>=_&&h(e[E.p[b]])==(v>>y-_&(1<<_)-1)){y-=_,m(E.p[b],s,v,y,r,0,o,c,g,A),v=p.c,y=p.lc;break}}if(b==E.lit)throw"hufDecode issues"}var w=8-a&7;for(v>>=w,y-=w;y>0;){var E;if(!(E=t[v<<n-y&16383]).len)throw"hufDecode issues";y-=E.len,m(E.lit,s,v,y,r,0,o,c,g,A),v=p.c,y=p.lc}}(x,b,e,0,o,A,y,l,s,{value:0})}function w(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function E(e,t){for(var n=0,r=Math.floor((e.length+1)/2),i=0,o=e.length-1;!(i>o)&&(t[i++]=e[n++],!(i>o));)t[i++]=e[r++]}function S(e){for(var t=e.byteLength,n=new Array,r=0,i=new DataView(e);t>0;){var o=i.getInt8(r++);if(o<0){t-=(s=-o)+1;for(var a=0;a<s;a++)n.push(i.getUint8(r++))}else{var s=o;t-=2;var l=i.getUint8(r++);for(a=0;a<s+1;a++)n.push(l)}}return n}function C(e,t,n){for(var r,i=1;i<64;)65280==(r=t[e.value])?i=64:r>>8==255?i+=255&r:(n[i]=r,i++),e.value++}function M(e,t){t[0]=W(e[0]),t[1]=W(e[1]),t[2]=W(e[5]),t[3]=W(e[6]),t[4]=W(e[14]),t[5]=W(e[15]),t[6]=W(e[27]),t[7]=W(e[28]),t[8]=W(e[2]),t[9]=W(e[4]),t[10]=W(e[7]),t[11]=W(e[13]),t[12]=W(e[16]),t[13]=W(e[26]),t[14]=W(e[29]),t[15]=W(e[42]),t[16]=W(e[3]),t[17]=W(e[8]),t[18]=W(e[12]),t[19]=W(e[17]),t[20]=W(e[25]),t[21]=W(e[30]),t[22]=W(e[41]),t[23]=W(e[43]),t[24]=W(e[9]),t[25]=W(e[11]),t[26]=W(e[18]),t[27]=W(e[24]),t[28]=W(e[31]),t[29]=W(e[40]),t[30]=W(e[44]),t[31]=W(e[53]),t[32]=W(e[10]),t[33]=W(e[19]),t[34]=W(e[23]),t[35]=W(e[32]),t[36]=W(e[39]),t[37]=W(e[45]),t[38]=W(e[52]),t[39]=W(e[54]),t[40]=W(e[20]),t[41]=W(e[22]),t[42]=W(e[33]),t[43]=W(e[38]),t[44]=W(e[46]),t[45]=W(e[51]),t[46]=W(e[55]),t[47]=W(e[60]),t[48]=W(e[21]),t[49]=W(e[34]),t[50]=W(e[37]),t[51]=W(e[47]),t[52]=W(e[50]),t[53]=W(e[56]),t[54]=W(e[59]),t[55]=W(e[61]),t[56]=W(e[35]),t[57]=W(e[36]),t[58]=W(e[48]),t[59]=W(e[49]),t[60]=W(e[57]),t[61]=W(e[58]),t[62]=W(e[62]),t[63]=W(e[63])}function T(e){const t=.5*Math.cos(.7853975),n=.5*Math.cos(3.14159/16),r=.5*Math.cos(3.14159/8),i=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),a=.5*Math.cos(3*3.14159/8),s=.5*Math.cos(1.374445625);for(var l=new Array(4),c=new Array(4),u=new Array(4),h=new Array(4),d=0;d<8;++d){var f=8*d;l[0]=r*e[f+2],l[1]=a*e[f+2],l[2]=r*e[f+6],l[3]=a*e[f+6],c[0]=n*e[f+1]+i*e[f+3]+o*e[f+5]+s*e[f+7],c[1]=i*e[f+1]-s*e[f+3]-n*e[f+5]-o*e[f+7],c[2]=o*e[f+1]-n*e[f+3]+s*e[f+5]+i*e[f+7],c[3]=s*e[f+1]-o*e[f+3]+i*e[f+5]-n*e[f+7],u[0]=t*(e[f+0]+e[f+4]),u[3]=t*(e[f+0]-e[f+4]),u[1]=l[0]+l[3],u[2]=l[1]-l[2],h[0]=u[0]+u[1],h[1]=u[3]+u[2],h[2]=u[3]-u[2],h[3]=u[0]-u[1],e[f+0]=h[0]+c[0],e[f+1]=h[1]+c[1],e[f+2]=h[2]+c[2],e[f+3]=h[3]+c[3],e[f+4]=h[3]-c[3],e[f+5]=h[2]-c[2],e[f+6]=h[1]-c[1],e[f+7]=h[0]-c[0]}for(var p=0;p<8;++p)l[0]=r*e[16+p],l[1]=a*e[16+p],l[2]=r*e[48+p],l[3]=a*e[48+p],c[0]=n*e[8+p]+i*e[24+p]+o*e[40+p]+s*e[56+p],c[1]=i*e[8+p]-s*e[24+p]-n*e[40+p]-o*e[56+p],c[2]=o*e[8+p]-n*e[24+p]+s*e[40+p]+i*e[56+p],c[3]=s*e[8+p]-o*e[24+p]+i*e[40+p]-n*e[56+p],u[0]=t*(e[p]+e[32+p]),u[3]=t*(e[p]-e[32+p]),u[1]=l[0]+l[3],u[2]=l[1]-l[2],h[0]=u[0]+u[1],h[1]=u[3]+u[2],h[2]=u[3]-u[2],h[3]=u[0]-u[1],e[0+p]=h[0]+c[0],e[8+p]=h[1]+c[1],e[16+p]=h[2]+c[2],e[24+p]=h[3]+c[3],e[32+p]=h[3]-c[3],e[40+p]=h[2]-c[2],e[48+p]=h[1]-c[1],e[56+p]=h[0]-c[0]}function I(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],i=e[2][t];e[0][t]=n+1.5747*i,e[1][t]=n-.1873*r-.4682*i,e[2][t]=n+1.8556*r}}function B(e,t,n){for(var r=0;r<64;++r)t[n+r]=Va.toHalfFloat(P(e[r]))}function P(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(o,Math.abs(e)-1)}function R(e){return new DataView(e.array.buffer,e.offset.value,e.size)}function D(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(S(t)),r=new Uint8Array(n.length);return w(n),E(n,r),new DataView(r.buffer)}function O(e){var t=Gj(e.array.slice(e.offset.value,e.offset.value+e.size)),n=new Uint8Array(t.length);return w(t),E(t,n),new DataView(n.buffer)}function k(e){for(var n=e.viewer,r={value:e.offset.value},i=new Uint16Array(e.width*e.scanlineBlockSize*(e.channels*e.type)),o=new Uint8Array(8192),a=0,s=new Array(e.channels),l=0;l<e.channels;l++)s[l]={},s[l].start=a,s[l].end=s[l].start,s[l].nx=e.width,s[l].ny=e.lines,s[l].size=e.type,a+=s[l].nx*s[l].ny*s[l].size;var c=q(n,r),u=q(n,r);if(u>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(c<=u)for(l=0;l<u-c+1;l++)o[l+c]=G(n,r);var h=new Uint16Array(t),d=function(e,n){for(var r=0,i=0;i<t;++i)(0==i||e[i>>3]&1<<(7&i))&&(n[r++]=i);for(var o=r-1;r<t;)n[r++]=0;return o}(o,h),f=N(n,r);_(e.array,n,r,f,i,a);for(l=0;l<e.channels;++l)for(var p=s[l],m=0;m<s[l].size;++m)b(i,p.start+m,p.nx,p.size,p.ny,p.nx*p.size,d);!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(h,i,a);for(var g=0,v=new Uint8Array(i.buffer.byteLength),y=0;y<e.lines;y++)for(var A=0;A<e.channels;A++){var x=(p=s[A]).nx*p.size,w=new Uint8Array(i.buffer,2*p.end,2*x);v.set(w,g),g+=2*x,p.end+=x}return new DataView(v.buffer)}function L(e){var t=Gj(e.array.slice(e.offset.value,e.offset.value+e.size));const n=e.lines*e.channels*e.width,r=1==e.type?new Uint16Array(n):new Uint32Array(n);let i=0,o=0;const a=new Array(4);for(let s=0;s<e.lines;s++)for(let n=0;n<e.channels;n++){let n=0;switch(e.type){case 1:a[0]=i,a[1]=a[0]+e.width,i=a[1]+e.width;for(let i=0;i<e.width;++i){n+=t[a[0]++]<<8|t[a[1]++],r[o]=n,o++}break;case 2:a[0]=i,a[1]=a[0]+e.width,a[2]=a[1]+e.width,i=a[2]+e.width;for(let i=0;i<e.width;++i){n+=t[a[0]++]<<24|t[a[1]++]<<16|t[a[2]++]<<8,r[o]=n,o++}}}return new DataView(r.buffer)}function F(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*(e.channels*e.type*2)),i={version:Q(t,n),unknownUncompressedSize:Q(t,n),unknownCompressedSize:Q(t,n),acCompressedSize:Q(t,n),dcCompressedSize:Q(t,n),rleCompressedSize:Q(t,n),rleUncompressedSize:Q(t,n),rleRawSize:Q(t,n),totalAcUncompressedCount:Q(t,n),totalDcUncompressedCount:Q(t,n),acCompression:Q(t,n)};if(i.version<2)throw"EXRLoader.parse: "+$.compression+" version "+i.version+" is unsupported";for(var o=new Array,a=q(t,n)-2;a>0;){var s=z(t.buffer,n),l=G(t,n),c=l>>2&3,u=new Int8Array([(l>>4)-1])[0],h=G(t,n);o.push({name:s,index:u,type:h,compression:c}),a-=s.length+3}for(var d=$.channels,f=new Array(e.channels),p=0;p<e.channels;++p){var m=f[p]={},g=d[p];m.name=g.name,m.compression=0,m.decoded=!1,m.type=g.pixelType,m.pLinear=g.pLinear,m.width=e.width,m.height=e.lines}for(var v={idx:new Array(3)},y=0;y<e.channels;++y)for(m=f[y],p=0;p<o.length;++p){var A=o[p];m.name==A.name&&(m.compression=A.compression,A.index>=0&&(v.idx[A.index]=y),m.offset=y)}if(i.acCompressedSize>0)switch(i.acCompression){case 0:var x=new Uint16Array(i.totalAcUncompressedCount);_(e.array,t,n,i.acCompressedSize,x,i.totalAcUncompressedCount);break;case 1:var b=Gj(e.array.slice(n.value,n.value+i.totalAcUncompressedCount));x=new Uint16Array(b.buffer);n.value+=i.totalAcUncompressedCount}if(i.dcCompressedSize>0){var w={array:e.array,offset:n,size:i.dcCompressedSize},E=new Uint16Array(O(w).buffer);n.value+=i.dcCompressedSize}if(i.rleRawSize>0){var P=S((b=Gj(e.array.slice(n.value,n.value+i.rleCompressedSize))).buffer);n.value+=i.rleCompressedSize}var R=0,D=new Array(f.length);for(p=0;p<D.length;++p)D[p]=new Array;for(var k=0;k<e.lines;++k)for(var L=0;L<f.length;++L)D[L].push(R),R+=f[L].width*e.type*2;!function(e,t,n,r,i,o){var a=new DataView(o.buffer),s=n[e.idx[0]].width,l=n[e.idx[0]].height,c=Math.floor(s/8),u=Math.ceil(s/8),h=Math.ceil(l/8),d=s-8*(u-1),f=l-8*(h-1),p={value:0},m=new Array(3),g=new Array(3),v=new Array(3),y=new Array(3),A=new Array(3);for(let C=0;C<3;++C)A[C]=t[e.idx[C]],m[C]=C<1?0:m[C-1]+u*h,g[C]=new Float32Array(64),v[C]=new Uint16Array(64),y[C]=new Uint16Array(64*u);for(let R=0;R<h;++R){var x=8;R==h-1&&(x=f);var b=8;for(let e=0;e<u;++e){e==u-1&&(b=d);for(let e=0;e<3;++e)v[e].fill(0),v[e][0]=i[m[e]++],C(p,r,v[e]),M(v[e],g[e]),T(g[e]);I(g);for(let t=0;t<3;++t)B(g[t],y[t],64*e)}let t=0;for(let r=0;r<3;++r){const i=n[e.idx[r]].type;for(let e=8*R;e<8*R+x;++e){t=A[r][e];for(let n=0;n<c;++n){const o=64*n+8*(7&e);a.setUint16(t+0*i,y[r][o+0],!0),a.setUint16(t+2*i,y[r][o+1],!0),a.setUint16(t+4*i,y[r][o+2],!0),a.setUint16(t+6*i,y[r][o+3],!0),a.setUint16(t+8*i,y[r][o+4],!0),a.setUint16(t+10*i,y[r][o+5],!0),a.setUint16(t+12*i,y[r][o+6],!0),a.setUint16(t+14*i,y[r][o+7],!0),t+=16*i}}if(c!=u)for(let e=8*R;e<8*R+x;++e){const t=A[r][e]+8*c*2*i,n=64*c+8*(7&e);for(let e=0;e<b;++e)a.setUint16(t+2*e*i,y[r][n+e],!0)}}}for(var _=new Uint16Array(s),w=(a=new DataView(o.buffer),0);w<3;++w){n[e.idx[w]].decoded=!0;var E=n[e.idx[w]].type;if(2==n[w].type)for(var S=0;S<l;++S){const e=A[w][S];for(var P=0;P<s;++P)_[P]=a.getUint16(e+2*P*E,!0);for(P=0;P<s;++P)a.setFloat32(e+2*P*E,W(_[P]),!0)}}}(v,D,f,x,E,r);for(p=0;p<f.length;++p){if(!(m=f[p]).decoded){if(2!==m.compression)throw"EXRLoader.parse: unsupported channel compression";var F=0,U=0;for(k=0;k<e.lines;++k){for(var N=D[p][F],j=0;j<m.width;++j){for(var H=0;H<2*m.type;++H)r[N++]=P[U+H*m.width*m.height];U++}F++}}}return new DataView(r.buffer)}function z(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var i=(new TextDecoder).decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,i}function U(e,t){var n=e.getInt32(t.value,!0);return t.value=t.value+4,n}function N(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function j(e,t){var n=e[t.value];return t.value=t.value+1,n}function G(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}const Q=function(e,t){let n;return n="getBigInt64"in DataView.prototype?Number(e.getBigInt64(t.value,!0)):e.getUint32(t.value+4,!0)+Number(e.getUint32(t.value,!0)<<32),t.value+=8,n};function H(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function V(e,t){return Va.toHalfFloat(H(e,t))}function W(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}function q(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function X(e,t){return W(q(e,t))}function Y(e,t,n,r,i){return"string"===r||"stringvector"===r||"iccProfile"===r?function(e,t,n){var r=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,r}(t,n,i):"chlist"===r?function(e,t,n,r){for(var i=n.value,o=[];n.value<i+r-1;){var a=z(t,n),s=U(e,n),l=G(e,n);n.value+=3;var c=U(e,n),u=U(e,n);o.push({name:a,pixelType:s,pLinear:l,xSampling:c,ySampling:u})}return n.value+=1,o}(e,t,n,i):"chromaticities"===r?function(e,t){return{redX:H(e,t),redY:H(e,t),greenX:H(e,t),greenY:H(e,t),blueX:H(e,t),blueY:H(e,t),whiteX:H(e,t),whiteY:H(e,t)}}(e,n):"compression"===r?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][G(e,t)]}(e,n):"box2i"===r?function(e,t){return{xMin:N(e,t),yMin:N(e,t),xMax:N(e,t),yMax:N(e,t)}}(e,n):"lineOrder"===r?function(e,t){return["INCREASING_Y"][G(e,t)]}(e,n):"float"===r?H(e,n):"v2f"===r?function(e,t){return[H(e,t),H(e,t)]}(e,n):"v3f"===r?function(e,t){return[H(e,t),H(e,t),H(e,t)]}(e,n):"int"===r?U(e,n):"rational"===r?function(e,t){return[U(e,t),N(e,t)]}(e,n):"timecode"===r?function(e,t){return[N(e,t),N(e,t)]}(e,n):"preview"===r?(n.value+=i,"skipped"):void(n.value+=i)}const J=new DataView(e),K=new Uint8Array(e),Z={value:0},$=function(e,t,n){const r={};if(20000630!=e.getUint32(0,!0))throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";r.version=e.getUint8(4);const i=e.getUint8(5);r.spec={singleTile:!!(2&i),longName:!!(4&i),deepFormat:!!(8&i),multiPart:!!(16&i)},n.value=8;for(var o=!0;o;){var a=z(t,n);if(0==a)o=!1;else{var s=z(t,n),l=Y(e,t,n,s,N(e,n));void 0===l?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${s}'.`):r[a]=l}}if(0!=(-5&i))throw console.error("EXRHeader:",r),"THREE.EXRLoader: provided file is currently unsupported.";return r}(J,e,Z),ee=function(e,t,n,r,i){const o={size:0,viewer:t,array:n,offset:r,width:e.dataWindow.xMax-e.dataWindow.xMin+1,height:e.dataWindow.yMax-e.dataWindow.yMin+1,channels:e.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:e.channels[0].pixelType,uncompress:null,getter:null,format:null,[ZX?"colorSpace":"encoding"]:null};switch(e.compression){case"NO_COMPRESSION":o.lines=1,o.uncompress=R;break;case"RLE_COMPRESSION":o.lines=1,o.uncompress=D;break;case"ZIPS_COMPRESSION":o.lines=1,o.uncompress=O;break;case"ZIP_COMPRESSION":o.lines=16,o.uncompress=O;break;case"PIZ_COMPRESSION":o.lines=32,o.uncompress=k;break;case"PXR24_COMPRESSION":o.lines=16,o.uncompress=L;break;case"DWAA_COMPRESSION":o.lines=32,o.uncompress=F;break;case"DWAB_COMPRESSION":o.lines=256,o.uncompress=F;break;default:throw"EXRLoader.parse: "+e.compression+" is unsupported"}if(o.scanlineBlockSize=o.lines,1==o.type)switch(i){case vn:o.getter=X,o.inputSize=2;break;case yn:o.getter=q,o.inputSize=2}else{if(2!=o.type)throw"EXRLoader.parse: unsupported pixelType "+o.type+" for "+e.compression+".";switch(i){case vn:o.getter=H,o.inputSize=4;break;case yn:o.getter=V,o.inputSize=4}}o.blockCount=(e.dataWindow.yMax+1)/o.scanlineBlockSize;for(var a=0;a<o.blockCount;a++)Q(t,r);o.outputChannels=3==o.channels?4:o.channels;const s=o.width*o.height*o.outputChannels;switch(i){case vn:o.byteArray=new Float32Array(s),o.channels<o.outputChannels&&o.byteArray.fill(1,0,s);break;case yn:o.byteArray=new Uint16Array(s),o.channels<o.outputChannels&&o.byteArray.fill(15360,0,s);break;default:console.error("THREE.EXRLoader: unsupported type: ",i)}return o.bytesPerLine=o.width*o.inputSize*o.channels,4==o.outputChannels?o.format=Sn:o.format=Bn,ZX?o.colorSpace="srgb-linear":o.encoding=3e3,o}($,J,K,Z,this.type),te={value:0},ne={R:0,G:1,B:2,A:3,Y:0};for(let re=0;re<ee.height/ee.scanlineBlockSize;re++){const e=N(J,Z);ee.size=N(J,Z),ee.lines=e+ee.scanlineBlockSize>ee.height?ee.height-e:ee.scanlineBlockSize;const t=ee.size<ee.lines*ee.bytesPerLine?ee.uncompress(ee):R(ee);Z.value+=ee.size;for(let n=0;n<ee.scanlineBlockSize;n++){const e=n+re*ee.scanlineBlockSize;if(e>=ee.height)break;for(let r=0;r<ee.channels;r++){const i=ne[$.channels[r].name];for(let o=0;o<ee.width;o++){te.value=(n*(ee.channels*ee.width)+r*ee.width+o)*ee.inputSize;const a=(ee.height-1-e)*(ee.width*ee.outputChannels)+o*ee.outputChannels+i;ee.byteArray[a]=ee.getter(t,te)}}}}return{header:$,width:ee.width,height:ee.height,data:ee.byteArray,format:ee.format,[ZX?"colorSpace":"encoding"]:ee[ZX?"colorSpace":"encoding"],type:this.type}}setDataType(e){return this.type=e,this}load(e,t,n,r){return super.load(e,(function(e,n){ZX?e.colorSpace=n.colorSpace:e.encoding=n.encoding,e.minFilter=an,e.magFilter=an,e.generateMipmaps=!1,e.flipY=!1,t&&t(e,n)}),n,r)}}const eY=(e,t,n)=>{let r;switch(e){case hn:r=new Uint8ClampedArray(t*n*4);break;case yn:r=new Uint16Array(t*n*4);break;case gn:r=new Uint32Array(t*n*4);break;case dn:r=new Int8Array(t*n*4);break;case fn:r=new Int16Array(t*n*4);break;case mn:r=new Int32Array(t*n*4);break;case vn:r=new Float32Array(t*n*4);break;default:throw new Error("Unsupported data type")}return r};let tY;class nY{constructor(e){var t,n,r,i,o,a,s,l,c,u,h,d,f,p,m,g;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(NQ){throw this._renderer.setRenderTarget(null),NQ}this._renderer.setRenderTarget(null)},this._width=e.width,this._height=e.height,this._type=e.type,this._colorSpace=e.colorSpace;const v={format:Sn,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:void 0!==(null===(t=e.renderTargetOptions)||void 0===t?void 0:t.anisotropy)?null===(n=e.renderTargetOptions)||void 0===n?void 0:n.anisotropy:1,generateMipmaps:void 0!==(null===(r=e.renderTargetOptions)||void 0===r?void 0:r.generateMipmaps)&&(null===(i=e.renderTargetOptions)||void 0===i?void 0:i.generateMipmaps),magFilter:void 0!==(null===(o=e.renderTargetOptions)||void 0===o?void 0:o.magFilter)?null===(a=e.renderTargetOptions)||void 0===a?void 0:a.magFilter:an,minFilter:void 0!==(null===(s=e.renderTargetOptions)||void 0===s?void 0:s.minFilter)?null===(l=e.renderTargetOptions)||void 0===l?void 0:l.minFilter:an,samples:void 0!==(null===(c=e.renderTargetOptions)||void 0===c?void 0:c.samples)?null===(u=e.renderTargetOptions)||void 0===u?void 0:u.samples:void 0,wrapS:void 0!==(null===(h=e.renderTargetOptions)||void 0===h?void 0:h.wrapS)?null===(d=e.renderTargetOptions)||void 0===d?void 0:d.wrapS:Zt,wrapT:void 0!==(null===(f=e.renderTargetOptions)||void 0===f?void 0:f.wrapT)?null===(p=e.renderTargetOptions)||void 0===p?void 0:p.wrapT:Zt};if(this._material=e.material,e.renderer?this._renderer=e.renderer:(this._renderer=nY.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new qu,this._camera=new pl,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!((e,t,n,r)=>{if(void 0!==tY)return tY;const i=new uo(1,1,r);t.setRenderTarget(i);const o=new Is(new tl,new Na({color:16777215}));t.render(o,n),t.setRenderTarget(null);const a=eY(e,i.width,i.height);return t.readRenderTargetPixels(i,0,0,i.width,i.height,a),i.dispose(),o.geometry.dispose(),o.material.dispose(),tY=0!==a[0],tY})(this._type,this._renderer,this._camera,v)){let e;if(this._type===yn)e=this._renderer.extensions.has("EXT_color_buffer_float")?vn:void 0;void 0!==e?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${vn}`),this._type=e):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Is(new tl,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new uo(this.width,this.height,v),this._renderTarget.texture.mapping=void 0!==(null===(m=e.renderTargetOptions)||void 0===m?void 0:m.mapping)?null===(g=e.renderTargetOptions)||void 0===g?void 0:g.mapping:Vt}static instantiateRenderer(){const e=new Hu;return e.setSize(128,128),e}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const e=eY(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,e),e}toDataTexture(e){const t=new Mh(this.toArray(),this.width,this.height,Sn,this._type,(null===e||void 0===e?void 0:e.mapping)||Vt,(null===e||void 0===e?void 0:e.wrapS)||Zt,(null===e||void 0===e?void 0:e.wrapT)||Zt,(null===e||void 0===e?void 0:e.magFilter)||an,(null===e||void 0===e?void 0:e.minFilter)||an,(null===e||void 0===e?void 0:e.anisotropy)||1,Lr);return t.generateMipmaps=void 0!==(null===e||void 0===e?void 0:e.generateMipmaps)&&(null===e||void 0===e?void 0:e.generateMipmaps),t}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(e){this.disposeOnDemandRenderer(),e&&this.renderTarget.dispose(),this.material instanceof Ls&&Object.values(this.material.uniforms).forEach((e=>{e.value instanceof so&&e.value.dispose()})),Object.values(this.material).forEach((e=>{e instanceof so&&e.dispose()})),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(e){this._width=e,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(e){this._height=e,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(e){this._renderTarget=e,this._width=e.width,this._height=e.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}class rY extends Ls{constructor(e){let{gamma:t,offsetHdr:n,offsetSdr:r,gainMapMin:i,gainMapMax:o,maxDisplayBoost:a,hdrCapacityMin:s,hdrCapacityMax:l,sdr:c,gainMap:u}=e;super({name:"GainMapDecoderMaterial",vertexShader:"\nvarying vec2 vUv;\n\nvoid main() {\n  vUv = uv;\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}\n",fragmentShader:"\n// min half float value\n#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )\n// max half float value\n#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )\n\nuniform sampler2D sdr;\nuniform sampler2D gainMap;\nuniform vec3 gamma;\nuniform vec3 offsetHdr;\nuniform vec3 offsetSdr;\nuniform vec3 gainMapMin;\nuniform vec3 gainMapMax;\nuniform float weightFactor;\n\nvarying vec2 vUv;\n\nvoid main() {\n  vec3 rgb = texture2D( sdr, vUv ).rgb;\n  vec3 recovery = texture2D( gainMap, vUv ).rgb;\n  vec3 logRecovery = pow( recovery, gamma );\n  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;\n  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;\n  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));\n  gl_FragColor = vec4( clampedHdrColor , 1.0 );\n}\n",uniforms:{sdr:{value:c},gainMap:{value:u},gamma:{value:new vo(1/t[0],1/t[1],1/t[2])},offsetHdr:{value:(new vo).fromArray(n)},offsetSdr:{value:(new vo).fromArray(r)},gainMapMin:{value:(new vo).fromArray(i)},gainMapMax:{value:(new vo).fromArray(o)},weightFactor:{value:(Math.log2(a)-s)/(l-s)}},blending:Ze,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=a,this._hdrCapacityMin=s,this._hdrCapacityMax=l,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(e){this.uniforms.sdr.value=e}get gainMap(){return this.uniforms.gainMap.value}set gainMap(e){this.uniforms.gainMap.value=e}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(e){this.uniforms.offsetHdr.value.fromArray(e)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(e){this.uniforms.offsetSdr.value.fromArray(e)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(e){this.uniforms.gainMapMin.value.fromArray(e)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(e){this.uniforms.gainMapMax.value.fromArray(e)}get gamma(){const e=this.uniforms.gamma.value;return[1/e.x,1/e.y,1/e.z]}set gamma(e){const t=this.uniforms.gamma.value;t.x=1/e[0],t.y=1/e[1],t.z=1/e[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(e){this._hdrCapacityMin=e,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(e){this._hdrCapacityMax=e,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(e){this._maxDisplayBoost=Math.max(1,Math.min(65504,e)),this.calculateWeight()}calculateWeight(){const e=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,e))}}class iY extends Error{}class oY extends Error{}const aY=(e,t,n)=>{var r;let i;const o=null===(r=e.attributes.getNamedItem(t))||void 0===r?void 0:r.nodeValue;if(o)i=o;else{const r=e.getElementsByTagName(t)[0];if(!r){if(n)return n;throw new Error(`Can't find ${t} in gainmap metadata`)}{const e=r.getElementsByTagName("rdf:li");if(3!==e.length)throw new Error(`Gainmap metadata contains an array of items for ${t} but its length is not 3`);i=Array.from(e).map((e=>e.innerHTML))}}return i};class sY{constructor(e){this.options={debug:!(!e||void 0===e.debug)&&e.debug,extractFII:!e||void 0===e.extractFII||e.extractFII,extractNonFII:!e||void 0===e.extractNonFII||e.extractNonFII}}extract(e){return new Promise(((t,n)=>{const r=this.options.debug,i=new DataView(e.buffer);if(65496!==i.getUint16(0))return void n(new Error("Not a valid jpeg"));const o=i.byteLength;let a,s=2,l=0;for(;s<o;){if(++l>250)return void n(new Error(`Found no marker after ${l} loops \ud83d\ude35`));if(255!==i.getUint8(s))return void n(new Error(`Not a valid marker at offset 0x${s.toString(16)}, found: 0x${i.getUint8(s).toString(16)}`));if(a=i.getUint8(s+1),r&&console.log(`Marker: ${a.toString(16)}`),226===a){r&&console.log("Found APP2 marker (0xffe2)");const e=s+4;if(1297106432===i.getUint32(e)){const r=e+4;let o;if(18761===i.getUint16(r))o=!1;else{if(19789!==i.getUint16(r))return void n(new Error("No valid endianness marker found in TIFF header"));o=!0}if(42!==i.getUint16(r+2,!o))return void n(new Error("Not valid TIFF data! (no 0x002A marker)"));const a=i.getUint32(r+4,!o);if(a<8)return void n(new Error("Not valid TIFF data! (First offset less than 8)"));const s=r+a,l=i.getUint16(s,!o),c=s+2;let u=0;for(let e=c;e<c+12*l;e+=12)45057===i.getUint16(e,!o)&&(u=i.getUint32(e+8,!o));const h=s+2+12*l+4,d=[];for(let e=h;e<h+16*u;e+=16){const t={MPType:i.getUint32(e,!o),size:i.getUint32(e+4,!o),dataOffset:i.getUint32(e+8,!o),dependantImages:i.getUint32(e+12,!o),start:-1,end:-1,isFII:!1};t.dataOffset?(t.start=r+t.dataOffset,t.isFII=!1):(t.start=0,t.isFII=!0),t.end=t.start+t.size,d.push(t)}if(this.options.extractNonFII&&d.length){const e=new Blob([i]),n=[];for(const t of d){if(t.isFII&&!this.options.extractFII)continue;const r=e.slice(t.start,t.end+1,"image/jpeg");n.push(r)}t(n)}}}s+=2+i.getUint16(s+2)}}))}}const lY=async e=>{const t=(e=>{var t,n;let r;r="undefined"!==typeof TextDecoder?(new TextDecoder).decode(e):e.toString();let i=r.indexOf("<x:xmpmeta");const o=new DOMParser;for(;-1!==i;){const e=r.indexOf("x:xmpmeta>",i);r.slice(i,e+10);const a=r.slice(i,e+10);try{const e=o.parseFromString(a,"text/xml").getElementsByTagName("rdf:Description")[0],r=aY(e,"hdrgm:GainMapMin","0"),i=aY(e,"hdrgm:GainMapMax"),s=aY(e,"hdrgm:Gamma","1"),l=aY(e,"hdrgm:OffsetSDR","0.015625"),c=aY(e,"hdrgm:OffsetHDR","0.015625");let u=null===(t=e.attributes.getNamedItem("hdrgm:HDRCapacityMin"))||void 0===t?void 0:t.nodeValue;u||(u="0");const h=null===(n=e.attributes.getNamedItem("hdrgm:HDRCapacityMax"))||void 0===n?void 0:n.nodeValue;if(!h)throw new Error("Incomplete gainmap metadata");return{gainMapMin:Array.isArray(r)?r.map((e=>parseFloat(e))):[parseFloat(r),parseFloat(r),parseFloat(r)],gainMapMax:Array.isArray(i)?i.map((e=>parseFloat(e))):[parseFloat(i),parseFloat(i),parseFloat(i)],gamma:Array.isArray(s)?s.map((e=>parseFloat(e))):[parseFloat(s),parseFloat(s),parseFloat(s)],offsetSdr:Array.isArray(l)?l.map((e=>parseFloat(e))):[parseFloat(l),parseFloat(l),parseFloat(l)],offsetHdr:Array.isArray(c)?c.map((e=>parseFloat(e))):[parseFloat(c),parseFloat(c),parseFloat(c)],hdrCapacityMin:parseFloat(u),hdrCapacityMax:parseFloat(h)}}catch(NQ){}i=r.indexOf("<x:xmpmeta",e)}})(e);if(!t)throw new oY("Gain map XMP metadata not found");const n=new sY({extractFII:!0,extractNonFII:!0}),r=await n.extract(e);if(2!==r.length)throw new iY("Gain map recovery image not found");return{sdr:new Uint8Array(await r[0].arrayBuffer()),gainMap:new Uint8Array(await r[1].arrayBuffer()),metadata:t}},cY=e=>new Promise(((t,n)=>{const r=document.createElement("img");r.onload=()=>{t(r)},r.onerror=e=>{n(e)},r.src=URL.createObjectURL(e)}));class uY extends kp{constructor(e,t){super(t),e&&(this._renderer=e),this._internalLoadingManager=new Dp}setRenderer(e){return this._renderer=e,this}setRenderTargetOptions(e){return this._renderTargetOptions=e,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const e=new rY({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new so,sdr:new so});return new nY({width:16,height:16,type:yn,colorSpace:Lr,material:e,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(e,t,n,r){const i=r?new Blob([r],{type:"image/jpeg"}):void 0,o=new Blob([n],{type:"image/jpeg"});let a,s,l=!1;if("undefined"===typeof createImageBitmap){const e=await Promise.all([i?cY(i):Promise.resolve(void 0),cY(o)]);s=e[0],a=e[1],l=!0}else{const e=await Promise.all([i?createImageBitmap(i,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(o,{imageOrientation:"flipY"})]);s=e[0],a=e[1]}const c=new so(s||new ImageData(2,2),Vt,Zt,Zt,an,un,Sn,hn,1,Lr);c.flipY=l,c.needsUpdate=!0;const u=new so(a,Vt,Zt,Zt,an,un,Sn,hn,1,kr);u.flipY=l,u.needsUpdate=!0,e.width=a.width,e.height=a.height,e.material.gainMap=c,e.material.sdr=u,e.material.gainMapMin=t.gainMapMin,e.material.gainMapMax=t.gainMapMax,e.material.offsetHdr=t.offsetHdr,e.material.offsetSdr=t.offsetSdr,e.material.gamma=t.gamma,e.material.hdrCapacityMin=t.hdrCapacityMin,e.material.hdrCapacityMax=t.hdrCapacityMax,e.material.maxDisplayBoost=Math.pow(2,t.hdrCapacityMax),e.material.needsUpdate=!0,e.render()}}class hY extends uY{load(e,t,n,r){let[i,o,a]=e;const s=this.prepareQuadRenderer();let l,c,u;const h=async()=>{if(l&&c&&u){try{await this.render(s,u,l,c)}catch(Wy){return this.manager.itemError(i),this.manager.itemError(o),this.manager.itemError(a),"function"===typeof r&&r(Wy),void s.disposeOnDemandRenderer()}"function"===typeof t&&t(s),this.manager.itemEnd(i),this.manager.itemEnd(o),this.manager.itemEnd(a),s.disposeOnDemandRenderer()}};let d=!0,f=0,p=0,m=!0,g=0,v=0,y=!0,A=0,x=0;const b=()=>{if("function"===typeof n){n(new ProgressEvent("progress",{lengthComputable:d&&m&&y,loaded:p+v+x,total:f+g+A}))}};this.manager.itemStart(i),this.manager.itemStart(o),this.manager.itemStart(a);const _=new zp(this._internalLoadingManager);_.setResponseType("arraybuffer"),_.setRequestHeader(this.requestHeader),_.setPath(this.path),_.setWithCredentials(this.withCredentials),_.load(i,(async e=>{if("string"===typeof e)throw new Error("Invalid sdr buffer");l=e,await h()}),(e=>{d=e.lengthComputable,p=e.loaded,f=e.total,b()}),(e=>{this.manager.itemError(i),"function"===typeof r&&r(e)}));const w=new zp(this._internalLoadingManager);w.setResponseType("arraybuffer"),w.setRequestHeader(this.requestHeader),w.setPath(this.path),w.setWithCredentials(this.withCredentials),w.load(o,(async e=>{if("string"===typeof e)throw new Error("Invalid gainmap buffer");c=e,await h()}),(e=>{m=e.lengthComputable,v=e.loaded,g=e.total,b()}),(e=>{this.manager.itemError(o),"function"===typeof r&&r(e)}));const E=new zp(this._internalLoadingManager);return E.setRequestHeader(this.requestHeader),E.setPath(this.path),E.setWithCredentials(this.withCredentials),E.load(a,(async e=>{if("string"!==typeof e)throw new Error("Invalid metadata string");u=JSON.parse(e),await h()}),(e=>{y=e.lengthComputable,x=e.loaded,A=e.total,b()}),(e=>{this.manager.itemError(a),"function"===typeof r&&r(e)})),s}}class dY extends uY{load(e,t,n,r){const i=this.prepareQuadRenderer(),o=new zp(this._internalLoadingManager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(this.withCredentials),this.manager.itemStart(e),o.load(e,(async n=>{if("string"===typeof n)throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const o=new Uint8Array(n);let a,s,l;try{const e=await lY(o);a=e.sdr,s=e.gainMap,l=e.metadata}catch(NQ){if(!(NQ instanceof oY||NQ instanceof iY))throw NQ;console.warn(`Failure to reconstruct an HDR image from ${e}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),l={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},a=o}try{await this.render(i,l,a,s)}catch(Wy){return this.manager.itemError(e),"function"===typeof r&&r(Wy),void i.disposeOnDemandRenderer()}"function"===typeof t&&t(i),this.manager.itemEnd(e),i.disposeOnDemandRenderer()}),n,(t=>{this.manager.itemError(e),"function"===typeof r&&r(t)})),i}}const fY={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},pY="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",mY=e=>Array.isArray(e),gY=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function vY(){let{files:e=gY,path:t="",preset:n,encoding:r,extensions:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=null,a=!1;n&&(xY(n),e=fY[n],t=pY),a=mY(e);const{extension:s,isCubemap:c}=bY(e);if(o=_Y(s),!o)throw new Error("useEnvironment: Unrecognized file extension: "+e);const u=cy((e=>e.gl));(0,l.useLayoutEffect)((()=>{"webp"!==s&&"jpg"!==s&&"jpeg"!==s||u.domElement.addEventListener("webglcontextlost",(function(){py.clear(o,a?[e]:e)}),{once:!0})}),[e,u.domElement]);const h=py(o,a?[e]:e,(e=>{"webp"!==s&&"jpg"!==s&&"jpeg"!==s||e.setRenderer(u),null==e.setPath||e.setPath(t),i&&i(e)}));let d=a?h[0]:h;var f;"jpg"!==s&&"jpeg"!==s&&"webp"!==s||(d=null==(f=d.renderTarget)?void 0:f.texture);return d.mapping=c?Wt:Xt,"colorSpace"in d?d.colorSpace=(null!==r&&void 0!==r?r:c)?"srgb":"srgb-linear":d.encoding=(null!==r&&void 0!==r?r:c)?pq:fq,d}const yY={files:gY,path:"",preset:void 0,extensions:void 0};vY.preload=e=>{const t={...yY,...e};let{files:n,path:r=""}=t;const{preset:i,extensions:o}=t;i&&(xY(i),n=fY[i],r=pY);const{extension:a}=bY(n);if("webp"===a||"jpg"===a||"jpeg"===a)throw new Error("useEnvironment: Preloading gainmaps is not supported");const s=_Y(a);if(!s)throw new Error("useEnvironment: Unrecognized file extension: "+n);py.preload(s,mY(n)?[n]:n,(e=>{null==e.setPath||e.setPath(r),o&&o(e)}))};const AY={files:gY,preset:void 0};function xY(e){if(!(e in fY))throw new Error("Preset must be one of: "+Object.keys(fY).join(", "))}function bY(e){var t;const n=mY(e)&&6===e.length,r=mY(e)&&3===e.length&&e.some((e=>e.endsWith("json"))),i=mY(e)?e[0]:e;return{extension:n?"cube":r?"webp":i.startsWith("data:application/exr")?"exr":i.startsWith("data:application/hdr")?"hdr":i.startsWith("data:image/jpeg")?"jpg":null==(t=i.split(".").pop())||null==(t=t.split("?"))||null==(t=t.shift())?void 0:t.toLowerCase(),isCubemap:n,isGainmap:r}}function _Y(e){return"cube"===e?Gp:"hdr"===e?KX:"exr"===e?$X:"jpg"===e||"jpeg"===e?dY:"webp"===e?hY:null}vY.clear=e=>{const t={...AY,...e};let{files:n}=t;const{preset:r}=t;r&&(xY(r),n=fY[r]);const{extension:i}=bY(n),o=_Y(i);if(!o)throw new Error("useEnvironment: Unrecognized file extension: "+n);py.clear(o,mY(n)?[n]:n)};const wY=e=>{return(t=e).current&&t.current.isScene?e.current:e;var t};function EY(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};var o,a,s,l,c;i={backgroundBlurriness:null!==(o=i.blur)&&void 0!==o?o:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...i};const u=wY(t||n),h=u.background,d=u.environment,f={backgroundBlurriness:u.backgroundBlurriness,backgroundIntensity:u.backgroundIntensity,backgroundRotation:null!==(a=null==(s=u.backgroundRotation)||null==s.clone?void 0:s.clone())&&void 0!==a?a:[0,0,0],environmentIntensity:u.environmentIntensity,environmentRotation:null!==(l=null==(c=u.environmentRotation)||null==c.clone?void 0:c.clone())&&void 0!==l?l:[0,0,0]};return"only"!==e&&(u.environment=r),e&&(u.background=r),Ay(u,i),()=>{"only"!==e&&(u.environment=d),e&&(u.background=h),Ay(u,f)}}function SY(e){let{scene:t,background:n=!1,map:r,...i}=e;const o=cy((e=>e.scene));return l.useLayoutEffect((()=>{if(r)return EY(n,t,o,r,i)})),null}function CY(e){let{background:t=!1,scene:n,blur:r,backgroundBlurriness:i,backgroundIntensity:o,backgroundRotation:a,environmentIntensity:s,environmentRotation:c,...u}=e;const h=vY(u),d=cy((e=>e.scene));return l.useLayoutEffect((()=>EY(t,n,d,h,{blur:r,backgroundBlurriness:i,backgroundIntensity:o,backgroundRotation:a,environmentIntensity:s,environmentRotation:c}))),null}function MY(e){let{children:t,near:n=1,far:r=1e3,resolution:i=256,frames:o=1,map:a,background:s=!1,blur:c,backgroundBlurriness:u,backgroundIntensity:h,backgroundRotation:d,environmentIntensity:f,environmentRotation:p,scene:m,files:g,path:v,preset:y,extensions:A}=e;const x=cy((e=>e.gl)),b=cy((e=>e.scene)),_=l.useRef(null),[w]=l.useState((()=>new qu)),E=l.useMemo((()=>{const e=new Vs(i);return e.texture.type=yn,e}),[i]);l.useLayoutEffect((()=>(1===o&&_.current.update(x,w),EY(s,m,b,E.texture,{blur:c,backgroundBlurriness:u,backgroundIntensity:h,backgroundRotation:d,environmentIntensity:f,environmentRotation:p}))),[t,w,E.texture,m,b,s,o,x]);let S=1;return uy((()=>{(o===1/0||S<o)&&(_.current.update(x,w),S++)})),l.createElement(l.Fragment,null,Cy(l.createElement(l.Fragment,null,t,l.createElement("cubeCamera",{ref:_,args:[n,r,E]}),g||y?l.createElement(CY,{background:!0,files:g,preset:y,path:v,extensions:A}):a?l.createElement(SY,{background:!0,map:a,extensions:A}):null),w))}function TY(e){var t,n,r,i;const o=vY(e),a=e.map||o;l.useMemo((()=>hv({GroundProjectedEnvImpl:JX})),[]);const s=l.useMemo((()=>[a]),[a]),c=null==(t=e.ground)?void 0:t.height,u=null==(n=e.ground)?void 0:n.radius,h=null!==(r=null==(i=e.ground)?void 0:i.scale)&&void 0!==r?r:1e3;return l.createElement(l.Fragment,null,l.createElement(SY,tC({},e,{map:a})),l.createElement("groundProjectedEnvImpl",{args:s,scale:h,height:c,radius:u}))}function IY(e){return e.ground?l.createElement(TY,e):e.map?l.createElement(SY,e):e.children?l.createElement(MY,e):l.createElement(CY,e)}const BY={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},PY={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},RY=l.forwardRef(((e,t)=>{let{scale:n=10,frames:r=1/0,opacity:i=1,width:o=1,height:a=1,blur:s=1,near:c=0,far:u=10,resolution:h=512,smooth:d=!0,color:f="#000000",depthWrite:p=!1,renderOrder:m,...g}=e;const v=l.useRef(null),y=cy((e=>e.scene)),A=cy((e=>e.gl)),x=l.useRef(null);o*=Array.isArray(n)?n[0]:n||1,a*=Array.isArray(n)?n[1]:n||1;const[b,_,w,E,S,C,M]=l.useMemo((()=>{const e=new uo(h,h),t=new uo(h,h);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;const n=new tl(o,a).rotateX(Math.PI/2),r=new Is(n),i=new Cu;i.depthTest=i.depthWrite=!1,i.onBeforeCompile=e=>{e.uniforms={...e.uniforms,ucolor:{value:new La(f)}},e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor * fragCoordZ * 2.0, ( 1.0 - fragCoordZ ) * 1.0 );")};const s=new Ls(BY),l=new Ls(PY);return l.depthTest=s.depthTest=!1,[e,n,i,r,s,l,t]}),[h,o,a,n,f]),T=e=>{E.visible=!0,E.material=S,S.uniforms.tDiffuse.value=b.texture,S.uniforms.h.value=1*e/256,A.setRenderTarget(M),A.render(E,x.current),E.material=C,C.uniforms.tDiffuse.value=M.texture,C.uniforms.v.value=1*e/256,A.setRenderTarget(b),A.render(E,x.current),E.visible=!1};let I,B,P=0;return uy((()=>{x.current&&(r===1/0||P<r)&&(P++,I=y.background,B=y.overrideMaterial,v.current.visible=!1,y.background=null,y.overrideMaterial=w,A.setRenderTarget(b),A.render(y,x.current),T(s),d&&T(.4*s),A.setRenderTarget(null),v.current.visible=!0,y.overrideMaterial=B,y.background=I)})),l.useImperativeHandle(t,(()=>v.current),[]),l.createElement("group",tC({"rotation-x":Math.PI/2},g,{ref:v}),l.createElement("mesh",{renderOrder:m,geometry:_,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},l.createElement("meshBasicMaterial",{transparent:!0,map:b.texture,opacity:i,depthWrite:p})),l.createElement("orthographicCamera",{ref:x,args:[-o/2,o/2,a/2,-a/2,c,u]}))}));const DY=l.createContext(null),OY=vL({color:new La,blend:2,alphaTest:.75,opacity:0,map:null},"varying vec2 vUv;\n   void main() {\n     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n     vUv = uv;\n   }",`varying vec2 vUv;\n   uniform sampler2D map;\n   uniform vec3 color;\n   uniform float opacity;\n   uniform float alphaTest;\n   uniform float blend;\n   void main() {\n     vec4 sampledDiffuseColor = texture2D(map, vUv);\n     gl_FragColor = vec4(color * sampledDiffuseColor.r * blend, max(0.0, (1.0 - (sampledDiffuseColor.r + sampledDiffuseColor.g + sampledDiffuseColor.b) / alphaTest)) * opacity);\n     #include <tonemapping_fragment>\n     #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n   }`),kY=l.forwardRef(((e,t)=>{let{children:n,temporal:r,frames:i=40,limit:o=1/0,blend:a=20,scale:s=10,opacity:c=1,alphaTest:u=.75,color:h="black",colorBlend:d=2,resolution:f=1024,toneMapped:p=!0,...m}=e;hv({SoftShadowMaterial:OY});const g=cy((e=>e.gl)),v=cy((e=>e.scene)),y=cy((e=>e.camera)),A=cy((e=>e.invalidate)),x=l.useRef(null),b=l.useRef(null),[_]=l.useState((()=>new FY(g,v,f)));l.useLayoutEffect((()=>{_.configure(x.current)}),[]);const w=l.useMemo((()=>({lights:new Map,temporal:!!r,frames:Math.max(2,i),blend:Math.max(2,i===1/0?a:i),count:0,getMesh:()=>x.current,reset:()=>{_.clear();const e=x.current.material;e.opacity=0,e.alphaTest=0,w.count=0},update:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;const t=x.current.material;w.temporal?(t.opacity=Math.min(c,t.opacity+c/w.blend),t.alphaTest=Math.min(u,t.alphaTest+u/w.blend)):(t.opacity=c,t.alphaTest=u),b.current.visible=!0,_.prepare();for(let n=0;n<e;n++)w.lights.forEach((e=>e.update())),_.update(y,w.blend);b.current.visible=!1,_.finish()}})),[_,y,v,r,i,a,c,u]);return l.useLayoutEffect((()=>{w.reset(),w.temporal||w.frames===1/0||w.update(w.blend)})),l.useImperativeHandle(t,(()=>w),[w]),uy((()=>{(w.temporal||w.frames===1/0)&&w.count<w.frames&&w.count<o&&(A(),w.update(),w.count++)})),l.createElement("group",m,l.createElement("group",{traverse:()=>null,ref:b},l.createElement(DY.Provider,{value:w},n)),l.createElement("mesh",{receiveShadow:!0,ref:x,scale:s,rotation:[-Math.PI/2,0,0]},l.createElement("planeGeometry",null),l.createElement("softShadowMaterial",{transparent:!0,depthWrite:!1,toneMapped:p,color:h,blend:d,map:_.progressiveLightMap2.texture})))})),LY=l.forwardRef(((e,t)=>{let{castShadow:n=!0,bias:r=.001,mapSize:i=512,size:o=5,near:a=.5,far:s=500,frames:c=1,position:u=[0,0,0],radius:h=1,amount:d=8,intensity:f=(bL>=155?Math.PI:1),ambient:p=.5,...m}=e;const g=l.useRef(null),v=new vo(...u).length(),y=l.useContext(DY),A=l.useCallback((()=>{let e;if(g.current)for(let t=0;t<g.current.children.length;t++)if(e=g.current.children[t],Math.random()>p)e.position.set(u[0]+Fi.randFloatSpread(h),u[1]+Fi.randFloatSpread(h),u[2]+Fi.randFloatSpread(h));else{let t=Math.acos(2*Math.random()-1)-Math.PI/2,n=2*Math.PI*Math.random();e.position.set(Math.cos(t)*Math.cos(n)*v,Math.abs(Math.cos(t)*Math.sin(n)*v),Math.sin(t)*v)}}),[h,p,v,...u]),x=l.useMemo((()=>({update:A})),[A]);return l.useImperativeHandle(t,(()=>x),[x]),l.useLayoutEffect((()=>{var e;const t=g.current;return y&&(null==(e=y.lights)||e.set(t.uuid,x)),()=>{var e;null==y||null==(e=y.lights)||e.delete(t.uuid)}}),[y,x]),l.createElement("group",tC({ref:g},m),Array.from({length:d},((e,t)=>l.createElement("directionalLight",{key:t,castShadow:n,"shadow-bias":r,"shadow-mapSize":[i,i],intensity:f/d},l.createElement("orthographicCamera",{attach:"shadow-camera",args:[-o,o,o,-o,a,s]})))))}));class FY{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1024;this.renderer=e,this.res=n,this.scene=t,this.buffer1Active=!1,this.lights=[],this.meshes=[],this.object=null,this.clearColor=new La,this.clearAlpha=0;const r={type:yn,magFilter:en,minFilter:en};this.progressiveLightMap1=new uo(this.res,this.res,r),this.progressiveLightMap2=new uo(this.res,this.res,r),this.discardMat=new rX,this.targetMat=new cp({fog:!1}),this.previousShadowMap={value:this.progressiveLightMap1.texture},this.averagingWindow={value:100},this.targetMat.onBeforeCompile=e=>{e.vertexShader="varying vec2 vUv;\n"+e.vertexShader.slice(0,-1)+"vUv = uv; gl_Position = vec4((uv - 0.5) * 2.0, 1.0, 1.0); }";const t=e.fragmentShader.indexOf("void main() {");e.fragmentShader="varying vec2 vUv;\n"+e.fragmentShader.slice(0,t)+"uniform sampler2D previousShadowMap;\n\tuniform float averagingWindow;\n"+e.fragmentShader.slice(t-1,-1)+"\nvec3 texelOld = texture2D(previousShadowMap, vUv).rgb;\n        gl_FragColor.rgb = mix(texelOld, gl_FragColor.rgb, 1.0/ averagingWindow);\n      }",e.uniforms.previousShadowMap=this.previousShadowMap,e.uniforms.averagingWindow=this.averagingWindow}}clear(){this.renderer.getClearColor(this.clearColor),this.clearAlpha=this.renderer.getClearAlpha(),this.renderer.setClearColor("black",1),this.renderer.setRenderTarget(this.progressiveLightMap1),this.renderer.clear(),this.renderer.setRenderTarget(this.progressiveLightMap2),this.renderer.clear(),this.renderer.setRenderTarget(null),this.renderer.setClearColor(this.clearColor,this.clearAlpha),this.lights=[],this.meshes=[],this.scene.traverse((e=>{!function(e){return!!e.geometry}(e)?function(e){return e.isLight}(e)&&this.lights.push({object:e,intensity:e.intensity}):this.meshes.push({object:e,material:e.material})}))}prepare(){this.lights.forEach((e=>e.object.intensity=0)),this.meshes.forEach((e=>e.object.material=this.discardMat))}finish(){this.lights.forEach((e=>e.object.intensity=e.intensity)),this.meshes.forEach((e=>e.object.material=e.material))}configure(e){this.object=e}update(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;if(!this.object)return;this.averagingWindow.value=t,this.object.material=this.targetMat;const n=this.buffer1Active?this.progressiveLightMap1:this.progressiveLightMap2,r=this.buffer1Active?this.progressiveLightMap2:this.progressiveLightMap1,i=this.scene.background;this.scene.background=null,this.renderer.setRenderTarget(n),this.previousShadowMap.value=r.texture,this.buffer1Active=!this.buffer1Active,this.renderer.render(this.scene,e),this.renderer.setRenderTarget(null),this.scene.background=i}}const zY={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function UY(e){let{radius:t,adjustCamera:n}=e;const r=HX();return l.useEffect((()=>{n&&r.refresh().clip().fit()}),[t,n]),null}function NY(e){let{children:t,center:n,adjustCamera:r=!0,intensity:i=.5,shadows:o="contact",environment:a="city",preset:s="rembrandt",...c}=e;var u,h,d,f,p,m,g,v;const y="string"===typeof s?zY[s]:s,[{radius:A,height:x},b]=l.useState({radius:0,width:0,height:0,depth:0}),_=null!==(u=null==o?void 0:o.bias)&&void 0!==u?u:-1e-4,w=null!==(h=null==o?void 0:o.normalBias)&&void 0!==h?h:0,E=null!==(d=null==o?void 0:o.size)&&void 0!==d?d:1024,S=null!==(f=null==o?void 0:o.offset)&&void 0!==f?f:0,C="contact"===o||"contact"===(null==o?void 0:o.type),M="accumulative"===o||"accumulative"===(null==o?void 0:o.type),T={..."object"===typeof o?o:{}},I=a?"string"===typeof a?{preset:a}:a:null,B=l.useCallback((e=>{const{width:t,height:r,depth:i,boundingSphere:o}=e;b({radius:o.radius,width:t,height:r,depth:i}),null!=n&&n.onCentered&&n.onCentered(e)}),[]);return l.createElement(l.Fragment,null,l.createElement("ambientLight",{intensity:i/3}),l.createElement("spotLight",{penumbra:1,position:[y.main[0]*A,y.main[1]*A,y.main[2]*A],intensity:2*i,castShadow:!!o,"shadow-bias":_,"shadow-normalBias":w,"shadow-mapSize":E}),l.createElement("pointLight",{position:[y.fill[0]*A,y.fill[1]*A,y.fill[2]*A],intensity:i}),l.createElement(QX,tC({fit:!!r,clip:!!r,margin:Number(r),observe:!0},c),l.createElement(UY,{radius:A,adjustCamera:r}),l.createElement(aq,tC({},n,{position:[0,S/2,0],onCentered:B}),t)),l.createElement("group",{position:[0,-x/2-S/2,0]},C&&l.createElement(RY,tC({scale:4*A,far:A,blur:2},T)),M&&l.createElement(kY,tC({temporal:!0,frames:100,alphaTest:.9,toneMapped:!0,scale:4*A},T),l.createElement(LY,{amount:null!==(p=T.amount)&&void 0!==p?p:8,radius:null!==(m=T.radius)&&void 0!==m?m:A,ambient:null!==(g=T.ambient)&&void 0!==g?g:.5,intensity:null!==(v=T.intensity)&&void 0!==v?v:1,position:[y.main[0]*A,y.main[1]*A,y.main[2]*A],size:4*A,bias:-_,mapSize:E}))),a&&l.createElement(IY,I))}const jY=e=>0===e?0:Math.pow(2,10*e-10);function GY(e){let{children:t,floor:n=.25,segments:r=20,receiveShadow:i,...o}=e;const a=l.useRef(null);return l.useLayoutEffect((()=>{let e=0;const t=r/r/2,i=a.current.attributes.position;for(let o=0;o<r+1;o++)for(let a=0;a<r+1;a++)i.setXYZ(e++,o/r-t+(0===o?-n:0),a/r-t,jY(o/r));i.needsUpdate=!0,a.current.computeVertexNormals()}),[r,n]),l.createElement("group",o,l.createElement("mesh",{receiveShadow:i,rotation:[-Math.PI/2,0,Math.PI/2]},l.createElement("planeGeometry",{ref:a,args:[1,1,r,r]}),t))}const QY=l.forwardRef(((e,t)=>{let{fog:n=!1,renderOrder:r,depthWrite:i=!1,colorStop:o=0,color:a="black",opacity:s=.5,...c}=e;const u=l.useMemo((()=>{const e=document.createElement("canvas");e.width=128,e.height=128;const t=e.getContext("2d"),n=t.createRadialGradient(e.width/2,e.height/2,0,e.width/2,e.height/2,e.width/2);return n.addColorStop(o,new La(a).getStyle()),n.addColorStop(1,"rgba(0,0,0,0)"),t.fillStyle=n,t.fillRect(0,0,e.width,e.height),e}),[a,o]);return l.createElement("mesh",tC({renderOrder:r,ref:t,"rotation-x":-Math.PI/2},c),l.createElement("planeGeometry",null),l.createElement("meshBasicMaterial",{transparent:!0,opacity:s,fog:n,depthWrite:i,side:Ke},l.createElement("canvasTexture",{attach:"map",args:[u]})))}));function HY(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye;const t={value:new qo};return Object.assign(new lp({side:e}),{viewMatrix:t,onBeforeCompile:e=>{e.uniforms.viewMatrix=t,e.fragmentShader="vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n           return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n         }\n"+e.fragmentShader.replace("#include <normal_fragment_maps>","#include <normal_fragment_maps>\n           normal = inverseTransformDirection( normal, viewMatrix );\n")}})}const VY=vL({causticsTexture:null,causticsTextureB:null,color:new La,lightProjMatrix:new qo,lightViewMatrix:new qo},"varying vec3 vWorldPosition;\n   void main() {\n     gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4(position, 1.);\n     vec4 worldPosition = modelMatrix * vec4(position, 1.);\n     vWorldPosition = worldPosition.xyz;\n   }",`varying vec3 vWorldPosition;\n  uniform vec3 color;\n  uniform sampler2D causticsTexture;\n  uniform sampler2D causticsTextureB;\n  uniform mat4 lightProjMatrix;\n  uniform mat4 lightViewMatrix;\n   void main() {\n    // Apply caustics\n    vec4 lightSpacePos = lightProjMatrix * lightViewMatrix * vec4(vWorldPosition, 1.0);\n    lightSpacePos.xyz /= lightSpacePos.w;\n    lightSpacePos.xyz = lightSpacePos.xyz * 0.5 + 0.5;\n    vec3 front = texture2D(causticsTexture, lightSpacePos.xy).rgb;\n    vec3 back = texture2D(causticsTextureB, lightSpacePos.xy).rgb;\n    gl_FragColor = vec4((front + back) * color, 1.0);\n    #include <tonemapping_fragment>\n    #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n   }`),WY=vL({cameraMatrixWorld:new qo,cameraProjectionMatrixInv:new qo,normalTexture:null,depthTexture:null,lightDir:new vo(0,1,0),lightPlaneNormal:new vo(0,1,0),lightPlaneConstant:0,near:.1,far:100,modelMatrix:new qo,worldRadius:1/40,ior:1.1,bounces:0,resolution:1024,size:10,intensity:.5},"\n  varying vec2 vUv;\n  void main() {\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n  }","\n  uniform mat4 cameraMatrixWorld;\n  uniform mat4 cameraProjectionMatrixInv;\n  uniform vec3 lightDir;\n  uniform vec3 lightPlaneNormal;\n  uniform float lightPlaneConstant;\n  uniform float near;\n  uniform float far;\n  uniform float time;\n  uniform float worldRadius;\n  uniform float resolution;\n  uniform float size;\n  uniform float intensity;\n  uniform float ior;\n  precision highp isampler2D;\n  precision highp usampler2D;\n  uniform sampler2D normalTexture;\n  uniform sampler2D depthTexture;\n  uniform float bounces;\n  varying vec2 vUv;\n  vec3 WorldPosFromDepth(float depth, vec2 coord) {\n    float z = depth * 2.0 - 1.0;\n    vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);\n    vec4 viewSpacePosition = cameraProjectionMatrixInv * clipSpacePosition;\n    // Perspective division\n    viewSpacePosition /= viewSpacePosition.w;\n    vec4 worldSpacePosition = cameraMatrixWorld * viewSpacePosition;\n    return worldSpacePosition.xyz;\n  }\n  float sdPlane( vec3 p, vec3 n, float h ) {\n    // n must be normalized\n    return dot(p,n) + h;\n  }\n  float planeIntersect( vec3 ro, vec3 rd, vec4 p ) {\n    return -(dot(ro,p.xyz)+p.w)/dot(rd,p.xyz);\n  }\n  vec3 totalInternalReflection(vec3 ro, vec3 rd, vec3 pos, vec3 normal, float ior, out vec3 rayOrigin, out vec3 rayDirection) {\n    rayOrigin = ro;\n    rayDirection = rd;\n    rayDirection = refract(rayDirection, normal, 1.0 / ior);\n    rayOrigin = pos + rayDirection * 0.1;\n    return rayDirection;\n  }\n  void main() {\n    // Each sample consists of random offset in the x and y direction\n    float caustic = 0.0;\n    float causticTexelSize = (1.0 / resolution) * size * 2.0;\n    float texelsNeeded = worldRadius / causticTexelSize;\n    float sampleRadius = texelsNeeded / resolution;\n    float sum = 0.0;\n    if (texture2D(depthTexture, vUv).x == 1.0) {\n      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n      return;\n    }\n    vec2 offset1 = vec2(-0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);\n    vec2 offset2 = vec2(-0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);\n    vec2 offset3 = vec2(0.5, 0.5);//vec2(rand() - 0.5, rand() - 0.5);\n    vec2 offset4 = vec2(0.5, -0.5);//vec2(rand() - 0.5, rand() - 0.5);\n    vec2 uv1 = vUv + offset1 * sampleRadius;\n    vec2 uv2 = vUv + offset2 * sampleRadius;\n    vec2 uv3 = vUv + offset3 * sampleRadius;\n    vec2 uv4 = vUv + offset4 * sampleRadius;\n    vec3 normal1 = texture2D(normalTexture, uv1, -10.0).rgb * 2.0 - 1.0;\n    vec3 normal2 = texture2D(normalTexture, uv2, -10.0).rgb * 2.0 - 1.0;\n    vec3 normal3 = texture2D(normalTexture, uv3, -10.0).rgb * 2.0 - 1.0;\n    vec3 normal4 = texture2D(normalTexture, uv4, -10.0).rgb * 2.0 - 1.0;\n    float depth1 = texture2D(depthTexture, uv1, -10.0).x;\n    float depth2 = texture2D(depthTexture, uv2, -10.0).x;\n    float depth3 = texture2D(depthTexture, uv3, -10.0).x;\n    float depth4 = texture2D(depthTexture, uv4, -10.0).x;\n    // Sanity check the depths\n    if (depth1 == 1.0 || depth2 == 1.0 || depth3 == 1.0 || depth4 == 1.0) {\n      gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n      return;\n    }\n    vec3 pos1 = WorldPosFromDepth(depth1, uv1);\n    vec3 pos2 = WorldPosFromDepth(depth2, uv2);\n    vec3 pos3 = WorldPosFromDepth(depth3, uv3);\n    vec3 pos4 = WorldPosFromDepth(depth4, uv4);\n    vec3 originPos1 = WorldPosFromDepth(0.0, uv1);\n    vec3 originPos2 = WorldPosFromDepth(0.0, uv2);\n    vec3 originPos3 = WorldPosFromDepth(0.0, uv3);\n    vec3 originPos4 = WorldPosFromDepth(0.0, uv4);\n    vec3 endPos1, endPos2, endPos3, endPos4;\n    vec3 endDir1, endDir2, endDir3, endDir4;\n    totalInternalReflection(originPos1, lightDir, pos1, normal1, ior, endPos1, endDir1);\n    totalInternalReflection(originPos2, lightDir, pos2, normal2, ior, endPos2, endDir2);\n    totalInternalReflection(originPos3, lightDir, pos3, normal3, ior, endPos3, endDir3);\n    totalInternalReflection(originPos4, lightDir, pos4, normal4, ior, endPos4, endDir4);\n    float lightPosArea = length(cross(originPos2 - originPos1, originPos3 - originPos1)) + length(cross(originPos3 - originPos1, originPos4 - originPos1));\n    float t1 = planeIntersect(endPos1, endDir1, vec4(lightPlaneNormal, lightPlaneConstant));\n    float t2 = planeIntersect(endPos2, endDir2, vec4(lightPlaneNormal, lightPlaneConstant));\n    float t3 = planeIntersect(endPos3, endDir3, vec4(lightPlaneNormal, lightPlaneConstant));\n    float t4 = planeIntersect(endPos4, endDir4, vec4(lightPlaneNormal, lightPlaneConstant));\n    vec3 finalPos1 = endPos1 + endDir1 * t1;\n    vec3 finalPos2 = endPos2 + endDir2 * t2;\n    vec3 finalPos3 = endPos3 + endDir3 * t3;\n    vec3 finalPos4 = endPos4 + endDir4 * t4;\n    float finalArea = length(cross(finalPos2 - finalPos1, finalPos3 - finalPos1)) + length(cross(finalPos3 - finalPos1, finalPos4 - finalPos1));\n    caustic += intensity * (lightPosArea / finalArea);\n    // Calculate the area of the triangle in light spaces\n    gl_FragColor = vec4(vec3(max(caustic, 0.0)), 1.0);\n  }"),qY={depth:!0,minFilter:an,magFilter:an,type:hn},XY={minFilter:cn,magFilter:an,type:vn,generateMipmaps:!0},YY=l.forwardRef(((e,t)=>{let{debug:n,children:r,frames:i=1,ior:o=1.1,color:a="white",causticsOnly:s=!1,backside:c=!1,backsideIOR:u=1.1,worldRadius:h=.3125,intensity:d=.05,resolution:f=2024,lightSource:p=[5,5,5],...m}=e;hv({CausticsProjectionMaterial:VY});const g=l.useRef(null),v=l.useRef(null),y=l.useRef(null),A=l.useRef(null),x=cy((e=>e.gl)),b=TQ(n&&v,kg),_=Tz(f,f,qY),w=Tz(f,f,qY),E=Tz(f,f,XY),S=Tz(f,f,XY),[C]=l.useState((()=>HY())),[M]=l.useState((()=>HY(Je))),[T]=l.useState((()=>new WY)),[I]=l.useState((()=>new Zk(T)));l.useLayoutEffect((()=>{g.current.updateWorldMatrix(!1,!0)}));let B=0;const P=new vo,R=new Zs,D=new qo,O=new Ys,k=new vo,L=new vo,F=new xo,z=new vo,U=[],N=[],j=[],G=[],Q=new vo;for(let l=0;l<8;l++)U.push(new vo),N.push(new vo),j.push(new vo),G.push(new vo);return uy((()=>{if(i===1/0||B++<i){var e,t;Array.isArray(p)?k.fromArray(p).normalize():k.copy(g.current.worldToLocal(p.current.getWorldPosition(P)).normalize()),L.copy(k).multiplyScalar(-1),null==(e=y.current.parent)||e.matrixWorld.identity(),F.setFromObject(y.current,!0),U[0].set(F.min.x,F.min.y,F.min.z),U[1].set(F.min.x,F.min.y,F.max.z),U[2].set(F.min.x,F.max.y,F.min.z),U[3].set(F.min.x,F.max.y,F.max.z),U[4].set(F.max.x,F.min.y,F.min.z),U[5].set(F.max.x,F.min.y,F.max.z),U[6].set(F.max.x,F.max.y,F.min.z),U[7].set(F.max.x,F.max.y,F.max.z);for(let e=0;e<8;e++)N[e].copy(U[e]);F.getCenter(z),U.map((e=>e.sub(z)));const r=O.set(L,0);U.map(((e,t)=>r.projectPoint(e,j[t])));const i=j.reduce(((e,t)=>e.add(t)),P.set(0,0,0)).divideScalar(j.length),a=j.map((e=>e.distanceTo(i))).reduce(((e,t)=>Math.max(e,t))),l=U.map((e=>e.dot(k))).reduce(((e,t)=>Math.max(e,t)));v.current.position.copy(Q.copy(k).multiplyScalar(l).add(z)),v.current.lookAt(y.current.localToWorld(z));const m=D.lookAt(v.current.position,z,P.set(0,1,0));v.current.left=-a,v.current.right=a,v.current.top=a,v.current.bottom=-a;const B=P.set(0,a,0).applyMatrix4(m),H=(v.current.position.y+B.y)/k.y;v.current.near=.1,v.current.far=H,v.current.updateProjectionMatrix(),v.current.updateMatrixWorld();const V=N.map(((e,t)=>e.add(G[t].copy(k).multiplyScalar(-e.y/k.y)))),W=V.reduce(((e,t)=>e.add(t)),P.set(0,0,0)).divideScalar(V.length),q=2*V.map((e=>Math.hypot(e.x-W.x,e.z-W.z))).reduce(((e,t)=>Math.max(e,t)));A.current.scale.setScalar(q),A.current.position.copy(W),n&&(null==(t=b.current)||t.update()),M.viewMatrix.value=C.viewMatrix.value=v.current.matrixWorldInverse;const X=R.setFromProjectionMatrix(D.multiplyMatrices(v.current.projectionMatrix,v.current.matrixWorldInverse)).planes[4];T.cameraMatrixWorld=v.current.matrixWorld,T.cameraProjectionMatrixInv=v.current.projectionMatrixInverse,T.lightDir=L,T.lightPlaneNormal=X.normal,T.lightPlaneConstant=X.constant,T.near=v.current.near,T.far=v.current.far,T.resolution=f,T.size=a,T.intensity=d,T.worldRadius=h,y.current.visible=!0,x.setRenderTarget(_),x.clear(),y.current.overrideMaterial=C,x.render(y.current,v.current),x.setRenderTarget(w),x.clear(),c&&(y.current.overrideMaterial=M,x.render(y.current,v.current)),y.current.overrideMaterial=null,T.ior=o,A.current.material.lightProjMatrix=v.current.projectionMatrix,A.current.material.lightViewMatrix=v.current.matrixWorldInverse,T.normalTexture=_.texture,T.depthTexture=_.depthTexture,x.setRenderTarget(E),x.clear(),I.render(x),T.ior=u,T.normalTexture=w.texture,T.depthTexture=w.depthTexture,x.setRenderTarget(S),x.clear(),c&&I.render(x),x.setRenderTarget(null),s&&(y.current.visible=!1)}})),l.useImperativeHandle(t,(()=>g.current),[]),l.createElement("group",tC({ref:g},m),l.createElement("scene",{ref:y},l.createElement("orthographicCamera",{ref:v,up:[0,1,0]}),r),l.createElement("mesh",{renderOrder:2,ref:A,"rotation-x":-Math.PI/2},l.createElement("planeGeometry",null),l.createElement("causticsProjectionMaterial",{transparent:!0,color:a,causticsTexture:E.texture,causticsTextureB:S.texture,blending:rt,blendSrc:ut,blendDst:ft,depthWrite:!1}),n&&l.createElement(ML,null,l.createElement("lineBasicMaterial",{color:"#ffff00",toneMapped:!1}))))})),JY=l.forwardRef(((e,t)=>{let{mixBlur:n=0,mixStrength:r=.5,resolution:i=256,blur:o=[0,0],args:a=[1,1],minDepthThreshold:s=.9,maxDepthThreshold:c=1,depthScale:u=0,depthToBlurRatioBias:h=.25,mirror:d=0,children:f,debug:p=0,distortion:m=1,mixContrast:g=1,distortionMap:v,...y}=e;hv({MeshReflectorMaterial:qq}),l.useEffect((()=>{console.warn("Reflector has been deprecated and will be removed next major. Replace it with <MeshReflectorMaterial />!")}),[]);const A=cy((e=>{let{gl:t}=e;return t})),x=cy((e=>{let{camera:t}=e;return t})),b=cy((e=>{let{scene:t}=e;return t}));o=Array.isArray(o)?o:[o,o];const _=o[0]+o[1]>0,w=l.useRef(null);l.useImperativeHandle(t,(()=>w.current),[]);const[E]=l.useState((()=>new Ys)),[S]=l.useState((()=>new vo)),[C]=l.useState((()=>new vo)),[M]=l.useState((()=>new vo)),[T]=l.useState((()=>new qo)),[I]=l.useState((()=>new vo(0,0,-1))),[B]=l.useState((()=>new lo)),[P]=l.useState((()=>new vo)),[R]=l.useState((()=>new vo)),[D]=l.useState((()=>new lo)),[O]=l.useState((()=>new qo)),[k]=l.useState((()=>new js)),L=l.useCallback((()=>{if(C.setFromMatrixPosition(w.current.matrixWorld),M.setFromMatrixPosition(x.matrixWorld),T.extractRotation(w.current.matrixWorld),S.set(0,0,1),S.applyMatrix4(T),P.subVectors(C,M),P.dot(S)>0)return;P.reflect(S).negate(),P.add(C),T.extractRotation(x.matrixWorld),I.set(0,0,-1),I.applyMatrix4(T),I.add(M),R.subVectors(C,I),R.reflect(S).negate(),R.add(C),k.position.copy(P),k.up.set(0,1,0),k.up.applyMatrix4(T),k.up.reflect(S),k.lookAt(R),k.far=x.far,k.updateMatrixWorld(),k.projectionMatrix.copy(x.projectionMatrix),O.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),O.multiply(k.projectionMatrix),O.multiply(k.matrixWorldInverse),O.multiply(w.current.matrixWorld),E.setFromNormalAndCoplanarPoint(S,C),E.applyMatrix4(k.matrixWorldInverse),B.set(E.normal.x,E.normal.y,E.normal.z,E.constant);const e=k.projectionMatrix;D.x=(Math.sign(B.x)+e.elements[8])/e.elements[0],D.y=(Math.sign(B.y)+e.elements[9])/e.elements[5],D.z=-1,D.w=(1+e.elements[10])/e.elements[14],B.multiplyScalar(2/B.dot(D)),e.elements[2]=B.x,e.elements[6]=B.y,e.elements[10]=B.z+1,e.elements[14]=B.w}),[]),[F,z,U,N]=l.useMemo((()=>{const e={type:yn,minFilter:an,magFilter:an},t=new uo(i,i,e);t.depthBuffer=!0,t.depthTexture=new Ul(i,i),t.depthTexture.format=Tn,t.depthTexture.type=pn;const a=new uo(i,i,e);return[t,a,new Wq({gl:A,resolution:i,width:o[0],height:o[1],minDepthThreshold:s,maxDepthThreshold:c,depthScale:u,depthToBlurRatioBias:h}),{mirror:d,textureMatrix:O,mixBlur:n,tDiffuse:t.texture,tDepth:t.depthTexture,tDiffuseBlur:a.texture,hasBlur:_,mixStrength:r,minDepthThreshold:s,maxDepthThreshold:c,depthScale:u,depthToBlurRatioBias:h,transparent:!0,debug:p,distortion:m,distortionMap:v,mixContrast:g,"defines-USE_BLUR":_?"":void 0,"defines-USE_DEPTH":u>0?"":void 0,"defines-USE_DISTORTION":v?"":void 0}]}),[A,o,O,i,d,_,n,r,s,c,u,h,p,m,v,g]);return uy((()=>{if(null==w||!w.current)return;w.current.visible=!1;const e=A.xr.enabled,t=A.shadowMap.autoUpdate;L(),A.xr.enabled=!1,A.shadowMap.autoUpdate=!1,A.setRenderTarget(F),A.state.buffers.depth.setMask(!0),A.autoClear||A.clear(),A.render(b,k),_&&U.render(A,F,z),A.xr.enabled=e,A.shadowMap.autoUpdate=t,w.current.visible=!0,A.setRenderTarget(null)})),l.createElement("mesh",tC({ref:w},y),l.createElement("planeGeometry",{args:a}),f?f("meshReflectorMaterial",N):l.createElement("meshReflectorMaterial",N))}));class KY extends Ls{constructor(){super({uniforms:{depth:{value:null},opacity:{value:1},attenuation:{value:2.5},anglePower:{value:12},spotPosition:{value:new vo(0,0,0)},lightColor:{value:new La("white")},cameraNear:{value:0},cameraFar:{value:1},resolution:{value:new zi(0,0)}},transparent:!0,depthWrite:!1,vertexShader:"\n        varying vec3 vNormal;\n        varying float vViewZ;\n        varying float vIntensity;\n        uniform vec3 spotPosition;\n        uniform float attenuation;\n\n        #include <common>\n        #include <logdepthbuf_pars_vertex>\n\n        void main() {\n          // compute intensity\n          vNormal = normalize(normalMatrix * normal);\n          vec4 worldPosition = modelMatrix * vec4(position, 1);\n          vec4 viewPosition = viewMatrix * worldPosition;\n          vViewZ = viewPosition.z;\n\n          vIntensity = 1.0 - saturate(distance(worldPosition.xyz, spotPosition) / attenuation);\n\n          gl_Position = projectionMatrix * viewPosition;\n\n          #include <logdepthbuf_vertex>\n        }\n      ",fragmentShader:`\n        varying vec3 vNormal;\n        varying float vViewZ;\n        varying float vIntensity;\n\n        uniform vec3 lightColor;\n        uniform float anglePower;\n        uniform sampler2D depth;\n        uniform vec2 resolution;\n        uniform float cameraNear;\n        uniform float cameraFar;\n        uniform float opacity;\n\n        #include <packing>\n        #include <logdepthbuf_pars_fragment>\n\n        float readDepth(sampler2D depthSampler, vec2 uv) {\n          float fragCoordZ = texture(depthSampler, uv).r;\n\n          // https://github.com/mrdoob/three.js/issues/23072\n          #ifdef USE_LOGDEPTHBUF\n            float viewZ = 1.0 - exp2(fragCoordZ * log(cameraFar + 1.0) / log(2.0));\n          #else\n            float viewZ = perspectiveDepthToViewZ(fragCoordZ, cameraNear, cameraFar);\n          #endif\n\n          return viewZ;\n        }\n\n        void main() {\n          #include <logdepthbuf_fragment>\n\n          vec3 normal = vec3(vNormal.x, vNormal.y, abs(vNormal.z));\n          float angleIntensity = pow(dot(normal, vec3(0, 0, 1)), anglePower);\n          float intensity = vIntensity * angleIntensity;\n\n          // fades when z is close to sampled depth, meaning the cone is intersecting existing geometry\n          bool isSoft = resolution[0] > 0.0 && resolution[1] > 0.0;\n          if (isSoft) {\n            vec2 uv = gl_FragCoord.xy / resolution;\n            intensity *= smoothstep(0.0, 1.0, vViewZ - readDepth(depth, uv));\n          }\n\n          gl_FragColor = vec4(lightColor, intensity * opacity);\n\n          #include <tonemapping_fragment>\n          #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n        }\n      `})}}var ZY="#define GLSLIFY 1\nvarying vec2 vUv;uniform sampler2D uShadowMap;uniform float uTime;void main(){vec3 color=texture2D(uShadowMap,vUv).xyz;gl_FragColor=vec4(color,1.);}";const $Y=e=>null==e?void 0:e.isSpotLight;function eJ(e){let{opacity:t=1,radiusTop:n,radiusBottom:r,depthBuffer:i,color:o="white",distance:a=5,angle:s=.15,attenuation:c=5,anglePower:u=5}=e;const h=l.useRef(null),d=cy((e=>e.size)),f=cy((e=>e.camera)),p=cy((e=>e.viewport.dpr)),[m]=l.useState((()=>new KY)),[g]=l.useState((()=>new vo));n=void 0===n?.1:n,r=void 0===r?7*s:r,uy((()=>{m.uniforms.spotPosition.value.copy(h.current.getWorldPosition(g)),h.current.lookAt(h.current.parent.target.getWorldPosition(g))}));const v=l.useMemo((()=>{const e=new rf(n,r,a,128,64,!0);return e.applyMatrix4((new qo).makeTranslation(0,-a/2,0)),e.applyMatrix4((new qo).makeRotationX(-Math.PI/2)),e}),[a,n,r]);return l.createElement(l.Fragment,null,l.createElement("mesh",{ref:h,geometry:v,raycast:()=>null},l.createElement("primitive",{object:m,attach:"material","uniforms-opacity-value":t,"uniforms-lightColor-value":o,"uniforms-attenuation-value":c,"uniforms-anglePower-value":u,"uniforms-depth-value":i,"uniforms-cameraNear-value":f.near,"uniforms-cameraFar-value":f.far,"uniforms-resolution-value":i?[d.width*p,d.height*p]:[0,0]})))}function tJ(e,t,n,r,i){const[[o,a]]=l.useState((()=>[new vo,new vo]));l.useLayoutEffect((()=>{if(!$Y(e.current))throw new Error("SpotlightShadow must be a child of a SpotLight");e.current.shadow.mapSize.set(n,r),e.current.shadow.needsUpdate=!0}),[e,n,r]),uy((()=>{if(!e.current)return;const n=e.current.position,r=e.current.target.position;a.copy(r).sub(n);var s=a.length();a.normalize().multiplyScalar(s*i),o.copy(n).add(a),t.current.position.copy(o),t.current.lookAt(e.current.target.position)}))}function nJ(e){let{distance:t=.4,alphaTest:n=.5,map:r,shader:i=ZY,width:o=512,height:a=512,scale:s=1,children:c,...u}=e;const h=l.useRef(null),d=u.spotlightRef,f=u.debug;tJ(d,h,o,a,t);const p=l.useMemo((()=>new uo(o,a,{format:Sn,stencilBuffer:!1})),[o,a]),m=l.useRef({uShadowMap:{value:r},uTime:{value:0}});l.useEffect((()=>{m.current.uShadowMap.value=r}),[r]);const g=l.useMemo((()=>new Zk(new Ls({uniforms:m.current,vertexShader:"\n          varying vec2 vUv;\n\n          void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n          }\n          ",fragmentShader:i}))),[i]);return l.useEffect((()=>()=>{g.material.dispose(),g.dispose()}),[g]),l.useEffect((()=>()=>p.dispose()),[p]),uy(((e,t)=>{let{gl:n}=e;m.current.uTime.value+=t,n.setRenderTarget(p),g.render(n),n.setRenderTarget(null)})),l.createElement(l.Fragment,null,l.createElement("mesh",{ref:h,scale:s,castShadow:!0},l.createElement("planeGeometry",null),l.createElement("meshBasicMaterial",{transparent:!0,side:Ke,alphaTest:n,alphaMap:p.texture,"alphaMap-wrapS":Kt,"alphaMap-wrapT":Kt,opacity:f?1:0},c)))}function rJ(e){let{distance:t=.4,alphaTest:n=.5,map:r,width:i=512,height:o=512,scale:a,children:s,...c}=e;const u=l.useRef(null),h=c.spotlightRef,d=c.debug;return tJ(h,u,i,o,t),l.createElement(l.Fragment,null,l.createElement("mesh",{ref:u,scale:a,castShadow:!0},l.createElement("planeGeometry",null),l.createElement("meshBasicMaterial",{transparent:!0,side:Ke,alphaTest:n,alphaMap:r,"alphaMap-wrapS":Kt,"alphaMap-wrapT":Kt,opacity:d?1:0},s)))}function iJ(e){return e.shader?l.createElement(nJ,e):l.createElement(rJ,e)}const oJ=l.forwardRef(((e,t)=>{let{opacity:n=1,radiusTop:r,radiusBottom:i,depthBuffer:o,color:a="white",distance:s=5,angle:c=.15,attenuation:u=5,anglePower:h=5,volumetric:d=!0,debug:f=!1,children:p,...m}=e;const g=l.useRef(null);return l.useImperativeHandle(t,(()=>g.current),[]),l.createElement("group",null,f&&g.current&&l.createElement("spotLightHelper",{args:[g.current]}),l.createElement("spotLight",tC({ref:g,angle:c,color:a,distance:s,castShadow:!0},m),d&&l.createElement(eJ,{debug:f,opacity:n,radiusTop:r,radiusBottom:i,depthBuffer:o,color:a,distance:s,angle:c,attenuation:u,anglePower:h})),p&&l.cloneElement(p,{spotlightRef:g,debug:f}))})),aJ=l.forwardRef(((e,t)=>{let{args:n,map:r,toneMapped:i=!1,color:o="white",form:a="rect",intensity:s=1,scale:c=1,target:u,children:h,...d}=e;const f=l.useRef(null);return l.useImperativeHandle(t,(()=>f.current),[]),l.useLayoutEffect((()=>{h||d.material||(Ay(f.current.material,{color:o}),f.current.material.color.multiplyScalar(s))}),[o,s,h,d.material]),l.useLayoutEffect((()=>{u&&f.current.lookAt(Array.isArray(u)?new vo(...u):u)}),[u]),c=Array.isArray(c)&&2===c.length?[c[0],c[1],1]:c,l.createElement("mesh",tC({ref:f,scale:c},d),"circle"===a?l.createElement("ringGeometry",{args:[0,1,64]}):"ring"===a?l.createElement("ringGeometry",{args:[.5,1,64]}):"rect"===a?l.createElement("planeGeometry",null):l.createElement(a,{args:n}),h||(d.material?null:l.createElement("meshBasicMaterial",{toneMapped:i,map:r,side:Ke})))}));var sJ=Object.defineProperty,lJ=(e,t,n)=>(((e,t,n)=>{t in e?sJ(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n})(e,"symbol"!==typeof t?t+"":t,n),n);const cJ={uniforms:{turbidity:{value:2},rayleigh:{value:1},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new vo},up:{value:new vo(0,1,0)}},vertexShader:"\n      uniform vec3 sunPosition;\n      uniform float rayleigh;\n      uniform float turbidity;\n      uniform float mieCoefficient;\n      uniform vec3 up;\n\n      varying vec3 vWorldPosition;\n      varying vec3 vSunDirection;\n      varying float vSunfade;\n      varying vec3 vBetaR;\n      varying vec3 vBetaM;\n      varying float vSunE;\n\n      // constants for atmospheric scattering\n      const float e = 2.71828182845904523536028747135266249775724709369995957;\n      const float pi = 3.141592653589793238462643383279502884197169;\n\n      // wavelength of used primaries, according to preetham\n      const vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n      // this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n      // (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\n      const vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n      // mie stuff\n      // K coefficient for the primaries\n      const float v = 4.0;\n      const vec3 K = vec3( 0.686, 0.678, 0.666 );\n      // MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\n      const vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n      // earth shadow hack\n      // cutoffAngle = pi / 1.95;\n      const float cutoffAngle = 1.6110731556870734;\n      const float steepness = 1.5;\n      const float EE = 1000.0;\n\n      float sunIntensity( float zenithAngleCos ) {\n        zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n        return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n      }\n\n      vec3 totalMie( float T ) {\n        float c = ( 0.2 * T ) * 10E-18;\n        return 0.434 * c * MieConst;\n      }\n\n      void main() {\n\n        vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n        vWorldPosition = worldPosition.xyz;\n\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        gl_Position.z = gl_Position.w; // set z to camera.far\n\n        vSunDirection = normalize( sunPosition );\n\n        vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n        vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n        float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n      // extinction (absorbtion + out scattering)\n      // rayleigh coefficients\n        vBetaR = totalRayleigh * rayleighCoefficient;\n\n      // mie coefficients\n        vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n      }\n    ",fragmentShader:`\n      varying vec3 vWorldPosition;\n      varying vec3 vSunDirection;\n      varying float vSunfade;\n      varying vec3 vBetaR;\n      varying vec3 vBetaM;\n      varying float vSunE;\n\n      uniform float mieDirectionalG;\n      uniform vec3 up;\n\n      const vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n      // constants for atmospheric scattering\n      const float pi = 3.141592653589793238462643383279502884197169;\n\n      const float n = 1.0003; // refractive index of air\n      const float N = 2.545E25; // number of molecules per unit volume for air at 288.15K and 1013mb (sea level -45 celsius)\n\n      // optical length at zenith for molecules\n      const float rayleighZenithLength = 8.4E3;\n      const float mieZenithLength = 1.25E3;\n      // 66 arc seconds -> degrees, and the cosine of that\n      const float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n      // 3.0 / ( 16.0 * pi )\n      const float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n      // 1.0 / ( 4.0 * pi )\n      const float ONE_OVER_FOURPI = 0.07957747154594767;\n\n      float rayleighPhase( float cosTheta ) {\n        return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n      }\n\n      float hgPhase( float cosTheta, float g ) {\n        float g2 = pow( g, 2.0 );\n        float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n        return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n      }\n\n      void main() {\n\n        vec3 direction = normalize( vWorldPosition - cameraPos );\n\n      // optical length\n      // cutoff angle at 90 to avoid singularity in next formula.\n        float zenithAngle = acos( max( 0.0, dot( up, direction ) ) );\n        float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n        float sR = rayleighZenithLength * inverse;\n        float sM = mieZenithLength * inverse;\n\n      // combined extinction factor\n        vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n      // in scattering\n        float cosTheta = dot( direction, vSunDirection );\n\n        float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n        vec3 betaRTheta = vBetaR * rPhase;\n\n        float mPhase = hgPhase( cosTheta, mieDirectionalG );\n        vec3 betaMTheta = vBetaM * mPhase;\n\n        vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n        Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n      // nightsky\n        float theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n        float phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n        vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n        vec3 L0 = vec3( 0.1 ) * Fex;\n\n      // composition + solar disc\n        float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n        L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n        vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n        vec3 retColor = pow( texColor, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n        gl_FragColor = vec4( retColor, 1.0 );\n\n      #include <tonemapping_fragment>\n      #include <${jD>=154?"colorspace_fragment":"encodings_fragment"}>\n\n      }\n    `},uJ=new Ls({name:"SkyShader",fragmentShader:cJ.fragmentShader,vertexShader:cJ.vertexShader,uniforms:ks.clone(cJ.uniforms),side:Je,depthWrite:!1});class hJ extends Is{constructor(){super(new Ps(1,1,1),uJ)}}function dJ(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new vo;const r=Math.PI*(e-.5),i=2*Math.PI*(t-.5);return n.x=Math.cos(i),n.y=Math.sin(r),n.z=Math.sin(i),n}lJ(hJ,"SkyShader",cJ),lJ(hJ,"material",uJ);const fJ=l.forwardRef(((e,t)=>{let{inclination:n=.6,azimuth:r=.1,distance:i=1e3,mieCoefficient:o=.005,mieDirectionalG:a=.8,rayleigh:s=.5,turbidity:c=10,sunPosition:u=dJ(n,r),...h}=e;const d=l.useMemo((()=>(new vo).setScalar(i)),[i]),[f]=l.useState((()=>new hJ));return l.createElement("primitive",tC({object:f,ref:t,"material-uniforms-mieCoefficient-value":o,"material-uniforms-mieDirectionalG-value":a,"material-uniforms-rayleigh-value":s,"material-uniforms-sunPosition-value":u,"material-uniforms-turbidity-value":c,scale:d},h))}));class pJ extends Ls{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:"\n      uniform float time;\n      attribute float size;\n      varying vec3 vColor;\n      void main() {\n        vColor = color;\n        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);\n        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));\n        gl_Position = projectionMatrix * mvPosition;\n      }",fragmentShader:`\n      uniform sampler2D pointTexture;\n      uniform float fade;\n      varying vec3 vColor;\n      void main() {\n        float opacity = 1.0;\n        if (fade == 1.0) {\n          float d = distance(gl_PointCoord, vec2(0.5, 0.5));\n          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));\n        }\n        gl_FragColor = vec4(vColor, opacity);\n\n        #include <tonemapping_fragment>\n\t      #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n      }`})}}const mJ=e=>(new vo).setFromSpherical(new sg(e,Math.acos(1-2*Math.random()),2*Math.random()*Math.PI)),gJ=l.forwardRef(((e,t)=>{let{radius:n=100,depth:r=50,count:i=5e3,saturation:o=0,factor:a=4,fade:s=!1,speed:c=1}=e;const u=l.useRef(),[h,d,f]=l.useMemo((()=>{const e=[],t=[],s=Array.from({length:i},(()=>(.5+.5*Math.random())*a)),l=new La;let c=n+r;const u=r/i;for(let n=0;n<i;n++)c-=u*Math.random(),e.push(...mJ(c).toArray()),l.setHSL(n/i,o,.9),t.push(l.r,l.g,l.b);return[new Float32Array(e),new Float32Array(t),new Float32Array(s)]}),[i,r,a,n,o]);uy((e=>u.current&&(u.current.uniforms.time.value=e.clock.getElapsedTime()*c)));const[p]=l.useState((()=>new pJ));return l.createElement("points",{ref:t},l.createElement("bufferGeometry",null,l.createElement("bufferAttribute",{attach:"attributes-position",args:[h,3]}),l.createElement("bufferAttribute",{attach:"attributes-color",args:[d,3]}),l.createElement("bufferAttribute",{attach:"attributes-size",args:[f,1]})),l.createElement("primitive",{ref:u,object:p,attach:"material",blending:et,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))})),vJ={randomUUID:"undefined"!==typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let yJ;const AJ=new Uint8Array(16);function xJ(){if(!yJ&&(yJ="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yJ))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yJ(AJ)}const bJ=[];for(let n=0;n<256;++n)bJ.push((n+256).toString(16).slice(1));function _J(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return bJ[e[t+0]]+bJ[e[t+1]]+bJ[e[t+2]]+bJ[e[t+3]]+"-"+bJ[e[t+4]]+bJ[e[t+5]]+"-"+bJ[e[t+6]]+bJ[e[t+7]]+"-"+bJ[e[t+8]]+bJ[e[t+9]]+"-"+bJ[e[t+10]]+bJ[e[t+11]]+bJ[e[t+12]]+bJ[e[t+13]]+bJ[e[t+14]]+bJ[e[t+15]]}const wJ=function(e,t,n){if(vJ.randomUUID&&!t&&!e)return vJ.randomUUID();const r=(e=e||{}).random||(e.rng||xJ)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(let e=0;e<16;++e)t[n+e]=r[e];return t}return _J(r)},EJ="https://rawcdn.githack.com/pmndrs/drei-assets/9225a9f1fbd449d9411125c2f419b843d0308c9f/cloud.png",SJ=new qo,CJ=new vo,MJ=new go,TJ=new vo,IJ=new go,BJ=new vo,PJ=l.createContext(null),RJ=l.forwardRef(((e,t)=>{let{children:n,material:r=cp,texture:i=EJ,range:o,limit:a=200,frustumCulled:s,...c}=e;var u,h;const d=l.useMemo((()=>class extends r{constructor(){super();const e=parseInt(ze.replace(/\D+/g,""))>=154?"opaque_fragment":"output_fragment";this.onBeforeCompile=t=>{t.vertexShader="attribute float cloudOpacity;\n               varying float vOpacity;\n              "+t.vertexShader.replace("#include <fog_vertex>","#include <fog_vertex>\n                 vOpacity = cloudOpacity;\n                "),t.fragmentShader="varying float vOpacity;\n              "+t.fragmentShader.replace(`#include <${e}>`,`#include <${e}>\n                 gl_FragColor = vec4(outgoingLight, diffuseColor.a * vOpacity);\n                `)}}}),[r]);hv({CloudMaterial:d});const f=l.useRef(null),p=l.useRef([]),m=l.useMemo((()=>new Float32Array(Array.from({length:a},(()=>1)))),[a]),g=l.useMemo((()=>new Float32Array(Array.from({length:a},(()=>[1,1,1])).flat())),[a]),v=AL(i);let y,A=0,x=0;const b=new go,_=new vo(0,0,1),w=new vo;uy(((e,t)=>{for(A=e.clock.getElapsedTime(),SJ.copy(f.current.matrixWorld).invert(),e.camera.matrixWorld.decompose(TJ,IJ,BJ),x=0;x<p.current.length;x++)y=p.current[x],y.ref.current.matrixWorld.decompose(CJ,MJ,BJ),CJ.add(w.copy(y.position).applyQuaternion(MJ).multiply(BJ)),MJ.copy(IJ).multiply(b.setFromAxisAngle(_,y.rotation+=t*y.rotationFactor)),BJ.multiplyScalar(y.volume+(1+Math.sin(A*y.density*y.speed))/2*y.growth),y.matrix.compose(CJ,MJ,BJ).premultiply(SJ),y.dist=CJ.distanceTo(TJ);for(p.current.sort(((e,t)=>t.dist-e.dist)),x=0;x<p.current.length;x++)y=p.current[x],m[x]=y.opacity*(y.dist<y.fade-1?y.dist/y.fade:1),f.current.setMatrixAt(x,y.matrix),f.current.setColorAt(x,y.color);f.current.geometry.attributes.cloudOpacity.needsUpdate=!0,f.current.instanceMatrix.needsUpdate=!0,f.current.instanceColor&&(f.current.instanceColor.needsUpdate=!0)})),l.useLayoutEffect((()=>{const e=Math.min(a,void 0!==o?o:a,p.current.length);f.current.count=e,dq(f.current.instanceMatrix,{offset:0,count:16*e}),f.current.instanceColor&&dq(f.current.instanceColor,{offset:0,count:3*e}),dq(f.current.geometry.attributes.cloudOpacity,{offset:0,count:e})}));let E=[null!==(u=v.image.width)&&void 0!==u?u:1,null!==(h=v.image.height)&&void 0!==h?h:1];const S=Math.max(E[0],E[1]);return E=[E[0]/S,E[1]/S],l.createElement("group",tC({ref:t},c),l.createElement(PJ.Provider,{value:p},n,l.createElement("instancedMesh",{matrixAutoUpdate:!1,ref:f,args:[null,null,a],frustumCulled:s},l.createElement("instancedBufferAttribute",{usage:pi,attach:"instanceColor",args:[g,3]}),l.createElement("planeGeometry",{args:[...E]},l.createElement("instancedBufferAttribute",{usage:pi,attach:"attributes-cloudOpacity",args:[m,1]})),l.createElement("cloudMaterial",{key:r.name,map:v,transparent:!0,depthWrite:!1}))))})),DJ=l.forwardRef(((e,t)=>{let{opacity:n=1,speed:r=0,bounds:i=[5,1,1],segments:o=20,color:a="#ffffff",fade:s=10,volume:c=6,smallestVolume:u=.25,distribute:h=null,growth:d=4,concentrate:f="inside",seed:p=Math.random(),...m}=e;function g(){const e=1e4*Math.sin(p++);return e-Math.floor(e)}const v=l.useContext(PJ),y=l.useRef(null),[A]=l.useState((()=>wJ())),x=l.useMemo((()=>[...new Array(o)].map(((e,t)=>({segments:o,bounds:new vo(1,1,1),position:new vo,uuid:A,index:t,ref:y,dist:0,matrix:new qo,color:new La,rotation:t*(Math.PI/o)})))),[o,A]);return l.useLayoutEffect((()=>{x.forEach(((e,t)=>{Ay(e,{volume:c,color:a,speed:r,growth:d,opacity:n,fade:s,bounds:i,density:Math.max(.5,g()),rotationFactor:Math.max(.2,.5*g())*r});const l=null==h?void 0:h(e,t);var p;(l||o>1)&&e.position.copy(e.bounds).multiply(null!==(p=null==l?void 0:l.point)&&void 0!==p?p:{x:2*g()-1,y:2*g()-1,z:2*g()-1});const m=Math.abs(e.position.x),v=Math.abs(e.position.y),y=Math.abs(e.position.z),A=Math.max(m,v,y);e.length=1,m===A&&(e.length-=m/e.bounds.x),v===A&&(e.length-=v/e.bounds.y),y===A&&(e.length-=y/e.bounds.z),e.volume=(void 0!==(null==l?void 0:l.volume)?l.volume:Math.max(Math.max(0,u),"random"===f?g():"inside"===f?e.length:1-e.length))*c}))}),[f,i,s,a,n,d,c,p,o,r]),l.useLayoutEffect((()=>{const e=x;return v.current=[...v.current,...e],()=>{v.current=v.current.filter((e=>e.uuid!==A))}}),[x]),l.useImperativeHandle(t,(()=>y.current),[]),l.createElement("group",tC({ref:y},m))})),OJ=l.forwardRef(((e,t)=>l.useContext(PJ)?l.createElement(DJ,tC({ref:t},e)):l.createElement(RJ,null,l.createElement(DJ,tC({ref:t},e))))),kJ=vL({time:0,pixelRatio:1}," uniform float pixelRatio;\n    uniform float time;\n    attribute float size;  \n    attribute float speed;  \n    attribute float opacity;\n    attribute vec3 noise;\n    attribute vec3 color;\n    varying vec3 vColor;\n    varying float vOpacity;\n    void main() {\n      vec4 modelPosition = modelMatrix * vec4(position, 1.0);\n      modelPosition.y += sin(time * speed + modelPosition.x * noise.x * 100.0) * 0.2;\n      modelPosition.z += cos(time * speed + modelPosition.x * noise.y * 100.0) * 0.2;\n      modelPosition.x += cos(time * speed + modelPosition.x * noise.z * 100.0) * 0.2;\n      vec4 viewPosition = viewMatrix * modelPosition;\n      vec4 projectionPostion = projectionMatrix * viewPosition;\n      gl_Position = projectionPostion;\n      gl_PointSize = size * 25. * pixelRatio;\n      gl_PointSize *= (1.0 / - viewPosition.z);\n      vColor = color;\n      vOpacity = opacity;\n    }",` varying vec3 vColor;\n    varying float vOpacity;\n    void main() {\n      float distanceToCenter = distance(gl_PointCoord, vec2(0.5));\n      float strength = 0.05 / distanceToCenter - 0.1;\n      gl_FragColor = vec4(vColor, strength * vOpacity);\n      #include <tonemapping_fragment>\n      #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n    }`),LJ=e=>e&&e.constructor===Float32Array,FJ=e=>e instanceof zi||e instanceof vo||e instanceof lo,zJ=e=>Array.isArray(e)?e:FJ(e)?e.toArray():[e,e,e];function UJ(e,t,n){return l.useMemo((()=>{if(void 0!==t){if(LJ(t))return t;if(t instanceof La){const n=Array.from({length:3*e},(()=>(e=>[e.r,e.g,e.b])(t))).flat();return Float32Array.from(n)}if(FJ(t)||Array.isArray(t)){const n=Array.from({length:3*e},(()=>zJ(t))).flat();return Float32Array.from(n)}return Float32Array.from({length:e},(()=>t))}return Float32Array.from({length:e},n)}),[t])}const NJ=l.forwardRef(((e,t)=>{let{noise:n=1,count:r=100,speed:i=1,opacity:o=1,scale:a=1,size:s,color:c,children:u,...h}=e;l.useMemo((()=>hv({SparklesImplMaterial:kJ})),[]);const d=l.useRef(null),f=cy((e=>e.viewport.dpr)),p=zJ(a),m=l.useMemo((()=>Float32Array.from(Array.from({length:r},(()=>p.map(Fi.randFloatSpread))).flat())),[r,...p]),g=UJ(r,s,Math.random),v=UJ(r,o),y=UJ(r,i),A=UJ(3*r,n),x=UJ(void 0===c?3*r:r,LJ(c)?c:new La(c),(()=>1));return uy((e=>{d.current&&d.current.material&&(d.current.material.time=e.clock.elapsedTime)})),l.useImperativeHandle(t,(()=>d.current),[]),l.createElement("points",tC({key:`particle-${r}-${JSON.stringify(a)}`},h,{ref:d}),l.createElement("bufferGeometry",null,l.createElement("bufferAttribute",{attach:"attributes-position",args:[m,3]}),l.createElement("bufferAttribute",{attach:"attributes-size",args:[g,1]}),l.createElement("bufferAttribute",{attach:"attributes-opacity",args:[v,1]}),l.createElement("bufferAttribute",{attach:"attributes-speed",args:[y,1]}),l.createElement("bufferAttribute",{attach:"attributes-color",args:[x,3]}),l.createElement("bufferAttribute",{attach:"attributes-noise",args:[A,3]})),u||l.createElement("sparklesImplMaterial",{transparent:!0,pixelRatio:f,depthWrite:!1}))}));const jJ="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/matcaps.json",GJ="https://rawcdn.githack.com/emmelleppi/matcaps/9b36ccaaf0a24881a39062d05566c9e92be4aa0d";function QJ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,n=arguments.length>2?arguments[2]:void 0;const r=nv((()=>fetch(jJ).then((e=>e.json()))),["matcapList"]),i=r[0],o=l.useMemo((()=>Object.keys(r).length),[]),a=`${l.useMemo((()=>"string"===typeof e?e:"number"===typeof e?r[e]:null),[e])||i}${function(e){switch(e){case 64:return"-64px";case 128:return"-128px";case 256:return"-256px";case 512:return"-512px";default:return""}}(t)}.png`,s=`${GJ}/${t}/${a}`;return[AL(s,n),s,o]}const HJ=e=>{let{children:t,id:n,format:r,onLoad:i}=e;const o=QJ(n,r,i);return l.createElement(l.Fragment,null,null==t?void 0:t(o))},VJ="https://rawcdn.githack.com/pmndrs/drei-assets/7a3104997e1576f83472829815b00880d88b32fb",WJ="https://cdn.jsdelivr.net/gh/pmndrs/drei-assets@master/normals/normals.json";function qJ(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0;const{repeat:r=[1,1],anisotropy:i=1,offset:o=[0,0]}=t,a=nv((()=>fetch(WJ).then((e=>e.json()))),["normalsList"]),s=l.useMemo((()=>Object.keys(a).length),[]),c=a[0],u=a[e]||c,h=`${VJ}/normals/${u}`,d=AL(h,n);return l.useLayoutEffect((()=>{d&&(d.wrapS=d.wrapT=Kt,d.repeat=new zi(r[0],r[1]),d.offset=new zi(o[0],o[1]),d.anisotropy=i)}),[d,i,r,o]),[d,h,s]}const XJ=e=>{let{children:t,id:n,onLoad:r,...i}=e;const o=qJ(n,i,r);return l.createElement(l.Fragment,null,null==t?void 0:t(o))},YJ={uniforms:{strokeOpacity:1,fillOpacity:.25,fillMix:0,thickness:.05,colorBackfaces:!1,dashInvert:!0,dash:!1,dashRepeats:4,dashLength:.5,squeeze:!1,squeezeMin:.2,squeezeMax:1,stroke:new La("#ff0000"),backfaceStroke:new La("#0000ff"),fill:new La("#00ff00")},vertex:"\n\t  attribute vec3 barycentric;\n\t\n\t\tvarying vec3 v_edges_Barycentric;\n\t\tvarying vec3 v_edges_Position;\n\n\t\tvoid initWireframe() {\n\t\t\tv_edges_Barycentric = barycentric;\n\t\t\tv_edges_Position = position.xyz;\n\t\t}\n\t  ",fragment:"\n\t\t#ifndef PI\n\t  \t#define PI 3.1415926535897932384626433832795\n\t\t#endif\n  \n\t  varying vec3 v_edges_Barycentric;\n\t  varying vec3 v_edges_Position;\n  \n\t  uniform float strokeOpacity;\n\t  uniform float fillOpacity;\n\t  uniform float fillMix;\n\t  uniform float thickness;\n\t  uniform bool colorBackfaces;\n  \n\t  // Dash\n\t  uniform bool dashInvert;\n\t  uniform bool dash;\n\t  uniform bool dashOnly;\n\t  uniform float dashRepeats;\n\t  uniform float dashLength;\n  \n\t  // Squeeze\n\t  uniform bool squeeze;\n\t  uniform float squeezeMin;\n\t  uniform float squeezeMax;\n  \n\t  // Colors\n\t  uniform vec3 stroke;\n\t  uniform vec3 backfaceStroke;\n\t  uniform vec3 fill;\n  \n\t  // This is like\n\t  float wireframe_aastep(float threshold, float dist) {\n\t\t  float afwidth = fwidth(dist) * 0.5;\n\t\t  return smoothstep(threshold - afwidth, threshold + afwidth, dist);\n\t  }\n  \n\t  float wireframe_map(float value, float min1, float max1, float min2, float max2) {\n\t\t  return min2 + (value - min1) * (max2 - min2) / (max1 - min1);\n\t  }\n  \n\t  float getWireframe() {\n\t\t\tvec3 barycentric = v_edges_Barycentric;\n\t\t\n\t\t\t// Distance from center of each triangle to its edges.\n\t\t\tfloat d = min(min(barycentric.x, barycentric.y), barycentric.z);\n\n\t\t\t// for dashed rendering, we can use this to get the 0 .. 1 value of the line length\n\t\t\tfloat positionAlong = max(barycentric.x, barycentric.y);\n\t\t\tif (barycentric.y < barycentric.x && barycentric.y < barycentric.z) {\n\t\t\t\tpositionAlong = 1.0 - positionAlong;\n\t\t\t}\n\n\t\t\t// the thickness of the stroke\n\t\t\tfloat computedThickness = wireframe_map(thickness, 0.0, 1.0, 0.0, 0.34);\n\n\t\t\t// if we want to shrink the thickness toward the center of the line segment\n\t\t\tif (squeeze) {\n\t\t\t\tcomputedThickness *= mix(squeezeMin, squeezeMax, (1.0 - sin(positionAlong * PI)));\n\t\t\t}\n\n\t\t\t// Create dash pattern\n\t\t\tif (dash) {\n\t\t\t\t// here we offset the stroke position depending on whether it\n\t\t\t\t// should overlap or not\n\t\t\t\tfloat offset = 1.0 / dashRepeats * dashLength / 2.0;\n\t\t\t\tif (!dashInvert) {\n\t\t\t\t\toffset += 1.0 / dashRepeats / 2.0;\n\t\t\t\t}\n\n\t\t\t\t// if we should animate the dash or not\n\t\t\t\t// if (dashAnimate) {\n\t\t\t\t// \toffset += time * 0.22;\n\t\t\t\t// }\n\n\t\t\t\t// create the repeating dash pattern\n\t\t\t\tfloat pattern = fract((positionAlong + offset) * dashRepeats);\n\t\t\t\tcomputedThickness *= 1.0 - wireframe_aastep(dashLength, pattern);\n\t\t\t}\n\n\t\t\t// compute the anti-aliased stroke edge  \n\t\t\tfloat edge = 1.0 - wireframe_aastep(computedThickness, d);\n\n\t\t\treturn edge;\n\t  }\n\t  "},JJ=vL(YJ.uniforms,YJ.vertex+"\n  \tvoid main() {\n\t\tinitWireframe();\n\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\t}\n  ",YJ.fragment+"\n  void main () {\n\t\t// Compute color\n\n\t\tfloat edge = getWireframe();\n\t\tvec4 colorStroke = vec4(stroke, edge);\n\n\t\t#ifdef FLIP_SIDED\n\t\t\tcolorStroke.rgb = backfaceStroke;\n\t\t#endif\n    \n\t\tvec4 colorFill = vec4(fill, fillOpacity);\n\t\tvec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);\n\n\t\tgl_FragColor = outColor;\n\t}\n  ");function KJ(e){return void 0!==(null==e?void 0:e.current)}function ZJ(e){return"WireframeGeometry"===e.type}function $J(e){const t=function(e){return!(null==e||!e.current)}(e)?e.current:e;if(function(e){return!(null==e||!e.isBufferGeometry)}(t))return t;{if(ZJ(t))throw new Error("Wireframe: WireframeGeometry is not supported.");const e=t.parent;if(function(e){return!(null==e||!e.geometry)}(e)){if(ZJ(e.geometry))throw new Error("Wireframe: WireframeGeometry is not supported.");return e.geometry}}}function eK(e,t){if(e.index){console.warn("Wireframe: Requires non-indexed geometry, converting to non-indexed geometry.");const t=e.toNonIndexed();e.copy(t),e.setIndex(null)}const n=function(e,t){const n=e.getAttribute("position").count,r=[];for(let i=0;i<n;i++){const e=t?1:0;i%2===0?r.push(0,0,1,0,1,0,1,0,e):r.push(0,1,0,0,0,1,1,0,e)}return new Xa(Float32Array.from(r),3)}(e,t);e.setAttribute("barycentric",n)}function tK(e){let{geometry:t,simplify:n=!1,...r}=e;hv({MeshWireframeMaterial:JJ});const[i,o]=l.useState(null);l.useLayoutEffect((()=>{const e=$J(t);if(!e)throw new Error("Wireframe: geometry prop must be a BufferGeometry or a ref to a BufferGeometry.");eK(e,n),KJ(t)&&o(e)}),[n,t]);const a=KJ(t)?i:t;return l.createElement(l.Fragment,null,a&&l.createElement("mesh",{geometry:a},l.createElement("meshWireframeMaterial",tC({attach:"material",transparent:!0,side:Ke,polygonOffset:!0,polygonOffsetFactor:-4},r,{extensions:{derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1}}))))}function nK(e){let{simplify:t=!1,...n}=e;const r=l.useRef(null),i=l.useMemo((()=>function(){const e={};for(const t in YJ.uniforms)e[t]={value:YJ.uniforms[t]};return e}()),[YJ.uniforms]);return function(e,t){l.useEffect((()=>{var n;e.fillOpacity.value=null!==(n=t.fillOpacity)&&void 0!==n?n:e.fillOpacity.value}),[t.fillOpacity]),l.useEffect((()=>{var n;e.fillMix.value=null!==(n=t.fillMix)&&void 0!==n?n:e.fillMix.value}),[t.fillMix]),l.useEffect((()=>{var n;e.strokeOpacity.value=null!==(n=t.strokeOpacity)&&void 0!==n?n:e.strokeOpacity.value}),[t.strokeOpacity]),l.useEffect((()=>{var n;e.thickness.value=null!==(n=t.thickness)&&void 0!==n?n:e.thickness.value}),[t.thickness]),l.useEffect((()=>{e.colorBackfaces.value=!!t.colorBackfaces}),[t.colorBackfaces]),l.useEffect((()=>{e.dash.value=!!t.dash}),[t.dash]),l.useEffect((()=>{e.dashInvert.value=!!t.dashInvert}),[t.dashInvert]),l.useEffect((()=>{var n;e.dashRepeats.value=null!==(n=t.dashRepeats)&&void 0!==n?n:e.dashRepeats.value}),[t.dashRepeats]),l.useEffect((()=>{var n;e.dashLength.value=null!==(n=t.dashLength)&&void 0!==n?n:e.dashLength.value}),[t.dashLength]),l.useEffect((()=>{e.squeeze.value=!!t.squeeze}),[t.squeeze]),l.useEffect((()=>{var n;e.squeezeMin.value=null!==(n=t.squeezeMin)&&void 0!==n?n:e.squeezeMin.value}),[t.squeezeMin]),l.useEffect((()=>{var n;e.squeezeMax.value=null!==(n=t.squeezeMax)&&void 0!==n?n:e.squeezeMax.value}),[t.squeezeMax]),l.useEffect((()=>{e.stroke.value=t.stroke?new La(t.stroke):e.stroke.value}),[t.stroke]),l.useEffect((()=>{e.fill.value=t.fill?new La(t.fill):e.fill.value}),[t.fill]),l.useEffect((()=>{e.backfaceStroke.value=t.backfaceStroke?new La(t.backfaceStroke):e.backfaceStroke.value}),[t.backfaceStroke])}(i,n),l.useLayoutEffect((()=>{const e=$J(r);if(!e)throw new Error("Wireframe: Must be a child of a Mesh, Line or Points object or specify a geometry prop.");const n=e.clone();return eK(e,t),()=>{e.copy(n),n.dispose()}}),[t]),l.useLayoutEffect((()=>{const e=r.current.parent,t=e.material.clone();return function(e,t){e.onBeforeCompile=e=>{e.uniforms={...e.uniforms,...t},e.vertexShader=e.vertexShader.replace("void main() {",`\n\t\t  ${YJ.vertex}\n\t\t  void main() {\n\t\t\tinitWireframe();\n\t\t`),e.fragmentShader=e.fragmentShader.replace("void main() {",`\n\t\t  ${YJ.fragment}\n\t\t  void main() {\n\t\t`),e.fragmentShader=e.fragmentShader.replace("#include <color_fragment>","\n\t\t  #include <color_fragment>\n\t\t\t  float edge = getWireframe();\n\t\t  vec4 colorStroke = vec4(stroke, edge);\n\t\t  #ifdef FLIP_SIDED\n\t\t\tcolorStroke.rgb = backfaceStroke;\n\t\t  #endif\n\t\t  vec4 colorFill = vec4(mix(diffuseColor.rgb, fill, fillMix), mix(diffuseColor.a, fillOpacity, fillMix));\n\t\t  vec4 outColor = mix(colorFill, colorStroke, edge * strokeOpacity);\n\n\t\t  diffuseColor.rgb = outColor.rgb;\n\t\t  diffuseColor.a *= outColor.a;\n\t\t")},e.side=Ke,e.transparent=!0}(e.material,i),()=>{e.material.dispose(),e.material=t}}),[]),l.createElement("object3D",{ref:r})}function rK(e){let{geometry:t,...n}=e;return t?l.createElement(tK,tC({geometry:t},n)):l.createElement(nK,n)}function iK(e){let{opacity:t,alphaMap:n}=e;const r=l.useRef(null),i=l.useRef(null),o=l.useRef({value:1}),a=l.useRef({value:null}),s=l.useRef({value:!1});return l.useLayoutEffect((()=>{r.current.onBeforeCompile=i.current.onBeforeCompile=e=>{const t=e.fragmentShader.indexOf("void main");let n,r="",i=t;for(;"\n"!==n&&i<t+100;)n=e.fragmentShader.charAt(i),r+=n,i++;r=r.trim(),e.vertexShader=e.vertexShader.replace("void main() {","\n        varying vec2 custom_vUv;\n\n        void main() {\n          custom_vUv = uv;\n          \n        "),e.fragmentShader=e.fragmentShader.replace(r,"\n          uniform float uShadowOpacity;\n          uniform sampler2D uAlphaMap;\n          uniform bool uHasAlphaMap;\n\n          varying vec2 custom_vUv;\n  \n          float bayerDither2x2( vec2 v ) {\n            return mod( 3.0 * v.y + 2.0 * v.x, 4.0 );\n          }\n    \n          float bayerDither4x4( vec2 v ) {\n            vec2 P1 = mod( v, 2.0 );\n            vec2 P2 = mod( floor( 0.5  * v ), 2.0 );\n            return 4.0 * bayerDither2x2( P1 ) + bayerDither2x2( P2 );\n          }\n  \n          void main() {\n            float alpha = \n              uHasAlphaMap ? \n                uShadowOpacity * texture2D(uAlphaMap, custom_vUv).x\n              : uShadowOpacity;\n\n            if( ( bayerDither4x4( floor( mod( gl_FragCoord.xy, 4.0 ) ) ) ) / 16.0 >= alpha ) discard;\n            \n          "),e.uniforms.uShadowOpacity=o.current,e.uniforms.uAlphaMap=a.current,e.uniforms.uHasAlphaMap=s.current}}),[]),uy((()=>{var e;const i=null==(e=r.current.__r3f)?void 0:e.parent;if(i){const e=i.material;e&&(o.current.value=null!==t&&void 0!==t?t:e.opacity,!1===n?(a.current.value=null,s.current.value=!1):(a.current.value=n||e.alphaMap,s.current.value=!!a.current.value))}})),l.createElement(l.Fragment,null,l.createElement("meshDepthMaterial",{ref:r,attach:"customDepthMaterial",depthPacking:Ir}),l.createElement("meshDistanceMaterial",{ref:i,attach:"customDistanceMaterial"}))}const oK=new qo,aK=new Wo,sK=new zo,lK=new vo;class cK extends ku{constructor(){super(),this.size=0,this.color=new La("white"),this.instance={current:void 0},this.instanceKey={current:void 0}}get geometry(){var e;return null==(e=this.instance.current)?void 0:e.geometry}raycast(e,t){var n,r;const i=this.instance.current;if(!i||!i.geometry)return;const o=i.userData.instances.indexOf(this.instanceKey);if(-1===o||o>i.geometry.drawRange.count)return;const a=null!==(n=null==(r=e.params.Points)?void 0:r.threshold)&&void 0!==n?n:1;if(sK.set(this.getWorldPosition(lK),a),!1===e.ray.intersectsSphere(sK))return;oK.copy(i.matrixWorld).invert(),aK.copy(e.ray).applyMatrix4(oK);const s=a/((this.scale.x+this.scale.y+this.scale.z)/3),l=s*s,c=aK.distanceSqToPoint(this.position);if(c<l){const n=new vo;aK.closestPointToPoint(this.position,n),n.applyMatrix4(this.matrixWorld);const r=e.ray.origin.distanceTo(n);if(r<e.near||r>e.far)return;t.push({distance:r,distanceToRay:Math.sqrt(c),point:n,index:o,face:null,object:this})}}}let uK,hK;const dK=l.createContext(null),fK=new qo,pK=new vo,mK=l.forwardRef(((e,t)=>{let{children:n,range:r,limit:i=1e3,...o}=e;const a=l.useRef(null);l.useImperativeHandle(t,(()=>a.current),[]);const[s,c]=l.useState([]),[[u,h,d]]=l.useState((()=>[new Float32Array(3*i),Float32Array.from({length:3*i},(()=>1)),Float32Array.from({length:i},(()=>1))]));l.useEffect((()=>{a.current.geometry.attributes.position.needsUpdate=!0})),uy((()=>{for(a.current.updateMatrix(),a.current.updateMatrixWorld(),fK.copy(a.current.matrixWorld).invert(),a.current.geometry.drawRange.count=Math.min(i,void 0!==r?r:i,s.length),uK=0;uK<s.length;uK++)hK=s[uK].current,hK.getWorldPosition(pK).applyMatrix4(fK),pK.toArray(u,3*uK),a.current.geometry.attributes.position.needsUpdate=!0,hK.matrixWorldNeedsUpdate=!0,hK.color.toArray(h,3*uK),a.current.geometry.attributes.color.needsUpdate=!0,d.set([hK.size],uK),a.current.geometry.attributes.size.needsUpdate=!0}));const f=l.useMemo((()=>({getParent:()=>a,subscribe:e=>(c((t=>[...t,e])),()=>c((t=>t.filter((t=>t.current!==e.current)))))})),[]);return l.createElement("points",tC({userData:{instances:s},matrixAutoUpdate:!1,ref:a,raycast:()=>null},o),l.createElement("bufferGeometry",null,l.createElement("bufferAttribute",{attach:"attributes-position",count:u.length/3,array:u,itemSize:3,usage:pi}),l.createElement("bufferAttribute",{attach:"attributes-color",count:h.length/3,array:h,itemSize:3,usage:pi}),l.createElement("bufferAttribute",{attach:"attributes-size",count:d.length,array:d,itemSize:1,usage:pi})),l.createElement(dK.Provider,{value:f},n))})),gK=l.forwardRef(((e,t)=>{let{children:n,...r}=e;l.useMemo((()=>hv({PositionPoint:cK})),[]);const i=l.useRef(null);l.useImperativeHandle(t,(()=>i.current),[]);const{subscribe:o,getParent:a}=l.useContext(dK);return l.useLayoutEffect((()=>o(i)),[]),l.createElement("positionPoint",tC({instance:a(),instanceKey:i,ref:i},r),n)})),vK=l.forwardRef(((e,t)=>{let{children:n,positions:r,colors:i,sizes:o,stride:a=3,...s}=e;const c=l.useRef(null);return l.useImperativeHandle(t,(()=>c.current),[]),uy((()=>{const e=c.current.geometry.attributes;e.position.needsUpdate=!0,i&&(e.color.needsUpdate=!0),o&&(e.size.needsUpdate=!0)})),l.createElement("points",tC({ref:c},s),l.createElement("bufferGeometry",null,l.createElement("bufferAttribute",{attach:"attributes-position",count:r.length/a,array:r,itemSize:a,usage:pi}),i&&l.createElement("bufferAttribute",{attach:"attributes-color",count:i.length/a,array:i,itemSize:3,usage:pi}),o&&l.createElement("bufferAttribute",{attach:"attributes-size",count:o.length/a,array:o,itemSize:1,usage:pi})),n)})),yK=l.forwardRef(((e,t)=>e.positions instanceof Float32Array?l.createElement(vK,tC({},e,{ref:t})):l.createElement(mK,tC({},e,{ref:t})))),AK=l.createContext(null),xK=l.forwardRef(((e,t)=>{l.useMemo((()=>hv({SegmentObject:bK})),[]);const{limit:n=1e3,lineWidth:r=1,children:i,...o}=e,[a,s]=l.useState([]),[c]=l.useState((()=>new sO)),[u]=l.useState((()=>new ND)),[h]=l.useState((()=>new UD)),[d]=l.useState((()=>new zi(512,512))),[f]=l.useState((()=>Array(6*n).fill(0))),[p]=l.useState((()=>Array(6*n).fill(0))),m=l.useMemo((()=>({subscribe:e=>(s((t=>[...t,e])),()=>s((t=>t.filter((t=>t.current!==e.current)))))})),[]);return uy((()=>{for(let t=0;t<n;t++){var e;const n=null==(e=a[t])?void 0:e.current;n&&(f[6*t+0]=n.start.x,f[6*t+1]=n.start.y,f[6*t+2]=n.start.z,f[6*t+3]=n.end.x,f[6*t+4]=n.end.y,f[6*t+5]=n.end.z,p[6*t+0]=n.color.r,p[6*t+1]=n.color.g,p[6*t+2]=n.color.b,p[6*t+3]=n.color.r,p[6*t+4]=n.color.g,p[6*t+5]=n.color.b)}h.setColors(p),h.setPositions(f),c.computeLineDistances()})),l.createElement("primitive",{object:c,ref:t},l.createElement("primitive",{object:h,attach:"geometry"}),l.createElement("primitive",tC({object:u,attach:"material",vertexColors:!0,resolution:d,linewidth:r},o)),l.createElement(AK.Provider,{value:m},i))}));class bK{constructor(){this.color=new La("white"),this.start=new vo(0,0,0),this.end=new vo(0,0,0)}}const _K=e=>e instanceof vo?e:new vo(..."number"===typeof e?[e,e,e]:e),wK=l.forwardRef(((e,t)=>{let{color:n,start:r,end:i}=e;const o=l.useContext(AK);if(!o)throw"Segment must used inside Segments component.";const a=l.useRef(null);return l.useImperativeHandle(t,(()=>a.current),[]),l.useLayoutEffect((()=>o.subscribe(a)),[]),l.createElement("segmentObject",{ref:a,color:n,start:_K(r),end:_K(i)})})),EK=l.forwardRef(((e,t)=>{let{children:n,hysteresis:r=0,distances:i,...o}=e;const a=l.useRef(null);return l.useImperativeHandle(t,(()=>a.current),[]),l.useLayoutEffect((()=>{const{current:e}=a;e.levels.length=0,e.children.forEach(((t,n)=>e.levels.push({object:t,hysteresis:r,distance:i[n]})))})),uy((e=>{var t;return null==(t=a.current)?void 0:t.update(e.camera)})),l.createElement("lOD",tC({ref:a},o),n)}));function SK(e){let{all:t,scene:n,camera:r}=e;const i=cy((e=>{let{gl:t}=e;return t})),o=cy((e=>{let{camera:t}=e;return t})),a=cy((e=>{let{scene:t}=e;return t}));return l.useLayoutEffect((()=>{const e=[];t&&(n||a).traverse((t=>{!1===t.visible&&(e.push(t),t.visible=!0)})),i.compile(n||a,r||o);const s=new Vs(128);new Qs(.01,1e5,s).update(i,n||a),s.dispose(),e.forEach((e=>e.visible=!1))}),[]),null}function CK(){const e=cy((e=>e.gl));return(0,l.useEffect)((()=>(e.shadowMap.autoUpdate=!1,e.shadowMap.needsUpdate=!0,()=>{e.shadowMap.autoUpdate=e.shadowMap.needsUpdate=!0})),[e.shadowMap]),null}const MK=new qo,TK=new Wo,IK=new zo,BK=new vo;function PK(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;void 0!==r&&(null===n.boundingSphere&&n.computeBoundingSphere(),IK.copy(n.boundingSphere),IK.applyMatrix4(i),!1!==e.ray.intersectsSphere(IK)&&(MK.copy(i).invert(),TK.copy(e.ray).applyMatrix4(MK),null!==n.boundingBox&&null===TK.intersectBox(n.boundingBox,BK)||t.push({distance:BK.distanceTo(e.ray.origin),point:BK.clone(),object:this})))}function RK(e){let{pixelated:t}=e;const n=cy((e=>e.gl)),r=cy((e=>e.internal.active)),i=cy((e=>e.performance.current)),o=cy((e=>e.viewport.initialDpr)),a=cy((e=>e.setDpr));return l.useEffect((()=>{const e=n.domElement;return()=>{r&&a(o),t&&e&&(e.style.imageRendering="auto")}}),[]),l.useEffect((()=>{a(i*o),t&&n.domElement&&(n.domElement.style.imageRendering=1===i?"auto":"pixelated")}),[i]),null}function DK(){const e=cy((e=>e.get)),t=cy((e=>e.setEvents)),n=cy((e=>e.performance.current));return l.useEffect((()=>{const n=e().events.enabled;return()=>t({enabled:n})}),[]),l.useEffect((()=>t({enabled:1===n})),[n]),null}const OK=(0,l.createContext)(null);function kK(e){let{iterations:t=10,ms:n=250,threshold:r=.75,step:i=.1,factor:o=.5,flipflops:a=1/0,bounds:s=e=>e>100?[60,100]:[40,60],onIncline:c,onDecline:u,onChange:h,onFallback:d,children:f}=e;const p=Math.pow(10,0),[m,g]=(0,l.useState)((()=>({fps:0,index:0,factor:o,flipped:0,refreshrate:0,fallback:!1,frames:[],averages:[],subscriptions:new Map,subscribe:e=>{const t=Symbol();return m.subscriptions.set(t,e.current),()=>{m.subscriptions.delete(t)}}})));let v=0;return uy((()=>{const{frames:e,averages:o}=m;if(!m.fallback&&o.length<t){e.push(performance.now());const l=e[e.length-1]-e[0];if(l>=n){if(m.fps=Math.round(e.length/l*1e3*p)/p,m.refreshrate=Math.max(m.refreshrate,m.fps),o[m.index++%t]=m.fps,o.length===t){const[e,n]=s(m.refreshrate),l=o.filter((e=>e>=n)),f=o.filter((t=>t<e));l.length>t*r&&(m.factor=Math.min(1,m.factor+i),m.flipped++,c&&c(m),m.subscriptions.forEach((e=>e.onIncline&&e.onIncline(m)))),f.length>t*r&&(m.factor=Math.max(0,m.factor-i),m.flipped++,u&&u(m),m.subscriptions.forEach((e=>e.onDecline&&e.onDecline(m)))),v!==m.factor&&(v=m.factor,h&&h(m),m.subscriptions.forEach((e=>e.onChange&&e.onChange(m)))),m.flipped>a&&!m.fallback&&(m.fallback=!0,d&&d(m),m.subscriptions.forEach((e=>e.onFallback&&e.onFallback(m)))),m.averages=[]}m.frames=[]}}})),l.createElement(OK.Provider,{value:m},f)}function LK(e){let{onIncline:t,onDecline:n,onChange:r,onFallback:i}=e;const o=(0,l.useContext)(OK),a=(0,l.useRef)({onIncline:t,onDecline:n,onChange:r,onFallback:i});(0,l.useLayoutEffect)((()=>{a.current.onIncline=t,a.current.onDecline=n,a.current.onChange=r,a.current.onFallback=i}),[t,n,r,i]),(0,l.useLayoutEffect)((()=>o.subscribe(a)),[o])}const FK=l.forwardRef(((e,t)=>{let{children:n,compute:r,width:i,height:o,samples:a=8,renderPriority:s=0,eventPriority:c=0,frames:u=1/0,stencilBuffer:h=!1,depthBuffer:d=!0,generateMipmaps:f=!1,...p}=e;const{size:m,viewport:g}=cy(),v=Tz((i||m.width)*g.dpr,(o||m.height)*g.dpr,{samples:a,stencilBuffer:h,depthBuffer:d,generateMipmaps:f}),[y]=l.useState((()=>new qu)),A=l.useCallback(((e,t,n)=>{var r,i;let o=null==(r=v.texture)?void 0:r.__r3f.parent;for(;o&&!(o instanceof xa);)o=o.__r3f.parent;if(!o)return!1;n.raycaster.camera||n.events.compute(e,n,null==(i=n.previousRoot)?void 0:i.getState());const[a]=n.raycaster.intersectObject(o);if(!a)return!1;const s=a.uv;if(!s)return!1;t.raycaster.setFromCamera(t.pointer.set(2*s.x-1,2*s.y-1),t.camera)}),[]);return l.useImperativeHandle(t,(()=>v.texture),[v]),l.createElement(l.Fragment,null,Cy(l.createElement(zK,{renderPriority:s,frames:u,fbo:v},n,l.createElement("group",{onPointerOver:()=>null})),y,{events:{compute:r||A,priority:c}}),l.createElement("primitive",tC({object:v.texture},p)))}));function zK(e){let t,n,r,i,{frames:o,renderPriority:a,children:s,fbo:c}=e,u=0;return uy((e=>{(o===1/0||u<o)&&(t=e.gl.autoClear,n=e.gl.xr.enabled,r=e.gl.getRenderTarget(),i=e.gl.xr.isPresenting,e.gl.autoClear=!0,e.gl.xr.enabled=!1,e.gl.xr.isPresenting=!1,e.gl.setRenderTarget(c),e.gl.render(e.scene,e.camera),e.gl.setRenderTarget(r),e.gl.autoClear=t,e.gl.xr.enabled=n,e.gl.xr.isPresenting=i,u++)}),a),l.createElement(l.Fragment,null,s)}const UK=l.forwardRef(((e,t)=>{let{children:n,compute:r,renderPriority:i=-1,eventPriority:o=0,frames:a=1/0,stencilBuffer:s=!1,depthBuffer:c=!0,generateMipmaps:u=!1,resolution:h=896,near:d=.1,far:f=1e3,flip:p=!1,position:m,rotation:g,scale:v,quaternion:y,matrix:A,matrixAutoUpdate:x,...b}=e;const{size:_,viewport:w}=cy(),E=l.useRef(null),S=l.useMemo((()=>{const e=new Vs(Math.max((h||_.width)*w.dpr,(h||_.height)*w.dpr),{stencilBuffer:s,depthBuffer:c,generateMipmaps:u});return e.texture.isRenderTargetTexture=!p,e.texture.flipY=!0,e.texture.type=yn,e}),[h,p]);l.useEffect((()=>()=>S.dispose()),[S]);const[C]=l.useState((()=>new qu));return l.useImperativeHandle(t,(()=>({scene:C,fbo:S,camera:E.current})),[S]),l.createElement(l.Fragment,null,Cy(l.createElement(NK,{renderPriority:i,frames:a,camera:E},n,l.createElement("group",{onPointerOver:()=>null})),C,{events:{compute:r,priority:o}}),l.createElement("primitive",tC({object:S.texture},b)),l.createElement("cubeCamera",{ref:E,args:[d,f,S],position:m,rotation:g,scale:v,quaternion:y,matrix:A,matrixAutoUpdate:x}))}));function NK(e){let{frames:t,renderPriority:n,children:r,camera:i}=e,o=0;return uy((e=>{(t===1/0||o<t)&&(i.current.update(e.gl,e.scene),o++)}),n),l.createElement(l.Fragment,null,r)}const jK=l.forwardRef(((e,t)=>{let{id:n=1,colorWrite:r=!1,depthWrite:i=!1,...o}=e;const a=l.useRef(null),s=l.useMemo((()=>({colorWrite:r,depthWrite:i,stencilWrite:!0,stencilRef:n,stencilFunc:ii,stencilFail:Vr,stencilZFail:Vr,stencilZPass:Vr})),[n,r,i]);return l.useLayoutEffect((()=>{Object.assign(a.current.material,s)})),l.useImperativeHandle(t,(()=>a.current),[]),l.createElement("mesh",tC({ref:a,renderOrder:-n},o))}));function GK(e){return{stencilWrite:!0,stencilRef:e,stencilFunc:arguments.length>1&&void 0!==arguments[1]&&arguments[1]?ni:$r,stencilFail:Hr,stencilZFail:Hr,stencilZPass:Hr}}function QK(e){let{renderPriority:t=1,zoom:n=0,segments:r=64,children:i,resolution:o=896,...a}=e;const s=l.useRef(null),c=l.useRef(null),{width:u,height:h}=cy((e=>e.size)),[d]=l.useState((()=>new pl));l.useLayoutEffect((()=>{d.position.set(0,0,100),d.zoom=100,d.left=u/-2,d.right=u/2,d.top=h/2,d.bottom=h/-2,d.updateProjectionMatrix()}),[u,h]);const f=Math.sqrt(u*u+h*h)/100*(.5+n/2),p=new vo,m=new zo(new vo,f),g=new Ui,v=l.useCallback(((e,t,n)=>{t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,d),t.raycaster.ray.intersectSphere(m,p)&&(p.normalize(),g.getNormalMatrix(c.current.camera.matrixWorld),c.current.camera.getWorldPosition(t.raycaster.ray.origin),t.raycaster.ray.direction.set(0,0,1).reflect(p),t.raycaster.ray.direction.x*=-1,t.raycaster.ray.direction.applyNormalMatrix(g).multiplyScalar(-1))}),[]);return uy((e=>{t&&e.gl.render(s.current,d)}),t),l.createElement(l.Fragment,null,l.createElement("mesh",tC({ref:s},a,{scale:f}),l.createElement("sphereGeometry",{args:[1,r,r]}),l.createElement("meshBasicMaterial",null,l.createElement(UK,{compute:v,attach:"envMap",flip:!0,resolution:o,ref:c},i,l.createElement(HK,{api:c})))))}function HK(e){let{api:t}=e;const n=new vo,r=new go,i=new vo,o=new ra(0,Math.PI,0);return uy((e=>{e.camera.matrixWorld.decompose(n,r,i),t.current.camera.position.copy(n),t.current.camera.quaternion.setFromEuler(o).premultiply(r)})),null}const VK=vL({blur:0,map:null,sdf:null,blend:0,size:0,resolution:new zi},"varying vec2 vUv;\n   void main() {\n     gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n     vUv = uv;\n   }",`uniform sampler2D sdf;\n   uniform sampler2D map;\n   uniform float blur;\n   uniform float size;\n   uniform float time;\n   uniform vec2 resolution;\n   varying vec2 vUv;\n   #include <packing>\n   void main() {\n     vec2 uv = gl_FragCoord.xy / resolution.xy;\n     vec4 t = texture2D(map, uv);\n     float k = blur;\n     float d = texture2D(sdf, vUv).r/size;\n     float alpha = 1.0 - smoothstep(0.0, 1.0, clamp(d/k + 1.0, 0.0, 1.0));\n     gl_FragColor = vec4(t.rgb, blur == 0.0 ? t.a : t.a * alpha);\n     #include <tonemapping_fragment>\n     #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n   }`),WK=l.forwardRef(((e,t)=>{let{children:n,events:r,blur:i=0,eventPriority:o=0,renderPriority:a=0,worldUnits:s=!1,resolution:c=512,...u}=e;hv({PortalMaterialImpl:VK});const h=l.useRef(null),{scene:d,gl:f,size:p,viewport:m,setEvents:g}=cy(),v=Tz(c,c),[y,A]=l.useState(0);uy((()=>{const e=h.current.blend>0?Math.max(1,a):0;y!==e&&A(e)})),l.useEffect((()=>{void 0!==r&&g({enabled:!r})}),[r]);const[x,b]=l.useState(!0),_=qW(b);l.useLayoutEffect((()=>{var e;_.current=null==(e=h.current)?void 0:e.__r3f.parent}),[]),l.useLayoutEffect((()=>{if(_.current&&i&&null===h.current.sdf){const e=new Is(_.current.geometry,new Na),t=(new xo).setFromBufferAttribute(e.geometry.attributes.position),n=new pl(t.min.x*(1+2/c),t.max.x*(1+2/c),t.max.y*(1+2/c),t.min.y*(1+2/c),.1,1e3);n.position.set(0,0,1),n.lookAt(0,0,0),f.setRenderTarget(v),f.render(e,n);const r=XK(c,c,f)(v.texture),i=new Float32Array(c*c);f.readRenderTargetPixels(r,0,0,c,c,i);let o=1/0;for(let a=0;a<i.length;a++)i[a]<o&&(o=i[a]);o=-o,h.current.size=o,h.current.sdf=r.texture,f.setRenderTarget(null)}}),[c,i]),l.useImperativeHandle(t,(()=>h.current));const w=l.useCallback(((e,t,n)=>{var r;if(!_.current)return!1;if(t.pointer.set(e.offsetX/t.size.width*2-1,-e.offsetY/t.size.height*2+1),t.raycaster.setFromCamera(t.pointer,t.camera),0===(null==(r=h.current)?void 0:r.blend)){const[e]=t.raycaster.intersectObject(_.current);if(!e)return t.raycaster.camera=void 0,!1}}),[]);return l.createElement("portalMaterialImpl",tC({ref:h,blur:i,blend:0,resolution:[p.width*m.dpr,p.height*m.dpr],attach:"material"},u),l.createElement(FK,{attach:"map",frames:x?1/0:0,eventPriority:o,renderPriority:a,compute:w},n,l.createElement(qK,{events:r,rootScene:d,priority:y,material:h,worldUnits:s})))}));function qK(e){let{events:t,rootScene:n,material:r,priority:i,worldUnits:o}=e;const a=cy((e=>e.scene)),s=cy((e=>e.setEvents)),c=Tz(),u=Tz();l.useLayoutEffect((()=>{a.matrixAutoUpdate=!1}),[]),l.useEffect((()=>{void 0!==t&&s({enabled:t})}),[t]);const[h,d]=l.useMemo((()=>{const e={value:0};return[new Zk(new Ls({uniforms:{a:{value:c.texture},b:{value:u.texture},blend:e},vertexShader:"\n          varying vec2 vUv;\n          void main() {\n            vUv = uv;\n            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n          }",fragmentShader:`\n          uniform sampler2D a;\n          uniform sampler2D b;\n          uniform float blend;\n          varying vec2 vUv;\n          #include <packing>\n          void main() {\n            vec4 ta = texture2D(a, vUv);\n            vec4 tb = texture2D(b, vUv);\n            gl_FragColor = mix(tb, ta, blend);\n            #include <tonemapping_fragment>\n            #include <${bL>=154?"colorspace_fragment":"encodings_fragment"}>\n          }`})),e]}),[]);return uy((e=>{var t;let s=null==r||null==(t=r.current)?void 0:t.__r3f.parent;if(s){var l,f,p,m;if(o)a.matrixWorld.identity();else i&&1===(null==(l=r.current)?void 0:l.blend)&&s.updateWorldMatrix(!0,!1),a.matrixWorld.copy(s.matrixWorld);if(i)(null==(f=r.current)?void 0:f.blend)>0&&(null==(p=r.current)?void 0:p.blend)<1?(d.value=r.current.blend,e.gl.setRenderTarget(c),e.gl.render(a,e.camera),e.gl.setRenderTarget(u),e.gl.render(n,e.camera),e.gl.setRenderTarget(null),h.render(e.gl)):1===(null==(m=r.current)?void 0:m.blend)&&e.gl.render(a,e.camera)}}),i),l.createElement(l.Fragment,null)}const XK=(e,t,n)=>{let r=new uo(e,t,{minFilter:cn,magFilter:an,type:vn,format:Bn,generateMipmaps:!0}),i=new uo(e,t,{minFilter:en,magFilter:en}),o=new uo(e,t,{minFilter:en,magFilter:en}),a=new uo(e,t,{minFilter:en,magFilter:en}),s=new uo(e,t,{minFilter:en,magFilter:en}),l=new uo(e,t,{minFilter:en,magFilter:en,type:vn,format:Bn}),c=new uo(e,t,{minFilter:en,magFilter:en,type:vn,format:Bn});const u=new Zk(new Ls({uniforms:{tex:{value:null}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:"\n        uniform sampler2D tex;\n        varying vec2 vUv;\n        #include <packing>\n        void main() {\n          gl_FragColor = pack2HalfToRGBA(vUv * (round(texture2D(tex, vUv).x)));\n        }"})),h=new Zk(new Ls({uniforms:{tex:{value:null}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:"\n        uniform sampler2D tex;\n        varying vec2 vUv;\n        #include <packing>\n        void main() {\n          gl_FragColor = pack2HalfToRGBA(vUv * (1.0 - round(texture2D(tex, vUv).x)));\n        }"})),d=new Zk(new Ls({uniforms:{tex:{value:null},offset:{value:0},level:{value:0},maxSteps:{value:0}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:`\n        varying vec2 vUv;\n        uniform sampler2D tex;\n        uniform float offset;\n        uniform float level;\n        uniform float maxSteps;\n        #include <packing>\n        void main() {\n          float closestDist = 9999999.9;\n          vec2 closestPos = vec2(0.0);\n          for (float x = -1.0; x <= 1.0; x += 1.0) {\n            for (float y = -1.0; y <= 1.0; y += 1.0) {\n              vec2 voffset = vUv;\n              voffset += vec2(x, y) * vec2(${1/e}, ${1/t}) * offset;\n              vec2 pos = unpackRGBATo2Half(texture2D(tex, voffset));\n              float dist = distance(pos.xy, vUv);\n              if(pos.x != 0.0 && pos.y != 0.0 && dist < closestDist) {\n                closestDist = dist;\n                closestPos = pos;\n              }\n            }\n          }\n          gl_FragColor = pack2HalfToRGBA(closestPos);\n        }`})),f=new Zk(new Ls({uniforms:{tex:{value:null},size:{value:new zi(e,t)}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:"\n        varying vec2 vUv;\n        uniform sampler2D tex;\n        uniform vec2 size;\n        #include <packing>\n        void main() {\n          gl_FragColor = vec4(distance(size * unpackRGBATo2Half(texture2D(tex, vUv)), size * vUv), 0.0, 0.0, 0.0);\n        }"})),p=new Zk(new Ls({uniforms:{inside:{value:c.texture},outside:{value:l.texture},tex:{value:null}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }",fragmentShader:"\n        varying vec2 vUv;\n        uniform sampler2D inside;\n        uniform sampler2D outside;\n        uniform sampler2D tex;\n        #include <packing>\n        void main() {\n          float i = texture2D(inside, vUv).x;\n          float o =texture2D(outside, vUv).x;\n          if (texture2D(tex, vUv).x == 0.0) {\n            gl_FragColor = vec4(o, 0.0, 0.0, 0.0);\n          } else {\n            gl_FragColor = vec4(-i, 0.0, 0.0, 0.0);\n          }\n        }"}));return m=>{let g=r;m.minFilter=en,m.magFilter=en,u.material.uniforms.tex.value=m,n.setRenderTarget(i),u.render(n);const v=Math.ceil(Math.log(Math.max(e,t))/Math.log(2));let y=i,A=null;for(let e=0;e<v;e++){const t=Math.pow(2,v-e-1);A=y===i?a:i,d.material.uniforms.level.value=e,d.material.uniforms.maxSteps.value=v,d.material.uniforms.offset.value=t,d.material.uniforms.tex.value=y.texture,n.setRenderTarget(A),d.render(n),y=A}n.setRenderTarget(l),f.material.uniforms.tex.value=A.texture,f.render(n),h.material.uniforms.tex.value=m,n.setRenderTarget(o),h.render(n),y=o;for(let e=0;e<v;e++){const t=Math.pow(2,v-e-1);A=y===o?s:o,d.material.uniforms.level.value=e,d.material.uniforms.maxSteps.value=v,d.material.uniforms.offset.value=t,d.material.uniforms.tex.value=y.texture,n.setRenderTarget(A),d.render(n),y=A}return n.setRenderTarget(c),f.material.uniforms.tex.value=A.texture,f.render(n),n.setRenderTarget(g),p.material.uniforms.tex.value=m,p.render(n),n.setRenderTarget(null),g}},YK=e=>{let t;const n=new Set,r=(e,r)=>{const i="function"===typeof e?e(t):e;if(!Object.is(i,t)){const e=t;t=(null!=r?r:"object"!==typeof i||null===i)?i:Object.assign({},t,i),n.forEach((n=>n(t,e)))}},i=()=>t,o={setState:r,getState:i,getInitialState:()=>a,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},a=t=e(r,i,o);return o},JK=e=>e?YK(e):YK;var KK=n(8443);const{useDebugValue:ZK}=l,{useSyncExternalStoreWithSelector:$K}=KK;let eZ=!1;const tZ=e=>e;const nZ=e=>{"function"!==typeof e&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t="function"===typeof e?JK(e):e,n=(e,n)=>function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:tZ,n=arguments.length>2?arguments[2]:void 0;n&&!eZ&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),eZ=!0);const r=$K(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return ZK(r),r}(t,e,n);return Object.assign(n,t),n},rZ=e=>e?nZ(e):nZ;var iZ,oZ;const aZ="undefined"!==typeof window&&(null!=(iZ=window.document)&&iZ.createElement||"ReactNative"===(null==(oZ=window.navigator)?void 0:oZ.product))?l.useLayoutEffect:l.useEffect;const sZ=e=>e&&e.isOrthographicCamera,lZ=new La,cZ=function(){const e=rZ((e=>({current:new Array,version:0,set:e})));return{In:t=>{let{children:n}=t;const r=e((e=>e.set)),i=e((e=>e.version));return aZ((()=>{r((e=>({version:e.version+1})))}),[]),aZ((()=>(r((e=>{let{current:t}=e;return{current:[...t,n]}})),()=>r((e=>{let{current:t}=e;return{current:t.filter((e=>e!==n))}})))),[n,i]),null},Out:()=>{const t=e((e=>e.current));return l.createElement(l.Fragment,null,t)}}}();function uZ(e){return"top"in e}function hZ(e,t){const{right:n,top:r,left:i,bottom:o,width:a,height:s}=t,l=t.bottom<0||r>e.height||n<0||t.left>e.width;if(uZ(e)){const t=e.top+e.height-o;return{position:{width:a,height:s,left:i-e.left,top:r,bottom:t,right:n},isOffscreen:l}}return{position:{width:a,height:s,top:r,left:i,bottom:e.height-o,right:n},isOffscreen:l}}function dZ(e,t){let n,{left:r,bottom:i,width:o,height:a}=t;const s=o/a;return sZ(e.camera)?e.camera.left===o/-2&&e.camera.right===o/2&&e.camera.top===a/2&&e.camera.bottom===a/-2||(Object.assign(e.camera,{left:o/-2,right:o/2,top:a/2,bottom:a/-2}),e.camera.updateProjectionMatrix()):e.camera.aspect!==s&&(e.camera.aspect=s,e.camera.updateProjectionMatrix()),n=e.gl.autoClear,e.gl.autoClear=!1,e.gl.setViewport(r,i,o,a),e.gl.setScissor(r,i,o,a),e.gl.setScissorTest(!0),n}function fZ(e,t){e.gl.setScissorTest(!1),e.gl.autoClear=t}function pZ(e){e.gl.getClearColor(lZ),e.gl.setClearColor(lZ,e.gl.getClearAlpha()),e.gl.clear(!0,!0)}function mZ(e){let{visible:t=!0,canvasSize:n,scene:r,index:i,children:o,frames:a,rect:s,track:c}=e;const u=cy(),[h,d]=l.useState(!1);let f=0;return uy((e=>{var i;(a===1/0||f<=a)&&(c&&(s.current=null==(i=c.current)?void 0:i.getBoundingClientRect()),f++);if(s.current){const{position:i,isOffscreen:a}=hZ(n,s.current);if(h!==a&&d(a),t&&!h&&s.current){const t=dZ(e,i);e.gl.render(o?e.scene:r,e.camera),fZ(e,t)}}}),i),l.useLayoutEffect((()=>{const e=s.current;if(e&&(!t||!h)){const{position:t}=hZ(n,e),r=dZ(u,t);pZ(u),fZ(u,r)}}),[t,h]),l.useEffect((()=>{if(!c)return;const e=s.current,t=u.get().events.connected;return u.setEvents({connected:c.current}),()=>{if(e){const{position:t}=hZ(n,e),r=dZ(u,t);pZ(u),fZ(u,r)}u.setEvents({connected:t})}}),[c]),l.useEffect((()=>{uZ(n)||console.warn("Detected @react-three/fiber canvas size does not include position information. <View /> may not work as expected. Upgrade to @react-three/fiber ^8.1.0 for support.\n See https://github.com/pmndrs/drei/issues/944")}),[]),l.createElement(l.Fragment,null,o,l.createElement("group",{onPointerOver:()=>null}))}const gZ=l.forwardRef(((e,t)=>{let{track:n,visible:r=!0,index:i=1,id:o,style:a,className:s,frames:c=1/0,children:u,...h}=e;var d,f,p,m;const g=l.useRef(null),{size:v,scene:y}=cy(),[A]=l.useState((()=>new qu)),[x,b]=l.useReducer((()=>!0),!1),_=l.useCallback(((e,t)=>{if(g.current&&n&&n.current&&e.target===n.current){const{width:n,height:r,left:i,top:o}=g.current,a=e.clientX-i,s=e.clientY-o;t.pointer.set(a/n*2-1,-s/r*2+1),t.raycaster.setFromCamera(t.pointer,t.camera)}}),[g,n]);return l.useEffect((()=>{var e;n&&(g.current=null==(e=n.current)?void 0:e.getBoundingClientRect()),b()}),[n]),l.createElement("group",tC({ref:t},h),x&&Cy(l.createElement(mZ,{visible:r,canvasSize:v,frames:c,scene:y,track:n,rect:g,index:i},u),A,{events:{compute:_,priority:i},size:{width:null==(d=g.current)?void 0:d.width,height:null==(f=g.current)?void 0:f.height,top:null==(p=g.current)?void 0:p.top,left:null==(m=g.current)?void 0:m.left}}))})),vZ=l.forwardRef(((e,t)=>{let{as:n="div",id:r,visible:i,className:o,style:a,index:s=1,track:c,frames:u=1/0,children:h,...d}=e;const f=l.useId(),p=l.useRef(null);return l.useImperativeHandle(t,(()=>p.current)),l.createElement(l.Fragment,null,l.createElement(n,tC({ref:p,id:r,className:o,style:a},d)),l.createElement(cZ.In,null,l.createElement(gZ,{visible:i,key:f,track:p,frames:u,index:s},h)))})),yZ=l.forwardRef(((e,t)=>l.useContext(Wv)?l.createElement(gZ,tC({ref:t},e)):l.createElement(vZ,tC({ref:t},e))));yZ.Port=()=>l.createElement(cZ.Out,null);const AZ=l.createContext(null),xZ=new vo,bZ=new vo,_Z=new vo(0,1,0),wZ=new qo,EZ=e=>{let{direction:t,axis:n}=e;const{translation:r,translationLimits:i,annotations:o,annotationsClass:a,depthTest:s,scale:c,lineWidth:u,fixed:h,axisColors:d,hoveredColor:f,opacity:p,onDragStart:m,onDrag:g,onDragEnd:v,userData:y}=l.useContext(AZ),A=cy((e=>e.controls)),x=l.useRef(null),b=l.useRef(null),_=l.useRef(null),w=l.useRef(0),[E,S]=l.useState(!1),C=l.useCallback((e=>{o&&(x.current.innerText=`${r.current[n].toFixed(2)}`,x.current.style.display="block"),e.stopPropagation();const i=(new qo).extractRotation(b.current.matrixWorld),a=e.point.clone(),s=(new vo).setFromMatrixPosition(b.current.matrixWorld),l=t.clone().applyMatrix4(i).normalize();_.current={clickPoint:a,dir:l},w.current=r.current[n],m({component:"Arrow",axis:n,origin:s,directions:[l]}),A&&(A.enabled=!1),e.target.setPointerCapture(e.pointerId)}),[o,t,A,m,r,n]),M=l.useCallback((e=>{if(e.stopPropagation(),E||S(!0),_.current){const{clickPoint:t,dir:a}=_.current,[s,l]=(null==i?void 0:i[n])||[void 0,void 0];let c=((e,t,n,r)=>{const i=t.dot(t),o=t.dot(e)-t.dot(n),a=t.dot(r);return 0===a?-o/i:(xZ.copy(r).multiplyScalar(i/a).sub(t),bZ.copy(r).multiplyScalar(o/a).add(n).sub(e),-xZ.dot(bZ)/xZ.dot(xZ))})(t,a,e.ray.origin,e.ray.direction);void 0!==s&&(c=Math.max(c,s-w.current)),void 0!==l&&(c=Math.min(c,l-w.current)),r.current[n]=w.current+c,o&&(x.current.innerText=`${r.current[n].toFixed(2)}`),wZ.makeTranslation(a.x*c,a.y*c,a.z*c),g(wZ)}}),[o,g,E,r,i,n]),T=l.useCallback((e=>{o&&(x.current.style.display="none"),e.stopPropagation(),_.current=null,v(),A&&(A.enabled=!0),e.target.releasePointerCapture(e.pointerId)}),[o,A,v]),I=l.useCallback((e=>{e.stopPropagation(),S(!1)}),[]),{cylinderLength:B,coneWidth:P,coneLength:R,matrixL:D}=l.useMemo((()=>{const e=h?u/c*1.6:c/20,n=h?.2:c/5,r=h?1-n:c-n,i=(new go).setFromUnitVectors(_Z,t.clone().normalize());return{cylinderLength:r,coneWidth:e,coneLength:n,matrixL:(new qo).makeRotationFromQuaternion(i)}}),[t,c,u,h]),O=E?f:d[n];return l.createElement("group",{ref:b},l.createElement("group",{matrix:D,matrixAutoUpdate:!1,onPointerDown:C,onPointerMove:M,onPointerUp:T,onPointerOut:I},o&&l.createElement(dC,{position:[0,-R,0]},l.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:a,ref:x})),l.createElement("mesh",{visible:!1,position:[0,(B+R)/2,0],userData:y},l.createElement("cylinderGeometry",{args:[1.4*P,1.4*P,B+R,8,1]})),l.createElement(lO,{transparent:!0,raycast:()=>null,depthTest:s,points:[0,0,0,0,B,0],lineWidth:u,side:Ke,color:O,opacity:p,polygonOffset:!0,renderOrder:1,polygonOffsetFactor:-10,fog:!1}),l.createElement("mesh",{raycast:()=>null,position:[0,B+R/2,0],renderOrder:500},l.createElement("coneGeometry",{args:[P,R,24,1]}),l.createElement("meshBasicMaterial",{transparent:!0,depthTest:s,color:O,opacity:p,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))))},SZ=new vo,CZ=new vo,MZ=e=>180*e/Math.PI,TZ=e=>{let t=((e,t)=>{let n=Math.floor(e/t);return n=n<0?n+1:n,e-n*t})(e,2*Math.PI);return Math.abs(t)<1e-6?0:(t<0&&(t+=2*Math.PI),t)},IZ=new qo,BZ=new vo,PZ=new Wo,RZ=new vo,DZ=e=>{let{dir1:t,dir2:n,axis:r}=e;const{rotationLimits:i,annotations:o,annotationsClass:a,depthTest:s,scale:c,lineWidth:u,fixed:h,axisColors:d,hoveredColor:f,opacity:p,onDragStart:m,onDrag:g,onDragEnd:v,userData:y}=l.useContext(AZ),A=cy((e=>e.controls)),x=l.useRef(null),b=l.useRef(null),_=l.useRef(0),w=l.useRef(0),E=l.useRef(null),[S,C]=l.useState(!1),M=l.useCallback((e=>{o&&(x.current.innerText=`${MZ(w.current).toFixed(0)}\xba`,x.current.style.display="block"),e.stopPropagation();const t=e.point.clone(),n=(new vo).setFromMatrixPosition(b.current.matrixWorld),i=(new vo).setFromMatrixColumn(b.current.matrixWorld,0).normalize(),a=(new vo).setFromMatrixColumn(b.current.matrixWorld,1).normalize(),s=(new vo).setFromMatrixColumn(b.current.matrixWorld,2).normalize(),l=(new Ys).setFromNormalAndCoplanarPoint(s,n);E.current={clickPoint:t,origin:n,e1:i,e2:a,normal:s,plane:l},m({component:"Rotator",axis:r,origin:n,directions:[i,a,s]}),A&&(A.enabled=!1),e.target.setPointerCapture(e.pointerId)}),[o,A,m,r]),T=l.useCallback((e=>{if(e.stopPropagation(),S||C(!0),E.current){const{clickPoint:t,origin:n,e1:a,e2:s,normal:l,plane:c}=E.current,[u,h]=(null==i?void 0:i[r])||[void 0,void 0];PZ.copy(e.ray),PZ.intersectPlane(c,RZ),PZ.direction.negate(),PZ.intersectPlane(c,RZ);let d=((e,t,n,r,i)=>{SZ.copy(e).sub(n),CZ.copy(t).sub(n);const o=r.dot(r),a=i.dot(i),s=SZ.dot(r)/o,l=SZ.dot(i)/a,c=CZ.dot(r)/o,u=CZ.dot(i)/a,h=Math.atan2(l,s);return Math.atan2(u,c)-h})(t,RZ,n,a,s),f=MZ(d);e.shiftKey&&(f=10*Math.round(f/10),d=(e=>e*Math.PI/180)(f)),void 0!==u&&void 0!==h&&h-u<2*Math.PI?(d=TZ(d),d=d>Math.PI?d-2*Math.PI:d,d=Fi.clamp(d,u-_.current,h-_.current),w.current=_.current+d):(w.current=TZ(_.current+d),w.current=w.current>Math.PI?w.current-2*Math.PI:w.current),o&&(f=MZ(w.current),x.current.innerText=`${f.toFixed(0)}\xba`),IZ.makeRotationAxis(l,d),BZ.copy(n).applyMatrix4(IZ).sub(n).negate(),IZ.setPosition(BZ),g(IZ)}}),[o,g,S,i,r]),I=l.useCallback((e=>{o&&(x.current.style.display="none"),e.stopPropagation(),_.current=w.current,E.current=null,v(),A&&(A.enabled=!0),e.target.releasePointerCapture(e.pointerId)}),[o,A,v]),B=l.useCallback((e=>{e.stopPropagation(),C(!1)}),[]),P=l.useMemo((()=>{const e=t.clone().normalize(),r=n.clone().normalize();return(new qo).makeBasis(e,r,e.clone().cross(r))}),[t,n]),R=h?.65:.65*c,D=l.useMemo((()=>{const e=[];for(let t=0;t<=32;t++){const n=t*(Math.PI/2)/32;e.push(new vo(Math.cos(n)*R,Math.sin(n)*R,0))}return e}),[R]);return l.createElement("group",{ref:b,onPointerDown:M,onPointerMove:T,onPointerUp:I,onPointerOut:B,matrix:P,matrixAutoUpdate:!1},o&&l.createElement(dC,{position:[R,R,0]},l.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:a,ref:x})),l.createElement(lO,{points:D,lineWidth:4*u,visible:!1,userData:y}),l.createElement(lO,{transparent:!0,raycast:()=>null,depthTest:s,points:D,lineWidth:u,side:Ke,color:S?f:d[r],opacity:p,polygonOffset:!0,polygonOffsetFactor:-10,fog:!1}))},OZ=new Wo,kZ=new vo,LZ=new qo,FZ=e=>{let{dir1:t,dir2:n,axis:r}=e;const{translation:i,translationLimits:o,annotations:a,annotationsClass:s,depthTest:c,scale:u,lineWidth:h,fixed:d,axisColors:f,hoveredColor:p,opacity:m,onDragStart:g,onDrag:v,onDragEnd:y,userData:A}=l.useContext(AZ),x=cy((e=>e.controls)),b=l.useRef(null),_=l.useRef(null),w=l.useRef(null),E=l.useRef(0),S=l.useRef(0),[C,M]=l.useState(!1),T=l.useCallback((e=>{a&&(b.current.innerText=`${i.current[(r+1)%3].toFixed(2)}, ${i.current[(r+2)%3].toFixed(2)}`,b.current.style.display="block"),e.stopPropagation();const t=e.point.clone(),n=(new vo).setFromMatrixPosition(_.current.matrixWorld),o=(new vo).setFromMatrixColumn(_.current.matrixWorld,0).normalize(),s=(new vo).setFromMatrixColumn(_.current.matrixWorld,1).normalize(),l=(new vo).setFromMatrixColumn(_.current.matrixWorld,2).normalize(),c=(new Ys).setFromNormalAndCoplanarPoint(l,n);w.current={clickPoint:t,e1:o,e2:s,plane:c},E.current=i.current[(r+1)%3],S.current=i.current[(r+2)%3],g({component:"Slider",axis:r,origin:n,directions:[o,s,l]}),x&&(x.enabled=!1),e.target.setPointerCapture(e.pointerId)}),[a,x,g,r]),I=l.useCallback((e=>{if(e.stopPropagation(),C||M(!0),w.current){const{clickPoint:t,e1:n,e2:s,plane:l}=w.current,[c,u]=(null==o?void 0:o[(r+1)%3])||[void 0,void 0],[h,d]=(null==o?void 0:o[(r+2)%3])||[void 0,void 0];OZ.copy(e.ray),OZ.intersectPlane(l,kZ),OZ.direction.negate(),OZ.intersectPlane(l,kZ),kZ.sub(t);let[f,p]=((e,t,n)=>{const r=Math.abs(e.x)>=Math.abs(e.y)&&Math.abs(e.x)>=Math.abs(e.z)?0:Math.abs(e.y)>=Math.abs(e.x)&&Math.abs(e.y)>=Math.abs(e.z)?1:2,i=[0,1,2].sort(((e,n)=>Math.abs(t.getComponent(n))-Math.abs(t.getComponent(e)))),o=r===i[0]?i[1]:i[0],a=e.getComponent(r),s=e.getComponent(o),l=t.getComponent(r),c=t.getComponent(o),u=n.getComponent(r),h=(n.getComponent(o)-u*(s/a))/(c-l*(s/a));return[(u-h*l)/a,h]})(n,s,kZ);void 0!==c&&(f=Math.max(f,c-E.current)),void 0!==u&&(f=Math.min(f,u-E.current)),void 0!==h&&(p=Math.max(p,h-S.current)),void 0!==d&&(p=Math.min(p,d-S.current)),i.current[(r+1)%3]=E.current+f,i.current[(r+2)%3]=S.current+p,a&&(b.current.innerText=`${i.current[(r+1)%3].toFixed(2)}, ${i.current[(r+2)%3].toFixed(2)}`),LZ.makeTranslation(f*n.x+p*s.x,f*n.y+p*s.y,f*n.z+p*s.z),v(LZ)}}),[a,v,C,i,o,r]),B=l.useCallback((e=>{a&&(b.current.style.display="none"),e.stopPropagation(),w.current=null,y(),x&&(x.enabled=!0),e.target.releasePointerCapture(e.pointerId)}),[a,x,y]),P=l.useCallback((e=>{e.stopPropagation(),M(!1)}),[]),R=l.useMemo((()=>{const e=t.clone().normalize(),r=n.clone().normalize();return(new qo).makeBasis(e,r,e.clone().cross(r))}),[t,n]),D=d?1/7:u/7,O=d?.225:.225*u,k=C?p:f[r],L=l.useMemo((()=>[new vo(0,0,0),new vo(0,O,0),new vo(O,O,0),new vo(O,0,0),new vo(0,0,0)]),[O]);return l.createElement("group",{ref:_,matrix:R,matrixAutoUpdate:!1},a&&l.createElement(dC,{position:[0,0,0]},l.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:s,ref:b})),l.createElement("group",{position:[1.7*D,1.7*D,0]},l.createElement("mesh",{visible:!0,onPointerDown:T,onPointerMove:I,onPointerUp:B,onPointerOut:P,scale:O,userData:A},l.createElement("planeGeometry",null),l.createElement("meshBasicMaterial",{transparent:!0,depthTest:c,color:k,polygonOffset:!0,polygonOffsetFactor:-10,side:Ke,fog:!1})),l.createElement(lO,{position:[-O/2,-O/2,0],transparent:!0,depthTest:c,points:L,lineWidth:h,color:k,opacity:m,polygonOffset:!0,polygonOffsetFactor:-10,userData:A,fog:!1})))},zZ=new vo,UZ=new vo,NZ=new vo(0,1,0),jZ=new vo,GZ=new qo,QZ=e=>{let{direction:t,axis:n}=e;const{scaleLimits:r,annotations:i,annotationsClass:o,depthTest:a,scale:s,lineWidth:c,fixed:u,axisColors:h,hoveredColor:d,opacity:f,onDragStart:p,onDrag:m,onDragEnd:g,userData:v}=l.useContext(AZ),y=cy((e=>e.size)),A=cy((e=>e.controls)),x=l.useRef(null),b=l.useRef(null),_=l.useRef(null),w=l.useRef(1),E=l.useRef(1),S=l.useRef(null),[C,M]=l.useState(!1),T=u?1.2:1.2*s,I=l.useCallback((e=>{i&&(x.current.innerText=`${E.current.toFixed(2)}`,x.current.style.display="block"),e.stopPropagation();const r=(new qo).extractRotation(b.current.matrixWorld),o=e.point.clone(),a=(new vo).setFromMatrixPosition(b.current.matrixWorld),l=t.clone().applyMatrix4(r).normalize(),c=b.current.matrixWorld.clone(),h=c.clone().invert(),d=u?1/OD(b.current.getWorldPosition(zZ),s,e.camera,y):1;S.current={clickPoint:o,dir:l,mPLG:c,mPLGInv:h,offsetMultiplier:d},p({component:"Sphere",axis:n,origin:a,directions:[l]}),A&&(A.enabled=!1),e.target.setPointerCapture(e.pointerId)}),[i,A,t,p,n,u,s,y]),B=l.useCallback((e=>{if(e.stopPropagation(),C||M(!0),S.current){const{clickPoint:t,dir:o,mPLG:a,mPLGInv:l,offsetMultiplier:c}=S.current,[h,d]=(null==r?void 0:r[n])||[1e-5,void 0],f=((e,t,n,r)=>{const i=t.dot(t),o=t.dot(e)-t.dot(n),a=t.dot(r);return 0===a?-o/i:(zZ.copy(r).multiplyScalar(i/a).sub(t),UZ.copy(r).multiplyScalar(o/a).add(n).sub(e),-zZ.dot(UZ)/zZ.dot(zZ))})(t,o,e.ray.origin,e.ray.direction),p=f*c,g=u?p:p/s;let v=Math.pow(2,.2*g);e.shiftKey&&(v=Math.round(10*v)/10),v=Math.max(v,h/w.current),void 0!==d&&(v=Math.min(v,d/w.current)),E.current=w.current*v,_.current.position.set(0,T+p,0),i&&(x.current.innerText=`${E.current.toFixed(2)}`),jZ.set(1,1,1),jZ.setComponent(n,v),GZ.makeScale(jZ.x,jZ.y,jZ.z).premultiply(a).multiply(l),m(GZ)}}),[i,T,m,C,r,n]),P=l.useCallback((e=>{i&&(x.current.style.display="none"),e.stopPropagation(),w.current=E.current,S.current=null,_.current.position.set(0,T,0),g(),A&&(A.enabled=!0),e.target.releasePointerCapture(e.pointerId)}),[i,A,g,T]),R=l.useCallback((e=>{e.stopPropagation(),M(!1)}),[]),{radius:D,matrixL:O}=l.useMemo((()=>{const e=u?c/s*1.8:s/22.5,n=(new go).setFromUnitVectors(NZ,t.clone().normalize());return{radius:e,matrixL:(new qo).makeRotationFromQuaternion(n)}}),[t,s,c,u]),k=C?d:h[n];return l.createElement("group",{ref:b},l.createElement("group",{matrix:O,matrixAutoUpdate:!1,onPointerDown:I,onPointerMove:B,onPointerUp:P,onPointerOut:R},i&&l.createElement(dC,{position:[0,T/2,0]},l.createElement("div",{style:{display:"none",background:"#151520",color:"white",padding:"6px 8px",borderRadius:7,whiteSpace:"nowrap"},className:o,ref:x})),l.createElement("mesh",{ref:_,position:[0,T,0],renderOrder:500,userData:v},l.createElement("sphereGeometry",{args:[D,12,12]}),l.createElement("meshBasicMaterial",{transparent:!0,depthTest:a,color:k,opacity:f,polygonOffset:!0,polygonOffsetFactor:-10}))))},HZ=new qo,VZ=new qo,WZ=new qo,qZ=new qo,XZ=new qo,YZ=new qo,JZ=new qo,KZ=new qo,ZZ=new qo,$Z=new xo,e$=new xo,t$=new vo,n$=new vo,r$=new vo,i$=new vo,o$=new vo,a$=new vo(1,0,0),s$=new vo(0,1,0),l$=new vo(0,0,1),c$=l.forwardRef(((e,t)=>{let{enabled:n=!0,matrix:r,onDragStart:i,onDrag:o,onDragEnd:a,autoTransform:s=!0,anchor:c,disableAxes:u=!1,disableSliders:h=!1,disableRotations:d=!1,disableScaling:f=!1,activeAxes:p=[!0,!0,!0],offset:m=[0,0,0],rotation:g=[0,0,0],scale:v=1,lineWidth:y=4,fixed:A=!1,translationLimits:x,rotationLimits:b,scaleLimits:_,depthTest:w=!0,axisColors:E=["#ff2060","#20df80","#2080ff"],hoveredColor:S="#ffff40",annotations:C=!1,annotationsClass:M,opacity:T=1,visible:I=!0,userData:B,children:P,...R}=e;const D=cy((e=>e.invalidate)),O=l.useRef(null),k=l.useRef(null),L=l.useRef(null),F=l.useRef(null),z=l.useRef([0,0,0]),U=l.useRef(new vo(1,1,1)),N=l.useRef(new vo(1,1,1));l.useLayoutEffect((()=>{c&&(F.current.updateWorldMatrix(!0,!0),qZ.copy(F.current.matrixWorld).invert(),$Z.makeEmpty(),F.current.traverse((e=>{e.geometry&&(e.geometry.boundingBox||e.geometry.computeBoundingBox(),YZ.copy(e.matrixWorld).premultiply(qZ),e$.copy(e.geometry.boundingBox),e$.applyMatrix4(YZ),$Z.union(e$))})),t$.copy($Z.max).add($Z.min).multiplyScalar(.5),n$.copy($Z.max).sub($Z.min).multiplyScalar(.5),r$.copy(n$).multiply(new vo(...c)).add(t$),i$.set(...m).add(r$),L.current.position.copy(i$),D())}));const j=l.useMemo((()=>({onDragStart:e=>{HZ.copy(k.current.matrix),VZ.copy(k.current.matrixWorld),i&&i(e),D()},onDrag:e=>{WZ.copy(O.current.matrixWorld),qZ.copy(WZ).invert(),XZ.copy(VZ).premultiply(e),YZ.copy(XZ).premultiply(qZ),JZ.copy(HZ).invert(),KZ.copy(YZ).multiply(JZ),s&&k.current.matrix.copy(YZ),o&&o(YZ,KZ,XZ,e),D()},onDragEnd:()=>{a&&a(),D()},translation:z,translationLimits:x,rotationLimits:b,axisColors:E,hoveredColor:S,opacity:T,scale:v,lineWidth:y,fixed:A,depthTest:w,userData:B,annotations:C,annotationsClass:M})),[i,o,a,z,x,b,_,w,v,y,A,...E,S,T,B,s,C,M]),G=new vo;return uy((e=>{if(A){const t=OD(L.current.getWorldPosition(G),v,e.camera,e.size);U.current.setScalar(t)}r&&r instanceof qo&&(k.current.matrix=r),k.current.updateWorldMatrix(!0,!0),ZZ.makeRotationFromEuler(L.current.rotation).setPosition(L.current.position).premultiply(k.current.matrixWorld),N.current.setFromMatrixScale(ZZ),o$.copy(U.current).divide(N.current),(Math.abs(L.current.scale.x-o$.x)>1e-4||Math.abs(L.current.scale.y-o$.y)>1e-4||Math.abs(L.current.scale.z-o$.z)>1e-4)&&(L.current.scale.copy(o$),e.invalidate())})),l.useImperativeHandle(t,(()=>k.current),[]),l.createElement(AZ.Provider,{value:j},l.createElement("group",{ref:O},l.createElement("group",tC({ref:k,matrix:r,matrixAutoUpdate:!1},R),l.createElement("group",{visible:I,ref:L,position:m,rotation:g},n&&l.createElement(l.Fragment,null,!u&&p[0]&&l.createElement(EZ,{axis:0,direction:a$}),!u&&p[1]&&l.createElement(EZ,{axis:1,direction:s$}),!u&&p[2]&&l.createElement(EZ,{axis:2,direction:l$}),!h&&p[0]&&p[1]&&l.createElement(FZ,{axis:2,dir1:a$,dir2:s$}),!h&&p[0]&&p[2]&&l.createElement(FZ,{axis:1,dir1:l$,dir2:a$}),!h&&p[2]&&p[1]&&l.createElement(FZ,{axis:0,dir1:s$,dir2:l$}),!d&&p[0]&&p[1]&&l.createElement(DZ,{axis:2,dir1:a$,dir2:s$}),!d&&p[0]&&p[2]&&l.createElement(DZ,{axis:1,dir1:l$,dir2:a$}),!d&&p[2]&&p[1]&&l.createElement(DZ,{axis:0,dir1:s$,dir2:l$}),!f&&p[0]&&l.createElement(QZ,{axis:0,direction:a$}),!f&&p[1]&&l.createElement(QZ,{axis:1,direction:s$}),!f&&p[2]&&l.createElement(QZ,{axis:2,direction:l$}))),l.createElement("group",{ref:F},P))))})),u$=new vo(0,0,-1),h$=function(){const e=new vo,t=new vo,n=new vo,r=new vo,i=new vo;return function(o,a,s,l){return e.copy(o),t.copy(a),n.copy(s),r.copy(t).sub(e),i.copy(n).sub(e),l.crossVectors(i,r).normalize()}}();const d$=l.forwardRef(((e,t)=>{let{points:n=m$.SAMPLE_FACELANDMARKER_RESULT.faceLandmarks[0],face:r,facialTransformationMatrix:i,faceBlendshapes:o,offset:a,offsetScalar:s=80,width:c,height:u,depth:h=1,verticalTri:d=[159,386,152],origin:f,eyes:p=!0,eyesAsOrigin:m=!1,debug:g=!1,children:v,...y}=e;var A;r&&(n=r.keypoints,console.warn("Facemesh `face` prop is deprecated: use `points` instead"));const x=l.useRef(null),b=l.useRef(null),_=l.useRef(null),w=l.useRef(null),E=l.useRef(null),S=l.useRef(null),C=l.useRef(null),[M]=l.useState((()=>new vo)),[T]=l.useState((()=>new xa)),[I]=l.useState((()=>new go)),[B]=l.useState((()=>new vo)),{invalidate:P}=cy();l.useEffect((()=>{var e;null==(e=E.current)||e.geometry.setIndex(m$.TRIANGULATION)}),[]);const[R]=l.useState((()=>new vo));l.useEffect((()=>{var e,t;const r=null==(e=E.current)?void 0:e.geometry;if(!r)return;var l,v;(r.setFromPoints(n),r.setDrawRange(0,m$.TRIANGULATION.length),i)?(T.matrix.fromArray(i.data),T.matrix.decompose(T.position,T.quaternion,T.scale),T.rotation.y*=-1,T.rotation.z*=-1,I.setFromEuler(T.rotation),a?(T.position.y*=-1,T.position.z*=-1,null==(l=x.current)||l.position.copy(T.position.divideScalar(s))):null==(v=x.current)||v.position.set(0,0,0)):(h$(n[d[0]],n[d[1]],n[d[2]],M),I.setFromUnitVectors(u$,M));const y=I.clone().invert();if(r.computeBoundingBox(),g&&P(),r.center(),r.applyQuaternion(y),null==(t=w.current)||t.setRotationFromQuaternion(I),p)if(o){if(S.current&&C.current&&_.current)if(m){const e=S.current._computeSphere(r),t=C.current._computeSphere(r),n=function(e,t){return e.clone().add(t).multiplyScalar(.5)}(e.center,t.center);f=n.negate(),S.current._update(r,o,e),C.current._update(r,o,t)}else S.current._update(r,o),C.current._update(r,o)}else console.warn("Facemesh `eyes` option only works if `faceBlendshapes` is provided: skipping.");if(_.current){if(void 0!==f)if("number"===typeof f){const e=r.getAttribute("position");B.set(-e.getX(f),-e.getY(f),-e.getZ(f))}else f.isVector3&&B.copy(f);else B.setScalar(0);_.current.position.copy(B)}if(b.current){let e=1;(c||u||h)&&(r.boundingBox.getSize(R),c&&(e=c/R.x),u&&(e=u/R.y),h&&(e=h/R.z)),b.current.scale.setScalar(1!==e?e:1)}r.computeVertexNormals(),r.attributes.position.needsUpdate=!0}),[n,i,o,T,a,s,c,u,h,d,f,p,g,P,M,I,R,B]);const D=l.useMemo((()=>({outerRef:w,meshRef:E,eyeRightRef:S,eyeLeftRef:C})),[]);l.useImperativeHandle(t,(()=>D),[D]);const[O]=l.useState((()=>new vo)),k=null==(A=E.current)?void 0:A.geometry.boundingBox,L=(null==k?void 0:k.getSize(O).z)||1;return l.createElement("group",y,l.createElement("group",{ref:x},l.createElement("group",{ref:w},l.createElement("group",{ref:b},g?l.createElement(l.Fragment,null,l.createElement("axesHelper",{args:[L]}),l.createElement(lO,{points:[[0,0,0],[0,0,-L]],color:65535})):null,l.createElement("group",{ref:_},p&&o&&l.createElement("group",{name:"eyes"},l.createElement(p$,{side:"left",ref:S,debug:g}),l.createElement(p$,{side:"right",ref:C,debug:g})),l.createElement("mesh",{ref:E,name:"face"},v,g?l.createElement(l.Fragment,null,k&&l.createElement("box3Helper",{args:[k]})):null))))))})),f$={contourLandmarks:{right:[33,133,159,145,153],left:[263,362,386,374,380]},blendshapes:{right:[14,16,18,12],left:[13,15,17,11]},color:{right:"red",left:"#00ff00"},fov:{horizontal:100,vertical:90}},p$=l.forwardRef(((e,t)=>{let{side:n,debug:r=!0}=e;const i=l.useRef(null),o=l.useRef(null),[a]=l.useState((()=>new zo)),s=l.useCallback((e=>{const t=e.getAttribute("position"),r=f$.contourLandmarks[n].map((e=>new vo(t.getX(e),t.getY(e),t.getZ(e))));return a.center.set(0,0,0),r.forEach((e=>a.center.add(e))),a.center.divideScalar(r.length),a.radius=r[0].sub(r[1]).length()/2,a}),[a,n]),[c]=l.useState((()=>new ra)),u=l.useCallback(((e,t,r)=>{var a;i.current&&(null!==(a=r)&&void 0!==a||(r=s(e)),i.current.position.copy(r.center),i.current.scale.setScalar(r.radius));if(t&&o.current){const e=f$.blendshapes[n],r=t.categories[e[0]].score,i=t.categories[e[1]].score,a=t.categories[e[2]].score,s=t.categories[e[3]].score,l=.5*(f$.fov.horizontal*Fi.DEG2RAD)*(s-a),u=.5*(f$.fov.vertical*Fi.DEG2RAD)*(r-i)*("left"===n?1:-1);c.set(l,u,0),o.current.setRotationFromEuler(c)}}),[s,n,c]),h=l.useMemo((()=>({eyeMeshRef:i,irisDirRef:o,_computeSphere:s,_update:u})),[s,u]);l.useImperativeHandle(t,(()=>h),[h]);const d=f$.color[n];return l.createElement("group",null,l.createElement("group",{ref:i},r&&l.createElement("axesHelper",null),l.createElement("group",{ref:o},l.createElement(l.Fragment,null,r&&l.createElement(lO,{points:[[0,0,0],[0,0,-2]],lineWidth:1,color:d})))))})),m$={TRIANGULATION:[127,34,139,11,0,37,232,231,120,72,37,39,128,121,47,232,121,128,104,69,67,175,171,148,157,154,155,118,50,101,73,39,40,9,151,108,48,115,131,194,204,211,74,40,185,80,42,183,40,92,186,230,229,118,202,212,214,83,18,17,76,61,146,160,29,30,56,157,173,106,204,194,135,214,192,203,165,98,21,71,68,51,45,4,144,24,23,77,146,91,205,50,187,201,200,18,91,106,182,90,91,181,85,84,17,206,203,36,148,171,140,92,40,39,193,189,244,159,158,28,247,246,161,236,3,196,54,68,104,193,168,8,117,228,31,189,193,55,98,97,99,126,47,100,166,79,218,155,154,26,209,49,131,135,136,150,47,126,217,223,52,53,45,51,134,211,170,140,67,69,108,43,106,91,230,119,120,226,130,247,63,53,52,238,20,242,46,70,156,78,62,96,46,53,63,143,34,227,173,155,133,123,117,111,44,125,19,236,134,51,216,206,205,154,153,22,39,37,167,200,201,208,36,142,100,57,212,202,20,60,99,28,158,157,35,226,113,160,159,27,204,202,210,113,225,46,43,202,204,62,76,77,137,123,116,41,38,72,203,129,142,64,98,240,49,102,64,41,73,74,212,216,207,42,74,184,169,170,211,170,149,176,105,66,69,122,6,168,123,147,187,96,77,90,65,55,107,89,90,180,101,100,120,63,105,104,93,137,227,15,86,85,129,102,49,14,87,86,55,8,9,100,47,121,145,23,22,88,89,179,6,122,196,88,95,96,138,172,136,215,58,172,115,48,219,42,80,81,195,3,51,43,146,61,171,175,199,81,82,38,53,46,225,144,163,110,246,33,7,52,65,66,229,228,117,34,127,234,107,108,69,109,108,151,48,64,235,62,78,191,129,209,126,111,35,143,163,161,246,117,123,50,222,65,52,19,125,141,221,55,65,3,195,197,25,7,33,220,237,44,70,71,139,122,193,245,247,130,33,71,21,162,153,158,159,170,169,150,188,174,196,216,186,92,144,160,161,2,97,167,141,125,241,164,167,37,72,38,12,145,159,160,38,82,13,63,68,71,226,35,111,158,153,154,101,50,205,206,92,165,209,198,217,165,167,97,220,115,218,133,112,243,239,238,241,214,135,169,190,173,133,171,208,32,125,44,237,86,87,178,85,86,179,84,85,180,83,84,181,201,83,182,137,93,132,76,62,183,61,76,184,57,61,185,212,57,186,214,207,187,34,143,156,79,239,237,123,137,177,44,1,4,201,194,32,64,102,129,213,215,138,59,166,219,242,99,97,2,94,141,75,59,235,24,110,228,25,130,226,23,24,229,22,23,230,26,22,231,112,26,232,189,190,243,221,56,190,28,56,221,27,28,222,29,27,223,30,29,224,247,30,225,238,79,20,166,59,75,60,75,240,147,177,215,20,79,166,187,147,213,112,233,244,233,128,245,128,114,188,114,217,174,131,115,220,217,198,236,198,131,134,177,132,58,143,35,124,110,163,7,228,110,25,356,389,368,11,302,267,452,350,349,302,303,269,357,343,277,452,453,357,333,332,297,175,152,377,384,398,382,347,348,330,303,304,270,9,336,337,278,279,360,418,262,431,304,408,409,310,415,407,270,409,410,450,348,347,422,430,434,313,314,17,306,307,375,387,388,260,286,414,398,335,406,418,364,367,416,423,358,327,251,284,298,281,5,4,373,374,253,307,320,321,425,427,411,421,313,18,321,405,406,320,404,405,315,16,17,426,425,266,377,400,369,322,391,269,417,465,464,386,257,258,466,260,388,456,399,419,284,332,333,417,285,8,346,340,261,413,441,285,327,460,328,355,371,329,392,439,438,382,341,256,429,420,360,364,394,379,277,343,437,443,444,283,275,440,363,431,262,369,297,338,337,273,375,321,450,451,349,446,342,467,293,334,282,458,461,462,276,353,383,308,324,325,276,300,293,372,345,447,382,398,362,352,345,340,274,1,19,456,248,281,436,427,425,381,256,252,269,391,393,200,199,428,266,330,329,287,273,422,250,462,328,258,286,384,265,353,342,387,259,257,424,431,430,342,353,276,273,335,424,292,325,307,366,447,345,271,303,302,423,266,371,294,455,460,279,278,294,271,272,304,432,434,427,272,407,408,394,430,431,395,369,400,334,333,299,351,417,168,352,280,411,325,319,320,295,296,336,319,403,404,330,348,349,293,298,333,323,454,447,15,16,315,358,429,279,14,15,316,285,336,9,329,349,350,374,380,252,318,402,403,6,197,419,318,319,325,367,364,365,435,367,397,344,438,439,272,271,311,195,5,281,273,287,291,396,428,199,311,271,268,283,444,445,373,254,339,263,466,249,282,334,296,449,347,346,264,447,454,336,296,299,338,10,151,278,439,455,292,407,415,358,371,355,340,345,372,390,249,466,346,347,280,442,443,282,19,94,370,441,442,295,248,419,197,263,255,359,440,275,274,300,383,368,351,412,465,263,467,466,301,368,389,380,374,386,395,378,379,412,351,419,436,426,322,373,390,388,2,164,393,370,462,461,164,0,267,302,11,12,374,373,387,268,12,13,293,300,301,446,261,340,385,384,381,330,266,425,426,423,391,429,355,437,391,327,326,440,457,438,341,382,362,459,457,461,434,430,394,414,463,362,396,369,262,354,461,457,316,403,402,315,404,403,314,405,404,313,406,405,421,418,406,366,401,361,306,408,407,291,409,408,287,410,409,432,436,410,434,416,411,264,368,383,309,438,457,352,376,401,274,275,4,421,428,262,294,327,358,433,416,367,289,455,439,462,370,326,2,326,370,305,460,455,254,449,448,255,261,446,253,450,449,252,451,450,256,452,451,341,453,452,413,464,463,441,413,414,258,442,441,257,443,442,259,444,443,260,445,444,467,342,445,459,458,250,289,392,290,290,328,460,376,433,435,250,290,392,411,416,433,341,463,464,453,464,465,357,465,412,343,412,399,360,363,440,437,399,456,420,456,363,401,435,288,372,383,353,339,255,249,448,261,255,133,243,190,133,155,112,33,246,247,33,130,25,398,384,286,362,398,414,362,463,341,263,359,467,263,249,255,466,467,260,75,60,166,238,239,79,162,127,139,72,11,37,121,232,120,73,72,39,114,128,47,233,232,128,103,104,67,152,175,148,173,157,155,119,118,101,74,73,40,107,9,108,49,48,131,32,194,211,184,74,185,191,80,183,185,40,186,119,230,118,210,202,214,84,83,17,77,76,146,161,160,30,190,56,173,182,106,194,138,135,192,129,203,98,54,21,68,5,51,4,145,144,23,90,77,91,207,205,187,83,201,18,181,91,182,180,90,181,16,85,17,205,206,36,176,148,140,165,92,39,245,193,244,27,159,28,30,247,161,174,236,196,103,54,104,55,193,8,111,117,31,221,189,55,240,98,99,142,126,100,219,166,218,112,155,26,198,209,131,169,135,150,114,47,217,224,223,53,220,45,134,32,211,140,109,67,108,146,43,91,231,230,120,113,226,247,105,63,52,241,238,242,124,46,156,95,78,96,70,46,63,116,143,227,116,123,111,1,44,19,3,236,51,207,216,205,26,154,22,165,39,167,199,200,208,101,36,100,43,57,202,242,20,99,56,28,157,124,35,113,29,160,27,211,204,210,124,113,46,106,43,204,96,62,77,227,137,116,73,41,72,36,203,142,235,64,240,48,49,64,42,41,74,214,212,207,183,42,184,210,169,211,140,170,176,104,105,69,193,122,168,50,123,187,89,96,90,66,65,107,179,89,180,119,101,120,68,63,104,234,93,227,16,15,85,209,129,49,15,14,86,107,55,9,120,100,121,153,145,22,178,88,179,197,6,196,89,88,96,135,138,136,138,215,172,218,115,219,41,42,81,5,195,51,57,43,61,208,171,199,41,81,38,224,53,225,24,144,110,105,52,66,118,229,117,227,34,234,66,107,69,10,109,151,219,48,235,183,62,191,142,129,126,116,111,143,7,163,246,118,117,50,223,222,52,94,19,141,222,221,65,196,3,197,45,220,44,156,70,139,188,122,245,139,71,162,145,153,159,149,170,150,122,188,196,206,216,92,163,144,161,164,2,167,242,141,241,0,164,37,11,72,12,144,145,160,12,38,13,70,63,71,31,226,111,157,158,154,36,101,205,203,206,165,126,209,217,98,165,97,237,220,218,237,239,241,210,214,169,140,171,32,241,125,237,179,86,178,180,85,179,181,84,180,182,83,181,194,201,182,177,137,132,184,76,183,185,61,184,186,57,185,216,212,186,192,214,187,139,34,156,218,79,237,147,123,177,45,44,4,208,201,32,98,64,129,192,213,138,235,59,219,141,242,97,97,2,141,240,75,235,229,24,228,31,25,226,230,23,229,231,22,230,232,26,231,233,112,232,244,189,243,189,221,190,222,28,221,223,27,222,224,29,223,225,30,224,113,247,225,99,60,240,213,147,215,60,20,166,192,187,213,243,112,244,244,233,245,245,128,188,188,114,174,134,131,220,174,217,236,236,198,134,215,177,58,156,143,124,25,110,7,31,228,25,264,356,368,0,11,267,451,452,349,267,302,269,350,357,277,350,452,357,299,333,297,396,175,377,381,384,382,280,347,330,269,303,270,151,9,337,344,278,360,424,418,431,270,304,409,272,310,407,322,270,410,449,450,347,432,422,434,18,313,17,291,306,375,259,387,260,424,335,418,434,364,416,391,423,327,301,251,298,275,281,4,254,373,253,375,307,321,280,425,411,200,421,18,335,321,406,321,320,405,314,315,17,423,426,266,396,377,369,270,322,269,413,417,464,385,386,258,248,456,419,298,284,333,168,417,8,448,346,261,417,413,285,326,327,328,277,355,329,309,392,438,381,382,256,279,429,360,365,364,379,355,277,437,282,443,283,281,275,363,395,431,369,299,297,337,335,273,321,348,450,349,359,446,467,283,293,282,250,458,462,300,276,383,292,308,325,283,276,293,264,372,447,346,352,340,354,274,19,363,456,281,426,436,425,380,381,252,267,269,393,421,200,428,371,266,329,432,287,422,290,250,328,385,258,384,446,265,342,386,387,257,422,424,430,445,342,276,422,273,424,306,292,307,352,366,345,268,271,302,358,423,371,327,294,460,331,279,294,303,271,304,436,432,427,304,272,408,395,394,431,378,395,400,296,334,299,6,351,168,376,352,411,307,325,320,285,295,336,320,319,404,329,330,349,334,293,333,366,323,447,316,15,315,331,358,279,317,14,316,8,285,9,277,329,350,253,374,252,319,318,403,351,6,419,324,318,325,397,367,365,288,435,397,278,344,439,310,272,311,248,195,281,375,273,291,175,396,199,312,311,268,276,283,445,390,373,339,295,282,296,448,449,346,356,264,454,337,336,299,337,338,151,294,278,455,308,292,415,429,358,355,265,340,372,388,390,466,352,346,280,295,442,282,354,19,370,285,441,295,195,248,197,457,440,274,301,300,368,417,351,465,251,301,389,385,380,386,394,395,379,399,412,419,410,436,322,387,373,388,326,2,393,354,370,461,393,164,267,268,302,12,386,374,387,312,268,13,298,293,301,265,446,340,380,385,381,280,330,425,322,426,391,420,429,437,393,391,326,344,440,438,458,459,461,364,434,394,428,396,262,274,354,457,317,316,402,316,315,403,315,314,404,314,313,405,313,421,406,323,366,361,292,306,407,306,291,408,291,287,409,287,432,410,427,434,411,372,264,383,459,309,457,366,352,401,1,274,4,418,421,262,331,294,358,435,433,367,392,289,439,328,462,326,94,2,370,289,305,455,339,254,448,359,255,446,254,253,449,253,252,450,252,256,451,256,341,452,414,413,463,286,441,414,286,258,441,258,257,442,257,259,443,259,260,444,260,467,445,309,459,250,305,289,290,305,290,460,401,376,435,309,250,392,376,411,433,453,341,464,357,453,465,343,357,412,437,343,399,344,360,440,420,437,456,360,420,363,361,401,288,265,372,353,390,339,249,339,448,255],SAMPLE_FACE:{keypoints:[{x:356.2804412841797,y:295.1960563659668,z:-23.786449432373047,name:"lips"},{x:354.8859405517578,y:264.69520568847656,z:-36.718435287475586},{x:355.2180862426758,y:275.3360366821289,z:-21.183712482452393},{x:347.349853515625,y:242.4400234222412,z:-25.093655586242676},{x:354.40135955810547,y:256.67933464050293,z:-38.23572635650635},{x:353.7689971923828,y:247.54886627197266,z:-34.5475435256958},{x:352.1288299560547,y:227.34312057495117,z:-13.095386028289795},{x:303.5013198852539,y:234.67002868652344,z:12.500141859054565,name:"rightEye"},{x:351.09378814697266,y:211.87547206878662,z:-6.413471698760986},{x:350.7115936279297,y:202.1251630783081,z:-6.413471698760986},{x:348.33667755126953,y:168.7741756439209,z:6.483500003814697,name:"faceOval"},{x:356.4806365966797,y:299.2995357513428,z:-23.144519329071045},{x:356.5511703491211,y:302.66146659851074,z:-21.020312309265137},{x:356.6239547729492,y:304.1536331176758,z:-18.137459754943848,name:"lips"},{x:356.5807342529297,y:305.1840591430664,z:-18.767719268798828,name:"lips"},{x:356.8241500854492,y:308.25711250305176,z:-20.16829490661621},{x:357.113037109375,y:312.26277351379395,z:-22.10575819015503},{x:357.34962463378906,y:317.1123218536377,z:-21.837315559387207,name:"lips"},{x:357.6658630371094,y:325.51036834716797,z:-16.27002477645874},{x:355.0201416015625,y:269.36279296875,z:-33.73054027557373},{x:348.5237503051758,y:270.33411026000977,z:-24.93025302886963},{x:279.97331619262695,y:213.24176788330078,z:47.759642601013184,name:"faceOval"},{x:322.66529083251953,y:238.5027265548706,z:5.535193085670471},{x:316.0983657836914,y:239.94489669799805,z:5.777376294136047},{x:309.9431610107422,y:240.24518966674805,z:7.510589361190796},{x:301.31994247436523,y:237.86138534545898,z:13.118728399276733},{x:328.14266204833984,y:235.80496788024902,z:6.646900177001953},{x:313.7326431274414,y:222.11161136627197,z:3.9887237548828125},{x:320.45196533203125,y:221.87729358673096,z:4.601476192474365},{x:307.35679626464844,y:223.63793849945068,z:5.932023525238037},{x:303.0031204223633,y:226.3743782043457,z:8.479321002960205},{x:296.80023193359375,y:242.94299125671387,z:15.931552648544312},{x:332.2352981567383,y:340.77341079711914,z:-10.165848731994629},{x:301.38587951660156,y:233.46447944641113,z:14.764405488967896,name:"rightEye"},{x:279.0147018432617,y:244.37155723571777,z:45.77549457550049},{x:289.60548400878906,y:239.1807460784912,z:23.191204071044922},{x:320.32257080078125,y:267.1292781829834,z:-4.954537749290466},{x:347.64583587646484,y:294.4955062866211,z:-23.062820434570312,name:"lips"},{x:349.28138732910156,y:303.1095886230469,z:-20.238323211669922},{x:338.9453125,y:298.19186210632324,z:-19.456336498260498,name:"lips"},{x:333.36788177490234,y:302.6706790924072,z:-14.776077270507812,name:"lips"},{x:342.89188385009766,y:304.3561363220215,z:-17.752301692962646},{x:337.7375030517578,y:306.0098361968994,z:-13.410515785217285},{x:325.6159210205078,y:316.22995376586914,z:-6.681914925575256},{x:349.0104675292969,y:264.9818515777588,z:-36.274919509887695},{x:347.7138900756836,y:257.5664806365967,z:-37.67549514770508},{x:291.79357528686523,y:218.88171672821045,z:11.578094959259033,name:"rightEyebrow"},{x:332.2689437866211,y:247.56946563720703,z:-3.3730539679527283},{x:332.0074462890625,y:267.1201229095459,z:-19.969879388809204},{x:331.27952575683594,y:263.6967658996582,z:-17.47218608856201},{x:301.04373931884766,y:269.56552505493164,z:3.61815482378006},{x:347.4863815307617,y:249.0706443786621,z:-32.633421421051025},{x:307.26118087768555,y:208.2646894454956,z:1.1591226607561111,name:"rightEyebrow"},{x:297.91919708251953,y:212.22604751586914,z:5.914516448974609,name:"rightEyebrow"},{x:285.1651382446289,y:197.98450469970703,z:36.391637325286865,name:"faceOval"},{x:337.04097747802734,y:211.25229835510254,z:-4.548954665660858},{x:326.5912628173828,y:223.16698551177979,z:6.670243740081787},{x:320.05664825439453,y:309.5834255218506,z:-4.055835008621216},{x:289.6866226196289,y:314.617395401001,z:53.875489234924316,name:"faceOval"},{x:337.4256896972656,y:270.8755302429199,z:-17.67060160636902},{x:343.69922637939453,y:273.0000400543213,z:-18.756048679351807},{x:327.4242401123047,y:309.22399520874023,z:-4.703601002693176,name:"lips"},{x:330.37220001220703,y:308.3323001861572,z:-6.442649960517883},{x:293.87027740478516,y:207.7961826324463,z:9.821539521217346,name:"rightEyebrow"},{x:332.11437225341797,y:271.22812271118164,z:-16.64351224899292},{x:320.1197814941406,y:207.40366458892822,z:-2.48164564371109,name:"rightEyebrow"},{x:318.59575271606445,y:201.07443809509277,z:-3.110446035861969,name:"rightEyebrow"},{x:310.72303771972656,y:175.75075149536133,z:13.328815698623657,name:"faceOval"},{x:289.67578887939453,y:202.29835510253906,z:21.370456218719482},{x:315.30879974365234,y:187.35260009765625,z:5.0304025411605835},{x:287.8936767578125,y:216.54793739318848,z:17.81065821647644,name:"rightEyebrow"},{x:283.9391899108887,y:215.01142501831055,z:32.04984903335571},{x:348.35330963134766,y:299.4155788421631,z:-22.47924566268921},{x:341.1790466308594,y:301.8221855163574,z:-18.977805376052856},{x:335.69713592529297,y:304.4266891479492,z:-14.682706594467163},{x:339.4615173339844,y:272.3654365539551,z:-16.38674020767212},{x:328.99600982666016,y:308.86685371398926,z:-5.616893768310547},{x:332.00313568115234,y:309.1875743865967,z:-10.335084199905396},{x:331.0068130493164,y:307.9274368286133,z:-6.681914925575256,name:"lips"},{x:341.13792419433594,y:266.4876937866211,z:-26.56425952911377},{x:339.02950286865234,y:305.6663703918457,z:-12.33674168586731,name:"lips"},{x:344.22935485839844,y:304.9452781677246,z:-15.161235332489014,name:"lips"},{x:350.1844024658203,y:304.374303817749,z:-17.5305438041687,name:"lips"},{x:348.52630615234375,y:325.9562301635742,z:-16.164982318878174},{x:348.6581802368164,y:317.1624183654785,z:-21.510512828826904,name:"lips"},{x:348.9766311645508,y:312.1923065185547,z:-21.708929538726807},{x:349.2427444458008,y:308.0660820007324,z:-19.643079042434692},{x:349.67491149902344,y:305.42747497558594,z:-18.16080331802368,name:"lips"},{x:337.95589447021484,y:306.6535949707031,z:-12.803598642349243,name:"lips"},{x:337.06878662109375,y:307.63169288635254,z:-14.274203777313232},{x:335.77449798583984,y:309.8449516296387,z:-15.698124170303345},{x:334.6099090576172,y:312.7997016906738,z:-14.764405488967896,name:"lips"},{x:327.2330856323242,y:293.80866050720215,z:-11.864047050476074},{x:280.97679138183594,y:279.79928970336914,z:68.90834331512451,name:"faceOval"},{x:355.13843536376953,y:271.7875671386719,z:-25.350427627563477},{x:334.7235870361328,y:307.4656391143799,z:-9.302158951759338,name:"lips"},{x:333.5293960571289,y:307.89782524108887,z:-10.200862884521484},{x:346.29688262939453,y:276.4256286621094,z:-19.748122692108154},{x:335.16246795654297,y:276.22097969055176,z:-12.313398122787476},{x:345.09132385253906,y:274.7082996368408,z:-19.304605722427368},{x:325.4267883300781,y:252.95130729675293,z:-1.6661019623279572},{x:315.347843170166,y:259.05200958251953,z:-.25604281574487686},{x:330.44933319091797,y:267.7570152282715,z:-14.017432928085327},{x:294.96768951416016,y:185.26001930236816,z:23.903164863586426,name:"faceOval"},{x:299.63531494140625,y:192.7913761138916,z:12.640198469161987},{x:304.5452117919922,y:202.4142837524414,z:3.244667649269104,name:"rightEyebrow"},{x:331.6915512084961,y:320.0467872619629,z:-10.632705688476562},{x:334.5911407470703,y:201.27566814422607,z:-6.133356094360352,name:"rightEyebrow"},{x:331.4815902709961,y:185.44180870056152,z:.6627205014228821},{x:328.05816650390625,y:170.8385467529297,z:7.358860373497009,name:"faceOval"},{x:304.49764251708984,y:239.76297855377197,z:10.387605428695679},{x:290.6382179260254,y:248.85257720947266,z:19.03616428375244},{x:331.5682601928711,y:233.20727348327637,z:7.837390303611755},{x:295.5115509033203,y:228.9834451675415,z:14.41426157951355},{x:336.94332122802734,y:241.8259334564209,z:-5.27842104434967},{x:336.2792205810547,y:262.7049922943115,z:-26.12074375152588},{x:284.4102478027344,y:255.3262710571289,z:25.467140674591064},{x:295.1420593261719,y:253.02655220031738,z:12.430112361907959},{x:303.5196113586426,y:254.20703887939453,z:6.139191389083862},{x:315.73450088500977,y:251.64799690246582,z:3.3788898587226868},{x:324.69661712646484,y:247.56494522094727,z:2.3328344523906708},{x:331.57970428466797,y:243.02241325378418,z:1.1423448473215103},{x:345.6210708618164,y:229.9976634979248,z:-10.825285911560059},{x:286.26644134521484,y:270.37991523742676,z:21.708929538726807},{x:290.2525520324707,y:228.4921360015869,z:17.71728754043579},{x:351.65367126464844,y:269.3400764465332,z:-33.450424671173096},{x:333.1378936767578,y:253.88388633728027,z:-7.230473756790161},{x:277.8318977355957,y:246.95331573486328,z:68.20805549621582,name:"faceOval"},{x:336.6680908203125,y:238.10003757476807,z:.7688578963279724},{x:329.95800018310547,y:269.18323516845703,z:-7.207130789756775},{x:299.17491912841797,y:234.13324356079102,z:15.95489501953125},{x:335.61729431152344,y:258.71752738952637,z:-23.016133308410645},{x:284.1079330444336,y:297.0343494415283,z:63.25934886932373,name:"faceOval"},{x:331.44542694091797,y:230.6892442703247,z:9.92658257484436,name:"rightEye"},{x:341.41536712646484,y:253.01264762878418,z:-29.038610458374023},{x:303.5472869873047,y:327.5896739959717,z:16.725212335586548},{x:304.7756576538086,y:337.4389457702637,z:27.38126277923584,name:"faceOval"},{x:280.80501556396484,y:275.32050132751465,z:45.0752067565918},{x:295.43582916259766,y:318.4501647949219,z:26.2608003616333},{x:281.4303207397461,y:228.7355661392212,z:40.94350814819336},{x:331.2549591064453,y:349.4216537475586,z:-7.376367449760437},{x:352.4247741699219,y:271.7330074310303,z:-24.953596591949463},{x:327.5672912597656,y:260.41900634765625,z:-5.456410646438599},{x:284.5432472229004,y:241.7647933959961,z:29.668869972229004},{x:310,y:235.66174507141113,z:8.502663969993591,name:"rightEye"},{x:315.7071113586426,y:235.7572603225708,z:6.938687562942505,name:"rightEye"},{x:330.41088104248047,y:311.04143142700195,z:-9.325502514839172,name:"lips"},{x:288.5377502441406,y:285.31983375549316,z:21.837315559387207},{x:344.55039978027344,y:359.4300842285156,z:-6.705257892608643,name:"faceOval"},{x:323.41880798339844,y:351.67362213134766,z:7.802375555038452,name:"faceOval"},{x:314.64088439941406,y:346.11894607543945,z:16.36339783668518,name:"faceOval"},{x:349.4945526123047,y:184.8434829711914,z:-.21847527474164963},{x:359.24694061279297,y:359.8348903656006,z:-8.403456211090088,name:"faceOval"},{x:321.26182556152344,y:234.64492321014404,z:6.90950870513916,name:"rightEye"},{x:326.318359375,y:232.90250301361084,z:8.029969334602356,name:"rightEye"},{x:329.6211624145508,y:231.6195774078369,z:9.722331762313843,name:"rightEye"},{x:285.9398078918457,y:228.2351303100586,z:24.650139808654785},{x:325.79288482666016,y:227.88007736206055,z:7.469738721847534,name:"rightEye"},{x:320.1699447631836,y:227.5934886932373,z:6.168370842933655,name:"rightEye"},{x:314.85408782958984,y:227.85282611846924,z:6.2675780057907104,name:"rightEye"},{x:309.3084907531738,y:229.1516876220703,z:7.7031683921813965,name:"rightEye"},{x:305.5621337890625,y:230.92366218566895,z:9.722331762313843,name:"rightEye"},{x:277.8681945800781,y:228.5354232788086,z:59.71122741699219,name:"faceOval"},{x:306.1444664001465,y:235.1954698562622,z:10.603528022766113,name:"rightEye"},{x:355.4478454589844,y:281.96210861206055,z:-20.565123558044434},{x:333.02661895751953,y:288.0105400085449,z:-14.72939133644104},{x:337.15728759765625,y:269.2059516906738,z:-19.8414945602417},{x:345.9898376464844,y:283.5453128814697,z:-20.4834246635437},{x:351.48963928222656,y:219.98916149139404,z:-7.0378947257995605},{x:312.39574432373047,y:336.50628089904785,z:8.671900033950806},{x:321.32152557373047,y:343.1755256652832,z:.9067271649837494},{x:343.78379821777344,y:353.2975959777832,z:-14.355905055999756},{x:296.8791389465332,y:327.91497230529785,z:41.01353645324707,name:"faceOval"},{x:329.6939468383789,y:229.27897453308105,z:8.934508562088013,name:"rightEye"},{x:341.6905212402344,y:241.4073657989502,z:-14.589333534240723},{x:359.03079986572266,y:353.48859786987305,z:-15.803166627883911},{x:333.1861877441406,y:356.43213272094727,z:-1.0234417766332626,name:"faceOval"},{x:283.97483825683594,y:291.4318656921387,z:41.94725513458252},{x:343.33770751953125,y:305.830135345459,z:-15.756480693817139,name:"lips"},{x:342.40283966064453,y:307.7453899383545,z:-17.4021577835083},{x:341.53621673583984,y:311.0595703125,z:-19.047834873199463},{x:340.9107208251953,y:315.4837703704834,z:-18.5576331615448,name:"lips"},{x:339.1478729248047,y:323.42233657836914,z:-14.367576837539673},{x:333.3201599121094,y:307.4406337738037,z:-9.617288708686829},{x:331.2411117553711,y:306.9811820983887,z:-9.669809937477112},{x:329.23255920410156,y:306.0508346557617,z:-9.582273960113525,name:"lips"},{x:322.4586486816406,y:301.33323669433594,z:-7.720675468444824},{x:297.1712112426758,y:286.9552803039551,z:8.240055441856384},{x:341.3060760498047,y:235.4432201385498,z:-7.504753470420837},{x:336.9318389892578,y:224.3451976776123,z:5.829898118972778},{x:332.65323638916016,y:226.70403957366943,z:8.105834126472473},{x:334.67357635498047,y:306.4397621154785,z:-8.981193900108337,name:"lips"},{x:297.4601936340332,y:306.29210472106934,z:15.476365089416504},{x:342.9119110107422,y:222.37077713012695,z:-2.754466235637665},{x:335.4629898071289,y:332.20250129699707,z:-11.823196411132812},{x:353.2412338256836,y:240.56339263916016,z:-27.147831916809082},{x:346.3080596923828,y:236.41446590423584,z:-18.452589511871338},{x:352.6475143432617,y:234.1420555114746,z:-19.748122692108154},{x:337.3209762573242,y:253.39937210083008,z:-16.024924516677856},{x:358.6122131347656,y:344.90861892700195,z:-18.592647314071655},{x:358.1117248535156,y:334.64990615844727,z:-17.49552845954895},{x:346.4450454711914,y:335.0321102142334,z:-16.32838249206543},{x:319.17640686035156,y:320.2833938598633,z:-3.276764452457428},{x:325.2540588378906,y:276.2369728088379,z:-6.460157036781311},{x:326.7214584350586,y:327.3939514160156,z:-7.417217493057251},{x:310.7190132141113,y:277.2265148162842,z:-3.5452082753181458},{x:319.78355407714844,y:284.8238182067871,z:-6.4543211460113525},{x:305.773983001709,y:290.83580017089844,z:.06907138042151928},{x:344.4001770019531,y:344.85408782958984,z:-16.946970224380493},{x:333.1879425048828,y:258.74256134033203,z:-11.90489649772644},{x:313.80598068237305,y:327.08919525146484,z:2.2277912497520447},{x:322.9637908935547,y:334.6819496154785,z:-3.3643004298210144},{x:313.4055519104004,y:311.2166690826416,z:-1.1175429821014404},{x:291.0865783691406,y:298.2831001281738,z:22.467575073242188},{x:305.6580924987793,y:313.3707904815674,z:5.561453700065613},{x:288.23760986328125,y:305.9941864013672,z:36.765122413635254},{x:315.10692596435547,y:296.26991271972656,z:-4.604393839836121},{x:337.50518798828125,y:247.5944423675537,z:-10.597691535949707},{x:338.8450622558594,y:265.47778129577637,z:-27.778091430664062},{x:334.25254821777344,y:269.0671920776367,z:-20.938611030578613},{x:341.64512634277344,y:259.6387195587158,z:-32.189905643463135},{x:331.44081115722656,y:219.0976095199585,z:4.207563698291779},{x:320.56339263916016,y:216.49658203125,z:2.930997312068939},{x:311.21912002563477,y:216.57853603363037,z:2.9674705862998962},{x:303.46256256103516,y:218.54614734649658,z:5.357203483581543},{x:297.99999237060547,y:222.505202293396,z:9.325502514839172},{x:294.93839263916016,y:236.39654159545898,z:18.534289598464966},{x:278.87489318847656,y:259.7095584869385,z:45.68212032318115},{x:300.3782653808594,y:245.38593292236328,z:12.278382778167725},{x:307.06348419189453,y:246.36857986450195,z:8.164191246032715},{x:315.5229187011719,y:245.3949737548828,z:5.503097176551819},{x:323.71395111083984,y:242.75178909301758,z:4.6335723996162415},{x:330.2785873413086,y:239.34658527374268,z:4.937030673027039},{x:334.6982192993164,y:236.0460376739502,z:4.823233783245087},{x:279.3412208557129,y:263.5196113586426,z:70.91583728790283,name:"faceOval"},{x:334.65972900390625,y:271.6648578643799,z:-17.775644063949585},{x:342.05677032470703,y:246.99846267700195,z:-20.84523916244507},{x:344.0357971191406,y:264.5701503753662,z:-32.936880588531494},{x:348.25531005859375,y:268.6645030975342,z:-30.695960521697998},{x:344.12227630615234,y:266.34212493896484,z:-29.808926582336426},{x:337.12318420410156,y:274.2556858062744,z:-15.768152475357056},{x:349.49047088623047,y:269.071683883667,z:-32.51670837402344},{x:350.1683044433594,y:271.4691352844238,z:-24.93025302886963},{x:333.9634704589844,y:230.56639194488525,z:8.89949381351471},{x:338.2147979736328,y:231.4807891845703,z:4.6715047955513},{x:340.4712677001953,y:231.74463272094727,z:-.34996166825294495},{x:303.28975677490234,y:232.24980354309082,z:11.916568279266357,name:"rightEye"},{x:299.4649124145508,y:229.53842639923096,z:12.325069904327393},{x:359.09618377685547,y:241.77349090576172,z:-24.650139808654785},{x:399.46216583251953,y:229.89503860473633,z:15.919880867004395,name:"leftEye"},{x:361.38919830322266,y:269.6129894256592,z:-24.510080814361572},{x:416.9973373413086,y:206.0895538330078,z:53.26857566833496,name:"faceOval"},{x:381.32179260253906,y:235.5476474761963,z:7.6214683055877686},{x:387.8068542480469,y:236.25958442687988,z:8.345099091529846},{x:393.95751953125,y:235.8660364151001,z:10.475142002105713},{x:401.84600830078125,y:232.77019500732422,z:16.760226488113403},{x:375.70568084716797,y:233.48456382751465,z:8.234220147132874},{x:388.17752838134766,y:218.94717693328857,z:6.810300946235657},{x:381.64928436279297,y:219.2656660079956,z:6.711093783378601},{x:394.4760513305664,y:219.66821193695068,z:9.173773527145386},{x:398.8843536376953,y:221.8837022781372,z:12.03328251838684},{x:406.5454864501953,y:237.12156772613525,z:19.7131085395813},{x:383.87447357177734,y:337.6932907104492,z:-8.631049990653992},{x:401.2682342529297,y:228.5916566848755,z:18.359217643737793,name:"leftEye"},{x:422.0449447631836,y:236.73934936523438,z:51.16771221160889},{x:412.69153594970703,y:232.80198097229004,z:27.52131938934326},{x:387.3497772216797,y:263.298397064209,z:-2.8609684109687805},{x:364.5124053955078,y:293.39221000671387,z:-22.397546768188477,name:"lips"},{x:363.62987518310547,y:302.1291446685791,z:-19.643079042434692},{x:373.2334518432617,y:295.8647060394287,z:-18.125789165496826,name:"lips"},{x:378.83365631103516,y:299.5177745819092,z:-13.153743743896484,name:"lips"},{x:369.91477966308594,y:302.5704002380371,z:-16.65518283843994},{x:374.9167251586914,y:303.5416603088379,z:-11.963253021240234},{x:387.58888244628906,y:312.2716999053955,z:-4.680258631706238},{x:360.6635284423828,y:264.31986808776855,z:-35.94811677932739},{x:361.04564666748047,y:256.8225860595703,z:-37.278664112091064},{x:408.3855438232422,y:213.52088928222656,z:15.756480693817139,name:"leftEyebrow"},{x:373.2946014404297,y:245.38101196289062,z:-1.9316278398036957},{x:376.83860778808594,y:264.3721103668213,z:-18.510947227478027},{x:376.9546127319336,y:261.0010528564453,z:-15.989909172058105},{x:406.1498260498047,y:263.5030174255371,z:7.072908878326416},{x:360.07205963134766,y:248.3631706237793,z:-32.16656446456909},{x:393.11119079589844,y:205.10473251342773,z:3.7786373496055603,name:"leftEyebrow"},{x:402.12791442871094,y:207.89000988006592,z:9.383859634399414,name:"leftEyebrow"},{x:410.8693313598633,y:191.6182279586792,z:41.27030849456787,name:"faceOval"},{x:364.9509811401367,y:210.40483474731445,z:-3.758212625980377},{x:375.94444274902344,y:221.1331844329834,z:8.368442058563232},{x:392.1904754638672,y:305.0360298156738,z:-1.752179116010666},{x:419.50225830078125,y:307.25592613220215,z:58.96425247192383,name:"faceOval"},{x:372.0027160644531,y:268.7212657928467,z:-16.631840467453003},{x:366.1614227294922,y:271.6237449645996,z:-18.219159841537476},{x:385.00938415527344,y:305.3863334655762,z:-2.567722797393799},{x:381.99771881103516,y:304.9723720550537,z:-4.575215280056},{x:405.078125,y:203.21216583251953,z:13.713973760604858,name:"leftEyebrow"},{x:377.13207244873047,y:268.4710121154785,z:-15.266278982162476},{x:380.9713363647461,y:205.36980628967285,z:-.7250899076461792,name:"leftEyebrow"},{x:381.7788314819336,y:198.9268398284912,z:-1.184653863310814,name:"leftEyebrow"},{x:385.5204772949219,y:172.1484375,z:16.04826807975769,name:"faceOval"},{x:407.94189453125,y:196.76236152648926,z:25.723915100097656},{x:383.03890228271484,y:184.5157527923584,z:7.393874526023865},{x:411.61781311035156,y:210.79241752624512,z:22.315845489501953,name:"leftEyebrow"},{x:414.30870056152344,y:208.4643030166626,z:37.021894454956055},{x:364.28722381591797,y:298.35777282714844,z:-21.86065673828125},{x:371.3682556152344,y:299.78848457336426,z:-17.834001779556274},{x:376.88201904296875,y:301.6696071624756,z:-13.153743743896484},{x:370.2193832397461,y:270.49095153808594,z:-15.569736957550049},{x:383.5081100463867,y:305.2726364135742,z:-3.673594295978546},{x:380.73760986328125,y:305.96869468688965,z:-8.660228252410889},{x:381.2334442138672,y:304.63574409484863,z:-4.820316135883331,name:"lips"},{x:368.1698989868164,y:264.8884963989258,z:-25.653886795043945},{x:373.5087203979492,y:303.4233856201172,z:-10.95950722694397,name:"lips"},{x:368.4544372558594,y:303.29601287841797,z:-14.169161319732666,name:"lips"},{x:362.76554107666016,y:303.5735607147217,z:-16.911956071853638,name:"lips"},{x:366.60980224609375,y:324.8870658874512,z:-15.616422891616821},{x:365.7067108154297,y:315.95678329467773,z:-20.903596878051758,name:"lips"},{x:365.0083923339844,y:311.2232208251953,z:-21.066999435424805},{x:364.1508102416992,y:307.0583438873291,z:-18.907777070999146},{x:363.37512969970703,y:304.5721435546875,z:-17.42550015449524,name:"lips"},{x:374.580078125,y:304.3059539794922,z:-11.40302300453186,name:"lips"},{x:375.55362701416016,y:305.0998020172119,z:-12.861957550048828},{x:377.2437286376953,y:307.1674346923828,z:-14.215847253799438},{x:378.68587493896484,y:309.9015712738037,z:-13.223772048950195,name:"lips"},{x:383.8992691040039,y:290.29629707336426,z:-9.97326910495758},{x:423.3871841430664,y:271.91688537597656,z:74.37058925628662,name:"faceOval"},{x:377.68043518066406,y:304.62209701538086,z:-7.603961229324341,name:"lips"},{x:379.00428771972656,y:304.9314594268799,z:-8.57852816581726},{x:364.00279998779297,y:275.2813911437988,z:-19.25792098045349},{x:374.68231201171875,y:273.82555961608887,z:-11.28047227859497},{x:365.0354766845703,y:273.4548568725586,z:-18.791062831878662},{x:380.61901092529297,y:249.8848056793213,z:.15501167625188828},{x:391.14158630371094,y:254.7934627532959,z:2.0906515419483185},{x:378.1761169433594,y:264.9612236022949,z:-12.605184316635132},{x:400.9540557861328,y:179.99592304229736,z:27.82477855682373,name:"faceOval"},{x:398.0038833618164,y:188.50656509399414,z:16.094952821731567},{x:394.8717498779297,y:199.0359592437744,z:6.226727366447449,name:"leftEyebrow"},{x:382.10926055908203,y:316.83926582336426,z:-8.946179747581482},{x:366.51588439941406,y:200.32583713531494,z:-5.24632453918457,name:"leftEyebrow"},{x:367.4893569946289,y:183.87210845947266,z:1.9039081037044525},{x:368.6243438720703,y:168.8127565383911,z:8.736093044281006,name:"faceOval"},{x:398.96175384521484,y:234.9675178527832,z:13.713973760604858},{x:412.9645538330078,y:242.23042488098145,z:23.272905349731445},{x:372.05257415771484,y:231.41919136047363,z:9.226294755935669},{x:406.0722351074219,y:223.58965873718262,z:18.370890617370605},{x:368.27442169189453,y:240.2039337158203,z:-4.166713654994965},{x:372.3575210571289,y:260.66442489624023,z:-24.976940155029297},{x:419.2244338989258,y:247.9079246520996,z:30.299127101898193},{x:409.43885803222656,y:246.60913467407227,z:16.398411989212036},{x:401.69139862060547,y:248.76328468322754,z:9.395531415939331},{x:389.7608184814453,y:247.56915092468262,z:5.841569304466248},{x:380.5461883544922,y:244.55984115600586,z:4.263003468513489},{x:373.25817108154297,y:240.80214500427246,z:2.5356262922286987},{x:358.77086639404297,y:229.35615062713623,z:-10.387605428695679},{x:419.5793914794922,y:262.8478717803955,z:26.5175724029541},{x:410.8808898925781,y:222.51372814178467,z:22.199130058288574},{x:358.45714569091797,y:268.91467094421387,z:-33.17030906677246},{x:373.4129333496094,y:251.6385841369629,z:-5.771540403366089},{x:422.5408172607422,y:239.23919677734375,z:74.04378890991211,name:"faceOval"},{x:367.8171920776367,y:236.58040523529053,z:1.820748895406723},{x:378.51959228515625,y:266.2532329559326,z:-5.74819803237915},{x:403.3472442626953,y:229.05112266540527,z:19.689764976501465},{x:372.34840393066406,y:256.6451168060303,z:-21.872329711914062},{x:422.54566192626953,y:289.1587829589844,z:68.67491245269775,name:"faceOval"},{x:371.9297409057617,y:228.90116214752197,z:11.432201862335205,name:"leftEye"},{x:366.21360778808594,y:251.6158962249756,z:-28.19826364517212},{x:409.1571807861328,y:321.3156223297119,z:20.2266526222229},{x:408.52943420410156,y:331.44238471984863,z:31.09278917312622,name:"faceOval"},{x:424.2788314819336,y:267.1992301940918,z:50.467424392700195},{x:415.60352325439453,y:311.6528606414795,z:30.579242706298828},{x:418.12793731689453,y:221.59927368164062,z:46.26569747924805},{x:385.68286895751953,y:346.0184955596924,z:-5.70151150226593},{x:357.82936096191406,y:271.3758373260498,z:-24.836881160736084},{x:379.588623046875,y:257.5071716308594,z:-3.755294680595398},{x:417.4592590332031,y:234.71948146820068,z:34.5475435256958},{x:393.4684371948242,y:231.58967971801758,z:11.408859491348267,name:"leftEye"},{x:387.8864288330078,y:232.14245796203613,z:9.51808214187622,name:"leftEye"},{x:382.4981689453125,y:307.5654888153076,z:-7.522260546684265,name:"lips"},{x:419.00169372558594,y:277.8332805633545,z:26.424202919006348},{x:373.62953186035156,y:357.6375102996826,z:-5.75986921787262,name:"faceOval"},{x:392.8708267211914,y:347.72446632385254,z:10.154176950454712,name:"faceOval"},{x:400.3953552246094,y:341.0005187988281,z:19.39797878265381,name:"faceOval"},{x:382.25440979003906,y:231.66935920715332,z:8.998700976371765,name:"leftEye"},{x:377.14550018310547,y:230.4228687286377,z:9.804032444953918,name:"leftEye"},{x:373.8358688354492,y:229.64950561523438,z:11.292144060134888,name:"leftEye"},{x:414.5794677734375,y:221.67891025543213,z:29.412097930908203},{x:377.00672149658203,y:225.66201210021973,z:9.360517263412476,name:"leftEye"},{x:382.29530334472656,y:224.8431158065796,z:8.32175612449646,name:"leftEye"},{x:387.5133514404297,y:224.49507236480713,z:8.917000889778137,name:"leftEye"},{x:393.15906524658203,y:225.24795055389404,z:10.737749338150024,name:"leftEye"},{x:397.05554962158203,y:226.55359268188477,z:13.002015352249146,name:"leftEye"},{x:420.5299377441406,y:221.014666557312,z:65.40690422058105,name:"faceOval"},{x:397.06920623779297,y:230.6661558151245,z:13.807345628738403,name:"leftEye"},{x:377.94647216796875,y:285.1647090911865,z:-13.305472135543823},{x:372.1118927001953,y:267.1267318725586,z:-18.83774757385254},{x:364.9968719482422,y:282.24411964416504,z:-19.818150997161865},{x:401.973876953125,y:331.20131492614746,z:11.566424369812012},{x:394.3083190917969,y:338.86693954467773,z:3.142542541027069},{x:373.9820861816406,y:351.4504623413086,z:-13.50388765335083},{x:414.3888854980469,y:321.24735832214355,z:45.51872253417969,name:"faceOval"},{x:373.44234466552734,y:227.33163356781006,z:10.626870393753052,name:"leftEye"},{x:364.0731430053711,y:240.31539916992188,z:-13.807345628738403},{x:384.2658233642578,y:353.3793067932129,z:.7385850697755814,name:"faceOval"},{x:423.20526123046875,y:283.5176181793213,z:47.152724266052246},{x:369.42798614501953,y:304.0898895263672,z:-14.647691249847412,name:"lips"},{x:370.63812255859375,y:305.90051651000977,z:-16.211668252944946},{x:371.91192626953125,y:309.0167713165283,z:-17.84567356109619},{x:373.0583953857422,y:313.3545398712158,z:-17.378815412521362,name:"lips"},{x:375.39905548095703,y:321.09289169311523,z:-13.118728399276733},{x:379.2567825317383,y:304.3582534790039,z:-7.924926280975342},{x:381.18797302246094,y:303.7031364440918,z:-7.843226194381714},{x:383.0918502807617,y:302.4884605407715,z:-7.6506465673446655,name:"lips"},{x:389.09461975097656,y:297.1475315093994,z:-5.5497825145721436},{x:411.6408920288086,y:280.24898529052734,z:12.02161192893982},{x:363.3110809326172,y:234.27620887756348,z:-6.775286793708801},{x:366.0474395751953,y:223.29872131347656,z:6.827808618545532},{x:370.34427642822266,y:225.1457118988037,z:9.558931589126587},{x:377.5371551513672,y:303.60079765319824,z:-7.358860373497009,name:"lips"},{x:412.9557800292969,y:299.53579902648926,z:19.39797878265381},{x:360.0810241699219,y:221.72012329101562,z:-2.153385728597641},{x:379.82784271240234,y:329.47723388671875,z:-10.48097848892212},{x:359.08477783203125,y:235.7911491394043,z:-18.079102039337158},{x:369.6688461303711,y:251.5407943725586,z:-14.962821006774902},{x:369.5555114746094,y:333.5307312011719,z:-15.67478060722351},{x:394.0193176269531,y:315.6973171234131,z:-.9920747578144073},{x:383.78997802734375,y:272.7268695831299,z:-4.689012169837952},{x:387.67765045166016,y:323.6722755432129,z:-5.640236139297485},{x:397.8769302368164,y:272.1331214904785,z:-.9395531564950943},{x:389.87476348876953,y:280.5630111694336,z:-4.29218202829361},{x:403.83888244628906,y:285.1167869567871,z:3.0229100584983826},{x:372.5467300415039,y:343.1070327758789,z:-16.153310537338257},{x:374.1112518310547,y:256.3721466064453,z:-10.574349164962769},{x:399.73785400390625,y:321.77515983581543,z:4.849494695663452},{x:392.03365325927734,y:330.56447982788086,z:-1.3407598435878754},{x:398.59134674072266,y:305.93902587890625,z:1.517290621995926},{x:417.95997619628906,y:290.9716987609863,z:26.89105987548828},{x:406.04541778564453,y:307.35154151916504,z:8.666064143180847},{x:420.75328826904297,y:298.40752601623535,z:41.78385257720947},{x:395.4522705078125,y:291.4153575897217,z:-2.1752697229385376},{x:368.6452102661133,y:245.8882999420166,z:-9.453888535499573},{x:370.34900665283203,y:263.56690406799316,z:-26.75100326538086},{x:374.98477935791016,y:266.6126346588135,z:-19.77146625518799},{x:366.99840545654297,y:258.12140464782715,z:-31.372904777526855},{x:371.00616455078125,y:217.63479709625244,z:5.60522198677063},{x:381.30577087402344,y:214.14087295532227,z:4.983716309070587},{x:390.1496124267578,y:213.38221549987793,z:5.593550801277161},{x:397.7696990966797,y:214.3659782409668,z:8.57852816581726},{x:403.1652069091797,y:217.65509605407715,z:13.013685941696167},{x:407.3551940917969,y:230.72525024414062,z:22.444231510162354},{x:424.0876770019531,y:251.7839241027832,z:51.16771221160889},{x:403.50196838378906,y:239.88757610321045,z:15.803166627883911},{x:397.31719970703125,y:241.49806022644043,z:11.233787536621094},{x:388.99425506591797,y:241.4366912841797,z:7.948269248008728},{x:380.7804489135742,y:239.78078842163086,z:6.600214838981628},{x:374.01336669921875,y:237.11946487426758,z:6.349278092384338},{x:369.39125061035156,y:234.35351371765137,z:5.987462401390076},{x:422.9730987548828,y:255.76455116271973,z:76.61150932312012,name:"faceOval"},{x:374.73915100097656,y:269.24214363098145,z:-16.608498096466064},{x:364.61681365966797,y:245.71088790893555,z:-20.02823829650879},{x:365.3834533691406,y:263.34174156188965,z:-32.32996463775635},{x:361.58252716064453,y:267.8273677825928,z:-30.345816612243652},{x:365.37208557128906,y:265.0249671936035,z:-29.178667068481445},{x:372.72605895996094,y:272.05135345458984,z:-14.834434986114502},{x:360.48614501953125,y:268.34827423095703,z:-32.189905643463135},{x:359.9516296386719,y:270.8049201965332,z:-24.650139808654785},{x:369.5049285888672,y:229.01945114135742,z:10.107489824295044},{x:365.5447769165039,y:230.24096488952637,z:5.593550801277161},{x:363.50669860839844,y:230.6208372116089,z:.43622106313705444},{x:399.3529510498047,y:227.65677452087402,z:15.35965085029602,name:"leftEye"},{x:402.5693130493164,y:224.60190296173096,z:15.931552648544312}],box:{xMin:277.8318977355957,yMin:168.7741756439209,xMax:424.2788314819336,yMax:359.8348903656006,width:146.4469337463379,height:191.0607147216797}},SAMPLE_FACELANDMARKER_RESULT:{faceLandmarks:[[{x:.5760777592658997,y:.8639070391654968,z:-.030997956171631813},{x:.572094738483429,y:.7886289358139038,z:-.07189624011516571},{x:.5723551511764526,y:.8075382709503174,z:-.03578168898820877},{x:.5548420548439026,y:.7188365459442139,z:-.057787876576185226},{x:.5706077814102173,y:.7674974799156189,z:-.07740399986505508},{x:.5681378245353699,y:.7387768030166626,z:-.07356284558773041},{x:.5621535181999207,y:.6681165099143982,z:-.04189874976873398},{x:.46613582968711853,y:.6679812073707581,z:.011289681307971478},{x:.5579932928085327,y:.6174106597900391,z:-.03502821549773216},{x:.5563451647758484,y:.5905600190162659,z:-.03928658738732338},{x:.5487832427024841,y:.4900572597980499,z:-.029898937791585922},{x:.5765544176101685,y:.8692144751548767,z:-.02831427752971649},{x:.5771114230155945,y:.873644232749939,z:-.02345779910683632},{x:.5771905779838562,y:.877016007900238,z:-.016658689826726913},{x:.5778058767318726,y:.8770116567611694,z:-.014505492523312569},{x:.5783766508102417,y:.8835000991821289,z:-.015996402129530907},{x:.5792440176010132,y:.8913810849189758,z:-.01924579218029976},{x:.5796768069267273,y:.8996334671974182,z:-.018261712044477463},{x:.5817288160324097,y:.9255813956260681,z:-.007126849144697189},{x:.5726592540740967,y:.7992473244667053,z:-.0643521398305893},{x:.5579419136047363,y:.7996989488601685,z:-.04566684365272522},{x:.4216199815273285,y:.5958762764930725,z:.06776496022939682},{x:.5052269697189331,y:.6796539425849915,z:-.0010737782577052712},{x:.49243026971817017,y:.6838865876197815,z:-.0005227324436418712},{x:.4796970784664154,y:.6856290102005005,z:.002684245817363262},{x:.4618356227874756,y:.6764569878578186,z:.013439622707664967},{x:.5160380601882935,y:.6737282276153564,z:-17607348127057776e-21},{x:.48070961236953735,y:.6255870461463928,z:-.008339674212038517},{x:.49719780683517456,y:.6256808042526245,z:-.008027955889701843},{x:.46674346923828125,y:.6317623853683472,z:-.004460199736058712},{x:.4582492709159851,y:.641118049621582,z:.0011905613355338573},{x:.45408669114112854,y:.6911458969116211,z:.020514748990535736},{x:.535312294960022,y:.9619986414909363,z:.012499462813138962},{x:.4608460068702698,y:.6628725528717041,z:.01517564244568348},{x:.4206731915473938,y:.6828458309173584,z:.07848648726940155},{x:.4390624463558197,y:.6796106696128845,z:.03283142298460007},{x:.5029968619346619,y:.7701570391654968,z:-.009734481573104858},{x:.5595027208328247,y:.8607323169708252,z:-.030043255537748337},{x:.5621269941329956,y:.8738374710083008,z:-.021709579974412918},{x:.5451499819755554,y:.865527331829071,z:-.022014077752828598},{x:.5351184010505676,y:.8705098032951355,z:-.011602800339460373},{x:.5495014190673828,y:.8744956254959106,z:-.016490943729877472},{x:.5395170450210571,y:.8759440779685974,z:-.007333362940698862},{x:.5183624029159546,y:.8959754705429077,z:.010520773939788342},{x:.5604349374771118,y:.7895449995994568,z:-.07082037627696991},{x:.557381272315979,y:.7687489986419678,z:-.07590588927268982},{x:.4432901442050934,y:.6308897733688354,z:.0027153254486620426},{x:.5258325338363647,y:.7151225805282593,z:-.014676518738269806},{x:.5271827578544617,y:.7833116054534912,z:-.037643320858478546},{x:.5257382988929749,y:.7717816233634949,z:-.03401920944452286},{x:.46516409516334534,y:.7705106735229492,z:.0065747760236263275},{x:.5558893084526062,y:.7420997619628906,z:-.0694495290517807},{x:.4720408320426941,y:.6066038608551025,z:-.021204356104135513},{x:.45432573556900024,y:.6158540844917297,z:-.011054684408009052},{x:.4305151402950287,y:.5608053803443909,z:.0396830290555954},{x:.5310865640640259,y:.6157484650611877,z:-.03081176057457924},{x:.5114666223526001,y:.6329749226570129,z:-.00335998204536736},{x:.506435751914978,y:.8786543607711792,z:.012980876490473747},{x:.4480472207069397,y:.8640613555908203,z:.12569651007652283},{x:.5372058153152466,y:.7942581176757812,z:-.03168361634016037},{x:.5488379597663879,y:.8001630306243896,z:-.03280917927622795},{x:.5213388204574585,y:.8794381618499756,z:.011892606504261494},{x:.5242055654525757,y:.8789222240447998,z:.008370225317776203},{x:.4477175176143646,y:.6039950251579285,z:-.0050799972377717495},{x:.526964008808136,y:.7916748523712158,z:-.02968614175915718},{x:.4971255660057068,y:.6050706505775452,z:-.028175678104162216},{x:.4938119053840637,y:.5882453918457031,z:-.03210941329598427},{x:.4757143557071686,y:.5094879865646362,z:-.01300730835646391},{x:.43947282433509827,y:.5816648006439209,z:.01415177434682846},{x:.485664039850235,y:.5477864146232605,z:-.023685332387685776},{x:.43635931611061096,y:.6226438283920288,z:.013606148771941662},{x:.42910251021385193,y:.6102726459503174,z:.03926564007997513},{x:.5605402588844299,y:.8680099248886108,z:-.027318159118294716},{x:.5474816560745239,y:.8702861070632935,z:-.019686367362737656},{x:.5373021364212036,y:.8728838562965393,z:-.010484928265213966},{x:.540735125541687,y:.7979167103767395,z:-.029073253273963928},{x:.5228585004806519,y:.87913578748703,z:.009915109723806381},{x:.530497670173645,y:.8815253973007202,z:.0020524784922599792},{x:.5259912610054016,y:.8790552616119385,z:.007895970717072487},{x:.5433906316757202,y:.7882310748100281,z:-.05121905356645584},{x:.541388213634491,y:.8777219653129578,z:-.00466804439201951},{x:.5515822172164917,y:.8767023086547852,z:-.010475946590304375},{x:.5637003779411316,y:.877059817314148,z:-.015273625031113625},{x:.5640299320220947,y:.9263423085212708,z:-.00658724969252944},{x:.5642300248146057,y:.8993074893951416,z:-.017653480172157288},{x:.5637336373329163,y:.8910360932350159,z:-.01852807030081749},{x:.5637134313583374,y:.8837276697158813,z:-.01482592523097992},{x:.564205527305603,y:.8768964409828186,z:-.01331155002117157},{x:.5419867634773254,y:.8778373599052429,z:-.0037720394320786},{x:.5404468774795532,y:.880696177482605,z:-.005610354244709015},{x:.5392338633537292,y:.8845721483230591,z:-.007352025713771582},{x:.538469672203064,y:.8891173601150513,z:-.005154991988092661},{x:.5189250111579895,y:.8452741503715515,z:-.009755070321261883},{x:.4258975088596344,y:.7662280797958374,z:.1387351155281067},{x:.5725725293159485,y:.8041572570800781,z:-.04583907872438431},{x:.5342061519622803,y:.8785833120346069,z:.002659974154084921},{x:.5324031114578247,y:.8804071545600891,z:.0017832003068178892},{x:.5538818836212158,y:.8078407645225525,z:-.03254539892077446},{x:.5325431823730469,y:.8026832938194275,z:-.019140373915433884},{x:.5514076948165894,y:.8043903112411499,z:-.03313535451889038},{x:.5131856203079224,y:.7284771800041199,z:-.009399853646755219},{x:.49331504106521606,y:.7443980574607849,z:-.005225230939686298},{x:.5239617824554443,y:.7807451486587524,z:-.025881027802824974},{x:.4473606050014496,y:.5315827131271362,z:.011164786294102669},{x:.45718759298324585,y:.5604941248893738,z:-.005943301599472761},{x:.4670005738735199,y:.5909327268600464,z:-.019681761041283607},{x:.5311570167541504,y:.9076261520385742,z:.00389476353302598},{x:.5249923467636108,y:.5893563628196716,z:-.037981919944286346},{x:.5166932344436646,y:.5429551005363464,z:-.03319704160094261},{x:.5085030198097229,y:.49676206707954407,z:-.02691275253891945},{x:.4687720239162445,y:.6834565997123718,z:.008113506250083447},{x:.4426414966583252,y:.7069531679153442,z:.028577271848917007},{x:.5230373740196228,y:.6675713658332825,z:.001773772411979735},{x:.4481240212917328,y:.6527872085571289,z:.012414850294589996},{x:.5339856743812561,y:.7012367844581604,z:-.020220188423991203},{x:.5347223281860352,y:.7761190533638,z:-.05141595005989075},{x:.4315067231655121,y:.7211957573890686,z:.04381405934691429},{x:.45203351974487305,y:.7206180095672607,z:.017288070172071457},{x:.46892452239990234,y:.7265436053276062,z:.005602988880127668},{x:.49314674735069275,y:.7202282547950745,z:-.0006408205372281373},{x:.5104925632476807,y:.7091827392578125,z:-.00362918758764863},{x:.5232142210006714,y:.698553740978241,z:-.00787867046892643},{x:.5497883558273315,y:.6743605136871338,z:-.036349106580019},{x:.43658503890037537,y:.7627100348472595,z:.042555369436740875},{x:.4397648870944977,y:.6528646349906921,z:.017956094816327095},{x:.5653332471847534,y:.7992802858352661,z:-.06365057826042175},{x:.5285563468933105,y:.736810564994812,z:-.018836988136172295},{x:.4180678725242615,y:.6792560815811157,z:.12284679710865021},{x:.5328429937362671,y:.6865872144699097,z:-.010484723374247551},{x:.5230283141136169,y:.7809416055679321,z:-.011922398582100868},{x:.4551771283149719,y:.6650775074958801,z:.01774493046104908},{x:.5337203741073608,y:.7618928551673889,z:-.04697106033563614},{x:.43463975191116333,y:.8133478164672852,z:.1354849934577942},{x:.5225707292556763,y:.6605283617973328,z:.004980515688657761},{x:.5441933870315552,y:.7497199773788452,z:-.06091512367129326},{x:.4774007797241211,y:.9159183502197266,z:.059622734785079956},{x:.48068761825561523,y:.9364941716194153,z:.08404944837093353},{x:.4268292486667633,y:.7657528519630432,z:.09051097184419632},{x:.46051913499832153,y:.8880485892295837,z:.0738474428653717},{x:.4243420660495758,y:.6434382200241089,z:.06230505183339119},{x:.5342157483100891,y:.9835634231567383,z:.021662971004843712},{x:.5668109655380249,y:.8042187094688416,z:-.044937074184417725},{x:.5176341533660889,y:.7530587315559387,z:-.012967454269528389},{x:.430206298828125,y:.6835605502128601,z:.04612284153699875},{x:.4794231951236725,y:.6732114553451538,z:.003970044665038586},{x:.49073347449302673,y:.6722435355186462,z:.0008692514384165406},{x:.5294116139411926,y:.884677529335022,z:.004413890186697245},{x:.4430122375488281,y:.80235356092453,z:.04987282305955887},{x:.5603825449943542,y:1.0092442035675049,z:.026417359709739685},{x:.5186598300933838,y:.9828659892082214,z:.0513598807156086},{x:.5010536909103394,y:.9640932679176331,z:.06591596454381943},{x:.5524769425392151,y:.539441704750061,z:-.035816047340631485},{x:.5879997611045837,y:1.0091472864151,z:.02285068854689598},{x:.5016193985939026,y:.6684437990188599,z:.00028415941051207483},{x:.511952817440033,y:.6642197370529175,z:.0021144719794392586},{x:.5194343328475952,y:.6623469591140747,z:.004674181342124939},{x:.4321230351924896,y:.6496355533599854,z:.03124697133898735},{x:.508686363697052,y:.6479565501213074,z:-.00044765998609364033},{x:.4963986277580261,y:.6431032419204712,z:-.0032507688738405704},{x:.4845542013645172,y:.6430778503417969,z:-.002903624437749386},{x:.4733612537384033,y:.647506833076477,z:.00023347247042693198},{x:.4668654501438141,y:.653346598148346,z:.004762572236359119},{x:.41815051436424255,y:.633708119392395,z:.09809435904026031},{x:.47159942984580994,y:.6711485385894775,z:.007849935442209244},{x:.5734396576881409,y:.8256140351295471,z:-.03155219927430153},{x:.5306524038314819,y:.8337990641593933,z:-.018351426348090172},{x:.5371729135513306,y:.7910830974578857,z:-.037286680191755295},{x:.5549534559249878,y:.8275275826454163,z:-.030664825811982155},{x:.5597432255744934,y:.6418541669845581,z:-.03318847343325615},{x:.4958484172821045,y:.9429569244384766,z:.048340678215026855},{x:.5140507817268372,y:.9634028077125549,z:.03589847311377525},{x:.5587693452835083,y:.9951097369194031,z:.00908728688955307},{x:.46411189436912537,y:.9051855206489563,z:.10601935535669327},{x:.5181609392166138,y:.6554316878318787,z:.002546071307733655},{x:.5436590909957886,y:.7085841298103333,z:-.03844436630606651},{x:.5872187614440918,y:.9960382580757141,z:.0063423276878893375},{x:.5379653573036194,y:.9989125728607178,z:.03636329993605614},{x:.4350326955318451,y:.8088565468788147,z:.09147704392671585},{x:.5523084998130798,y:.8773422837257385,z:-.009068487212061882},{x:.5510149598121643,y:.8816931843757629,z:-.011043853126466274},{x:.5503793954849243,y:.88776695728302,z:-.01348799467086792},{x:.5501549243927002,y:.8954370617866516,z:-.012142189778387547},{x:.546072781085968,y:.9192524552345276,z:-.003157563041895628},{x:.5314661860466003,y:.8771666884422302,z:.0005075141089037061},{x:.5293324589729309,y:.8762547969818115,z:.00039177737198770046},{x:.5275698900222778,y:.8750609755516052,z:47732755774632096e-21},{x:.5104271173477173,y:.8607332110404968,z:.0012934643309563398},{x:.45938700437545776,y:.8134918212890625,z:.023569690063595772},{x:.5418947339057922,y:.6864100694656372,z:-.027333909645676613},{x:.531914234161377,y:.6456130743026733,z:-.005434140563011169},{x:.523697018623352,y:.647885262966156,z:-.0002466466394253075},{x:.5338191390037537,y:.8783687353134155,z:.002268768846988678},{x:.46226605772972107,y:.8610277771949768,z:.04718952998518944},{x:.5434442758560181,y:.6456181406974792,z:-.02327350154519081},{x:.5399754643440247,y:.940219521522522,z:.005075343884527683},{x:.5661457777023315,y:.71457839012146,z:-.06242101639509201},{x:.5523148775100708,y:.6974870562553406,z:-.04863070324063301},{x:.5639959573745728,y:.6923378109931946,z:-.05180761218070984},{x:.5367592573165894,y:.7423217296600342,z:-.03623027727007866},{x:.5853689908981323,y:.9752064943313599,z:-.002361974213272333},{x:.5835235118865967,y:.9493685960769653,z:-.003941743168979883},{x:.5615018606185913,y:.949194610118866,z:-.0015953965485095978},{x:.5068561434745789,y:.9048219323158264,z:.01862684078514576},{x:.5134067535400391,y:.7971825003623962,z:-.008485661819577217},{x:.5223897099494934,y:.925589919090271,z:.01249657291918993},{x:.48500555753707886,y:.7959478497505188,z:-.0032065745908766985},{x:.5037734508514404,y:.8184596300125122,z:-.004932103678584099},{x:.4766361117362976,y:.828806459903717,z:.01027688942849636},{x:.5589827299118042,y:.974656343460083,z:.0009666886180639267},{x:.5294582843780518,y:.7541216611862183,z:-.025603046640753746},{x:.4973002076148987,y:.9208990931510925,z:.031931452453136444},{x:.5163551568984985,y:.9432790875434875,z:.024321340024471283},{x:.49399662017822266,y:.8814862370491028,z:.018687399104237556},{x:.44948166608810425,y:.836137592792511,z:.05702034756541252},{x:.47898444533348083,y:.8836610913276672,z:.03150695189833641},{x:.4454479217529297,y:.8499438166618347,z:.08868525922298431},{x:.49572959542274475,y:.8452823758125305,z:.0036111653316766024},{x:.5362502336502075,y:.7222585678100586,z:-.027912352234125137},{x:.5393770337104797,y:.7850722074508667,z:-.05415399745106697},{x:.531399667263031,y:.7898418307304382,z:-.03883346915245056},{x:.5451627373695374,y:.7717036604881287,z:-.06480253487825394},{x:.5206395983695984,y:.6287745833396912,z:-.010521138086915016},{x:.4974782466888428,y:.6191938519477844,z:-.014098240062594414},{x:.4774145185947418,y:.6193130612373352,z:-.013643337413668633},{x:.4616098403930664,y:.6259890198707581,z:-.008448202162981033},{x:.4516478478908539,y:.6368461847305298,z:9050309745362028e-20},{x:.4485096037387848,y:.6719120740890503,z:.022984720766544342},{x:.42177659273147583,y:.7240667343139648,z:.08511673659086227},{x:.4616215229034424,y:.6988231539726257,z:.014238474890589714},{x:.4755798876285553,y:.7034608721733093,z:.00625590980052948},{x:.4924992024898529,y:.7005885243415833,z:.0009391739731654525},{x:.5082254409790039,y:.693384051322937,z:-.0009464038303121924},{x:.5203112959861755,y:.6849707961082458,z:-.0022114769089967012},{x:.52867591381073,y:.6779075860977173,z:-.002962538506835699},{x:.4213953912258148,y:.7219811677932739,z:.1350894570350647},{x:.5320829749107361,y:.794858992099762,z:-.03181503340601921},{x:.5452795028686523,y:.7286570072174072,z:-.04771539941430092},{x:.5496407747268677,y:.7866933345794678,z:-.06452003121376038},{x:.557040274143219,y:.7962084412574768,z:-.05837344378232956},{x:.549176812171936,y:.7895247936248779,z:-.057761140167713165},{x:.5362890362739563,y:.8005836606025696,z:-.026903774589300156},{x:.560200035572052,y:.7983731031417847,z:-.06172555685043335},{x:.5616944432258606,y:.8022753596305847,z:-.045200999826192856},{x:.5273328423500061,y:.6611284017562866,z:.0029021520167589188},{x:.534850537776947,y:.6660012006759644,z:-.005215510260313749},{x:.5394860506057739,y:.6701375246047974,z:-.014931917190551758},{x:.4634307324886322,y:.658291757106781,z:.009295716881752014},{x:.4538393020629883,y:.6519932150840759,z:.00930330716073513},{x:.5776031613349915,y:.7159298658370972,z:-.057365912944078445},{x:.6504855155944824,y:.6461779475212097,z:.014184834435582161},{x:.5860154032707214,y:.7962266206741333,z:-.04522843658924103},{x:.6842049360275269,y:.5631637573242188,z:.07207967340946198},{x:.6152560710906982,y:.6674962639808655,z:.0007529259892180562},{x:.6280948519706726,y:.6684326529502869,z:.0016892586136236787},{x:.6408625245094299,y:.6663892269134521,z:.005331226624548435},{x:.6557814478874207,y:.6534678936004639,z:.01646413467824459},{x:.6035663485527039,y:.6639701724052429,z:.0013799630105495453},{x:.6329053044319153,y:.608010470867157,z:-.006195899099111557},{x:.6167260408401489,y:.6117533445358276,z:-.006319951266050339},{x:.6471013426780701,y:.6112449765205383,z:-.0017843559617176652},{x:.6560901999473572,y:.6185776591300964,z:.004047257360070944},{x:.6666946411132812,y:.6651176810264587,z:.023647578433156013},{x:.6311345100402832,y:.9495396018028259,z:.014004078693687916},{x:.6544655561447144,y:.6397901773452759,z:.01809609681367874},{x:.6965808868408203,y:.6482675075531006,z:.08304904401302338},{x:.679817259311676,y:.650188148021698,z:.03632688894867897},{x:.6336516737937927,y:.7541458010673523,z:-.007742783520370722},{x:.5921701192855835,y:.8567668199539185,z:-.029399123042821884},{x:.591663658618927,y:.870215654373169,z:-.02103729173541069},{x:.6068367958068848,y:.8584195375442505,z:-.020668085664510727},{x:.6176617741584778,y:.860965371131897,z:-.009790095500648022},{x:.6040634512901306,y:.8686612844467163,z:-.015289564616978168},{x:.6143736839294434,y:.8671170473098755,z:-.005712216719985008},{x:.6373105049133301,y:.8815656900405884,z:.012672550976276398},{x:.5832505822181702,y:.7866312861442566,z:-.07051534950733185},{x:.5836675763130188,y:.7658692598342896,z:-.07566110789775848},{x:.6709531545639038,y:.604898989200592,z:.005951565690338612},{x:.6029891967773438,y:.705652117729187,z:-.013388276100158691},{x:.6131622195243835,y:.7728396058082581,z:-.036248479038476944},{x:.6123163104057312,y:.7612020373344421,z:-.03264721855521202},{x:.6696187853813171,y:.744706928730011,z:.009673702530562878},{x:.5803102254867554,y:.7385968565940857,z:-.0689152330160141},{x:.6404349207878113,y:.5877999663352966,z:-.01929756999015808},{x:.6588467955589294,y:.5929454565048218,z:-.008487257175147533},{x:.6720337867736816,y:.530631422996521,z:.043437421321868896},{x:.584305465221405,y:.6099005341529846,z:-.030301367864012718},{x:.6034283638000488,y:.6217452883720398,z:-.001970183802768588},{x:.6460927724838257,y:.8608663082122803,z:.015541625209152699},{x:.6957815289497375,y:.8326103091239929,z:.13015234470367432},{x:.6043362617492676,y:.7861682772636414,z:-.030476901680231094},{x:.594293475151062,y:.7942103147506714,z:-.032218821346759796},{x:.6324057579040527,y:.8665139675140381,z:.014255806803703308},{x:.6296147704124451,y:.8667733669281006,z:.010388285852968693},{x:.663644552230835,y:.5798642635345459,z:-.0022301070857793093},{x:.6140630841255188,y:.7809288501739502,z:-.02835679054260254},{x:.615908145904541,y:.5921698212623596,z:-.026804860681295395},{x:.617181122303009,y:.5748661756515503,z:-.03060605563223362},{x:.6222207546234131,y:.49137672781944275,z:-.011151673272252083},{x:.6669357419013977,y:.5541607141494751,z:.017466170713305473},{x:.6182981729507446,y:.5320425629615784,z:-.021793590858578682},{x:.6760554313659668,y:.595052182674408,z:.017115700989961624},{x:.6801463961601257,y:.5800720453262329,z:.043127160519361496},{x:.5922210812568665,y:.8644017577171326,z:-.02662893570959568},{x:.6054555177688599,y:.8637874722480774,z:-.018363753333687782},{x:.6161889433860779,y:.8641164898872375,z:-.008808949030935764},{x:.6017249822616577,y:.7901403307914734,z:-.028126630932092667},{x:.631446123123169,y:.8664817810058594,z:.012112865224480629},{x:.6249198913574219,y:.8716511130332947,z:.003882825840264559},{x:.6281915903091431,y:.867301881313324,z:.009891441091895103},{x:.5986843109130859,y:.7813931703567505,z:-.050227612257003784},{x:.6126407384872437,y:.869275689125061,z:-.0031255714129656553},{x:.6027271151542664,y:.8711842894554138,z:-.009324162267148495},{x:.59088134765625,y:.8742044568061829,z:-.014608660712838173},{x:.5984604358673096,y:.9216185212135315,z:-.005981989670544863},{x:.5950398445129395,y:.8964707255363464,z:-.01703473925590515},{x:.5941568613052368,y:.8882410526275635,z:-.017784785479307175},{x:.5928806662559509,y:.8803883194923401,z:-.014153128489851952},{x:.5909661054611206,y:.8748103976249695,z:-.012609979137778282},{x:.6128016710281372,y:.8702545762062073,z:-.0022550546564161777},{x:.6150846481323242,y:.8726804256439209,z:-.00414019962772727},{x:.6173093914985657,y:.8770190477371216,z:-.005970994010567665},{x:.619335412979126,y:.8814800977706909,z:-.0036864024586975574},{x:.6292637586593628,y:.8314558267593384,z:-.007714875973761082},{x:.702275276184082,y:.7320667505264282,z:.1433621346950531},{x:.6204835176467896,y:.8689177632331848,z:.0044869170524179935},{x:.6223508715629578,y:.8704851269721985,z:.00352082890458405},{x:.590448260307312,y:.8029727935791016,z:-.03200828656554222},{x:.6097423434257507,y:.7933741211891174,z:-.018042555078864098},{x:.59229576587677,y:.7993767261505127,z:-.032564569264650345},{x:.6171364188194275,y:.7153720259666443,z:-.007672437466681004},{x:.6389747858047485,y:.726390540599823,z:-.002999067772179842},{x:.6151940226554871,y:.769412100315094,z:-.024427521973848343},{x:.6526776552200317,y:.505868136882782,z:.01412637997418642},{x:.6475822329521179,y:.5375454425811768,z:-.0033899128902703524},{x:.6433356404304504,y:.5714520215988159,z:-.017428796738386154},{x:.626949667930603,y:.8962116837501526,z:.005602736957371235},{x:.5868416428565979,y:.5829002261161804,z:-.03727729618549347},{x:.5877229571342468,y:.5345035791397095,z:-.032396964728832245},{x:.5887066125869751,y:.48655083775520325,z:-.025856535881757736},{x:.6507197618484497,y:.6612282991409302,z:.011114613153040409},{x:.6803066730499268,y:.677992045879364,z:.032125361263751984},{x:.5963194370269775,y:.6598632335662842,z:.002976928371936083},{x:.667536199092865,y:.6274255514144897,z:.015618261881172657},{x:.5930740833282471,y:.6940041780471802,z:-.019217798486351967},{x:.6053346395492554,y:.7676517963409424,z:-.050308309495449066},{x:.6934473514556885,y:.6884298920631409,z:.04794462397694588},{x:.6738007664680481,y:.6934011578559875,z:.020697161555290222},{x:.6588084697723389,y:.7033141851425171,z:.008462334051728249},{x:.6346072554588318,y:.7029502391815186,z:.001542167621664703},{x:.6157816648483276,y:.6966525912284851,z:-.002009218093007803},{x:.6015574336051941,y:.688928484916687,z:-.006588225718587637},{x:.5746836066246033,y:.6711069345474243,z:-.03597589209675789},{x:.6947521567344666,y:.7309479117393494,z:.046707939356565475},{x:.6759101152420044,y:.6249120831489563,z:.021654341369867325},{x:.5794773101806641,y:.7971615195274353,z:-.06339326500892639},{x:.6041849851608276,y:.727514922618866,z:-.017512541264295578},{x:.6968844532966614,y:.6440950036048889,z:.12727996706962585},{x:.5910853147506714,y:.679325520992279,z:-.009497715160250664},{x:.6157375574111938,y:.7695677280426025,z:-.010624290443956852},{x:.6606494784355164,y:.6410489678382874,z:.0208158977329731},{x:.6040687561035156,y:.7531470656394958,z:-.045887019485235214},{x:.7012156248092651,y:.780247151851654,z:.14028730988502502},{x:.595149576663971,y:.6527782678604126,z:.006308757700026035},{x:.5925500392913818,y:.7436665892601013,z:-.060151755809783936},{x:.6780198812484741,y:.8905693888664246,z:.0626060739159584},{x:.676746666431427,y:.9113880395889282,z:.08726003766059875},{x:.7030686140060425,y:.7312687635421753,z:.09529774636030197},{x:.688987135887146,y:.8588417172431946,z:.07752864807844162},{x:.6883691549301147,y:.6109960675239563,z:.06669612973928452},{x:.6358906030654907,y:.9702065587043762,z:.023120900616049767},{x:.5781539678573608,y:.8023634552955627,z:-.044763918966054916},{x:.6170316934585571,y:.7408350706100464,z:-.011375460773706436},{x:.688542366027832,y:.6516284346580505,z:.050206027925014496},{x:.6385149359703064,y:.6540714502334595,z:.006462941411882639},{x:.6279382109642029,y:.6563615798950195,z:.003062846139073372},{x:.6268895268440247,y:.8736732006072998,z:.00627936702221632},{x:.6944946050643921,y:.7709181308746338,z:.053824134171009064},{x:.614617109298706,y:1.0022112131118774,z:.02719894051551819},{x:.6493719220161438,y:.9665167927742004,z:.053563784807920456},{x:.6624587178230286,y:.943530797958374,z:.068605437874794},{x:.6162528991699219,y:.6558693051338196,z:.002187855076044798},{x:.6058168411254883,y:.654328465461731,z:.0036193584091961384},{x:.5987918972969055,y:.6536934971809387,z:.006134530063718557},{x:.6831037402153015,y:.6195642948150635,z:.03511790186166763},{x:.6062582731246948,y:.6356398463249207,z:.001280312892049551},{x:.6174948811531067,y:.62776118516922,z:-.0013642468256875873},{x:.6297246217727661,y:.6253792643547058,z:-.0007034156005829573},{x:.6407091617584229,y:.627578616142273,z:.0028144705574959517},{x:.6479622721672058,y:.6322650909423828,z:.00750273372977972},{x:.6915091276168823,y:.5990704298019409,z:.10270945727825165},{x:.6457163095474243,y:.6504453420639038,z:.010696077719330788},{x:.6164222955703735,y:.8231936097145081,z:-.016772059723734856},{x:.6042401194572449,y:.7830976843833923,z:-.03630910441279411},{x:.5922216773033142,y:.8228387236595154,z:-.029992375522851944},{x:.6646111011505127,y:.92097008228302,z:.050967294722795486},{x:.651232898235321,y:.9460107088088989,z:.038000158965587616},{x:.6140977144241333,y:.9882472157478333,z:.009882091544568539},{x:.6870781183242798,y:.8768675327301025,z:.10980932414531708},{x:.5986856818199158,y:.6456438899040222,z:.003999010659754276},{x:.585981547832489,y:.7034481763839722,z:-.0377722829580307},{x:.6342031359672546,y:.9867448806762695,z:.03786521404981613},{x:.7013950943946838,y:.776049017906189,z:.09598205983638763},{x:.6030206680297852,y:.8719133138656616,z:-.007931148633360863},{x:.6050592064857483,y:.8767156004905701,z:-.009791925549507141},{x:.6073468923568726,y:.8831382393836975,z:-.012361008673906326},{x:.6087977290153503,y:.890143632888794,z:-.01098148338496685},{x:.6147705316543579,y:.9110084772109985,z:-.0018823575228452682},{x:.622577965259552,y:.8670604825019836,z:.002609190298244357},{x:.6241236329078674,y:.8651344180107117,z:.0025534380692988634},{x:.6257084608078003,y:.8638408184051514,z:.0023300074972212315},{x:.639931321144104,y:.8449671268463135,z:.0038123116828501225},{x:.6810906529426575,y:.7856625318527222,z:.02717764675617218},{x:.583532452583313,y:.6811994910240173,z:-.026588857173919678},{x:.5855660438537598,y:.6393819451332092,z:-.004512844607234001},{x:.5932201743125916,y:.6398029327392578,z:.0008020466193556786},{x:.6200879812240601,y:.8683351874351501,z:.00417016725987196},{x:.6842559576034546,y:.8330534100532532,z:.050836317241191864},{x:.5754412412643433,y:.6418221592903137,z:-.022838059812784195},{x:.6232790350914001,y:.9295297265052795,z:.006339520215988159},{x:.5764067769050598,y:.694546639919281,z:-.04825803264975548},{x:.59778892993927,y:.7343927621841431,z:-.035004377365112305},{x:.6042810678482056,y:.9441440105438232,z:-.0010970570147037506},{x:.6496372222900391,y:.8869078159332275,z:.021036235615611076},{x:.6274012327194214,y:.7830310463905334,z:-.006658440921455622},{x:.637792706489563,y:.9104999899864197,z:.014290250837802887},{x:.6549934148788452,y:.7748609185218811,z:-.0006672973395325243},{x:.6404005289077759,y:.801220715045929,z:-.0026642554439604282},{x:.6671456694602966,y:.8045546412467957,z:.013180811889469624},{x:.6107483506202698,y:.9680658578872681,z:.001778992242179811},{x:.6060343980789185,y:.744587242603302,z:-.024382334202528},{x:.6602751612663269,y:.8998945355415344,z:.0344940721988678},{x:.6463775038719177,y:.9262562394142151,z:.02617623284459114},{x:.6579852104187012,y:.8602304458618164,z:.021586716175079346},{x:.6926165223121643,y:.8053340315818787,z:.061075080186128616},{x:.6724731922149658,y:.8594399690628052,z:.03457934781908989},{x:.6975721716880798,y:.8183245062828064,z:.09300774335861206},{x:.6512877941131592,y:.8258221745491028,z:.006324059329926968},{x:.594887375831604,y:.7148372530937195,z:-.026898479089140892},{x:.6017440557479858,y:.7773507833480835,z:-.05312420800328255},{x:.6096571683883667,y:.7806998491287231,z:-.037646256387233734},{x:.5952993035316467,y:.7654367685317993,z:-.06398405134677887},{x:.5950021147727966,y:.6201304793357849,z:-.009297547861933708},{x:.6165438890457153,y:.6052900552749634,z:-.012455573305487633},{x:.6362661719322205,y:.6015968918800354,z:-.011649220250546932},{x:.6522727608680725,y:.6046400666236877,z:-.005903332494199276},{x:.6625409722328186,y:.6128141283988953,z:.0030042496509850025},{x:.6688099503517151,y:.6457712054252625,z:.026322703808546066},{x:.7013440728187561,y:.6893666386604309,z:.08984331786632538},{x:.6608623266220093,y:.6749406456947327,z:.0172116681933403},{x:.6482325196266174,y:.6823726296424866,z:.008881398476660252},{x:.6313265562057495,y:.6842025518417358,z:.0031308617908507586},{x:.6147016286849976,y:.6809731721878052,z:.0007630771724507213},{x:.6018834114074707,y:.6755372285842896,z:-.0008834321051836014},{x:.5925027132034302,y:.670681357383728,z:-.001968748401850462},{x:.700127363204956,y:.6871103644371033,z:.13980500400066376},{x:.6095665693283081,y:.7853189706802368,z:-.03074747882783413},{x:.5880423784255981,y:.7229287028312683,z:-.04691500961780548},{x:.5930182337760925,y:.7811514139175415,z:-.06398335844278336},{x:.5867722034454346,y:.7922660112380981,z:-.05794971063733101},{x:.5933279991149902,y:.7842848896980286,z:-.05714067071676254},{x:.6063535809516907,y:.7920218706130981,z:-.02590685710310936},{x:.5839452743530273,y:.794978141784668,z:-.0615212507545948},{x:.5828126072883606,y:.8000800013542175,z:-.0449722595512867},{x:.5909603834152222,y:.6541213393211365,z:.003991890233010054},{x:.5852181911468506,y:.6602938771247864,z:-.004428438376635313},{x:.5825737714767456,y:.6651063561439514,z:-.014345290139317513},{x:.6517343521118164,y:.6362385153770447,z:.012151890434324741},{x:.6615052819252014,y:.6281577944755554,z:.0123682152479887},{x:.4856873154640198,y:.6568945646286011,z:.000720038078725338},{x:.49988406896591187,y:.6547410488128662,z:.0006949726957827806},{x:.48438939452171326,y:.6392973065376282,z:.000705525919329375},{x:.47143134474754333,y:.6589511632919312,z:.0006980331381782889},{x:.48704618215560913,y:.6752797961235046,z:.0006921177846379578},{x:.6243702173233032,y:.640461802482605,z:-6592126737814397e-20},{x:.6390967965126038,y:.6385173797607422,z:-.00016105435497593135},{x:.6230536699295044,y:.6224825382232666,z:-.00016136496560648084},{x:.6095397472381592,y:.641917884349823,z:-.0001803556369850412},{x:.6250996589660645,y:.6586247682571411,z:-.0001785515050869435}]],faceBlendshapes:[{categories:[{index:0,score:5187174338061595e-21,categoryName:"_neutral",displayName:""},{index:1,score:.24521504342556,categoryName:"browDownLeft",displayName:""},{index:2,score:.1987743377685547,categoryName:"browDownRight",displayName:""},{index:3,score:.013400448486208916,categoryName:"browInnerUp",displayName:""},{index:4,score:.012361560948193073,categoryName:"browOuterUpLeft",displayName:""},{index:5,score:.019305096939206123,categoryName:"browOuterUpRight",displayName:""},{index:6,score:28426356948330067e-21,categoryName:"cheekPuff",displayName:""},{index:7,score:3.4500112633395474e-7,categoryName:"cheekSquintLeft",displayName:""},{index:8,score:4.83789051486383e-7,categoryName:"cheekSquintRight",displayName:""},{index:9,score:.07650448381900787,categoryName:"eyeBlinkLeft",displayName:""},{index:10,score:.05070012807846069,categoryName:"eyeBlinkRight",displayName:""},{index:11,score:.13978900015354156,categoryName:"eyeLookDownLeft",displayName:""},{index:12,score:.14198613166809082,categoryName:"eyeLookDownRight",displayName:""},{index:13,score:.2177766114473343,categoryName:"eyeLookInLeft",displayName:""},{index:14,score:.014739357866346836,categoryName:"eyeLookInRight",displayName:""},{index:15,score:.02361512929201126,categoryName:"eyeLookOutLeft",displayName:""},{index:16,score:.19679604470729828,categoryName:"eyeLookOutRight",displayName:""},{index:17,score:.04874616861343384,categoryName:"eyeLookUpLeft",displayName:""},{index:18,score:.049392376095056534,categoryName:"eyeLookUpRight",displayName:""},{index:19,score:.34944331645965576,categoryName:"eyeSquintLeft",displayName:""},{index:20,score:.2939716875553131,categoryName:"eyeSquintRight",displayName:""},{index:21,score:.005955042317509651,categoryName:"eyeWideLeft",displayName:""},{index:22,score:.006776117719709873,categoryName:"eyeWideRight",displayName:""},{index:23,score:16942436559475027e-21,categoryName:"jawForward",displayName:""},{index:24,score:.0045165494084358215,categoryName:"jawLeft",displayName:""},{index:25,score:.07803940027952194,categoryName:"jawOpen",displayName:""},{index:26,score:2090057751047425e-20,categoryName:"jawRight",displayName:""},{index:27,score:.06032035872340202,categoryName:"mouthClose",displayName:""},{index:28,score:.00228882092051208,categoryName:"mouthDimpleLeft",displayName:""},{index:29,score:.00781762320548296,categoryName:"mouthDimpleRight",displayName:""},{index:30,score:.0017093931091949344,categoryName:"mouthFrownLeft",displayName:""},{index:31,score:.0019319106359034777,categoryName:"mouthFrownRight",displayName:""},{index:32,score:8485237776767462e-20,categoryName:"mouthFunnel",displayName:""},{index:33,score:.0009051355300471187,categoryName:"mouthLeft",displayName:""},{index:34,score:.0003630454302765429,categoryName:"mouthLowerDownLeft",displayName:""},{index:35,score:.00017601238505449146,categoryName:"mouthLowerDownRight",displayName:""},{index:36,score:.12865161895751953,categoryName:"mouthPressLeft",displayName:""},{index:37,score:.20137207210063934,categoryName:"mouthPressRight",displayName:""},{index:38,score:.0022203284315764904,categoryName:"mouthPucker",displayName:""},{index:39,score:.0009096377179957926,categoryName:"mouthRight",displayName:""},{index:40,score:.34189721941947937,categoryName:"mouthRollLower",displayName:""},{index:41,score:.11409689486026764,categoryName:"mouthRollUpper",displayName:""},{index:42,score:.17172536253929138,categoryName:"mouthShrugLower",displayName:""},{index:43,score:.004038424696773291,categoryName:"mouthShrugUpper",displayName:""},{index:44,score:.00023205230536404997,categoryName:"mouthSmileLeft",displayName:""},{index:45,score:.00019313619122840464,categoryName:"mouthSmileRight",displayName:""},{index:46,score:.0018571305554360151,categoryName:"mouthStretchLeft",displayName:""},{index:47,score:.0023813238367438316,categoryName:"mouthStretchRight",displayName:""},{index:48,score:24323100660694763e-21,categoryName:"mouthUpperUpLeft",displayName:""},{index:49,score:3161552012898028e-20,categoryName:"mouthUpperUpRight",displayName:""},{index:50,score:1.08198406678639e-7,categoryName:"noseSneerLeft",displayName:""},{index:51,score:12652527630052646e-22,categoryName:"noseSneerRight",displayName:""}],headIndex:-1,headName:""}],facialTransformationMatrixes:[{rows:4,columns:4,data:[.9947517514228821,.10230544209480286,.0013679931871592999,0,-.10230997204780579,.9947447776794434,.003816320328041911,0,-.000970348424743861,-.0039362297393381596,.9999914169311523,0,2.8888821601867676,-7.808934211730957,-30.52109146118164,1]}]}},g$=(0,l.createContext)({}),v$={basePath:"https://cdn.jsdelivr.net/npm/@mediapipe/tasks-vision@0.10.8/wasm",options:{baseOptions:{modelAssetPath:"https://storage.googleapis.com/mediapipe-models/face_landmarker/face_landmarker/float16/1/face_landmarker.task",delegate:"GPU"},runningMode:"VIDEO",outputFaceBlendshapes:!0,outputFacialTransformationMatrixes:!0}};function y$(e){let{basePath:t=v$.basePath,options:r=v$.options,children:i}=e;const o=JSON.stringify(r),a=nv((async()=>{const{FilesetResolver:e,FaceLandmarker:i}=await n.e(540).then(n.bind(n,9540)),o=await e.forVisionTasks(t);return i.createFromOptions(o,r)}),[t,o]);return(0,l.useEffect)((()=>()=>{null==a||a.close(),iv([t,o])}),[a,t,o]),l.createElement(g$.Provider,{value:a},i)}function A$(){return(0,l.useContext)(g$)}function x$(e,t){return e.clone().add(t).multiplyScalar(.5)}function b$(e,t,n){const r=e.localToWorld(t);return n.worldToLocal(r)}const _$=(0,l.createContext)({}),w$=(0,l.forwardRef)(((e,t)=>{let{camera:n,autostart:r=!0,webcam:i=!0,webcamVideoTextureSrc:o,manualUpdate:a=!1,manualDetect:s=!1,onVideoFrame:c,smoothTime:u=.25,offset:h=!0,offsetScalar:d=80,eyes:f=!1,eyesAsOrigin:p=!0,depth:m=.15,debug:g=!1,facemesh:v,makeDefault:y}=e;var A,x;const b=cy((e=>e.scene)),_=cy((e=>e.camera)),w=cy((e=>e.set)),E=cy((e=>e.get)),S=n||_,C=(0,l.useRef)(null),M=(0,l.useRef)(null),[T]=(0,l.useState)((()=>new xa)),[I]=(0,l.useState)((()=>new vo)),[B]=(0,l.useState)((()=>new vo)),[P]=(0,l.useState)((()=>new vo)),[R]=(0,l.useState)((()=>new vo)),D=(0,l.useCallback)((()=>{T.parent=S.parent;const e=M.current;if(e){const{outerRef:t,eyeRightRef:n,eyeLeftRef:r}=e;if(n.current&&r.current){const{irisDirRef:e}=n.current,{irisDirRef:i}=r.current;e.current&&i.current&&t.current&&(I.copy(b$(e.current,new vo(0,0,0),t.current)),B.copy(b$(i.current,new vo(0,0,0),t.current)),T.position.copy(b$(t.current,x$(I,B),S.parent||b)),P.copy(b$(e.current,new vo(0,0,1),t.current)),R.copy(b$(i.current,new vo(0,0,1),t.current)),T.lookAt(t.current.localToWorld(x$(P,R))))}else t.current&&(T.position.copy(b$(t.current,new vo(0,0,0),S.parent||b)),T.lookAt(t.current.localToWorld(new vo(0,0,1))))}return T}),[S,B,R,I,P,b,T]),[O]=(0,l.useState)((()=>new xa)),k=(0,l.useCallback)((function(e,t){if(S){var n;if(null!==(n=t)&&void 0!==n||(t=D()),u>0){const n=1e-9;_I.damp3(O.position,t.position,u,e,void 0,void 0,n),_I.dampE(O.rotation,t.rotation,u,e,void 0,void 0,n)}else O.position.copy(t.position),O.rotation.copy(t.rotation);S.position.copy(O.position),S.rotation.copy(O.rotation)}}),[S,D,u,O.position,O.rotation]),[L,F]=(0,l.useState)(),z=A$(),U=(0,l.useCallback)(((e,t)=>{const n=null==z?void 0:z.detectForVideo(e,t);F(n)}),[z]);uy(((e,t)=>{a||k(t)}));const N=(0,l.useMemo)((()=>Object.assign(Object.create(Ci.prototype),{detect:U,computeTarget:D,update:k,facemeshApiRef:M,webcamApiRef:C,play:()=>{var e;null==(e=C.current)||null==(e=e.videoTextureApiRef.current)||e.texture.source.data.play()},pause:()=>{var e;null==(e=C.current)||null==(e=e.videoTextureApiRef.current)||e.texture.source.data.pause()}})),[U,D,k]);(0,l.useImperativeHandle)(t,(()=>N),[N]),(0,l.useEffect)((()=>{const e=e=>{s||U(e.texture.source.data,e.time),c&&c(e)};return N.addEventListener("videoFrame",e),()=>{N.removeEventListener("videoFrame",e)}}),[N,U,z,s,c]),(0,l.useEffect)((()=>{if(y){const e=E().controls;return w({controls:N}),()=>w({controls:e})}}),[y,N,E,w]);const j=null==L?void 0:L.faceLandmarks[0],G=null==L||null==(A=L.facialTransformationMatrixes)?void 0:A[0],Q=null==L||null==(x=L.faceBlendshapes)?void 0:x[0];return l.createElement(_$.Provider,{value:N},i&&l.createElement(l.Suspense,{fallback:null},l.createElement(S$,{ref:C,autostart:r,videoTextureSrc:o})),l.createElement(d$,tC({ref:M},v,{points:j,depth:m,facialTransformationMatrix:G,faceBlendshapes:Q,eyes:f,eyesAsOrigin:p,offset:h,offsetScalar:d,debug:g,"rotation-z":Math.PI,visible:g}),l.createElement("meshBasicMaterial",{side:Ke})))})),E$=()=>(0,l.useContext)(_$),S$=(0,l.forwardRef)(((e,t)=>{let{videoTextureSrc:n,autostart:r=!0}=e;const i=(0,l.useRef)(null),o=E$(),a=nv((async()=>n?Promise.resolve(null):await navigator.mediaDevices.getUserMedia({audio:!1,video:{facingMode:"user"}})),[n]);(0,l.useEffect)((()=>(o.dispatchEvent({type:"stream",stream:a}),()=>{null==a||a.getTracks().forEach((e=>e.stop())),iv([n])})),[a,o,n]);const s=(0,l.useMemo)((()=>({videoTextureApiRef:i})),[]);return(0,l.useImperativeHandle)(t,(()=>s),[s]),l.createElement(l.Suspense,{fallback:null},l.createElement(C$,{ref:i,src:n||a,start:r}))})),C$=(0,l.forwardRef)(((e,t)=>{let{src:n,start:r}=e;const i=_Q(n,{start:r}),o=i.source.data,a=E$(),s=(0,l.useCallback)((e=>{a.dispatchEvent({type:"videoFrame",texture:i,time:e})}),[i,a]);M$(o,s);const c=(0,l.useMemo)((()=>({texture:i})),[i]);return(0,l.useImperativeHandle)(t,(()=>c),[c]),l.createElement(l.Fragment,null)})),M$=(e,t)=>{(0,l.useEffect)((()=>{if(!e||!e.requestVideoFrameCallback)return;let n;return e.requestVideoFrameCallback((function r(){t(...arguments),n=e.requestVideoFrameCallback(r)})),()=>e.cancelVideoFrameCallback(n)}),[e,t])},T$=e=>{let{scrollToTop:o}=e;const a=ae();return(0,ov.jsxs)(ov.Fragment,{children:[(0,ov.jsxs)("header",{className:"App-header full-screen-header",children:[(0,ov.jsx)(Lw,{importedFiber:{...t,...i,...r},style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:-1},children:(0,ov.jsx)(eC,{control:"query",urlString:"https://www.shadergradient.co/customize?animate=on&axesHelper=off&bgColor1=%23000000&bgColor2=%23000000&brightness=2.5&cAzimuthAngle=60&cDistance=2.8&cPolarAngle=80&cameraZoom=24&color1=%230035e5&color2=%239694d6&color3=%23b66ed7&destination=onCanvas&embedMode=off&envPreset=dawn&format=gif&fov=30&frameRate=10&gizmoHelper=hide&grain=off&lightType=3d&pixelDensity=1.5&positionX=0&positionY=0&positionZ=0&range=enabled&rangeEnd=40&rangeStart=9&reflection=0.1&rotationX=60&rotationY=0&rotationZ=-60&shader=defaults&type=sphere&uAmplitude=0&uDensity=4.3&uFrequency=0&uSpeed=0.02&uStrength=1.1&uTime=9&wireframe=false&zoomOut=false"})}),(0,ov.jsxs)("div",{className:"home-page-header-text",children:[(0,ov.jsx)("h1",{children:"Protecting seniors from scams"}),(0,ov.jsx)("p",{children:"Welcome to your go-to resource for staying safe from online scams."})]}),(0,ov.jsx)("div",{class:"home-page-image-container",children:(0,ov.jsx)("img",{src:"/images/reallife_scenario/home_page1.jpg",alt:"home page img",className:"home-page-img"})}),(0,ov.jsx)("div",{className:"scroll-hint",children:(0,ov.jsx)("span",{children:"Scroll Down \u2193"})})]}),(0,ov.jsx)("main",{children:(0,ov.jsx)("section",{className:"Desc-section",children:(0,ov.jsxs)("div",{className:"hover-card-container",children:[(0,ov.jsx)("div",{className:"hover-card",children:(0,ov.jsxs)("div",{className:"hover-card-content",children:[(0,ov.jsxs)("div",{className:"hover-card-main",children:[(0,ov.jsx)("h3",{children:"Spot Scams Easily"}),(0,ov.jsx)("img",{src:n(8869),alt:"Spot Scams",style:{width:"160px",paddingBottom:"15px"}})]}),(0,ov.jsxs)("div",{className:"hover-card-description",children:[(0,ov.jsx)("p",{children:"\ud83d\udc40 Learn to identify scams with simple explanations and visual guides, so you know exactly what to watch out for."}),(0,ov.jsx)("button",{onClick:()=>a("/identifyScam"),children:"Get Started"})]})]})}),(0,ov.jsx)("div",{className:"hover-card",children:(0,ov.jsxs)("div",{className:"hover-card-content",children:[(0,ov.jsxs)("div",{className:"hover-card-main",children:[(0,ov.jsx)("h3",{children:"Report and Get Help"}),(0,ov.jsx)("img",{src:n(5263),alt:"Report and Get Help",style:{width:"130px",height:"180px"}})]}),(0,ov.jsxs)("div",{className:"hover-card-description",children:[(0,ov.jsx)("p",{children:"\ud83d\udea8 Fallen victim to a scam or suspect one? Use our tools to report it and get immediate guidance on what to do next."}),(0,ov.jsx)("button",{onClick:()=>a("/whatToDo"),children:"Get Started"})]})]})}),(0,ov.jsx)("div",{className:"hover-card",children:(0,ov.jsxs)("div",{className:"hover-card-content",children:[(0,ov.jsxs)("div",{className:"hover-card-main",children:[(0,ov.jsx)("h3",{children:"Practice Scam Detection"}),(0,ov.jsx)("img",{src:n(6525),alt:"Practice Scam Detection",style:{width:"100px",height:"120px"}})]}),(0,ov.jsxs)("div",{className:"hover-card-description",children:[(0,ov.jsx)("p",{children:"\ud83e\udde0 Test your scam-spotting skills with interactive exercises designed to boost your confidence in staying scam-free."}),(0,ov.jsx)("button",{onClick:()=>a("/quiz"),children:"Get Started"})]})]})}),(0,ov.jsx)("div",{className:"hover-card",children:(0,ov.jsxs)("div",{className:"hover-card-content",children:[(0,ov.jsxs)("div",{className:"hover-card-main",children:[(0,ov.jsx)("h3",{children:"Check Your Scam Risk"}),(0,ov.jsx)("img",{src:n(4448),alt:"Check Your Scam Risk",style:{width:"180px",height:"120px"}})]}),(0,ov.jsxs)("div",{className:"hover-card-description",children:[(0,ov.jsx)("p",{children:"\ud83d\udd12 Enter your details into our risk assessment tool to find out how vulnerable you are to scams and get tailored advice to protect yourself."}),(0,ov.jsx)("button",{onClick:()=>a("/riskAssessment"),children:"Get Started"})]})]})}),(0,ov.jsx)("div",{className:"hover-card",children:(0,ov.jsxs)("div",{className:"hover-card-content",children:[(0,ov.jsxs)("div",{className:"hover-card-main",children:[(0,ov.jsx)("h3",{children:"Verify Suspicious Messages"}),(0,ov.jsx)("img",{src:n(8562),alt:"Verify Suspicious Messages",style:{width:"140px",height:"110px"}})]}),(0,ov.jsxs)("div",{className:"hover-card-description",children:[(0,ov.jsx)("p",{children:"\ud83d\udce7 Not sure if an email, text, or message is a scam? Use our verification tool to put your doubts to rest."}),(0,ov.jsx)("button",{onClick:()=>a("/checkScam"),children:"Get Started"})]})]})})]})})})]})};var I$=n(9686),B$=n.n(I$),P$=n(1629),R$=n.n(P$),D$=n(6604),O$=n.n(D$),k$=n(3097),L$=n.n(k$),F$=n(7424),z$=n.n(F$),U$=n(9889),N$=n.n(U$);function j$(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=j$(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}const G$=function(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=j$(e))&&(r&&(r+=" "),r+=t);return r};var Q$=!0,H$="Invariant failed";function V$(e,t){if(!e){if(Q$)throw new Error(H$);var n="function"===typeof t?t():t,r=n?"".concat(H$,": ").concat(n):H$;throw new Error(r)}}var W$=n(620),q$=n.n(W$),X$=n(6686),Y$=n.n(X$),J$=n(9062),K$=n(5268),Z$=n.n(K$),$$=n(9160),e0=n.n($$),t0=function(e){return 0===e?0:e>0?1:-1},n0=function(e){return q$()(e)&&e.indexOf("%")===e.length-1},r0=function(e){return e0()(e)&&!Z$()(e)},i0=function(e){return r0(e)||q$()(e)},o0=0,a0=function(e){var t=++o0;return"".concat(e||"").concat(t)},s0=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!r0(e)&&!q$()(e))return r;if(n0(e)){var o=e.indexOf("%");n=t*parseFloat(e.slice(0,o))/100}else n=+e;return Z$()(n)&&(n=r),i&&n>t&&(n=t),n},l0=function(e){if(!e)return null;var t=Object.keys(e);return t&&t.length?e[t[0]]:null},c0=function(e,t){return r0(e)&&r0(t)?function(n){return e+n*(t-e)}:function(){return t}};function u0(e,t,n){return e&&e.length?e.find((function(e){return e&&("function"===typeof t?t(e):L$()(e,t))===n})):null}function h0(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function d0(e){return d0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d0(e)}var f0=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],p0=["points","pathLength"],m0={svg:["viewBox","children"],polygon:p0,polyline:p0},g0=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],v0=function(e,t){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,l.isValidElement)(e)&&(n=e.props),!Y$()(n))return null;var r={};return Object.keys(n).forEach((function(e){g0.includes(e)&&(r[e]=t||function(t){return n[e](n,t)})})),r},y0=function(e,t,n){if(!Y$()(e)||"object"!==d0(e))return null;var r=null;return Object.keys(e).forEach((function(i){var o=e[i];g0.includes(i)&&"function"===typeof o&&(r||(r={}),r[i]=function(e,t,n){return function(r){return e(t,n,r),null}}(o,t,n))})),r},A0=["children"],x0=["children"];function b0(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var _0={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},w0=function(e){return"string"===typeof e?e:e?e.displayName||e.name||"Component":""},E0=null,S0=null,C0=function e(t){if(t===E0&&Array.isArray(S0))return S0;var n=[];return l.Children.forEach(t,(function(t){B$()(t)||((0,J$.isFragment)(t)?n=n.concat(e(t.props.children)):n.push(t))})),S0=n,E0=t,n};function M0(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map((function(e){return w0(e)})):[w0(t)],C0(e).forEach((function(e){var t=L$()(e,"type.displayName")||L$()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)})),n}function T0(e,t){var n=M0(e,t);return n&&n[0]}var I0=function(e){if(!e||!e.props)return!1;var t=e.props,n=t.width,r=t.height;return!(!r0(n)||n<=0||!r0(r)||r<=0)},B0=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],P0=function(e){return e&&e.type&&q$()(e.type)&&B0.indexOf(e.type)>=0},R0=function(e,t,n){if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,l.isValidElement)(e)&&(r=e.props),!Y$()(r))return null;var i={};return Object.keys(r).forEach((function(e){var o;(function(e,t,n,r){var i,o=null!==(i=null===m0||void 0===m0?void 0:m0[r])&&void 0!==i?i:[];return!R$()(e)&&(r&&o.includes(t)||f0.includes(t))||n&&g0.includes(t)})(null===(o=r)||void 0===o?void 0:o[e],e,t,n)&&(i[e]=r[e])})),i},D0=function e(t,n){if(t===n)return!0;var r=l.Children.count(t);if(r!==l.Children.count(n))return!1;if(0===r)return!0;if(1===r)return O0(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var i=0;i<r;i++){var o=t[i],a=n[i];if(Array.isArray(o)||Array.isArray(a)){if(!e(o,a))return!1}else if(!O0(o,a))return!1}return!0},O0=function(e,t){if(B$()(e)&&B$()(t))return!0;if(!B$()(e)&&!B$()(t)){var n=e.props||{},r=n.children,i=b0(n,A0),o=t.props||{},a=o.children,s=b0(o,x0);return r&&a?h0(i,s)&&D0(r,a):!r&&!a&&h0(i,s)}return!1},k0=function(e,t){var n=[],r={};return C0(e).forEach((function(e,i){if(P0(e))n.push(e);else if(e){var o=w0(e.type),a=t[o]||{},s=a.handler,l=a.once;if(s&&(!l||!r[o])){var c=s(e,o,i);n.push(c),r[o]=!0}}})),n},L0=["children","width","height","viewBox","className","style","title","desc"];function F0(){return F0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F0.apply(this,arguments)}function z0(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function U0(e){var t=e.children,n=e.width,r=e.height,i=e.viewBox,o=e.className,a=e.style,s=e.title,c=e.desc,u=z0(e,L0),h=i||{width:n,height:r,x:0,y:0},d=G$("recharts-surface",o);return l.createElement("svg",F0({},R0(u,!0,"svg"),{className:d,width:n,height:r,style:a,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height)}),l.createElement("title",null,s),l.createElement("desc",null,c),t)}var N0=["children","className"];function j0(){return j0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j0.apply(this,arguments)}function G0(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Q0=l.forwardRef((function(e,t){var n=e.children,r=e.className,i=G0(e,N0),o=G$("recharts-layer",r);return l.createElement("g",j0({className:o},R0(i,!0),{ref:t}),n)}));function H0(e){return H0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H0(e)}function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V0.apply(this,arguments)}function W0(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return q0(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return q0(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q0(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X0(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Y0(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X0(Object(n),!0).forEach((function(t){J0(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X0(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function J0(e,t,n){return t=function(e){var t=function(e,t){if("object"!=H0(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=H0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==H0(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K0(e){return Array.isArray(e)&&i0(e[0])&&i0(e[1])?e.join(" ~ "):e}var Z0=function(e){var t=e.separator,n=void 0===t?" : ":t,r=e.contentStyle,i=void 0===r?{}:r,o=e.itemStyle,a=void 0===o?{}:o,s=e.labelStyle,c=void 0===s?{}:s,u=e.payload,h=e.formatter,d=e.itemSorter,f=e.wrapperClassName,p=e.labelClassName,m=e.label,g=e.labelFormatter,v=e.accessibilityLayer,y=void 0!==v&&v,A=Y0({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),x=Y0({margin:0},c),b=!B$()(m),_=b?m:"",w=G$("recharts-default-tooltip",f),E=G$("recharts-tooltip-label",p);b&&g&&void 0!==u&&null!==u&&(_=g(m,u));var S=y?{role:"status","aria-live":"assertive"}:{};return l.createElement("div",V0({className:w,style:A},S),l.createElement("p",{className:E,style:x},l.isValidElement(_)?_:"".concat(_)),function(){if(u&&u.length){var e=(d?z$()(u,d):u).map((function(e,t){if("none"===e.type)return null;var r=Y0({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},a),i=e.formatter||h||K0,o=e.value,s=e.name,c=o,d=s;if(i&&null!=c&&null!=d){var f=i(o,s,e,t,u);if(Array.isArray(f)){var p=W0(f,2);c=p[0],d=p[1]}else c=f}return l.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(t),style:r},i0(d)?l.createElement("span",{className:"recharts-tooltip-item-name"},d):null,i0(d)?l.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,l.createElement("span",{className:"recharts-tooltip-item-value"},c),l.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))}));return l.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null}())};function $0(e){return $0="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$0(e)}function e1(e,t,n){return t=function(e){var t=function(e,t){if("object"!=$0(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$0(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$0(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var t1="recharts-tooltip-wrapper",n1={visibility:"hidden"};function r1(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return G$(t1,e1(e1(e1(e1({},"".concat(t1,"-right"),r0(n)&&t&&r0(t.x)&&n>=t.x),"".concat(t1,"-left"),r0(n)&&t&&r0(t.x)&&n<t.x),"".concat(t1,"-bottom"),r0(r)&&t&&r0(t.y)&&r>=t.y),"".concat(t1,"-top"),r0(r)&&t&&r0(t.y)&&r<t.y))}function i1(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,i=e.offsetTopLeft,o=e.position,a=e.reverseDirection,s=e.tooltipDimension,l=e.viewBox,c=e.viewBoxDimension;if(o&&r0(o[r]))return o[r];var u=n[r]-s-i,h=n[r]+i;return t[r]?a[r]?u:h:a[r]?u<l[r]?Math.max(h,l[r]):Math.max(u,l[r]):h+s>l[r]+c?Math.max(u,l[r]):Math.max(h,l[r])}function o1(e){return o1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o1(e)}function a1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a1(Object(n),!0).forEach((function(t){p1(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m1(r.key),r)}}function c1(e,t,n){return t=h1(t),function(e,t){if(t&&("object"===o1(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return d1(e)}(e,u1()?Reflect.construct(t,n||[],h1(e).constructor):t.apply(e,n))}function u1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(u1=function(){return!!e})()}function h1(e){return h1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},h1(e)}function d1(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f1(e,t){return f1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},f1(e,t)}function p1(e,t,n){return(t=m1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m1(e){var t=function(e,t){if("object"!=o1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=o1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o1(t)?t:String(t)}var g1=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return p1(d1(e=c1(this,t,[].concat(r))),"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),p1(d1(e),"handleKeyDown",(function(t){var n,r,i,o;"Escape"===t.key&&e.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(n=null===(r=e.props.coordinate)||void 0===r?void 0:r.x)&&void 0!==n?n:0,y:null!==(i=null===(o=e.props.coordinate)||void 0===o?void 0:o.y)&&void 0!==i?i:0}})})),e}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&f1(e,t)}(t,e),n=t,r=[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();(Math.abs(e.width-this.state.lastBoundingBox.width)>1||Math.abs(e.height-this.state.lastBoundingBox.height)>1)&&this.setState({lastBoundingBox:{width:e.width,height:e.height}})}else-1===this.state.lastBoundingBox.width&&-1===this.state.lastBoundingBox.height||this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var e,t;this.props.active&&this.updateBBox(),this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}},{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,i=t.animationDuration,o=t.animationEasing,a=t.children,s=t.coordinate,c=t.hasPayload,u=t.isAnimationActive,h=t.offset,d=t.position,f=t.reverseDirection,p=t.useTranslate3d,m=t.viewBox,g=t.wrapperStyle,v=function(e){var t,n,r=e.allowEscapeViewBox,i=e.coordinate,o=e.offsetTopLeft,a=e.position,s=e.reverseDirection,l=e.tooltipBox,c=e.useTranslate3d,u=e.viewBox;return{cssProperties:l.height>0&&l.width>0&&i?function(e){var t=e.translateX,n=e.translateY;return{transform:e.useTranslate3d?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:t=i1({allowEscapeViewBox:r,coordinate:i,key:"x",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.width,viewBox:u,viewBoxDimension:u.width}),translateY:n=i1({allowEscapeViewBox:r,coordinate:i,key:"y",offsetTopLeft:o,position:a,reverseDirection:s,tooltipDimension:l.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:c}):n1,cssClasses:r1({translateX:t,translateY:n,coordinate:i})}}({allowEscapeViewBox:r,coordinate:s,offsetTopLeft:h,position:d,reverseDirection:f,tooltipBox:this.state.lastBoundingBox,useTranslate3d:p,viewBox:m}),y=v.cssClasses,A=v.cssProperties,x=s1(s1({transition:u&&n?"transform ".concat(i,"ms ").concat(o):void 0},A),{},{pointerEvents:"none",visibility:!this.state.dismissed&&n&&c?"visible":"hidden",position:"absolute",top:0,left:0},g);return l.createElement("div",{tabIndex:-1,className:y,style:x,ref:function(t){e.wrapperNode=t}},a)}}],r&&l1(n.prototype,r),i&&l1(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent),v1={isSsr:!("undefined"!==typeof window&&window.document&&window.document.createElement&&window.setTimeout),get:function(e){return v1[e]},set:function(e,t){if("string"===typeof e)v1[e]=t;else{var n=Object.keys(e);n&&n.length&&n.forEach((function(t){v1[t]=e[t]}))}}},y1=n(977),A1=n.n(y1);function x1(e,t,n){return!0===t?A1()(e,n):R$()(t)?A1()(e,t):e}function b1(e){return b1="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b1(e)}function _1(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w1(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_1(Object(n),!0).forEach((function(t){I1(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_1(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E1(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B1(r.key),r)}}function S1(e,t,n){return t=M1(t),function(e,t){if(t&&("object"===b1(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,C1()?Reflect.construct(t,n||[],M1(e).constructor):t.apply(e,n))}function C1(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(C1=function(){return!!e})()}function M1(e){return M1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},M1(e)}function T1(e,t){return T1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T1(e,t)}function I1(e,t,n){return(t=B1(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B1(e){var t=function(e,t){if("object"!=b1(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=b1(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b1(t)?t:String(t)}function P1(e){return e.dataKey}var R1=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),S1(this,t,arguments)}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T1(e,t)}(t,e),n=t,r=[{key:"render",value:function(){var e=this,t=this.props,n=t.active,r=t.allowEscapeViewBox,i=t.animationDuration,o=t.animationEasing,a=t.content,s=t.coordinate,c=t.filterNull,u=t.isAnimationActive,h=t.offset,d=t.payload,f=t.payloadUniqBy,p=t.position,m=t.reverseDirection,g=t.useTranslate3d,v=t.viewBox,y=t.wrapperStyle,A=null!==d&&void 0!==d?d:[];c&&A.length&&(A=x1(d.filter((function(t){return null!=t.value&&(!0!==t.hide||e.props.includeHidden)})),f,P1));var x=A.length>0;return l.createElement(g1,{allowEscapeViewBox:r,animationDuration:i,animationEasing:o,isAnimationActive:u,active:n,coordinate:s,hasPayload:x,offset:h,position:p,reverseDirection:m,useTranslate3d:g,viewBox:v,wrapperStyle:y},function(e,t){return l.isValidElement(e)?l.cloneElement(e,t):"function"===typeof e?l.createElement(e,t):l.createElement(Z0,t)}(a,w1(w1({},this.props),{},{payload:A})))}}],r&&E1(n.prototype,r),i&&E1(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);I1(R1,"displayName","Tooltip"),I1(R1,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!v1.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var D1=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]},O1=n(643),k1=n.n(O1);Math.abs,Math.atan2;const L1=Math.cos,F1=(Math.max,Math.min,Math.sin),z1=Math.sqrt,U1=Math.PI,N1=2*U1;const j1={draw(e,t){const n=z1(t/U1);e.moveTo(n,0),e.arc(0,0,n,0,N1)}},G1={draw(e,t){const n=z1(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},Q1=z1(1/3),H1=2*Q1,V1={draw(e,t){const n=z1(t/H1),r=n*Q1;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},W1={draw(e,t){const n=z1(t),r=-n/2;e.rect(r,r,n,n)}},q1=F1(U1/10)/F1(7*U1/10),X1=F1(N1/10)*q1,Y1=-L1(N1/10)*q1,J1={draw(e,t){const n=z1(.8908130915292852*t),r=X1*n,i=Y1*n;e.moveTo(0,-n),e.lineTo(r,i);for(let o=1;o<5;++o){const t=N1*o/5,a=L1(t),s=F1(t);e.lineTo(s*n,-a*n),e.lineTo(a*r-s*i,s*r+a*i)}e.closePath()}},K1=z1(3),Z1={draw(e,t){const n=-z1(t/(3*K1));e.moveTo(0,2*n),e.lineTo(-K1*n,-n),e.lineTo(K1*n,-n),e.closePath()}},$1=-.5,e2=z1(3)/2,t2=1/z1(12),n2=3*(t2/2+1),r2={draw(e,t){const n=z1(t/n2),r=n/2,i=n*t2,o=r,a=n*t2+n,s=-o,l=a;e.moveTo(r,i),e.lineTo(o,a),e.lineTo(s,l),e.lineTo($1*r-e2*i,e2*r+$1*i),e.lineTo($1*o-e2*a,e2*o+$1*a),e.lineTo($1*s-e2*l,e2*s+$1*l),e.lineTo($1*r+e2*i,$1*i-e2*r),e.lineTo($1*o+e2*a,$1*a-e2*o),e.lineTo($1*s+e2*l,$1*l-e2*s),e.closePath()}};function i2(e){return function(){return e}}const o2=Math.PI,a2=2*o2,s2=1e-6,l2=a2-s2;function c2(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class u2{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?c2:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return c2;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,t){this._append`L${this._x1=+e},${this._y1=+t}`}quadraticCurveTo(e,t,n,r){this._append`Q${+e},${+t},${this._x1=+n},${this._y1=+r}`}bezierCurveTo(e,t,n,r,i,o){this._append`C${+e},${+t},${+n},${+r},${this._x1=+i},${this._y1=+o}`}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error(`negative radius: ${i}`);let o=this._x1,a=this._y1,s=n-e,l=r-t,c=o-e,u=a-t,h=c*c+u*u;if(null===this._x1)this._append`M${this._x1=e},${this._y1=t}`;else if(h>s2)if(Math.abs(u*s-l*c)>s2&&i){let d=n-o,f=r-a,p=s*s+l*l,m=d*d+f*f,g=Math.sqrt(p),v=Math.sqrt(h),y=i*Math.tan((o2-Math.acos((p+h-m)/(2*g*v)))/2),A=y/v,x=y/g;Math.abs(A-1)>s2&&this._append`L${e+A*c},${t+A*u}`,this._append`A${i},${i},0,0,${+(u*d>c*f)},${this._x1=e+x*s},${this._y1=t+x*l}`}else this._append`L${this._x1=e},${this._y1=t}`;else;}arc(e,t,n,r,i,o){if(e=+e,t=+t,o=!!o,(n=+n)<0)throw new Error(`negative radius: ${n}`);let a=n*Math.cos(r),s=n*Math.sin(r),l=e+a,c=t+s,u=1^o,h=o?r-i:i-r;null===this._x1?this._append`M${l},${c}`:(Math.abs(this._x1-l)>s2||Math.abs(this._y1-c)>s2)&&this._append`L${l},${c}`,n&&(h<0&&(h=h%a2+a2),h>l2?this._append`A${n},${n},0,1,${u},${e-a},${t-s}A${n},${n},0,1,${u},${this._x1=l},${this._y1=c}`:h>s2&&this._append`A${n},${n},0,${+(h>=o2)},${u},${this._x1=e+n*Math.cos(i)},${this._y1=t+n*Math.sin(i)}`)}rect(e,t,n,r){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${n=+n}v${+r}h${-n}Z`}toString(){return this._}}function h2(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError(`invalid digits: ${n}`);t=e}return e},()=>new u2(t)}u2.prototype;z1(3),z1(3);function d2(e){return d2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d2(e)}var f2=["type","size","sizeType"];function p2(){return p2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},p2.apply(this,arguments)}function m2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m2(Object(n),!0).forEach((function(t){v2(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v2(e,t,n){return t=function(e){var t=function(e,t){if("object"!=d2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d2(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y2(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var A2={symbolCircle:j1,symbolCross:G1,symbolDiamond:V1,symbolSquare:W1,symbolStar:J1,symbolTriangle:Z1,symbolWye:r2},x2=Math.PI/180,b2=function(e){var t=e.type,n=void 0===t?"circle":t,r=e.size,i=void 0===r?64:r,o=e.sizeType,a=void 0===o?"area":o,s=g2(g2({},y2(e,f2)),{},{type:n,size:i,sizeType:a}),c=s.className,u=s.cx,h=s.cy,d=R0(s,!0);return u===+u&&h===+h&&i===+i?l.createElement("path",p2({},d,{className:G$("recharts-symbols",c),transform:"translate(".concat(u,", ").concat(h,")"),d:function(){var e=function(e){var t="symbol".concat(k1()(e));return A2[t]||j1}(n),t=function(e,t){let n=null,r=h2(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"===typeof e?e:i2(e||j1),t="function"===typeof t?t:i2(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:i2(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:i2(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e).size(function(e,t,n){if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*x2;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.pow(Math.tan(r),2));case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}}(i,a,n));return t()}()})):null};function _2(e){return _2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_2(e)}function w2(){return w2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w2.apply(this,arguments)}function E2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P2(r.key),r)}}function C2(e,t,n){return t=T2(t),function(e,t){if(t&&("object"===_2(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,M2()?Reflect.construct(t,n||[],T2(e).constructor):t.apply(e,n))}function M2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(M2=function(){return!!e})()}function T2(e){return T2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},T2(e)}function I2(e,t){return I2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},I2(e,t)}function B2(e,t,n){return(t=P2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P2(e){var t=function(e,t){if("object"!=_2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=_2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==_2(t)?t:String(t)}b2.registerSymbol=function(e,t){A2["symbol".concat(k1()(e))]=t};var R2=32,D2=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),C2(this,t,arguments)}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&I2(e,t)}(t,e),n=t,r=[{key:"renderIcon",value:function(e){var t=this.props.inactiveColor,n=16,r=R2/6,i=R2/3,o=e.inactive?t:e.color;if("plainline"===e.type)return l.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:n,x2:R2,y2:n,className:"recharts-legend-icon"});if("line"===e.type)return l.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(n,"h").concat(i,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(2*i,",").concat(n,"\n            H").concat(R2,"M").concat(2*i,",").concat(n,"\n            A").concat(r,",").concat(r,",0,1,1,").concat(i,",").concat(n),className:"recharts-legend-icon"});if("rect"===e.type)return l.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(R2,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(l.isValidElement(e.legendIcon)){var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E2(Object(n),!0).forEach((function(t){B2(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e);return delete a.legendIcon,l.cloneElement(e.legendIcon,a)}return l.createElement(b2,{fill:o,cx:n,cy:n,size:R2,sizeType:"diameter",type:e.type})}},{key:"renderItems",value:function(){var e=this,t=this.props,n=t.payload,r=t.iconSize,i=t.layout,o=t.formatter,a=t.inactiveColor,s={x:0,y:0,width:R2,height:R2},c={display:"horizontal"===i?"inline-block":"block",marginRight:10},u={display:"inline-block",verticalAlign:"middle",marginRight:4};return n.map((function(t,n){var i=t.formatter||o,h=G$(B2(B2({"recharts-legend-item":!0},"legend-item-".concat(n),!0),"inactive",t.inactive));if("none"===t.type)return null;var d=R$()(t.value)?null:t.value;D1(!R$()(t.value),'The name property is also required when using a function for the dataKey of a chart\'s cartesian components. Ex: <Bar name="Name of my Data"/>');var f=t.inactive?a:t.color;return l.createElement("li",w2({className:h,style:c,key:"legend-item-".concat(n)},y0(e.props,t,n)),l.createElement(U0,{width:r,height:r,viewBox:s,style:u},e.renderIcon(t)),l.createElement("span",{className:"recharts-legend-item-text",style:{color:f}},i?i(d,t,n):d))}))}},{key:"render",value:function(){var e=this.props,t=e.payload,n=e.layout,r=e.align;if(!t||!t.length)return null;var i={padding:0,margin:0,textAlign:"horizontal"===n?r:"left"};return l.createElement("ul",{className:"recharts-default-legend",style:i},this.renderItems())}}],r&&S2(n.prototype,r),i&&S2(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);function O2(e){return O2="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},O2(e)}B2(D2,"displayName","Legend"),B2(D2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var k2=["ref"];function L2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F2(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L2(Object(n),!0).forEach((function(t){H2(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L2(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z2(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,V2(r.key),r)}}function U2(e,t,n){return t=j2(t),function(e,t){if(t&&("object"===O2(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G2(e)}(e,N2()?Reflect.construct(t,n||[],j2(e).constructor):t.apply(e,n))}function N2(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(N2=function(){return!!e})()}function j2(e){return j2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},j2(e)}function G2(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Q2(e,t){return Q2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Q2(e,t)}function H2(e,t,n){return(t=V2(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V2(e){var t=function(e,t){if("object"!=O2(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=O2(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==O2(t)?t:String(t)}function W2(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function q2(e){return e.value}var X2=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return H2(G2(e=U2(this,t,[].concat(r))),"lastBoundingBox",{width:-1,height:-1}),e}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Q2(e,t)}(t,e),n=t,r=[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var e=this.wrapperNode.getBoundingClientRect();return e.height=this.wrapperNode.offsetHeight,e.width=this.wrapperNode.offsetWidth,e}return null}},{key:"updateBBox",value:function(){var e=this.props.onBBoxUpdate,t=this.getBBox();t?(Math.abs(t.width-this.lastBoundingBox.width)>1||Math.abs(t.height-this.lastBoundingBox.height)>1)&&(this.lastBoundingBox.width=t.width,this.lastBoundingBox.height=t.height,e&&e(t)):-1===this.lastBoundingBox.width&&-1===this.lastBoundingBox.height||(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,e&&e(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?F2({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(e){var t,n,r=this.props,i=r.layout,o=r.align,a=r.verticalAlign,s=r.margin,l=r.chartWidth,c=r.chartHeight;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(t="center"===o&&"vertical"===i?{left:((l||0)-this.getBBoxSnapshot().width)/2}:"right"===o?{right:s&&s.right||0}:{left:s&&s.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(n="middle"===a?{top:((c||0)-this.getBBoxSnapshot().height)/2}:"bottom"===a?{bottom:s&&s.bottom||0}:{top:s&&s.top||0}),F2(F2({},t),n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.content,r=t.width,i=t.height,o=t.wrapperStyle,a=t.payloadUniqBy,s=t.payload,c=F2(F2({position:"absolute",width:r||"auto",height:i||"auto"},this.getDefaultPosition(o)),o);return l.createElement("div",{className:"recharts-legend-wrapper",style:c,ref:function(t){e.wrapperNode=t}},function(e,t){if(l.isValidElement(e))return l.cloneElement(e,t);if("function"===typeof e)return l.createElement(e,t);t.ref;var n=W2(t,k2);return l.createElement(D2,n)}(n,F2(F2({},this.props),{},{payload:x1(s,a,q2)})))}}],i=[{key:"getWithHeight",value:function(e,t){var n=e.props.layout;return"vertical"===n&&r0(e.props.height)?{height:e.props.height}:"horizontal"===n?{width:e.props.width||t}:null}}],r&&z2(n.prototype,r),i&&z2(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);function Y2(){return Y2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y2.apply(this,arguments)}H2(X2,"displayName","Legend"),H2(X2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var J2=function(e){var t=e.cx,n=e.cy,r=e.r,i=e.className,o=G$("recharts-dot",i);return t===+t&&n===+n&&r===+r?l.createElement("circle",Y2({},R0(e,!1),v0(e),{className:o,cx:t,cy:n,r:r})):null},K2=Object.getOwnPropertyNames,Z2=Object.getOwnPropertySymbols,$2=Object.prototype.hasOwnProperty;function e3(e,t){return function(n,r,i){return e(n,r,i)&&t(n,r,i)}}function t3(e){return function(t,n,r){if(!t||!n||"object"!==typeof t||"object"!==typeof n)return e(t,n,r);var i=r.cache,o=i.get(t),a=i.get(n);if(o&&a)return o===n&&a===t;i.set(t,n),i.set(n,t);var s=e(t,n,r);return i.delete(t),i.delete(n),s}}function n3(e){return K2(e).concat(Z2(e))}var r3=Object.hasOwn||function(e,t){return $2.call(e,t)};function i3(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var o3="_owner",a3=Object.getOwnPropertyDescriptor,s3=Object.keys;function l3(e,t,n){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function c3(e,t){return i3(e.getTime(),t.getTime())}function u3(e,t,n){if(e.size!==t.size)return!1;for(var r,i,o={},a=e.entries(),s=0;(r=a.next())&&!r.done;){for(var l=t.entries(),c=!1,u=0;(i=l.next())&&!i.done;){var h=r.value,d=h[0],f=h[1],p=i.value,m=p[0],g=p[1];c||o[u]||!(c=n.equals(d,m,s,u,e,t,n)&&n.equals(f,g,d,m,e,t,n))||(o[u]=!0),u++}if(!c)return!1;s++}return!0}function h3(e,t,n){var r,i=s3(e),o=i.length;if(s3(t).length!==o)return!1;for(;o-- >0;){if((r=i[o])===o3&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof)return!1;if(!r3(t,r)||!n.equals(e[r],t[r],r,r,e,t,n))return!1}return!0}function d3(e,t,n){var r,i,o,a=n3(e),s=a.length;if(n3(t).length!==s)return!1;for(;s-- >0;){if((r=a[s])===o3&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof)return!1;if(!r3(t,r))return!1;if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;if(i=a3(e,r),o=a3(t,r),(i||o)&&(!i||!o||i.configurable!==o.configurable||i.enumerable!==o.enumerable||i.writable!==o.writable))return!1}return!0}function f3(e,t){return i3(e.valueOf(),t.valueOf())}function p3(e,t){return e.source===t.source&&e.flags===t.flags}function m3(e,t,n){if(e.size!==t.size)return!1;for(var r,i,o={},a=e.values();(r=a.next())&&!r.done;){for(var s=t.values(),l=!1,c=0;(i=s.next())&&!i.done;)l||o[c]||!(l=n.equals(r.value,i.value,r.value,i.value,e,t,n))||(o[c]=!0),c++;if(!l)return!1}return!0}function g3(e,t){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}var v3="[object Arguments]",y3="[object Boolean]",A3="[object Date]",x3="[object Map]",b3="[object Number]",_3="[object Object]",w3="[object RegExp]",E3="[object Set]",S3="[object String]",C3=Array.isArray,M3="function"===typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView:null,T3=Object.assign,I3=Object.prototype.toString.call.bind(Object.prototype.toString);var B3=P3();P3({strict:!0}),P3({circular:!0}),P3({circular:!0,strict:!0}),P3({createInternalComparator:function(){return i3}}),P3({strict:!0,createInternalComparator:function(){return i3}}),P3({circular:!0,createInternalComparator:function(){return i3}}),P3({circular:!0,createInternalComparator:function(){return i3},strict:!0});function P3(e){void 0===e&&(e={});var t,n=e.circular,r=void 0!==n&&n,i=e.createInternalComparator,o=e.createState,a=e.strict,s=void 0!==a&&a,l=function(e){var t=e.circular,n=e.createCustomConfig,r=e.strict,i={areArraysEqual:r?d3:l3,areDatesEqual:c3,areMapsEqual:r?e3(u3,d3):u3,areObjectsEqual:r?d3:h3,arePrimitiveWrappersEqual:f3,areRegExpsEqual:p3,areSetsEqual:r?e3(m3,d3):m3,areTypedArraysEqual:r?d3:g3};if(n&&(i=T3({},i,n(i))),t){var o=t3(i.areArraysEqual),a=t3(i.areMapsEqual),s=t3(i.areObjectsEqual),l=t3(i.areSetsEqual);i=T3({},i,{areArraysEqual:o,areMapsEqual:a,areObjectsEqual:s,areSetsEqual:l})}return i}(e),c=function(e){var t=e.areArraysEqual,n=e.areDatesEqual,r=e.areMapsEqual,i=e.areObjectsEqual,o=e.arePrimitiveWrappersEqual,a=e.areRegExpsEqual,s=e.areSetsEqual,l=e.areTypedArraysEqual;return function(e,c,u){if(e===c)return!0;if(null==e||null==c||"object"!==typeof e||"object"!==typeof c)return e!==e&&c!==c;var h=e.constructor;if(h!==c.constructor)return!1;if(h===Object)return i(e,c,u);if(C3(e))return t(e,c,u);if(null!=M3&&M3(e))return l(e,c,u);if(h===Date)return n(e,c,u);if(h===RegExp)return a(e,c,u);if(h===Map)return r(e,c,u);if(h===Set)return s(e,c,u);var d=I3(e);return d===A3?n(e,c,u):d===w3?a(e,c,u):d===x3?r(e,c,u):d===E3?s(e,c,u):d===_3?"function"!==typeof e.then&&"function"!==typeof c.then&&i(e,c,u):d===v3?i(e,c,u):(d===y3||d===b3||d===S3)&&o(e,c,u)}}(l),u=i?i(c):(t=c,function(e,n,r,i,o,a,s){return t(e,n,s)});return function(e){var t=e.circular,n=e.comparator,r=e.createState,i=e.equals,o=e.strict;if(r)return function(e,a){var s=r(),l=s.cache,c=void 0===l?t?new WeakMap:void 0:l,u=s.meta;return n(e,a,{cache:c,equals:i,meta:u,strict:o})};if(t)return function(e,t){return n(e,t,{cache:new WeakMap,equals:i,meta:void 0,strict:o})};var a={cache:void 0,equals:i,meta:void 0,strict:o};return function(e,t){return n(e,t,a)}}({circular:r,comparator:c,createState:o,equals:u,strict:s})}function R3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=-1;requestAnimationFrame((function r(i){n<0&&(n=i),i-n>t?(e(i),n=-1):function(e){"undefined"!==typeof requestAnimationFrame&&requestAnimationFrame(e)}(r)}))}function D3(e){return D3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D3(e)}function O3(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return k3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return k3(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function L3(){var e=function(){return null},t=!1,n=function n(r){if(!t){if(Array.isArray(r)){if(!r.length)return;var i=O3(r),o=i[0],a=i.slice(1);return"number"===typeof o?void R3(n.bind(null,a),o):(n(o),void R3(n.bind(null,a)))}"object"===D3(r)&&e(r),"function"===typeof r&&r()}};return{stop:function(){t=!0},start:function(e){t=!1,n(e)},subscribe:function(t){return e=t,function(){e=function(){return null}}}}}function F3(e){return F3="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F3(e)}function z3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U3(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z3(Object(n),!0).forEach((function(t){N3(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z3(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N3(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==F3(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==F3(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===F3(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var j3=function(e){return e},G3=function(e,t){return Object.keys(t).reduce((function(n,r){return U3(U3({},n),{},N3({},r,e(r,t[r])))}),{})},Q3=function(e,t,n){return e.map((function(e){return"".concat((r=e,r.replace(/([A-Z])/g,(function(e){return"-".concat(e.toLowerCase())})))," ").concat(t,"ms ").concat(n);var r})).join(",")};function H3(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||W3(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V3(e){return function(e){if(Array.isArray(e))return q3(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W3(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W3(e,t){if(e){if("string"===typeof e)return q3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q3(e,t):void 0}}function q3(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X3=1e-4,Y3=function(e,t){return[0,3*e,3*t-6*e,3*e-3*t+1]},J3=function(e,t){return e.map((function(e,n){return e*Math.pow(t,n)})).reduce((function(e,t){return e+t}))},K3=function(e,t){return function(n){var r=Y3(e,t);return J3(r,n)}},Z3=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=t[1],o=t[2],a=t[3];if(1===t.length)switch(t[0]){case"linear":r=0,i=0,o=1,a=1;break;case"ease":r=.25,i=.1,o=.25,a=1;break;case"ease-in":r=.42,i=0,o=1,a=1;break;case"ease-out":r=.42,i=0,o=.58,a=1;break;case"ease-in-out":r=0,i=0,o=.58,a=1;break;default:var s=t[0].split("(");if("cubic-bezier"===s[0]&&4===s[1].split(")")[0].split(",").length){var l=s[1].split(")")[0].split(",").map((function(e){return parseFloat(e)})),c=H3(l,4);r=c[0],i=c[1],o=c[2],a=c[3]}}[r,o,i,a].every((function(e){return"number"===typeof e&&e>=0&&e<=1}));var u=K3(r,o),h=K3(i,a),d=function(e,t){return function(n){var r=Y3(e,t),i=[].concat(V3(r.map((function(e,t){return e*t})).slice(1)),[0]);return J3(i,n)}}(r,o),f=function(e){return e>1?1:e<0?0:e},p=function(e){for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=u(n)-t,o=d(n);if(Math.abs(i-t)<X3||o<X3)return h(n);n=f(n-i/o)}return h(n)};return p.isStepper=!1,p},$3=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0];if("string"===typeof r)switch(r){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Z3(r);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.stiff,n=void 0===t?100:t,r=e.damping,i=void 0===r?8:r,o=e.dt,a=void 0===o?17:o,s=function(e,t,r){var o=r+(-(e-t)*n-r*i)*a/1e3,s=r*a/1e3+e;return Math.abs(s-t)<X3&&Math.abs(o)<X3?[t,0]:[s,o]};return s.isStepper=!0,s.dt=a,s}();default:if("cubic-bezier"===r.split("(")[0])return Z3(r)}return"function"===typeof r?r:null};function e4(e){return e4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e4(e)}function t4(e){return function(e){if(Array.isArray(e))return s4(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||a4(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function r4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?n4(Object(n),!0).forEach((function(t){i4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i4(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==e4(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==e4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===e4(t)?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o4(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||a4(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a4(e,t){if(e){if("string"===typeof e)return s4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s4(e,t):void 0}}function s4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l4=function(e,t,n){return e+(t-e)*n},c4=function(e){return e.from!==e.to},u4=function e(t,n,r){var i=G3((function(e,n){if(c4(n)){var r=o4(t(n.from,n.to,n.velocity),2),i=r[0],o=r[1];return r4(r4({},n),{},{from:i,velocity:o})}return n}),n);return r<1?G3((function(e,t){return c4(t)?r4(r4({},t),{},{velocity:l4(t.velocity,i[e].velocity,r),from:l4(t.from,i[e].from,r)}):t}),n):e(t,i,r-1)};const h4=function(e,t,n,r,i){var o,a,s,l,c=(o=e,a=t,[Object.keys(o),Object.keys(a)].reduce((function(e,t){return e.filter((function(e){return t.includes(e)}))}))),u=c.reduce((function(n,r){return r4(r4({},n),{},i4({},r,[e[r],t[r]]))}),{}),h=c.reduce((function(n,r){return r4(r4({},n),{},i4({},r,{from:e[r],velocity:0,to:t[r]}))}),{}),d=-1,f=function(){return null};return f=n.isStepper?function(r){s||(s=r);var o=(r-s)/n.dt;h=u4(n,h,o),i(r4(r4(r4({},e),t),G3((function(e,t){return t.from}),h))),s=r,Object.values(h).filter(c4).length&&(d=requestAnimationFrame(f))}:function(o){l||(l=o);var a=(o-l)/r,s=G3((function(e,t){return l4.apply(void 0,t4(t).concat([n(a)]))}),u);if(i(r4(r4(r4({},e),t),s)),a<1)d=requestAnimationFrame(f);else{var c=G3((function(e,t){return l4.apply(void 0,t4(t).concat([n(1)]))}),u);i(r4(r4(r4({},e),t),c))}},function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(d)}}};function d4(e){return d4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d4(e)}var f4=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function p4(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function m4(e){return function(e){if(Array.isArray(e))return g4(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return g4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g4(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g4(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v4(Object(n),!0).forEach((function(t){A4(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A4(e,t,n){return(t=b4(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,b4(r.key),r)}}function b4(e){var t=function(e,t){if("object"!==d4(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==d4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===d4(t)?t:String(t)}function _4(e,t){return _4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},_4(e,t)}function w4(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(NQ){return!1}}();return function(){var n,r=C4(e);if(t){var i=C4(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return E4(this,n)}}function E4(e,t){if(t&&("object"===d4(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S4(e)}function S4(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C4(e){return C4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C4(e)}var M4=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_4(e,t)}(o,e);var t,n,r,i=w4(o);function o(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o);var r=(n=i.call(this,e,t)).props,a=r.isActive,s=r.attributeName,l=r.from,c=r.to,u=r.steps,h=r.children,d=r.duration;if(n.handleStyleChange=n.handleStyleChange.bind(S4(n)),n.changeStyle=n.changeStyle.bind(S4(n)),!a||d<=0)return n.state={style:{}},"function"===typeof h&&(n.state={style:c}),E4(n);if(u&&u.length)n.state={style:u[0].style};else if(l){if("function"===typeof h)return n.state={style:l},E4(n);n.state={style:s?A4({},s,l):l}}else n.state={style:{}};return n}return t=o,n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.isActive,n=e.canBegin;this.mounted=!0,t&&n&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isActive,r=t.canBegin,i=t.attributeName,o=t.shouldReAnimate,a=t.to,s=t.from,l=this.state.style;if(r)if(n){if(!(B3(e.to,a)&&e.canBegin&&e.isActive)){var c=!e.canBegin||!e.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var u=c||o?s:e.to;if(this.state&&l){var h={style:i?A4({},i,u):u};(i&&l[i]!==u||!i&&l!==u)&&this.setState(h)}this.runAnimation(y4(y4({},this.props),{},{from:u,begin:0}))}}else{var d={style:i?A4({},i,a):a};this.state&&l&&(i&&l[i]!==a||!i&&l!==a)&&this.setState(d)}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),e&&e()}},{key:"handleStyleChange",value:function(e){this.changeStyle(e)}},{key:"changeStyle",value:function(e){this.mounted&&this.setState({style:e})}},{key:"runJSAnimation",value:function(e){var t=this,n=e.from,r=e.to,i=e.duration,o=e.easing,a=e.begin,s=e.onAnimationEnd,l=e.onAnimationStart,c=h4(n,r,$3(o),i,this.changeStyle);this.manager.start([l,a,function(){t.stopJSAnimation=c()},i,s])}},{key:"runStepAnimation",value:function(e){var t=this,n=e.steps,r=e.begin,i=e.onAnimationStart,o=n[0],a=o.style,s=o.duration,l=void 0===s?0:s;return this.manager.start([i].concat(m4(n.reduce((function(e,r,i){if(0===i)return e;var o=r.duration,a=r.easing,s=void 0===a?"ease":a,l=r.style,c=r.properties,u=r.onAnimationEnd,h=i>0?n[i-1]:r,d=c||Object.keys(l);if("function"===typeof s||"spring"===s)return[].concat(m4(e),[t.runJSAnimation.bind(t,{from:h.style,to:l,duration:o,easing:s}),o]);var f=Q3(d,o,s),p=y4(y4(y4({},h.style),l),{},{transition:f});return[].concat(m4(e),[p,o,u]).filter(j3)}),[a,Math.max(l,r)])),[e.onAnimationEnd]))}},{key:"runAnimation",value:function(e){this.manager||(this.manager=L3());var t=e.begin,n=e.duration,r=e.attributeName,i=e.to,o=e.easing,a=e.onAnimationStart,s=e.onAnimationEnd,l=e.steps,c=e.children,u=this.manager;if(this.unSubscribe=u.subscribe(this.handleStyleChange),"function"!==typeof o&&"function"!==typeof c&&"spring"!==o)if(l.length>1)this.runStepAnimation(e);else{var h=r?A4({},r,i):i,d=Q3(Object.keys(h),n,o);u.start([a,t,y4(y4({},h),{},{transition:d}),n,s])}else this.runJSAnimation(e)}},{key:"render",value:function(){var e=this.props,t=e.children,n=(e.begin,e.duration),r=(e.attributeName,e.easing,e.isActive),i=(e.steps,e.from,e.to,e.canBegin,e.onAnimationEnd,e.shouldReAnimate,e.onAnimationReStart,p4(e,f4)),o=l.Children.count(t),a=this.state.style;if("function"===typeof t)return t(a);if(!r||0===o||n<=0)return t;var s=function(e){var t=e.props,n=t.style,r=void 0===n?{}:n,o=t.className;return(0,l.cloneElement)(e,y4(y4({},i),{},{style:y4(y4({},r),a),className:o}))};return 1===o?s(l.Children.only(t)):l.createElement("div",null,l.Children.map(t,(function(e){return s(e)})))}}],n&&x4(t.prototype,n),r&&x4(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(l.PureComponent);M4.displayName="Animate",M4.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}},M4.propTypes={from:cq().oneOfType([cq().object,cq().string]),to:cq().oneOfType([cq().object,cq().string]),attributeName:cq().string,duration:cq().number,begin:cq().number,easing:cq().oneOfType([cq().string,cq().func]),steps:cq().arrayOf(cq().shape({duration:cq().number.isRequired,style:cq().object.isRequired,easing:cq().oneOfType([cq().oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),cq().func]),properties:cq().arrayOf("string"),onAnimationEnd:cq().func})),children:cq().oneOfType([cq().node,cq().func]),isActive:cq().bool,canBegin:cq().bool,onAnimationEnd:cq().func,shouldReAnimate:cq().bool,onAnimationStart:cq().func,onAnimationReStart:cq().func};const T4=M4;function I4(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function B4(e,t){return B4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},B4(e,t)}function P4(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,B4(e,t)}const R4=l.createContext(null);function D4(e,t){var n=Object.create(null);return e&&l.Children.map(e,(function(e){return e})).forEach((function(e){n[e.key]=function(e){return t&&(0,l.isValidElement)(e)?t(e):e}(e)})),n}function O4(e,t,n){return null!=n[t]?n[t]:e.props[t]}function k4(e,t,n){var r=D4(e.children),i=function(e,t){function n(n){return n in t?t[n]:e[n]}e=e||{},t=t||{};var r,i=Object.create(null),o=[];for(var a in e)a in t?o.length&&(i[a]=o,o=[]):o.push(a);var s={};for(var l in t){if(i[l])for(r=0;r<i[l].length;r++){var c=i[l][r];s[i[l][r]]=n(c)}s[l]=n(l)}for(r=0;r<o.length;r++)s[o[r]]=n(o[r]);return s}(t,r);return Object.keys(i).forEach((function(o){var a=i[o];if((0,l.isValidElement)(a)){var s=o in t,c=o in r,u=t[o],h=(0,l.isValidElement)(u)&&!u.props.in;!c||s&&!h?c||!s||h?c&&s&&(0,l.isValidElement)(u)&&(i[o]=(0,l.cloneElement)(a,{onExited:n.bind(null,a),in:u.props.in,exit:O4(a,"exit",e),enter:O4(a,"enter",e)})):i[o]=(0,l.cloneElement)(a,{in:!1}):i[o]=(0,l.cloneElement)(a,{onExited:n.bind(null,a),in:!0,exit:O4(a,"exit",e),enter:O4(a,"enter",e)})}})),i}var L4=Object.values||function(e){return Object.keys(e).map((function(t){return e[t]}))},F4=function(e){function t(t,n){var r,i=(r=e.call(this,t,n)||this).handleExited.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r));return r.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},r}P4(t,e);var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(e,t){var n,r,i=t.children,o=t.handleExited;return{children:t.firstRender?(n=e,r=o,D4(n.children,(function(e){return(0,l.cloneElement)(e,{onExited:r.bind(null,e),in:!0,appear:O4(e,"appear",n),enter:O4(e,"enter",n),exit:O4(e,"exit",n)})}))):k4(e,i,o),firstRender:!1}},n.handleExited=function(e,t){var n=D4(this.props.children);e.key in n||(e.props.onExited&&e.props.onExited(t),this.mounted&&this.setState((function(t){var n=tC({},t.children);return delete n[e.key],{children:n}})))},n.render=function(){var e=this.props,t=e.component,n=e.childFactory,r=I4(e,["component","childFactory"]),i=this.state.contextValue,o=L4(this.state.children).map(n);return delete r.appear,delete r.enter,delete r.exit,null===t?l.createElement(R4.Provider,{value:i},o):l.createElement(R4.Provider,{value:i},l.createElement(t,r,o))},t}(l.Component);F4.propTypes={},F4.defaultProps={component:"div",childFactory:function(e){return e}};const z4=F4,U4=!1;var N4="unmounted",j4="exited",G4="entering",Q4="entered",H4="exiting",V4=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var i,o=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?o?(i=j4,r.appearStatus=G4):i=Q4:i=t.unmountOnExit||t.mountOnEnter?N4:j4,r.state={status:i},r.nextCallback=null,r}P4(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===N4?{status:j4}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==G4&&n!==Q4&&(t=G4):n!==G4&&n!==Q4||(t=H4)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!==typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t)if(this.cancelNextCallback(),t===G4){if(this.props.unmountOnExit||this.props.mountOnEnter){var n=this.props.nodeRef?this.props.nodeRef.current:h.findDOMNode(this);n&&function(e){e.scrollTop}(n)}this.performEnter(e)}else this.performExit();else this.props.unmountOnExit&&this.state.status===j4&&this.setState({status:N4})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,i=this.props.nodeRef?[r]:[h.findDOMNode(this),r],o=i[0],a=i[1],s=this.getTimeouts(),l=r?s.appear:s.enter;!e&&!n||U4?this.safeSetState({status:Q4},(function(){t.props.onEntered(o)})):(this.props.onEnter(o,a),this.safeSetState({status:G4},(function(){t.props.onEntering(o,a),t.onTransitionEnd(l,(function(){t.safeSetState({status:Q4},(function(){t.props.onEntered(o,a)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:h.findDOMNode(this);t&&!U4?(this.props.onExit(r),this.safeSetState({status:H4},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:j4},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:j4},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:h.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var i=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],o=i[0],a=i[1];this.props.addEndListener(o,a)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===N4)return null;var t=this.props,n=t.children,r=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,I4(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return l.createElement(R4.Provider,{value:null},"function"===typeof n?n(e,r):l.cloneElement(l.Children.only(n),r))},t}(l.Component);function W4(){}V4.contextType=R4,V4.propTypes={},V4.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:W4,onEntering:W4,onEntered:W4,onExit:W4,onExiting:W4,onExited:W4},V4.UNMOUNTED=N4,V4.EXITED=j4,V4.ENTERING=G4,V4.ENTERED=Q4,V4.EXITING=H4;const q4=V4;var X4=["children","appearOptions","enterOptions","leaveOptions"];function Y4(e){return Y4="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Y4(e)}function J4(){return J4=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J4.apply(this,arguments)}function K4(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $4(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Z4(Object(n),!0).forEach((function(t){o5(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z4(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function e5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a5(r.key),r)}}function t5(e,t){return t5=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},t5(e,t)}function n5(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(NQ){return!1}}();return function(){var n,r=i5(e);if(t){var i=i5(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===Y4(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return r5(e)}(this,n)}}function r5(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i5(e){return i5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i5(e)}function o5(e,t,n){return(t=a5(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a5(e){var t=function(e,t){if("object"!==Y4(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Y4(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Y4(t)?t:String(t)}var s5=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.steps,n=e.duration;return t&&t.length?t.reduce((function(e,t){return e+(Number.isFinite(t.duration)&&t.duration>0?t.duration:0)}),0):Number.isFinite(n)?n:0},l5=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&t5(e,t)}(o,e);var t,n,r,i=n5(o);function o(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),o5(r5(e=i.call(this)),"handleEnter",(function(t,n){var r=e.props,i=r.appearOptions,o=r.enterOptions;e.handleStyleActive(n?i:o)})),o5(r5(e),"handleExit",(function(){var t=e.props.leaveOptions;e.handleStyleActive(t)})),e.state={isActive:!1},e}return t=o,(n=[{key:"handleStyleActive",value:function(e){if(e){var t=e.onAnimationEnd?function(){e.onAnimationEnd()}:null;this.setState($4($4({},e),{},{onAnimationEnd:t,isActive:!0}))}}},{key:"parseTimeout",value:function(){var e=this.props,t=e.appearOptions,n=e.enterOptions,r=e.leaveOptions;return s5(t)+s5(n)+s5(r)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=(t.appearOptions,t.enterOptions,t.leaveOptions,K4(t,X4));return l.createElement(q4,J4({},r,{onEnter:this.handleEnter,onExit:this.handleExit,timeout:this.parseTimeout()}),(function(){return l.createElement(T4,e.state,l.Children.only(n))}))}}])&&e5(t.prototype,n),r&&e5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),o}(l.Component);l5.propTypes={appearOptions:cq().object,enterOptions:cq().object,leaveOptions:cq().object,children:cq().element};const c5=l5;function u5(e){var t=e.component,n=e.children,r=e.appear,i=e.enter,o=e.leave;return l.createElement(z4,{component:t},l.Children.map(n,(function(e,t){return l.createElement(c5,{appearOptions:r,enterOptions:i,leaveOptions:o,key:"child-".concat(t)},e)})))}u5.propTypes={appear:cq().object,enter:cq().object,leave:cq().object,children:cq().oneOfType([cq().array,cq().element]),component:cq().any},u5.defaultProps={component:"span"};const h5=T4;function d5(e){return d5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d5(e)}function f5(){return f5=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},f5.apply(this,arguments)}function p5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return m5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m5(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g5(Object(n),!0).forEach((function(t){y5(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y5(e,t,n){return t=function(e){var t=function(e,t){if("object"!=d5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=d5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==d5(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A5=function(e,t,n,r,i){var o,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),s=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var u=[0,0,0,0],h=0;h<4;h++)u[h]=i[h]>a?a:i[h];o="M".concat(e,",").concat(t+s*u[0]),u[0]>0&&(o+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(c,",").concat(e+l*u[0],",").concat(t)),o+="L ".concat(e+n-l*u[1],",").concat(t),u[1]>0&&(o+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+s*u[1])),o+="L ".concat(e+n,",").concat(t+r-s*u[2]),u[2]>0&&(o+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(c,",\n        ").concat(e+n-l*u[2],",").concat(t+r)),o+="L ".concat(e+l*u[3],",").concat(t+r),u[3]>0&&(o+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-s*u[3])),o+="Z"}else if(a>0&&i===+i&&i>0){var d=Math.min(a,i);o="M ".concat(e,",").concat(t+s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e+l*d,",").concat(t,"\n            L ").concat(e+n-l*d,",").concat(t,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e+n,",").concat(t+s*d,"\n            L ").concat(e+n,",").concat(t+r-s*d,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e+n-l*d,",").concat(t+r,"\n            L ").concat(e+l*d,",").concat(t+r,"\n            A ").concat(d,",").concat(d,",0,0,").concat(c,",").concat(e,",").concat(t+r-s*d," Z")}else o="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return o},x5=function(e,t){if(!e||!t)return!1;var n=e.x,r=e.y,i=t.x,o=t.y,a=t.width,s=t.height;if(Math.abs(a)>0&&Math.abs(s)>0){var l=Math.min(i,i+a),c=Math.max(i,i+a),u=Math.min(o,o+s),h=Math.max(o,o+s);return n>=l&&n<=c&&r>=u&&r<=h}return!1},b5={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},_5=function(e){var t=v5(v5({},b5),e),n=(0,l.useRef)(),r=p5((0,l.useState)(-1),2),i=r[0],o=r[1];(0,l.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&o(e)}catch(t){}}),[]);var a=t.x,s=t.y,c=t.width,u=t.height,h=t.radius,d=t.className,f=t.animationEasing,p=t.animationDuration,m=t.animationBegin,g=t.isAnimationActive,v=t.isUpdateAnimationActive;if(a!==+a||s!==+s||c!==+c||u!==+u||0===c||0===u)return null;var y=G$("recharts-rectangle",d);return v?l.createElement(h5,{canBegin:i>0,from:{width:c,height:u,x:a,y:s},to:{width:c,height:u,x:a,y:s},duration:p,animationEasing:f,isActive:v},(function(e){var r=e.width,o=e.height,a=e.x,s=e.y;return l.createElement(h5,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,isActive:g,easing:f},l.createElement("path",f5({},R0(t,!0),{className:y,d:A5(a,s,r,o,h),ref:n})))})):l.createElement("path",f5({},R0(t,!0),{className:y,d:A5(a,s,c,u,h)}))};function w5(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function E5(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class S5 extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:I5;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(C5(this,e))}has(e){return super.has(C5(this,e))}set(e,t){return super.set(M5(this,e),t)}delete(e){return super.delete(T5(this,e))}}Set;function C5(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function M5(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function T5(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function I5(e){return null!==e&&"object"===typeof e?e.valueOf():e}const B5=Symbol("implicit");function P5(){var e=new S5,t=[],n=[],r=B5;function i(i){let o=e.get(i);if(void 0===o){if(r!==B5)return r;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new S5;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return P5(t,n).unknown(r)},w5.apply(i,arguments),i}function R5(){var e,t,n=P5().unknown(void 0),r=n.domain,i=n.range,o=0,a=1,s=!1,l=0,c=0,u=.5;function h(){var n=r().length,h=a<o,d=h?a:o,f=h?o:a;e=(f-d)/Math.max(1,n-l+2*c),s&&(e=Math.floor(e)),d+=(f-d-e*(n-l))*u,t=e*(1-l),s&&(d=Math.round(d),t=Math.round(t));var p=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),o=new Array(i);++r<i;)o[r]=e+r*n;return o}(n).map((function(t){return d+e*t}));return i(h?p.reverse():p)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),h()):r()},n.range=function(e){return arguments.length?([o,a]=e,o=+o,a=+a,h()):[o,a]},n.rangeRound=function(e){return[o,a]=e,o=+o,a=+a,s=!0,h()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(s=!!e,h()):s},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),h()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),h()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,h()):c},n.align=function(e){return arguments.length?(u=Math.max(0,Math.min(1,e)),h()):u},n.copy=function(){return R5(r(),[o,a]).round(s).paddingInner(l).paddingOuter(c).align(u)},w5.apply(h(),arguments)}function D5(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return D5(t())},e}function O5(){return D5(R5.apply(null,arguments).paddingInner(1))}function k5(e){return k5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k5(e)}function L5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L5(Object(n),!0).forEach((function(t){z5(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L5(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z5(e,t,n){return t=function(e){var t=function(e,t){if("object"!=k5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=k5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==k5(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var U5={widthCache:{},cacheCount:0},N5={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},j5="recharts_measurement_span";var G5=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||v1.isSsr)return{width:0,height:0};var n=function(e){var t=F5({},e);return Object.keys(t).forEach((function(e){t[e]||delete t[e]})),t}(t),r=JSON.stringify({text:e,copyStyle:n});if(U5.widthCache[r])return U5.widthCache[r];try{var i=document.getElementById(j5);i||((i=document.createElement("span")).setAttribute("id",j5),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=F5(F5({},N5),n);Object.assign(i.style,o),i.textContent="".concat(e);var a=i.getBoundingClientRect(),s={width:a.width,height:a.height};return U5.widthCache[r]=s,++U5.cacheCount>2e3&&(U5.cacheCount=0,U5.widthCache={}),s}catch(NQ){return{width:0,height:0}}};function Q5(e){return Q5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Q5(e)}function H5(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return V5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V5(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V5(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function W5(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q5(r.key),r)}}function q5(e){var t=function(e,t){if("object"!=Q5(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Q5(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Q5(t)?t:String(t)}var X5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Y5=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,J5=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,K5=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,Z5={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},$5=Object.keys(Z5),e6="NaN";var t6=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),""===n||J5.test(n)||(this.num=NaN,this.unit=""),$5.includes(n)&&(this.num=function(e,t){return e*Z5[t]}(t,n),this.unit="px")}var t,n,r;return t=e,r=[{key:"parse",value:function(t){var n,r=H5(null!==(n=K5.exec(t))&&void 0!==n?n:[],3),i=r[1],o=r[2];return new e(parseFloat(i),null!==o&&void 0!==o?o:"")}}],(n=[{key:"add",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num+t.num,this.unit)}},{key:"subtract",value:function(t){return this.unit!==t.unit?new e(NaN,""):new e(this.num-t.num,this.unit)}},{key:"multiply",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num*t.num,this.unit||t.unit)}},{key:"divide",value:function(t){return""!==this.unit&&""!==t.unit&&this.unit!==t.unit?new e(NaN,""):new e(this.num/t.num,this.unit||t.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}])&&W5(t.prototype,n),r&&W5(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function n6(e){if(e.includes(e6))return e6;for(var t=e;t.includes("*")||t.includes("/");){var n,r=H5(null!==(n=X5.exec(t))&&void 0!==n?n:[],4),i=r[1],o=r[2],a=r[3],s=t6.parse(null!==i&&void 0!==i?i:""),l=t6.parse(null!==a&&void 0!==a?a:""),c="*"===o?s.multiply(l):s.divide(l);if(c.isNaN())return e6;t=t.replace(X5,c.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,h=H5(null!==(u=Y5.exec(t))&&void 0!==u?u:[],4),d=h[1],f=h[2],p=h[3],m=t6.parse(null!==d&&void 0!==d?d:""),g=t6.parse(null!==p&&void 0!==p?p:""),v="+"===f?m.add(g):m.subtract(g);if(v.isNaN())return e6;t=t.replace(Y5,v.toString())}return t}var r6=/\(([^()]*)\)/;function i6(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t=e;t.includes("(");){var n=H5(r6.exec(t),2)[1];t=t.replace(r6,n6(n))}return t}(t),t=n6(t)}function o6(e){var t=function(e){try{return i6(e)}catch(NQ){return e6}}(e.slice(5,-1));return t===e6?"":t}var a6=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],s6=["dx","dy","angle","className","breakAll"];function l6(){return l6=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l6.apply(this,arguments)}function c6(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function u6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h6(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d6=/[ \f\n\r\t\v\u2028\u2029]+/,f6=function(e){var t=e.children,n=e.breakAll,r=e.style;try{var i=[];return B$()(t)||(i=n?t.toString().split(""):t.toString().split(d6)),{wordsWithComputedWidth:i.map((function(e){return{word:e,width:G5(e,r).width}})),spaceWidth:n?0:G5("\xa0",r).width}}catch(NQ){return null}},p6=function(e){return[{words:B$()(e)?[]:e.toString().split(d6)}]},m6=function(e){var t=e.width,n=e.scaleToFit,r=e.children,i=e.style,o=e.breakAll,a=e.maxLines;if((t||n)&&!v1.isSsr){var s=f6({breakAll:o,children:r,style:i});return s?function(e,t,n,r,i){var o=e.maxLines,a=e.children,s=e.style,l=e.breakAll,c=r0(o),u=a,h=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((function(e,t){var o=t.word,a=t.width,s=e[e.length-1];if(s&&(null==r||i||s.width+a+n<Number(r)))s.words.push(o),s.width+=a+n;else{var l={words:[o],width:a};e.push(l)}return e}),[])},d=h(t);if(!c)return d;for(var f,p=function(e){var t=u.slice(0,e),n=f6({breakAll:l,style:s,children:t+"\u2026"}).wordsWithComputedWidth,i=h(n),a=i.length>o||function(e){return e.reduce((function(e,t){return e.width>t.width?e:t}))}(i).width>Number(r);return[a,i]},m=0,g=u.length-1,v=0;m<=g&&v<=u.length-1;){var y=Math.floor((m+g)/2),A=u6(p(y-1),2),x=A[0],b=A[1],_=u6(p(y),1)[0];if(x||_||(m=y+1),x&&_&&(g=y-1),!x&&_){f=b;break}v++}return f||d}({breakAll:o,children:r,maxLines:a,style:i},s.wordsWithComputedWidth,s.spaceWidth,t,n):p6(r)}return p6(r)},g6="#808080",v6=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.lineHeight,a=void 0===o?"1em":o,s=e.capHeight,c=void 0===s?"0.71em":s,u=e.scaleToFit,h=void 0!==u&&u,d=e.textAnchor,f=void 0===d?"start":d,p=e.verticalAnchor,m=void 0===p?"end":p,g=e.fill,v=void 0===g?g6:g,y=c6(e,a6),A=(0,l.useMemo)((function(){return m6({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:h,style:y.style,width:y.width})}),[y.breakAll,y.children,y.maxLines,h,y.style,y.width]),x=y.dx,b=y.dy,_=y.angle,w=y.className,E=y.breakAll,S=c6(y,s6);if(!i0(n)||!i0(i))return null;var C,M=n+(r0(x)?x:0),T=i+(r0(b)?b:0);switch(m){case"start":C=o6("calc(".concat(c,")"));break;case"middle":C=o6("calc(".concat((A.length-1)/2," * -").concat(a," + (").concat(c," / 2))"));break;default:C=o6("calc(".concat(A.length-1," * -").concat(a,")"))}var I=[];if(h){var B=A[0].width,P=y.width;I.push("scale(".concat((r0(P)?P/B:1)/B,")"))}return _&&I.push("rotate(".concat(_,", ").concat(M,", ").concat(T,")")),I.length&&(S.transform=I.join(" ")),l.createElement("text",l6({},R0(S,!0),{x:M,y:T,className:G$("recharts-text",w),textAnchor:f,fill:v.includes("url")?g6:v}),A.map((function(e,t){var n=e.words.join(E?"":" ");return l.createElement("tspan",{x:M,dy:0===t?C:a,key:n},n)})))};const y6=Math.sqrt(50),A6=Math.sqrt(10),x6=Math.sqrt(2);function b6(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),o=r/Math.pow(10,i),a=o>=y6?10:o>=A6?5:o>=x6?2:1;let s,l,c;return i<0?(c=Math.pow(10,-i)/a,s=Math.round(e*c),l=Math.round(t*c),s/c<e&&++s,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,s=Math.round(e/c),l=Math.round(t/c),s*c<e&&++s,l*c>t&&--l),l<s&&.5<=n&&n<2?b6(e,t,2*n):[s,l,c]}function _6(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,o,a]=r?b6(t,e,n):b6(e,t,n);if(!(o>=i))return[];const s=o-i+1,l=new Array(s);if(r)if(a<0)for(let c=0;c<s;++c)l[c]=(o-c)/-a;else for(let c=0;c<s;++c)l[c]=(o-c)*a;else if(a<0)for(let c=0;c<s;++c)l[c]=(i+c)/-a;else for(let c=0;c<s;++c)l[c]=(i+c)*a;return l}function w6(e,t,n){return b6(e=+e,t=+t,n=+n)[2]}function E6(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?w6(t,e,n):w6(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function S6(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function C6(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function M6(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<0?i=t+1:o=t}while(i<o)}return i}return 2!==e.length?(t=S6,n=(t,n)=>S6(e(t),n),r=(t,n)=>e(t)-n):(t=e===S6||e===C6?e:T6,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const o=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return o>n&&r(e[o-1],t)>-r(e[o],t)?o-1:o},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<o){if(0!==t(r,r))return o;do{const t=i+o>>>1;n(e[t],r)<=0?i=t+1:o=t}while(i<o)}return i}}}function T6(){return 0}function I6(e){return null===e?NaN:+e}const B6=M6(S6),P6=B6.right,R6=(B6.left,M6(I6).center,P6);function D6(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function O6(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function k6(){}var L6=.7,F6=1/L6,z6="\\s*([+-]?\\d+)\\s*",U6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",N6="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",j6=/^#([0-9a-f]{3,8})$/,G6=new RegExp(`^rgb\\(${z6},${z6},${z6}\\)$`),Q6=new RegExp(`^rgb\\(${N6},${N6},${N6}\\)$`),H6=new RegExp(`^rgba\\(${z6},${z6},${z6},${U6}\\)$`),V6=new RegExp(`^rgba\\(${N6},${N6},${N6},${U6}\\)$`),W6=new RegExp(`^hsl\\(${U6},${N6},${N6}\\)$`),q6=new RegExp(`^hsla\\(${U6},${N6},${N6},${U6}\\)$`),X6={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Y6(){return this.rgb().formatHex()}function J6(){return this.rgb().formatRgb()}function K6(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=j6.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Z6(t):3===n?new t8(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?$6(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?$6(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=G6.exec(e))?new t8(t[1],t[2],t[3],1):(t=Q6.exec(e))?new t8(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=H6.exec(e))?$6(t[1],t[2],t[3],t[4]):(t=V6.exec(e))?$6(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=W6.exec(e))?s8(t[1],t[2]/100,t[3]/100,1):(t=q6.exec(e))?s8(t[1],t[2]/100,t[3]/100,t[4]):X6.hasOwnProperty(e)?Z6(X6[e]):"transparent"===e?new t8(NaN,NaN,NaN,0):null}function Z6(e){return new t8(e>>16&255,e>>8&255,255&e,1)}function $6(e,t,n,r){return r<=0&&(e=t=n=NaN),new t8(e,t,n,r)}function e8(e,t,n,r){return 1===arguments.length?function(e){return e instanceof k6||(e=K6(e)),e?new t8((e=e.rgb()).r,e.g,e.b,e.opacity):new t8}(e):new t8(e,t,n,null==r?1:r)}function t8(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function n8(){return`#${a8(this.r)}${a8(this.g)}${a8(this.b)}`}function r8(){const e=i8(this.opacity);return`${1===e?"rgb(":"rgba("}${o8(this.r)}, ${o8(this.g)}, ${o8(this.b)}${1===e?")":`, ${e})`}`}function i8(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function o8(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function a8(e){return((e=o8(e))<16?"0":"")+e.toString(16)}function s8(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new c8(e,t,n,r)}function l8(e){if(e instanceof c8)return new c8(e.h,e.s,e.l,e.opacity);if(e instanceof k6||(e=K6(e)),!e)return new c8;if(e instanceof c8)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),o=Math.max(t,n,r),a=NaN,s=o-i,l=(o+i)/2;return s?(a=t===o?(n-r)/s+6*(n<r):n===o?(r-t)/s+2:(t-n)/s+4,s/=l<.5?o+i:2-o-i,a*=60):s=l>0&&l<1?0:a,new c8(a,s,l,e.opacity)}function c8(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function u8(e){return(e=(e||0)%360)<0?e+360:e}function h8(e){return Math.max(0,Math.min(1,e||0))}function d8(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function f8(e,t,n,r,i){var o=e*e,a=o*e;return((1-3*e+3*o-a)*t+(4-6*o+3*a)*n+(1+3*e+3*o-3*a)*r+a*i)/6}D6(k6,K6,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Y6,formatHex:Y6,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return l8(this).formatHsl()},formatRgb:J6,toString:J6}),D6(t8,e8,O6(k6,{brighter(e){return e=null==e?F6:Math.pow(F6,e),new t8(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?L6:Math.pow(L6,e),new t8(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new t8(o8(this.r),o8(this.g),o8(this.b),i8(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:n8,formatHex:n8,formatHex8:function(){return`#${a8(this.r)}${a8(this.g)}${a8(this.b)}${a8(255*(isNaN(this.opacity)?1:this.opacity))}`},formatRgb:r8,toString:r8})),D6(c8,(function(e,t,n,r){return 1===arguments.length?l8(e):new c8(e,t,n,null==r?1:r)}),O6(k6,{brighter(e){return e=null==e?F6:Math.pow(F6,e),new c8(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?L6:Math.pow(L6,e),new c8(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new t8(d8(e>=240?e-240:e+120,i,r),d8(e,i,r),d8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new c8(u8(this.h),h8(this.s),h8(this.l),i8(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=i8(this.opacity);return`${1===e?"hsl(":"hsla("}${u8(this.h)}, ${100*h8(this.s)}%, ${100*h8(this.l)}%${1===e?")":`, ${e})`}`}}));const p8=e=>()=>e;function m8(e,t){return function(n){return e+n*t}}function g8(e){return 1===(e=+e)?v8:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):p8(isNaN(t)?n:t)}}function v8(e,t){var n=t-e;return n?m8(e,n):p8(isNaN(e)?t:e)}const y8=function e(t){var n=g8(t);function r(e,t){var r=n((e=e8(e)).r,(t=e8(t)).r),i=n(e.g,t.g),o=n(e.b,t.b),a=v8(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=o(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function A8(e){return function(t){var n,r,i=t.length,o=new Array(i),a=new Array(i),s=new Array(i);for(n=0;n<i;++n)r=e8(t[n]),o[n]=r.r||0,a[n]=r.g||0,s[n]=r.b||0;return o=e(o),a=e(a),s=e(s),r.opacity=1,function(e){return r.r=o(e),r.g=a(e),r.b=s(e),r+""}}}A8((function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],o=e[r+1],a=r>0?e[r-1]:2*i-o,s=r<t-1?e[r+2]:2*o-i;return f8((n-r/t)*t,a,i,o,s)}})),A8((function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],o=e[r%t],a=e[(r+1)%t],s=e[(r+2)%t];return f8((n-r/t)*t,i,o,a,s)}}));function x8(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,o=new Array(i),a=new Array(r);for(n=0;n<i;++n)o[n]=T8(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=o[n](e);return a}}function b8(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function _8(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function w8(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=T8(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var E8=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,S8=new RegExp(E8.source,"g");function C8(e,t){var n,r,i,o=E8.lastIndex=S8.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=E8.exec(e))&&(r=S8.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:_8(n,r)})),o=S8.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function M8(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(o){for(n=0;n<r;++n)i[n]=e[n]*(1-o)+t[n]*o;return i}}function T8(e,t){var n,r=typeof t;return null==t||"boolean"===r?p8(t):("number"===r?_8:"string"===r?(n=K6(t))?(t=n,y8):C8:t instanceof K6?y8:t instanceof Date?b8:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}(t)?M8:Array.isArray(t)?x8:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?w8:_8)(e,t)}function I8(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function B8(e){return+e}var P8=[0,1];function R8(e){return e}function D8(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:function(e){return function(){return e}}(isNaN(t)?NaN:.5)}function O8(e,t,n){var r=e[0],i=e[1],o=t[0],a=t[1];return i<r?(r=D8(i,r),o=n(a,o)):(r=D8(r,i),o=n(o,a)),function(e){return o(r(e))}}function k8(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),o=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=D8(e[a],e[a+1]),o[a]=n(t[a],t[a+1]);return function(t){var n=R6(e,t,1,r)-1;return o[n](i[n](t))}}function L8(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function F8(){var e,t,n,r,i,o,a=P8,s=P8,l=T8,c=R8;function u(){var e=Math.min(a.length,s.length);return c!==R8&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?k8:O8,i=o=null,h}function h(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),s,l)))(e(c(t)))}return h.invert=function(n){return c(t((o||(o=r(s,a.map(e),_8)))(n)))},h.domain=function(e){return arguments.length?(a=Array.from(e,B8),u()):a.slice()},h.range=function(e){return arguments.length?(s=Array.from(e),u()):s.slice()},h.rangeRound=function(e){return s=Array.from(e),l=I8,u()},h.clamp=function(e){return arguments.length?(c=!!e||R8,u()):c!==R8},h.interpolate=function(e){return arguments.length?(l=e,u()):l},h.unknown=function(e){return arguments.length?(n=e,h):n},function(n,r){return e=n,t=r,u()}}function z8(){return F8()(R8,R8)}var U8,N8=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function j8(e){if(!(t=N8.exec(e)))throw new Error("invalid format: "+e);var t;return new G8({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function G8(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function Q8(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function H8(e){return(e=Q8(Math.abs(e)))?e[1]:NaN}function V8(e,t){var n=Q8(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}j8.prototype=G8.prototype,G8.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const W8={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>V8(100*e,t),r:V8,s:function(e,t){var n=Q8(e,t);if(!n)return e+"";var r=n[0],i=n[1],o=i-(U8=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return o===a?r:o>a?r+new Array(o-a+1).join("0"):o>0?r.slice(0,o)+"."+r.slice(o):"0."+new Array(1-o).join("0")+Q8(e,Math.max(0,t+o-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function q8(e){return e}var X8,Y8,J8,K8=Array.prototype.map,Z8=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function $8(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?q8:(t=K8.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,o=[],a=0,s=t[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>r));)s=t[a=(a+1)%t.length];return o.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",o=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",s=void 0===e.numerals?q8:function(e){return function(t){return t.replace(/[0-9]/g,(function(t){return e[+t]}))}}(K8.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",u=void 0===e.nan?"NaN":e.nan+"";function h(e){var t=(e=j8(e)).fill,n=e.align,h=e.sign,d=e.symbol,f=e.zero,p=e.width,m=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(m=!0,y="g"):W8[y]||(void 0===g&&(g=12),v=!0,y="g"),(f||"0"===t&&"="===n)&&(f=!0,t="0",n="=");var A="$"===d?i:"#"===d&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",x="$"===d?o:/[%p]/.test(y)?l:"",b=W8[y],_=/[defgprs%]/.test(y);function w(e){var i,o,l,d=A,w=x;if("c"===y)w=b(e)+w,e="";else{var E=(e=+e)<0||1/e<0;if(e=isNaN(e)?u:b(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),E&&0===+e&&"+"!==h&&(E=!1),d=(E?"("===h?h:c:"-"===h||"("===h?"":h)+d,w=("s"===y?Z8[8+U8/3]:"")+w+(E&&"("===h?")":""),_)for(i=-1,o=e.length;++i<o;)if(48>(l=e.charCodeAt(i))||l>57){w=(46===l?a+e.slice(i+1):e.slice(i))+w,e=e.slice(0,i);break}}m&&!f&&(e=r(e,1/0));var S=d.length+e.length+w.length,C=S<p?new Array(p-S+1).join(t):"";switch(m&&f&&(e=r(C+e,C.length?p-w.length:1/0),C=""),n){case"<":e=d+e+w+C;break;case"=":e=d+C+e+w;break;case"^":e=C.slice(0,S=C.length>>1)+d+e+w+C.slice(S);break;default:e=C+d+e+w}return s(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),w.toString=function(){return e+""},w}return{format:h,formatPrefix:function(e,t){var n=h(((e=j8(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(H8(t)/3))),i=Math.pow(10,-r),o=Z8[8+r/3];return function(e){return n(i*e)+o}}}}function e9(e,t,n,r){var i,o=E6(e,t,n);switch((r=j8(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(H8(t)/3)))-H8(Math.abs(e)))}(o,a))||(r.precision=i),J8(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,H8(t)-H8(e))+1}(o,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-H8(Math.abs(e)))}(o))||(r.precision=i-2*("%"===r.type))}return Y8(r)}function t9(e){var t=e.domain;return e.ticks=function(e){var n=t();return _6(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return e9(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,o=t(),a=0,s=o.length-1,l=o[a],c=o[s],u=10;for(c<l&&(i=l,l=c,c=i,i=a,a=s,s=i);u-- >0;){if((i=w6(l,c,n))===r)return o[a]=l,o[s]=c,t(o);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function n9(){var e=z8();return e.copy=function(){return L8(e,n9())},w5.apply(e,arguments),t9(e)}function r9(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,B8),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return r9(e).unknown(t)},e=arguments.length?Array.from(e,B8):[0,1],t9(n)}function i9(e,t){var n,r=0,i=(e=e.slice()).length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function o9(e){return Math.log(e)}function a9(e){return Math.exp(e)}function s9(e){return-Math.log(-e)}function l9(e){return-Math.exp(-e)}function c9(e){return isFinite(e)?+("1e"+e):e<0?0:e}function u9(e){return(t,n)=>-e(-t,n)}function h9(e){const t=e(o9,a9),n=t.domain;let r,i,o=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(o),i=function(e){return 10===e?c9:e===Math.E?Math.exp:t=>Math.pow(e,t)}(o),n()[0]<0?(r=u9(r),i=u9(i),e(s9,l9)):e(o9,a9),t}return t.base=function(e){return arguments.length?(o=+e,a()):o},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],s=t[t.length-1];const l=s<a;l&&([a,s]=[s,a]);let c,u,h=r(a),d=r(s);const f=null==e?10:+e;let p=[];if(!(o%1)&&d-h<f){if(h=Math.floor(h),d=Math.ceil(d),a>0){for(;h<=d;++h)for(c=1;c<o;++c)if(u=h<0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;p.push(u)}}else for(;h<=d;++h)for(c=o-1;c>=1;--c)if(u=h>0?c/i(-h):c*i(h),!(u<a)){if(u>s)break;p.push(u)}2*p.length<f&&(p=_6(a,s,f))}else p=_6(h,d,Math.min(d-h,f)).map(i);return l?p.reverse():p},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===o?"s":","),"function"!==typeof n&&(o%1||null!=(n=j8(n)).precision||(n.trim=!0),n=Y8(n)),e===1/0)return n;const a=Math.max(1,o*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*o<o-.5&&(t*=o),t<=a?n(e):""}},t.nice=()=>n(i9(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function d9(){const e=h9(F8()).domain([1,10]);return e.copy=()=>L8(e,d9()).base(e.base()),w5.apply(e,arguments),e}function f9(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function p9(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function m9(e){var t=1,n=e(f9(t),p9(t));return n.constant=function(n){return arguments.length?e(f9(t=+n),p9(t)):t},t9(n)}function g9(){var e=m9(F8());return e.copy=function(){return L8(e,g9()).constant(e.constant())},w5.apply(e,arguments)}function v9(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function y9(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function A9(e){return e<0?-e*e:e*e}function x9(e){var t=e(R8,R8),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(R8,R8):.5===n?e(y9,A9):e(v9(n),v9(1/n)):n},t9(t)}function b9(){var e=x9(F8());return e.copy=function(){return L8(e,b9()).exponent(e.exponent())},w5.apply(e,arguments),e}function _9(){return b9.apply(null,arguments).exponent(.5)}function w9(e){return Math.sign(e)*e*e}function E9(){var e,t=z8(),n=[0,1],r=!1;function i(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(w9(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,B8)).map(w9)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return E9(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},w5.apply(i,arguments),t9(i)}function S9(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function C9(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function M9(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S6;if(e===S6)return T9;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function T9(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function I9(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?T9:M9(i);r>n;){if(r-n>600){const o=r-n+1,a=t-n+1,s=Math.log(o),l=.5*Math.exp(2*s/3),c=.5*Math.sqrt(s*l*(o-l)/o)*(a-o/2<0?-1:1);I9(e,t,Math.max(n,Math.floor(t-a*l/o+c)),Math.min(r,Math.floor(t+(o-a)*l/o+c)),i)}const o=e[t];let a=n,s=r;for(B9(e,n,t),i(e[r],o)>0&&B9(e,n,r);a<s;){for(B9(e,a,s),++a,--s;i(e[a],o)<0;)++a;for(;i(e[s],o)>0;)--s}0===i(e[n],o)?B9(e,n,s):(++s,B9(e,s,r)),s<=t&&(n=s+1),t<=s&&(r=s-1)}return e}function B9(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function P9(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return C9(e);if(t>=1)return S9(e);var r,i=(r-1)*t,o=Math.floor(i),a=S9(I9(e,o).subarray(0,o+1));return a+(C9(e.subarray(o+1))-a)*(i-o)}}function R9(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I6;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,o=Math.floor(i),a=+n(e[o],o,e);return a+(+n(e[o+1],o+1,e)-a)*(i-o)}}function D9(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=R9(t,e/i);return o}function o(t){return null==t||isNaN(t=+t)?e:n[R6(r,t)]}return o.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},o.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(S6),i()},o.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},o.unknown=function(t){return arguments.length?(e=t,o):e},o.quantiles=function(){return r.slice()},o.copy=function(){return D9().domain(t).range(n).unknown(e)},w5.apply(o,arguments)}function O9(){var e,t=0,n=1,r=1,i=[.5],o=[0,1];function a(t){return null!=t&&t<=t?o[R6(i,t,0,r)]:e}function s(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return a}return a.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,s()):[t,n]},a.range=function(e){return arguments.length?(r=(o=Array.from(e)).length-1,s()):o.slice()},a.invertExtent=function(e){var a=o.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return O9().domain([t,n]).range(o).unknown(e)},w5.apply(t9(a),arguments)}function k9(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[R6(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return k9().domain(t).range(n).unknown(e)},w5.apply(i,arguments)}X8=$8({thousands:",",grouping:[3],currency:["$",""]}),Y8=X8.format,J8=X8.formatPrefix;const L9=1e3,F9=6e4,z9=36e5,U9=864e5,N9=6048e5,j9=2592e6,G9=31536e6,Q9=new Date,H9=new Date;function V9(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,o)=>{const a=[];if(n=i.ceil(n),o=null==o?1:Math.floor(o),!(n<r)||!(o>0))return a;let s;do{a.push(s=new Date(+n)),t(n,o),e(n)}while(s<n&&n<r);return a},i.filter=n=>V9((t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)}),((e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););})),n&&(i.count=(t,r)=>(Q9.setTime(+t),H9.setTime(+r),e(Q9),e(H9),Math.floor(n(Q9,H9))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const W9=V9((()=>{}),((e,t)=>{e.setTime(+e+t)}),((e,t)=>t-e));W9.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?V9((t=>{t.setTime(Math.floor(t/e)*e)}),((t,n)=>{t.setTime(+t+n*e)}),((t,n)=>(n-t)/e)):W9:null);W9.range;const q9=V9((e=>{e.setTime(e-e.getMilliseconds())}),((e,t)=>{e.setTime(+e+t*L9)}),((e,t)=>(t-e)/L9),(e=>e.getUTCSeconds())),X9=(q9.range,V9((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*L9)}),((e,t)=>{e.setTime(+e+t*F9)}),((e,t)=>(t-e)/F9),(e=>e.getMinutes()))),Y9=(X9.range,V9((e=>{e.setUTCSeconds(0,0)}),((e,t)=>{e.setTime(+e+t*F9)}),((e,t)=>(t-e)/F9),(e=>e.getUTCMinutes()))),J9=(Y9.range,V9((e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*L9-e.getMinutes()*F9)}),((e,t)=>{e.setTime(+e+t*z9)}),((e,t)=>(t-e)/z9),(e=>e.getHours()))),K9=(J9.range,V9((e=>{e.setUTCMinutes(0,0,0)}),((e,t)=>{e.setTime(+e+t*z9)}),((e,t)=>(t-e)/z9),(e=>e.getUTCHours()))),Z9=(K9.range,V9((e=>e.setHours(0,0,0,0)),((e,t)=>e.setDate(e.getDate()+t)),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*F9)/U9),(e=>e.getDate()-1))),$9=(Z9.range,V9((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/U9),(e=>e.getUTCDate()-1))),e7=($9.range,V9((e=>{e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+t)}),((e,t)=>(t-e)/U9),(e=>Math.floor(e/U9))));e7.range;function t7(e){return V9((t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)}),((e,t)=>{e.setDate(e.getDate()+7*t)}),((e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*F9)/N9))}const n7=t7(0),r7=t7(1),i7=t7(2),o7=t7(3),a7=t7(4),s7=t7(5),l7=t7(6);n7.range,r7.range,i7.range,o7.range,a7.range,s7.range,l7.range;function c7(e){return V9((t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)}),((e,t)=>(t-e)/N9))}const u7=c7(0),h7=c7(1),d7=c7(2),f7=c7(3),p7=c7(4),m7=c7(5),g7=c7(6),v7=(u7.range,h7.range,d7.range,f7.range,p7.range,m7.range,g7.range,V9((e=>{e.setDate(1),e.setHours(0,0,0,0)}),((e,t)=>{e.setMonth(e.getMonth()+t)}),((e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear())),(e=>e.getMonth()))),y7=(v7.range,V9((e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)}),((e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear())),(e=>e.getUTCMonth()))),A7=(y7.range,V9((e=>{e.setMonth(0,1),e.setHours(0,0,0,0)}),((e,t)=>{e.setFullYear(e.getFullYear()+t)}),((e,t)=>t.getFullYear()-e.getFullYear()),(e=>e.getFullYear())));A7.every=e=>isFinite(e=Math.floor(e))&&e>0?V9((t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)}),((t,n)=>{t.setFullYear(t.getFullYear()+n*e)})):null;A7.range;const x7=V9((e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),((e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)}),((e,t)=>t.getUTCFullYear()-e.getUTCFullYear()),(e=>e.getUTCFullYear()));x7.every=e=>isFinite(e=Math.floor(e))&&e>0?V9((t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),((t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)})):null;x7.range;function b7(e,t,n,r,i,o){const a=[[q9,1,L9],[q9,5,5e3],[q9,15,15e3],[q9,30,3e4],[o,1,F9],[o,5,3e5],[o,15,9e5],[o,30,18e5],[i,1,z9],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,U9],[r,2,1728e5],[n,1,N9],[t,1,j9],[t,3,7776e6],[e,1,G9]];function s(t,n,r){const i=Math.abs(n-t)/r,o=M6((e=>{let[,,t]=e;return t})).right(a,i);if(o===a.length)return e.every(E6(t/G9,n/G9,r));if(0===o)return W9.every(Math.max(E6(t,n,r),1));const[s,l]=a[i/a[o-1][2]<a[o][2]/i?o-1:o];return s.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:s(e,t,n),o=i?i.range(e,+t+1):[];return r?o.reverse():o},s]}const[_7,w7]=b7(x7,y7,u7,e7,K9,Y9),[E7,S7]=b7(A7,v7,n7,Z9,J9,X9);function C7(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function M7(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function T7(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var I7,B7,P7,R7={"-":"",_:" ",0:"0"},D7=/^\s*\d+/,O7=/^%/,k7=/[\\^$*+?|[\]().{}]/g;function L7(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function F7(e){return e.replace(k7,"\\$&")}function z7(e){return new RegExp("^(?:"+e.map(F7).join("|")+")","i")}function U7(e){return new Map(e.map(((e,t)=>[e.toLowerCase(),t])))}function N7(e,t,n){var r=D7.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function j7(e,t,n){var r=D7.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function G7(e,t,n){var r=D7.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Q7(e,t,n){var r=D7.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function H7(e,t,n){var r=D7.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function V7(e,t,n){var r=D7.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function W7(e,t,n){var r=D7.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function q7(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function X7(e,t,n){var r=D7.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Y7(e,t,n){var r=D7.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function J7(e,t,n){var r=D7.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function K7(e,t,n){var r=D7.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Z7(e,t,n){var r=D7.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function $7(e,t,n){var r=D7.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function eee(e,t,n){var r=D7.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function tee(e,t,n){var r=D7.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function nee(e,t,n){var r=D7.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function ree(e,t,n){var r=O7.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function iee(e,t,n){var r=D7.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function oee(e,t,n){var r=D7.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function aee(e,t){return L7(e.getDate(),t,2)}function see(e,t){return L7(e.getHours(),t,2)}function lee(e,t){return L7(e.getHours()%12||12,t,2)}function cee(e,t){return L7(1+Z9.count(A7(e),e),t,3)}function uee(e,t){return L7(e.getMilliseconds(),t,3)}function hee(e,t){return uee(e,t)+"000"}function dee(e,t){return L7(e.getMonth()+1,t,2)}function fee(e,t){return L7(e.getMinutes(),t,2)}function pee(e,t){return L7(e.getSeconds(),t,2)}function mee(e){var t=e.getDay();return 0===t?7:t}function gee(e,t){return L7(n7.count(A7(e)-1,e),t,2)}function vee(e){var t=e.getDay();return t>=4||0===t?a7(e):a7.ceil(e)}function yee(e,t){return e=vee(e),L7(a7.count(A7(e),e)+(4===A7(e).getDay()),t,2)}function Aee(e){return e.getDay()}function xee(e,t){return L7(r7.count(A7(e)-1,e),t,2)}function bee(e,t){return L7(e.getFullYear()%100,t,2)}function _ee(e,t){return L7((e=vee(e)).getFullYear()%100,t,2)}function wee(e,t){return L7(e.getFullYear()%1e4,t,4)}function Eee(e,t){var n=e.getDay();return L7((e=n>=4||0===n?a7(e):a7.ceil(e)).getFullYear()%1e4,t,4)}function See(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+L7(t/60|0,"0",2)+L7(t%60,"0",2)}function Cee(e,t){return L7(e.getUTCDate(),t,2)}function Mee(e,t){return L7(e.getUTCHours(),t,2)}function Tee(e,t){return L7(e.getUTCHours()%12||12,t,2)}function Iee(e,t){return L7(1+$9.count(x7(e),e),t,3)}function Bee(e,t){return L7(e.getUTCMilliseconds(),t,3)}function Pee(e,t){return Bee(e,t)+"000"}function Ree(e,t){return L7(e.getUTCMonth()+1,t,2)}function Dee(e,t){return L7(e.getUTCMinutes(),t,2)}function Oee(e,t){return L7(e.getUTCSeconds(),t,2)}function kee(e){var t=e.getUTCDay();return 0===t?7:t}function Lee(e,t){return L7(u7.count(x7(e)-1,e),t,2)}function Fee(e){var t=e.getUTCDay();return t>=4||0===t?p7(e):p7.ceil(e)}function zee(e,t){return e=Fee(e),L7(p7.count(x7(e),e)+(4===x7(e).getUTCDay()),t,2)}function Uee(e){return e.getUTCDay()}function Nee(e,t){return L7(h7.count(x7(e)-1,e),t,2)}function jee(e,t){return L7(e.getUTCFullYear()%100,t,2)}function Gee(e,t){return L7((e=Fee(e)).getUTCFullYear()%100,t,2)}function Qee(e,t){return L7(e.getUTCFullYear()%1e4,t,4)}function Hee(e,t){var n=e.getUTCDay();return L7((e=n>=4||0===n?p7(e):p7.ceil(e)).getUTCFullYear()%1e4,t,4)}function Vee(){return"+0000"}function Wee(){return"%"}function qee(e){return+e}function Xee(e){return Math.floor(+e/1e3)}function Yee(e){return new Date(e)}function Jee(e){return e instanceof Date?+e:+new Date(+e)}function Kee(e,t,n,r,i,o,a,s,l,c){var u=z8(),h=u.invert,d=u.domain,f=c(".%L"),p=c(":%S"),m=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),A=c("%B"),x=c("%Y");function b(e){return(l(e)<e?f:s(e)<e?p:a(e)<e?m:o(e)<e?g:r(e)<e?i(e)<e?v:y:n(e)<e?A:x)(e)}return u.invert=function(e){return new Date(h(e))},u.domain=function(e){return arguments.length?d(Array.from(e,Jee)):d().map(Yee)},u.ticks=function(t){var n=d();return e(n[0],n[n.length-1],null==t?10:t)},u.tickFormat=function(e,t){return null==t?b:c(t)},u.nice=function(e){var n=d();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?d(i9(n,e)):u},u.copy=function(){return L8(u,Kee(e,t,n,r,i,o,a,s,l,c))},u}function Zee(){return w5.apply(Kee(E7,S7,A7,v7,n7,Z9,J9,X9,q9,B7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $ee(){return w5.apply(Kee(_7,w7,x7,y7,u7,$9,K9,Y9,q9,P7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function ete(){var e,t,n,r,i,o=0,a=1,s=R8,l=!1;function c(t){return null==t||isNaN(t=+t)?i:s(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function u(e){return function(t){var n,r;return arguments.length?([n,r]=t,s=e(n,r),c):[s(0),s(1)]}}return c.domain=function(i){return arguments.length?([o,a]=i,e=r(o=+o),t=r(a=+a),n=e===t?0:1/(t-e),c):[o,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(s=e,c):s},c.range=u(T8),c.rangeRound=u(I8),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(o),t=i(a),n=e===t?0:1/(t-e),c}}function tte(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function nte(){var e=t9(ete()(R8));return e.copy=function(){return tte(e,nte())},E5.apply(e,arguments)}function rte(){var e=h9(ete()).domain([1,10]);return e.copy=function(){return tte(e,rte()).base(e.base())},E5.apply(e,arguments)}function ite(){var e=m9(ete());return e.copy=function(){return tte(e,ite()).constant(e.constant())},E5.apply(e,arguments)}function ote(){var e=x9(ete());return e.copy=function(){return tte(e,ote()).exponent(e.exponent())},E5.apply(e,arguments)}function ate(){return ote.apply(null,arguments).exponent(.5)}function ste(){var e=[],t=R8;function n(n){if(null!=n&&!isNaN(n=+n))return t((R6(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(S6),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map(((n,r)=>t(r/(e.length-1))))},n.quantiles=function(t){return Array.from({length:t+1},((n,r)=>P9(e,r/t)))},n.copy=function(){return ste(t).domain(e)},E5.apply(n,arguments)}function lte(){var e,t,n,r,i,o,a,s=0,l=.5,c=1,u=1,h=R8,d=!1;function f(e){return isNaN(e=+e)?a:(e=.5+((e=+o(e))-t)*(u*e<u*t?r:i),h(d?Math.max(0,Math.min(1,e)):e))}function p(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,h=function(e,t){void 0===t&&(t=e,e=T8);for(var n=0,r=t.length-1,i=t[0],o=new Array(r<0?0:r);n<r;)o[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return o[t](e-t)}}(e,[n,r,i]),f):[h(0),h(.5),h(1)]}}return f.domain=function(a){return arguments.length?([s,l,c]=a,e=o(s=+s),t=o(l=+l),n=o(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f):[s,l,c]},f.clamp=function(e){return arguments.length?(d=!!e,f):d},f.interpolator=function(e){return arguments.length?(h=e,f):h},f.range=p(T8),f.rangeRound=p(I8),f.unknown=function(e){return arguments.length?(a=e,f):a},function(a){return o=a,e=a(s),t=a(l),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),u=t<e?-1:1,f}}function cte(){var e=t9(lte()(R8));return e.copy=function(){return tte(e,cte())},E5.apply(e,arguments)}function ute(){var e=h9(lte()).domain([.1,1,10]);return e.copy=function(){return tte(e,ute()).base(e.base())},E5.apply(e,arguments)}function hte(){var e=m9(lte());return e.copy=function(){return tte(e,hte()).constant(e.constant())},E5.apply(e,arguments)}function dte(){var e=x9(lte());return e.copy=function(){return tte(e,dte()).exponent(e.exponent())},E5.apply(e,arguments)}function fte(){return dte.apply(null,arguments).exponent(.5)}function pte(e,t){if((i=e.length)>1)for(var n,r,i,o=1,a=e[t[0]],s=a.length;o<i;++o)for(r=a,a=e[t[o]],n=0;n<s;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}!function(e){I7=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,o=e.days,a=e.shortDays,s=e.months,l=e.shortMonths,c=z7(i),u=U7(i),h=z7(o),d=U7(o),f=z7(a),p=U7(a),m=z7(s),g=U7(s),v=z7(l),y=U7(l),A={a:function(e){return a[e.getDay()]},A:function(e){return o[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return s[e.getMonth()]},c:null,d:aee,e:aee,f:hee,g:_ee,G:Eee,H:see,I:lee,j:cee,L:uee,m:dee,M:fee,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:qee,s:Xee,S:pee,u:mee,U:gee,V:yee,w:Aee,W:xee,x:null,X:null,y:bee,Y:wee,Z:See,"%":Wee},x={a:function(e){return a[e.getUTCDay()]},A:function(e){return o[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return s[e.getUTCMonth()]},c:null,d:Cee,e:Cee,f:Pee,g:Gee,G:Hee,H:Mee,I:Tee,j:Iee,L:Bee,m:Ree,M:Dee,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:qee,s:Xee,S:Oee,u:kee,U:Lee,V:zee,w:Uee,W:Nee,x:null,X:null,y:jee,Y:Qee,Z:Vee,"%":Wee},b={a:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.w=p.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=h.exec(t.slice(n));return r?(e.w=d.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=m.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return E(e,t,n,r)},d:J7,e:J7,f:nee,g:W7,G:V7,H:Z7,I:Z7,j:K7,L:tee,m:Y7,M:$7,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=u.get(r[0].toLowerCase()),n+r[0].length):-1},q:X7,Q:iee,s:oee,S:eee,u:j7,U:G7,V:Q7,w:N7,W:H7,x:function(e,t,r){return E(e,n,t,r)},X:function(e,t,n){return E(e,r,t,n)},y:W7,Y:V7,Z:q7,"%":ree};function _(e,t){return function(n){var r,i,o,a=[],s=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++s<c;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=R7[r=e.charAt(++s)])?r=e.charAt(++s):i="e"===r?" ":"0",(o=t[r])&&(r=o(n,i)),a.push(r),l=s+1);return a.push(e.slice(l,s)),a.join("")}}function w(e,t){return function(n){var r,i,o=T7(1900,void 0,1);if(E(o,e,n+="",0)!=n.length)return null;if("Q"in o)return new Date(o.Q);if("s"in o)return new Date(1e3*o.s+("L"in o?o.L:0));if(t&&!("Z"in o)&&(o.Z=0),"p"in o&&(o.H=o.H%12+12*o.p),void 0===o.m&&(o.m="q"in o?o.q:0),"V"in o){if(o.V<1||o.V>53)return null;"w"in o||(o.w=1),"Z"in o?(i=(r=M7(T7(o.y,0,1))).getUTCDay(),r=i>4||0===i?h7.ceil(r):h7(r),r=$9.offset(r,7*(o.V-1)),o.y=r.getUTCFullYear(),o.m=r.getUTCMonth(),o.d=r.getUTCDate()+(o.w+6)%7):(i=(r=C7(T7(o.y,0,1))).getDay(),r=i>4||0===i?r7.ceil(r):r7(r),r=Z9.offset(r,7*(o.V-1)),o.y=r.getFullYear(),o.m=r.getMonth(),o.d=r.getDate()+(o.w+6)%7)}else("W"in o||"U"in o)&&("w"in o||(o.w="u"in o?o.u%7:"W"in o?1:0),i="Z"in o?M7(T7(o.y,0,1)).getUTCDay():C7(T7(o.y,0,1)).getDay(),o.m=0,o.d="W"in o?(o.w+6)%7+7*o.W-(i+5)%7:o.w+7*o.U-(i+6)%7);return"Z"in o?(o.H+=o.Z/100|0,o.M+=o.Z%100,M7(o)):C7(o)}}function E(e,t,n,r){for(var i,o,a=0,s=t.length,l=n.length;a<s;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(o=b[i in R7?t.charAt(a++):i])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return A.x=_(n,A),A.X=_(r,A),A.c=_(t,A),x.x=_(n,x),x.X=_(r,x),x.c=_(t,x),{format:function(e){var t=_(e+="",A);return t.toString=function(){return e},t},parse:function(e){var t=w(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=_(e+="",x);return t.toString=function(){return e},t},utcParse:function(e){var t=w(e+="",!0);return t.toString=function(){return e},t}}}(e),B7=I7.format,I7.parse,P7=I7.utcFormat,I7.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});Array.prototype.slice;function mte(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function gte(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function vte(e,t){return e[t]}function yte(e){const t=[];return t.key=e,t}var Ate=n(539),xte=n.n(Ate),bte=n(6745),_te=n.n(bte),wte=n(3538),Ete=n.n(wte),Ste=n(9853),Cte=n.n(Ste),Mte=n(8210),Tte=n.n(Mte);function Ite(e){return function(e){if(Array.isArray(e))return Bte(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Bte(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bte(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bte(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Pte=function(e){return e},Rte={"@@functional/placeholder":!0},Dte=function(e){return e===Rte},Ote=function(e){return function t(){return 0===arguments.length||1===arguments.length&&Dte(arguments.length<=0?void 0:arguments[0])?t:e.apply(void 0,arguments)}},kte=function e(t,n){return 1===t?n:Ote((function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];var a=i.filter((function(e){return e!==Rte})).length;return a>=t?n.apply(void 0,i):e(t-a,Ote((function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var o=i.map((function(e){return Dte(e)?t.shift():e}));return n.apply(void 0,Ite(o).concat(t))})))}))},Lte=function(e){return kte(e.length,e)},Fte=function(e,t){for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},zte=Lte((function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map((function(e){return t[e]})).map(e)})),Ute=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return Pte;var r=t.reverse(),i=r[0],o=r.slice(1);return function(){return o.reduce((function(e,t){return t(e)}),i.apply(void 0,arguments))}},Nte=function(e){return Array.isArray(e)?e.reverse():e.split("").reverse.join("")},jte=function(e){var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t&&i.every((function(e,n){return e===t[n]}))?n:(t=i,n=e.apply(void 0,i))}};var Gte=Lte((function(e,t,n){var r=+e;return r+n*(+t-r)})),Qte=Lte((function(e,t,n){var r=t-+e;return(n-e)/(r=r||1/0)})),Hte=Lte((function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))}));const Vte={rangeStep:function(e,t,n){for(var r=new(Tte())(e),i=0,o=[];r.lt(t)&&i<1e5;)o.push(r.toNumber()),r=r.add(n),i++;return o},getDigitCount:function(e){return 0===e?1:Math.floor(new(Tte())(e).abs().log(10).toNumber())+1},interpolateNumber:Gte,uninterpolateNumber:Qte,uninterpolateTruncation:Hte};function Wte(e){return function(e){if(Array.isArray(e))return Yte(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Xte(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qte(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(l){i=!0,o=l}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(e,t)||Xte(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xte(e,t){if(e){if("string"===typeof e)return Yte(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yte(e,t):void 0}}function Yte(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Jte(e){var t=qte(e,2),n=t[0],r=t[1],i=n,o=r;return n>r&&(i=r,o=n),[i,o]}function Kte(e,t,n){if(e.lte(0))return new(Tte())(0);var r=Vte.getDigitCount(e.toNumber()),i=new(Tte())(10).pow(r),o=e.div(i),a=1!==r?.05:.1,s=new(Tte())(Math.ceil(o.div(a).toNumber())).add(n).mul(a).mul(i);return t?s:new(Tte())(Math.ceil(s))}function Zte(e,t,n){var r=1,i=new(Tte())(e);if(!i.isint()&&n){var o=Math.abs(e);o<1?(r=new(Tte())(10).pow(Vte.getDigitCount(e)-1),i=new(Tte())(Math.floor(i.div(r).toNumber())).mul(r)):o>1&&(i=new(Tte())(Math.floor(e)))}else 0===e?i=new(Tte())(Math.floor((t-1)/2)):n||(i=new(Tte())(Math.floor(e)));var a=Math.floor((t-1)/2),s=Ute(zte((function(e){return i.add(new(Tte())(e-a).mul(r)).toNumber()})),Fte);return s(0,t)}function $te(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(Tte())(0),tickMin:new(Tte())(0),tickMax:new(Tte())(0)};var o,a=Kte(new(Tte())(t).sub(e).div(n-1),r,i);o=e<=0&&t>=0?new(Tte())(0):(o=new(Tte())(e).add(t).div(2)).sub(new(Tte())(o).mod(a));var s=Math.ceil(o.sub(e).div(a).toNumber()),l=Math.ceil(new(Tte())(t).sub(o).div(a).toNumber()),c=s+l+1;return c>n?$te(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,s=t>0?s:s+(n-c)),{step:a,tickMin:o.sub(new(Tte())(s).mul(a)),tickMax:o.add(new(Tte())(l).mul(a))})}var ene=jte((function(e){var t=qte(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=qte(Jte([n,r]),2),l=s[0],c=s[1];if(l===-1/0||c===1/0){var u=c===1/0?[l].concat(Wte(Fte(0,i-1).map((function(){return 1/0})))):[].concat(Wte(Fte(0,i-1).map((function(){return-1/0}))),[c]);return n>r?Nte(u):u}if(l===c)return Zte(l,i,o);var h=$te(l,c,a,o),d=h.step,f=h.tickMin,p=h.tickMax,m=Vte.rangeStep(f,p.add(new(Tte())(.1).mul(d)),d);return n>r?Nte(m):m})),tne=(jte((function(e){var t=qte(e,2),n=t[0],r=t[1],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Math.max(i,2),s=qte(Jte([n,r]),2),l=s[0],c=s[1];if(l===-1/0||c===1/0)return[n,r];if(l===c)return Zte(l,i,o);var u=Kte(new(Tte())(c).sub(l).div(a-1),o,0),h=Ute(zte((function(e){return new(Tte())(l).add(new(Tte())(e).mul(u)).toNumber()})),Fte),d=h(0,a).filter((function(e){return e>=l&&e<=c}));return n>r?Nte(d):d})),jte((function(e,t){var n=qte(e,2),r=n[0],i=n[1],o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=qte(Jte([r,i]),2),s=a[0],l=a[1];if(s===-1/0||l===1/0)return[r,i];if(s===l)return[s];var c=Math.max(t,2),u=Kte(new(Tte())(l).sub(s).div(c-1),o,0),h=[].concat(Wte(Vte.rangeStep(new(Tte())(s),new(Tte())(l).sub(new(Tte())(.99).mul(u)),u)),[l]);return r>i?Nte(h):h}))),nne=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function rne(){return rne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rne.apply(this,arguments)}function ine(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return one(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return one(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function one(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ane(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function sne(e){var t=e.offset,n=e.layout,r=e.width,i=e.dataKey,o=e.data,a=e.dataPointFormatter,s=e.xAxis,c=e.yAxis,u=ane(e,nne),h=R0(u,!1);"x"===e.direction&&"number"!==s.type&&V$(!1);var d=o.map((function(e){var o=a(e,i),u=o.x,d=o.y,f=o.value,p=o.errorVal;if(!p)return null;var m,g,v=[];if(Array.isArray(p)){var y=ine(p,2);m=y[0],g=y[1]}else m=g=p;if("vertical"===n){var A=s.scale,x=d+t,b=x+r,_=x-r,w=A(f-m),E=A(f+g);v.push({x1:E,y1:b,x2:E,y2:_}),v.push({x1:w,y1:x,x2:E,y2:x}),v.push({x1:w,y1:b,x2:w,y2:_})}else if("horizontal"===n){var S=c.scale,C=u+t,M=C-r,T=C+r,I=S(f-m),B=S(f+g);v.push({x1:M,y1:B,x2:T,y2:B}),v.push({x1:C,y1:I,x2:C,y2:B}),v.push({x1:M,y1:I,x2:T,y2:I})}return l.createElement(Q0,rne({className:"recharts-errorBar",key:"bar-".concat(v.map((function(e){return"".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)})))},h),v.map((function(e){return l.createElement("line",rne({},e,{key:"line-".concat(e.x1,"-").concat(e.x2,"-").concat(e.y1,"-").concat(e.y2)}))})))}));return l.createElement(Q0,{className:"recharts-errorBars"},d)}function lne(e){return lne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lne(e)}function cne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function une(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cne(Object(n),!0).forEach((function(t){hne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hne(e,t,n){return t=function(e){var t=function(e,t){if("object"!=lne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=lne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==lne(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}sne.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"},sne.displayName="ErrorBar";var dne=function(e){var t,n=e.children,r=e.formattedGraphicalItems,i=e.legendWidth,o=e.legendContent,a=T0(n,X2);return a?(t=a.props&&a.props.payload?a.props&&a.props.payload:"children"===o?(r||[]).reduce((function(e,t){var n=t.item,r=t.props,i=r.sectors||r.data||[];return e.concat(i.map((function(e){return{type:a.props.iconType||n.props.legendType,value:e.name,color:e.fill,payload:e}})))}),[]):(r||[]).map((function(e){var t=e.item,n=t.props,r=n.dataKey,i=n.name,o=n.legendType;return{inactive:n.hide,dataKey:r,type:a.props.iconType||o||"square",color:bne(t),value:i||r,payload:t.props}})),une(une(une({},a.props),X2.getWithHeight(a,i)),{},{payload:t,item:a})):null};function fne(e){return fne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fne(e)}function pne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function mne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pne(Object(n),!0).forEach((function(t){gne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gne(e,t,n){return t=function(e){var t=function(e,t){if("object"!=fne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=fne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==fne(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vne(e){return function(e){if(Array.isArray(e))return yne(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return yne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ane(e,t,n){return B$()(e)||B$()(t)?n:i0(t)?L$()(e,t,n):R$()(t)?t(e):n}function xne(e,t,n,r){var i=Ete()(e,(function(e){return Ane(e,t)}));if("number"===n){var o=i.filter((function(e){return r0(e)||parseFloat(e)}));return o.length?[_te()(o),xte()(o)]:[1/0,-1/0]}return(r?i.filter((function(e){return!B$()(e)})):i).map((function(e){return i0(e)||e instanceof Date?e:""}))}var bne=function(e){var t,n=e.type.displayName,r=e.props,i=r.stroke,o=r.fill;switch(n){case"Line":t=i;break;case"Area":case"Radar":t=i&&"none"!==i?i:o;break;default:t=o}return t},_ne=function(e,t,n,r,i){var o=M0(t.props.children,sne).filter((function(e){return function(e,t,n){return!!B$()(t)||("horizontal"===e?"yAxis"===t:"vertical"===e||"x"===n?"xAxis"===t:"y"!==n||"yAxis"===t)}(r,i,e.props.direction)}));if(o&&o.length){var a=o.map((function(e){return e.props.dataKey}));return e.reduce((function(e,t){var r=Ane(t,n);if(B$()(r))return e;var i=Array.isArray(r)?[_te()(r),xte()(r)]:[r,r],o=a.reduce((function(e,n){var r=Ane(t,n,0),o=i[0]-Math.abs(Array.isArray(r)?r[0]:r),a=i[1]+Math.abs(Array.isArray(r)?r[1]:r);return[Math.min(o,e[0]),Math.max(a,e[1])]}),[1/0,-1/0]);return[Math.min(o[0],e[0]),Math.max(o[1],e[1])]}),[1/0,-1/0])}return null},wne=function(e,t,n,r,i){var o=t.map((function(t){var o=t.props.dataKey;return"number"===n&&o&&_ne(e,t,o,r)||xne(e,o,n,i)}));if("number"===n)return o.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]);var a={};return o.reduce((function(e,t){for(var n=0,r=t.length;n<r;n++)a[t[n]]||(a[t[n]]=!0,e.push(t[n]));return e}),[])},Ene=function(e,t){return"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t},Sne=function(e,t,n,r){if(r)return e.map((function(e){return e.coordinate}));var i,o,a=e.map((function(e){return e.coordinate===t&&(i=!0),e.coordinate===n&&(o=!0),e.coordinate}));return i||a.push(t),o||a.push(n),a},Cne=function(e,t,n){if(!e)return null;var r=e.scale,i=e.duplicateDomain,o=e.type,a=e.range,s="scaleBand"===e.realScaleType?r.bandwidth()/2:2,l=(t||n)&&"category"===o&&r.bandwidth?r.bandwidth()/s:0;return l="angleAxis"===e.axisType&&(null===a||void 0===a?void 0:a.length)>=2?2*t0(a[0]-a[1])*l:l,t&&(e.ticks||e.niceTicks)?(e.ticks||e.niceTicks).map((function(e){var t=i?i.indexOf(e):e;return{coordinate:r(t)+l,value:e,offset:l}})).filter((function(e){return!Z$()(e.coordinate)})):e.isCategorical&&e.categoricalDomain?e.categoricalDomain.map((function(e,t){return{coordinate:r(e)+l,value:e,index:t,offset:l}})):r.ticks&&!n?r.ticks(e.tickCount).map((function(e){return{coordinate:r(e)+l,value:e,offset:l}})):r.domain().map((function(e,t){return{coordinate:r(e)+l,value:i?i[e]:e,index:t,offset:l}}))},Mne=new WeakMap,Tne=function(e,t){if("function"!==typeof t)return e;Mne.has(e)||Mne.set(e,new WeakMap);var n=Mne.get(e);if(n.has(t))return n.get(t);var r=function(){e.apply(void 0,arguments),t.apply(void 0,arguments)};return n.set(t,r),r},Ine=1e-4,Bne={sign:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0,a=0;a<t;++a){var s=Z$()(e[a][n][1])?e[a][n][0]:e[a][n][1];s>=0?(e[a][n][0]=i,e[a][n][1]=i+s,i=e[a][n][1]):(e[a][n][0]=o,e[a][n][1]=o+s,o=e[a][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,o=0,a=e[0].length;o<a;++o){for(i=n=0;n<r;++n)i+=e[n][o][1]||0;if(i)for(n=0;n<r;++n)e[n][o][1]/=i}pte(e,t)}},none:pte,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],o=i.length;r<o;++r){for(var a=0,s=0;a<n;++a)s+=e[a][r][1]||0;i[r][1]+=i[r][0]=-s/2}pte(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,o=0,a=1;a<r;++a){for(var s=0,l=0,c=0;s<i;++s){for(var u=e[t[s]],h=u[a][1]||0,d=(h-(u[a-1][1]||0))/2,f=0;f<s;++f){var p=e[t[f]];d+=(p[a][1]||0)-(p[a-1][1]||0)}l+=h,c+=d*h}n[a-1][1]+=n[a-1][0]=o,l&&(o-=c/l)}n[a-1][1]+=n[a-1][0]=o,pte(e,t)}},positive:function(e){var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,o=0;o<t;++o){var a=Z$()(e[o][n][1])?e[o][n][0]:e[o][n][1];a>=0?(e[o][n][0]=i,e[o][n][1]=i+a,i=e[o][n][1]):(e[o][n][0]=0,e[o][n][1]=0)}}},Pne=function(e,t,n){var r=t.map((function(e){return e.props.dataKey})),i=Bne[n],o=function(){var e=i2([]),t=gte,n=pte,r=vte;function i(i){var o,a,s=Array.from(e.apply(this,arguments),yte),l=s.length,c=-1;for(const e of i)for(o=0,++c;o<l;++o)(s[o][c]=[0,+r(e,s[o].key,c,i)]).data=e;for(o=0,a=mte(t(s));o<l;++o)s[a[o]].index=o;return n(s,a),s}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:i2(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:i2(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?gte:"function"===typeof e?e:i2(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?pte:e,i):n},i}().keys(r).value((function(e,t){return+Ane(e,t,0)})).order(gte).offset(i);return o(e)};var Rne=function(e){var t=e.axis,n=e.ticks,r=e.offset,i=e.bandSize,o=e.entry,a=e.index;if("category"===t.type)return n[a]?n[a].coordinate+r:null;var s=Ane(o,t.dataKey,t.domain[a]);return B$()(s)?null:t.scale(s)-i/2+r},Dne=function(e,t,n){return Object.keys(e).reduce((function(r,i){var o=e[i].stackedData.reduce((function(e,r){var i=function(e){return e.reduce((function(e,t){return[_te()(t.concat([e[0]]).filter(r0)),xte()(t.concat([e[1]]).filter(r0))]}),[1/0,-1/0])}(r.slice(t,n+1));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]}),[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]}),[1/0,-1/0]).map((function(e){return e===1/0||e===-1/0?0:e}))},One=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,kne=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Lne=function(e,t,n){if(R$()(e))return e(t,n);if(!Array.isArray(e))return t;var r=[];if(r0(e[0]))r[0]=n?e[0]:Math.min(e[0],t[0]);else if(One.test(e[0])){var i=+One.exec(e[0])[1];r[0]=t[0]-i}else R$()(e[0])?r[0]=e[0](t[0]):r[0]=t[0];if(r0(e[1]))r[1]=n?e[1]:Math.max(e[1],t[1]);else if(kne.test(e[1])){var o=+kne.exec(e[1])[1];r[1]=t[1]+o}else R$()(e[1])?r[1]=e[1](t[1]):r[1]=t[1];return r},Fne=function(e,t,n){if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=z$()(t,(function(e){return e.coordinate})),o=1/0,a=1,s=i.length;a<s;a++){var l=i[a],c=i[a-1];o=Math.min((l.coordinate||0)-(c.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},zne=function(e,t,n){return e&&e.length?Cte()(e,L$()(n,"type.defaultProps.domain"))?t:e:t},Une=function(e,t){var n=e.props,r=n.dataKey,i=n.name,o=n.unit,a=n.formatter,s=n.tooltipType,l=n.chartType,c=n.hide;return mne(mne({},R0(e,!1)),{},{dataKey:r,unit:o,formatter:a,name:i||r,color:bne(e),value:Ane(t,r),type:s,payload:t,chartType:l,hide:c})};function Nne(e){return Nne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nne(e)}function jne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Gne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jne(Object(n),!0).forEach((function(t){Qne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Qne(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Nne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Nne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Nne(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Hne=["Webkit","Moz","O","ms"];function Vne(e){return Vne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vne(e)}function Wne(){return Wne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Wne.apply(this,arguments)}function qne(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qne(Object(n),!0).forEach((function(t){tre(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qne(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Yne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,nre(r.key),r)}}function Jne(e,t,n){return t=Zne(t),function(e,t){if(t&&("object"===Vne(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $ne(e)}(e,Kne()?Reflect.construct(t,n||[],Zne(e).constructor):t.apply(e,n))}function Kne(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Kne=function(){return!!e})()}function Zne(e){return Zne=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Zne(e)}function $ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ere(e,t){return ere=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ere(e,t)}function tre(e,t,n){return(t=nre(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nre(e){var t=function(e,t){if("object"!=Vne(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vne(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vne(t)?t:String(t)}var rre=function(e){return e.changedTouches&&!!e.changedTouches.length},ire=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),tre($ne(n=Jne(this,t,[e])),"handleDrag",(function(e){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(e):n.state.isSlideMoving&&n.handleSlideDrag(e)})),tre($ne(n),"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&n.handleDrag(e.changedTouches[0])})),tre($ne(n),"handleDragEnd",(function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},(function(){var e=n.props,t=e.endIndex,r=e.onDragEnd,i=e.startIndex;null===r||void 0===r||r({endIndex:t,startIndex:i})})),n.detachDragEndListener()})),tre($ne(n),"handleLeaveWrapper",(function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))})),tre($ne(n),"handleEnterSlideOrTraveller",(function(){n.setState({isTextActive:!0})})),tre($ne(n),"handleLeaveSlideOrTraveller",(function(){n.setState({isTextActive:!1})})),tre($ne(n),"handleSlideDragStart",(function(e){var t=rre(e)?e.changedTouches[0]:e;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:t.pageX}),n.attachDragEndListener()})),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind($ne(n),"startX"),endX:n.handleTravellerDragStart.bind($ne(n),"endX")},n.state={},n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ere(e,t)}(t,e),n=t,r=[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(e){var n=e.startX,r=e.endX,i=this.state.scaleValues,o=this.props,a=o.gap,s=o.data.length-1,l=Math.min(n,r),c=Math.max(n,r),u=t.getIndexInRange(i,l),h=t.getIndexInRange(i,c);return{startIndex:u-u%a,endIndex:h===s?s:h-h%a}}},{key:"getTextOfTick",value:function(e){var t=this.props,n=t.data,r=t.tickFormatter,i=t.dataKey,o=Ane(n[e],i,e);return R$()(r)?r(o,e):o}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(e){var t=this.state,n=t.slideMoveStartX,r=t.startX,i=t.endX,o=this.props,a=o.x,s=o.width,l=o.travellerWidth,c=o.startIndex,u=o.endIndex,h=o.onChange,d=e.pageX-n;d>0?d=Math.min(d,a+s-l-i,a+s-l-r):d<0&&(d=Math.max(d,a-r,a-i));var f=this.getIndex({startX:r+d,endX:i+d});f.startIndex===c&&f.endIndex===u||!h||h(f),this.setState({startX:r+d,endX:i+d,slideMoveStartX:e.pageX})}},{key:"handleTravellerDragStart",value:function(e,t){var n=rre(t)?t.changedTouches[0]:t;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:e,brushMoveStartX:n.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(e){var t=this.state,n=t.brushMoveStartX,r=t.movingTravellerId,i=t.endX,o=t.startX,a=this.state[r],s=this.props,l=s.x,c=s.width,u=s.travellerWidth,h=s.onChange,d=s.gap,f=s.data,p={startX:this.state.startX,endX:this.state.endX},m=e.pageX-n;m>0?m=Math.min(m,l+c-u-a):m<0&&(m=Math.max(m,l-a)),p[r]=a+m;var g=this.getIndex(p),v=g.startIndex,y=g.endIndex;this.setState(tre(tre({},r,a+m),"brushMoveStartX",e.pageX),(function(){h&&function(){var e=f.length-1;return"startX"===r&&(i>o?v%d===0:y%d===0)||i<o&&y===e||"endX"===r&&(i>o?y%d===0:v%d===0)||i>o&&y===e}()&&h(g)}))}},{key:"handleTravellerMoveKeyboard",value:function(e,t){var n=this,r=this.state,i=r.scaleValues,o=r.startX,a=r.endX,s=this.state[t],l=i.indexOf(s);if(-1!==l){var c=l+e;if(!(-1===c||c>=i.length)){var u=i[c];"startX"===t&&u>=a||"endX"===t&&u<=o||this.setState(tre({},t,u),(function(){n.props.onChange(n.getIndex({startX:n.state.startX,endX:n.state.endX}))}))}}}},{key:"renderBackground",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.fill,a=e.stroke;return l.createElement("rect",{stroke:a,fill:o,x:t,y:n,width:r,height:i})}},{key:"renderPanorama",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.data,a=e.children,s=e.padding,c=l.Children.only(a);return c?l.cloneElement(c,{x:t,y:n,width:r,height:i,margin:s,compact:!0,data:o}):null}},{key:"renderTravellerLayer",value:function(e,n){var r,i,o=this,a=this.props,s=a.y,c=a.travellerWidth,u=a.height,h=a.traveller,d=a.ariaLabel,f=a.data,p=a.startIndex,m=a.endIndex,g=Math.max(e,this.props.x),v=Xne(Xne({},R0(this.props,!1)),{},{x:g,y:s,width:c,height:u}),y=d||"Min value: ".concat(null===(r=f[p])||void 0===r?void 0:r.name,", Max value: ").concat(null===(i=f[m])||void 0===i?void 0:i.name);return l.createElement(Q0,{tabIndex:0,role:"slider","aria-label":y,"aria-valuenow":e,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[n],onTouchStart:this.travellerDragStartHandlers[n],onKeyDown:function(e){["ArrowLeft","ArrowRight"].includes(e.key)&&(e.preventDefault(),e.stopPropagation(),o.handleTravellerMoveKeyboard("ArrowRight"===e.key?1:-1,n))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,v))}},{key:"renderSlide",value:function(e,t){var n=this.props,r=n.y,i=n.height,o=n.stroke,a=n.travellerWidth,s=Math.min(e,t)+a,c=Math.max(Math.abs(t-e)-a,0);return l.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:o,fillOpacity:.2,x:s,y:r,width:c,height:i})}},{key:"renderText",value:function(){var e=this.props,t=e.startIndex,n=e.endIndex,r=e.y,i=e.height,o=e.travellerWidth,a=e.stroke,s=this.state,c=s.startX,u=s.endX,h={pointerEvents:"none",fill:a};return l.createElement(Q0,{className:"recharts-brush-texts"},l.createElement(v6,Wne({textAnchor:"end",verticalAnchor:"middle",x:Math.min(c,u)-5,y:r+i/2},h),this.getTextOfTick(t)),l.createElement(v6,Wne({textAnchor:"start",verticalAnchor:"middle",x:Math.max(c,u)+o+5,y:r+i/2},h),this.getTextOfTick(n)))}},{key:"render",value:function(){var e=this.props,t=e.data,n=e.className,r=e.children,i=e.x,o=e.y,a=e.width,s=e.height,c=e.alwaysShowText,u=this.state,h=u.startX,d=u.endX,f=u.isTextActive,p=u.isSlideMoving,m=u.isTravellerMoving,g=u.isTravellerFocused;if(!t||!t.length||!r0(i)||!r0(o)||!r0(a)||!r0(s)||a<=0||s<=0)return null;var v=G$("recharts-brush",n),y=1===l.Children.count(r),A=function(e,t){if(!e)return null;var n=e.replace(/(\w)/,(function(e){return e.toUpperCase()})),r=Hne.reduce((function(e,r){return Gne(Gne({},e),{},Qne({},r+n,t))}),{});return r[e]=t,r}("userSelect","none");return l.createElement(Q0,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:A},this.renderBackground(),y&&this.renderPanorama(),this.renderSlide(h,d),this.renderTravellerLayer(h,"startX"),this.renderTravellerLayer(d,"endX"),(f||p||m||g||c)&&this.renderText())}}],i=[{key:"renderDefaultTraveller",value:function(e){var t=e.x,n=e.y,r=e.width,i=e.height,o=e.stroke,a=Math.floor(n+i/2)-1;return l.createElement(l.Fragment,null,l.createElement("rect",{x:t,y:n,width:r,height:i,fill:o,stroke:"none"}),l.createElement("line",{x1:t+1,y1:a,x2:t+r-1,y2:a,fill:"none",stroke:"#fff"}),l.createElement("line",{x1:t+1,y1:a+2,x2:t+r-1,y2:a+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(e,n){return l.isValidElement(e)?l.cloneElement(e,n):R$()(e)?e(n):t.renderDefaultTraveller(n)}},{key:"getDerivedStateFromProps",value:function(e,t){var n=e.data,r=e.width,i=e.x,o=e.travellerWidth,a=e.updateId,s=e.startIndex,l=e.endIndex;if(n!==t.prevData||a!==t.prevUpdateId)return Xne({prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r},n&&n.length?function(e){var t=e.data,n=e.startIndex,r=e.endIndex,i=e.x,o=e.width,a=e.travellerWidth;if(!t||!t.length)return{};var s=t.length,l=O5().domain(O$()(0,s)).range([i,i+o-a]),c=l.domain().map((function(e){return l(e)}));return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:l(n),endX:l(r),scale:l,scaleValues:c}}({data:n,width:r,x:i,travellerWidth:o,startIndex:s,endIndex:l}):{scale:null,scaleValues:null});if(t.scale&&(r!==t.prevWidth||i!==t.prevX||o!==t.prevTravellerWidth)){t.scale.range([i,i+r-o]);var c=t.scale.domain().map((function(e){return t.scale(e)}));return{prevData:n,prevTravellerWidth:o,prevUpdateId:a,prevX:i,prevWidth:r,startX:t.scale(e.startIndex),endX:t.scale(e.endIndex),scaleValues:c}}return null}},{key:"getIndexInRange",value:function(e,t){for(var n=0,r=e.length-1;r-n>1;){var i=Math.floor((n+r)/2);e[i]>t?r=i:n=i}return t>=e[r]?r:n}}],r&&Yne(n.prototype,r),i&&Yne(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);function ore(e){return ore="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ore(e)}function are(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?are(Object(n),!0).forEach((function(t){lre(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):are(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lre(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ore(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ore(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ore(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}tre(ire,"displayName","Brush"),tre(ire,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var cre=Math.PI/180,ure=function(e){return 180*e/Math.PI},hre=function(e,t,n,r){return{x:e+Math.cos(-cre*r)*n,y:t+Math.sin(-cre*r)*n}},dre=function(e,t){var n=e.x,r=e.y,i=t.cx,o=t.cy,a=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return Math.sqrt(Math.pow(n-i,2)+Math.pow(r-o,2))}({x:n,y:r},{x:i,y:o});if(a<=0)return{radius:a};var s=(n-i)/a,l=Math.acos(s);return r>o&&(l=2*Math.PI-l),{radius:a,angle:ure(l),angleInRadian:l}},fre=function(e,t){var n=t.startAngle,r=t.endAngle,i=Math.floor(n/360),o=Math.floor(r/360);return e+360*Math.min(i,o)},pre=function(e,t){var n=e.x,r=e.y,i=dre({x:n,y:r},t),o=i.radius,a=i.angle,s=t.innerRadius,l=t.outerRadius;if(o<s||o>l)return!1;if(0===o)return!0;var c,u=function(e){var t=e.startAngle,n=e.endAngle,r=Math.floor(t/360),i=Math.floor(n/360),o=Math.min(r,i);return{startAngle:t-360*o,endAngle:n-360*o}}(t),h=u.startAngle,d=u.endAngle,f=a;if(h<=d){for(;f>d;)f-=360;for(;f<h;)f+=360;c=f>=h&&f<=d}else{for(;f>h;)f-=360;for(;f<d;)f+=360;c=f>=d&&f<=h}return c?sre(sre({},t),{},{radius:o,angle:fre(f,t)}):null};function mre(e){return mre="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mre(e)}var gre=["offset"];function vre(e){return function(e){if(Array.isArray(e))return yre(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return yre(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yre(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function yre(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Are(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function xre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function bre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xre(Object(n),!0).forEach((function(t){_re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xre(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _re(e,t,n){return t=function(e){var t=function(e,t){if("object"!=mre(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=mre(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==mre(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wre(){return wre=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wre.apply(this,arguments)}var Ere=function(e){var t=e.value,n=e.formatter,r=B$()(e.children)?t:e.children;return R$()(n)?n(r):r},Sre=function(e,t,n){var r,i,o=e.position,a=e.viewBox,s=e.offset,c=e.className,u=a,h=u.cx,d=u.cy,f=u.innerRadius,p=u.outerRadius,m=u.startAngle,g=u.endAngle,v=u.clockWise,y=(f+p)/2,A=function(e,t){return t0(t-e)*Math.min(Math.abs(t-e),360)}(m,g),x=A>=0?1:-1;"insideStart"===o?(r=m+x*s,i=v):"insideEnd"===o?(r=g-x*s,i=!v):"end"===o&&(r=g+x*s,i=v),i=A<=0?i:!i;var b=hre(h,d,y,r),_=hre(h,d,y,r+359*(i?1:-1)),w="M".concat(b.x,",").concat(b.y,"\n    A").concat(y,",").concat(y,",0,1,").concat(i?0:1,",\n    ").concat(_.x,",").concat(_.y),E=B$()(e.id)?a0("recharts-radial-line-"):e.id;return l.createElement("text",wre({},n,{dominantBaseline:"central",className:G$("recharts-radial-bar-label",c)}),l.createElement("defs",null,l.createElement("path",{id:E,d:w})),l.createElement("textPath",{xlinkHref:"#".concat(E)},t))},Cre=function(e){var t=e.viewBox,n=e.offset,r=e.position,i=t,o=i.cx,a=i.cy,s=i.innerRadius,l=i.outerRadius,c=(i.startAngle+i.endAngle)/2;if("outside"===r){var u=hre(o,a,l+n,c),h=u.x;return{x:h,y:u.y,textAnchor:h>=o?"start":"end",verticalAnchor:"middle"}}if("center"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===r)return{x:o,y:a,textAnchor:"middle",verticalAnchor:"end"};var d=hre(o,a,(s+l)/2,c);return{x:d.x,y:d.y,textAnchor:"middle",verticalAnchor:"middle"}},Mre=function(e){var t=e.viewBox,n=e.parentViewBox,r=e.offset,i=e.position,o=t,a=o.x,s=o.y,l=o.width,c=o.height,u=c>=0?1:-1,h=u*r,d=u>0?"end":"start",f=u>0?"start":"end",p=l>=0?1:-1,m=p*r,g=p>0?"end":"start",v=p>0?"start":"end";if("top"===i)return bre(bre({},{x:a+l/2,y:s-u*r,textAnchor:"middle",verticalAnchor:d}),n?{height:Math.max(s-n.y,0),width:l}:{});if("bottom"===i)return bre(bre({},{x:a+l/2,y:s+c+h,textAnchor:"middle",verticalAnchor:f}),n?{height:Math.max(n.y+n.height-(s+c),0),width:l}:{});if("left"===i){var y={x:a-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"};return bre(bre({},y),n?{width:Math.max(y.x-n.x,0),height:c}:{})}if("right"===i){var A={x:a+l+m,y:s+c/2,textAnchor:v,verticalAnchor:"middle"};return bre(bre({},A),n?{width:Math.max(n.x+n.width-A.x,0),height:c}:{})}var x=n?{width:l,height:c}:{};return"insideLeft"===i?bre({x:a+m,y:s+c/2,textAnchor:v,verticalAnchor:"middle"},x):"insideRight"===i?bre({x:a+l-m,y:s+c/2,textAnchor:g,verticalAnchor:"middle"},x):"insideTop"===i?bre({x:a+l/2,y:s+h,textAnchor:"middle",verticalAnchor:f},x):"insideBottom"===i?bre({x:a+l/2,y:s+c-h,textAnchor:"middle",verticalAnchor:d},x):"insideTopLeft"===i?bre({x:a+m,y:s+h,textAnchor:v,verticalAnchor:f},x):"insideTopRight"===i?bre({x:a+l-m,y:s+h,textAnchor:g,verticalAnchor:f},x):"insideBottomLeft"===i?bre({x:a+m,y:s+c-h,textAnchor:v,verticalAnchor:d},x):"insideBottomRight"===i?bre({x:a+l-m,y:s+c-h,textAnchor:g,verticalAnchor:d},x):Y$()(i)&&(r0(i.x)||n0(i.x))&&(r0(i.y)||n0(i.y))?bre({x:a+s0(i.x,l),y:s+s0(i.y,c),textAnchor:"end",verticalAnchor:"end"},x):bre({x:a+l/2,y:s+c/2,textAnchor:"middle",verticalAnchor:"middle"},x)},Tre=function(e){return"cx"in e&&r0(e.cx)};function Ire(e){var t,n=e.offset,r=bre({offset:void 0===n?5:n},Are(e,gre)),i=r.viewBox,o=r.position,a=r.value,s=r.children,c=r.content,u=r.className,h=void 0===u?"":u,d=r.textBreakAll;if(!i||B$()(a)&&B$()(s)&&!(0,l.isValidElement)(c)&&!R$()(c))return null;if((0,l.isValidElement)(c))return(0,l.cloneElement)(c,r);if(R$()(c)){if(t=(0,l.createElement)(c,r),(0,l.isValidElement)(t))return t}else t=Ere(r);var f=Tre(i),p=R0(r,!0);if(f&&("insideStart"===o||"insideEnd"===o||"end"===o))return Sre(r,t,p);var m=f?Cre(r):Mre(r);return l.createElement(v6,wre({className:G$("recharts-label",h)},p,m,{breakAll:d}),t)}Ire.displayName="Label";var Bre=function(e){var t=e.cx,n=e.cy,r=e.angle,i=e.startAngle,o=e.endAngle,a=e.r,s=e.radius,l=e.innerRadius,c=e.outerRadius,u=e.x,h=e.y,d=e.top,f=e.left,p=e.width,m=e.height,g=e.clockWise,v=e.labelViewBox;if(v)return v;if(r0(p)&&r0(m)){if(r0(u)&&r0(h))return{x:u,y:h,width:p,height:m};if(r0(d)&&r0(f))return{x:d,y:f,width:p,height:m}}return r0(u)&&r0(h)?{x:u,y:h,width:0,height:0}:r0(t)&&r0(n)?{cx:t,cy:n,startAngle:i||r||0,endAngle:o||r||0,innerRadius:l||0,outerRadius:c||s||a||0,clockWise:g}:e.viewBox?e.viewBox:{}};Ire.parseViewBox=Bre,Ire.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=e.children,i=Bre(e),o=M0(r,Ire).map((function(e,n){return(0,l.cloneElement)(e,{viewBox:t||i,key:"label-".concat(n)})}));if(!n)return o;var a=function(e,t){return e?!0===e?l.createElement(Ire,{key:"label-implicit",viewBox:t}):i0(e)?l.createElement(Ire,{key:"label-implicit",viewBox:t,value:e}):(0,l.isValidElement)(e)?e.type===Ire?(0,l.cloneElement)(e,{key:"label-implicit",viewBox:t}):l.createElement(Ire,{key:"label-implicit",content:e,viewBox:t}):R$()(e)?l.createElement(Ire,{key:"label-implicit",content:e,viewBox:t}):Y$()(e)?l.createElement(Ire,wre({viewBox:t},e,{key:"label-implicit"})):null:null}(e.label,t||i);return[a].concat(vre(o))};var Pre=function(e,t){var n=e.alwaysShow,r=e.ifOverflow;return n&&(r="extendDomain"),r===t},Rre=n(1733),Dre=n.n(Rre),Ore=n(7002),kre=n.n(Ore),Lre=function(e){return null};Lre.displayName="Cell";var Fre=n(4065),zre=n.n(Fre);function Ure(e){return Ure="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ure(e)}var Nre=["valueAccessor"],jre=["data","dataKey","clockWise","id","textBreakAll"];function Gre(e){return function(e){if(Array.isArray(e))return Qre(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return Qre(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qre(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qre(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Hre(){return Hre=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hre.apply(this,arguments)}function Vre(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wre(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vre(Object(n),!0).forEach((function(t){qre(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vre(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qre(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ure(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ure(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ure(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xre(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Yre=function(e){return Array.isArray(e.value)?zre()(e.value):e.value};function Jre(e){var t=e.valueAccessor,n=void 0===t?Yre:t,r=Xre(e,Nre),i=r.data,o=r.dataKey,a=r.clockWise,s=r.id,c=r.textBreakAll,u=Xre(r,jre);return i&&i.length?l.createElement(Q0,{className:"recharts-label-list"},i.map((function(e,t){var r=B$()(o)?n(e,t):Ane(e&&e.payload,o),i=B$()(s)?{}:{id:"".concat(s,"-").concat(t)};return l.createElement(Ire,Hre({},R0(e,!0),u,i,{parentViewBox:e.parentViewBox,value:r,textBreakAll:c,viewBox:Ire.parseViewBox(B$()(a)?e:Wre(Wre({},e),{},{clockWise:a})),key:"label-".concat(t),index:t}))}))):null}Jre.displayName="LabelList",Jre.renderCallByParent=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(!e||!e.children&&n&&!e.label)return null;var r=M0(e.children,Jre).map((function(e,n){return(0,l.cloneElement)(e,{data:t,key:"labelList-".concat(n)})}));if(!n)return r;var i=function(e,t){return e?!0===e?l.createElement(Jre,{key:"labelList-implicit",data:t}):l.isValidElement(e)||R$()(e)?l.createElement(Jre,{key:"labelList-implicit",data:t,content:e}):Y$()(e)?l.createElement(Jre,Hre({data:t},e,{key:"labelList-implicit"})):null:null}(e.label,t);return[i].concat(Gre(r))};var Kre=n(2322),Zre=n.n(Kre),$re=n(6361),eie=n.n($re);function tie(e){return tie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tie(e)}function nie(){return nie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nie.apply(this,arguments)}function rie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return iie(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return iie(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iie(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function aie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oie(Object(n),!0).forEach((function(t){sie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sie(e,t,n){return t=function(e){var t=function(e,t){if("object"!=tie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=tie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==tie(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var lie=function(e,t,n,r,i){var o,a=n-r;return o="M ".concat(e,",").concat(t),o+="L ".concat(e+n,",").concat(t),o+="L ".concat(e+n-a/2,",").concat(t+i),o+="L ".concat(e+n-a/2-r,",").concat(t+i),o+="L ".concat(e,",").concat(t," Z")},cie={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},uie=function(e){var t=aie(aie({},cie),e),n=(0,l.useRef)(),r=rie((0,l.useState)(-1),2),i=r[0],o=r[1];(0,l.useEffect)((function(){if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&o(e)}catch(t){}}),[]);var a=t.x,s=t.y,c=t.upperWidth,u=t.lowerWidth,h=t.height,d=t.className,f=t.animationEasing,p=t.animationDuration,m=t.animationBegin,g=t.isUpdateAnimationActive;if(a!==+a||s!==+s||c!==+c||u!==+u||h!==+h||0===c&&0===u||0===h)return null;var v=G$("recharts-trapezoid",d);return g?l.createElement(h5,{canBegin:i>0,from:{upperWidth:0,lowerWidth:0,height:h,x:a,y:s},to:{upperWidth:c,lowerWidth:u,height:h,x:a,y:s},duration:p,animationEasing:f,isActive:g},(function(e){var r=e.upperWidth,o=e.lowerWidth,a=e.height,s=e.x,c=e.y;return l.createElement(h5,{canBegin:i>0,from:"0px ".concat(-1===i?1:i,"px"),to:"".concat(i,"px 0px"),attributeName:"strokeDasharray",begin:m,duration:p,easing:f},l.createElement("path",nie({},R0(t,!0),{className:v,d:lie(s,c,r,o,a),ref:n})))})):l.createElement("g",null,l.createElement("path",nie({},R0(t,!0),{className:v,d:lie(a,s,c,u,h)})))};function hie(e){return hie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hie(e)}function die(){return die=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},die.apply(this,arguments)}function fie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fie(Object(n),!0).forEach((function(t){mie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function mie(e,t,n){return t=function(e){var t=function(e,t){if("object"!=hie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=hie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==hie(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var gie=function(e){var t=e.cx,n=e.cy,r=e.radius,i=e.angle,o=e.sign,a=e.isExternal,s=e.cornerRadius,l=e.cornerIsExternal,c=s*(a?1:-1)+r,u=Math.asin(s/c)/cre,h=l?i:i+o*u,d=l?i-o*u:i;return{center:hre(t,n,c,h),circleTangency:hre(t,n,r,h),lineTangency:hre(t,n,c*Math.cos(u*cre),d),theta:u}},vie=function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.startAngle,a=function(e,t){return t0(t-e)*Math.min(Math.abs(t-e),359.999)}(o,e.endAngle),s=o+a,l=hre(t,n,i,o),c=hre(t,n,i,s),u="M ".concat(l.x,",").concat(l.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(a)>180),",").concat(+(o>s),",\n    ").concat(c.x,",").concat(c.y,"\n  ");if(r>0){var h=hre(t,n,r,o),d=hre(t,n,r,s);u+="L ".concat(d.x,",").concat(d.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(a)>180),",").concat(+(o<=s),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},yie={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Aie=function(e){var t=pie(pie({},yie),e),n=t.cx,r=t.cy,i=t.innerRadius,o=t.outerRadius,a=t.cornerRadius,s=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,h=t.endAngle,d=t.className;if(o<i||u===h)return null;var f,p=G$("recharts-sector",d),m=o-i,g=s0(a,m,0,!0);return f=g>0&&Math.abs(u-h)<360?function(e){var t=e.cx,n=e.cy,r=e.innerRadius,i=e.outerRadius,o=e.cornerRadius,a=e.forceCornerRadius,s=e.cornerIsExternal,l=e.startAngle,c=e.endAngle,u=t0(c-l),h=gie({cx:t,cy:n,radius:i,angle:l,sign:u,cornerRadius:o,cornerIsExternal:s}),d=h.circleTangency,f=h.lineTangency,p=h.theta,m=gie({cx:t,cy:n,radius:i,angle:c,sign:-u,cornerRadius:o,cornerIsExternal:s}),g=m.circleTangency,v=m.lineTangency,y=m.theta,A=s?Math.abs(l-c):Math.abs(l-c)-p-y;if(A<0)return a?"M ".concat(f.x,",").concat(f.y,"\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*o,",0\n        a").concat(o,",").concat(o,",0,0,1,").concat(2*-o,",0\n      "):vie({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var x="M ".concat(f.x,",").concat(f.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(d.x,",").concat(d.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(A>180),",").concat(+(u<0),",").concat(g.x,",").concat(g.y,"\n    A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(v.x,",").concat(v.y,"\n  ");if(r>0){var b=gie({cx:t,cy:n,radius:r,angle:l,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),_=b.circleTangency,w=b.lineTangency,E=b.theta,S=gie({cx:t,cy:n,radius:r,angle:c,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:s}),C=S.circleTangency,M=S.lineTangency,T=S.theta,I=s?Math.abs(l-c):Math.abs(l-c)-E-T;if(I<0&&0===o)return"".concat(x,"L").concat(t,",").concat(n,"Z");x+="L".concat(M.x,",").concat(M.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(C.x,",").concat(C.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(I>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,"\n      A").concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(w.x,",").concat(w.y,"Z")}else x+="L".concat(t,",").concat(n,"Z");return x}({cx:n,cy:r,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,m/2),forceCornerRadius:s,cornerIsExternal:c,startAngle:u,endAngle:h}):vie({cx:n,cy:r,innerRadius:i,outerRadius:o,startAngle:u,endAngle:h}),l.createElement("path",die({},R0(t,!0),{className:p,d:f,role:"img"}))},xie=["option","shapeType","propTransformer","activeClassName","isActive"];function bie(e){return bie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bie(e)}function _ie(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function wie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Eie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wie(Object(n),!0).forEach((function(t){Sie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Sie(e,t,n){return t=function(e){var t=function(e,t){if("object"!=bie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=bie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==bie(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cie(e,t){return Eie(Eie({},t),e)}function Mie(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return l.createElement(_5,n);case"trapezoid":return l.createElement(uie,n);case"sector":return l.createElement(Aie,n);case"symbols":if(function(e){return"symbols"===e}(t))return l.createElement(b2,n);break;default:return null}}function Tie(e){var t,n=e.option,r=e.shapeType,i=e.propTransformer,o=void 0===i?Cie:i,a=e.activeClassName,s=void 0===a?"recharts-active-shape":a,c=e.isActive,u=_ie(e,xie);if((0,l.isValidElement)(n))t=(0,l.cloneElement)(n,Eie(Eie({},u),function(e){return(0,l.isValidElement)(e)?e.props:e}(n)));else if(R$()(n))t=n(u);else if(Zre()(n)&&!eie()(n)){var h=o(n,u);t=l.createElement(Mie,{shapeType:r,elementProps:h})}else{var d=u;t=l.createElement(Mie,{shapeType:r,elementProps:d})}return c?l.createElement(Q0,{className:s},t):t}function Iie(e,t){return null!=t&&"trapezoids"in e.props}function Bie(e,t){return null!=t&&"sectors"in e.props}function Pie(e,t){return null!=t&&"points"in e.props}function Rie(e,t){var n,r,i=e.x===(null===t||void 0===t||null===(n=t.labelViewBox)||void 0===n?void 0:n.x)||e.x===t.x,o=e.y===(null===t||void 0===t||null===(r=t.labelViewBox)||void 0===r?void 0:r.y)||e.y===t.y;return i&&o}function Die(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function Oie(e,t){var n=e.x===t.x,r=e.y===t.y,i=e.z===t.z;return n&&r&&i}function kie(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,i=function(e,t){var n;return Iie(e,t)?n="trapezoids":Bie(e,t)?n="sectors":Pie(e,t)&&(n="points"),n}(n,t),o=function(e,t){var n,r;return Iie(e,t)?null===(n=t.tooltipPayload)||void 0===n||null===(n=n[0])||void 0===n||null===(n=n.payload)||void 0===n?void 0:n.payload:Bie(e,t)?null===(r=t.tooltipPayload)||void 0===r||null===(r=r[0])||void 0===r||null===(r=r.payload)||void 0===r?void 0:r.payload:Pie(e,t)?t.payload:{}}(n,t),a=r.filter((function(e,r){var a=Cte()(o,e),s=n.props[i].filter((function(e){var r=function(e,t){var n;return Iie(e,t)?n=Rie:Bie(e,t)?n=Die:Pie(e,t)&&(n=Oie),n}(n,t);return r(e,t)})),l=n.props[i].indexOf(s[s.length-1]);return a&&r===l}));return r.indexOf(a[a.length-1])}var Lie=["x","y"];function Fie(e){return Fie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Fie(e)}function zie(){return zie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},zie.apply(this,arguments)}function Uie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Nie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Uie(Object(n),!0).forEach((function(t){jie(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function jie(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Fie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Fie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Fie(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gie(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Qie(e,t){var n=e.x,r=e.y,i=Gie(e,Lie),o="".concat(n),a=parseInt(o,10),s="".concat(r),l=parseInt(s,10),c="".concat(t.height||i.height),u=parseInt(c,10),h="".concat(t.width||i.width),d=parseInt(h,10);return Nie(Nie(Nie(Nie(Nie({},t),i),a?{x:a}:{}),l?{y:l}:{}),{},{height:u,width:d,name:t.name,radius:t.radius})}function Hie(e){return l.createElement(Tie,zie({shapeType:"rectangle",propTransformer:Qie,activeClassName:"recharts-active-bar"},e))}var Vie,Wie=["value","background"];function qie(e){return qie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qie(e)}function Xie(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Yie(){return Yie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Yie.apply(this,arguments)}function Jie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Kie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jie(Object(n),!0).forEach((function(t){ioe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Zie(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ooe(r.key),r)}}function $ie(e,t,n){return t=toe(t),function(e,t){if(t&&("object"===qie(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return noe(e)}(e,eoe()?Reflect.construct(t,n||[],toe(e).constructor):t.apply(e,n))}function eoe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(eoe=function(){return!!e})()}function toe(e){return toe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},toe(e)}function noe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function roe(e,t){return roe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},roe(e,t)}function ioe(e,t,n){return(t=ooe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ooe(e){var t=function(e,t){if("object"!=qie(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=qie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==qie(t)?t:String(t)}var aoe=function(e){function t(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ioe(noe(e=$ie(this,t,[].concat(r))),"state",{isAnimationFinished:!1}),ioe(noe(e),"id",a0("recharts-bar-")),ioe(noe(e),"handleAnimationEnd",(function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),t&&t()})),ioe(noe(e),"handleAnimationStart",(function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),t&&t()})),e}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&roe(e,t)}(t,e),n=t,r=[{key:"renderRectanglesStatically",value:function(e){var t=this,n=this.props,r=n.shape,i=n.dataKey,o=n.activeIndex,a=n.activeBar,s=R0(this.props,!1);return e&&e.map((function(e,n){var c=n===o,u=c?a:r,h=Kie(Kie(Kie({},s),e),{},{isActive:c,option:u,index:n,dataKey:i,onAnimationStart:t.handleAnimationStart,onAnimationEnd:t.handleAnimationEnd});return l.createElement(Q0,Yie({className:"recharts-bar-rectangle"},y0(t.props,e,n),{key:"rectangle-".concat(null===e||void 0===e?void 0:e.x,"-").concat(null===e||void 0===e?void 0:e.y,"-").concat(null===e||void 0===e?void 0:e.value)}),l.createElement(Hie,h))}))}},{key:"renderRectanglesWithAnimation",value:function(){var e=this,t=this.props,n=t.data,r=t.layout,i=t.isAnimationActive,o=t.animationBegin,a=t.animationDuration,s=t.animationEasing,c=t.animationId,u=this.state.prevData;return l.createElement(h5,{begin:o,duration:a,isActive:i,easing:s,from:{t:0},to:{t:1},key:"bar-".concat(c),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},(function(t){var i=t.t,o=n.map((function(e,t){var n=u&&u[t];if(n){var o=c0(n.x,e.x),a=c0(n.y,e.y),s=c0(n.width,e.width),l=c0(n.height,e.height);return Kie(Kie({},e),{},{x:o(i),y:a(i),width:s(i),height:l(i)})}if("horizontal"===r){var c=c0(0,e.height)(i);return Kie(Kie({},e),{},{y:e.y+e.height-c,height:c})}var h=c0(0,e.width)(i);return Kie(Kie({},e),{},{width:h})}));return l.createElement(Q0,null,e.renderRectanglesStatically(o))}))}},{key:"renderRectangles",value:function(){var e=this.props,t=e.data,n=e.isAnimationActive,r=this.state.prevData;return!(n&&t&&t.length)||r&&Cte()(r,t)?this.renderRectanglesStatically(t):this.renderRectanglesWithAnimation()}},{key:"renderBackground",value:function(){var e=this,t=this.props,n=t.data,r=t.dataKey,i=t.activeIndex,o=R0(this.props.background,!1);return n.map((function(t,n){t.value;var a=t.background,s=Xie(t,Wie);if(!a)return null;var c=Kie(Kie(Kie(Kie(Kie({},s),{},{fill:"#eee"},a),o),y0(e.props,t,n)),{},{onAnimationStart:e.handleAnimationStart,onAnimationEnd:e.handleAnimationEnd,dataKey:r,index:n,key:"background-bar-".concat(n),className:"recharts-bar-background-rectangle"});return l.createElement(Hie,Yie({option:e.props.background,isActive:n===i},c))}))}},{key:"renderErrorBar",value:function(e,t){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var n=this.props,r=n.data,i=n.xAxis,o=n.yAxis,a=n.layout,s=M0(n.children,sne);if(!s)return null;var c="vertical"===a?r[0].height/2:r[0].width/2,u=function(e,t){var n=Array.isArray(e.value)?e.value[1]:e.value;return{x:e.x,y:e.y,value:n,errorVal:Ane(e,t)}},h={clipPath:e?"url(#clipPath-".concat(t,")"):null};return l.createElement(Q0,h,s.map((function(e){return l.cloneElement(e,{key:"error-bar-".concat(t,"-").concat(e.props.dataKey),data:r,xAxis:i,yAxis:o,layout:a,offset:c,dataPointFormatter:u})})))}},{key:"render",value:function(){var e=this.props,t=e.hide,n=e.data,r=e.className,i=e.xAxis,o=e.yAxis,a=e.left,s=e.top,c=e.width,u=e.height,h=e.isAnimationActive,d=e.background,f=e.id;if(t||!n||!n.length)return null;var p=this.state.isAnimationFinished,m=G$("recharts-bar",r),g=i&&i.allowDataOverflow,v=o&&o.allowDataOverflow,y=g||v,A=B$()(f)?this.id:f;return l.createElement(Q0,{className:m},g||v?l.createElement("defs",null,l.createElement("clipPath",{id:"clipPath-".concat(A)},l.createElement("rect",{x:g?a:a-c/2,y:v?s:s-u/2,width:g?c:2*c,height:v?u:2*u}))):null,l.createElement(Q0,{className:"recharts-bar-rectangles",clipPath:y?"url(#clipPath-".concat(A,")"):null},d?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(y,A),(!h||p)&&Jre.renderCallByParent(this.props,n))}}],i=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curData:e.data,prevData:t.curData}:e.data!==t.curData?{curData:e.data}:null}}],r&&Zie(n.prototype,r),i&&Zie(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.PureComponent);function soe(e){return soe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},soe(e)}function loe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,doe(r.key),r)}}function coe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function uoe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?coe(Object(n),!0).forEach((function(t){hoe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):coe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function hoe(e,t,n){return(t=doe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function doe(e){var t=function(e,t){if("object"!=soe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=soe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==soe(t)?t:String(t)}Vie=aoe,ioe(aoe,"displayName","Bar"),ioe(aoe,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!v1.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"}),ioe(aoe,"getComposedData",(function(e){var t=e.props,n=e.item,r=e.barPosition,i=e.bandSize,o=e.xAxis,a=e.yAxis,s=e.xAxisTicks,l=e.yAxisTicks,c=e.stackedData,u=e.dataStartIndex,h=e.displayedData,d=e.offset,f=function(e,t){if(!e)return null;for(var n=0,r=e.length;n<r;n++)if(e[n].item===t)return e[n].position;return null}(r,n);if(!f)return null;var p=t.layout,m=n.props,g=m.dataKey,v=m.children,y=m.minPointSize,A="horizontal"===p?a:o,x=c?A.scale.domain():null,b=function(e){var t=e.numericAxis,n=t.scale.domain();if("number"===t.type){var r=Math.min(n[0],n[1]),i=Math.max(n[0],n[1]);return r<=0&&i>=0?0:i<0?i:r}return n[0]}({numericAxis:A}),_=M0(v,Lre),w=h.map((function(e,t){var r,h,d,m,v,A;c?r=function(e,t){if(!t||2!==t.length||!r0(t[0])||!r0(t[1]))return e;var n=Math.min(t[0],t[1]),r=Math.max(t[0],t[1]),i=[e[0],e[1]];return(!r0(e[0])||e[0]<n)&&(i[0]=n),(!r0(e[1])||e[1]>r)&&(i[1]=r),i[0]>r&&(i[0]=r),i[1]<n&&(i[1]=n),i}(c[u+t],x):(r=Ane(e,g),Array.isArray(r)||(r=[b,r]));var w=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(n,r){if("number"===typeof e)return e;var i="number"===typeof n;return i?e(n,r):(i||V$(!1),t)}}(y,Vie.defaultProps.minPointSize)(r[1],t);if("horizontal"===p){var E,S=[a.scale(r[0]),a.scale(r[1])],C=S[0],M=S[1];h=Rne({axis:o,ticks:s,bandSize:i,offset:f.offset,entry:e,index:t}),d=null!==(E=null!==M&&void 0!==M?M:C)&&void 0!==E?E:void 0,m=f.size;var T=C-M;if(v=Number.isNaN(T)?0:T,A={x:h,y:a.y,width:m,height:a.height},Math.abs(w)>0&&Math.abs(v)<Math.abs(w)){var I=t0(v||w)*(Math.abs(w)-Math.abs(v));d-=I,v+=I}}else{var B=[o.scale(r[0]),o.scale(r[1])],P=B[0],R=B[1];if(h=P,d=Rne({axis:a,ticks:l,bandSize:i,offset:f.offset,entry:e,index:t}),m=R-P,v=f.size,A={x:o.x,y:d,width:o.width,height:v},Math.abs(w)>0&&Math.abs(m)<Math.abs(w))m+=t0(m||w)*(Math.abs(w)-Math.abs(m))}return Kie(Kie(Kie({},e),{},{x:h,y:d,width:m,height:v,value:c?r:r[1],payload:e,background:A},_&&_[t]&&_[t].props),{},{tooltipPayload:[Une(n,e)],tooltipPosition:{x:h+m/2,y:d+v/2}})}));return Kie({data:w,layout:p},d)}));var foe=function(e,t){var n=e.x,r=e.y,i=t.x,o=t.y;return{x:Math.min(n,i),y:Math.min(r,o),width:Math.abs(i-n),height:Math.abs(o-r)}},poe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scale=t}var t,n,r;return t=e,n=[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.bandAware,r=t.position;if(void 0!==e){if(r)switch(r){case"start":default:return this.scale(e);case"middle":var i=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+i;case"end":var o=this.bandwidth?this.bandwidth():0;return this.scale(e)+o}if(n){var a=this.bandwidth?this.bandwidth()/2:0;return this.scale(e)+a}return this.scale(e)}}},{key:"isInRange",value:function(e){var t=this.range(),n=t[0],r=t[t.length-1];return n<=r?e>=n&&e<=r:e>=r&&e<=n}}],r=[{key:"create",value:function(t){return new e(t)}}],n&&loe(t.prototype,n),r&&loe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();hoe(poe,"EPS",1e-4);var moe=function(e){var t=Object.keys(e).reduce((function(t,n){return uoe(uoe({},t),{},hoe({},n,poe.create(e[n])))}),{});return uoe(uoe({},t),{},{apply:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.bandAware,i=n.position;return Dre()(e,(function(e,n){return t[n].apply(e,{bandAware:r,position:i})}))},isInRange:function(e){return kre()(e,(function(e,n){return t[n].isInRange(e)}))}})};var goe=function(e){var t=e.width,n=e.height,r=function(e){return(e%180+180)%180}(arguments.length>1&&void 0!==arguments[1]?arguments[1]:0),i=r*Math.PI/180,o=Math.atan(n/t),a=i>o&&i<Math.PI-o?n/Math.sin(i):t/Math.cos(i);return Math.abs(a)};function voe(e){return voe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},voe(e)}function yoe(){return yoe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yoe.apply(this,arguments)}function Aoe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xoe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Aoe(Object(n),!0).forEach((function(t){boe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Aoe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function boe(e,t,n){return t=function(e){var t=function(e,t){if("object"!=voe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=voe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==voe(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _oe(e){var t=e.x,n=e.y,r=e.r,i=e.alwaysShow,o=e.clipPathId,a=i0(t),s=i0(n);if(D1(void 0===i,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!a||!s)return null;var c=function(e){var t=e.x,n=e.y,r=e.xAxis,i=e.yAxis,o=moe({x:r.scale,y:i.scale}),a=o.apply({x:t,y:n},{bandAware:!0});return Pre(e,"discard")&&!o.isInRange(a)?null:a}(e);if(!c)return null;var u=c.x,h=c.y,d=e.shape,f=e.className,p=xoe(xoe({clipPath:Pre(e,"hidden")?"url(#".concat(o,")"):void 0},R0(e,!0)),{},{cx:u,cy:h});return l.createElement(Q0,{className:G$("recharts-reference-dot",f)},_oe.renderDot(d,p),Ire.renderCallByParent(e,{x:u-r,y:h-r,width:2*r,height:2*r}))}_oe.displayName="ReferenceDot",_oe.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1},_oe.renderDot=function(e,t){return l.isValidElement(e)?l.cloneElement(e,t):R$()(e)?e(t):l.createElement(J2,yoe({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"}))};var woe=n(4597),Eoe=n.n(woe),Soe=n(8990),Coe=n.n(Soe),Moe=n(5797),Toe=n.n(Moe)()((function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}}),(function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}));var Ioe=(0,l.createContext)(void 0),Boe=(0,l.createContext)(void 0),Poe=(0,l.createContext)(void 0),Roe=(0,l.createContext)({}),Doe=(0,l.createContext)(void 0),Ooe=(0,l.createContext)(0),koe=(0,l.createContext)(0),Loe=function(e){var t=e.state,n=t.xAxisMap,r=t.yAxisMap,i=t.offset,o=e.clipPathId,a=e.children,s=e.width,c=e.height,u=Toe(i);return l.createElement(Ioe.Provider,{value:n},l.createElement(Boe.Provider,{value:r},l.createElement(Roe.Provider,{value:i},l.createElement(Poe.Provider,{value:u},l.createElement(Doe.Provider,{value:o},l.createElement(Ooe.Provider,{value:c},l.createElement(koe.Provider,{value:s},a)))))))};var Foe=function(e){var t=(0,l.useContext)(Ioe);null==t&&V$(!1);var n=t[e];return null==n&&V$(!1),n},zoe=function(){var e=(0,l.useContext)(Ioe);return l0(e)},Uoe=function(){var e=(0,l.useContext)(Boe);return Coe()(e,(function(e){return kre()(e.domain,Number.isFinite)}))||l0(e)},Noe=function(e){var t=(0,l.useContext)(Boe);null==t&&V$(!1);var n=t[e];return null==n&&V$(!1),n},joe=function(){return(0,l.useContext)(Roe)},Goe=function(){return(0,l.useContext)(koe)},Qoe=function(){return(0,l.useContext)(Ooe)};function Hoe(e){return Hoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hoe(e)}function Voe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Woe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Voe(Object(n),!0).forEach((function(t){qoe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Voe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qoe(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Hoe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Hoe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Hoe(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xoe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Yoe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yoe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yoe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Joe(){return Joe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Joe.apply(this,arguments)}function Koe(e){var t=e.x,n=e.y,r=e.segment,i=e.xAxisId,o=e.yAxisId,a=e.shape,s=e.className,c=e.alwaysShow,u=(0,l.useContext)(Doe),h=Foe(i),d=Noe(o),f=(0,l.useContext)(Poe);if(!u||!f)return null;D1(void 0===c,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var p=function(e,t,n,r,i,o,a,s,l){var c=i.x,u=i.y,h=i.width,d=i.height;if(n){var f=l.y,p=e.y.apply(f,{position:o});if(Pre(l,"discard")&&!e.y.isInRange(p))return null;var m=[{x:c+h,y:p},{x:c,y:p}];return"left"===s?m.reverse():m}if(t){var g=l.x,v=e.x.apply(g,{position:o});if(Pre(l,"discard")&&!e.x.isInRange(v))return null;var y=[{x:v,y:u+d},{x:v,y:u}];return"top"===a?y.reverse():y}if(r){var A=l.segment.map((function(t){return e.apply(t,{position:o})}));return Pre(l,"discard")&&Eoe()(A,(function(t){return!e.isInRange(t)}))?null:A}return null}(moe({x:h.scale,y:d.scale}),i0(t),i0(n),r&&2===r.length,f,e.position,h.orientation,d.orientation,e);if(!p)return null;var m=Xoe(p,2),g=m[0],v=g.x,y=g.y,A=m[1],x=A.x,b=A.y,_=Woe(Woe({clipPath:Pre(e,"hidden")?"url(#".concat(u,")"):void 0},R0(e,!0)),{},{x1:v,y1:y,x2:x,y2:b});return l.createElement(Q0,{className:G$("recharts-reference-line",s)},function(e,t){return l.isValidElement(e)?l.cloneElement(e,t):R$()(e)?e(t):l.createElement("line",Joe({},t,{className:"recharts-reference-line-line"}))}(a,_),Ire.renderCallByParent(e,function(e){var t=e.x1,n=e.y1,r=e.x2,i=e.y2;return foe({x:t,y:n},{x:r,y:i})}({x1:v,y1:y,x2:x,y2:b})))}function Zoe(e){return Zoe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zoe(e)}function $oe(){return $oe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$oe.apply(this,arguments)}function eae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eae(Object(n),!0).forEach((function(t){nae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nae(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Zoe(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Zoe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Zoe(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Koe.displayName="ReferenceLine",Koe.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function rae(e){var t=e.x1,n=e.x2,r=e.y1,i=e.y2,o=e.className,a=e.alwaysShow,s=e.clipPathId;D1(void 0===a,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var c=i0(t),u=i0(n),h=i0(r),d=i0(i),f=e.shape;if(!c&&!u&&!h&&!d&&!f)return null;var p=function(e,t,n,r,i){var o=i.x1,a=i.x2,s=i.y1,l=i.y2,c=i.xAxis,u=i.yAxis;if(!c||!u)return null;var h=moe({x:c.scale,y:u.scale}),d={x:e?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:n?h.y.apply(s,{position:"start"}):h.y.rangeMin},f={x:t?h.x.apply(a,{position:"end"}):h.x.rangeMax,y:r?h.y.apply(l,{position:"end"}):h.y.rangeMax};return!Pre(i,"discard")||h.isInRange(d)&&h.isInRange(f)?foe(d,f):null}(c,u,h,d,e);if(!p&&!f)return null;var m=Pre(e,"hidden")?"url(#".concat(s,")"):void 0;return l.createElement(Q0,{className:G$("recharts-reference-area",o)},rae.renderRect(f,tae(tae({clipPath:m},R0(e,!0)),p)),Ire.renderCallByParent(e,p))}function iae(e){return function(e){if(Array.isArray(e))return oae(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return oae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oae(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}rae.displayName="ReferenceArea",rae.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1},rae.renderRect=function(e,t){return l.isValidElement(e)?l.cloneElement(e,t):R$()(e)?e(t):l.createElement(_5,$oe({},t,{className:"recharts-reference-area-rect"}))};var aae=function(e,t,n,r,i){var o=M0(e,Koe),a=M0(e,_oe),s=[].concat(iae(o),iae(a)),l=M0(e,rae),c="".concat(r,"Id"),u=r[0],h=t;if(s.length&&(h=s.reduce((function(e,t){if(t.props[c]===n&&Pre(t.props,"extendDomain")&&r0(t.props[u])){var r=t.props[u];return[Math.min(e[0],r),Math.max(e[1],r)]}return e}),h)),l.length){var d="".concat(u,"1"),f="".concat(u,"2");h=l.reduce((function(e,t){if(t.props[c]===n&&Pre(t.props,"extendDomain")&&r0(t.props[d])&&r0(t.props[f])){var r=t.props[d],i=t.props[f];return[Math.min(e[0],r,i),Math.max(e[1],r,i)]}return e}),h)}return i&&i.length&&(h=i.reduce((function(e,t){return r0(t)?[Math.min(e[0],t),Math.max(e[1],t)]:e}),h)),h},sae=n(7283),lae=new(n.n(sae)()),cae="recharts.syncMouseEvents";function uae(e){return uae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},uae(e)}function hae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,fae(r.key),r)}}function dae(e,t,n){return(t=fae(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fae(e){var t=function(e,t){if("object"!=uae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=uae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==uae(t)?t:String(t)}var pae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),dae(this,"activeIndex",0),dae(this,"coordinateList",[]),dae(this,"layout","horizontal")}var t,n,r;return t=e,n=[{key:"setDetails",value:function(e){var t,n=e.coordinateList,r=void 0===n?null:n,i=e.container,o=void 0===i?null:i,a=e.layout,s=void 0===a?null:a,l=e.offset,c=void 0===l?null:l,u=e.mouseHandlerCallback,h=void 0===u?null:u;this.coordinateList=null!==(t=null!==r&&void 0!==r?r:this.coordinateList)&&void 0!==t?t:[],this.container=null!==o&&void 0!==o?o:this.container,this.layout=null!==s&&void 0!==s?s:this.layout,this.offset=null!==c&&void 0!==c?c:this.offset,this.mouseHandlerCallback=null!==h&&void 0!==h?h:this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(e){if(0!==this.coordinateList.length)switch(e.key){case"ArrowRight":if("horizontal"!==this.layout)return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break;case"ArrowLeft":if("horizontal"!==this.layout)return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse()}}},{key:"setIndex",value:function(e){this.activeIndex=e}},{key:"spoofMouse",value:function(){var e,t;if("horizontal"===this.layout&&0!==this.coordinateList.length){var n=this.container.getBoundingClientRect(),r=n.x,i=n.y,o=n.height,a=this.coordinateList[this.activeIndex].coordinate,s=(null===(e=window)||void 0===e?void 0:e.scrollX)||0,l=(null===(t=window)||void 0===t?void 0:t.scrollY)||0,c=r+a+s,u=i+this.offset.top+o/2+l;this.mouseHandlerCallback({pageX:c,pageY:u})}}}],n&&hae(t.prototype,n),r&&hae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function mae(){}function gae(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function vae(e){this._context=e}function yae(e){this._context=e}function Aae(e){this._context=e}vae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:gae(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:gae(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},yae.prototype={areaStart:mae,areaEnd:mae,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:gae(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},Aae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:gae(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class xae{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function bae(e){this._context=e}function _ae(e){this._context=e}function wae(e){return new _ae(e)}function Eae(e){return e<0?-1:1}function Sae(e,t,n){var r=e._x1-e._x0,i=t-e._x1,o=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),s=(o*i+a*r)/(r+i);return(Eae(o)+Eae(a))*Math.min(Math.abs(o),Math.abs(a),.5*Math.abs(s))||0}function Cae(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function Mae(e,t,n){var r=e._x0,i=e._y0,o=e._x1,a=e._y1,s=(o-r)/3;e._context.bezierCurveTo(r+s,i+s*t,o-s,a-s*n,o,a)}function Tae(e){this._context=e}function Iae(e){this._context=new Bae(e)}function Bae(e){this._context=e}function Pae(e){this._context=e}function Rae(e){var t,n,r=e.length-1,i=new Array(r),o=new Array(r),a=new Array(r);for(i[0]=0,o[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,o[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,o[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/o[t-1],o[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/o[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/o[t];for(o[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)o[t]=2*e[t+1]-i[t+1];return[i,o]}function Dae(e,t){this._context=e,this._t=t}function Oae(e){return e[0]}function kae(e){return e[1]}function Lae(e,t){var n=i2(!0),r=null,i=wae,o=null,a=h2(s);function s(s){var l,c,u,h=(s=mte(s)).length,d=!1;for(null==r&&(o=i(u=a())),l=0;l<=h;++l)!(l<h&&n(c=s[l],l,s))===d&&((d=!d)?o.lineStart():o.lineEnd()),d&&o.point(+e(c,l,s),+t(c,l,s));if(u)return o=null,u+""||null}return e="function"===typeof e?e:void 0===e?Oae:i2(e),t="function"===typeof t?t:void 0===t?kae:i2(t),s.x=function(t){return arguments.length?(e="function"===typeof t?t:i2(+t),s):e},s.y=function(e){return arguments.length?(t="function"===typeof e?e:i2(+e),s):t},s.defined=function(e){return arguments.length?(n="function"===typeof e?e:i2(!!e),s):n},s.curve=function(e){return arguments.length?(i=e,null!=r&&(o=i(r)),s):i},s.context=function(e){return arguments.length?(null==e?r=o=null:o=i(r=e),s):r},s}function Fae(e,t,n){var r=null,i=i2(!0),o=null,a=wae,s=null,l=h2(c);function c(c){var u,h,d,f,p,m=(c=mte(c)).length,g=!1,v=new Array(m),y=new Array(m);for(null==o&&(s=a(p=l())),u=0;u<=m;++u){if(!(u<m&&i(f=c[u],u,c))===g)if(g=!g)h=u,s.areaStart(),s.lineStart();else{for(s.lineEnd(),s.lineStart(),d=u-1;d>=h;--d)s.point(v[d],y[d]);s.lineEnd(),s.areaEnd()}g&&(v[u]=+e(f,u,c),y[u]=+t(f,u,c),s.point(r?+r(f,u,c):v[u],n?+n(f,u,c):y[u]))}if(p)return s=null,p+""||null}function u(){return Lae().defined(i).curve(a).context(o)}return e="function"===typeof e?e:void 0===e?Oae:i2(+e),t="function"===typeof t?t:i2(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?kae:i2(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:i2(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:i2(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:i2(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:i2(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:i2(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:i2(+e),c):n},c.lineX0=c.lineY0=function(){return u().x(e).y(t)},c.lineY1=function(){return u().x(e).y(n)},c.lineX1=function(){return u().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"===typeof e?e:i2(!!e),c):i},c.curve=function(e){return arguments.length?(a=e,null!=o&&(s=a(o)),c):a},c.context=function(e){return arguments.length?(null==e?o=s=null:s=a(o=e),c):o},c}function zae(e){return zae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zae(e)}function Uae(){return Uae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uae.apply(this,arguments)}function Nae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Nae(Object(n),!0).forEach((function(t){Gae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Gae(e,t,n){return t=function(e){var t=function(e,t){if("object"!=zae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=zae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==zae(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}bae.prototype={areaStart:mae,areaEnd:mae,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},_ae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},Tae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Mae(this,this._t0,Cae(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Mae(this,Cae(this,n=Sae(this,e,t)),n);break;default:Mae(this,this._t0,n=Sae(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(Iae.prototype=Object.create(Tae.prototype)).point=function(e,t){Tae.prototype.point.call(this,t,e)},Bae.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,o){this._context.bezierCurveTo(t,e,r,n,o,i)}},Pae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=Rae(e),i=Rae(t),o=0,a=1;a<n;++o,++a)this._context.bezierCurveTo(r[0][o],i[0][o],r[1][o],i[1][o],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},Dae.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};var Qae={curveBasisClosed:function(e){return new yae(e)},curveBasisOpen:function(e){return new Aae(e)},curveBasis:function(e){return new vae(e)},curveBumpX:function(e){return new xae(e,!0)},curveBumpY:function(e){return new xae(e,!1)},curveLinearClosed:function(e){return new bae(e)},curveLinear:wae,curveMonotoneX:function(e){return new Tae(e)},curveMonotoneY:function(e){return new Iae(e)},curveNatural:function(e){return new Pae(e)},curveStep:function(e){return new Dae(e,.5)},curveStepAfter:function(e){return new Dae(e,1)},curveStepBefore:function(e){return new Dae(e,0)}},Hae=function(e){return e.x===+e.x&&e.y===+e.y},Vae=function(e){return e.x},Wae=function(e){return e.y},qae=function(e){var t,n=e.type,r=void 0===n?"linear":n,i=e.points,o=void 0===i?[]:i,a=e.baseLine,s=e.layout,l=e.connectNulls,c=void 0!==l&&l,u=function(e,t){if(R$()(e))return e;var n="curve".concat(k1()(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?Qae[n]||wae:Qae["".concat(n).concat("vertical"===t?"Y":"X")]}(r,s),h=c?o.filter((function(e){return Hae(e)})):o;if(Array.isArray(a)){var d=c?a.filter((function(e){return Hae(e)})):a,f=h.map((function(e,t){return jae(jae({},e),{},{base:d[t]})}));return t="vertical"===s?Fae().y(Wae).x1(Vae).x0((function(e){return e.base.x})):Fae().x(Vae).y1(Wae).y0((function(e){return e.base.y})),t.defined(Hae).curve(u),t(f)}return(t="vertical"===s&&r0(a)?Fae().y(Wae).x1(Vae).x0(a):r0(a)?Fae().x(Vae).y1(Wae).y0(a):Lae().x(Vae).y(Wae)).defined(Hae).curve(u),t(h)},Xae=function(e){var t=e.className,n=e.points,r=e.path,i=e.pathRef;if((!n||!n.length)&&!r)return null;var o=n&&n.length?qae(e):r;return l.createElement("path",Uae({},R0(e,!1),v0(e),{className:G$("recharts-curve",t),d:o,ref:i}))};function Yae(e){return Yae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yae(e)}var Jae=["x","y","top","left","width","height","className"];function Kae(){return Kae=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kae.apply(this,arguments)}function Zae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $ae(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Yae(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Yae(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Yae(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ese(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var tse=function(e,t,n,r,i,o){return"M".concat(e,",").concat(i,"v").concat(r,"M").concat(o,",").concat(t,"h").concat(n)},nse=function(e){var t=e.x,n=void 0===t?0:t,r=e.y,i=void 0===r?0:r,o=e.top,a=void 0===o?0:o,s=e.left,c=void 0===s?0:s,u=e.width,h=void 0===u?0:u,d=e.height,f=void 0===d?0:d,p=e.className,m=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zae(Object(n),!0).forEach((function(t){$ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({x:n,y:i,top:a,left:c,width:h,height:f},ese(e,Jae));return r0(n)&&r0(i)&&r0(h)&&r0(f)&&r0(a)&&r0(c)?l.createElement("path",Kae({},R0(m,!0),{className:G$("recharts-cross",p),d:tse(n,i,h,f,a,c)})):null};function rse(e){var t=e.cx,n=e.cy,r=e.radius,i=e.startAngle,o=e.endAngle;return{points:[hre(t,n,r,i),hre(t,n,r,o)],cx:t,cy:n,radius:r,startAngle:i,endAngle:o}}function ise(e,t,n){var r,i,o,a;if("horizontal"===e)o=r=t.x,i=n.top,a=n.top+n.height;else if("vertical"===e)a=i=t.y,r=n.left,o=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return rse(t);var s=t.cx,l=t.cy,c=t.innerRadius,u=t.outerRadius,h=t.angle,d=hre(s,l,c,h),f=hre(s,l,u,h);r=d.x,i=d.y,o=f.x,a=f.y}return[{x:r,y:i},{x:o,y:a}]}function ose(e){return ose="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ose(e)}function ase(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function sse(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ase(Object(n),!0).forEach((function(t){lse(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ase(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lse(e,t,n){return t=function(e){var t=function(e,t){if("object"!=ose(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=ose(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==ose(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cse(e){var t,n=e.element,r=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,a=e.activePayload,s=e.offset,c=e.activeTooltipIndex,u=e.tooltipAxisBandSize,h=e.layout,d=e.chartName;if(!n||!n.props.cursor||!i||!o||"ScatterChart"!==d&&"axis"!==r)return null;var f=Xae;if("ScatterChart"===d)t=o,f=nse;else if("BarChart"===d)t=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(h,o,s,u),f=_5;else if("radial"===h){var p=rse(o),m=p.cx,g=p.cy,v=p.radius;t={cx:m,cy:g,startAngle:p.startAngle,endAngle:p.endAngle,innerRadius:v,outerRadius:v},f=Aie}else t={points:ise(h,o,s)},f=Xae;var y=sse(sse(sse(sse({stroke:"#ccc",pointerEvents:"none"},s),t),R0(n.props.cursor,!1)),{},{payload:a,payloadIndex:c,className:G$("recharts-tooltip-cursor",n.props.cursor.className)});return(0,l.isValidElement)(n.props.cursor)?(0,l.cloneElement)(n.props.cursor,y):(0,l.createElement)(f,y)}var use=["item"],hse=["children","className","width","height","style","compact","title","desc"];function dse(e){return dse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dse(e)}function fse(){return fse=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fse.apply(this,arguments)}function pse(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||wse(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mse(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gse(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Tse(r.key),r)}}function vse(e,t,n){return t=Ase(t),function(e,t){if(t&&("object"===dse(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return xse(e)}(e,yse()?Reflect.construct(t,n||[],Ase(e).constructor):t.apply(e,n))}function yse(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(yse=function(){return!!e})()}function Ase(e){return Ase=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ase(e)}function xse(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bse(e,t){return bse=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},bse(e,t)}function _se(e){return function(e){if(Array.isArray(e))return Ese(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||wse(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wse(e,t){if(e){if("string"===typeof e)return Ese(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ese(e,t):void 0}}function Ese(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Sse(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cse(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sse(Object(n),!0).forEach((function(t){Mse(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sse(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Mse(e,t,n){return(t=Tse(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tse(e){var t=function(e,t){if("object"!=dse(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=dse(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==dse(t)?t:String(t)}var Ise={xAxis:["bottom","top"],yAxis:["left","right"]},Bse={width:"100%",height:"100%"},Pse={x:0,y:0};function Rse(e){return e}var Dse=function(e,t){var n=t.graphicalItems,r=t.dataStartIndex,i=t.dataEndIndex,o=(null!==n&&void 0!==n?n:[]).reduce((function(e,t){var n=t.props.data;return n&&n.length?[].concat(_se(e),_se(n)):e}),[]);return o.length>0?o:e&&e.length&&r0(r)&&r0(i)?e.slice(r,i+1):[]};function Ose(e){return"number"===e?[0,"auto"]:void 0}var kse=function(e,t,n,r){var i=e.graphicalItems,o=e.tooltipAxis,a=Dse(t,e);return n<0||!i||!i.length||n>=a.length?null:i.reduce((function(i,s){var l,c,u=null!==(l=s.props.data)&&void 0!==l?l:t;(u&&e.dataStartIndex+e.dataEndIndex!==0&&(u=u.slice(e.dataStartIndex,e.dataEndIndex+1)),o.dataKey&&!o.allowDuplicatedCategory)?c=u0(void 0===u?a:u,o.dataKey,r):c=u&&u[n]||a[n];return c?[].concat(_se(i),[Une(s,c)]):i}),[])},Lse=function(e,t,n,r){var i=r||{x:e.chartX,y:e.chartY},o=function(e,t){return"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius}(i,n),a=e.orderedTooltipTicks,s=e.tooltipAxis,l=e.tooltipTicks,c=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,a=null!==(t=null===n||void 0===n?void 0:n.length)&&void 0!==t?t:0;if(a<=1)return 0;if(i&&"angleAxis"===i.axisType&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var s=i.range,l=0;l<a;l++){var c=l>0?r[l-1].coordinate:r[a-1].coordinate,u=r[l].coordinate,h=l>=a-1?r[0].coordinate:r[l+1].coordinate,d=void 0;if(t0(u-c)!==t0(h-u)){var f=[];if(t0(h-u)===t0(s[1]-s[0])){d=h;var p=u+s[1]-s[0];f[0]=Math.min(p,(p+c)/2),f[1]=Math.max(p,(p+c)/2)}else{d=c;var m=h+s[1]-s[0];f[0]=Math.min(u,(m+u)/2),f[1]=Math.max(u,(m+u)/2)}var g=[Math.min(u,(d+u)/2),Math.max(u,(d+u)/2)];if(e>g[0]&&e<=g[1]||e>=f[0]&&e<=f[1]){o=r[l].index;break}}else{var v=Math.min(c,h),y=Math.max(c,h);if(e>(v+u)/2&&e<=(y+u)/2){o=r[l].index;break}}}else for(var A=0;A<a;A++)if(0===A&&e<=(n[A].coordinate+n[A+1].coordinate)/2||A>0&&A<a-1&&e>(n[A].coordinate+n[A-1].coordinate)/2&&e<=(n[A].coordinate+n[A+1].coordinate)/2||A===a-1&&e>(n[A].coordinate+n[A-1].coordinate)/2){o=n[A].index;break}return o}(o,a,l,s);if(c>=0&&l){var u=l[c]&&l[c].value,h=kse(e,t,c,u),d=function(e,t,n,r){var i=t.find((function(e){return e&&e.index===n}));if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var o=i.coordinate,a=r.radius;return Cse(Cse(Cse({},r),hre(r.cx,r.cy,a,o)),{},{angle:o,radius:a})}var s=i.coordinate,l=r.angle;return Cse(Cse(Cse({},r),hre(r.cx,r.cy,s,l)),{},{angle:l,radius:s})}return Pse}(n,a,c,i);return{activeTooltipIndex:c,activeLabel:u,activePayload:h,activeCoordinate:d}}return null},Fse=function(e,t){var n=t.axes,r=t.graphicalItems,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,h=e.stackOffset,d=Ene(c,i);return n.reduce((function(t,n){var f,p=n.props,m=p.type,g=p.dataKey,v=p.allowDataOverflow,y=p.allowDuplicatedCategory,A=p.scale,x=p.ticks,b=p.includeHidden,_=n.props[o];if(t[_])return t;var w,E,S,C=Dse(e.data,{graphicalItems:r.filter((function(e){return e.props[o]===_})),dataStartIndex:s,dataEndIndex:l}),M=C.length;(function(e,t,n){if("number"===n&&!0===t&&Array.isArray(e)){var r=null===e||void 0===e?void 0:e[0],i=null===e||void 0===e?void 0:e[1];if(r&&i&&r0(r)&&r0(i))return!0}return!1})(n.props.domain,v,m)&&(w=Lne(n.props.domain,null,v),!d||"number"!==m&&"auto"===A||(S=xne(C,g,"category")));var T=Ose(m);if(!w||0===w.length){var I,B=null!==(I=n.props.domain)&&void 0!==I?I:T;if(g){if(w=xne(C,g,m),"category"===m&&d){var P=function(e){if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1}(w);y&&P?(E=w,w=O$()(0,M)):y||(w=zne(B,w,n).reduce((function(e,t){return e.indexOf(t)>=0?e:[].concat(_se(e),[t])}),[]))}else if("category"===m)w=y?w.filter((function(e){return""!==e&&!B$()(e)})):zne(B,w,n).reduce((function(e,t){return e.indexOf(t)>=0||""===t||B$()(t)?e:[].concat(_se(e),[t])}),[]);else if("number"===m){var R=function(e,t,n,r,i){var o=t.map((function(t){return _ne(e,t,n,i,r)})).filter((function(e){return!B$()(e)}));return o&&o.length?o.reduce((function(e,t){return[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}),[1/0,-1/0]):null}(C,r.filter((function(e){return e.props[o]===_&&(b||!e.props.hide)})),g,i,c);R&&(w=R)}!d||"number"!==m&&"auto"===A||(S=xne(C,g,"category"))}else w=d?O$()(0,M):a&&a[_]&&a[_].hasStack&&"number"===m?"expand"===h?[0,1]:Dne(a[_].stackGroups,s,l):wne(C,r.filter((function(e){return e.props[o]===_&&(b||!e.props.hide)})),m,c,!0);if("number"===m)w=aae(u,w,_,i,x),B&&(w=Lne(B,w,v));else if("category"===m&&B){var D=B;w.every((function(e){return D.indexOf(e)>=0}))&&(w=D)}}return Cse(Cse({},t),{},Mse({},_,Cse(Cse({},n.props),{},{axisType:i,domain:w,categoricalDomain:S,duplicateDomain:E,originalDomain:null!==(f=n.props.domain)&&void 0!==f?f:T,isCategorical:d,layout:c})))}),{})},zse=function(e,t){var n=t.axisType,r=void 0===n?"xAxis":n,i=t.AxisComp,o=t.graphicalItems,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.children,u="".concat(r,"Id"),h=M0(c,i),d={};return h&&h.length?d=Fse(e,{axes:h,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l}):o&&o.length&&(d=function(e,t){var n=t.graphicalItems,r=t.Axis,i=t.axisType,o=t.axisIdKey,a=t.stackGroups,s=t.dataStartIndex,l=t.dataEndIndex,c=e.layout,u=e.children,h=Dse(e.data,{graphicalItems:n,dataStartIndex:s,dataEndIndex:l}),d=h.length,f=Ene(c,i),p=-1;return n.reduce((function(e,t){var m,g=t.props[o],v=Ose("number");return e[g]?e:(p++,f?m=O$()(0,d):a&&a[g]&&a[g].hasStack?(m=Dne(a[g].stackGroups,s,l),m=aae(u,m,g,i)):(m=Lne(v,wne(h,n.filter((function(e){return e.props[o]===g&&!e.props.hide})),"number",c),r.defaultProps.allowDataOverflow),m=aae(u,m,g,i)),Cse(Cse({},e),{},Mse({},g,Cse(Cse({axisType:i},r.defaultProps),{},{hide:!0,orientation:L$()(Ise,"".concat(i,".").concat(p%2),null),domain:m,originalDomain:v,isCategorical:f,layout:c}))))}),{})}(e,{Axis:i,graphicalItems:o,axisType:r,axisIdKey:u,stackGroups:a,dataStartIndex:s,dataEndIndex:l})),d},Use=function(e){var t=e.children,n=e.defaultShowTooltip,r=T0(t,ire),i=0,o=0;return e.data&&0!==e.data.length&&(o=e.data.length-1),r&&r.props&&(r.props.startIndex>=0&&(i=r.props.startIndex),r.props.endIndex>=0&&(o=r.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:Boolean(n)}},Nse=function(e){return"horizontal"===e?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:"vertical"===e?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:"centric"===e?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},jse=function(e,t){var n=e.props,r=(e.graphicalItems,e.xAxisMap),i=void 0===r?{}:r,o=e.yAxisMap,a=void 0===o?{}:o,s=n.width,l=n.height,c=n.children,u=n.margin||{},h=T0(c,ire),d=T0(c,X2),f=Object.keys(a).reduce((function(e,t){var n=a[t],r=n.orientation;return n.mirror||n.hide?e:Cse(Cse({},e),{},Mse({},r,e[r]+n.width))}),{left:u.left||0,right:u.right||0}),p=Object.keys(i).reduce((function(e,t){var n=i[t],r=n.orientation;return n.mirror||n.hide?e:Cse(Cse({},e),{},Mse({},r,L$()(e,"".concat(r))+n.height))}),{top:u.top||0,bottom:u.bottom||0}),m=Cse(Cse({},p),f),g=m.bottom;h&&(m.bottom+=h.props.height||ire.defaultProps.height),d&&t&&(m=function(e,t,n,r){var i=n.children,o=n.width,a=n.margin,s=o-(a.left||0)-(a.right||0),l=dne({children:i,legendWidth:s});if(l){var c=r||{},u=c.width,h=c.height,d=l.align,f=l.verticalAlign,p=l.layout;if(("vertical"===p||"horizontal"===p&&"middle"===f)&&"center"!==d&&r0(e[d]))return mne(mne({},e),{},gne({},d,e[d]+(u||0)));if(("horizontal"===p||"vertical"===p&&"center"===d)&&"middle"!==f&&r0(e[f]))return mne(mne({},e),{},gne({},f,e[f]+(h||0)))}return e}(m,0,n,t));var v=s-m.left-m.right,y=l-m.top-m.bottom;return Cse(Cse({brushBottom:g},m),{},{width:Math.max(v,0),height:Math.max(y,0)})},Gse=function(e,t){return"xAxis"===t?e[t].width:"yAxis"===t?e[t].height:void 0};function Qse(e,t,n){if(t<1)return[];if(1===t&&void 0===n)return e;for(var r=[],i=0;i<e.length;i+=t){if(void 0!==n&&!0!==n(e[i]))return;r.push(e[i])}return r}function Hse(e,t,n,r,i){if(e*t<e*r||e*t>e*i)return!1;var o=n();return e*(t-e*o/2-r)>=0&&e*(t+e*o/2-i)<=0}function Vse(e){return Vse="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vse(e)}function Wse(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qse(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wse(Object(n),!0).forEach((function(t){Xse(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wse(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xse(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Vse(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Vse(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Vse(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yse(e,t,n){var r=e.tick,i=e.ticks,o=e.viewBox,a=e.minTickGap,s=e.orientation,l=e.interval,c=e.tickFormatter,u=e.unit,h=e.angle;if(!i||!i.length||!r)return[];if(r0(l)||v1.isSsr)return function(e,t){return Qse(e,t+1)}(i,"number"===typeof l&&r0(l)?l:0);var d=[],f="top"===s||"bottom"===s?"width":"height",p=u&&"width"===f?G5(u,{fontSize:t,letterSpacing:n}):{width:0,height:0},m=function(e,r){var i=R$()(c)?c(e.value,r):e.value;return"width"===f?function(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return goe(r,n)}(G5(i,{fontSize:t,letterSpacing:n}),p,h):G5(i,{fontSize:t,letterSpacing:n})[f]},g=i.length>=2?t0(i[1].coordinate-i[0].coordinate):1,v=function(e,t,n){var r="width"===n,i=e.x,o=e.y,a=e.width,s=e.height;return 1===t?{start:r?i:o,end:r?i+a:o+s}:{start:r?i+a:o+s,end:r?i:o}}(o,g,f);return"equidistantPreserveStart"===l?function(e,t,n,r,i){for(var o,a=(r||[]).slice(),s=t.start,l=t.end,c=0,u=1,h=s,d=function(){var t=null===r||void 0===r?void 0:r[c];if(void 0===t)return{v:Qse(r,u)};var o,a=c,d=function(){return void 0===o&&(o=n(t,a)),o},f=t.coordinate,p=0===c||Hse(e,f,d,h,l);p||(c=0,h=s,u+=1),p&&(h=f+e*(d()/2+i),c+=u)};u<=a.length;)if(o=d())return o.v;return[]}(g,v,m,i,a):(d="preserveStart"===l||"preserveStartEnd"===l?function(e,t,n,r,i,o){var a=(r||[]).slice(),s=a.length,l=t.start,c=t.end;if(o){var u=r[s-1],h=n(u,s-1),d=e*(u.coordinate+e*h/2-c);a[s-1]=u=qse(qse({},u),{},{tickCoord:d>0?u.coordinate-d*e:u.coordinate}),Hse(e,u.tickCoord,(function(){return h}),l,c)&&(c=u.tickCoord-e*(h/2+i),a[s-1]=qse(qse({},u),{},{isShow:!0}))}for(var f=o?s-1:s,p=function(t){var r,o=a[t],s=function(){return void 0===r&&(r=n(o,t)),r};if(0===t){var u=e*(o.coordinate-e*s()/2-l);a[t]=o=qse(qse({},o),{},{tickCoord:u<0?o.coordinate-u*e:o.coordinate})}else a[t]=o=qse(qse({},o),{},{tickCoord:o.coordinate});Hse(e,o.tickCoord,s,l,c)&&(l=o.tickCoord+e*(s()/2+i),a[t]=qse(qse({},o),{},{isShow:!0}))},m=0;m<f;m++)p(m);return a}(g,v,m,i,a,"preserveStartEnd"===l):function(e,t,n,r,i){for(var o=(r||[]).slice(),a=o.length,s=t.start,l=t.end,c=function(t){var r,c=o[t],u=function(){return void 0===r&&(r=n(c,t)),r};if(t===a-1){var h=e*(c.coordinate+e*u()/2-l);o[t]=c=qse(qse({},c),{},{tickCoord:h>0?c.coordinate-h*e:c.coordinate})}else o[t]=c=qse(qse({},c),{},{tickCoord:c.coordinate});Hse(e,c.tickCoord,u,s,l)&&(l=c.tickCoord-e*(u()/2+i),o[t]=qse(qse({},c),{},{isShow:!0}))},u=a-1;u>=0;u--)c(u);return o}(g,v,m,i,a),d.filter((function(e){return e.isShow})))}var Jse=["viewBox"],Kse=["viewBox"],Zse=["ticks"];function $se(e){return $se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$se(e)}function ele(){return ele=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ele.apply(this,arguments)}function tle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function nle(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tle(Object(n),!0).forEach((function(t){cle(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tle(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function rle(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function ile(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ule(r.key),r)}}function ole(e,t,n){return t=sle(t),function(e,t){if(t&&("object"===$se(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,ale()?Reflect.construct(t,n||[],sle(e).constructor):t.apply(e,n))}function ale(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ale=function(){return!!e})()}function sle(e){return sle=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},sle(e)}function lle(e,t){return lle=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},lle(e,t)}function cle(e,t,n){return(t=ule(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ule(e){var t=function(e,t){if("object"!=$se(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=$se(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==$se(t)?t:String(t)}var hle=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=ole(this,t,[e])).state={fontSize:"",letterSpacing:""},n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lle(e,t)}(t,e),n=t,r=[{key:"shouldComponentUpdate",value:function(e,t){var n=e.viewBox,r=rle(e,Jse),i=this.props,o=i.viewBox,a=rle(i,Kse);return!h0(n,o)||!h0(r,a)||!h0(t,this.state)}},{key:"componentDidMount",value:function(){var e=this.layerReference;if(e){var t=e.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];t&&this.setState({fontSize:window.getComputedStyle(t).fontSize,letterSpacing:window.getComputedStyle(t).letterSpacing})}}},{key:"getTickLineCoord",value:function(e){var t,n,r,i,o,a,s=this.props,l=s.x,c=s.y,u=s.width,h=s.height,d=s.orientation,f=s.tickSize,p=s.mirror,m=s.tickMargin,g=p?-1:1,v=e.tickSize||f,y=r0(e.tickCoord)?e.tickCoord:e.coordinate;switch(d){case"top":t=n=e.coordinate,a=(r=(i=c+ +!p*h)-g*v)-g*m,o=y;break;case"left":r=i=e.coordinate,o=(t=(n=l+ +!p*u)-g*v)-g*m,a=y;break;case"right":r=i=e.coordinate,o=(t=(n=l+ +p*u)+g*v)+g*m,a=y;break;default:t=n=e.coordinate,a=(r=(i=c+ +p*h)+g*v)+g*m,o=y}return{line:{x1:t,y1:r,x2:n,y2:i},tick:{x:o,y:a}}}},{key:"getTickTextAnchor",value:function(){var e,t=this.props,n=t.orientation,r=t.mirror;switch(n){case"left":e=r?"start":"end";break;case"right":e=r?"end":"start";break;default:e="middle"}return e}},{key:"getTickVerticalAnchor",value:function(){var e=this.props,t=e.orientation,n=e.mirror,r="end";switch(t){case"left":case"right":r="middle";break;case"top":r=n?"start":"end";break;default:r=n?"end":"start"}return r}},{key:"renderAxisLine",value:function(){var e=this.props,t=e.x,n=e.y,r=e.width,i=e.height,o=e.orientation,a=e.mirror,s=e.axisLine,c=nle(nle(nle({},R0(this.props,!1)),R0(s,!1)),{},{fill:"none"});if("top"===o||"bottom"===o){var u=+("top"===o&&!a||"bottom"===o&&a);c=nle(nle({},c),{},{x1:t,y1:n+u*i,x2:t+r,y2:n+u*i})}else{var h=+("left"===o&&!a||"right"===o&&a);c=nle(nle({},c),{},{x1:t+h*r,y1:n,x2:t+h*r,y2:n+i})}return l.createElement("line",ele({},c,{className:G$("recharts-cartesian-axis-line",L$()(s,"className"))}))}},{key:"renderTicks",value:function(e,n,r){var i=this,o=this.props,a=o.tickLine,s=o.stroke,c=o.tick,u=o.tickFormatter,h=o.unit,d=Yse(nle(nle({},this.props),{},{ticks:e}),n,r),f=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),m=R0(this.props,!1),g=R0(c,!1),v=nle(nle({},m),{},{fill:"none"},R0(a,!1)),y=d.map((function(e,n){var r=i.getTickLineCoord(e),o=r.line,y=r.tick,A=nle(nle(nle(nle({textAnchor:f,verticalAnchor:p},m),{},{stroke:"none",fill:s},g),y),{},{index:n,payload:e,visibleTicksCount:d.length,tickFormatter:u});return l.createElement(Q0,ele({className:"recharts-cartesian-axis-tick",key:"tick-".concat(e.value,"-").concat(e.coordinate,"-").concat(e.tickCoord)},y0(i.props,e,n)),a&&l.createElement("line",ele({},v,o,{className:G$("recharts-cartesian-axis-tick-line",L$()(a,"className"))})),c&&t.renderTickItem(c,A,"".concat(R$()(u)?u(e.value,n):e.value).concat(h||"")))}));return l.createElement("g",{className:"recharts-cartesian-axis-ticks"},y)}},{key:"render",value:function(){var e=this,t=this.props,n=t.axisLine,r=t.width,i=t.height,o=t.ticksGenerator,a=t.className;if(t.hide)return null;var s=this.props,c=s.ticks,u=rle(s,Zse),h=c;return R$()(o)&&(h=c&&c.length>0?o(this.props):o(u)),r<=0||i<=0||!h||!h.length?null:l.createElement(Q0,{className:G$("recharts-cartesian-axis",a),ref:function(t){e.layerReference=t}},n&&this.renderAxisLine(),this.renderTicks(h,this.state.fontSize,this.state.letterSpacing),Ire.renderCallByParent(this.props))}}],i=[{key:"renderTickItem",value:function(e,t,n){return l.isValidElement(e)?l.cloneElement(e,t):R$()(e)?e(t):l.createElement(v6,ele({},t,{className:"recharts-cartesian-axis-tick-value"}),n)}}],r&&ile(n.prototype,r),i&&ile(n,i),Object.defineProperty(n,"prototype",{writable:!1}),t}(l.Component);function dle(){return dle=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dle.apply(this,arguments)}cle(hle,"displayName","CartesianAxis"),cle(hle,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var fle=function(e){var t=e.xAxisId,n=Goe(),r=Qoe(),i=Foe(t);return null==i?null:l.createElement(hle,dle({},i,{className:G$("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return Cne(e,!0)}}))};function ple(){return ple=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ple.apply(this,arguments)}fle.displayName="XAxis",fle.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var mle=function(e){var t=e.yAxisId,n=Goe(),r=Qoe(),i=Noe(t);return null==i?null:l.createElement(hle,ple({},i,{className:G$("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(e){return Cne(e,!0)}}))};mle.displayName="YAxis",mle.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var gle=function(e){var t,n=e.chartName,r=e.GraphicalChild,i=e.defaultTooltipEventType,o=void 0===i?"axis":i,a=e.validateTooltipEventTypes,s=void 0===a?["axis"]:a,c=e.axisComponents,u=e.legendContent,h=e.formatAxisMap,d=e.defaultProps,f=function(e,t){var n=t.graphicalItems,r=t.stackGroups,i=t.offset,o=t.updateId,a=t.dataStartIndex,s=t.dataEndIndex,l=e.barSize,u=e.layout,h=e.barGap,d=e.barCategoryGap,f=e.maxBarSize,p=Nse(u),m=p.numericAxisName,g=p.cateAxisName,v=function(e){return!(!e||!e.length)&&e.some((function(e){var t=w0(e&&e.type);return t&&t.indexOf("Bar")>=0}))}(n),y=[];return n.forEach((function(n,p){var A=Dse(e.data,{graphicalItems:[n],dataStartIndex:a,dataEndIndex:s}),x=n.props,b=x.dataKey,_=x.maxBarSize,w=n.props["".concat(m,"Id")],E=n.props["".concat(g,"Id")],S=c.reduce((function(e,r){var i=t["".concat(r.axisType,"Map")],o=n.props["".concat(r.axisType,"Id")];i&&i[o]||"zAxis"===r.axisType||V$(!1);var a=i[o];return Cse(Cse({},e),{},Mse(Mse({},r.axisType,a),"".concat(r.axisType,"Ticks"),Cne(a)))}),{}),C=S[g],M=S["".concat(g,"Ticks")],T=r&&r[w]&&r[w].hasStack&&function(e,t){var n=e.props.stackId;if(i0(n)){var r=t[n];if(r){var i=r.items.indexOf(e);return i>=0?r.stackedData[i]:null}}return null}(n,r[w].stackGroups),I=w0(n.type).indexOf("Bar")>=0,B=Fne(C,M),P=[],R=v&&function(e){var t=e.barSize,n=e.totalSize,r=e.stackGroups,i=void 0===r?{}:r;if(!i)return{};for(var o={},a=Object.keys(i),s=0,l=a.length;s<l;s++)for(var c=i[a[s]].stackGroups,u=Object.keys(c),h=0,d=u.length;h<d;h++){var f=c[u[h]],p=f.items,m=f.cateAxisId,g=p.filter((function(e){return w0(e.type).indexOf("Bar")>=0}));if(g&&g.length){var v=g[0].props.barSize,y=g[0].props[m];o[y]||(o[y]=[]);var A=B$()(v)?t:v;o[y].push({item:g[0],stackList:g.slice(1),barSize:B$()(A)?void 0:s0(A,n,0)})}}return o}({barSize:l,stackGroups:r,totalSize:Gse(S,g)});if(I){var D,O,k=B$()(_)?f:_,L=null!==(D=null!==(O=Fne(C,M,!0))&&void 0!==O?O:k)&&void 0!==D?D:0;P=function(e){var t=e.barGap,n=e.barCategoryGap,r=e.bandSize,i=e.sizeList,o=void 0===i?[]:i,a=e.maxBarSize,s=o.length;if(s<1)return null;var l,c=s0(t,r,0,!0),u=[];if(o[0].barSize===+o[0].barSize){var h=!1,d=r/s,f=o.reduce((function(e,t){return e+t.barSize||0}),0);(f+=(s-1)*c)>=r&&(f-=(s-1)*c,c=0),f>=r&&d>0&&(h=!0,f=s*(d*=.9));var p={offset:((r-f)/2|0)-c,size:0};l=o.reduce((function(e,t){var n={item:t.item,position:{offset:p.offset+p.size+c,size:h?d:t.barSize}},r=[].concat(vne(e),[n]);return p=r[r.length-1].position,t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:p})})),r}),u)}else{var m=s0(n,r,0,!0);r-2*m-(s-1)*c<=0&&(c=0);var g=(r-2*m-(s-1)*c)/s;g>1&&(g>>=0);var v=a===+a?Math.min(g,a):g;l=o.reduce((function(e,t,n){var r=[].concat(vne(e),[{item:t.item,position:{offset:m+(g+c)*n+(g-v)/2,size:v}}]);return t.stackList&&t.stackList.length&&t.stackList.forEach((function(e){r.push({item:e,position:r[r.length-1].position})})),r}),u)}return l}({barGap:h,barCategoryGap:d,bandSize:L!==B?L:B,sizeList:R[E],maxBarSize:k}),L!==B&&(P=P.map((function(e){return Cse(Cse({},e),{},{position:Cse(Cse({},e.position),{},{offset:e.position.offset-L/2})})})))}var F,z,U=n&&n.type&&n.type.getComposedData;U&&y.push({props:Cse(Cse({},U(Cse(Cse({},S),{},{displayedData:A,props:e,dataKey:b,item:n,bandSize:B,barPosition:P,offset:i,stackedData:T,layout:u,dataStartIndex:a,dataEndIndex:s}))),{},Mse(Mse(Mse({key:n.key||"item-".concat(p)},m,S[m]),g,S[g]),"animationId",o)),childIndex:(F=n,z=e.children,C0(z).indexOf(F)),item:n})})),y},p=function(e,t){var i=e.props,o=e.dataStartIndex,a=e.dataEndIndex,s=e.updateId;if(!I0({props:i}))return null;var l=i.children,u=i.layout,d=i.stackOffset,p=i.data,m=i.reverseStackOrder,g=Nse(u),v=g.numericAxisName,y=g.cateAxisName,A=M0(l,r),x=function(e,t,n,r,i,o){if(!e)return null;var a=(o?t.reverse():t).reduce((function(e,t){var i=t.props,o=i.stackId;if(i.hide)return e;var a=t.props[n],s=e[a]||{hasStack:!1,stackGroups:{}};if(i0(o)){var l=s.stackGroups[o]||{numericAxisId:n,cateAxisId:r,items:[]};l.items.push(t),s.hasStack=!0,s.stackGroups[o]=l}else s.stackGroups[a0("_stackId_")]={numericAxisId:n,cateAxisId:r,items:[t]};return mne(mne({},e),{},gne({},a,s))}),{});return Object.keys(a).reduce((function(t,o){var s=a[o];return s.hasStack&&(s.stackGroups=Object.keys(s.stackGroups).reduce((function(t,o){var a=s.stackGroups[o];return mne(mne({},t),{},gne({},o,{numericAxisId:n,cateAxisId:r,items:a.items,stackedData:Pne(e,a.items,i)}))}),{})),mne(mne({},t),{},gne({},o,s))}),{})}(p,A,"".concat(v,"Id"),"".concat(y,"Id"),d,m),b=c.reduce((function(e,t){var n="".concat(t.axisType,"Map");return Cse(Cse({},e),{},Mse({},n,zse(i,Cse(Cse({},t),{},{graphicalItems:A,stackGroups:t.axisType===v&&x,dataStartIndex:o,dataEndIndex:a}))))}),{}),_=jse(Cse(Cse({},b),{},{props:i,graphicalItems:A}),null===t||void 0===t?void 0:t.legendBBox);Object.keys(b).forEach((function(e){b[e]=h(i,b[e],_,e.replace("Map",""),n)}));var w=function(e){var t=l0(e),n=Cne(t,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:z$()(n,(function(e){return e.coordinate})),tooltipAxis:t,tooltipAxisBandSize:Fne(t,n)}}(b["".concat(y,"Map")]),E=f(i,Cse(Cse({},b),{},{dataStartIndex:o,dataEndIndex:a,updateId:s,graphicalItems:A,stackGroups:x,offset:_}));return Cse(Cse({formattedGraphicalItems:E,graphicalItems:A,offset:_,stackGroups:x},w),b)};return t=function(e){function t(e){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Mse(xse(o=vse(this,t,[e])),"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Mse(xse(o),"accessibilityManager",new pae),Mse(xse(o),"handleLegendBBoxUpdate",(function(e){if(e){var t=o.state,n=t.dataStartIndex,r=t.dataEndIndex,i=t.updateId;o.setState(Cse({legendBBox:e},p({props:o.props,dataStartIndex:n,dataEndIndex:r,updateId:i},Cse(Cse({},o.state),{},{legendBBox:e}))))}})),Mse(xse(o),"handleReceiveSyncEvent",(function(e,t,n){if(o.props.syncId===e){if(n===o.eventEmitterSymbol&&"function"!==typeof o.props.syncMethod)return;o.applySyncEvent(t)}})),Mse(xse(o),"handleBrushChange",(function(e){var t=e.startIndex,n=e.endIndex;if(t!==o.state.dataStartIndex||n!==o.state.dataEndIndex){var r=o.state.updateId;o.setState((function(){return Cse({dataStartIndex:t,dataEndIndex:n},p({props:o.props,dataStartIndex:t,dataEndIndex:n,updateId:r},o.state))})),o.triggerSyncEvent({dataStartIndex:t,dataEndIndex:n})}})),Mse(xse(o),"handleMouseEnter",(function(e){var t=o.getMouseInfo(e);if(t){var n=Cse(Cse({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseEnter;R$()(r)&&r(n,e)}})),Mse(xse(o),"triggeredAfterMouseMove",(function(e){var t=o.getMouseInfo(e),n=t?Cse(Cse({},t),{},{isTooltipActive:!0}):{isTooltipActive:!1};o.setState(n),o.triggerSyncEvent(n);var r=o.props.onMouseMove;R$()(r)&&r(n,e)})),Mse(xse(o),"handleItemMouseEnter",(function(e){o.setState((function(){return{isTooltipActive:!0,activeItem:e,activePayload:e.tooltipPayload,activeCoordinate:e.tooltipPosition||{x:e.cx,y:e.cy}}}))})),Mse(xse(o),"handleItemMouseLeave",(function(){o.setState((function(){return{isTooltipActive:!1}}))})),Mse(xse(o),"handleMouseMove",(function(e){e.persist(),o.throttleTriggeredAfterMouseMove(e)})),Mse(xse(o),"handleMouseLeave",(function(e){o.throttleTriggeredAfterMouseMove.cancel();var t={isTooltipActive:!1};o.setState(t),o.triggerSyncEvent(t);var n=o.props.onMouseLeave;R$()(n)&&n(t,e)})),Mse(xse(o),"handleOuterEvent",(function(e){var t,n=function(e){var t=e&&e.type;return t&&_0[t]?_0[t]:null}(e),r=L$()(o.props,"".concat(n));n&&R$()(r)&&r(null!==(t=/.*touch.*/i.test(n)?o.getMouseInfo(e.changedTouches[0]):o.getMouseInfo(e))&&void 0!==t?t:{},e)})),Mse(xse(o),"handleClick",(function(e){var t=o.getMouseInfo(e);if(t){var n=Cse(Cse({},t),{},{isTooltipActive:!0});o.setState(n),o.triggerSyncEvent(n);var r=o.props.onClick;R$()(r)&&r(n,e)}})),Mse(xse(o),"handleMouseDown",(function(e){var t=o.props.onMouseDown;R$()(t)&&t(o.getMouseInfo(e),e)})),Mse(xse(o),"handleMouseUp",(function(e){var t=o.props.onMouseUp;R$()(t)&&t(o.getMouseInfo(e),e)})),Mse(xse(o),"handleTouchMove",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.throttleTriggeredAfterMouseMove(e.changedTouches[0])})),Mse(xse(o),"handleTouchStart",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseDown(e.changedTouches[0])})),Mse(xse(o),"handleTouchEnd",(function(e){null!=e.changedTouches&&e.changedTouches.length>0&&o.handleMouseUp(e.changedTouches[0])})),Mse(xse(o),"triggerSyncEvent",(function(e){void 0!==o.props.syncId&&lae.emit(cae,o.props.syncId,e,o.eventEmitterSymbol)})),Mse(xse(o),"applySyncEvent",(function(e){var t=o.props,n=t.layout,r=t.syncMethod,i=o.state.updateId,a=e.dataStartIndex,s=e.dataEndIndex;if(void 0!==e.dataStartIndex||void 0!==e.dataEndIndex)o.setState(Cse({dataStartIndex:a,dataEndIndex:s},p({props:o.props,dataStartIndex:a,dataEndIndex:s,updateId:i},o.state)));else if(void 0!==e.activeTooltipIndex){var l=e.chartX,c=e.chartY,u=e.activeTooltipIndex,h=o.state,d=h.offset,f=h.tooltipTicks;if(!d)return;if("function"===typeof r)u=r(f,e);else if("value"===r){u=-1;for(var m=0;m<f.length;m++)if(f[m].value===e.activeLabel){u=m;break}}var g=Cse(Cse({},d),{},{x:d.left,y:d.top}),v=Math.min(l,g.x+g.width),y=Math.min(c,g.y+g.height),A=f[u]&&f[u].value,x=kse(o.state,o.props.data,u),b=f[u]?{x:"horizontal"===n?f[u].coordinate:v,y:"horizontal"===n?y:f[u].coordinate}:Pse;o.setState(Cse(Cse({},e),{},{activeLabel:A,activeCoordinate:b,activePayload:x,activeTooltipIndex:u}))}else o.setState(e)})),Mse(xse(o),"renderCursor",(function(e){var t,r=o.state,i=r.isTooltipActive,a=r.activeCoordinate,s=r.activePayload,c=r.offset,u=r.activeTooltipIndex,h=r.tooltipAxisBandSize,d=o.getTooltipEventType(),f=null!==(t=e.props.active)&&void 0!==t?t:i,p=o.props.layout,m=e.key||"_recharts-cursor";return l.createElement(cse,{key:m,activeCoordinate:a,activePayload:s,activeTooltipIndex:u,chartName:n,element:e,isActive:f,layout:p,offset:c,tooltipAxisBandSize:h,tooltipEventType:d})})),Mse(xse(o),"renderPolarAxis",(function(e,t,n){var r=L$()(e,"type.axisType"),i=L$()(o.state,"".concat(r,"Map")),a=i&&i[e.props["".concat(r,"Id")]];return(0,l.cloneElement)(e,Cse(Cse({},a),{},{className:G$(r,a.className),key:e.key||"".concat(t,"-").concat(n),ticks:Cne(a,!0)}))})),Mse(xse(o),"renderPolarGrid",(function(e){var t=e.props,n=t.radialLines,r=t.polarAngles,i=t.polarRadius,a=o.state,s=a.radiusAxisMap,c=a.angleAxisMap,u=l0(s),h=l0(c),d=h.cx,f=h.cy,p=h.innerRadius,m=h.outerRadius;return(0,l.cloneElement)(e,{polarAngles:Array.isArray(r)?r:Cne(h,!0).map((function(e){return e.coordinate})),polarRadius:Array.isArray(i)?i:Cne(u,!0).map((function(e){return e.coordinate})),cx:d,cy:f,innerRadius:p,outerRadius:m,key:e.key||"polar-grid",radialLines:n})})),Mse(xse(o),"renderLegend",(function(){var e=o.state.formattedGraphicalItems,t=o.props,n=t.children,r=t.width,i=t.height,a=o.props.margin||{},s=r-(a.left||0)-(a.right||0),c=dne({children:n,formattedGraphicalItems:e,legendWidth:s,legendContent:u});if(!c)return null;var h=c.item,d=mse(c,use);return(0,l.cloneElement)(h,Cse(Cse({},d),{},{chartWidth:r,chartHeight:i,margin:a,onBBoxUpdate:o.handleLegendBBoxUpdate}))})),Mse(xse(o),"renderTooltip",(function(){var e,t=o.props,n=t.children,r=t.accessibilityLayer,i=T0(n,R1);if(!i)return null;var a=o.state,s=a.isTooltipActive,c=a.activeCoordinate,u=a.activePayload,h=a.activeLabel,d=a.offset,f=null!==(e=i.props.active)&&void 0!==e?e:s;return(0,l.cloneElement)(i,{viewBox:Cse(Cse({},d),{},{x:d.left,y:d.top}),active:f,label:h,payload:f?u:[],coordinate:c,accessibilityLayer:r})})),Mse(xse(o),"renderBrush",(function(e){var t=o.props,n=t.margin,r=t.data,i=o.state,a=i.offset,s=i.dataStartIndex,c=i.dataEndIndex,u=i.updateId;return(0,l.cloneElement)(e,{key:e.key||"_recharts-brush",onChange:Tne(o.handleBrushChange,e.props.onChange),data:r,x:r0(e.props.x)?e.props.x:a.left,y:r0(e.props.y)?e.props.y:a.top+a.height+a.brushBottom-(n.bottom||0),width:r0(e.props.width)?e.props.width:a.width,startIndex:s,endIndex:c,updateId:"brush-".concat(u)})})),Mse(xse(o),"renderReferenceElement",(function(e,t,n){if(!e)return null;var r=xse(o).clipPathId,i=o.state,a=i.xAxisMap,s=i.yAxisMap,c=i.offset,u=e.props,h=u.xAxisId,d=u.yAxisId;return(0,l.cloneElement)(e,{key:e.key||"".concat(t,"-").concat(n),xAxis:a[h],yAxis:s[d],viewBox:{x:c.left,y:c.top,width:c.width,height:c.height},clipPathId:r})})),Mse(xse(o),"renderActivePoints",(function(e){var n=e.item,r=e.activePoint,i=e.basePoint,o=e.childIndex,a=e.isRange,s=[],l=n.props.key,c=n.item.props,u=c.activeDot,h=Cse(Cse({index:o,dataKey:c.dataKey,cx:r.x,cy:r.y,r:4,fill:bne(n.item),strokeWidth:2,stroke:"#fff",payload:r.payload,value:r.value,key:"".concat(l,"-activePoint-").concat(o)},R0(u,!1)),v0(u));return s.push(t.renderActiveDot(u,h)),i?s.push(t.renderActiveDot(u,Cse(Cse({},h),{},{cx:i.x,cy:i.y,key:"".concat(l,"-basePoint-").concat(o)}))):a&&s.push(null),s})),Mse(xse(o),"renderGraphicChild",(function(e,t,n){var r=o.filterFormatItem(e,t,n);if(!r)return null;var i=o.getTooltipEventType(),a=o.state,s=a.isTooltipActive,c=a.tooltipAxis,u=a.activeTooltipIndex,h=a.activeLabel,d=T0(o.props.children,R1),f=r.props,p=f.points,m=f.isRange,g=f.baseLine,v=r.item.props,y=v.activeDot,A=v.hide,x=v.activeBar,b=v.activeShape,_=Boolean(!A&&s&&d&&(y||x||b)),w={};"axis"!==i&&d&&"click"===d.props.trigger?w={onClick:Tne(o.handleItemMouseEnter,e.props.onClick)}:"axis"!==i&&(w={onMouseLeave:Tne(o.handleItemMouseLeave,e.props.onMouseLeave),onMouseEnter:Tne(o.handleItemMouseEnter,e.props.onMouseEnter)});var E=(0,l.cloneElement)(e,Cse(Cse({},r.props),w));if(_){if(!(u>=0)){var S,C=(null!==(S=o.getItemByXY(o.state.activeCoordinate))&&void 0!==S?S:{graphicalItem:E}).graphicalItem,M=C.item,T=void 0===M?e:M,I=C.childIndex,B=Cse(Cse(Cse({},r.props),w),{},{activeIndex:I});return[(0,l.cloneElement)(T,B),null,null]}var P,R;if(c.dataKey&&!c.allowDuplicatedCategory){var D="function"===typeof c.dataKey?function(e){return"function"===typeof c.dataKey?c.dataKey(e.payload):null}:"payload.".concat(c.dataKey.toString());P=u0(p,D,h),R=m&&g&&u0(g,D,h)}else P=null===p||void 0===p?void 0:p[u],R=m&&g&&g[u];if(b||x){var O=void 0!==e.props.activeIndex?e.props.activeIndex:u;return[(0,l.cloneElement)(e,Cse(Cse(Cse({},r.props),w),{},{activeIndex:O})),null,null]}if(!B$()(P))return[E].concat(_se(o.renderActivePoints({item:r,activePoint:P,basePoint:R,childIndex:u,isRange:m})))}return m?[E,null,null]:[E,null]})),Mse(xse(o),"renderCustomized",(function(e,t,n){return(0,l.cloneElement)(e,Cse(Cse({key:"recharts-customized-".concat(n)},o.props),o.state))})),Mse(xse(o),"renderMap",{CartesianGrid:{handler:Rse,once:!0},ReferenceArea:{handler:o.renderReferenceElement},ReferenceLine:{handler:Rse},ReferenceDot:{handler:o.renderReferenceElement},XAxis:{handler:Rse},YAxis:{handler:Rse},Brush:{handler:o.renderBrush,once:!0},Bar:{handler:o.renderGraphicChild},Line:{handler:o.renderGraphicChild},Area:{handler:o.renderGraphicChild},Radar:{handler:o.renderGraphicChild},RadialBar:{handler:o.renderGraphicChild},Scatter:{handler:o.renderGraphicChild},Pie:{handler:o.renderGraphicChild},Funnel:{handler:o.renderGraphicChild},Tooltip:{handler:o.renderCursor,once:!0},PolarGrid:{handler:o.renderPolarGrid,once:!0},PolarAngleAxis:{handler:o.renderPolarAxis},PolarRadiusAxis:{handler:o.renderPolarAxis},Customized:{handler:o.renderCustomized}}),o.clipPathId="".concat(null!==(r=e.id)&&void 0!==r?r:a0("recharts"),"-clip"),o.throttleTriggeredAfterMouseMove=N$()(o.triggeredAfterMouseMove,null!==(i=e.throttleDelay)&&void 0!==i?i:1e3/60),o.state={},o}var r,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&bse(e,t)}(t,e),r=t,i=[{key:"componentDidMount",value:function(){var e,t;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:null!==(e=this.props.margin.left)&&void 0!==e?e:0,top:null!==(t=this.props.margin.top)&&void 0!==t?t:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var e=this.props,t=e.children,n=e.data,r=e.height,i=e.layout,o=T0(t,R1);if(o){var a=o.props.defaultIndex;if(!("number"!==typeof a||a<0||a>this.state.tooltipTicks.length)){var s=this.state.tooltipTicks[a]&&this.state.tooltipTicks[a].value,l=kse(this.state,n,a,s),c=this.state.tooltipTicks[a].coordinate,u=(this.state.offset.top+r)/2,h="horizontal"===i?{x:c,y:u}:{y:c,x:u},d=this.state.formattedGraphicalItems.find((function(e){return"Scatter"===e.item.type.name}));d&&(h=Cse(Cse({},h),d.props.points[a].tooltipPosition),l=d.props.points[a].tooltipPayload);var f={activeTooltipIndex:a,isTooltipActive:!0,activeLabel:s,activePayload:l,activeCoordinate:h};this.setState(f),this.renderCursor(o),this.accessibilityManager.setIndex(a)}}}},{key:"getSnapshotBeforeUpdate",value:function(e,t){return this.props.accessibilityLayer?(this.state.tooltipTicks!==t.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==e.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==e.margin&&this.accessibilityManager.setDetails({offset:{left:null!==(n=this.props.margin.left)&&void 0!==n?n:0,top:null!==(r=this.props.margin.top)&&void 0!==r?r:0}}),null):null;var n,r}},{key:"componentDidUpdate",value:function(e){D0([T0(e.children,R1)],[T0(this.props.children,R1)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var e=T0(this.props.children,R1);if(e&&"boolean"===typeof e.props.shared){var t=e.props.shared?"axis":"item";return s.indexOf(t)>=0?t:o}return o}},{key:"getMouseInfo",value:function(e){if(!this.container)return null;var t,n=this.container,r=n.getBoundingClientRect(),i={top:(t=r).top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft},o={chartX:Math.round(e.pageX-i.left),chartY:Math.round(e.pageY-i.top)},a=r.width/n.offsetWidth||1,s=this.inRange(o.chartX,o.chartY,a);if(!s)return null;var l=this.state,c=l.xAxisMap,u=l.yAxisMap;if("axis"!==this.getTooltipEventType()&&c&&u){var h=l0(c).scale,d=l0(u).scale,f=h&&h.invert?h.invert(o.chartX):null,p=d&&d.invert?d.invert(o.chartY):null;return Cse(Cse({},o),{},{xValue:f,yValue:p})}var m=Lse(this.state,this.props.data,this.props.layout,s);return m?Cse(Cse({},o),m):null}},{key:"inRange",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=this.props.layout,i=e/n,o=t/n;if("horizontal"===r||"vertical"===r){var a=this.state.offset;return i>=a.left&&i<=a.left+a.width&&o>=a.top&&o<=a.top+a.height?{x:i,y:o}:null}var s=this.state,l=s.angleAxisMap,c=s.radiusAxisMap;if(l&&c){var u=l0(l);return pre({x:i,y:o},u)}return null}},{key:"parseEventsOfWrapper",value:function(){var e=this.props.children,t=this.getTooltipEventType(),n=T0(e,R1),r={};return n&&"axis"===t&&(r="click"===n.props.trigger?{onClick:this.handleClick}:{onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd}),Cse(Cse({},v0(this.props,this.handleOuterEvent)),r)}},{key:"addListener",value:function(){lae.on(cae,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){lae.removeListener(cae,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(e,t,n){for(var r=this.state.formattedGraphicalItems,i=0,o=r.length;i<o;i++){var a=r[i];if(a.item===e||a.props.key===e.key||t===w0(a.item.type)&&n===a.childIndex)return a}return null}},{key:"renderClipPath",value:function(){var e=this.clipPathId,t=this.state.offset,n=t.left,r=t.top,i=t.height,o=t.width;return l.createElement("defs",null,l.createElement("clipPath",{id:e},l.createElement("rect",{x:n,y:r,height:i,width:o})))}},{key:"getXScales",value:function(){var e=this.state.xAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=pse(t,2),r=n[0],i=n[1];return Cse(Cse({},e),{},Mse({},r,i.scale))}),{}):null}},{key:"getYScales",value:function(){var e=this.state.yAxisMap;return e?Object.entries(e).reduce((function(e,t){var n=pse(t,2),r=n[0],i=n[1];return Cse(Cse({},e),{},Mse({},r,i.scale))}),{}):null}},{key:"getXScaleByAxisId",value:function(e){var t;return null===(t=this.state.xAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getYScaleByAxisId",value:function(e){var t;return null===(t=this.state.yAxisMap)||void 0===t||null===(t=t[e])||void 0===t?void 0:t.scale}},{key:"getItemByXY",value:function(e){var t=this.state,n=t.formattedGraphicalItems,r=t.activeItem;if(n&&n.length)for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a.props,l=a.item,c=w0(l.type);if("Bar"===c){var u=(s.data||[]).find((function(t){return x5(e,t)}));if(u)return{graphicalItem:a,payload:u}}else if("RadialBar"===c){var h=(s.data||[]).find((function(t){return pre(e,t)}));if(h)return{graphicalItem:a,payload:h}}else if(Iie(a,r)||Bie(a,r)||Pie(a,r)){var d=kie({graphicalItem:a,activeTooltipItem:r,itemData:l.props.data}),f=void 0===l.props.activeIndex?d:l.props.activeIndex;return{graphicalItem:Cse(Cse({},a),{},{childIndex:f}),payload:Pie(a,r)?l.props.data[d]:a.props.data[d]}}}return null}},{key:"render",value:function(){var e=this;if(!I0(this))return null;var t,n,r=this.props,i=r.children,o=r.className,a=r.width,s=r.height,c=r.style,u=r.compact,h=r.title,d=r.desc,f=mse(r,hse),p=R0(f,!1);if(u)return l.createElement(Loe,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},l.createElement(U0,fse({},p,{width:a,height:s,title:h,desc:d}),this.renderClipPath(),k0(i,this.renderMap)));this.props.accessibilityLayer&&(p.tabIndex=null!==(t=this.props.tabIndex)&&void 0!==t?t:0,p.role=null!==(n=this.props.role)&&void 0!==n?n:"application",p.onKeyDown=function(t){e.accessibilityManager.keyboardEvent(t)},p.onFocus=function(){e.accessibilityManager.focus()});var m=this.parseEventsOfWrapper();return l.createElement(Loe,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},l.createElement("div",fse({className:G$("recharts-wrapper",o),style:Cse({position:"relative",cursor:"default",width:a,height:s},c)},m,{ref:function(t){e.container=t}}),l.createElement(U0,fse({},p,{width:a,height:s,title:h,desc:d,style:Bse}),this.renderClipPath(),k0(i,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}],i&&gse(r.prototype,i),a&&gse(r,a),Object.defineProperty(r,"prototype",{writable:!1}),t}(l.Component),Mse(t,"displayName",n),Mse(t,"defaultProps",Cse({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},d)),Mse(t,"getDerivedStateFromProps",(function(e,t){var n=e.dataKey,r=e.data,i=e.children,o=e.width,a=e.height,s=e.layout,l=e.stackOffset,c=e.margin,u=t.dataStartIndex,h=t.dataEndIndex;if(void 0===t.updateId){var d=Use(e);return Cse(Cse(Cse({},d),{},{updateId:0},p(Cse(Cse({props:e},d),{},{updateId:0}),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(n!==t.prevDataKey||r!==t.prevData||o!==t.prevWidth||a!==t.prevHeight||s!==t.prevLayout||l!==t.prevStackOffset||!h0(c,t.prevMargin)){var f=Use(e),m={chartX:t.chartX,chartY:t.chartY,isTooltipActive:t.isTooltipActive},g=Cse(Cse({},Lse(t,r,s)),{},{updateId:t.updateId+1}),v=Cse(Cse(Cse({},f),m),g);return Cse(Cse(Cse({},v),p(Cse({props:e},v),t)),{},{prevDataKey:n,prevData:r,prevWidth:o,prevHeight:a,prevLayout:s,prevStackOffset:l,prevMargin:c,prevChildren:i})}if(!D0(i,t.prevChildren)){var y,A,x,b,_=T0(i,ire),w=_&&null!==(y=null===(A=_.props)||void 0===A?void 0:A.startIndex)&&void 0!==y?y:u,E=_&&null!==(x=null===(b=_.props)||void 0===b?void 0:b.endIndex)&&void 0!==x?x:h,S=w!==u||E!==h,C=!B$()(r)&&!S?t.updateId:t.updateId+1;return Cse(Cse({updateId:C},p(Cse(Cse({props:e},t),{},{updateId:C,dataStartIndex:w,dataEndIndex:E}),t)),{},{prevChildren:i,dataStartIndex:w,dataEndIndex:E})}return null})),Mse(t,"renderActiveDot",(function(e,t){var n;return n=(0,l.isValidElement)(e)?(0,l.cloneElement)(e,t):R$()(e)?e(t):l.createElement(J2,t),l.createElement(Q0,{className:"recharts-active-dot",key:t.key},n)})),t}({chartName:"BarChart",GraphicalChild:aoe,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:fle},{axisType:"yAxis",AxisComp:mle}],formatAxisMap:function(e,t,n,r,i){var a=e.width,s=e.height,l=e.layout,c=e.children,u=Object.keys(t),h={left:n.left,leftMirror:n.left,right:a-n.right,rightMirror:a-n.right,top:n.top,topMirror:n.top,bottom:s-n.bottom,bottomMirror:s-n.bottom},d=!!T0(c,aoe);return u.reduce((function(a,s){var c,u,f,p,m,g=t[s],v=g.orientation,y=g.domain,A=g.padding,x=void 0===A?{}:A,b=g.mirror,_=g.reversed,w="".concat(v).concat(b?"Mirror":"");if("number"===g.type&&("gap"===g.padding||"no-gap"===g.padding)){var E=y[1]-y[0],S=1/0,C=g.categoricalDomain.sort();if(C.forEach((function(e,t){t>0&&(S=Math.min((e||0)-(C[t-1]||0),S))})),Number.isFinite(S)){var M=S/E,T="vertical"===g.layout?n.height:n.width;if("gap"===g.padding&&(c=M*T/2),"no-gap"===g.padding){var I=s0(e.barCategoryGap,M*T),B=M*T/2;c=B-I-(B-I)/T*I}}}u="xAxis"===r?[n.left+(x.left||0)+(c||0),n.left+n.width-(x.right||0)-(c||0)]:"yAxis"===r?"horizontal"===l?[n.top+n.height-(x.bottom||0),n.top+(x.top||0)]:[n.top+(x.top||0)+(c||0),n.top+n.height-(x.bottom||0)-(c||0)]:g.range,_&&(u=[u[1],u[0]]);var P=function(e,t,n){var r=e.scale,i=e.type,a=e.layout,s=e.axisType;if("auto"===r)return"radial"===a&&"radiusAxis"===s?{scale:R5(),realScaleType:"band"}:"radial"===a&&"angleAxis"===s?{scale:n9(),realScaleType:"linear"}:"category"===i&&t&&(t.indexOf("LineChart")>=0||t.indexOf("AreaChart")>=0||t.indexOf("ComposedChart")>=0&&!n)?{scale:O5(),realScaleType:"point"}:"category"===i?{scale:R5(),realScaleType:"band"}:{scale:n9(),realScaleType:"linear"};if(q$()(r)){var l="scale".concat(k1()(r));return{scale:(o[l]||O5)(),realScaleType:o[l]?l:"point"}}return R$()(r)?{scale:r}:{scale:O5(),realScaleType:"point"}}(g,i,d),R=P.scale,D=P.realScaleType;R.domain(y).range(u),function(e){var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-Ine,o=Math.max(r[0],r[1])+Ine,a=e(t[0]),s=e(t[n-1]);(a<i||a>o||s<i||s>o)&&e.domain([t[0],t[n-1]])}}(R);var O=function(e,t){var n=t.realScaleType,r=t.type,i=t.tickCount,o=t.originalDomain,a=t.allowDecimals,s=n||t.scale;if("auto"!==s&&"linear"!==s)return null;if(i&&"number"===r&&o&&("auto"===o[0]||"auto"===o[1])){var l=e.domain();if(!l.length)return null;var c=ene(l,i,a);return e.domain([_te()(c),xte()(c)]),{niceTicks:c}}if(i&&"number"===r){var u=e.domain();return{niceTicks:tne(u,i,a)}}return null}(R,uoe(uoe({},g),{},{realScaleType:D}));"xAxis"===r?(m="top"===v&&!b||"bottom"===v&&b,f=n.left,p=h[w]-m*g.height):"yAxis"===r&&(m="left"===v&&!b||"right"===v&&b,f=h[w]-m*g.width,p=n.top);var k=uoe(uoe(uoe({},g),O),{},{realScaleType:D,x:f,y:p,scale:R,width:"xAxis"===r?n.width:g.width,height:"yAxis"===r?n.height:g.height});return k.bandSize=Fne(k,O),g.hide||"xAxis"!==r?g.hide||(h[w]+=(m?-1:1)*k.width):h[w]+=(m?-1:1)*k.height,uoe(uoe({},a),{},hoe({},s,k))}),{})}}),vle=["x1","y1","x2","y2","key"],yle=["offset"];function Ale(e){return Ale="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ale(e)}function xle(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ble(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xle(Object(n),!0).forEach((function(t){_le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xle(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _le(e,t,n){return t=function(e){var t=function(e,t){if("object"!=Ale(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=Ale(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Ale(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wle(){return wle=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wle.apply(this,arguments)}function Ele(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var Sle=function(e){var t=e.fill;if(!t||"none"===t)return null;var n=e.fillOpacity,r=e.x,i=e.y,o=e.width,a=e.height;return l.createElement("rect",{x:r,y:i,width:o,height:a,stroke:"none",fill:t,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function Cle(e,t){var n;if(l.isValidElement(e))n=l.cloneElement(e,t);else if(R$()(e))n=e(t);else{var r=t.x1,i=t.y1,o=t.x2,a=t.y2,s=t.key,c=Ele(t,vle),u=R0(c,!1),h=(u.offset,Ele(u,yle));n=l.createElement("line",wle({},h,{x1:r,y1:i,x2:o,y2:a,fill:"none",key:s}))}return n}function Mle(e){var t=e.x,n=e.width,r=e.horizontal,i=void 0===r||r,o=e.horizontalPoints;if(!i||!o||!o.length)return null;var a=o.map((function(r,o){var a=ble(ble({},e),{},{x1:t,y1:r,x2:t+n,y2:r,key:"line-".concat(o),index:o});return Cle(i,a)}));return l.createElement("g",{className:"recharts-cartesian-grid-horizontal"},a)}function Tle(e){var t=e.y,n=e.height,r=e.vertical,i=void 0===r||r,o=e.verticalPoints;if(!i||!o||!o.length)return null;var a=o.map((function(r,o){var a=ble(ble({},e),{},{x1:r,y1:t,x2:r,y2:t+n,key:"line-".concat(o),index:o});return Cle(i,a)}));return l.createElement("g",{className:"recharts-cartesian-grid-vertical"},a)}function Ile(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,i=e.y,o=e.width,a=e.height,s=e.horizontalPoints,c=e.horizontal;if(!(void 0===c||c)||!t||!t.length)return null;var u=s.map((function(e){return Math.round(e+i-i)})).sort((function(e,t){return e-t}));i!==u[0]&&u.unshift(0);var h=u.map((function(e,s){var c=!u[s+1]?i+a-e:u[s+1]-e;if(c<=0)return null;var h=s%t.length;return l.createElement("rect",{key:"react-".concat(s),y:e,x:r,height:c,width:o,stroke:"none",fill:t[h],fillOpacity:n,className:"recharts-cartesian-grid-bg"})}));return l.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},h)}function Ble(e){var t=e.vertical,n=void 0===t||t,r=e.verticalFill,i=e.fillOpacity,o=e.x,a=e.y,s=e.width,c=e.height,u=e.verticalPoints;if(!n||!r||!r.length)return null;var h=u.map((function(e){return Math.round(e+o-o)})).sort((function(e,t){return e-t}));o!==h[0]&&h.unshift(0);var d=h.map((function(e,t){var n=!h[t+1]?o+s-e:h[t+1]-e;if(n<=0)return null;var u=t%r.length;return l.createElement("rect",{key:"react-".concat(t),x:e,y:a,width:n,height:c,stroke:"none",fill:r[u],fillOpacity:i,className:"recharts-cartesian-grid-bg"})}));return l.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},d)}var Ple=function(e,t){var n=e.xAxis,r=e.width,i=e.height,o=e.offset;return Sne(Yse(ble(ble(ble({},hle.defaultProps),n),{},{ticks:Cne(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),o.left,o.left+o.width,t)},Rle=function(e,t){var n=e.yAxis,r=e.width,i=e.height,o=e.offset;return Sne(Yse(ble(ble(ble({},hle.defaultProps),n),{},{ticks:Cne(n,!0),viewBox:{x:0,y:0,width:r,height:i}})),o.top,o.top+o.height,t)},Dle={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function Ole(e){var t,n,r,i,o,a,s=Goe(),c=Qoe(),u=joe(),h=ble(ble({},e),{},{stroke:null!==(t=e.stroke)&&void 0!==t?t:Dle.stroke,fill:null!==(n=e.fill)&&void 0!==n?n:Dle.fill,horizontal:null!==(r=e.horizontal)&&void 0!==r?r:Dle.horizontal,horizontalFill:null!==(i=e.horizontalFill)&&void 0!==i?i:Dle.horizontalFill,vertical:null!==(o=e.vertical)&&void 0!==o?o:Dle.vertical,verticalFill:null!==(a=e.verticalFill)&&void 0!==a?a:Dle.verticalFill,x:r0(e.x)?e.x:u.left,y:r0(e.y)?e.y:u.top,width:r0(e.width)?e.width:u.width,height:r0(e.height)?e.height:u.height}),d=h.x,f=h.y,p=h.width,m=h.height,g=h.syncWithTicks,v=h.horizontalValues,y=h.verticalValues,A=zoe(),x=Uoe();if(!r0(p)||p<=0||!r0(m)||m<=0||!r0(d)||d!==+d||!r0(f)||f!==+f)return null;var b=h.verticalCoordinatesGenerator||Ple,_=h.horizontalCoordinatesGenerator||Rle,w=h.horizontalPoints,E=h.verticalPoints;if((!w||!w.length)&&R$()(_)){var S=v&&v.length,C=_({yAxis:x?ble(ble({},x),{},{ticks:S?v:x.ticks}):void 0,width:s,height:c,offset:u},!!S||g);D1(Array.isArray(C),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ale(C),"]")),Array.isArray(C)&&(w=C)}if((!E||!E.length)&&R$()(b)){var M=y&&y.length,T=b({xAxis:A?ble(ble({},A),{},{ticks:M?y:A.ticks}):void 0,width:s,height:c,offset:u},!!M||g);D1(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ale(T),"]")),Array.isArray(T)&&(E=T)}return l.createElement("g",{className:"recharts-cartesian-grid"},l.createElement(Sle,{fill:h.fill,fillOpacity:h.fillOpacity,x:h.x,y:h.y,width:h.width,height:h.height}),l.createElement(Mle,wle({},h,{offset:u,horizontalPoints:w,xAxis:A,yAxis:x})),l.createElement(Tle,wle({},h,{offset:u,verticalPoints:E,xAxis:A,yAxis:x})),l.createElement(Ile,wle({},h,{horizontalPoints:w})),l.createElement(Ble,wle({},h,{verticalPoints:E})))}Ole.displayName="CartesianGrid";const kle=function(){const[e,t]=(0,l.useState)([]);(0,l.useEffect)((()=>{fetch("https://scamguard.live/api/most_frequent_scams/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>t(e))).catch((e=>console.error("Error fetching map data:",e.message)))}),[]);const[n,r]=(0,l.useState)(!1);return(0,ov.jsxs)("div",{className:"chart-container",children:[(0,ov.jsx)("h2",{children:"Current Most Reported Scams"}),(0,ov.jsxs)(gle,{width:600,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5},children:[(0,ov.jsx)(Ole,{strokeDasharray:"3 3"}),(0,ov.jsx)(fle,{dataKey:"category_level_3"}),(0,ov.jsx)(mle,{}),(0,ov.jsx)(R1,{formatter:e=>[`${e.toLocaleString()}`,"Number of Reports"],labelFormatter:e=>`Scam Type: ${e}`}),(0,ov.jsx)(X2,{formatter:e=>"Number of Reports"}),(0,ov.jsx)(aoe,{dataKey:"number_of_reports",fill:"#8884d8",radius:[30,30,30,30]})]}),(0,ov.jsxs)("p",{children:["The ",(0,ov.jsx)("strong",{children:"Phishing"})," ranked at the ",(0,ov.jsx)("strong",{children:"first place"})," in the top three most frequent scams received by Australians from the age group 65 and over."]}),n&&(0,ov.jsxs)("div",{className:"expanded-text",children:[(0,ov.jsxs)("p",{children:["There were ",(0,ov.jsx)("strong",{children:"3025 Phishing scams"})," reported for June, which increased by half compared to the similar month a year ago. It is expected that this Phishing will continue to increase."]}),(0,ov.jsxs)("p",{children:["The ",(0,ov.jsx)("strong",{children:"False billing"})," ranked at the second place in the top three most frequent scams received by Australians from the age group 65 and over. There were ",(0,ov.jsx)("strong",{children:"735 False billing scams"})," reported for June, which decreased by a quarter compared to the similar month a year ago. It is expected that this False billing will continue to decrease."]}),(0,ov.jsxs)("p",{children:["The ",(0,ov.jsx)("strong",{children:"Identity theft"})," ranked at the third place in the top three most frequent scams received by Australians from the age group 65 and over. There were ",(0,ov.jsx)("strong",{children:"449 Identity theft scams"})," reported for June, which increased by half compared to the similar month a year ago. It is expected that this Identity theft will continue to increase."]})]}),(0,ov.jsx)("button",{className:"bule-background-button",onClick:()=>{r(!n)},children:n?"Read Less":"Read More"})]})};const Lle=function(){const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{fetch("https://scamguard.live/api/scams_highest_loss/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>t(e))).catch((e=>console.error("Error fetching map data:",e.message)))}),[]),(0,ov.jsxs)("div",{className:"chart-container",children:[(0,ov.jsx)("h2",{children:"Current Top Scams by Loss (in $AUD)"}),(0,ov.jsxs)(gle,{width:600,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5},children:[(0,ov.jsx)(Ole,{strokeDasharray:"3 3"}),(0,ov.jsx)(fle,{dataKey:"category_level_3",stroke:"#EDF5FF"}),(0,ov.jsx)(mle,{stroke:"#EDF5FF"}),(0,ov.jsx)(R1,{formatter:e=>[`$${e.toLocaleString()}`,"Amount Lost"],labelFormatter:e=>`Scam Type: ${e}`,contentStyle:{backgroundColor:"#FFF",color:"#000"}}),(0,ov.jsx)(X2,{formatter:e=>"Amount of Lost ($AUD)"}),(0,ov.jsx)(aoe,{dataKey:"amount_lost",fill:"#DBAEFF",radius:[30,30,30,30]})]}),(0,ov.jsxs)("p",{children:["The ",(0,ov.jsx)("strong",{children:"Investment scams"})," ranked at the ",(0,ov.jsx)("strong",{children:"first place"})," in the top three scams that caused the highest financial losses in June from Australians in the age group 65 and over."]}),n&&(0,ov.jsxs)("div",{className:"expanded-text",children:[(0,ov.jsxs)("p",{children:["There were ",(0,ov.jsx)("strong",{children:"96"})," reports with total and average financial losses to be ",(0,ov.jsx)("strong",{children:"$5,304,465.49 and $55,255.00"})," respectively."]}),(0,ov.jsxs)("p",{children:["The ",(0,ov.jsx)("strong",{children:"Phishing"})," ranked at the second place in the top three scams that caused the highest financial losses in June from Australians in the age group 65 and over. There were 3025 reports with total and average financial losses to be ",(0,ov.jsx)("strong",{children:"$3,502,799.60 and $1,158.00"})," respectively."]}),(0,ov.jsxs)("p",{children:["The ",(0,ov.jsx)("strong",{children:"Remote access scams"})," ranked at the third place in the top three scams that caused the highest financial losses in June from Australians in the age group 65 and over. There were ",(0,ov.jsx)("strong",{children:"200 reports"})," with total and average financial losses to be ",(0,ov.jsx)("strong",{children:"$626,888.79 and $3,134.00"})," respectively."]})]}),(0,ov.jsx)("button",{className:"read-more-button",onClick:()=>{r(!n)},children:n?"Read Less":"Read More"})]})};const Fle=function(){const[e,t]=(0,l.useState)([]),[n,r]=(0,l.useState)(!1);return(0,l.useEffect)((()=>{fetch("https://scamguard.live/api/most_scams_contact_methods/",{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((e=>t(e))).catch((e=>console.error("Error fetching map data:",e.message)))}),[]),(0,ov.jsxs)("div",{className:"chart-container",children:[(0,ov.jsx)("h2",{children:"Current Most Popular Contact Methods"}),(0,ov.jsxs)(gle,{width:600,height:300,data:e,margin:{top:5,right:30,left:20,bottom:5},children:[(0,ov.jsx)(Ole,{strokeDasharray:"3 3"}),(0,ov.jsx)(fle,{dataKey:"scam_contact_mode"}),(0,ov.jsx)(mle,{}),(0,ov.jsx)(R1,{formatter:e=>[`${e.toLocaleString()}`,"Number of Reports"],labelFormatter:e=>`Scam Type: ${e}`}),(0,ov.jsx)(X2,{formatter:e=>"Number of Reports"}),(0,ov.jsx)(aoe,{dataKey:"number_of_reports",fill:"#8884d8",radius:[30,30,30,30]})]}),(0,ov.jsxs)("p",{children:["The ",(0,ov.jsx)("strong",{children:"Email"})," ranked at the ",(0,ov.jsx)("strong",{children:"first place"})," in the top three most frequent methods scammers used to contact Australians from the age group 65 and over."]}),n&&(0,ov.jsxs)("div",{className:"expanded-text",children:[(0,ov.jsxs)("p",{children:["There were ",(0,ov.jsx)("strong",{children:"3198 Email reports"})," for June, which increased by one-third compared to the similar month a year ago. It is expected that this Email method will continue to increase."]}),(0,ov.jsxs)("p",{children:["The ",(0,ov.jsx)("strong",{children:"Text message"})," ranked at the second place in the top three most frequent methods scammers used to contact Australians from the age group 65 and over. There were ",(0,ov.jsx)("strong",{children:"2001 Text message"})," reports for June, which increased by double compared to the similar month a year ago. It is expected that this Text message method will continue to increase."]}),(0,ov.jsxs)("p",{children:["The ",(0,ov.jsx)("strong",{children:"Phone call"})," ranked at the third place in the top three most frequent methods scammers used to contact Australians from the age group 65 and over. There were ",(0,ov.jsx)("strong",{children:"575 Phone call"})," reports for June, which decreased by half compared to the similar month a year ago. It is expected that this Phone call method will continue to decrease."]})]}),(0,ov.jsx)("button",{className:"bule-background-button",onClick:()=>{r(!n)},children:n?"Read Less":"Read More"})]})},zle=()=>{const e=(0,l.useRef)(null),t=(0,l.useRef)(null),n=(0,l.useRef)(null),r=e=>{var t;null===(t=e.current)||void 0===t||t.scrollIntoView({behavior:"smooth"})};return(0,ov.jsxs)("div",{className:"CurrentScamsPage",children:[(0,ov.jsx)("nav",{className:"Side-menu",children:(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("h2",{children:"Page Menu"}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"#most-reported",onClick:()=>r(e),children:"Current Most Reported Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"#top-loss",onClick:()=>r(t),children:"Current Top Scams By Loss"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"#popular-contact",onClick:()=>r(n),children:"Current Most Popular Contact Methods"})})]})}),(0,ov.jsxs)("header",{className:"current-scam-header",children:[(0,ov.jsx)("h1",{children:"Top 3 Current Scams"}),(0,ov.jsx)("p",{children:"Informing you of the most current scams in recent months to help you stay safe"})]}),(0,ov.jsxs)("main",{children:[(0,ov.jsx)("section",{className:"most-reported-section",ref:e,id:"most-reported",children:(0,ov.jsx)(kle,{})}),(0,ov.jsx)("section",{className:"top-loss-section",ref:t,id:"top-loss",children:(0,ov.jsx)(Lle,{})}),(0,ov.jsx)("section",{className:"popular-contact-section",ref:n,id:"popular-contact",children:(0,ov.jsx)(Fle,{})})]}),(0,ov.jsxs)("p",{children:["Data obtained from ",(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:"Scamwatch"})," \xa9 ",(0,ov.jsx)("a",{href:"https://au.creativecommons.net/",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:"Commonwealth of Australia"})]})]})},Ule=()=>{const e=ae();return(0,ov.jsxs)("div",{className:"IdentifyScamsPage",children:[(0,ov.jsxs)("header",{className:"indentify-scams-header",children:[(0,ov.jsx)("h1",{children:"How to Identify Scams"}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("strong",{children:"Click"})," on Card to find out more information/example about how different Scams works and how to identify them."]})]}),(0,ov.jsxs)("div",{className:"scams-container",children:[(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/text-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Text Scams"}),(0,ov.jsx)("img",{src:n(8862),alt:"Text Scams"})]})}),(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/phone-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Phone Scams"}),(0,ov.jsx)("img",{src:n(5969),alt:"Phone Scams"})]})}),(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/email-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Email Scams"}),(0,ov.jsx)("img",{src:n(1101),alt:"Email Scams"})]})}),(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/social-media-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Social Media Scams"}),(0,ov.jsx)("img",{src:n(5101),alt:"Social Media Scams"})]})}),(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/website-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Website Scams"}),(0,ov.jsx)("img",{src:n(4779),alt:"Website Scams"})]})}),(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/romance-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Romance Scams"}),(0,ov.jsx)("img",{src:n(968),alt:"Romance Scams"})]})}),(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/investment-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Investment Scams"}),(0,ov.jsx)("img",{src:n(2585),alt:"Investment Scams",className:"icon"})]})}),(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/product-and-service-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Product And Service Scams"}),(0,ov.jsx)("img",{src:n(5190),alt:"Product And Service Scams"})]})}),(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/job-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Job Scams"}),(0,ov.jsx)("img",{src:n(1807),alt:"Job Scams"})]})}),(0,ov.jsx)("div",{className:"clickable-box",onClick:()=>e("/impersonation-scams"),children:(0,ov.jsxs)("div",{className:"text-content",children:[(0,ov.jsx)("h3",{children:"Impersonation Scams"}),(0,ov.jsx)("img",{src:n(4793),alt:"Impersonation Scams"})]})})]})]})},Nle=()=>{const e=ae();return(0,ov.jsxs)("div",{className:"Report-Page",children:[(0,ov.jsx)("header",{className:"report-scams-header",children:(0,ov.jsx)("h1",{children:"Report Scam"})}),(0,ov.jsxs)("section",{className:"report-scam-step",children:[(0,ov.jsx)("h2",{children:"Steps to Reporting Scams"}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("strong",{children:"Identify scams:"})," If you receive suspicious calls, text messages, emails, or see suspicious websites, pay attention to whether these behaviors match common scam characteristics."]}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("strong",{children:"Record information:"})," Record the suspicious information you come into contact with as detailed as possible, including time, content, and the other party's contact information."]}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("strong",{children:"Report immediately:"})," Use the online form we provide or call the service hotline to report the information you have to us. Your report will help us take further action."]})]}),(0,ov.jsxs)("section",{className:"how-to-report-scam",children:[(0,ov.jsx)("h2",{children:"How to Report a Scam"}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("h3",{children:"You didn\u2019t give them your personal information or property"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"First, stop all communication with the scammer."}),(0,ov.jsx)("li",{children:"Provide details of the scam (e.g., screenshots, photos, chat logs), including who contacted you and when."}),(0,ov.jsxs)("li",{children:["You need to understand what type of scam this is. If you are not sure, click "," ",(0,ov.jsx)("span",{onClick:()=>e("/identifyScam"),style:{color:"#FAFF00",textDecoration:"underline",cursor:"pointer"},children:"How to Identify Scams"}),"."]}),(0,ov.jsx)("li",{children:"Prepare any information you have about the scammer (e.g., ABN, ACN, name, email, phone number, social account, website, or URL)."}),(0,ov.jsxs)("li",{children:["Report the scam to ",(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/report-a-scam",target:"_blank",children:"National Anti-Scam Centre - Scamwatch"}),"."]}),(0,ov.jsx)("li",{children:"If you receive a scam message on a social platform, contact the relevant IT department and inform them."})]})]}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("h3",{children:"You think a scammer has stolen your personal information"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Contact your financial institution to secure your financial accounts."}),(0,ov.jsx)("li",{children:"Change the passwords to any other accounts you think the scammer may have accessed or to which they now have access. This could include banking, superannuation, and email accounts."}),(0,ov.jsxs)("li",{children:["Complete a report through ",(0,ov.jsx)("a",{href:"https://www.cyber.gov.au/report-and-recover/report",target:"_blank",children:"ReportCyber"}),"."]}),(0,ov.jsxs)("li",{children:["IDCARE can help you reduce the harm caused by identity breaches and misuse. Visit ",(0,ov.jsx)("a",{href:"https://www.idcare.org/",target:"_blank",children:"IDCARE"})," or call 1800 595 160 (Monday to Friday 8am\u20135pm)."]}),(0,ov.jsx)("li",{children:"If you have disclosed your personal information on a social platform, please contact the relevant platform."}),(0,ov.jsx)("li",{children:"Look for suspicious emails, phone calls, texts, or messages through social media. Block or don't answer anyone you don't know. Don't click on any links."})]})]}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("h3",{children:"You\u2019ve been scammed and lost personal property"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Immediately report the situation to your bank or financial institution."}),(0,ov.jsx)("li",{children:"Stop all communication with the scammer."}),(0,ov.jsxs)("li",{children:["Complete a report through ",(0,ov.jsx)("a",{href:"https://www.cyber.gov.au/report-and-recover/report",target:"_blank",children:"ReportCyber"}),"."]}),(0,ov.jsx)("li",{children:"Notify the social media or platform where the scam account interacted with you and report the account."}),(0,ov.jsxs)("li",{children:["You can ask the social platform where you were defrauded how to change your password and seek more help from ",(0,ov.jsx)("a",{href:"https://www.idcare.org/",target:"_blank",children:"IDCARE"}),"."]}),(0,ov.jsxs)("li",{children:["Contact ",(0,ov.jsx)("a",{href:"https://www.oaic.gov.au/privacy/your-privacy-rights/credit-reporting/access-your-credit-report",target:"_blank",children:"OAIC"})," to check if any attempts to open accounts in your name have been made."]})]})]})]}),(0,ov.jsxs)("section",{className:"why-report-scam",children:[(0,ov.jsx)("h2",{children:"Why Report a Scam?"}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("strong",{children:"Opportunity to recover losses:"})," Reporting a scam is not only for justice; it may also help you get your lost funds back. ReportCyber and some specialized organizations will use your report to track the flow of funds and take steps to recover your money. Every report is a chance to regain control of the situation and prevent your losses from being irreversible. Please don't pass up this opportunity; reporting may be the key step to turning the situation around."]}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("strong",{children:"Protect others:"})," With your consent, ScamWatch will protect you and others from new and emerging scams. The report you submit is not only to protect your own rights but also to build a line of defense for countless potential victims. Your report could help many families and individuals avoid the pain and loss caused by scams."]}),(0,ov.jsxs)("p",{children:[(0,ov.jsx)("strong",{children:"Get additional assistance:"})," If you have already been a victim of fraud, IDCARE can provide you with critical support and guidance. IDCARE specializes in helping victims deal with identity theft and related cybercrime. They will work with you to develop a personalized recovery plan, assist you in protecting your personal information, mitigate your losses, and guide you through the necessary steps to recover and protect your identity."]})]}),(0,ov.jsxs)("section",{className:"after-report-scam",children:[(0,ov.jsx)("h2",{children:"What Happens After You Report It?"}),(0,ov.jsx)("p",{children:"Once you have submitted a report, we will immediately assess the situation and pass the relevant information to the appropriate law enforcement agencies or cybersecurity experts. We may contact you for more information or to provide further support."})]})]})},jle=()=>{ae();return(0,ov.jsxs)("div",{className:"what-to-do-Page",children:[(0,ov.jsx)("header",{className:"what-to-do-header",children:(0,ov.jsx)("h1",{children:"What to do if you've been scammed"})}),(0,ov.jsxs)("section",{className:"what-to-do-step1",children:[(0,ov.jsx)("h2",{children:"1. Act fast to prevent further losses"}),(0,ov.jsx)("p",{children:"If you suspect that you've been scammed, it's essential to take immediate action to protect yourself and prevent further losses. First, stop all communication with the scammer and do not provide any additional information. Next, contact your financial institution to secure your accounts and monitor for any suspicious activity. It's also important to change the passwords for any accounts that may have been compromised. Acting swiftly can significantly reduce the impact of the scam and protect your financial and personal information."})]}),(0,ov.jsxs)("section",{className:"what-to-do-step2",children:[(0,ov.jsx)("h2",{children:"2. Report Scams"}),(0,ov.jsxs)("p",{children:["Once you have contacted your financial institution, you need to take action to report the scam. This may help you recover the money you have lost and prevent others from being scammed. If you are not sure how to report a scam and what materials you need to provide, please ",(0,ov.jsx)("a",{href:"/report-scam",target:"_blank",children:"click here"}),' to jump to the "Report Scam" interface. We will guide you on how to report a scam and what materials you need to prepare.']})]}),(0,ov.jsxs)("section",{className:"what-to-do-step3",children:[(0,ov.jsx)("h2",{children:"3. Watch out for follow up scams"}),(0,ov.jsx)("p",{children:"After an initial scam, scammers often try to exploit the victim's anxiety and confusion with follow-up scams. Stay vigilant and report any suspicious contacts to a trusted organization."})]}),(0,ov.jsxs)("section",{className:"what-to-do-step4",children:[(0,ov.jsx)("h2",{children:"4. Get Support"}),(0,ov.jsx)("h3",{children:"Your financial institution"}),(0,ov.jsx)("p",{children:"Contact your bank or credit union immediately if you\u2019ve sent money to a scammer. They may be able to close your account or stop a transaction. Make sure you call them using their official phone number, not the one in the scam message."}),(0,ov.jsx)("h3",{children:"ASD's ACSC ReportCyber"}),(0,ov.jsxs)("p",{children:["The Australian Cyber Security Centre (ACSC), part of the Australian Signals Directorate (ASD), is a key agency in protecting Australia from cyber threats. The ACSC provides a range of services to individuals, businesses, and government agencies to help them improve their cybersecurity. For more information, visit ",(0,ov.jsx)("a",{href:"https://www.cyber.gov.au/about-us",target:"_blank",children:"ACSC's website"})," or call the Australian Cyber Security Hotline on 1300 292 371 (open 24 hours, 7 days a week)."]}),(0,ov.jsx)("h3",{children:"IDCARE"}),(0,ov.jsxs)("p",{children:["IDCARE is the national identity and cyber support service for Australia and New Zealand, specializing in helping individuals and businesses deal with identity theft, cyber fraud, and related security threats. Visit ",(0,ov.jsx)("a",{href:"https://www.idcare.org/",target:"_blank",children:"IDCARE's website"})," for more information, or call 1800 595 160 (Monday to Friday 8am\u20135pm)."]}),(0,ov.jsx)("h3",{children:"National Anti-Scam Centre - Scamwatch"}),(0,ov.jsxs)("p",{children:["Scamwatch is run by the National Fraud Centre and collects reports of scams to help warn others and take action to stop them. They also provide up-to-date scam information to help you spot and avoid scams. Visit ",(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/",target:"_blank",children:"Scamwatch's website"})," for more information."]}),(0,ov.jsx)("h3",{children:"Services Australia"}),(0,ov.jsxs)("p",{children:["Contact the Services Australia Scams and Identity Theft Helpdesk. They provide crucial information and support to help individuals protect themselves against scams and identity theft. Visit ",(0,ov.jsx)("a",{href:"https://www.servicesaustralia.gov.au/scams-and-identity-theft?context=60271",target:"_blank",children:"Services Australia's website"})," or call 1800 941 126 (Monday to Friday 8am\u20135pm)."]}),(0,ov.jsx)("h3",{children:"MoneySmart"}),(0,ov.jsxs)("p",{children:["If a scam is causing you problems with debt, talk to MoneySmart. This is a free and confidential service to help you get your finances back on track. Visit ",(0,ov.jsx)("a",{href:"https://moneysmart.gov.au/",target:"_blank",children:"MoneySmart's website"})," for more information."]}),(0,ov.jsx)("h3",{children:"Australian Taxation Office"}),(0,ov.jsxs)("p",{children:["If you suspect you have become a victim of tax-related fraud, the ATO encourages you to report it immediately. They will record the relevant information and guide you on how to protect yourself. Visit ",(0,ov.jsx)("a",{href:"https://www.ato.gov.au/",target:"_blank",children:"ATO's website"})," for more information."]}),(0,ov.jsx)("h3",{children:"If you need someone to talk to"}),(0,ov.jsxs)("p",{children:["If you need emotional support, you can contact Beyond Blue at 1300 22 4636 (24 hours a day, 7 days a week) or visit their ",(0,ov.jsx)("a",{href:"https://www.beyondblue.org.au/get-support/talk-to-a-counsellor/chat",target:"_blank",children:"website"})," for online chat support."]}),(0,ov.jsxs)("p",{children:["You can also reach Lifeline at 13 11 14 (24 hours a day, 7 days a week) or visit their ",(0,ov.jsx)("a",{href:"https://www.lifeline.org.au/crisis-chat/",target:"_blank",children:"website"})," for online chat support."]})]})]})};function Gle(e,t){return function(){return e.apply(t,arguments)}}const{toString:Qle}=Object.prototype,{getPrototypeOf:Hle}=Object,Vle=(Wle=Object.create(null),e=>{const t=Qle.call(e);return Wle[t]||(Wle[t]=t.slice(8,-1).toLowerCase())});var Wle;const qle=e=>(e=e.toLowerCase(),t=>Vle(t)===e),Xle=e=>t=>typeof t===e,{isArray:Yle}=Array,Jle=Xle("undefined");const Kle=qle("ArrayBuffer");const Zle=Xle("string"),$le=Xle("function"),ece=Xle("number"),tce=e=>null!==e&&"object"===typeof e,nce=e=>{if("object"!==Vle(e))return!1;const t=Hle(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},rce=qle("Date"),ice=qle("File"),oce=qle("Blob"),ace=qle("FileList"),sce=qle("URLSearchParams"),[lce,cce,uce,hce]=["ReadableStream","Request","Response","Headers"].map(qle);function dce(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),Yle(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{const r=i?Object.getOwnPropertyNames(e):Object.keys(e),o=r.length;let a;for(n=0;n<o;n++)a=r[n],t.call(null,e[a],a,e)}}function fce(e,t){t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const pce="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,mce=e=>!Jle(e)&&e!==pce;const gce=(vce="undefined"!==typeof Uint8Array&&Hle(Uint8Array),e=>vce&&e instanceof vce);var vce;const yce=qle("HTMLFormElement"),Ace=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),xce=qle("RegExp"),bce=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};dce(n,((n,i)=>{let o;!1!==(o=t(n,i,e))&&(r[i]=o||n)})),Object.defineProperties(e,r)},_ce="abcdefghijklmnopqrstuvwxyz",wce="0123456789",Ece={DIGIT:wce,ALPHA:_ce,ALPHA_DIGIT:_ce+_ce.toUpperCase()+wce};const Sce=qle("AsyncFunction"),Cce=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],pce.addEventListener("message",(e=>{let{source:t,data:i}=e;t===pce&&i===n&&r.length&&r.shift()()}),!1),e=>{r.push(e),pce.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,$le(pce.postMessage)),Mce="undefined"!==typeof queueMicrotask?queueMicrotask.bind(pce):"undefined"!==typeof process&&process.nextTick||Cce,Tce={isArray:Yle,isArrayBuffer:Kle,isBuffer:function(e){return null!==e&&!Jle(e)&&null!==e.constructor&&!Jle(e.constructor)&&$le(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||$le(e.append)&&("formdata"===(t=Vle(e))||"object"===t&&$le(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Kle(e.buffer),t},isString:Zle,isNumber:ece,isBoolean:e=>!0===e||!1===e,isObject:tce,isPlainObject:nce,isReadableStream:lce,isRequest:cce,isResponse:uce,isHeaders:hce,isUndefined:Jle,isDate:rce,isFile:ice,isBlob:oce,isRegExp:xce,isFunction:$le,isStream:e=>tce(e)&&$le(e.pipe),isURLSearchParams:sce,isTypedArray:gce,isFileList:ace,forEach:dce,merge:function e(){const{caseless:t}=mce(this)&&this||{},n={},r=(r,i)=>{const o=t&&fce(n,i)||i;nce(n[o])&&nce(r)?n[o]=e(n[o],r):nce(r)?n[o]=e({},r):Yle(r)?n[o]=r.slice():n[o]=r};for(let i=0,o=arguments.length;i<o;i++)arguments[i]&&dce(arguments[i],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return dce(t,((t,r)=>{n&&$le(t)?e[r]=Gle(t,n):e[r]=t}),{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,o,a;const s={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),o=i.length;o-- >0;)a=i[o],r&&!r(a,e,t)||s[a]||(t[a]=e[a],s[a]=!0);e=!1!==n&&Hle(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Vle,kindOfTest:qle,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(Yle(e))return e;let t=e.length;if(!ece(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:yce,hasOwnProperty:Ace,hasOwnProp:Ace,reduceDescriptors:bce,freezeMethods:e=>{bce(e,((t,n)=>{if($le(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];$le(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))}))},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach((e=>{n[e]=!0}))};return Yle(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(e,t,n){return t.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:fce,global:pce,isContextDefined:mce,ALPHABET:Ece,generateString:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ece.ALPHA_DIGIT,n="";const{length:r}=t;for(;e--;)n+=t[Math.random()*r|0];return n},isSpecCompliantForm:function(e){return!!(e&&$le(e.append)&&"FormData"===e[Symbol.toStringTag]&&e[Symbol.iterator])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(tce(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[r]=e;const i=Yle(e)?[]:{};return dce(e,((e,t)=>{const o=n(e,r+1);!Jle(o)&&(i[t]=o)})),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:Sce,isThenable:e=>e&&(tce(e)||$le(e))&&$le(e.then)&&$le(e.catch),setImmediate:Cce,asap:Mce};function Ice(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}Tce.inherits(Ice,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Tce.toJSONObject(this.config),code:this.code,status:this.status}}});const Bce=Ice.prototype,Pce={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((e=>{Pce[e]={value:e}})),Object.defineProperties(Ice,Pce),Object.defineProperty(Bce,"isAxiosError",{value:!0}),Ice.from=(e,t,n,r,i,o)=>{const a=Object.create(Bce);return Tce.toFlatObject(e,a,(function(e){return e!==Error.prototype}),(e=>"isAxiosError"!==e)),Ice.call(a,e.message,t,n,r,i),a.cause=e,a.name=e.name,o&&Object.assign(a,o),a};const Rce=Ice;function Dce(e){return Tce.isPlainObject(e)||Tce.isArray(e)}function Oce(e){return Tce.endsWith(e,"[]")?e.slice(0,-2):e}function kce(e,t,n){return e?e.concat(t).map((function(e,t){return e=Oce(e),!n&&t?"["+e+"]":e})).join(n?".":""):t}const Lce=Tce.toFlatObject(Tce,{},null,(function(e){return/^is[A-Z]/.test(e)}));const Fce=function(e,t,n){if(!Tce.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Tce.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(e,t){return!Tce.isUndefined(t[e])}))).metaTokens,i=n.visitor||c,o=n.dots,a=n.indexes,s=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Tce.isSpecCompliantForm(t);if(!Tce.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Tce.isDate(e))return e.toISOString();if(!s&&Tce.isBlob(e))throw new Rce("Blob is not supported. Use a Buffer instead.");return Tce.isArrayBuffer(e)||Tce.isTypedArray(e)?s&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let s=e;if(e&&!i&&"object"===typeof e)if(Tce.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Tce.isArray(e)&&function(e){return Tce.isArray(e)&&!e.some(Dce)}(e)||(Tce.isFileList(e)||Tce.endsWith(n,"[]"))&&(s=Tce.toArray(e)))return n=Oce(n),s.forEach((function(e,r){!Tce.isUndefined(e)&&null!==e&&t.append(!0===a?kce([n],r,o):null===a?n:n+"[]",l(e))})),!1;return!!Dce(e)||(t.append(kce(i,n,o),l(e)),!1)}const u=[],h=Object.assign(Lce,{defaultVisitor:c,convertValue:l,isVisitable:Dce});if(!Tce.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Tce.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Tce.forEach(n,(function(n,o){!0===(!(Tce.isUndefined(n)||null===n)&&i.call(t,n,Tce.isString(o)?o.trim():o,r,h))&&e(n,r?r.concat(o):[o])})),u.pop()}}(e),t};function zce(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,(function(e){return t[e]}))}function Uce(e,t){this._pairs=[],e&&Fce(e,this,t)}const Nce=Uce.prototype;Nce.append=function(e,t){this._pairs.push([e,t])},Nce.toString=function(e){const t=e?function(t){return e.call(this,t,zce)}:zce;return this._pairs.map((function(e){return t(e[0])+"="+t(e[1])}),"").join("&")};const jce=Uce;function Gce(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Qce(e,t,n){if(!t)return e;const r=n&&n.encode||Gce,i=n&&n.serialize;let o;if(o=i?i(t,n):Tce.isURLSearchParams(t)?t.toString():new jce(t,n).toString(r),o){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+o}return e}const Hce=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Tce.forEach(this.handlers,(function(t){null!==t&&e(t)}))}},Vce={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Wce={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:jce,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},qce="undefined"!==typeof window&&"undefined"!==typeof document,Xce="object"===typeof navigator&&navigator||void 0,Yce=qce&&(!Xce||["ReactNative","NativeScript","NS"].indexOf(Xce.product)<0),Jce="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,Kce=qce&&window.location.href||"http://localhost",Zce={...a,...Wce};const $ce=function(e){function t(e,n,r,i){let o=e[i++];if("__proto__"===o)return!0;const a=Number.isFinite(+o),s=i>=e.length;if(o=!o&&Tce.isArray(r)?r.length:o,s)return Tce.hasOwnProp(r,o)?r[o]=[r[o],n]:r[o]=n,!a;r[o]&&Tce.isObject(r[o])||(r[o]=[]);return t(e,n,r[o],i)&&Tce.isArray(r[o])&&(r[o]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],t[o]=e[o];return t}(r[o])),!a}if(Tce.isFormData(e)&&Tce.isFunction(e.entries)){const n={};return Tce.forEachEntry(e,((e,r)=>{t(function(e){return Tce.matchAll(/\w+|\[(\w*)]/g,e).map((e=>"[]"===e[0]?"":e[1]||e[0]))}(e),r,n,0)})),n}return null};const eue={transitional:Vce,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=Tce.isObject(e);i&&Tce.isHTMLForm(e)&&(e=new FormData(e));if(Tce.isFormData(e))return r?JSON.stringify($ce(e)):e;if(Tce.isArrayBuffer(e)||Tce.isBuffer(e)||Tce.isStream(e)||Tce.isFile(e)||Tce.isBlob(e)||Tce.isReadableStream(e))return e;if(Tce.isArrayBufferView(e))return e.buffer;if(Tce.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let o;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Fce(e,new Zce.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,r){return Zce.isNode&&Tce.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((o=Tce.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Fce(o?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(Tce.isString(e))try{return(t||JSON.parse)(e),Tce.trim(e)}catch(NQ){if("SyntaxError"!==NQ.name)throw NQ}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||eue.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Tce.isResponse(e)||Tce.isReadableStream(e))return e;if(e&&Tce.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(NQ){if(n){if("SyntaxError"===NQ.name)throw Rce.from(NQ,Rce.ERR_BAD_RESPONSE,this,null,this.response);throw NQ}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zce.classes.FormData,Blob:Zce.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Tce.forEach(["delete","get","head","post","put","patch"],(e=>{eue.headers[e]={}}));const tue=eue,nue=Tce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),rue=Symbol("internals");function iue(e){return e&&String(e).trim().toLowerCase()}function oue(e){return!1===e||null==e?e:Tce.isArray(e)?e.map(oue):String(e)}function aue(e,t,n,r,i){return Tce.isFunction(r)?r.call(this,t,n):(i&&(t=n),Tce.isString(t)?Tce.isString(r)?-1!==t.indexOf(r):Tce.isRegExp(r)?r.test(t):void 0:void 0)}class sue{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=iue(t);if(!i)throw new Error("header name must be a non-empty string");const o=Tce.findKey(r,i);(!o||void 0===r[o]||!0===n||void 0===n&&!1!==r[o])&&(r[o||t]=oue(e))}const o=(e,t)=>Tce.forEach(e,((e,n)=>i(e,n,t)));if(Tce.isPlainObject(e)||e instanceof this.constructor)o(e,t);else if(Tce.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))o((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach((function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&nue[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)})),t})(e),t);else if(Tce.isHeaders(e))for(const[a,s]of e.entries())i(s,a,n);else null!=e&&i(t,e,n);return this}get(e,t){if(e=iue(e)){const n=Tce.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Tce.isFunction(t))return t.call(this,e,n);if(Tce.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=iue(e)){const n=Tce.findKey(this,e);return!(!n||void 0===this[n]||t&&!aue(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=iue(e)){const i=Tce.findKey(n,e);!i||t&&!aue(0,n[i],i,t)||(delete n[i],r=!0)}}return Tce.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!aue(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return Tce.forEach(this,((r,i)=>{const o=Tce.findKey(n,i);if(o)return t[o]=oue(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((e,t,n)=>t.toUpperCase()+n))}(i):String(i).trim();a!==i&&delete t[i],t[a]=oue(r),n[a]=!0})),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Tce.forEach(this,((n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Tce.isArray(n)?n.join(", "):n)})),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((e=>{let[t,n]=e;return t+": "+n})).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach((e=>t.set(e))),t}static accessor(e){const t=(this[rue]=this[rue]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=iue(e);t[r]||(!function(e,t){const n=Tce.toCamelCase(" "+t);["get","set","has"].forEach((r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})}))}(n,e),t[r]=!0)}return Tce.isArray(e)?e.forEach(r):r(e),this}}sue.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Tce.reduceDescriptors(sue.prototype,((e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}})),Tce.freezeMethods(sue);const lue=sue;function cue(e,t){const n=this||tue,r=t||n,i=lue.from(r.headers);let o=r.data;return Tce.forEach(e,(function(e){o=e.call(n,o,i.normalize(),t?t.status:void 0)})),i.normalize(),o}function uue(e){return!(!e||!e.__CANCEL__)}function hue(e,t,n){Rce.call(this,null==e?"canceled":e,Rce.ERR_CANCELED,t,n),this.name="CanceledError"}Tce.inherits(hue,Rce,{__CANCEL__:!0});const due=hue;function fue(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Rce("Request failed with status code "+n.status,[Rce.ERR_BAD_REQUEST,Rce.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const pue=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,o=0,a=0;return t=void 0!==t?t:1e3,function(s){const l=Date.now(),c=r[a];i||(i=l),n[o]=s,r[o]=l;let u=a,h=0;for(;u!==o;)h+=n[u++],u%=e;if(o=(o+1)%e,o===a&&(a=(a+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}};const mue=function(e,t){let n,r,i=0,o=1e3/t;const a=function(t){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=o,n=null,r&&(clearTimeout(r),r=null),e.apply(null,t)};return[function(){const e=Date.now(),t=e-i;for(var s=arguments.length,l=new Array(s),c=0;c<s;c++)l[c]=arguments[c];t>=o?a(l,e):(n=l,r||(r=setTimeout((()=>{r=null,a(n)}),o-t)))},()=>n&&a(n)]},gue=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=pue(50,250);return mue((n=>{const o=n.loaded,a=n.lengthComputable?n.total:void 0,s=o-r,l=i(s);r=o;e({loaded:o,total:a,progress:a?o/a:void 0,bytes:s,rate:l||void 0,estimated:l&&a&&o<=a?(a-o)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})}),n)},vue=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},yue=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Tce.asap((()=>e(...n)))},Aue=Zce.hasStandardBrowserEnv?function(){const e=Zce.navigator&&/(msie|trident)/i.test(Zce.navigator.userAgent),t=document.createElement("a");let n;function r(n){let r=n;return e&&(t.setAttribute("href",r),r=t.href),t.setAttribute("href",r),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:"/"===t.pathname.charAt(0)?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(e){const t=Tce.isString(e)?r(e):e;return t.protocol===n.protocol&&t.host===n.host}}():function(){return!0},xue=Zce.hasStandardBrowserEnv?{write(e,t,n,r,i,o){const a=[e+"="+encodeURIComponent(t)];Tce.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),Tce.isString(r)&&a.push("path="+r),Tce.isString(i)&&a.push("domain="+i),!0===o&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function bue(e,t){return e&&!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const _ue=e=>e instanceof lue?{...e}:e;function wue(e,t){t=t||{};const n={};function r(e,t,n){return Tce.isPlainObject(e)&&Tce.isPlainObject(t)?Tce.merge.call({caseless:n},e,t):Tce.isPlainObject(t)?Tce.merge({},t):Tce.isArray(t)?t.slice():t}function i(e,t,n){return Tce.isUndefined(t)?Tce.isUndefined(e)?void 0:r(void 0,e,n):r(e,t,n)}function o(e,t){if(!Tce.isUndefined(t))return r(void 0,t)}function a(e,t){return Tce.isUndefined(t)?Tce.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function s(n,i,o){return o in t?r(n,i):o in e?r(void 0,n):void 0}const l={url:o,method:o,data:o,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:s,headers:(e,t)=>i(_ue(e),_ue(t),!0)};return Tce.forEach(Object.keys(Object.assign({},e,t)),(function(r){const o=l[r]||i,a=o(e[r],t[r],r);Tce.isUndefined(a)&&o!==s||(n[r]=a)})),n}const Eue=e=>{const t=wue({},e);let n,{data:r,withXSRFToken:i,xsrfHeaderName:o,xsrfCookieName:a,headers:s,auth:l}=t;if(t.headers=s=lue.from(s),t.url=Qce(bue(t.baseURL,t.url),e.params,e.paramsSerializer),l&&s.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Tce.isFormData(r))if(Zce.hasStandardBrowserEnv||Zce.hasStandardBrowserWebWorkerEnv)s.setContentType(void 0);else if(!1!==(n=s.getContentType())){const[e,...t]=n?n.split(";").map((e=>e.trim())).filter(Boolean):[];s.setContentType([e||"multipart/form-data",...t].join("; "))}if(Zce.hasStandardBrowserEnv&&(i&&Tce.isFunction(i)&&(i=i(t)),i||!1!==i&&Aue(t.url))){const e=o&&a&&xue.read(a);e&&s.set(o,e)}return t},Sue="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise((function(t,n){const r=Eue(e);let i=r.data;const o=lue.from(r.headers).normalize();let a,s,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=lue.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());fue((function(e){t(e),p()}),(function(e){n(e),p()}),{data:h&&"text"!==h&&"json"!==h?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Rce("Request aborted",Rce.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Rce("Network Error",Rce.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||Vce;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Rce(t,i.clarifyTimeoutError?Rce.ETIMEDOUT:Rce.ECONNABORTED,e,m)),m=null},void 0===i&&o.setContentType(null),"setRequestHeader"in m&&Tce.forEach(o.toJSON(),(function(e,t){m.setRequestHeader(t,e)})),Tce.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),h&&"json"!==h&&(m.responseType=r.responseType),f&&([l,u]=gue(f,!0),m.addEventListener("progress",l)),d&&m.upload&&([s,c]=gue(d),m.upload.addEventListener("progress",s),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{m&&(n(!t||t.type?new due(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===Zce.protocols.indexOf(v)?n(new Rce("Unsupported protocol "+v+":",Rce.ERR_BAD_REQUEST,e)):m.send(i||null)}))},Cue=(e,t)=>{let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Rce?t:new due(t instanceof Error?t.message:t))}};let o=t&&setTimeout((()=>{i(new Rce(`timeout ${t} of ms exceeded`,Rce.ETIMEDOUT))}),t);const a=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach((e=>{e&&(e.removeEventListener?e.removeEventListener("abort",i):e.unsubscribe(i))})),e=null)};e.forEach((e=>e&&e.addEventListener&&e.addEventListener("abort",i)));const{signal:s}=r;return s.unsubscribe=a,[s,()=>{o&&clearTimeout(o),o=null}]},Mue=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},Tue=(e,t,n,r,i)=>{const o=async function*(e,t,n){for await(const r of e)yield*Mue(ArrayBuffer.isView(r)?r:await n(String(r)),t)}(e,t,i);let a,s=0,l=e=>{a||(a=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await o.next();if(t)return l(),void e.close();let i=r.byteLength;if(n){let e=s+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw l(t),t}},cancel:e=>(l(e),o.return())},{highWaterMark:2})},Iue="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,Bue=Iue&&"function"===typeof ReadableStream,Pue=Iue&&("function"===typeof TextEncoder?(Rue=new TextEncoder,e=>Rue.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var Rue;const Due=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(NQ){return!1}},Oue=Bue&&Due((()=>{let e=!1;const t=new Request(Zce.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t})),kue=Bue&&Due((()=>Tce.isReadableStream(new Response("").body))),Lue={stream:kue&&(e=>e.body)};var Fue;Iue&&(Fue=new Response,["text","arrayBuffer","blob","formData","stream"].forEach((e=>{!Lue[e]&&(Lue[e]=Tce.isFunction(Fue[e])?t=>t[e]():(t,n)=>{throw new Rce(`Response type '${e}' is not supported`,Rce.ERR_NOT_SUPPORT,n)})})));const zue=async(e,t)=>{const n=Tce.toFiniteNumber(e.getContentLength());return null==n?(async e=>null==e?0:Tce.isBlob(e)?e.size:Tce.isSpecCompliantForm(e)?(await new Request(e).arrayBuffer()).byteLength:Tce.isArrayBufferView(e)||Tce.isArrayBuffer(e)?e.byteLength:(Tce.isURLSearchParams(e)&&(e+=""),Tce.isString(e)?(await Pue(e)).byteLength:void 0))(t):n},Uue=Iue&&(async e=>{let{url:t,method:n,data:r,signal:i,cancelToken:o,timeout:a,onDownloadProgress:s,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:d}=Eue(e);c=c?(c+"").toLowerCase():"text";let f,p,[m,g]=i||o||a?Cue([i,o],a):[];const v=()=>{!f&&setTimeout((()=>{m&&m.unsubscribe()})),f=!0};let y;try{if(l&&Oue&&"get"!==n&&"head"!==n&&0!==(y=await zue(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Tce.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=vue(y,gue(yue(l)));r=Tue(n.body,65536,e,t,Pue)}}Tce.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;p=new Request(t,{...d,signal:m,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:i?h:void 0});let o=await fetch(p);const a=kue&&("stream"===c||"response"===c);if(kue&&(s||a)){const e={};["status","statusText","headers"].forEach((t=>{e[t]=o[t]}));const t=Tce.toFiniteNumber(o.headers.get("content-length")),[n,r]=s&&vue(t,gue(yue(s),!0))||[];o=new Response(Tue(o.body,65536,n,(()=>{r&&r(),a&&v()}),Pue),e)}c=c||"text";let f=await Lue[Tce.findKey(Lue,c)||"text"](o,e);return!a&&v(),g&&g(),await new Promise(((t,n)=>{fue(t,n,{data:f,headers:lue.from(o.headers),status:o.status,statusText:o.statusText,config:e,request:p})}))}catch(A){if(v(),A&&"TypeError"===A.name&&/fetch/i.test(A.message))throw Object.assign(new Rce("Network Error",Rce.ERR_NETWORK,e,p),{cause:A.cause||A});throw Rce.from(A,A&&A.code,e,p)}}),Nue={http:null,xhr:Sue,fetch:Uue};Tce.forEach(Nue,((e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(NQ){}Object.defineProperty(e,"adapterName",{value:t})}}));const jue=e=>`- ${e}`,Gue=e=>Tce.isFunction(e)||null===e||!1===e,Que=e=>{e=Tce.isArray(e)?e:[e];const{length:t}=e;let n,r;const i={};for(let o=0;o<t;o++){let t;if(n=e[o],r=n,!Gue(n)&&(r=Nue[(t=String(n)).toLowerCase()],void 0===r))throw new Rce(`Unknown adapter '${t}'`);if(r)break;i[t||"#"+o]=r}if(!r){const e=Object.entries(i).map((e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")}));let n=t?e.length>1?"since :\n"+e.map(jue).join("\n"):" "+jue(e[0]):"as no adapter specified";throw new Rce("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function Hue(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new due(null,e)}function Vue(e){Hue(e),e.headers=lue.from(e.headers),e.data=cue.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return Que(e.adapter||tue.adapter)(e).then((function(t){return Hue(e),t.data=cue.call(e,e.transformResponse,t),t.headers=lue.from(t.headers),t}),(function(t){return uue(t)||(Hue(e),t&&t.response&&(t.response.data=cue.call(e,e.transformResponse,t.response),t.response.headers=lue.from(t.response.headers))),Promise.reject(t)}))}const Wue="1.7.5",que={};["object","boolean","number","function","string","symbol"].forEach(((e,t)=>{que[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}}));const Xue={};que.transitional=function(e,t,n){function r(e,t){return"[Axios v1.7.5] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,o)=>{if(!1===e)throw new Rce(r(i," has been removed"+(t?" in "+t:"")),Rce.ERR_DEPRECATED);return t&&!Xue[i]&&(Xue[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,o)}};const Yue={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Rce("options must be an object",Rce.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const o=r[i],a=t[o];if(a){const t=e[o],n=void 0===t||a(t,o,e);if(!0!==n)throw new Rce("option "+o+" must be "+n,Rce.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new Rce("Unknown option "+o,Rce.ERR_BAD_OPTION)}},validators:que},Jue=Yue.validators;class Kue{constructor(e){this.defaults=e,this.interceptors={request:new Hce,response:new Hce}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e;Error.captureStackTrace?Error.captureStackTrace(e={}):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(NQ){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=wue(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&Yue.assertOptions(n,{silentJSONParsing:Jue.transitional(Jue.boolean),forcedJSONParsing:Jue.transitional(Jue.boolean),clarifyTimeoutError:Jue.transitional(Jue.boolean)},!1),null!=r&&(Tce.isFunction(r)?t.paramsSerializer={serialize:r}:Yue.assertOptions(r,{encode:Jue.function,serialize:Jue.function},!0)),t.method=(t.method||this.defaults.method||"get").toLowerCase();let o=i&&Tce.merge(i.common,i[t.method]);i&&Tce.forEach(["delete","get","head","post","put","patch","common"],(e=>{delete i[e]})),t.headers=lue.concat(o,i);const a=[];let s=!0;this.interceptors.request.forEach((function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(s=s&&e.synchronous,a.unshift(e.fulfilled,e.rejected))}));const l=[];let c;this.interceptors.response.forEach((function(e){l.push(e.fulfilled,e.rejected)}));let u,h=0;if(!s){const e=[Vue.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=a.length;let d=t;for(h=0;h<u;){const e=a[h++],t=a[h++];try{d=e(d)}catch(Wy){t.call(this,Wy);break}}try{c=Vue.call(this,d)}catch(Wy){return Promise.reject(Wy)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return Qce(bue((e=wue(this.defaults,e)).baseURL,e.url),e.params,e.paramsSerializer)}}Tce.forEach(["delete","get","head","options"],(function(e){Kue.prototype[e]=function(t,n){return this.request(wue(n||{},{method:e,url:t,data:(n||{}).data}))}})),Tce.forEach(["post","put","patch"],(function(e){function t(t){return function(n,r,i){return this.request(wue(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Kue.prototype[e]=t(),Kue.prototype[e+"Form"]=t(!0)}));const Zue=Kue;class $ue{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise((function(e){t=e}));const n=this;this.promise.then((e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null})),this.promise.then=e=>{let t;const r=new Promise((e=>{n.subscribe(e),t=e})).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e((function(e,r,i){n.reason||(n.reason=new due(e,r,i),t(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}static source(){let e;const t=new $ue((function(t){e=t}));return{token:t,cancel:e}}}const ehe=$ue;const the={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(the).forEach((e=>{let[t,n]=e;the[n]=t}));const nhe=the;const rhe=function e(t){const n=new Zue(t),r=Gle(Zue.prototype.request,n);return Tce.extend(r,Zue.prototype,n,{allOwnKeys:!0}),Tce.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(wue(t,n))},r}(tue);rhe.Axios=Zue,rhe.CanceledError=due,rhe.CancelToken=ehe,rhe.isCancel=uue,rhe.VERSION=Wue,rhe.toFormData=Fce,rhe.AxiosError=Rce,rhe.Cancel=rhe.CanceledError,rhe.all=function(e){return Promise.all(e)},rhe.spread=function(e){return function(t){return e.apply(null,t)}},rhe.isAxiosError=function(e){return Tce.isObject(e)&&!0===e.isAxiosError},rhe.mergeConfig=wue,rhe.AxiosHeaders=lue,rhe.formToJSON=e=>$ce(Tce.isHTMLForm(e)?new FormData(e):e),rhe.getAdapter=Que,rhe.HttpStatusCode=nhe,rhe.default=rhe;const ihe=rhe,ohe=()=>{const[e,t]=(0,l.useState)(""),[n,r]=(0,l.useState)(""),[i,o]=(0,l.useState)(""),[a,s]=(0,l.useState)(""),[c,u]=(0,l.useState)(null),[h,d]=(0,l.useState)(""),[f,p]=(0,l.useState)(!1);return(0,ov.jsxs)("div",{children:[(0,ov.jsxs)("form",{className:"check-emails-form",onSubmit:async t=>{if(t.preventDefault(),!a)return void d("Email body is required.");d(""),p(!0);const r={name_of_the_sender:e,sender_email_address:n,message_subject:i,body:a};ihe.post("https://scamguard.live/api/predict/email/",r).then((e=>{u(e.data),p(!1),console.log("Predict Data:",e.data)})).catch((e=>{p(!1),console.error("Error during the prediction:",e),alert("An error occurred while checking the email. Please try again.")}))},children:[(0,ov.jsxs)("div",{className:"check-emails-form-group",children:[(0,ov.jsx)("label",{children:"Enter Sender Name (optional)"}),(0,ov.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"Click and type the Sender's name here...",className:"input-field"})]}),(0,ov.jsxs)("div",{className:"check-emails-form-group",children:[(0,ov.jsx)("label",{children:"Enter Sender Email Address (optional)"}),(0,ov.jsx)("input",{type:"email",value:n,onChange:e=>r(e.target.value),placeholder:"Click and type the Sender's email address here...",className:"input-field"})]}),(0,ov.jsxs)("div",{className:"check-emails-form-group",children:[(0,ov.jsx)("label",{children:"Enter Email Subject (optional)"}),(0,ov.jsx)("input",{type:"text",value:i,onChange:e=>o(e.target.value),placeholder:"Click and type the email's subject here...",className:"input-field"})]}),(0,ov.jsxs)("div",{className:"check-emails-form-group",children:[(0,ov.jsx)("label",{children:"Enter Email Body (required)"}),(0,ov.jsx)("textarea",{value:a,onChange:e=>s(e.target.value),placeholder:"Click and type the email's body here...",className:"textarea-field"})]}),h&&(0,ov.jsx)("p",{className:"check-scam-error-message",children:h}),(0,ov.jsx)("button",{className:"submit-button",type:"submit",children:"Check If Scam"})]}),f&&(0,ov.jsx)("div",{className:"check-scam-loading",children:"Loading ..."}),!f&&(()=>{if(!c)return null;const e=(100*c.probability).toFixed(2);return 1===c.prediction?(0,ov.jsx)("div",{className:"result-section",children:(0,ov.jsxs)("p",{children:["This email has a ",(0,ov.jsxs)("strong",{children:[e,"%"]})," chance of being a ",(0,ov.jsx)("strong",{style:{color:"red"},children:"SCAM."})]})}):(0,ov.jsx)("div",{className:"result-section",children:(0,ov.jsxs)("p",{children:["This email has a ",(0,ov.jsxs)("strong",{children:[e,"%"]})," chance of being ",(0,ov.jsx)("strong",{style:{color:"green"},children:"LEGITIMATE"}),"."]})})})()]})},ahe=()=>{const[e,t]=(0,l.useState)(""),[n,r]=(0,l.useState)(null),[i,o]=(0,l.useState)(""),[a,s]=(0,l.useState)(!1);return(0,ov.jsxs)("div",{children:[(0,ov.jsxs)("form",{className:"check-emails-form",onSubmit:async t=>{if(t.preventDefault(),!e)return void o("Message body is required.");o(""),s(!0);const n={body:e};ihe.post("https://scamguard.live/api/predict/message/",n).then((e=>{r(e.data),s(!1),console.log("Predict Data:",e.data)})).catch((e=>{s(!1),console.error("Error during the prediction:",e),alert("An error occurred while checking the Message. Please try again.")}))},children:[(0,ov.jsxs)("div",{className:"check-emails-form-group",children:[(0,ov.jsx)("label",{children:"Enter Message Body (required)"}),(0,ov.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Click and type the message's body here...",className:"textarea-field"})]}),i&&(0,ov.jsx)("p",{className:"check-scam-error-message",children:i}),(0,ov.jsx)("button",{className:"submit-button",type:"submit",children:"Check If Scam"})]}),a&&(0,ov.jsx)("div",{className:"check-scam-loading",children:"Loading ..."}),!a&&(()=>{if(!n)return null;const e=(100*n.probability).toFixed(2);return 1===n.prediction?(0,ov.jsx)("div",{className:"result-section",children:(0,ov.jsxs)("p",{children:["This message has a ",(0,ov.jsxs)("strong",{children:[e,"%"]})," chance of being a ",(0,ov.jsx)("strong",{style:{color:"red"},children:"SCAM."})]})}):(0,ov.jsx)("div",{className:"result-section",children:(0,ov.jsxs)("p",{children:["This message has a ",(0,ov.jsxs)("strong",{children:[e,"%"]})," chance of being ",(0,ov.jsx)("strong",{style:{color:"green"},children:"LEGITIMATE"}),"."]})})})()]})},she=()=>{const[e,t]=(0,l.useState)(""),[n,r]=(0,l.useState)(null),[i,o]=(0,l.useState)(""),[a,s]=(0,l.useState)(!1);return(0,ov.jsxs)("div",{children:[(0,ov.jsxs)("form",{className:"check-emails-form",onSubmit:async t=>{if(t.preventDefault(),!e)return void o("URL is required.");let n=e.trim();n.startsWith("http://")||n.startsWith("https://")||(n="https://"+n),o(""),s(!0);const i={url:e};ihe.post("https://scamguard.live/api/predict/url/",i).then((e=>{r(e.data),s(!1),console.log("Predict Data:",e.data)})).catch((e=>{s(!1),console.error("Error during the prediction:",e),alert("An error occurred while checking the URL. Please try again.")}))},children:[(0,ov.jsxs)("div",{className:"check-emails-form-group",children:[(0,ov.jsx)("label",{children:"Enter URL with 'https://' or 'http://' header (required)"}),(0,ov.jsx)("textarea",{value:e,onChange:e=>t(e.target.value),placeholder:"Click and type the url body here...",className:"textarea-field"})]}),i&&(0,ov.jsx)("p",{className:"check-scam-error-message",children:i}),(0,ov.jsx)("button",{className:"submit-button",type:"submit",children:"Check If Scam"})]}),a&&(0,ov.jsx)("div",{className:"check-scam-loading",children:"Loading ..."}),!a&&(()=>{if(!n)return null;const e=(100*n.probability).toFixed(2);return 1===n.prediction?(0,ov.jsx)("div",{className:"result-section",children:(0,ov.jsxs)("p",{children:["This url has a ",(0,ov.jsxs)("strong",{children:[e,"%"]})," chance of being a ",(0,ov.jsx)("strong",{style:{color:"red"},children:"SCAM."})]})}):(0,ov.jsx)("div",{className:"result-section",children:(0,ov.jsxs)("p",{children:["This url has a ",(0,ov.jsxs)("strong",{children:[e,"%"]})," chance of being ",(0,ov.jsx)("strong",{style:{color:"green"},children:"LEGITIMATE"}),"."]})})})()]})},lhe=()=>{const[e,t]=(0,l.useState)("email");return(0,ov.jsxs)("div",{className:"CheckScamsPage",children:[(0,ov.jsxs)("header",{className:"check-scam-header",children:[(0,ov.jsx)("h1",{children:"Check if the message are Scams"}),(0,ov.jsx)("p",{children:"Use well trained model to detect if those messages you received are scams or not"})]}),(0,ov.jsx)("main",{children:(0,ov.jsxs)("div",{className:"scam-checker",children:[(0,ov.jsxs)("div",{className:"scam-checker-selection",children:[(0,ov.jsx)("h3",{children:"Select the text type you want to check in below"}),(0,ov.jsxs)("div",{className:"scam-checker-segmented-control",children:[(0,ov.jsx)("button",{className:"email"===e?"segment-btn selected":"segment-btn",onClick:()=>t("email"),children:"Email"}),(0,ov.jsx)("button",{className:"message"===e?"segment-btn selected":"segment-btn",onClick:()=>t("message"),children:"Message"}),(0,ov.jsx)("button",{className:"url"===e?"segment-btn selected":"segment-btn",onClick:()=>t("url"),children:"URL"})]})]}),(0,ov.jsxs)("div",{className:"scam-checker-component",children:["email"===e&&(0,ov.jsx)(ohe,{}),"message"===e&&(0,ov.jsx)(ahe,{}),"url"===e&&(0,ov.jsx)(she,{})]})]})})]})};function che(e){return che="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},che(e)}function uhe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hhe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uhe(Object(n),!0).forEach((function(t){dhe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uhe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function dhe(e,t,n){return t=function(e){var t=function(e,t){if("object"!=che(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=che(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==che(t)?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fhe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,o,a,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,i=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return s}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return phe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return phe(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function phe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mhe=(0,l.forwardRef)((function(e,t){var n=e.aspect,r=e.initialDimension,i=void 0===r?{width:-1,height:-1}:r,o=e.width,a=void 0===o?"100%":o,s=e.height,c=void 0===s?"100%":s,u=e.minWidth,h=void 0===u?0:u,d=e.minHeight,f=e.maxHeight,p=e.children,m=e.debounce,g=void 0===m?0:m,v=e.id,y=e.className,A=e.onResize,x=e.style,b=void 0===x?{}:x,_=(0,l.useRef)(null),w=(0,l.useRef)();w.current=A,(0,l.useImperativeHandle)(t,(function(){return Object.defineProperty(_.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),_.current},configurable:!0})}));var E=fhe((0,l.useState)({containerWidth:i.width,containerHeight:i.height}),2),S=E[0],C=E[1],M=(0,l.useCallback)((function(e,t){C((function(n){var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}}))}),[]);(0,l.useEffect)((function(){var e=function(e){var t,n=e[0].contentRect,r=n.width,i=n.height;M(r,i),null===(t=w.current)||void 0===t||t.call(w,r,i)};g>0&&(e=N$()(e,g,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),n=_.current.getBoundingClientRect(),r=n.width,i=n.height;return M(r,i),t.observe(_.current),function(){t.disconnect()}}),[M,g]);var T=(0,l.useMemo)((function(){var e=S.containerWidth,t=S.containerHeight;if(e<0||t<0)return null;D1(n0(a)||n0(c),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",a,c),D1(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=n0(a)?e:a,i=n0(c)?t:c;n&&n>0&&(r?i=r/n:i&&(r=i*n),f&&i>f&&(i=f)),D1(r>0||i>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,i,a,c,h,d,n);var o=!Array.isArray(p)&&(0,J$.isElement)(p)&&w0(p.type).endsWith("Chart");return l.Children.map(p,(function(e){return(0,J$.isElement)(e)?(0,l.cloneElement)(e,hhe({width:r,height:i},o?{style:hhe({height:"100%",width:"100%",maxHeight:i,maxWidth:r},e.props.style)}:{})):e}))}),[n,p,c,f,d,h,S,a]);return l.createElement("div",{id:v?"".concat(v):void 0,className:G$("recharts-responsive-container",y),style:hhe(hhe({},b),{},{width:a,height:c,minWidth:h,minHeight:d,maxHeight:f}),ref:_},T)}));const ghe=e=>{let{active:t,payload:n}=e;return t&&n&&n.length?(0,ov.jsxs)("div",{className:"custom-tooltip",children:[(0,ov.jsx)("p",{className:"label",children:`Scam Type: ${n[0].payload["Scam Type"]}`}),(0,ov.jsx)("p",{children:`Exposure Risk: ${n[0].payload["Exposure Risk"]}x`})]}):null},vhe=e=>{let{active:t,payload:n}=e;return t&&n&&n.length?(0,ov.jsxs)("div",{className:"custom-tooltip",children:[(0,ov.jsx)("p",{className:"label",children:`Scam Type: ${n[0].payload["Scam Type"]}`}),(0,ov.jsx)("p",{children:`Average Loss for Seniors: $${n[0].payload["Average Loss for Seniors"].toLocaleString()}`})]}):null},yhe=e=>{let{data:t}=e;const n=(e=>e.map((e=>({...e,"Average Loss for Seniors":parseFloat(e["Average Loss for Seniors"].replace(/[$,]/g,""))}))))(t);return(0,ov.jsxs)("div",{className:"risk-assessment-chart-container",children:[(0,ov.jsx)("div",{className:"risk-assessment-chart-wrapper",children:(0,ov.jsx)(mhe,{width:"100%",height:400,children:(0,ov.jsxs)(gle,{data:n,children:[(0,ov.jsx)(Ole,{strokeDasharray:"3 3"}),(0,ov.jsx)(fle,{dataKey:"Scam Type",label:{value:"Scam Type",position:"insideBottom",offset:-10,style:{textAnchor:"middle",fontSize:18,fontWeight:"bold"}}}),(0,ov.jsx)(mle,{label:{value:"Exposure Risk",angle:-90,position:"insideLeft",offset:1,style:{textAnchor:"middle",fontSize:18,fontWeight:"bold"}}}),(0,ov.jsx)(R1,{content:(0,ov.jsx)(ghe,{})}),(0,ov.jsx)(X2,{wrapperStyle:{display:"flex",justifyContent:"center",paddingTop:"25px"}}),(0,ov.jsx)(aoe,{dataKey:"Exposure Risk",fill:"#8884d8",radius:[30,30,30,30]})]})})}),(0,ov.jsx)("div",{className:"risk-assessment-chart-wrapper",children:(0,ov.jsx)(mhe,{width:"100%",height:400,children:(0,ov.jsxs)(gle,{data:n,children:[(0,ov.jsx)(Ole,{strokeDasharray:"3 3"}),(0,ov.jsx)(fle,{dataKey:"Scam Type",label:{value:"Scam Type",position:"insideBottom",offset:-10,style:{textAnchor:"middle",fontSize:18,fontWeight:"bold"}}}),(0,ov.jsx)(mle,{label:{value:"Average Loss ($AUD)",angle:-90,position:"insideLeft",offset:1,style:{textAnchor:"middle",fontSize:18,fontWeight:"bold"}}}),(0,ov.jsx)(R1,{content:(0,ov.jsx)(vhe,{})}),(0,ov.jsx)(X2,{wrapperStyle:{display:"flex",justifyContent:"center",paddingTop:"25px"}}),(0,ov.jsx)(aoe,{dataKey:"Average Loss for Seniors",fill:"#82ca9d",radius:[30,30,30,30]})]})})})]})},Ahe=e=>{let{active:t,payload:n}=e;return t&&n&&n.length?(0,ov.jsxs)("div",{className:"custom-tooltip",children:[(0,ov.jsx)("p",{className:"label",children:`Scam Type: ${n[0].payload["Scam Type"]}`}),(0,ov.jsx)("p",{children:`Exposure Risk: ${n[0].payload.exposure_risk}x`})]}):null},xhe=e=>{let{active:t,payload:n}=e;return t&&n&&n.length?(0,ov.jsxs)("div",{className:"custom-tooltip",children:[(0,ov.jsx)("p",{className:"label",children:`Scam Type: ${n[0].payload["Scam Type"]}`}),(0,ov.jsx)("p",{children:`Average Loss for Seniors: $${n[0].payload["Average Loss for Seniors"].toLocaleString()}`})]}):null},bhe=e=>{let{data:t}=e;const n=(e=>e.map((e=>({...e,"Average Loss for Seniors":parseFloat(e["Average Loss for Seniors"].replace(/[$,]/g,""))}))))(t);return(0,ov.jsxs)("div",{className:"risk-assessment-chart-container",children:[(0,ov.jsx)("div",{className:"risk-assessment-chart-wrapper",children:(0,ov.jsx)(mhe,{width:"100%",height:400,children:(0,ov.jsxs)(gle,{data:n,children:[(0,ov.jsx)(Ole,{strokeDasharray:"3 3"}),(0,ov.jsx)(fle,{dataKey:"Scam Type",label:{value:"Scam Type",position:"insideBottom",offset:-10,style:{textAnchor:"middle",fontSize:18,fontWeight:"bold"}}}),(0,ov.jsx)(mle,{label:{value:"Exposure Risk",angle:-90,position:"insideLeft",offset:1,style:{textAnchor:"middle",fontSize:18,fontWeight:"bold"}}}),(0,ov.jsx)(R1,{content:(0,ov.jsx)(Ahe,{})}),(0,ov.jsx)(X2,{formatter:e=>"Exposure Risk",wrapperStyle:{display:"flex",justifyContent:"center",paddingTop:"25px"}}),(0,ov.jsx)(aoe,{dataKey:"exposure_risk",fill:"#8884d8",radius:[30,30,30,30]})]})})}),(0,ov.jsx)("div",{className:"risk-assessment-chart-wrapper",children:(0,ov.jsx)(mhe,{width:"100%",height:400,children:(0,ov.jsxs)(gle,{data:n,children:[(0,ov.jsx)(Ole,{strokeDasharray:"3 3"}),(0,ov.jsx)(fle,{dataKey:"Scam Type",label:{value:"Scam Type",position:"insideBottom",offset:-10,style:{textAnchor:"middle",fontSize:18,fontWeight:"bold"}}}),(0,ov.jsx)(mle,{label:{value:"Average Loss ($AUD)",angle:-90,position:"insideLeft",offset:1,style:{textAnchor:"middle",fontSize:18,fontWeight:"bold"}}}),(0,ov.jsx)(R1,{content:(0,ov.jsx)(xhe,{})}),(0,ov.jsx)(X2,{wrapperStyle:{display:"flex",justifyContent:"center",paddingTop:"25px"}}),(0,ov.jsx)(aoe,{dataKey:"Average Loss for Seniors",fill:"#82ca9d",radius:[30,30,30,30]})]})})})]})},_he=()=>{const[e,t]=(0,l.useState)(""),[n,r]=(0,l.useState)([]),[i,o]=(0,l.useState)(!1),[a,s]=(0,l.useState)(!1),[c,u]=(0,l.useState)(""),[h,d]=(0,l.useState)(""),[f,p]=(0,l.useState)([]),[m,g]=(0,l.useState)(!1),[v,y]=(0,l.useState)(!1),[A,x]=(0,l.useState)(""),[b,_]=(0,l.useState)("");return(0,ov.jsxs)("div",{className:"ScamRiskPage",children:[(0,ov.jsxs)("header",{className:"scam-risk-header",children:[(0,ov.jsx)("h1",{children:"Scams Risk Assessment"}),(0,ov.jsx)("p",{children:"Informing you of the most possible scams you will meet"})]}),(0,ov.jsxs)("main",{className:"main-session-assessment",children:[(0,ov.jsxs)("section",{className:"scam-risk-analysis-form",children:[(0,ov.jsx)("h2",{children:"Contact Method Risk"}),(0,ov.jsxs)("form",{onSubmit:t=>{if(t.preventDefault(),!e)return void x("Please select a contact method.");x(""),o(!0),s(!0);const n={contact_method:e};ihe.post("https://scamguard.live/api/contact_method_risk/",n).then((e=>{r(e.data),console.log("Contact Method Data:",e.data),s(!1)})).catch((e=>{console.error("Error fetching Contact Method Risk:",e),s(!1)}))},className:"contact-risk-form",children:[(0,ov.jsxs)("div",{className:"scam-risk-form-group",children:[(0,ov.jsx)("label",{children:"Contact Methods"}),(0,ov.jsxs)("select",{onChange:e=>t(e.target.value),value:e,children:[(0,ov.jsx)("option",{value:"",disabled:!0,children:"Select ..."}),["Email","Phone call","Text message"].map(((e,t)=>(0,ov.jsx)("option",{value:e,children:e},t)))]})]}),(0,ov.jsx)("div",{className:"scam-risk-error-message",children:A}),(0,ov.jsx)("button",{type:"submit",className:"scam-risk-submit-btn",children:"Submit Contact Method Risk"})]}),a&&(0,ov.jsx)("div",{className:"scam-risk-loading",children:"Loading contact method data..."}),i&&!a&&Array.isArray(n)&&(n.length>0?(0,ov.jsxs)("section",{className:"scam-chart",children:[(0,ov.jsx)("h3",{children:"Contact Method Risk Analysis Results"}),(0,ov.jsx)(yhe,{data:n}),(0,ov.jsx)("div",{className:"scam-risk-description",children:n.map(((e,t)=>(0,ov.jsxs)("div",{className:"scam-risk-card",children:[(0,ov.jsxs)("p",{children:["Your risk of being exposed to ",(0,ov.jsx)("strong",{children:e["Scam Type"]})," scams is ",(0,ov.jsxs)("strong",{children:[e["Exposure Risk"]," times higher"]})," than the national average when using ",(0,ov.jsx)("strong",{children:e["Online Activity"]}),"."]}),(0,ov.jsxs)("p",{children:["The average loss for seniors is expected to be ",(0,ov.jsx)("strong",{children:e["Average Loss for Seniors"]}),"."]}),(0,ov.jsxs)("button",{onClick:()=>window.open(e.link,"_blank","noopener noreferrer"),children:["Learn more about ",(0,ov.jsxs)("strong",{children:[e["Scam Type"]," scam"]})]})]},t)))})]}):(0,ov.jsx)("div",{className:"no-data-message",children:(0,ov.jsx)("p",{children:"No higher scam exposure risks were identified for selected contact method."})}))]}),(0,ov.jsxs)("section",{className:"scam-risk-analysis-form",children:[(0,ov.jsx)("h2",{children:"Demographic Risk for Age 65 and over"}),(0,ov.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),!c||!h)return void _("Please fill in all demographic fields.");_(""),g(!0),y(!0);const t={gender:c,location:h,age_group:"65 and over"};console.log("Data:",t),ihe.post("https://scamguard.live/api/demographic_risk/",t).then((e=>{console.log("Demographic Data:",e.data),p(e.data),y(!1)})).catch((e=>{console.error("Error fetching Demographic Risk:",e),y(!1)}))},className:"demographic-risk-form",children:[(0,ov.jsxs)("div",{className:"scam-risk-form-group",children:[(0,ov.jsx)("label",{children:"Location"}),(0,ov.jsxs)("select",{onChange:e=>d(e.target.value),value:h,children:[(0,ov.jsx)("option",{value:"",disabled:!0,children:"Select ..."}),["Australian Capital Territory","New South Wales","Northern Territory","Queensland","South Australia","Tasmania","Victoria","Western Australia"].map(((e,t)=>(0,ov.jsx)("option",{value:e,children:e},t)))]})]}),(0,ov.jsxs)("div",{className:"scam-risk-form-group",children:[(0,ov.jsx)("label",{children:"Gender"}),(0,ov.jsxs)("select",{onChange:e=>u(e.target.value),value:c,children:[(0,ov.jsx)("option",{value:"",disabled:!0,children:"Select ..."}),["Female","Male"].map(((e,t)=>(0,ov.jsx)("option",{value:e,children:e},t)))]})]}),(0,ov.jsx)("div",{className:"scam-risk-error-message",children:b}),(0,ov.jsx)("button",{type:"submit",className:"scam-risk-submit-btn",children:"Submit Demographic Risk"})]}),v&&(0,ov.jsx)("div",{className:"scam-risk-loading",children:"Loading demographic data..."}),m&&!v&&Array.isArray(f)&&(f.length>0?(0,ov.jsxs)("section",{className:"scam-chart",children:[(0,ov.jsx)("h3",{children:"Demographic Risk Analysis Results"}),(0,ov.jsx)(bhe,{data:f}),(0,ov.jsx)("div",{className:"scam-risk-description",children:f.map(((e,t)=>(0,ov.jsxs)("div",{className:"scam-risk-card",children:[(0,ov.jsxs)("p",{children:["According to your demographic profile, your risk of encountering ",(0,ov.jsx)("strong",{children:e["Scam Type"]})," is ",(0,ov.jsxs)("strong",{children:[e.exposure_risk," times higher"]})," than the national average."]}),(0,ov.jsxs)("p",{children:["For individuals in your demographic group, the average financial loss for seniors is estimated to be ",(0,ov.jsx)("strong",{children:e["Average Loss for Seniors"]}),"."]}),(0,ov.jsxs)("button",{onClick:()=>window.open(e.link,"_blank","noopener noreferrer"),children:["Learn more about ",(0,ov.jsxs)("strong",{children:[e["Scam Type"]," scam"]})]})]},t)))})]}):(0,ov.jsx)("div",{className:"no-data-message",children:(0,ov.jsx)("p",{children:"No higher scam exposure risks were identified for selected demographic criteria."})}))]})]}),(0,ov.jsxs)("p",{children:["Data obtained from ",(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:"Scamwatch"})," \xa9 ",(0,ov.jsx)("a",{href:"https://au.creativecommons.net/",target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:"Commonwealth of Australia"})]})]})},whe=()=>{const e=ae();return(0,ov.jsxs)("div",{className:"QuizPage",children:[(0,ov.jsxs)("header",{className:"quiz-header",children:[(0,ov.jsx)("h1",{children:"Quiz Page"}),(0,ov.jsx)("p",{children:"Test your knowledge against scams"})]}),(0,ov.jsxs)("main",{children:[(0,ov.jsx)("h2",{children:"Click on belows cards to start testing your scam identified knowledge"}),(0,ov.jsxs)("div",{className:"quiz-cards",children:[(0,ov.jsxs)("div",{className:"quiz-card",onClick:()=>e("/text-scams-quiz"),children:[(0,ov.jsx)("img",{src:n(8862),alt:"Text Scams Icon",className:"quiz-icon"}),(0,ov.jsxs)("div",{className:"quiz-text-btn",children:[(0,ov.jsx)("h2",{children:"Text Scams"}),(0,ov.jsx)("button",{className:"quiz-button",children:"Get started for text scams quiz!"})]})]}),(0,ov.jsxs)("div",{className:"quiz-card",onClick:()=>e("/email-scams-quiz"),children:[(0,ov.jsx)("img",{src:n(1101),alt:"Email Scams Icon",className:"quiz-icon"}),(0,ov.jsxs)("div",{className:"quiz-text-btn",children:[(0,ov.jsx)("h2",{children:"Email Scams"}),(0,ov.jsx)("button",{className:"quiz-button",children:"Get started for email scams quiz!"})]})]})]}),(0,ov.jsx)("div",{className:"quiz-page-img",children:(0,ov.jsx)("img",{src:"/images/reallife_scenario/Seniors Using Social Media.png",alt:"quiz page img"})})]})]})},Ehe=()=>(0,ov.jsxs)("nav",{children:[(0,ov.jsx)("img",{src:"/favicon.ico",alt:"Logo",className:"nav-icon"}),(0,ov.jsx)("p",{className:"nav-text",children:"ScamGuard"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)(Oe,{exact:!0,to:"/",activeClassName:"active-link",children:"Home"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)(Oe,{to:"/currentScam",activeClassName:"active-link",children:"Current Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)(Oe,{to:"/identifyScam",activeClassName:"active-link",children:"How to Identify Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)(Oe,{to:"/reportScam",activeClassName:"active-link",children:"Report Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)(Oe,{to:"/whatToDo",activeClassName:"active-link",children:"What To Do If Scammed"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)(Oe,{to:"/checkScam",activeClassName:"active-link",children:"Scam Detector"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)(Oe,{to:"/riskAssessment",activeClassName:"active-link",children:"Scam Risk Assessment"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)(Oe,{to:"/quiz",activeClassName:"active-link",children:"Take Quiz"})})]})]});const She=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Scams-Page",children:[(0,ov.jsxs)("header",{className:"scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Phone Scams"}),(0,ov.jsx)("p",{children:"Phone scams aim to deceive individuals into giving away personal information, money, or access to financial accounts. These scams often involve impersonating legitimate organisations, such as banks, government agencies, or tech support, to create a sense of urgency or fear. Common tactics include threatening legal action, claiming a problem with a service (like your internet or taxes), or offering fake prizes or deals. The goal is to trick the victim into making payments, sharing sensitive information, or allowing access to their devices or accounts."})]}),(0,ov.jsxs)("section",{className:"scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify a Phone Scam"}),(0,ov.jsxs)("p",{children:["It is likely that a phone call is a scam if it:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Is unexpected"}),(0,ov.jsx)("li",{children:"Comes from an unknown number"}),(0,ov.jsx)("li",{children:"Encourages you to take immediate action"}),(0,ov.jsx)("li",{children:"Asks for personal or financial information"}),(0,ov.jsx)("li",{children:"Has poor quality"})]})]}),(0,ov.jsxs)("p",{children:["Examples of scam phone calls include:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Claiming your account has been hacked"}),(0,ov.jsx)("li",{children:"Threatening you with arrest"}),(0,ov.jsx)("li",{children:"Asking to install software or access your computer to resolve an issue"}),(0,ov.jsx)("li",{children:"Claiming you must pay for your service to continue"})]})]}),(0,ov.jsx)("h4",{children:"Examples"}),(0,ov.jsx)("h5",{children:"nbn Disconection Scam"}),(0,ov.jsx)("p",{children:"You receive a call from someone claiming to be from nbn and threatening to disconnect your internet service in the next 48 hours. They aim to get you to reveal your personal details and account information, potentially your credit card or bank account details, by presenting this as required to get your service reconnected. "}),(0,ov.jsxs)("p",{children:["Signs this is a scam",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Unexpected contact"}),(0,ov.jsx)("li",{children:"Asking for personal and financial information"}),(0,ov.jsx)("li",{children:"Threatening you to take immediate action"})]})]})]}),(0,ov.jsxs)("section",{className:"protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsx)("p",{children:(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Let calls from unknown numbers go to voicemail"}),(0,ov.jsx)("li",{children:"Hang up if you don\u2019t recognise the caller or you\u2019re not sure who they are"}),(0,ov.jsx)("li",{children:"Hang up if the caller gets aggressive or threatening"}),(0,ov.jsx)("li",{children:"Call the organisation or person back on a number you have found yourself"}),(0,ov.jsx)("li",{children:"Never share personal information or financial details over the phone"}),(0,ov.jsx)("li",{children:"Never allow a caller to have remote access to your computer"})]})})]}),(0,ov.jsxs)("section",{className:"real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"Warning over 'dial 1' phone scam in Australia"})," ",(0,ov.jsx)("img",{src:"/images/Phonescamrealstory.jpg",alt:"Phone scam real story",className:"example-image"}),(0,ov.jsx)("p",{children:'A phone scam circulating in Australia involves automated calls that instruct recipients to "dial 1" to address a purported issue, such as the threat of arrest, NBN disconnection, or unpaid debts. Scamwatch has warned the public to hang up immediately, as these claims are false and designed to scare people into action. Individuals are encouraged to report such scams through the Scamwatch website.'}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.9news.com.au/national/scam-warning-dial-1-phone-call-do-not-follow-it/ed1d6a55-6641-4732-8ded-8e40396c6af0"},children:"Read the Full Story"})]})]})};const Che=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Text-Page",children:[(0,ov.jsxs)("header",{className:"text-scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Text Scams"}),(0,ov.jsx)("p",{children:"Text scams involve deceptive text messages that trick individuals into revealing personal information or clicking on harmful links. These messages often appear to come from legitimate sources, like banks or government agencies, and may warn of suspicious activity or urgent problems. Scammers also use fake prize notifications and delivery alerts to lure victims into providing sensitive details or downloading malicious software. These scams exploit the trust people place in text messages to achieve their goals."})]}),(0,ov.jsxs)("section",{className:"text-scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify a Text Scam"}),(0,ov.jsxs)("p",{children:["It is likely that a text message is a scam if it:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Is unsolicited"}),(0,ov.jsx)("li",{children:"Asks you to take immediate action"}),(0,ov.jsx)("li",{children:"Asks you to click on a link"}),(0,ov.jsx)("li",{children:"Requests personal information"}),(0,ov.jsx)("li",{children:"Includes poor spelling and grammar"})]})]}),(0,ov.jsxs)("p",{children:["Examples of scam texts include:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Claiming that your account has been hacked"}),(0,ov.jsx)("li",{children:"Saying you have won a prize"}),(0,ov.jsx)("li",{children:"Informing you that a package you didn\u2019t order has arrived"}),(0,ov.jsx)("li",{children:"Claiming you have an overdue payment"})]})]}),(0,ov.jsx)("h4",{children:"Examples"}),(0,ov.jsx)("img",{src:"/images/Text_example1.png",alt:"Text example",className:"text-example-image"}),(0,ov.jsx)("img",{src:"/images/Text_example2.png",alt:"Text example",className:"text-example-image"}),(0,ov.jsxs)("p",{children:["Signs these texts are scams:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Encourages urgent action"}),(0,ov.jsx)("li",{children:"Encouraging you to open a link"})]})]})]}),(0,ov.jsxs)("section",{className:"text-protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsx)("p",{children:(0,ov.jsxs)("ul",{children:[(0,ov.jsxs)("li",{children:["Never open links you are sent",(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"Independently search for the website or use the organisation\u2019s authenticated portal or app"})})]}),(0,ov.jsxs)("li",{children:["Do your own check that the person contacting you is who they say they are",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Don\u2019t respond to the person using the phone number the sender has provided"}),(0,ov.jsx)("li",{children:"Call the organisation or person using a phone number you have found yourself, such as from their official website"}),(0,ov.jsxs)("li",{children:["If they claim they are someone you know using a new phone number",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Try to call them using the existing phone number you have"}),(0,ov.jsx)("li",{children:"Ask them a question that only they would know the answer to"})]})]})]})]})]})})]}),(0,ov.jsxs)("section",{className:"text-real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"\u2018Hi Mum\u2019 Scam Results in $2 Million Loss"})," ",(0,ov.jsx)("img",{src:"/images/Textscamrealstory.jpeg",alt:"Text scam real story",className:"example-image"}),(0,ov.jsx)("p",{children:'The "Hi Mum" scam has cost Australian parents over $2 million in recent months. The scam involves scammers sending text messages from unknown numbers, pretending to be a victim\'s child who has lost their phone. The scammer asks the parent to delete the old number and requests money, usually claiming an urgent need. The scam has primarily targeted victims in New South Wales and Victoria, with a significant increase in reports since May. Police and cybersecurity experts warn that money from these scams is often quickly moved into cryptocurrency, making it difficult for victims to recover their funds. Authorities advise verifying such messages by contacting the relative through an alternative method and reporting any suspicious activity to the police.'}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.9news.com.au/national/hi-mum-cyber-scam-warning-two-million-dollars-stolen/74cbffaf-9e36-4c69-88e4-26b54e730313"},children:"Read the Full Story"})]})]})};const Mhe=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Scams-Page",children:[(0,ov.jsxs)("header",{className:"scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Email Scams"}),(0,ov.jsx)("p",{children:"Email scams, often disguised as legitimate communications, use urgent or alarming messages to trick recipients into clicking on links or opening attachments. These emails may mimic messages from reputable companies or government agencies and aim to steal personal information, such as login credentials or bank account details. Some scams also install malware on the victim's device, compromising their security. It's essential to be cautious with emails from unknown senders and use spam filters to minimize risk."})]}),(0,ov.jsxs)("section",{className:"scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify an Email Scam"}),(0,ov.jsxs)("p",{children:[(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Includes generic greetings"}),(0,ov.jsxs)("li",{children:["Claims to be from an organisation but the email address does not match",(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"For example, it is a free webmail address (gmail, outlook) or the organisation\u2019s name is misspelt"})})]}),(0,ov.jsxs)("li",{children:["Includes a link that does not match the URL it goes to",(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"Hover over a link, but do NOT click on it to investigate the actual URL"})})]}),(0,ov.jsx)("li",{children:"Asks you to provide personal information"}),(0,ov.jsx)("li",{children:"Includes spelling and grammatical errors"})]}),(0,ov.jsx)("p",{children:"Examples of scam emails include:"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Claiming you are due to receive a large sum of money"}),(0,ov.jsx)("li",{children:"An invoice for a product you never bought"}),(0,ov.jsx)("li",{children:"Claiming your account will close soon unless you reactivate it"})]})]}),(0,ov.jsx)("h4",{children:"Examples"}),(0,ov.jsx)("img",{src:"/images/Email_example2.png",alt:"Email example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs this email is a scam:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Includes a generic greeting"}),(0,ov.jsx)("li",{children:"Creates a sense of urgency by making you fearful that there is a mistake with your taxes"}),(0,ov.jsx)("li",{children:"Encouraging  you to open a link"}),(0,ov.jsx)("li",{children:"Destination URL does not match the text shown"})]})]}),(0,ov.jsx)("img",{src:"/images/Email_example3.png",alt:"Email example",className:"example-image"}),(0,ov.jsx)("img",{src:"/images/Email_example4.png",alt:"Email example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs this email is a scam:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Claims to be from Telstra but email address does not match"}),(0,ov.jsx)("li",{children:"Includes a generic greeting"}),(0,ov.jsx)("li",{children:"Creates a sense of urgency by claiming your account will be terminated if you don\u2019t pay"}),(0,ov.jsx)("li",{children:"Destination URL for making the payment does not match what you would expect for an Australian company"})]})]})]}),(0,ov.jsxs)("section",{className:"protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsx)("p",{children:(0,ov.jsxs)("ul",{children:[(0,ov.jsxs)("li",{children:["Never open links you are sent",(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"Independently search for the website or use the organisation\u2019s authenticated portal or app"})})]}),(0,ov.jsx)("li",{children:"Independently find contact details for the person or organisation and use to verify if the email was real"}),(0,ov.jsxs)("li",{children:["To protect your email account",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Use unique passwords for your different accounts"}),(0,ov.jsx)("li",{children:"Use multi-factor authentication if it\u2019s available to add an extra layer of security"})]})]})]})})]}),(0,ov.jsxs)("section",{className:"real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"A new scam alleges you have overpaid your Netflix bill"})," ",(0,ov.jsx)("img",{src:"/images/Emailscamrealstory.jpeg",alt:"Email scam real story",className:"example-image"}),(0,ov.jsx)("p",{children:"A new phishing scam is targeting Netflix subscribers by claiming they have overpaid their bill and asking for banking details to process a refund. Scammers impersonate Netflix, using realistic-looking emails to deceive recipients. Cybercrime tracker Scamwatch warns users not to click any links and to delete such emails immediately. Netflix advises that they will never ask for personal information, such as bank details or passwords, via email or text and that payment should never be made through third-party vendors. Users are encouraged to verify any suspicious emails directly with the company rather than engaging with the message."}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.9news.com.au/national/netflix-scam-email-claims-you-overpaid-your-bill-and-are-entitled-to-a-refund/b4597579-73ba-4d77-8501-f64ddc516a40"},children:"Read the Full Story"})]})]})};const The=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Scams-Page",children:[(0,ov.jsxs)("header",{className:"scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Social Media Scams"}),(0,ov.jsx)("p",{children:"Social media scams often involve impersonation and phishing tactics, where scammers create fake profiles to mislead users. They may send spam messages or harmful links while pretending to be someone familiar or a reputable organization. These scams can take the form of deceptive romantic relationships, where trust is gradually built before soliciting money. They may also involve fake investment opportunities or fraudulent ads for non-existent products. By leveraging the personal and trusting aspects of social media, scammers manipulate victims into disclosing money or sensitive information."})]}),(0,ov.jsxs)("section",{className:"scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify a Social Media Scam"}),(0,ov.jsxs)("p",{children:["It is likely that you are encountering a social media scam if:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"You have received a request from someone you thought you were already connected to"}),(0,ov.jsx)("li",{children:"An ad shows a well-known figure promoting a product or service to make money"}),(0,ov.jsx)("li",{children:"You are receiving an unsolicited message"}),(0,ov.jsx)("li",{children:"Someone is urgently asking you for money"}),(0,ov.jsx)("li",{children:"Someone offers a quick and easy way to make money"}),(0,ov.jsx)("li",{children:"A profile has limited activity including few posts and few friends or followers"})]})]}),(0,ov.jsxs)("p",{children:["Examples of social media scams include:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Claiming that you\u2019ve won a giveaway and need to click a link to claim the prize"}),(0,ov.jsx)("li",{children:"Offering extremely low prices for items"}),(0,ov.jsx)("li",{children:"Offering to share information about a great investment opportunity"})]})]}),(0,ov.jsx)("h4",{children:"Examples"}),(0,ov.jsx)("img",{src:"/images/SocialMedia_example.png",alt:"Social Media example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs this message is a scam:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Unsolicited message"}),(0,ov.jsx)("li",{children:"Claiming you won a contest without entering"}),(0,ov.jsx)("li",{children:"Encouraging you to open a link"})]})]})]}),(0,ov.jsxs)("section",{className:"protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsx)("p",{children:(0,ov.jsxs)("ul",{children:[(0,ov.jsxs)("li",{children:["Investigate the profiles of people who contact you, check how many posts they have made and how many friends or followers they have",(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"A lack of activity and friends or followers can indicate that the profile is fake"})})]}),(0,ov.jsx)("li",{children:"Never send money to a person you have only met online"}),(0,ov.jsx)("li",{children:"Never send personal photos of yourself to someone you have only met online"}),(0,ov.jsx)("li",{children:"Never open links you are sent"}),(0,ov.jsx)("li",{children:"If they claim they are someone you know try contacting them through an existing method you have such as another social media platform or their phone number"}),(0,ov.jsxs)("li",{children:["To protect your social media accounts",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Use strong, unique password"}),(0,ov.jsx)("li",{children:"Enable multi-factor authentication if it\u2019s available"})]})]})]})})]}),(0,ov.jsxs)("section",{className:"real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"Social Media Scam Devastates Australian Woman, Leading to $100,000 Loss"})," ",(0,ov.jsx)("img",{src:"/images/SocialMediascamrealstory.jpeg",alt:"Social Media Scam Real Story",className:"example-image"}),(0,ov.jsx)("p",{children:"Deb, a 63-year-old Australian, was deceived by a sophisticated fraud syndicate advertising on Facebook. She clicked on an ad featuring a prominent Australian celebrity endorsing an investment opportunity. Interested, she signed up with the online trading platform and was soon contacted by Daniel, who posed as her investment broker. Over the next few months, Daniel maintained daily communication, persuading Deb to invest more money with promises of substantial returns. Ultimately, Deb lost her entire superannuation and savings, totaling over $100,000. Although devastated by the scam, Deb now dedicates her time to warning others by commenting on suspicious ads she encounters on Facebook."}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.abc.net.au/news/2024-04-15/australians-falling-for-facebook-fake-ads-online-trading-scams/103640678"},children:"Read the Full Story"})]})]})};const Ihe=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Scams-Page",children:[(0,ov.jsxs)("header",{className:"scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Website Scams"}),(0,ov.jsx)("p",{children:"Website scams are fraudulent sites designed to steal personal information, financial details, or money from unsuspecting users. These sites often mimic legitimate ones, like banks or online stores, to appear credible. Common types of website scams include phishing sites that steal login credentials, fake e-commerce sites that take payments without delivering goods, and investment scams promising high returns. Users should always verify a website's authenticity before entering sensitive information to avoid falling victim."})]}),(0,ov.jsxs)("section",{className:"scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify a Website Scam"}),(0,ov.jsxs)("p",{children:["It is likely that you are interacting with a scam website if it:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Has an unusual URL such as containing unnecessary words, extra characters, replaces letters with numbers or has words misspelt such as a company name"}),(0,ov.jsx)("li",{children:"Prices items significantly lower compare to other sites"}),(0,ov.jsx)("li",{children:"Requires unusual payment methods such as gift cards or cryptocurrency"}),(0,ov.jsx)("li",{children:"Contains only generic, positive reviews"}),(0,ov.jsx)("li",{children:"Has poor quality design and spelling and grammar errors"}),(0,ov.jsx)("li",{children:"Is missing a contact information section"}),(0,ov.jsx)("li",{children:"Is missing a shipping and return policy"})]})]}),(0,ov.jsx)("h4",{children:"Examples"}),(0,ov.jsx)("img",{src:"/images/Website_example1.png",alt:"Website example",className:"example-image"}),(0,ov.jsx)("img",{src:"/images/Website_example2.png",alt:"Website example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs the URLs are fake:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Organisation name is misspelt"}),(0,ov.jsx)("li",{children:"Numbers replacing letters in organisation name"})]})]})]}),(0,ov.jsxs)("section",{className:"protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsx)("p",{children:(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Research the organisation or person you\u2019re in contact with before providing any personal information or giving money"}),(0,ov.jsx)("li",{children:"Do not rely on reviews written on the website, search for independent reviews on other sites "}),(0,ov.jsx)("li",{children:"If a pop-up appears on the screen do not click on it"}),(0,ov.jsx)("li",{children:"If there is a secure, authenticated way to reach the organisation such as an app or portal use this"}),(0,ov.jsxs)("li",{children:["Look up the domain age using ",(0,ov.jsx)("a",{href:"https://whois.domaintools.com/",target:"_blank",rel:"noopener noreferrer",children:"Whois Lookup"}),(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"If a website has not been active for long it is more likely to be a fake website"})})]}),(0,ov.jsxs)("li",{children:["Use a website checker such as the ",(0,ov.jsx)("a",{href:"https://transparencyreport.google.com/safe-browsing/search?hl=en",target:"_blank",rel:"noopener noreferrer",children:"Google Transparency Report"})," or ",(0,ov.jsx)("a",{href:"https://www.urlvoid.com/",target:"_blank",rel:"noopener noreferrer",children:"URLVoid"})," to check if a website is safe"]})]})})]}),(0,ov.jsxs)("section",{className:"real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"Fake Websites Scamming Australian Shoppers by Imitating Popular Brands"})," ",(0,ov.jsx)("p",{children:"The Australian Competition and Consumer Commission (ACCC) has seen a rise in reports of fake websites mimicking popular Australian clothing brands such as Gorman, Peter Alexander, and RM Williams. These fraudulent sites, often advertised on social media, offer significant discounts on items, luring shoppers to enter their payment information. Victims either receive counterfeit products or nothing at all. The scam websites are sophisticated, using stolen branding, logos, and even Australian Business Numbers (ABNs) to appear legitimate. Companies like Meta and TikTok are working to remove these fake ads from their platforms, while the ACCC advises consumers to be cautious of deals that seem too good to be true and to use secure payment methods."}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.smh.com.au/national/the-fake-websites-scamming-customers-by-imitating-popular-brands-20230815-p5dwqk.html"},children:"Read the Full Story"})]})]})};const Bhe=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Scams-Page",children:[(0,ov.jsxs)("header",{className:"scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Romance Scams"}),(0,ov.jsx)("p",{children:"Romance scams occur when fraudsters create fake profiles on dating sites or social media to deceive victims emotionally and financially. These scammers often express love or emotional attachment early on to build trust, but they avoid meeting in person, citing reasons like being in the military or working overseas. Once trust is established, they ask for money, often for supposed emergencies. Victims should be wary of anyone who moves too quickly in a relationship and avoid sending money or personal information."})]}),(0,ov.jsxs)("section",{className:"scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify a Romance Scam"}),(0,ov.jsxs)("p",{children:["It is likely that you are encountering a romance scam if:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"They quickly profess to love you"}),(0,ov.jsx)("li",{children:"They make requests for money due to a personal emergency"}),(0,ov.jsx)("li",{children:"They are never able to meet in person or video call"}),(0,ov.jsx)("li",{children:"They want to move off of the dating site/app to another messaging platform"}),(0,ov.jsx)("li",{children:"They get angry if you ask questions or don\u2019t follow what they ask"}),(0,ov.jsx)("li",{children:"They offer to show you how to quickly and easily make money"}),(0,ov.jsx)("li",{children:"They want you to keep your relationship secret from friends and family"})]})]}),(0,ov.jsx)("h4",{children:"Examples"}),(0,ov.jsx)("img",{src:"/images/Romance_example.png",alt:"Investment example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs this is a romance scam:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Asking for money"}),(0,ov.jsx)("li",{children:"Creating a sense of urgency by making it seem like an emergency and that they'll only be able to meet if you send the money"})]})]})]}),(0,ov.jsxs)("section",{className:"protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsx)("p",{children:(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Don\u2019t send personal information or documents to someone you have only met online"}),(0,ov.jsx)("li",{children:"Never send money to someone you have only met online"}),(0,ov.jsx)("li",{children:"Don\u2019t share personal images or videos especially sexually intimate photos or videos with people you don\u2019t know"}),(0,ov.jsx)("li",{children:"Take things slowly and ask lots of questions to make sure everything about the person adds up"}),(0,ov.jsx)("li",{children:"Search for the person\u2019s name along with the word \u2018scam\u2019 and look for any results about romance scams"}),(0,ov.jsx)("li",{children:"If they send you a photo do a reverse image search and see if someone else owns the photos you\u2019ve been sent"}),(0,ov.jsx)("li",{children:"Speak to your family friends about your online relationships to get their perspective on if there are any red flags"})]})})]}),(0,ov.jsxs)("section",{className:"real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"Melbourne Woman Scammed by Online Romance"})," ",(0,ov.jsx)("img",{src:"/images/Romancescamrealstory.jpeg",alt:"Romance scam real story",className:"example-image"}),(0,ov.jsx)("p",{children:"A Melbourne single mother named Kate was scammed out of $11,000 by a man she met on a dating site, who went by the name Gabriel. After months of building trust, Gabriel convinced Kate to send him money for supposed emergencies involving his children. Despite her initial suspicions, Kate was ultimately tricked, leading to significant financial loss and emotional distress. This story highlights the growing threat of romance scams, where scammers prey on vulnerable individuals seeking companionship."}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.9news.com.au/national/scams-melbourne-woman-met-gabriel-on-a-dating-site-he-drained-her-bank-account-and-broke-her-heart/39b5a350-fc65-4a24-bb4e-e5036d391df4"},children:"Read the Full Story"})]})]})};const Phe=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Scams-Page",children:[(0,ov.jsxs)("header",{className:"scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Investment Scams"}),(0,ov.jsx)("p",{children:"Investment scams entice people with promises of high returns and low risk, often using persuasive tactics and fake credentials to appear legitimate. Scammers may reach out through phone calls, emails, or social media, pressuring victims to invest quickly. Common scams include Ponzi schemes, where new investors' money is used to pay earlier investors, creating the illusion of profitability. It's crucial to research thoroughly and be skeptical of any investment opportunity that seems too good to be true."})]}),(0,ov.jsxs)("section",{className:"scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify an Investment Scam"}),(0,ov.jsxs)("p",{children:["It is likely that you are encountering an investment scam if:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"They promise a low or no risk investment which will provide high returns"}),(0,ov.jsx)("li",{children:"They claim a well-known figure recommends the investment"}),(0,ov.jsx)("li",{children:"They make contact through an unsolicited message"}),(0,ov.jsx)("li",{children:"They request remote access to your device to set up accounts and make transactions"}),(0,ov.jsx)("li",{children:"They request payment in cryptocurrency"}),(0,ov.jsx)("li",{children:"The \u201cadviser\u201d who is helping you does not have an Australian financial services licence"})]})]}),(0,ov.jsxs)("p",{children:["Deepfakes are becoming a more common tool used by scammers. They are often used to create fake celebrity videos where they promote an investment. Signs that a video is a deepfake include:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"The person speaking with unusual pauses, odd pitches or different accents"}),(0,ov.jsx)("li",{children:"Mouth movements not matching what the person is saying"}),(0,ov.jsx)("li",{children:"Facial expressions and movements don\u2019t match the speaker\u2019s tone"})]})]}),(0,ov.jsx)("h4",{children:"Examples"}),(0,ov.jsx)("img",{src:"/images/Investment_example.png",alt:"Investment example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs this is a scam:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Unsolicited message"}),(0,ov.jsx)("li",{children:"Promising easy method to make high returns"})]})]})]}),(0,ov.jsxs)("section",{className:"protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsx)("p",{children:(0,ov.jsxs)("ul",{children:[(0,ov.jsxs)("li",{children:["Do your due diligence",(0,ov.jsxs)("ul",{children:[(0,ov.jsxs)("li",{children:["Search company on ",(0,ov.jsx)("a",{href:"https://moneysmart.gov.au/check-and-report-scams/investor-alert-list",target:"_blank",rel:"noopener noreferrer",children:"ASIC\u2019s investor alert list"})]}),(0,ov.jsxs)("li",{children:["Check that a person has an Australian financial services licence using the ",(0,ov.jsx)("a",{href:"https://moneysmart.gov.au/financial-advice/financial-advisers-register",target:"_blank",rel:"noopener noreferrer",children:"financial adviser\u2019s register"})]})]})]}),(0,ov.jsx)("li",{children:"Search for reviews about the investment on independent websites and search the investment name with the word \u2018scam\u2019"}),(0,ov.jsx)("li",{children:"Check that the person you are dealing with belongs to the organisation they claim to work for using contact details you have found yourself"}),(0,ov.jsx)("li",{children:"Get independent legal advice or financial advice from a financial advisor with an Australian financial services licence"}),(0,ov.jsxs)("li",{children:["Look up the domain age using ",(0,ov.jsx)("a",{href:"https://whois.domaintools.com/",target:"_blank",rel:"noopener noreferrer",children:"Whois Lookup"}),(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"If a website has not been active for long it is more likely to be a fake website"})})]})]})})]}),(0,ov.jsxs)("section",{className:"real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"Queensland Man Loses $500K in Retirement Savings to Sophisticated Investment Scam"})," ",(0,ov.jsx)("img",{src:"/images/Investmentrealstory.jpeg",alt:"Investment real story",className:"example-image"}),(0,ov.jsx)("p",{children:'A 66-year-old Queensland man, referred to as Ben, lost $500,000 of his retirement savings to a "sophisticated and socially engineered" investment scam. The scam began when Ben, grieving the loss of his wife, engaged with what he believed to be a legitimate investment firm on Facebook. The scammers created a fake investment account, showing false financial growth to lure Ben into transferring his savings over several months. Despite warnings from his bank and a scam prevention agency, Ben continued with the investment until it was too late to recover his funds. The incident highlights the emotional and financial devastation caused by such scams, especially targeting vulnerable individuals. Ben hopes sharing his story will prevent others from making similar mistakes.'}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.9news.com.au/national/scams-australia-queensland-man-loses-500k-retirement-savings-to-investment-scam/0ee978a5-6874-4dab-b517-d6ca5da3bc98"},children:"Read the Full Story"})]})]})};const Rhe=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Scams-Page",children:[(0,ov.jsxs)("header",{className:"scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Product And Service Scams"}),(0,ov.jsx)("p",{children:"Product and service scams involve scammers posing as legitimate buyers or sellers to trick victims into sending money or personal information. These scams often feature fake websites, online profiles, or ads that closely mimic real businesses, offering products and services at prices that seem too good to be true. Scammers may also alter payment details on legitimate invoices to redirect funds. Common examples include fake e-commerce sites and scams on platforms like Facebook Marketplace. Always verify the legitimacy of the seller and product before making any purchases."})]}),(0,ov.jsxs)("section",{className:"scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify a Product and Service Scam"}),(0,ov.jsxs)("p",{children:["It is likely that you are encountering a product and service scam if:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Items are offered at extremely low prices"}),(0,ov.jsx)("li",{children:"The website does not include terms and conditions, an ABN or a privacy policy"}),(0,ov.jsx)("li",{children:"They require an unusual payment method such as gift cards, crypto currency or PayPal\u2019s family and friends option"}),(0,ov.jsx)("li",{children:"You receive an invoice for something you haven\u2019t purchased"}),(0,ov.jsx)("li",{children:"A buyer sends a payment which is more than the agreed price and asks you to refund the amount they overpaid"}),(0,ov.jsx)("li",{children:"The details of an account holder don\u2019t match the person or business you think you\u2019re paying"})]})]}),(0,ov.jsx)("h4",{children:"Example"}),(0,ov.jsx)("img",{src:"/images/Product_example.png",alt:"Product example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs this is a scam website:",(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"All items on store are heavily discounted"})})]})]}),(0,ov.jsxs)("section",{className:"protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsx)("p",{children:(0,ov.jsxs)("ul",{children:[(0,ov.jsxs)("li",{children:["Search for the ABN on the website and verify it using ",(0,ov.jsx)("a",{href:"https://abr.business.gov.au/",target:"_blank",rel:"noopener noreferrer",children:"ABN lookup"})]}),(0,ov.jsxs)("li",{children:["Search for the official site of the organisation",(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"Don\u2019t assume that the first result from the search engine is the real website"})})]}),(0,ov.jsx)("li",{children:"Search for the website and the word \u2018scam\u2019 or \u2018review\u2019 and examine the results carefully"}),(0,ov.jsx)("li",{children:"Use secure payment methods that come with protections such as PayID or PayPal (NOT the family and friends option)"}),(0,ov.jsxs)("li",{children:["Look up the domain age using ",(0,ov.jsx)("a",{href:"https://whois.domaintools.com/",target:"_blank",rel:"noopener noreferrer",children:"Whois Lookup"}),(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:"If a website has not been active for long it is more likely to be a fake website"})})]}),(0,ov.jsxs)("li",{children:["If a website ends with .au use the ",(0,ov.jsx)("a",{href:"https://whois.auda.org.au/",target:"_blank",rel:"noopener noreferrer",children:"Australian Domain Authority\u2019s lookup"})," to check who has registered the website and compare it to the information given on the website"]})]})})]}),(0,ov.jsxs)("section",{className:"real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"Surge in Product and Service Scams in Australia"})," ",(0,ov.jsx)("img",{src:"/images/Productandservicescamrealstory.jpeg",alt:"Product and service scam real story",className:"example-image"}),(0,ov.jsx)("p",{children:"Product and service scams, especially false billing schemes, are increasing in Australia. Scammers impersonate businesses by altering invoices to divert payments to fraudulent accounts. Tour operator Meng Wong lost $80,000 when a client mistakenly paid a scammer. Australia's banks are introducing the Scam-Safe Accord to cross-check account details, a measure proven effective in reducing fraud overseas. The ACCC supports these efforts but urges stricter regulations to further protect consumers. Despite these initiatives, scams targeting high-value transactions are on the rise."}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.abc.net.au/news/2024-05-21/false-billing-scam-on-rise-australian-banks-powerless/103870850"},children:"Read the Full Story"})]})]})};const Dhe=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Scams-Page",children:[(0,ov.jsxs)("header",{className:"scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Job Scams"}),(0,ov.jsx)("p",{children:"Job or employment scams target job seekers with fake job listings or interviews, aiming to steal personal information or money. Scammers may post seemingly legitimate job ads and then ask applicants to pay fees for background checks, training, or equipment. They may also conduct fake interviews to make the scam seem more authentic. Red flags include requests for upfront payments, sharing of personal financial information before hiring, and job offers that seem too good to be true. It's important to verify the legitimacy of job offers and be cautious throughout the hiring process."})]}),(0,ov.jsxs)("section",{className:"scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify a Job Scam"}),(0,ov.jsxs)("p",{children:["It is likely that you are encountering a job scam if:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"The job offer is made through an unsolicited message"}),(0,ov.jsx)("li",{children:"You are told you can earn a high income with little effort while working from home"}),(0,ov.jsx)("li",{children:"The hiring process is very quick with no interview and without asking for references"}),(0,ov.jsx)("li",{children:"Personal information such as bank account details are requested before you are hired"}),(0,ov.jsx)("li",{children:"You are required to pay a recruitment fee or pay for training materials"}),(0,ov.jsx)("li",{children:"The job requires you to enrol new recruits"}),(0,ov.jsx)("li",{children:"You are told to top up an account with your own money to complete your job"})]})]}),(0,ov.jsx)("h4",{children:"Example"}),(0,ov.jsx)("img",{src:"/images/Employment_example.png",alt:"Employment example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs this is a scam:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Unsolicited message"}),(0,ov.jsx)("li",{children:"Claims you can earn money quickly and with little effort"})]})]})]}),(0,ov.jsxs)("section",{className:"protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsx)("p",{children:(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Don\u2019t trust that a job ad is real just because it appears on a trusted platform"}),(0,ov.jsx)("li",{children:"Never send money or provide personal information to anyone you have only met online"}),(0,ov.jsx)("li",{children:"Never send identity documents unless you are certain the organisation is genuine"}),(0,ov.jsx)("li",{children:"Never accept payments or rewards to recruit other people"}),(0,ov.jsx)("li",{children:"Independently verify the identities of anyone who has reached out to you, checking for contact details from the organisation\u2019s official website"}),(0,ov.jsx)("li",{children:"Search for reviews of the company"})]})})]}),(0,ov.jsxs)("section",{className:"real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"Cybersecurity Expert Loses $150,000 to Sophisticated Job Scam"})," ",(0,ov.jsx)("img",{src:"images/Jobscamrealstory.jpeg",alt:"Job scam real story",className:"example-image"}),(0,ov.jsx)("p",{children:"A Sydney cybersecurity expert, \"Josh\" (name changed), lost $150,000 of his and his parents' savings to a job scam. Despite having a degree in cybersecurity, Josh was tricked by a fake job ad on Instagram that led him to a WhatsApp chat, where scammers convinced him to transfer money to receive commissions for online tasks. Over three days, Josh was manipulated into draining his savings and even his parents' accounts. He realized it was a scam only after losing everything. The experience left him diagnosed with depression, and he now calls for greater accountability from social media platforms in verifying job ads to prevent such scams."}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.9news.com.au/national/job-ad-scam-it-worker-loses-150k/9486e365-d56c-4855-bdd0-9fe640ae3aae"},children:"Read the Full Story"})]})]})};const Ohe=function(){const e=ae();return(0,ov.jsxs)("div",{className:"Scams-Page",children:[(0,ov.jsxs)("header",{className:"scams-header",children:[(0,ov.jsx)("button",{onClick:()=>{e(-1)},children:"Back to Pervious Page"}),(0,ov.jsx)("h2",{children:"Impersonation Scams"}),(0,ov.jsx)("p",{children:"Impersonation scams involve scammers pretending to be someone trusted, such as a friend, company executive, or government official, to gain sensitive information or money. These scams can occur through phone calls, emails, social media, or even in person. Scammers create a sense of urgency or authority to pressure victims into complying with their demands, such as transferring funds or revealing confidential information. Verifying the identity of the person through official channels is essential to avoid being scammed."})]}),(0,ov.jsxs)("section",{className:"scam-identification",children:[(0,ov.jsx)("h3",{children:"How to Identify a Scam"}),(0,ov.jsxs)("p",{children:["It is likely that you are encountering an impersonation scam if:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"The message from an organisation is unexpected"}),(0,ov.jsx)("li",{children:"There is an urgent request for you to take immediate action"}),(0,ov.jsx)("li",{children:"You are asked to click on a link"}),(0,ov.jsx)("li",{children:"You are told there has been an unauthorised transaction on your account or asked to confirm a payment you did not make"}),(0,ov.jsx)("li",{children:"You are threatened with serious consequences such as arrest or deportation if you don\u2019t respond"}),(0,ov.jsx)("li",{children:"Details in the communication such as a URL or an email address do not match the organisation they are supposed to be from"}),(0,ov.jsx)("li",{children:"You are asked to make a payment to a different account then you expect"}),(0,ov.jsx)("li",{children:"A family member or friend contact you from a new number asking for financial help"})]})]}),(0,ov.jsx)("h4",{children:"Examples"}),(0,ov.jsx)("img",{src:"/images/Impersonation_example1.png",alt:"Impersonation example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs this is an impersonation scam:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Unexpected message"}),(0,ov.jsx)("li",{children:"Requesting personal information"}),(0,ov.jsx)("li",{children:"Encouraging you to open a link"}),(0,ov.jsx)("li",{children:"The link does not look correct for MyGov"})]})]}),(0,ov.jsx)("img",{src:"/images/Impersonation_example2.png",alt:"Impersonation example",className:"example-image"}),(0,ov.jsx)("img",{src:"/images/Impersonation_example3.png",alt:"Impersonation example",className:"example-image"}),(0,ov.jsxs)("p",{children:["Signs this is an impersonation scam:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Unexpected message"}),(0,ov.jsx)("li",{children:"Requests personal information"}),(0,ov.jsx)("li",{children:"Encouraging you to open a link"}),(0,ov.jsxs)("li",{children:["Sender email address looks suspicious",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Unusual for an email to end with .music"}),(0,ov.jsx)("li",{children:"Real spotify email would be from no-reply@spotify.com"})]})]})]})]}),(0,ov.jsxs)("p",{children:["Organisations that scammers will commonly impersonate include:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Banks"}),(0,ov.jsx)("li",{children:"Government departments"}),(0,ov.jsx)("li",{children:"Law enforcement"}),(0,ov.jsx)("li",{children:"Telecommunication companies"})]})]})]}),(0,ov.jsxs)("section",{className:"protect-yourself",children:[(0,ov.jsx)("h3",{children:"How to Protect Yourself"}),(0,ov.jsxs)("p",{children:["It is likely that you are encountering an impersonation scam if:",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Verify that the messages are real by directly contacting the person or organisation using contact details you have found yourself from their official website or through their secure, authenticated portal or app"}),(0,ov.jsx)("li",{children:"Immediately cut contact with anyone who tries to threaten you"}),(0,ov.jsx)("li",{children:"Don\u2019t open any links you are sent or download any attachments"}),(0,ov.jsxs)("li",{children:["If they claim they are someone you know using a new phone number",(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Try to call them using the existing phone number you have"}),(0,ov.jsx)("li",{children:"Ask them a question that only they would know the answer to"})]})]})]})]})]}),(0,ov.jsxs)("section",{className:"real-life-story",children:[(0,ov.jsx)("h3",{children:"Real-Life Story"}),(0,ov.jsx)("h4",{children:"ATO impersonation scam: mother-in-law lost $4000 over a fake tax debt"})," ",(0,ov.jsx)("img",{src:"/images/ImpersonationScamsrealstory.jpg",alt:"Impersonation Scams real story",className:"example-image"}),(0,ov.jsx)("p",{children:"A woman named Jane received a call from someone pretending to be from the Australian Taxation Office (ATO). The caller claimed she owed $4,000 in taxes and threatened her with arrest if she didn\u2019t pay immediately. The scammer\u2019s aggressive and intimidating behavior made Jane, who speaks English as a second language, extremely anxious. Fearing arrest, she complied with the scammer\u2019s demands and transferred the money. It wasn\u2019t until later that she realized she had been deceived. This incident underscores the importance of being cautious with unexpected calls or messages demanding money or personal details. It\u2019s crucial  to verify the identity of the caller by reaching out to the organization directly using official contact information."}),(0,ov.jsx)("button",{onClick:()=>{window.location.href="https://www.scamwatch.gov.au/protect-yourself/real-life-stories/scam-victims-tell-us-their-stories/ato-impersonation-scam-mother-in-law-lost-4000-over-a-fake-tax-debt"},children:"Read the Full Story"})]})]})},khe=()=>{const e=[{title:"Scenario 1",img:"/images/reallife_scenario/text_scams/Text Scenario 1.png",feedback:["Unfamiliar Link: The URL (post.deliverypackage.info) is unfamiliar and not from a legitimate delivery service.","Urgent Language: Scammers use pressure tactics like \u201cimmediate action.\u201d ","Unexpected Message: If you weren\u2019t expecting a package, it\u2019s likely fake. If you're concerned about a real delivery, contact the company directly via their official website or customer service."],areas:[{title:"Delete",top:"40px",right:"30px",width:"75px",height:"35px"},{title:"Message",top:"40px",left:"20px",width:"120px",height:"35px"},{title:"Link",top:"315px",left:"30px",width:"560px",height:"30px"},{title:"Link",top:"348px",left:"30px",width:"80px",height:"30px"}]},{title:"Scenario 2",img:"/images/reallife_scenario/text_scams/Text Scenario 2.png",feedback:["The .buzz domain is not typically used for legitimate business websites, especially for toll companies, which usually use .com, .com.au, or .gov.au. The domain (collections-service-au.buzz) doesn\u2019t match LINKT\u2019s official domain, which would be something like linkt.com.au. You can log in to the official website to check for any overdue payments or tolls without the risk of being directed to a fraudulent site."],areas:[{title:"Delete",top:"40px",right:"30px",width:"75px",height:"35px"},{title:"Message",top:"40px",left:"20px",width:"120px",height:"35px"},{title:"Link",top:"310px",left:"75px",width:"520px",height:"30px"}]},{title:"Scenario 3",img:"/images/reallife_scenario/text_scams/Text Scenario 3.png",feedback:["The URL uses 'Medicaid' instead of 'Medicare,' which is a common tactic scammers use to confuse recipients. Government-related websites in Australia typically end in '.gov.au' instead of '.com.' Legitimate Medicare communication would use a secure, official domain."],areas:[{title:"Delete",top:"40px",right:"30px",width:"75px",height:"35px"},{title:"Message",top:"40px",left:"20px",width:"120px",height:"35px"},{title:"Link",top:"315px",left:"30px",width:"190px",height:"30px"},{title:"Link",top:"280px",left:"200px",width:"310px",height:"30px"}]},{title:"Scenario 4",img:"/images/reallife_scenario/text_scams/Text Scenario 4.png",feedback:["The fake link appears legitimate, but the domain is slightly altered (e.g., 'verify-link.co' instead of a real Auspost domain). It creates a sense of urgency by telling her that her package won't be delivered without immediate action. Scammers often use  this tactic to trick people into revealing personal information."],areas:[{title:"Delete",top:"40px",right:"30px",width:"75px",height:"35px"},{title:"Message",top:"40px",left:"20px",width:"120px",height:"35px"},{title:"Link",top:"410px",left:"30px",width:"535px",height:"32px"}]},{title:"Scenario 5",img:"/images/reallife_scenario/text_scams/Text Scenario 5.png",feedback:["If you haven't entered a lottery, it's highly suspicious. The link contains unusual elements (e.g., 'Qlty') that aren't typical for legitimate websites. The message contains poor phrasing ('redeem the price'), which is unprofessional for a legitimate lottery organisation."],areas:[{title:"Delete",top:"40px",right:"30px",width:"75px",height:"35px"},{title:"Message",top:"40px",left:"20px",width:"120px",height:"35px"},{title:"Link",top:"338px",left:"30px",width:"560px",height:"30px"}]},{title:"Scenario 6",img:"/images/reallife_scenario/text_scams/Text Scenario 6.png",feedback:["It pressures you to act quickly, a common scam tactic. Claims a new number is needed because the old phone died, a typical scammer excuse. It suggests moving the conversation to WhatsApp, isolating you on a less monitored platform. The message doesn\u2019t include specific details about you or the sender, typical of mass scam messages."],areas:[{title:"Delete",top:"40px",right:"30px",width:"75px",height:"35px"},{title:"Message",top:"40px",left:"20px",width:"120px",height:"35px"},{title:"Link",top:"301px",right:"195px",width:"200px",height:"32px"}]}],[t,n]=(0,l.useState)(e[0]),[r,i]=(0,l.useState)(),[o,a]=(0,l.useState)(!1),[s,c]=(0,l.useState)("");return(0,ov.jsxs)("div",{className:"text-scams-quiz",children:[(0,ov.jsxs)("header",{className:"text-scams-quiz-header",children:[(0,ov.jsx)("h1",{children:"Text Scam Awareness"}),(0,ov.jsx)("p",{children:"Challenge yourself and see how much you know about identifying text scams!"})]}),(0,ov.jsxs)("div",{className:"text-scams-quiz-instructions",children:[(0,ov.jsx)("p",{children:"Imagine you receive a text message with a link or phone number. What would you do next?"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Would you delete or ignore the message right away?"}),(0,ov.jsx)("li",{children:"Or would you click the link without checking if it's legitimate?"})]}),(0,ov.jsx)("p",{children:"Click on the image below as if you're making the choice in real life. Choose wisely\u2014what's the safest action. Make your choice in this quiz!"})]}),(0,ov.jsxs)("div",{className:"text-scams-quiz-scenario",children:[(0,ov.jsx)("h2",{children:t.title}),(0,ov.jsxs)("div",{className:"text-scams-image-container",children:[(0,ov.jsx)("img",{src:t.img,alt:"Real life text scam scenario",className:"scenario-image"}),t.areas.map(((e,n)=>(0,ov.jsx)("div",{className:"clickable-area",style:{top:e.top,left:e.left,right:e.right,width:e.width,height:e.height},onClick:()=>(e=>{const n=t.feedback;i(n),"Link"===e.title?c((0,ov.jsx)("span",{style:{color:"red"},children:"SCAM!!!"})):c((0,ov.jsx)("span",{style:{color:"green"},children:"Nice Work!"})),a(!0)})(e)},n)))]}),(0,ov.jsx)("button",{onClick:()=>{let r;do{r=Math.floor(Math.random()*e.length)}while(e[r]===t);n(e[r]),a(!1)},className:"change-image-button",children:"Next Scenario"}),o&&(0,ov.jsx)("div",{className:"popup-modal",children:(0,ov.jsxs)("div",{className:"popup-content",children:[(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("h1",{children:s}),(0,ov.jsx)("h2",{children:"Explanation:"}),r.map(((e,t)=>(0,ov.jsx)("li",{children:e.trim()},t)))]}),(0,ov.jsx)("button",{onClick:()=>a(!1),className:"close-popup-button",children:"Close"})]})})]})]})},Lhe=()=>{const e=[{title:"Scenario 1",img:"/images/reallife_scenario/email_scams/Scam-email1.png",feedback:["Suspicious Sender: The email comes from 'icloudsecure.co', not a legitimate Apple domain.","Grammar Issues: There are noticeable errors, like 'you photos and videos,' which is uncommon for official emails.","Urgency Tactic: The message pressures you to act quickly, a common scam strategy.","Fake Links: The 'upgrade' link may lead to a phishing site. Always verify URLs before clicking.","Always check directly through official websites when in doubt."],areas:[{title:"Delete",top:"70px",left:"32px",width:"30px",height:"40px"},{title:"Close",top:"20px",right:"0px",width:"30px",height:"22px"},{title:"Link",top:"370px",right:"245px",width:"115px",height:"25px",link:"http://icloud-storage-upgrade.com"},{title:"Link",top:"410px",left:"240px",width:"310px",height:"25px",link:"http://icloud.secure.me"}]},{title:"Scenario 2",img:"/images/reallife_scenario/email_scams/Scam-email2.png",feedback:["Suspicious Sender: It\u2019s from a Gmail account, not a legitimate '@paypal.com' domain.","Unexpected Payment: If you didn\u2019t make a $35 payment, it's likely fake.","Urgency to Click: The 'Activate PayPal Now' button creates urgency, potentially leading to a phishing site.","Always verify by logging directly into your PayPal account, rather than clicking email links."],areas:[{title:"Delete",top:"70px",left:"32px",width:"30px",height:"40px"},{title:"Close",top:"20px",right:"0px",width:"30px",height:"22px"},{title:"Link",top:"538px",left:"340px",width:"115px",height:"30px",link:"http://paypal-account-secure-confirm.com"},{title:"Link",top:"590px",right:"315px",width:"135px",height:"25px",link:"http://paypal-purchase-details-review.com"}]},{title:"Scenario 3",img:"/images/reallife_scenario/email_scams/Scam-email3.png",feedback:["Unexpected Order: If you didn\u2019t place a $209.12 order, it's suspicious.","Generic Details: It only says 'Ship to: John,' withoud any address or other information which is vague and typical of phishing emails.","If you suspect a fake order, always go directly to the Amazon website by typing the URL into your browser instead of clicking links in an email."],areas:[{title:"Delete",top:"70px",left:"32px",width:"30px",height:"40px"},{title:"Close",top:"20px",right:"0px",width:"30px",height:"22px"},{title:"Link",top:"375px",left:"280px",width:"115px",height:"30px",link:"https://www.amazon.com/"}]},{title:"Scenario 4",img:"/images/reallife_scenario/email_scams/Scam-email4.png",feedback:["Suspicious Sender: It uses 'sharep0int@sharep0int.com' with a zero, mimicking the real SharePoint domain.","File Access: 'Employee Bonuses' should be personalized, yet the email states, 'This link will work for anyone,' which is suspicious.","Fake Branding: The 'Minisoft' logo instead of Microsoft is suspicious.","To stay safe, avoid clicking the link, and if you're unsure about the file, contact the sender directly or verify through official channels like your company's SharePoint system."],areas:[{title:"Delete",top:"70px",left:"32px",width:"30px",height:"40px"},{title:"Close",top:"20px",right:"0px",width:"30px",height:"22px"},{title:"Link",top:"565px",left:"340px",width:"115px",height:"30px",link:"http://sharep0int-files-portal.com/open-docs"}]}],[t,n]=(0,l.useState)(e[0]),[r,i]=(0,l.useState)(),[o,a]=(0,l.useState)(!1),[s,c]=(0,l.useState)(""),[u,h]=(0,l.useState)(null),d=()=>{h(null)};return(0,ov.jsxs)("div",{className:"text-scams-quiz",children:[(0,ov.jsxs)("header",{className:"text-scams-quiz-header",children:[(0,ov.jsx)("h1",{children:"Email Scam Awareness"}),(0,ov.jsx)("p",{children:"Challenge yourself and see how much you know about identifying text scams!"})]}),(0,ov.jsxs)("div",{className:"text-scams-quiz-instructions",children:[(0,ov.jsx)("p",{children:"Imagine you receive an email with a link or clickable button. What would you do next?"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:"Would you delete or ignore the email right away?"}),(0,ov.jsx)("li",{children:"Or would you click the link or the button without checking if it's legitimate?"})]}),(0,ov.jsx)("p",{children:"Click on the image below as if you're making the choice in real life. Choose wisely\u2014what's the safest action. Make your choice in this quiz!"})]}),(0,ov.jsxs)("div",{className:"text-scams-quiz-scenario",children:[(0,ov.jsx)("h2",{children:t.title}),(0,ov.jsxs)("div",{className:"text-scams-image-container",children:[(0,ov.jsx)("img",{src:t.img,alt:"Real life text scam scenario",className:"scenario-image"}),t.areas.map(((e,n)=>(0,ov.jsx)("div",{className:"clickable-area",style:{top:e.top,left:e.left,right:e.right,width:e.width,height:e.height},onClick:()=>(e=>{const n=t.feedback;i(n),"Link"===e.title?c((0,ov.jsx)("span",{style:{color:"red"},children:"SCAM!!!"})):c((0,ov.jsx)("span",{style:{color:"green"},children:"Nice Work!"})),a(!0)})(e),onMouseEnter:()=>(e=>{"Link"===e.title&&h(e.link)})(e),onMouseLeave:d},n))),u&&(0,ov.jsx)("div",{className:"hovered-link-popup",children:(0,ov.jsx)("p",{children:u})})]}),(0,ov.jsx)("button",{onClick:()=>{let r;do{r=Math.floor(Math.random()*e.length)}while(e[r]===t);n(e[r]),a(!1)},className:"change-image-button",children:"Next Scenario"}),o&&(0,ov.jsx)("div",{className:"popup-modal",children:(0,ov.jsxs)("div",{className:"popup-content",children:[(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("h1",{children:s}),(0,ov.jsx)("h2",{children:"Explanation:"}),r.map(((e,t)=>(0,ov.jsx)("li",{children:e.trim()},t)))]}),(0,ov.jsx)("button",{onClick:()=>a(!1),className:"close-popup-button",children:"Close"})]})})]})]})},Fhe=()=>{ae();return(0,ov.jsxs)("div",{className:"ReferencePage",children:[(0,ov.jsxs)("header",{className:"reference-header",children:[(0,ov.jsx)("h1",{children:"References"}),(0,ov.jsx)("p",{children:"Here is the list of references used on the website."})]}),(0,ov.jsxs)("div",{className:"reference-link",children:[(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Text or SMS Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/text-or-sms-scams",children:"Scamwatch Text or SMS Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.nab.com.au/about-us/security/online-safety-tips/identify-spam-phishing-messages",children:"NAB Identify Spam Phishing Messages"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://consumer.ftc.gov/articles/how-recognize-and-report-spam-text-messages",children:"FTC How to Recognize and Report Spam Text Messages"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Phone Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/phone-scams",children:"Scamwatch Phone Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.telstra.com.au/cyber-security-and-safety/scams/scam-phone-calls",children:"Telstra Scam Phone Calls"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.telstra.com.au/exchange/five-ways-to-spot-a-scam-call",children:"Telstra Five Ways to Spot a Scam Call"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Email Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/email-scams",children:"Scamwatch Email Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://support.microsoft.com/en-au/windows/protect-yourself-from-phishing-0c7ea947-ba98-3bd9-7184-430e1f860a44",children:"Microsoft Protect yourself from phishing"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://health.ucdavis.edu/cybersecurity/learning-center/spot-phishing-messages",children:"UC Davis Spot Phishing Messages"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Social Media Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/social-media-scams",children:"Scamwatch Social Media Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://cyberseniors.org/uncategorized/how-to-spot-and-avoid-social-media-scams/",children:"Cyber Seniors How to Spot and Avoid Social Media Scams"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Website Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/website-scams",children:"Scamwatch Website Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.choice.com.au/shopping/online-shopping/buying-online/articles/how-to-spot-a-fake-fraudulent-or-scam-website",children:"Choice 6 ways to spot a scam shopping site"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.aura.com/learn/how-to-identify-fake-websites",children:"Aura How to Identify Fake Websites"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Online Dating and Romance Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/online-dating-and-romance-scams",children:"Scamwatch Online Dating and Romance Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.commbank.com.au/support/security/romance-scams.html",children:"CommBank Romance Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.nab.com.au/about-us/security/online-safety-tips/romance-scams",children:"NAB Romance Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.aura.com/learn/how-to-spot-a-scammer-on-a-dating-site",children:"Aura How to Spot a Scammer on a Dating Site"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Investment Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/investment-scams",children:"Scamwatch Investment Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://moneysmart.gov.au/financial-scams/investment-scams",children:"Moneysmart Investment Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.commbank.com.au/support/security/investment-scams.html",children:"CommBank Investment Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.macquarie.com.au/security-and-fraud/scams/how-an-investment-scammer-can-find-and-target-you.html",children:"Macquarie How an investment scammer can find and target you"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Product and Service Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/product-and-service-scams",children:"Scamwatch Product and Service Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.nab.com.au/about-us/security/online-safety-tips/buying-selling-scams",children:"NAB Buying and Selling Scams"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Job Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/jobs-and-employment-scams",children:"Scamwatch Job Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.aura.com/learn/how-to-identify-job-scams",children:"Aura How to Identify Job Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.nab.com.au/about-us/security/online-safety-tips/employment-scams",children:"NAB Employment Scams"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Impersonation Scams"}),(0,ov.jsxs)("ul",{children:[(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.scamwatch.gov.au/types-of-scams/impersonation-scams",children:"Scamwatch Impersonation Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.newcastlepermanent.com.au/hub/impersonation-scams",children:"Newcastle Permanent Impersonation Scams"})}),(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://www.telstra.com.au/cyber-security-and-safety/active-scams#phone",children:"Telstra Active Scams"})})]})]}),(0,ov.jsxs)("details",{children:[(0,ov.jsx)("summary",{children:"Other"}),(0,ov.jsx)("ul",{children:(0,ov.jsx)("li",{children:(0,ov.jsx)("a",{href:"https://cyberseniors.org/uncategorized/how-to-spot-and-avoid-social-media-scams/",children:"Cyber Seniors How to Spot and Avoid Social Media Scams"})})})]})]})]})};const zhe=function(){return(0,ov.jsxs)("footer",{style:{marginTop:"auto",padding:"1rem",backgroundColor:"#203F9D",textAlign:"center",color:"#f0f0f0",height:"80px",display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box"},children:[(0,ov.jsx)("p",{style:{margin:0},children:"\xa9 2024 ScamGuard. All rights reserved."}),(0,ov.jsx)(De,{to:"/references",style:{color:"#FAFF00",marginLeft:"10px",fontSize:"18px"},children:"References"})]})};const Uhe=function(){const{pathname:e}=ie();return(0,l.useEffect)((()=>{window.scrollTo(0,0)}),[e]),null};const Nhe=function(){console.log("React App is loading");const e=()=>{window.scrollTo({top:0,behavior:"smooth"})};return(0,ov.jsxs)(Be,{basename:"/iteration2",children:[(0,ov.jsx)(Uhe,{}),(0,ov.jsxs)("div",{className:"App",children:[(0,ov.jsx)(Ehe,{}),(0,ov.jsxs)(_e,{children:[(0,ov.jsx)(xe,{path:"/",element:(0,ov.jsx)(T$,{scrollToTop:e})}),(0,ov.jsx)(xe,{path:"/references",element:(0,ov.jsx)(Fhe,{})}),(0,ov.jsx)(xe,{path:"/currentScam",element:(0,ov.jsx)(zle,{})}),(0,ov.jsx)(xe,{path:"/identifyScam",element:(0,ov.jsx)(Ule,{})}),(0,ov.jsx)(xe,{path:"/reportScam",element:(0,ov.jsx)(Nle,{})}),(0,ov.jsx)(xe,{path:"/whatToDo",element:(0,ov.jsx)(jle,{})}),(0,ov.jsx)(xe,{path:"/checkScam",element:(0,ov.jsx)(lhe,{})}),(0,ov.jsx)(xe,{path:"/riskAssessment",element:(0,ov.jsx)(_he,{})}),(0,ov.jsx)(xe,{path:"/quiz",element:(0,ov.jsx)(whe,{})}),(0,ov.jsx)(xe,{path:"/phone-scams",element:(0,ov.jsx)(She,{})}),(0,ov.jsx)(xe,{path:"/text-scams",element:(0,ov.jsx)(Che,{})}),(0,ov.jsx)(xe,{path:"/email-scams",element:(0,ov.jsx)(Mhe,{})}),(0,ov.jsx)(xe,{path:"/social-media-scams",element:(0,ov.jsx)(The,{})}),(0,ov.jsx)(xe,{path:"/website-scams",element:(0,ov.jsx)(Ihe,{})}),(0,ov.jsx)(xe,{path:"/romance-scams",element:(0,ov.jsx)(Bhe,{})}),(0,ov.jsx)(xe,{path:"/product-and-service-scams",element:(0,ov.jsx)(Rhe,{})}),(0,ov.jsx)(xe,{path:"/investment-scams",element:(0,ov.jsx)(Phe,{})}),(0,ov.jsx)(xe,{path:"/job-scams",element:(0,ov.jsx)(Dhe,{})}),(0,ov.jsx)(xe,{path:"/impersonation-scams",element:(0,ov.jsx)(Ohe,{})}),(0,ov.jsx)(xe,{path:"/text-scams-quiz",element:(0,ov.jsx)(khe,{})}),(0,ov.jsx)(xe,{path:"/email-scams-quiz",element:(0,ov.jsx)(Lhe,{})})]}),(0,ov.jsx)(zhe,{}),(0,ov.jsx)("div",{className:"scroll-to-top",onClick:e,children:"\u2191"})]})]})},jhe=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,6453)).then((t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:o,getTTFB:a}=t;n(e),r(e),i(e),o(e),a(e)}))};u.createRoot(document.getElementById("root")).render((0,ov.jsx)(l.StrictMode,{children:(0,ov.jsx)(Nhe,{})})),jhe()})()})();
//# sourceMappingURL=main.99b67663.js.map